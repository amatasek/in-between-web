import{j as e}from"./ui-D6NhbJM_.js";import{r as a,g as s,u as t}from"./vendor--mFYx9eN.js";import{a as n,u as r,s as i,U as l,f as c,L as o}from"./index-DAqpCjzk.js";import{C as d,a as m,R as u,P as _,S as h,I as x,c as g,b as p,G as j,U as f}from"./GamepadInput-6Zq6i_1i.js";import{u as v}from"./useGamepadNavigation-D-XLtfPQ.js";const N="🍯",b="🃏",y="✓",C="🃏",{TIMERS:I}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},w=a.createContext(),k=()=>{const e=a.useContext(w);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},T=({children:s,gameId:t,initialGameState:l=null})=>{const{socket:c,error:o}=n(),{user:d}=r(),[m,u]=a.useState(l);a.useRef({});const _=a.useRef(null),[h,x]=a.useState(null),g=a.useCallback((()=>{x(null)}),[]);a.useEffect((()=>{o&&x(o)}),[o]),a.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{u(e.game),x(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(m)!==JSON.stringify(e)){if(e.currentPlayerId&&d?.id){const a=e.currentPlayerId===d.id,s=_.current===d.id;a&&!s&&i.play("ui.alert"),_.current=e.currentPlayerId}u(e),g()}})),c.on("gameError",(e=>{x(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const p=a.useCallback((e=>{if(c&&t)try{c.emit("placeBet",{bet:e,gameId:t})}catch(a){x("Failed to place bet. Please try again.")}}),[c,t]),j=a.useCallback((()=>{if(c&&t)try{c.emit("payAnte",{gameId:t})}catch(e){x("Failed to pay ante. Please try again.")}}),[c,t]),f=a.useCallback((()=>{if(c&&t)try{c.emit("dealCards",{gameId:t})}catch(e){x("Failed to deal cards. Please try again.")}}),[c,t]),v=a.useCallback((()=>{if(c&&t)try{c.emit("revealMiddleCard",{gameId:t})}catch(e){x("Failed to reveal middle card. Please try again.")}}),[c,t]),N=a.useCallback((()=>{if(c&&t)try{c.emit("nextRound",{gameId:t})}catch(e){x("Failed to move to next round. Please try again.")}}),[c,t]),b=a.useCallback((()=>{if(c&&t)try{c.emit("ready")}catch(e){x("Failed to set player ready. Please try again.")}}),[c,t]),y=a.useCallback((()=>{if(c&&t)try{c.emit("unready")}catch(e){x("Failed to set player unready. Please try again.")}}),[c,t]),C={gameState:m,error:h,gameId:t,placeBet:p,payAnte:j,playerReady:b,playerUnready:y,dealCards:f,revealMiddleCard:v,nextRound:N,clearError:g};return e.jsx(w.Provider,{value:C,children:s})},S="_gameContainer_1f8yw_1",A="_gameScreen_1f8yw_5",B="_loadingContainer_1f8yw_31",P="_errorContainer_1f8yw_40",R="_errorText_1f8yw_50",L="_gameInfoWrapper_1f8yw_55",E="_gameBottomSection_1f8yw_70",$="_playerListContainer_1f8yw_77",O="_gameLogContainer_1f8yw_82",q={headerContainer:"_headerContainer_7fahv_1",desktopLayout:"_desktopLayout_7fahv_7",mobileLayout:"_mobileLayout_7fahv_13",mobileTopRow:"_mobileTopRow_7fahv_19",mobileRight:"_mobileRight_7fahv_31",mobileActions:"_mobileActions_7fahv_38",mobileBottomRow:"_mobileBottomRow_7fahv_45",headerLeft:"_headerLeft_7fahv_54",headerRight:"_headerRight_7fahv_60",controlsGroup:"_controlsGroup_7fahv_66",controlsStack:"_controlsStack_7fahv_73",mobileControlsStack:"_mobileControlsStack_7fahv_80",gameTitle:"_gameTitle_7fahv_89",liveTag:"_liveTag_7fahv_99",pulse:"_pulse_7fahv_1",gameIdText:"_gameIdText_7fahv_151",gameIdLink:"_gameIdLink_7fahv_158",headerCenter:"_headerCenter_7fahv_195",gamePhase:"_gamePhase_7fahv_223",phaseIcon:"_phaseIcon_7fahv_285",phaseText:"_phaseText_7fahv_290",timerBar:"_timerBar_7fahv_294",timerProgress:"_timerProgress_7fahv_304",dealPulse:"_dealPulse_7fahv_1",betPulse:"_betPulse_7fahv_1",revealFade:"_revealFade_7fahv_1",resultPulse:"_resultPulse_7fahv_1",phaseBettingYourTurn:"_phaseBettingYourTurn_7fahv_458",phaseBettingWaiting:"_phaseBettingWaiting_7fahv_465",reveal:"_reveal_7fahv_1",sparkle:"_sparkle_7fahv_1",timerDrain:"_timerDrain_7fahv_1"},D=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),F={waiting:{text:"Waiting for Players",icon:"👥"},dealing:{text:"Dealing Cards",icon:b},revealing:{text:"Revealing Cards",icon:"🥁"},results:{text:"Round Results",icon:"🏆"}},G=({handleLeaveGame:s,onModalStateChange:t})=>{const{gameState:i,gameId:l}=k(),{socket:c}=n(),{user:o}=r(),j=c?.auth?.userId,f=j&&i?.players?i.players[j]:null,v=f?.balance??o?.balance??0,N=i?.phase||"waiting",b=f?.isReady||!1,[y,C]=a.useState(null),[w,T]=a.useState(!1),[S,A]=a.useState(!1),[B,P]=a.useState(!1),[R,L]=a.useState(!1),[E,$]=a.useState(!1);a.useEffect((()=>{let e;return"dealing"===N?(C(I.DEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"betting"===N?(C(I.BETTING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"revealing"===N?(C(I.REVEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"results"===N?(C(I.RESULTS_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):C(null),()=>{e&&clearInterval(e)}}),[N,i?.waitingForAceDecision]),a.useEffect((()=>{t&&t(w||S||B||R||E)}),[w,S,B,R,E,t]);let O=F[N]||{text:"Unknown Phase",icon:"❓"};i?.waitingForAceDecision&&"dealing"===N&&(O={text:"Choosing Ace Value",icon:"🤔"}),i?.waitingForSecondChance&&(O={text:"Second Chance Decision",icon:"🤔"});const G=c&&c.auth?.userId&&i?.currentPlayerId===c.auth.userId;if("betting"===N&&i?.currentPlayerId&&i?.players){const e=i.players[i.currentPlayerId];O=e?G?{text:"Pass or Bet",icon:"🤔"}:{text:`${e.name} is Betting`,icon:"🤔"}:{text:"Betting Round",icon:"🤔"}}return e.jsxs("div",{className:q.headerContainer,children:[e.jsxs("div",{className:`panel ${q.desktopLayout}`,children:[e.jsxs("div",{className:q.headerLeft,children:[e.jsxs("h1",{className:q.gameTitle,children:["In Between ",e.jsx("span",{className:q.liveTag,children:"LIVE"})]}),e.jsx("p",{className:q.gameIdText,children:e.jsxs("span",{className:q.gameIdLink,onClick:()=>T(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",l]})})]}),e.jsx("div",{className:q.headerCenter,children:e.jsxs("div",{className:`${q.gamePhase} ${"betting"===N?G?q.phaseBettingYourTurn:q.phaseBettingWaiting:q[`phase${N.charAt(0).toUpperCase()+N.slice(1)}`]}`,"data-phase":N,children:[e.jsx("span",{className:q.phaseIcon,children:O.icon}),e.jsx("span",{className:q.phaseText,children:O.text}),null!==y&&e.jsx("div",{className:q.timerBar,children:e.jsx("div",{className:q.timerProgress,style:{width:y/("dealing"===N?I.DEALING_DURATION:"betting"===N?I.BETTING_DURATION:"revealing"===N?I.REVEALING_DURATION:I.RESULTS_DURATION)*100+"%"}})})]})}),e.jsx("div",{className:q.headerRight,children:e.jsxs("div",{className:q.controlsStack,children:[e.jsx("div",{className:"panel-alt",style:{padding:"0.2rem 0.4rem",margin:"0 0 0.2rem 0",gap:"0.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem",fontWeight:600,color:"#ecf0f1"},children:[e.jsx("span",{children:"Balance:"}),e.jsx(d,{amount:Number(v),size:"small"})]})}),e.jsxs("div",{className:q.controlsGroup,children:[e.jsx(m,{onModalStateChange:P,"data-gamepad-focusable":"true"}),e.jsx(u,{onModalStateChange:L,"data-gamepad-focusable":"true"}),e.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(h,{onClick:()=>A(!0),"data-gamepad-focusable":"true"}),e.jsx(x,{icon:e.jsx(D,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:b,"data-gamepad-focusable":"true"})]})]})})]}),e.jsxs("div",{className:`panel ${q.mobileLayout}`,children:[e.jsxs("div",{className:q.mobileTopRow,children:[e.jsxs("div",{className:q.headerLeft,children:[e.jsxs("h1",{className:q.gameTitle,children:["In Between ",e.jsx("span",{className:q.liveTag,children:"LIVE"})]}),e.jsx("p",{className:q.gameIdText,children:e.jsxs("span",{className:q.gameIdLink,onClick:()=>T(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",l]})})]}),e.jsx("div",{className:q.mobileRight,children:e.jsxs("div",{className:q.mobileControlsStack,children:[e.jsx("div",{className:"panel-alt",style:{padding:"0.15rem 0.35rem",margin:"0 0 0.2rem 0",gap:"0.25rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem",fontWeight:600,color:"#ecf0f1"},children:[e.jsx("span",{children:"Balance:"}),e.jsx(d,{amount:Number(v),size:"small"})]})}),e.jsxs("div",{className:q.mobileActions,children:[e.jsx(m,{onModalStateChange:P,"data-gamepad-focusable":"true"}),e.jsx(u,{onModalStateChange:L,"data-gamepad-focusable":"true"}),e.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(h,{onClick:()=>A(!0),"data-gamepad-focusable":"true"}),e.jsx(x,{icon:e.jsx(D,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:b,"data-gamepad-focusable":"true"})]})]})})]}),e.jsx("div",{className:q.mobileBottomRow,children:e.jsxs("div",{className:`${q.gamePhase} ${"betting"===N?G?q.phaseBettingYourTurn:q.phaseBettingWaiting:q[`phase${N.charAt(0).toUpperCase()+N.slice(1)}`]}`,"data-phase":N,children:[e.jsx("span",{className:q.phaseIcon,children:O.icon}),e.jsx("span",{className:q.phaseText,children:O.text}),null!==y&&e.jsx("div",{className:q.timerBar,children:e.jsx("div",{className:q.timerProgress,style:{width:y/("dealing"===N?I.DEALING_DURATION:"betting"===N?I.BETTING_DURATION:"revealing"===N?I.REVEALING_DURATION:I.RESULTS_DURATION)*100+"%"}})})]})})]}),w&&e.jsx(g,{onClose:()=>T(!1),gameData:i}),S&&e.jsx(p,{onClose:()=>A(!1)})]})},U={cardDisplayContainer:"_cardDisplayContainer_a7qnj_1",cardsRow:"_cardsRow_a7qnj_9",card:"_card_a7qnj_1",dealingPhase:"_dealingPhase_a7qnj_53",revealingPhase:"_revealingPhase_a7qnj_62",cardBack:"_cardBack_a7qnj_88",redCard:"_redCard_a7qnj_97",blackCard:"_blackCard_a7qnj_101",cardCorner:"_cardCorner_a7qnj_105",bottomRight:"_bottomRight_a7qnj_114",cardValue:"_cardValue_a7qnj_122",cardSuit:"_cardSuit_a7qnj_128",cardCenter:"_cardCenter_a7qnj_133",aceCard:"_aceCard_a7qnj_166",aceIndicator:"_aceIndicator_a7qnj_170",aceHigh:"_aceHigh_a7qnj_190",aceLow:"_aceLow_a7qnj_196",indicatorContent:"_indicatorContent_a7qnj_202"},z=({direction:a="up",color:s="currentColor",size:t=24})=>{const n="down"===a?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},W=()=>{const{gameState:a}=k();if(!a)return e.jsx("div",{className:U.loading,children:"Loading game state..."});const{firstCard:s,secondCard:t,thirdCard:n,phase:r,dealer:i}=a,l={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},c={hearts:"♥",diamonds:"♦",clubs:"♣",spades:"♠","♥":"♥","♦":"♦","♣":"♣","♠":"♠"},o=(a,s)=>{if(!a)return e.jsx("div",{className:U.card,children:e.jsx("div",{className:U.cardBack})},`empty-${s}`);const t="♥"===(n=a.suit)||"♦"===n||"hearts"===n||"diamonds"===n;var n;const r="A"===a.value,i=a.isAceLow,o=1===s;return e.jsxs("div",{className:`${U.card} ${t?U.redCard:U.blackCard} ${r?U.aceCard:""}`,children:[r&&!o&&e.jsx("div",{className:`${U.aceIndicator} ${i?U.aceLow:U.aceHigh} ${t?U.redCard:U.blackCard}`,children:i?e.jsxs("span",{className:U.indicatorContent,children:["LOW ",e.jsx(z,{direction:"down",color:t?"#e74c3c":"#2c3e50",size:16})]}):e.jsxs("span",{className:U.indicatorContent,children:["HIGH ",e.jsx(z,{direction:"up",color:t?"#e74c3c":"#2c3e50",size:16})]})}),e.jsxs("div",{className:U.cardCorner,children:[e.jsx("div",{className:U.cardValue,children:l[a.value]}),e.jsx("div",{className:U.cardSuit,children:c[a.suit]})]}),e.jsx("div",{className:U.cardCenter,children:c[a.suit]}),e.jsxs("div",{className:`${U.cardCorner} ${U.bottomRight}`,children:[e.jsx("div",{className:U.cardValue,children:l[a.value]}),e.jsx("div",{className:U.cardSuit,children:c[a.suit]})]})]},`${a.value}-${a.suit}-${s}`)};return e.jsx("div",{className:U.cardDisplayContainer,children:e.jsx("div",{className:`${U.cardsRow} ${"dealing"===r?U.dealingPhase:""} ${"revealing"===r?U.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return s||t||n?(s&&(e[0]={...s}),t&&(e[2]={...t}),n&&(e[1]={...n}),e.map(((e,a)=>o(e,a)))):e.map(((e,a)=>o(e,a)))})()})})},M="_bettingPanel_2vdkb_1",V="_betContainer_2vdkb_19",H="_betText_2vdkb_28",J="_extremeOptionsRow_2vdkb_45",Y="_betButtons_2vdkb_60",K="_customBetContainer_2vdkb_78",Q="_customBetInput_2vdkb_90",X="_potButton_1wzdu_5",Z="_shimmerBorder_1wzdu_47",ee="_buttonBackground_1wzdu_81",ae="_reflectionEffect_1wzdu_101",se="_buttonContent_1wzdu_148",te="_potText_1wzdu_164",ne="_potAmount_1wzdu_185",re="_disabled_1wzdu_258",ie=({amount:a,disabled:s,onClick:t,...n})=>e.jsxs("button",{className:`${X} ${s?re:""}`,onClick:t,disabled:s,"aria-label":`Bet the pot: ${a} chips`,...n,children:[e.jsx("div",{className:Z}),e.jsx("div",{className:ee}),e.jsx("div",{className:ae}),e.jsxs("div",{className:se,children:[e.jsx("span",{className:te,children:"POT"}),e.jsx("span",{className:ne,children:e.jsx(d,{amount:a,background:"pill"})})]})]}),le=()=>{const{gameState:s,placeBet:t}=k(),{socket:r}=n(),[i,l]=a.useState("");if(!s)return null;const{players:c,currentPlayerId:o,pot:m,phase:u,firstCard:_,secondCard:h}=s;if("betting"!==u)return null;const x=r&&o===r.auth?.userId,g=r&&c&&r.auth?.userId?c[r.auth.userId]:null,p=Number(g?.balance||0),f=e=>{const a=e.target.value.replace(/[^0-9]/g,""),s=Math.min(m,p);a&&parseInt(a)>s?l(s.toString()):l(a)},v=()=>{if(i&&!isNaN(i)){const e=parseInt(i,10);e>=1&&e<=Math.min(m,p)&&(t(e),l(""))}},N=e=>{"Enter"===e.key&&v()};return x?e.jsx("div",{className:M,children:x?e.jsxs("div",{className:V,children:[e.jsxs("p",{className:H,children:["Place your bet (Min: ",e.jsx(d,{amount:1}),", Max: ",e.jsx(d,{amount:Math.min(m,p)}),")"]}),e.jsxs("div",{className:J,children:[e.jsx("button",{className:"btn btn-secondary",style:{flex:1},onClick:()=>t(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),e.jsx(ie,{amount:m,onClick:()=>t(m),disabled:m>p,"data-gamepad-focusable":"true"})]}),e.jsxs("div",{className:Y,children:[[1,2,5].map((a=>{const s=Math.min(m,p),n=a>s;return e.jsx("button",{className:"btn btn-tertiary",style:{minWidth:"40px",padding:"0.65rem 0.4rem",fontSize:"0.95rem"},onClick:()=>t(a),disabled:n,"data-gamepad-focusable":"true",children:e.jsx(d,{amount:a})},a)})),e.jsxs("div",{className:K,children:[e.jsx(j,{title:"Enter Bet Amount",type:"number",className:Q,placeholder:"Custom",value:i,onChange:f,onKeyPress:N}),e.jsx("button",{className:"btn btn-primary",style:{minWidth:"40px",padding:"0.65rem 0.4rem",fontSize:"0.95rem"},onClick:v,disabled:!i,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},ce="_playersContainer_arq91_1",oe="_playersTitle_arq91_15",de="_playersList_arq91_38",me="_playerItem_arq91_46",ue="_currentPlayerGlow_arq91_61",_e="_currentUser_arq91_75",he="_playerInfo_arq91_79",xe="_playerStatus_arq91_87",ge="_disconnectedIndicator_arq91_94",pe="_playerBalanceContainer_arq91_101",je="_playerBalance_arq91_101",fe="_balanceIncrease_arq91_120",ve="_balanceDecrease_arq91_124",Ne="_readyIndicator_arq91_154",be="_ready_arq91_154",ye="_notReady_arq91_165",Ce="_sittingOut_arq91_169",Ie="_emptyPlayerList_arq91_184",we=()=>{const{gameState:s}=k(),{socket:t}=n(),r=a.useContext(l);if(a.useEffect((()=>{if(s?.players&&r){const e=Object.values(s.players).map((e=>e.userId)).filter(Boolean);e.length>0&&r.prefetchUsers(e)}}),[s?.players,r]),!s||!s.players)return e.jsx("div",{className:Ie,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:i,currentPlayerId:c,dealerId:o,gameTransactions:d=[]}=s,m=t?.auth?.userId,u=s.totals||{};return i&&0!==Object.keys(i).length?e.jsxs("div",{className:ce,children:[e.jsx("h3",{className:oe,children:"Scoreboard"}),e.jsx("div",{className:de,children:s.seats.filter((e=>null!==e&&i[e])).map((a=>{const s=i[a],t=a===c,n=s.userId===m,r=a===o;return s.disconnected,e.jsxs("div",{className:`\n                  ${t?"panel":"panel-alt"}\n                  ${me}\n                  ${t?ue:""}\n                  ${n?_e:""}\n                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem"},children:[e.jsxs("div",{className:he,children:[e.jsx(f,{userId:s.userId,size:"small",showName:!0,namePosition:"right"}),e.jsxs("span",{className:xe,children:[r&&` ${b}`,s.disconnected&&e.jsx("span",{className:ge,title:"Player disconnected",children:"⚠️ Disconnected"})]})]}),e.jsxs("div",{className:pe,children:[e.jsx(ke,{balance:u[a]||0}),e.jsx("div",{className:`\n                    ${Ne} \n                    ${s.isSittingOut?Ce:s.isReady?be:ye}\n                  `,title:s.isSittingOut?"Sitting Out":s.isReady?"Ready":"Not Ready"})]})]},a)}))})]}):e.jsx("div",{className:Ie,children:e.jsx("p",{children:"Waiting for players to join..."})})},ke=({balance:s})=>{const[t,n]=a.useState(s),[r,i]=a.useState(""),l=a.useRef(null);return a.useEffect((()=>{if(s!==t){i(s>t?fe:ve),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{i("")}),1e3),n(s)}return()=>{l.current&&clearTimeout(l.current)}}),[s]),e.jsx("span",{className:`${je} ${r}`,children:e.jsx(d,{amount:s})})},Te="_potIconWrapper_58b18_2",Se="_potIcon_58b18_2",Ae="_potInfo_58b18_28",Be="_potLabel_58b18_34",Pe="_potAmount_58b18_46",Re="_potCounter_58b18_53",Le=()=>{const{gameState:a}=k();if(!a)return null;const{pot:s,round:t=1}=a;return e.jsxs("div",{className:"card",style:{width:"150px",padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",border:"2px solid #f1c40f"},children:[e.jsx("div",{className:Te,children:e.jsx("span",{className:Se,children:N})}),e.jsxs("div",{className:Ae,children:[e.jsxs("h3",{className:Be,children:["POT ",e.jsxs("span",{className:Re,children:["(",t,")"]})]}),e.jsx("span",{className:Pe,children:e.jsx(d,{amount:s,size:"medium"})})]})]})},Ee="_deckVisual_nb490_2",$e="_deckIcon_nb490_9",Oe="_deckInfo_nb490_25",qe="_deckLabel_nb490_31",De="_deckCount_nb490_43",Fe="_deckCounter_nb490_50",Ge=()=>{const{gameState:a}=k();if(!a)return null;const{deckSize:s=0,deckCount:t=1}=a;return e.jsxs("div",{className:"card",style:{width:"150px",padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",border:"2px solid var(--info)"},children:[e.jsx("div",{className:Ee,children:e.jsx("div",{className:$e,children:C})}),e.jsxs("div",{className:Oe,children:[e.jsxs("h3",{className:qe,children:["DECK ",e.jsxs("span",{className:Fe,children:["(",t,")"]})]}),e.jsx("span",{className:De,children:s})]})]})},Ue="_anteControlsWrapper_ypuxr_1",ze="_controlsContainer_ypuxr_8",We="_autoAnteContainer_ypuxr_25",Me="_anteButton_ypuxr_32",Ve="_backOutButton_ypuxr_32",He="_shimmerBorder_ypuxr_106",Je="_anteIcon_ypuxr_224",Ye="_backOutIcon_ypuxr_224",Ke="_buttonInfo_ypuxr_243",Qe="_buttonLabel_ypuxr_249",Xe="_buttonAmount_ypuxr_266",Ze="_notEnoughChipsText_ypuxr_281",ea="_buttonContainerRow_ypuxr_293",aa="_sitOutHalfWidth_ypuxr_303",sa="_toggleLabel_8n6m6_2",ta="_toggleInput_8n6m6_9",na="_toggleSlider_8n6m6_15",ra="_toggleText_8n6m6_64",ia="_loading_8n6m6_72",la=()=>{const{preferences:a,toggleAutoAnte:s,loading:t}=c(),{gameState:r,playerReady:i}=k(),{socket:l}=n();return t?e.jsx("div",{className:ia,children:"Loading preferences..."}):e.jsx("div",{className:"panel-alt",style:{padding:"0.5rem 0.75rem",gap:"0",marginTop:"5px",maxWidth:"fit-content"},children:e.jsxs("label",{className:sa,children:[e.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{const e=!a.autoAnte,t=await s();if(e&&t&&i){let e=null;if(l&&l.auth?.userId&&r?.players){const a=Object.keys(r.players);for(const s of a)if(r.players[s].userId===l.auth.userId){e=r.players[s];break}}const a=e?.isReady;a||i()}},className:ta,"data-gamepad-focusable":"true"}),e.jsx("span",{className:na}),e.jsx("span",{className:ra,children:"Auto-Ante"})]})})},ca=()=>{const{gameState:a,playerReady:s,playerUnready:t}=k(),{socket:i}=n(),{user:l}=r();if(!a)return null;const{players:c,anteAmount:o,phase:m}=a;if("waiting"!==m)return null;let u=null;if(i&&i.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.auth.userId){u=c[a];break}}else if(l&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.id){u=c[a];break}}const _=Number(u?.balance||0),h=u?.isReady,x=_>=o;return e.jsx("div",{className:Ue,children:e.jsxs("div",{className:ze,children:[e.jsx("div",{className:ea,children:h?e.jsx("div",{className:ea,children:e.jsxs("button",{className:Ve,onClick:()=>{"function"==typeof t&&t()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:He}),e.jsx("span",{className:Ye,children:"✕"}),e.jsx("div",{className:Ke,children:e.jsx("h3",{className:Qe,children:"BACK OUT"})})]})}):e.jsxs("div",{className:ea,children:[e.jsxs("button",{className:Me,onClick:s,disabled:!x,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:He}),e.jsx("span",{className:Je,children:y}),e.jsxs("div",{className:Ke,children:[e.jsx("h3",{className:Qe,children:"ANTE"}),e.jsx("span",{className:Xe,children:e.jsx(d,{amount:o})})]})]}),e.jsxs("button",{className:`${Ve} ${aa}`,onClick:()=>{i&&a&&l&&i.emit("sitOut",{gameId:a.id,userId:i.auth?.userId||l.id})},disabled:u?.isSittingOut,title:u?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:He}),e.jsx("div",{className:Ke,children:e.jsx("h3",{className:Qe,children:"SIT OUT"})})]}),!x&&e.jsxs("p",{className:Ze,children:["Not enough coins (",e.jsx(d,{amount:o})," required)"]})]})}),e.jsx("div",{className:We,children:e.jsx(la,{})})]})})},oa={resultContent:"_resultContent_8ie9r_4",resultText:"_resultText_8ie9r_12",winText:"_winText_8ie9r_19",tieText:"_tieText_8ie9r_24",loseText:"_loseText_8ie9r_35",winningsText:"_winningsText_8ie9r_40",countdownContainer:"_countdownContainer_8ie9r_47",countdownText:"_countdownText_8ie9r_52",countdownProgress:"_countdownProgress_8ie9r_59",countdownBar:"_countdownBar_8ie9r_67",penaltyWarning:"_penaltyWarning_8ie9r_80",tiePanel:"_tiePanel_8ie9r_90"},da=()=>{const{gameState:a}=k();if(!a.result)return null;const{result:s,players:t,resultCountdown:n}=a,r=t[s.playerId]?.name,i="tie"===s.outcome?`panel-alt ${oa.tiePanel}`:"panel-alt";return e.jsx("div",{className:i,style:{maxWidth:"500px",margin:"1rem auto",width:"90%",animation:"fadeIn 0.5s ease-out"},children:e.jsxs("div",{className:oa.resultContent,children:[(()=>{switch(s.outcome){case"win":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${oa.resultText} ${oa.winText}`,children:[r," WON!"]}),s.winnings>0&&e.jsxs("p",{className:oa.winningsText,children:["Winnings: ",e.jsx(d,{amount:s.winnings/2,size:"medium"})]})]});case"lose":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${oa.resultText} ${oa.loseText}`,children:[r," LOST!"]}),s.betAmount>0&&e.jsxs("p",{className:oa.winningsText,children:["Loss: ",e.jsx(d,{amount:s.betAmount,size:"medium"})]})]});case"tie":return(()=>{const a=s.betAmount*(s.isTripleAceTie?3:2);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:oa.penaltyWarning,children:e.jsx("div",{className:oa.cautionTape})}),e.jsxs("h2",{className:`${oa.resultText} ${oa.tieText}`,children:[r," ",s.isTripleAceTie?"3X":"2X"," PENALTY!"]}),s.betAmount>0&&e.jsxs("p",{className:oa.winningsText,children:["Penalty: ",e.jsx(d,{amount:a,size:"medium"})]})]})})();default:return null}})(),n&&e.jsxs("div",{className:oa.countdownContainer,children:[e.jsxs("p",{className:oa.countdownText,children:["Next hand in: ",n.countdownSeconds,"s"]}),e.jsx("div",{className:oa.countdownProgress,children:e.jsx("div",{className:oa.countdownBar,style:{width:n.countdownSeconds/5*100+"%"}})})]})]})})},ma="_aceChoicePanel_xp6de_1",ua="_aceChoiceText_xp6de_19",_a="_waitingText_xp6de_28",ha="_countdown_xp6de_35",xa="_aceChoiceButtons_xp6de_41",ga="_buttonContent_xp6de_50",pa=()=>{const{socket:s}=n(),{gameState:t}=k(),{user:i}=r(),[l,c]=a.useState(15);a.useEffect((()=>{if(t?.waitingForAceDecision&&s?.auth?.userId===t.currentPlayerId){c(15);const e=setInterval((()=>{c((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[t?.waitingForAceDecision,t?.currentPlayerId,s?.auth?.userId]);const o=e=>{s.emit("chooseAceValue",{isAceLow:e})},d=s?.auth?.userId===t.currentPlayerId,m=t.players[t.currentPlayerId]?.name||"Current player";return e.jsxs("div",{className:ma,children:[d?e.jsxs("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsxs("p",{className:ua,children:["You've been dealt an Ace! Choose whether it should be high or low.",e.jsxs("span",{className:ha,children:[" (",l,"s)"]})]}),e.jsxs("div",{className:xa,children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>o(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsxs("span",{className:ga,children:["ACE LOW ",e.jsx(z,{direction:"down",color:"white",size:20})]})}),e.jsx("button",{className:"btn btn-tertiary",onClick:()=>o(!1),"data-gamepad-focusable":"true",children:e.jsxs("span",{className:ga,children:["ACE HIGH ",e.jsx(z,{direction:"up",color:"white",size:20})]})})]})]}):null,d?null:e.jsx("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem"},children:e.jsxs("p",{className:_a,children:[m," is choosing whether their Ace is high or low..."]})})]})},ja="_secondChancePanel_1sg84_1",fa="_secondChanceText_1sg84_19",va="_waitingText_1sg84_29",Na="_countdown_1sg84_36",ba="_secondChanceButtons_1sg84_43",ya="_currencyWrapper_1sg84_95",Ca=()=>{const{gameState:s}=k(),{socket:t}=n(),[r,i]=a.useState(!1),[l,c]=a.useState(null),[o,m]=a.useState(15);a.useEffect((()=>{if(s?.waitingForSecondChance&&t?.auth?.userId===s.currentPlayerId){m(15);const e=setInterval((()=>{m((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[s?.waitingForSecondChance,s?.currentPlayerId,t?.auth?.userId]);const{players:u,currentPlayerId:_,anteAmount:h=1}=s,x=t&&_===t.auth?.userId,g=u[_],p=e=>{t&&(i(!0),c(e?"ante":"pass"),t.emit("secondChance",{anteAgain:e}))};return e.jsxs("div",{className:ja,children:[x?e.jsxs("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsxs("p",{className:fa,children:["Would you like to ante up again for a second chance?",e.jsxs("span",{className:Na,children:[" (",o,"s)"]})]}),e.jsxs("div",{className:ba,children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>p(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:r&&"ante"===l?"Processing...":e.jsxs(e.Fragment,{children:["Ante Up ",e.jsx("span",{className:ya,children:e.jsx(d,{amount:h,size:"small"})})]})}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>p(!1),"data-gamepad-focusable":"true",children:r&&"pass"===l?"Processing...":"Pass"})]})]}):null,x?null:e.jsx("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem"},children:e.jsxs("p",{className:va,children:[g?.name," is deciding whether to take a second chance."]})})]})},Ia="_gameLogContainer_1fm8n_1",wa="_gameLogHeader_1fm8n_10",ka="_expandIcon_1fm8n_28",Ta="_gameLogEntries_1fm8n_51",Sa="_expanded_1fm8n_61",Aa="_logEntry_1fm8n_65",Ba="_logTime_1fm8n_90",Pa="_logMessage_1fm8n_97",Ra="_emptyLog_1fm8n_102",La="_showMoreButton_1fm8n_110",Ea=()=>{const{gameState:s}=k(),[t,n]=a.useState(!1);if(!s||!s.gameLog)return null;const r=s.gameLog||[],i=()=>{n(!t)},l=t?r:r.slice(0,5);return e.jsxs("div",{className:Ia,children:[e.jsxs("div",{className:wa,onClick:i,children:[e.jsx("h3",{children:"Game Log"}),e.jsx("span",{className:ka,children:t?"▲":"▼"})]}),e.jsx("div",{className:`${Ta} ${t?Sa:""}`,children:0===l.length?e.jsx("div",{className:Ra,children:"No game events yet"}):l.map(((a,s)=>{return e.jsxs("div",{className:Aa,children:[e.jsx("span",{className:Ba,children:(t=a.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),e.jsx("span",{className:Pa,children:a.message})]},s);var t}))}),!t&&r.length>5&&e.jsxs("div",{className:La,onClick:i,children:["Show ",r.length-5," more entries"]})]})},$a="_emojiReactions_1ibvr_1",Oa="_toggleButton_1ibvr_8",qa="_emojiPanel_1ibvr_34",Da="_emojiGrid_1ibvr_59",Fa="_emojiButton_1ibvr_65",Ga=()=>{const[s,t]=a.useState(!1),{socket:i}=n(),{gameState:l}=k(),{user:c}=r();return e.jsxs("div",{className:$a,children:[e.jsx("button",{className:Oa,onClick:()=>{t(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"😊"}),s&&e.jsx("div",{className:qa,children:e.jsx("div",{className:Da,children:[{emoji:"🔥",name:"Fire",color:"#FF6B35"},{emoji:"😄",name:"Happy",color:"#FFD93D"},{emoji:"💩",name:"Poop",color:"#8B4513"},{emoji:"😎",name:"Cool",color:"#4A5568"},{emoji:"🤯",name:"Mind Blown",color:"#FFA500"},{emoji:"😈",name:"Devilish",color:"#9333EA"},{emoji:"😬",name:"Worried",color:"#FCD34D"},{emoji:"👏",name:"Applause",color:"#FBBF24"},{emoji:"😭",name:"Crying",color:"#3B82F6"},{emoji:"🤡",name:"Clown",color:"#EF4444"},{emoji:"💪",name:"Strong",color:"#F59E0B"},{emoji:"😅",name:"Nervous",color:"#60A5FA"},{emoji:"🎉",name:"Celebration",color:"#A855F7"},{emoji:"🤔",name:"Thinking",color:"#6B7280"},{emoji:"🙈",name:"See No Evil",color:"#A0522D"},{emoji:"😤",name:"Confident",color:"#DC2626"}].map(((a,s)=>e.jsx("button",{className:Fa,onClick:()=>(e=>{i&&l&&c&&(i.emit("emojiReaction",{gameId:l.id,emoji:e.emoji,color:e.color,playerName:c.username}),t(!1))})(a),"data-gamepad-focusable":"true",title:a.name,style:{"--emoji-color":a.color},children:a.emoji},s)))})})]})},Ua=({onReturnToLobby:s})=>{const[t,i]=a.useState(!1),{gameState:l,error:c,clearError:o}=k();v(!0),a.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=n(),{user:m}=r();if(!l)return e.jsx("div",{className:B,children:e.jsx("p",{children:"Loading game state..."})});const u=l.phase||"waiting",_=m?.id,h=l.players&&_?l.players[_]:null;return e.jsxs("div",{className:`screen ${S}`,children:[e.jsxs("div",{className:`${A} mobile-scale-content`,children:[e.jsx(G,{handleLeaveGame:()=>{s&&s()},onModalStateChange:i}),c&&e.jsx("div",{className:P,children:e.jsx("p",{className:R,children:c})}),e.jsxs("div",{className:L,children:[e.jsx(Ge,{}),e.jsx(Le,{})]}),e.jsx(W,{}),h?.isSittingOut?e.jsx("button",{onClick:()=>{d&&l.id&&d.emit("imBack",{gameId:l.id})},className:"btn btn-primary",style:{maxWidth:"300px"},"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===u?e.jsx(ca,{}):"results"===u?e.jsx(da,{}):l.waitingForAceDecision?e.jsx(pa,{}):l.waitingForSecondChance?e.jsx(Ca,{}):"betting"===u?e.jsx(le,{}):null,e.jsxs("div",{className:E,children:[e.jsx("div",{className:$,children:e.jsx(we,{})}),e.jsx("div",{className:O,children:e.jsx(Ea,{})})]})]}),!t&&e.jsx(Ga,{})]})},za="_modalOverlay_jrbqi_1",Wa="_modalContent_jrbqi_14",Ma="_passwordInput_jrbqi_34",Va="_modalActions_jrbqi_52",Ha="_modalButton_jrbqi_58",Ja="_cancelButton_jrbqi_69",Ya="_submitButton_jrbqi_78";function Ka({isOpen:s,onClose:t,onSubmit:n,gameId:r}){const[i,l]=a.useState("");if(!s)return null;return e.jsx("div",{className:za,children:e.jsxs("div",{className:Wa,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:r||""}),":"]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(i),l("")},children:[e.jsx(j,{title:"Enter Game Password",type:"password",value:i,onChange:e=>l(e.target.value),className:Ma,autoFocus:!0,required:!0}),e.jsxs("div",{className:Va,children:[e.jsx("button",{type:"button",onClick:()=>{l(""),t()},className:`${Ha} ${Ja}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${Ha} ${Ya}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const Qa=()=>{const{gameId:r}=s(),l=t(),{socket:c,isConnected:d}=n(),[m,u]=a.useState(!0),[_,h]=a.useState(null),[x,g]=a.useState(!1),p=a.useRef(!1),j=a.useCallback((()=>{c&&d&&r&&(i.play("ui.leave"),c.emit("leaveGame",{gameId:r}),l("/"))}),[c,d,r,l]),f=a.useCallback((e=>{g(!1),c&&r&&e&&(h(null),c.emit("joinGame",{gameId:r,password:e}),u(!0))}),[c,r]),v=a.useCallback((()=>{g(!1),l("/")}),[l]);a.useEffect((()=>{h(null),g(!1),u(!0)}),[r]),a.useEffect((()=>{if(!c)return;const e=e=>{e&&e.game&&e.game.id===r&&(i.play("ui.join"),u(!1),h(null),g(!1))},a=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(g(!0),u(!1),h(null)):"Invalid password"===a?(h("Invalid password."),g(!0),u(!1)):"Game not found"===a?l("/"):"Game is full"===a?(h(a),u(!1),g(!1),setTimeout((()=>l("/")),3e3)):(h(a),u(!1),g(!1))};return c.on("gameJoined",e),c.on("error",a),()=>{c.off("gameJoined",e),c.off("error",a)}}),[c,r,l]),a.useEffect((()=>{c&&r&&!p.current&&(p.current=!0,u(!0),h(null),g(!1),c.emit("joinGame",{gameId:r}))}),[c,r]);const N=()=>{const{gameState:s}=k(),{socket:t}=n();return a.useEffect((()=>{const e=e=>{const a=t?.auth?.userId,n=a&&s?.players?s.players[a]:null;if(n?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,t]),e.jsxs(e.Fragment,{children:[e.jsx(Ka,{isOpen:x,onClose:v,onSubmit:f,gameId:r}),m&&e.jsx(o,{message:`Joining game ${r}...`}),_&&!m&&!x&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:_}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!m&&!_&&s&&e.jsx(Ua,{onReturnToLobby:j})]})};return e.jsx(T,{gameId:r,children:e.jsx(N,{})})};export{Qa as default};
