{"version":3,"file":"index-D_qSRp20.js","sources":["../../node_modules/react-dom/client.js","../../src/components/auth/AuthForm.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/constants/UIConstants.js","../../src/components/common/WelcomePopup.jsx","../../src/contexts/AuthContext.jsx","../../src/components/common/AppHeader.jsx","../../src/components/auth/AuthPage.jsx","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/contexts/LobbyContext.jsx","../../src/contexts/PreferencesContext.jsx","../../src/components/common/CoinIcon.jsx","../../src/components/common/CurrencyAmount.jsx","../../src/components/ToggleSwitch.jsx","../../src/components/FileUpload.jsx","../../src/components/PreferencesModal.jsx","../../src/components/PreferencesButton.jsx","../../src/components/UserAvatar.jsx","../../src/components/Lobby.jsx","../../src/contexts/GameContext.jsx","../../../shared/constants/GameConstants.js","../../src/components/MuteToggle.jsx","../../src/components/GameSummaryModal.jsx","../../src/components/GameHeader.jsx","../../src/components/icons/ArrowIcon.jsx","../../src/components/CardDisplay.jsx","../../src/components/PotButton.jsx","../../src/components/BettingPanel.jsx","../../src/components/PlayerList.jsx","../../src/components/PotDisplay.jsx","../../src/components/DeckDisplay.jsx","../../src/components/AutoAnteToggle.jsx","../../src/components/AnteControls.jsx","../../src/components/ResultsPanel.jsx","../../src/components/AceChoicePanel.jsx","../../src/components/SecondChancePanel.jsx","../../src/components/GameLog.jsx","../../src/components/GameScreen.jsx","../../src/components/common/LoadingScreen.jsx","../../src/components/GameRoom.jsx","../../src/router.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React, { useState } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Alert,\n  useMediaQuery,\n} from '@mui/material';\nimport styles from './AuthForm.module.css';\n\nconst AuthForm = ({ onSubmit, mode }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      await onSubmit(username, password);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <Paper className={styles.authForm} elevation={0}>\n      <Typography variant=\"h5\" component=\"h2\" gutterBottom sx={{ color: 'var(--info)', fontWeight: 600 }}>\n        {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2, backgroundColor: 'rgba(231, 76, 60, 0.2)', color: 'var(--text-primary)' }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Username\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 3 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n        \n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 6 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          size=\"large\"\n          className={styles.submitButton}\n          sx={{\n            mt: isSmallMobile ? 2 : 3,\n            background: 'linear-gradient(to right, var(--info), var(--success))',\n            textTransform: 'none',\n            fontWeight: 'bold',\n            letterSpacing: '0.5px',\n            padding: isSmallMobile ? '10px' : '12px',\n            fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            '&:hover': {\n              background: 'linear-gradient(to right, var(--info-dark), var(--success-dark))',\n              boxShadow: 'var(--shadow-lg)',\n              transform: 'translateY(-2px)'\n            }\n          }}\n        >\n          {mode === 'login' ? 'Sign In' : 'Create Account'}\n        </Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default AuthForm;\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\n\n// For Socket.io types, we'll define a simple interface that covers our usage\n/**\n * @typedef {Object} SocketIO\n * @property {boolean} connected - Whether the socket is connected\n * @property {string} id - The socket's ID\n * @property {function} emit - Function to emit events\n * @property {function} on - Function to listen for events\n * @property {function} off - Function to remove event listeners\n * @property {function} disconnect - Function to disconnect the socket\n */\n\n// Create context\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\n/**\n * @param {Object} props\n * @param {React.ReactNode} props.children\n */\nexport const SocketProvider = ({ children }) => {\n  /** @type {[SocketIO|null, React.Dispatch<React.SetStateAction<SocketIO|null>>]} */\n  const [socket, setSocket] = useState(null);\n  /** @type {[boolean, React.Dispatch<React.SetStateAction<boolean>>]} */\n  const [isConnected, setIsConnected] = useState(false);\n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    // Only run in browser environment\n    if (typeof window === 'undefined') {\n      return;\n    }\n    \n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Skip socket connection if no auth token is available\n      return;\n    }\n\n    // Initialize socket connection with auth token\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n    \n    // Socket transport events\n    newSocket.on('transport', transport => {\n      console.log(`[Socket] Transport: ${transport}`);\n    });\n    \n    setSocket(newSocket);\n\n    // Socket connection status\n    newSocket.on('connect', () => {\n      console.log(`[Socket] Connected: ${newSocket.id}`);\n      // Note: We don't set isConnected to true here yet\n      // We'll wait for the 'authenticated' event to confirm full authentication\n      setError(null);\n    });\n    \n    // Listen for authentication confirmation\n    newSocket.on('authenticated', (userData) => {\n      console.log('[Socket] Authentication successful', userData);\n      \n      // Store user data in the socket object for easy access\n      newSocket.auth = {\n        userId: userData.userId,\n        username: userData.username\n      };\n      \n      setIsConnected(true); // Now we can set isConnected to true\n      \n      // Request the game list when authenticated\n      console.log('[Socket] Requesting initial game list');\n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      console.error('[Socket] Connection error:', {\n        message: error.message,\n        description: error.description,\n        type: error.type,\n        data: error.data\n      });\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      console.log('[Socket] Disconnected from server');\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      console.error('Socket error:', err);\n      setError(err.message || 'Unknown socket error');\n    });\n\n    // Cleanup on unmount\n    return () => {\n      // Clean up socket connection and event listeners\n      if (newSocket) {\n        newSocket.off('connect');\n        newSocket.off('disconnect');\n        newSocket.off('connect_error');\n        newSocket.off('error');\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n  }, []);\n\n  /**\n   * @typedef {Object} SocketContextValue\n   * @property {SocketIO|null} socket - The Socket.IO instance\n   * @property {boolean} isConnected - Whether the socket is connected\n   * @property {string|null} error - Any error message\n   * @property {(error: string|null) => void} setError - Function to set error message\n   */\n\n  /** @type {SocketContextValue} */\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","/**\n * UI Constants for the In-Between game\n * Centralizing UI elements like icons makes them easier to update across the application\n */\n\n// Game Icons\nexport const ICONS = {\n  COIN: '🔶', // Yellow/gold diamond icon for currency\n  POT: '🍯',\n  DEALER: '🃏',\n  CHECK: '✓',\n  CARDS: '🎴',\n  DECK: '🃏', // Card deck icon\n  ARROW_UP: '⬆️', // Arrow up for Ace high\n  ARROW_DOWN: '⬇️', // Arrow down for Ace low\n};\n","import React from 'react';\nimport styles from './WelcomePopup.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A popup component that displays a welcome message and balance reset notification\n * @param {Object} props - Component props\n * @param {string} props.username - The username to display in the welcome message\n * @param {number} props.balance - The user's reset balance\n * @param {function} props.onClose - Function to call when the popup is closed\n */\nconst WelcomePopup = ({ username, balance, onClose }) => {\n  return (\n    <div className={styles.overlay}>\n      <div className={styles.popup}>\n        <div className={styles.header}>\n          <h2>Welcome, {username}!</h2>\n          <button className={styles.closeButton} onClick={onClose}>×</button>\n        </div>\n        <div className={styles.content}>\n          <p className={styles.message}>\n            Your balance has been reset to:\n          </p>\n          <p className={styles.balance}>\n            <span className={styles.coinIcon}>{ICONS.COIN}</span>\n            <span className={styles.balanceAmount}>{balance}</span>\n          </p>\n          <p className={styles.subtext}>\n            Thank you for participating in the <span className={styles.inlineGameName}>In Between <span className={styles.inlineLiveTag}>LIVE</span></span> beta program. Your feedback is valuable as we continue to enhance the gaming experience.\n          </p>\n        </div>\n        <div className={styles.footer}>\n          <button className={styles.actionButton} onClick={onClose}>\n            Let's Play!\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomePopup;\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdate', (data) => {\n        console.log(`[Auth] Balance update: ${data.balance}`);\n        if (data && typeof data.balance === 'number') {\n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state and local storage\n          setUser(updatedUser);\n          localStorage.setItem('user', JSON.stringify(updatedUser));\n          console.log(`[Auth] User balance updated: ${data.balance}`);\n          \n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdate');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async () => {\n    if (!token) return null;\n    \n    try {\n      console.log('[Auth] Fetching user data from /me endpoint');\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      console.log('[Auth] User data fetched successfully');\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Effect to load initial session from localStorage (token only)\n  useEffect(() => {\n    try {\n      // Check for stored token on mount\n      const storedToken = localStorage.getItem('token');\n      \n      if (storedToken) {\n        console.log('[Auth] Token found in localStorage, restoring session');\n        setToken(storedToken);\n        // We'll fetch the user data in the next useEffect\n      }\n    } catch (error) {\n      console.error('[Auth] Error restoring session:', error);\n      logout(); // Clear potentially corrupted data\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  \n  // Effect to fetch user data when token changes or on initial load\n  useEffect(() => {\n    console.log('[Auth] useEffect for fetchUserData triggered', { hasToken: !!token, isLoading: loading });\n    \n    if (!token || loading) {\n      console.log('[Auth] Skipping fetchUserData - no token or still loading');\n      return;\n    }\n    \n    // Track if the component is mounted to prevent state updates after unmount\n    let isMounted = true;\n    \n    const loadUserData = async () => {\n      // Always fetch fresh user data when we have a token\n      console.log('[Auth] Fetching fresh user data from /me endpoint');\n      const userData = await fetchUserData();\n      if (userData && isMounted) {\n        console.log('[Auth] User data received:', userData);\n        console.log('[Auth] User data structure:', {\n          id: userData?.id,\n          userId: userData?.userId,\n          username: userData?.username\n        });\n        setUser(userData);\n        console.log('[Auth] User data loaded from /me endpoint');\n      } else {\n        console.log('[Auth] No user data received or component unmounted', { userData, isMounted });\n        // If we couldn't get user data but have a token, something is wrong\n        if (isMounted && !userData) {\n          console.error('[Auth] Failed to fetch user data with valid token');\n          // Consider logging out the user if we can't get their data\n          // logout();\n        }\n      }\n    };\n    \n    loadUserData();\n    \n    // Cleanup function to prevent state updates after unmount\n    return () => {\n      isMounted = false;\n    };\n  }, [token, loading]); // Only depend on token and loading, not user\n\n  const login = async (userData, newToken) => {\n    console.log(`[Auth] Login: ${userData.username}`);\n    \n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      console.log(`[Auth] Login successful: ${initialUserData.username}`);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      setTimeout(async () => {\n        const completeUserData = await fetchUserData();\n        if (completeUserData) {\n          setUser(completeUserData);\n          console.log('[Auth] Updated user data with complete profile');\n        }\n      }, 500); // Small delay to ensure token is set\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    console.log('[Auth] Logout');\n    \n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage (only token is stored now)\n    localStorage.removeItem('token');\n    // Remove any legacy user data that might still be in localStorage\n    localStorage.removeItem('user');\n    \n    console.log('[Auth] User logged out, all data cleared');\n  };\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = async () => {\n    console.log('[Auth] Manually refreshing user data');\n    const userData = await fetchUserData();\n    if (userData) {\n      setUser(userData);\n      console.log('[Auth] User data refreshed successfully');\n      return userData;\n    }\n    console.log('[Auth] Failed to refresh user data');\n    return null;\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","import React from 'react';\nimport styles from './AppHeader.module.css';\n\n/**\n * A shared header component for the In-Between game\n * Used across auth and lobby screens for consistent branding\n */\nconst AppHeader = () => {\n  return (\n    <div className={styles.headerContainer}>\n      <h1 className={styles.gameTitle}>\n        In Between <span className={styles.liveTag}>LIVE</span>\n      </h1>\n    </div>\n  );\n};\n\nexport default AppHeader;\n","import React, { useState } from 'react';\nimport { Box, Button, Typography } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport AuthForm from './AuthForm.jsx';\nimport { useAuth } from '../../contexts/AuthContext';\nimport styles from './AuthPage.module.css';\nimport AppHeader from '../common/AppHeader';\n\nconst AuthPage = () => {\n  const [mode, setMode] = useState('login');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const [error, setError] = useState(null);\n\n  const handleAuth = async (username, password) => {\n    if (!username || !password) {\n      setError('Username and password are required');\n      return;\n    }\n\n    setError(null);\n    // Get API URL from environment or use localhost as fallback\n    const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    const endpoint = `${API_URL}/auth/${mode}`;\n    \n    console.log(`[Auth] ${mode.toUpperCase()} attempt: ${username}`);\n\n    try {\n      const requestBody = { username, password };\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(requestBody),\n      });\n\n      let data;\n      try {\n        data = await response.json();\n      } catch (error) {\n        console.error('[Client] Error parsing response:', error);\n        throw new Error('Invalid response from server');\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Authentication failed');\n      }\n\n      if (!data.user?.username || !data.user?.id || !data.token) {\n        console.error('[Client] Invalid response format:', {\n          hasUser: !!data.user,\n          hasUsername: !!data.user?.username,\n          hasId: !!data.user?.id,\n          hasToken: !!data.token\n        });\n        throw new Error('Invalid server response format');\n      }\n\n      console.log(`[Auth] ${mode.toUpperCase()} successful: ${data.user.username}`);\n      try {\n        login(data.user, data.token);\n        // Navigate to the lobby after successful login\n        navigate('/');\n      } catch (error) {\n        console.error('[Client] Error in login callback:', error);\n        throw new Error('Failed to initialize user session');\n      }\n    } catch (error) {\n      console.error('[Client] Auth error:', {\n        message: error.message,\n        endpoint,\n        mode\n      });\n      setError(error.message || 'Failed to connect to server');\n    }\n\n\n  };\n\n  return (\n    <Box className={styles.authPage}>\n      <AppHeader />\n      \n      <Box className={styles.formContainer}>\n        {error && (\n          <Typography className={styles.error}>\n            {error}\n          </Typography>\n        )}\n        \n        <AuthForm mode={mode} onSubmit={handleAuth} />\n        \n        <Box textAlign=\"center\" mt={3}>\n          <Button\n            color=\"primary\"\n            onClick={() => setMode(mode === 'login' ? 'register' : 'login')}\n            sx={{\n              color: '#ecf0f1',\n              textTransform: 'none',\n              fontSize: '1rem',\n              '&:hover': {\n                backgroundColor: 'rgba(255, 255, 255, 0.1)'\n              }\n            }}\n          >\n            {mode === 'login' \n              ? \"Don't have an account? Register\" \n              : \"Already have an account? Login\"}\n          </Button>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AuthPage;\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 1000];     // 0 to 1.0 seconds\n      sprites.leave = [1500, 1000]; // 1.5 to 2.5 seconds\n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\nimport { useAuth } from './AuthContext';\nimport soundService from '../services/SoundService';\n\n// Create context\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\n/**\n * Simplified LobbyContext that focuses solely on lobby functionality\n * Game-related functionality has been moved to the GameRoom component\n * \n * @param {Object} props\n * @param {React.ReactNode} props.children\n */\nexport const LobbyProvider = ({ children }) => {\n  const { socket, isConnected } = useSocket();\n  const { refreshUserData } = useAuth();\n  \n  // Initialize sound service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n  \n  // Game list state\n  const [gameList, setGameList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Set up socket event listeners for game list updates\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    \n    console.log('[Lobby] Setting up game list listeners with socket ID:', socket.id);\n    \n    const handleGameList = (games) => {\n      console.log(`[Lobby] 🔄 RECEIVED gameList event! Games available: ${games.length}`);\n      setGameList(games);\n      setLoading(false);\n    };\n    \n    const handleError = (err) => {\n      console.error('[Lobby] Socket error:', err);\n      setError(err.message || 'An error occurred');\n      setLoading(false);\n    };\n    \n    // Register event listeners\n    socket.on('gameList', handleGameList);\n    socket.on('error', handleError);\n    \n    // Add a test event listener to verify socket communication\n    socket.on('connect', () => {\n      console.log('[Lobby] Socket reconnected in LobbyContext');\n    });\n    \n    // Request game list\n    console.log('[Lobby] 📤 Requesting game list');\n    socket.emit('getGameList');\n    \n    // Clean up listeners when component unmounts\n    return () => {\n      console.log('[Lobby] 🧹 Cleaning up game list listeners');\n      socket.off('gameList', handleGameList);\n      socket.off('error', handleError);\n      socket.off('connect');\n    };\n  }, [socket, isConnected]);\n  \n  /**\n   * Request a refresh of the game list\n   */\n  const refreshGameList = () => {\n    if (socket && isConnected) {\n      console.log('[Lobby] Requesting game list refresh');\n      socket.emit('getGameList');\n    }\n  };\n\n  /**\n   * Leave a game and return to the lobby\n   * @param {string} gameId - The ID of the game to leave\n   */\n  const leaveGame = (gameId) => {\n    if (socket && isConnected && gameId) {\n      console.log(`[Lobby] Leaving game ${gameId}`);\n      soundService.play('ui.leave');\n      socket.emit('leaveGameLobby', { gameId });\n      refreshGameList();\n      refreshUserData();\n    }\n  };\n\n  // Simplified context value with only lobby-related functionality\n  const contextValue = {\n    gameList,\n    loading,\n    error,\n    refreshGameList,\n    leaveGame\n  };\n  \n  return (\n    <LobbyContext.Provider value={contextValue}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n    console.log('[Preferences] Loading preferences for user:', user.username);\n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        console.log(`[Preferences] Updating sound muted state to: ${value}`);\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      console.log(`[Preferences] Updated ${key}:`, data);\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      console.log(`[Preferences] Formatted ${key} response:`, formattedData);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting GIF upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending GIF upload request to: ${API_URL}/preferences/twoSecondPotGif`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] GIF upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded GIF:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted GIF URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting MP3 upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending MP3 upload request to: ${API_URL}/preferences/twoSecondPotMp3`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] MP3 upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded MP3:', data);\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting profile image upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending profile image upload request to: ${API_URL}/preferences/profileImg`);\n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] Profile image upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded profile image:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted profile image URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import React from 'react';\nimport styles from './CoinIcon.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A reusable coin icon component to replace dollar signs\n * @param {Object} props - Component props\n * @param {string} [props.size='small'] - Size of the coin icon ('small', 'medium', 'large')\n * @param {string} [props.className] - Additional CSS class to apply\n */\nconst CoinIcon = ({ size = 'small', className = '' }) => {\n  return (\n    <span className={`${styles.coinIcon} ${styles[size]} ${className}`}>\n      {ICONS.COIN}\n    </span>\n  );\n};\n\nexport default CoinIcon;\n","import React from 'react';\nimport styles from './CurrencyAmount.module.css';\nimport CoinIcon from './CoinIcon.jsx';\n\n/**\n * A reusable component that displays currency amounts with consistent styling\n * @param {Object} props - Component props\n * @param {number} props.amount - The amount to display\n * @param {string} props.size - The size of the coin icon (small, medium, large)\n * @param {string} props.background - Optional custom background style (e.g. 'dark', 'pill')\n * @param {string} props.customClass - Optional custom CSS class to apply\n */\nconst CurrencyAmount = ({ amount, size, background, customClass }) => {\n  // Determine which CSS classes to apply\n  const containerClasses = [\n    styles.currencyAmount,\n    background === 'dark' ? styles.darkBackground : '',\n    background === 'pill' ? styles.pillBackground : '',\n    customClass || ''\n  ].filter(Boolean).join(' ');\n  \n  return (\n    <span className={containerClasses}>\n      <CoinIcon size={size} />\n      <span>{amount}</span>\n    </span>\n  );\n};\n\nexport default CurrencyAmount;\n","import React from 'react';\nimport styles from './styles/ToggleSwitch.module.css';\n\nconst ToggleSwitch = ({ isChecked, onChange, label }) => {\n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={isChecked}\n          onChange={onChange}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        {label && <span className={styles.toggleText}>{label}</span>}\n      </label>\n    </div>\n  );\n};\n\nexport default ToggleSwitch;\n","import React, { useState, useRef } from 'react';\nimport styles from './styles/FileUpload.module.css';\n\nconst FileUpload = ({ \n  onUpload, \n  currentFileUrl, \n  acceptedFileTypes, \n  label,\n  previewType = 'image' // 'image', 'audio', or 'none'\n}) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null);\n  \n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.error('[FileUpload] No file selected');\n      return;\n    }\n    \n    console.log('[FileUpload] File selected:', {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n    \n    setError(null);\n    setIsUploading(true);\n    \n    try {\n      console.log('[FileUpload] Calling onUpload function');\n      const success = await onUpload(file);\n      console.log('[FileUpload] Upload result:', success);\n      \n      if (!success) {\n        console.error('[FileUpload] Upload failed');\n        setError('Failed to upload file. Please try again.');\n      } else {\n        console.log('[FileUpload] Upload successful');\n      }\n    } catch (err) {\n      console.error('[FileUpload] Error uploading file:', err);\n      setError('An error occurred during upload.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  const handleButtonClick = () => {\n    fileInputRef.current.click();\n  };\n  \n  const renderPreview = () => {\n    if (!currentFileUrl) return null;\n    \n    if (previewType === 'image') {\n      return (\n        <div className={styles.previewContainer}>\n          <img \n            src={currentFileUrl} \n            alt=\"Preview\" \n            className={styles.imagePreview} \n          />\n        </div>\n      );\n    } else if (previewType === 'audio') {\n      return (\n        <div className={styles.previewContainer}>\n          <audio \n            controls \n            src={currentFileUrl} \n            className={styles.audioPreview}\n          >\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      );\n    }\n    \n    return null;\n  };\n  \n  return (\n    <div className={styles.fileUploadContainer}>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileChange}\n        accept={acceptedFileTypes}\n        className={styles.fileInput}\n      />\n      \n      {currentFileUrl && renderPreview()}\n      \n      <button \n        type=\"button\" \n        onClick={handleButtonClick}\n        className={`${styles.uploadButton} ${currentFileUrl ? styles.changeButton : ''}`}\n        disabled={isUploading}\n      >\n        {isUploading ? 'Uploading...' : currentFileUrl ? `Change ${label}` : `Upload ${label}`}\n      </button>\n      \n      {error && (\n        <div className={styles.errorMessage}>\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport styles from './styles/PreferencesModal.module.css';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport FileUpload from './FileUpload.jsx';\n\nconst PreferencesModal = ({ onClose }) => {\n  const { \n    preferences, \n    toggleAutoAnte,\n    toggleMute,\n    uploadTwoSecondPotGif, \n    uploadTwoSecondPotMp3, \n    uploadProfileImg,\n    loading \n  } = usePreferences();\n\n  if (loading) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.loadingMessage}>Loading preferences...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.modalOverlay}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Preferences</h2>\n          <button className={styles.closeButton} onClick={onClose}>×</button>\n        </div>\n        \n        \n        <div className={styles.settingsContainer}>\n            \n            {/* Profile Image Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Profile Image</h4>\n                <p>Upload a profile image to personalize your account</p>\n              </div>\n              <FileUpload\n                onUpload={uploadProfileImg}\n                currentFileUrl={preferences.profileImg}\n                acceptedFileTypes=\"image/jpeg,image/png,image/gif\"\n                label=\"Image\"\n                previewType=\"image\"\n              />\n            </div>\n            \n            {/* Mute Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Mute Sound</h4>\n                <p>Mute all game sound effects</p>\n              </div>\n              <ToggleSwitch \n                isChecked={preferences.muted}\n                onChange={toggleMute}\n              />\n            </div>\n            \n            {/* Auto-Ante Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Auto-Ante</h4>\n                <p>Automatically ante up when a new round begins</p>\n              </div>\n              <ToggleSwitch \n                isChecked={preferences.autoAnte}\n                onChange={toggleAutoAnte}\n              />\n            </div>\n            \n            {/* Two Second Pot GIF Setting */}\n            <div className={styles.settingItem} style={{ position: 'relative', border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px' }}>\n              <div style={{\n                position: 'absolute',\n                top: '-12px',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#FFD700',\n                color: '#333',\n                padding: '2px 10px',\n                borderRadius: '4px',\n                fontWeight: 'bold',\n                fontSize: '14px'\n              }}>\n                COMING SOON\n              </div>\n              <div className={styles.settingDescription}>\n                <h4>Two Second POT GIF</h4>\n                <p>Upload a GIF to play when you slam the POT button</p>\n              </div>\n              <FileUpload\n                onUpload={uploadTwoSecondPotGif}\n                currentFileUrl={preferences.twoSecondPotGif}\n                acceptedFileTypes=\"image/gif\"\n                label=\"GIF\"\n                previewType=\"image\"\n              />\n            </div>\n            \n            {/* Two Second Pot MP3 Setting */}\n            <div className={styles.settingItem} style={{ position: 'relative', border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px' }}>\n              <div style={{\n                position: 'absolute',\n                top: '-12px',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#FFD700',\n                color: '#333',\n                padding: '2px 10px',\n                borderRadius: '4px',\n                fontWeight: 'bold',\n                fontSize: '14px'\n              }}>\n                COMING SOON\n              </div>\n              <div className={styles.settingDescription}>\n                <h4>Two Second POT Sound</h4>\n                <p>Upload a sound to play when you slam the POT button</p>\n              </div>\n              <FileUpload\n                onUpload={uploadTwoSecondPotMp3}\n                currentFileUrl={preferences.twoSecondPotMp3}\n                acceptedFileTypes=\"audio/mpeg,audio/wav\"\n                label=\"Sound\"\n                previewType=\"audio\"\n              />\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PreferencesModal;\n","import React from 'react';\nimport styles from './styles/PreferencesButton.module.css';\n\nconst PreferencesButton = ({ onClick }) => {\n  return (\n    <button \n      className={styles.preferencesButton}\n      onClick={onClick}\n      aria-label=\"Preferences\"\n    >\n      <div className={styles.iconContainer}>\n        <svg className={styles.gearIcon} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n          <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n        </svg>\n      </div>\n      <span className={styles.buttonText}>Preferences</span>\n    </button>\n  );\n};\n\nexport default PreferencesButton;\n","import React from 'react';\nimport styles from './styles/UserAvatar.module.css';\n\n/**\n * UserAvatar component displays a user's profile image or their initials if no image is available.\n * It can be used in various contexts like the lobby, player list, results screen, etc.\n * \n * @param {Object} props - Component props\n * @param {Object} props.user - User object containing username and profileImg\n * @param {string} props.size - Size of the avatar ('small', 'medium', 'large')\n * @param {boolean} props.showName - Whether to display the username next to the avatar\n * @param {string} props.namePosition - Position of the username ('right', 'below')\n * @param {string} props.className - Additional CSS class for styling\n */\nconst UserAvatar = ({ \n  user, \n  size = 'medium', \n  showName = true, \n  namePosition = 'right',\n  className = ''\n}) => {\n  if (!user) return null;\n  \n  const { username, profileImg } = user;\n  const initials = getInitials(username || 'Unknown');\n  const sizeClass = styles[size] || styles.medium;\n  const containerClass = showName ? styles[`container${namePosition.charAt(0).toUpperCase() + namePosition.slice(1)}`] : '';\n  \n  // Format the image URL to point to the server\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // Handle different URL formats\n  let formattedImageUrl = null;\n  if (profileImg) {\n    // If the URL already starts with http, use it as is\n    if (profileImg.startsWith('http')) {\n      formattedImageUrl = profileImg;\n    } \n    // If the URL contains /uploads/, replace it with /files/\n    else if (profileImg.includes('/uploads/')) {\n      // Extract just the filename from the path\n      const filename = profileImg.split('/').pop();\n      formattedImageUrl = `${API_URL}/files/images/${filename}`;\n    }\n    // Otherwise, just append the URL to the API_URL\n    else {\n      formattedImageUrl = `${API_URL}${profileImg}`;\n    }\n  }\n\n  \n  return (\n    <div className={`${styles.userAvatarContainer} ${containerClass} ${className}`}>\n      <div className={`${styles.avatar} ${sizeClass}`}>\n        {formattedImageUrl ? (\n          <img \n            src={formattedImageUrl} \n            alt={`${username}'s avatar`} \n            className={styles.avatarImage}\n            onError={(e) => {\n              console.error(`Failed to load profile image for ${username}:`, e);\n              e.target.style.display = 'none';\n              e.target.nextSibling.style.display = 'flex';\n            }}\n          />\n        ) : null}\n        <div \n          className={styles.initialsPlaceholder}\n          style={{ display: formattedImageUrl ? 'none' : 'flex' }}\n        >\n          {initials}\n        </div>\n      </div>\n      \n      {showName && (\n        <div className={styles.username}>\n          {username || 'Unknown'}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Helper function to get initials from a name\nconst getInitials = (name) => {\n  if (!name) return '?';\n  \n  return name\n    .split(' ')\n    .map(part => part.charAt(0))\n    .join('')\n    .toUpperCase()\n    .substring(0, 2);\n};\n\nexport default UserAvatar;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport styles from './styles/Lobby.module.css';\nimport { useLobby, LobbyProvider } from '../contexts/LobbyContext.jsx';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { CircularProgress, Box, Typography, TextField, useMediaQuery, InputAdornment } from '@mui/material';\nimport AppHeader from './common/AppHeader';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PreferencesModal from './PreferencesModal.jsx';\nimport PreferencesButton from './PreferencesButton.jsx';\nimport UserAvatar from './UserAvatar.jsx';\nimport soundService from '../services/SoundService';\n\nconst Lobby = () => {\n  // Get state and actions from lobby and auth contexts\n  const { gameList, loading: lobbyLoading, error: lobbyError, refreshGameList } = useLobby();\n  const { user, logout } = useAuth();\n  const { socket, isConnected } = useSocket();\n  const { preferences } = usePreferences();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showPreferences, setShowPreferences] = useState(false);\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n  \n  // Get the correct user ID format for server comparison (server uses format like 'user_username')\n  const userId = user?.username ? `user_${user.username}` : null;\n\n  // We'll handle loading state manually instead of using an effect\n\n  // Check user data and socket connection status\n  useEffect(() => {\n    try {\n      // Check if user exists and has required properties\n      if (!user) {\n        console.log('[Lobby] No user data found');\n        setError('Please log in to continue');\n        setIsLoading(false);\n        return;\n      }\n\n      if (!user.username || !user.id) {\n        console.error('[Lobby] Invalid user data:', user);\n        setError('Invalid user data');\n        logout(); // Clear invalid session\n        setIsLoading(false);\n        return;\n      }\n\n      console.log('[Lobby] Current user state:', {\n        username: user.username,\n        id: user.id\n      });\n\n      // Only stop loading when socket is connected\n      if (isConnected) {\n        console.log('[Lobby] Socket connected, ready to create/join games');\n        setIsLoading(false);\n        setError(null);\n        \n        // We've removed the localStorage approach since we fixed the core issue\n        // with duplicate event handlers in GameContext and LobbyContext\n      } else {\n        console.log('[Lobby] Waiting for socket connection...');\n        setIsLoading(true);\n        \n        // Set a timeout to prevent getting stuck on loading screen\n        const timeoutId = setTimeout(() => {\n          console.log('[Lobby] Socket connection timeout, proceeding anyway');\n          setIsLoading(false);\n        }, 3000); // 3 seconds timeout\n        \n        return () => clearTimeout(timeoutId);\n      }\n    } catch (err) {\n      console.error('[Lobby] Error processing user data:', err);\n      setError('Error loading user data');\n      logout(); // Clear potentially corrupted session\n      setIsLoading(false);\n    }\n  }, [user, logout, isConnected]);\n  \n  // Handle creating a new game\n  const handleCreateGame = () => {\n    if (!user?.id) {\n      setError('Please log in to create a game');\n      return;\n    }\n    \n    if (!isConnected) {\n      setError('Not connected to server');\n      return;\n    }\n    \n    // First clear any errors\n    setError(null);\n    \n    setIsLoading(true);\n    \n    // Play sound for game creation\n    soundService.play('ui.join');\n    \n    // With our new approach, we just need to set up a one-time event listener\n    // and then navigate to the game URL when we receive the gameJoined event\n    const timeoutId = setTimeout(() => {\n      socket.off('gameJoined', handleGameCreated);\n      setError('Game creation timed out');\n      setIsLoading(false);\n    }, 5000);\n    \n    const handleGameCreated = (data) => {\n      if (data && data.game && data.game.id) {\n        console.log(`[Lobby] Game created with ID: ${data.game.id}`);\n        // Clear the timeout since we've received a response\n        clearTimeout(timeoutId);\n        // Remove the event listener to avoid duplicates\n        socket.off('gameJoined', handleGameCreated);\n        // Navigate to the new game\n        window.location.href = `/${data.game.id}`;\n      }\n    };\n    \n    // Register the event listener\n    socket.on('gameJoined', handleGameCreated);\n    \n    // Emit the createGame event\n    console.log('[Lobby] Emitting createGame event');\n    socket.emit('createGame');\n  };\n  \n  const handleJoinGame = (gameId) => {\n    if (!isConnected) {\n      setError('Not connected to server');\n      return;\n    }\n    \n    if (!user) {\n      setError('Please log in to join a game');\n      return;\n    }\n    \n    // First clear any errors\n    setError(null);\n    \n    // Show loading overlay\n    setIsLoading(true);\n    \n    // First join the game via socket to ensure server-side state is updated\n    console.log(`[Lobby] Joining game ${gameId}`);\n    socket.emit('joinGame', { gameId });\n    \n    // Then navigate to the game route without page reload\n    // Use React Router's navigate function instead of window.location.href\n    // This prevents the socket connection from being disconnected and reconnected\n    setTimeout(() => {\n      window.location.href = `/${gameId}`;\n    }, 500);\n  };\n  \n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  // Filter and sort games based on search query and user's status\n  const filteredGameList = useMemo(() => {\n    if (!gameList) return [];\n    \n    // Debug log to see what game list data is being received\n    console.log('[Lobby] Game list data:', gameList);\n    // Debug log to understand the user object structure\n    console.log('[Lobby] Complete user object:', user);\n    \n    // Log the user ID we're using for server comparison\n    console.log('[Lobby] User ID for server comparison:', userId);\n    \n    // First filter by search query if one exists\n    let filtered = gameList;\n    if (searchQuery.trim()) {\n      const query = searchQuery.trim().toLowerCase();\n      filtered = gameList.filter(game => \n        game.id.toLowerCase().includes(query)\n      );\n    }\n    \n    // Then sort games with the following priority:\n    // 1. Games where user is disconnected (highest priority)\n    // 2. Games where user is a player but connected\n    // 3. All other games (alphabetical by ID)\n    return filtered.sort((a, b) => {\n      // userId is now defined at a higher scope\n      \n      // Check if current user is in either game\n      const userInGameA = a.allPlayers?.some(player => player.userId === userId);\n      const userInGameB = b.allPlayers?.some(player => player.userId === userId);\n      \n      // Check if current user is disconnected in either game\n      const userDisconnectedInA = a.disconnectedPlayers?.some(player => player.userId === userId);\n      const userDisconnectedInB = b.disconnectedPlayers?.some(player => player.userId === userId);\n      \n      // Sort logic with priority\n      if (userDisconnectedInA && !userDisconnectedInB) return -1;\n      if (!userDisconnectedInA && userDisconnectedInB) return 1;\n      if (userInGameA && !userInGameB) return -1;\n      if (!userInGameA && userInGameB) return 1;\n      return a.id.localeCompare(b.id); // Alphabetical by ID if tie\n    });\n  }, [gameList, searchQuery, user?.id]);\n  \n  // Loading overlay component that shows during game transitions\n  const LoadingOverlay = () => (\n    <Box sx={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'rgba(26, 26, 46, 0.9)',\n      zIndex: 1000,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      gap: 3\n    }}>\n      <CircularProgress size={60} sx={{ color: '#3498db' }} />\n      <Typography variant=\"h6\" sx={{ color: '#ecf0f1', mt: 2 }}>\n        Connecting to game...\n      </Typography>\n      <Typography variant=\"body1\" sx={{ color: '#bdc3c7', textAlign: 'center', maxWidth: '80%' }}>\n        Please wait while we establish a connection to the game.\n      </Typography>\n    </Box>\n  );\n\n  // Render loading state while socket is connecting\n  if (isLoading) {\n    return (\n      <div className={styles.lobbyContainer}>\n        <AppHeader />\n        \n        <Box sx={{ \n          display: 'flex', \n          flexDirection: 'column', \n          alignItems: 'center', \n          justifyContent: 'center',\n          height: '50vh',\n          gap: 3\n        }}>\n          <CircularProgress size={60} sx={{ color: '#3498db' }} />\n          <Typography variant=\"h6\" sx={{ color: '#ecf0f1', mt: 2 }}>\n            Connecting to game server...\n          </Typography>\n          <Typography variant=\"body1\" sx={{ color: '#bdc3c7', textAlign: 'center', maxWidth: '80%' }}>\n            Please wait while we establish a secure connection to the game server.\n          </Typography>\n        </Box>\n      </div>\n    );\n  }\n  \n  return (\n    <div className={styles.lobbyContainer}>\n      <AppHeader />\n      \n      {showPreferences && <PreferencesModal onClose={() => setShowPreferences(false)} />}\n      \n      <div className={styles.formContainer}>\n        <div className={styles.formSection}>\n          <div className={styles.welcomeMessage}>\n            <div className={styles.welcomeHeader}>\n              {error ? (\n                <div className={styles.error}>{error}</div>\n              ) : (\n                <div className={styles.welcomeText}>\n                  <UserAvatar \n                    user={{ \n                      username: user?.username || 'Player', \n                      profileImg: preferences?.profileImg \n                    }} \n                    size=\"medium\" \n                    showName={true} \n                    namePosition=\"right\"\n                  />\n                </div>\n              )}\n              <div className={styles.balanceDisplay}>\n                Balance: <CurrencyAmount amount={Number(user?.balance) || 0} size=\"medium\" />\n              </div>\n              <div className={styles.headerButtons}>\n                <PreferencesButton onClick={() => setShowPreferences(true)} />\n                <button \n                  className={styles.logoutButton}\n                  onClick={logout}\n                >\n                  <span className={styles.buttonText}>Logout</span>\n                </button>\n              </div>\n            </div>\n          </div>\n          \n          <div className={styles.gradientDivider}></div>\n          \n          <div className={styles.buttonGroup}>\n            <button \n              className={`${styles.actionButton} ${styles.createButton}`}\n              onClick={handleCreateGame}\n              disabled={!user?.username}\n            >\n              Create New Game\n            </button>\n          </div>\n        </div>\n        \n        {error && (\n          <div className={styles.errorMessage}>\n            {error}\n          </div>\n        )}\n      </div>\n      \n      {/* Game List Section - Always shown */}\n      <div className={styles.gameListContainer}>\n        <h2 className={styles.gameListTitle}>Available Games</h2>\n        \n        {/* Search bar for filtering games */}\n        <div className={styles.searchContainer}>\n          <TextField\n            placeholder=\"Search games by ID\"\n            variant=\"outlined\"\n            fullWidth\n            value={searchQuery}\n            onChange={handleSearchChange}\n            size={isSmallMobile ? \"small\" : \"medium\"}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <span className={styles.searchIcon}>🔍</span>\n                </InputAdornment>\n              ),\n            }}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                '& fieldset': {\n                  border: 'none',\n                },\n                '&:hover fieldset': {\n                  border: 'none',\n                },\n                '&.Mui-focused fieldset': {\n                  border: 'none',\n                },\n                backgroundColor: '#0a1622',\n                boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.5)',\n                borderRadius: '8px',\n                border: 'none',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  backgroundColor: '#0c1825',\n                },\n                '&.Mui-focused': {\n                  backgroundColor: '#0d1927',\n                  boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.5)',\n                },\n              },\n              '& .MuiInputLabel-root': {\n                color: 'rgba(52, 152, 219, 0.7)',\n                fontWeight: 400,\n              },\n              '& .MuiOutlinedInput-input': {\n                color: 'rgba(236, 240, 241, 0.9)',\n                fontWeight: 500,\n                padding: isSmallMobile ? '10px 12px' : '12px 14px',\n                '&::placeholder': {\n                  color: 'rgba(52, 152, 219, 0.5)',\n                  opacity: 1,\n                },\n              },\n              '& .MuiInputLabel-root.Mui-focused': {\n                color: '#3498db',\n              },\n              marginBottom: '0.75rem',\n            }}\n          />\n        </div>\n        \n        {filteredGameList && filteredGameList.length > 0 ? (\n          <div className={styles.gameListWrapper}>\n            {filteredGameList.map(game => (\n              <div \n                key={game.id} \n                className={`${styles.gameListItem} \n                  ${game.disconnectedPlayers?.some(player => player.userId === userId) ? styles.userDisconnectedGame : ''}\n                  ${game.allPlayers?.some(player => player.userId === userId && !player.disconnected) ? styles.userInGame : ''}`}\n              >\n                <div className={styles.gameListInfo}>\n                  <div className={styles.gameListId}>\n                    {game.id}\n                    {game.disconnectedPlayers?.some(player => player.userId === userId) && (\n                      <span className={styles.disconnectedBadge} title=\"You're disconnected from this game\">⚠️ Reconnect</span>\n                    )}\n                    {game.allPlayers?.some(player => player.userId === userId && !player.disconnected) && (\n                      <span className={styles.inGameBadge} title=\"You're in this game\">You're In</span>\n                    )}\n                  </div>\n                  <div className={styles.gameListPlayers}>\n                    {game.playerCount} {game.playerCount === 1 ? 'player' : 'players'}\n                  </div>\n                </div>\n                <button \n                  className={`${styles.joinGameButton} \n                    ${game.disconnectedPlayers?.some(player => player.userId === userId) ? styles.reconnectButton : ''}\n                    ${game.allPlayers?.some(player => player.userId === userId && !player.disconnected) ? styles.continueButton : ''}`}\n                  onClick={() => handleJoinGame(game.id)}\n                  disabled={!user}\n                >\n                  {game.disconnectedPlayers?.some(player => player.userId === userId) \n                    ? 'Reconnect' \n                    : game.allPlayers?.some(player => player.userId === userId && !player.disconnected) \n                      ? 'Continue' \n                      : 'Join'}\n                </button>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className={styles.emptyGameList}>\n            <div className={styles.emptyStateIcon}>🃏</div>\n            <p className={styles.emptyStateMessage}>\n              {searchQuery.trim() ? 'No matching games found' : 'No games in progress'}\n            </p>\n            <p className={styles.emptyStateHint}>\n              {searchQuery.trim() \n                ? 'Try a different search or create a new game' \n                : 'Create a new game to get started!'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Create a wrapped version of the Lobby component with the LobbyProvider\nconst LobbyWithProvider = () => (\n  <LobbyProvider>\n    <Lobby />\n  </LobbyProvider>\n);\n\nexport default LobbyWithProvider;\n","import React, { createContext, useState, useContext, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport soundService from '../services/SoundService';\n\n// Import shared type definitions\n/** @typedef {import('../../../shared/types').GameState} GameState */\n/** @typedef {import('../../../shared/types').Card} Card */\n/** @typedef {import('../../../shared/types').Player} Player */\n\n// Create context\nconst GameContext = createContext();\n\n// Custom hook to use the game context\nexport const useGameContext = () => {\n  const context = useContext(GameContext);\n  if (context === undefined) {\n    throw new Error('useGameContext must be used within a GameProvider');\n  }\n  return context;\n};\n\nexport const GameProvider = ({ children, gameId, initialGameState = null }) => {\n  // Get socket from socket context\n  const { socket, error: socketError } = useSocket();\n  \n  // Game-specific state - we only need to track the full gameState object and error\n  /** @type {[GameState|null, React.Dispatch<React.SetStateAction<GameState|null>>]} */\n  const [gameState, setGameState] = useState(initialGameState);\n  \n  // Keep track of previous players to detect joins/leaves\n  const prevPlayersRef = useRef({});\n  \n  // Initialize with the provided game state if available\n  useEffect(() => {\n    // No need to log the initial state\n    // Initialize sound service\n    soundService.initialize();\n  }, []);\n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Initialize with socket error if any\n  useEffect(() => {\n    if (socketError) {\n      setError(socketError);\n    }\n  }, [socketError]);\n  // Set up game-specific event handlers\n  useEffect(() => {\n    if (!socket) return;\n    \n    // Handle game reconnection\n    socket.on('gameReconnected', (data) => {\n      console.log(`[Game] Reconnected to game: ${data.gameId}`, data.game);\n      \n      // Update game state with the full state from the server\n      setGameState(data.game);\n      \n      // Set the player ID to the current user ID (not socket ID)\n      if (socket.auth?.userId) {\n        setPlayerId(socket.auth.userId);\n        console.log(`[Game] Successfully reconnected as user ID: ${socket.auth.userId}`);\n      } else {\n        // Fallback to socket ID if user ID is not available\n        setPlayerId(socket.id);\n        console.log(`[Game] Successfully reconnected as socket ID: ${socket.id} (user ID not available)`);\n      }\n      \n      // Clear any errors\n      setError(null);\n      \n      // Play a sound to indicate successful reconnection\n      soundService.play('ui.connect');\n      \n      // CRITICAL: Force a refresh of the player's game state to ensure betting works\n      if (data.game && data.game.id) {\n        // Small delay to ensure the state is fully updated\n        setTimeout(() => {\n          console.log(`[Game] Requesting fresh game state after reconnection`);\n          socket.emit('getGameState', { gameId: data.game.id });\n        }, 500);\n      }\n    });\n    \n    // Handle receiving updated game state\n    socket.on('gameState', (data) => {\n      if (data && data.game) {\n        setGameState(data.game);\n      }\n    });\n    \n    // The gameJoined event is now handled exclusively in LobbyContext\n    // This prevents duplicate event handling issues that were causing\n    // game joining problems. By centralizing this event handling, we ensure\n    // consistent state transitions between lobby and game views.\n\n    // Game state updates\n    socket.on('gameState', (state) => {\n      if (state && state.id) {\n        // Process game state update\n        \n        // Check for player joins/leaves\n        if (state.players && prevPlayersRef.current) {\n          const currentPlayers = Object.keys(state.players);\n          const previousPlayers = Object.keys(prevPlayersRef.current);\n          \n          // Check for new players\n          const newPlayers = currentPlayers.filter(id => !previousPlayers.includes(id));\n          \n          // Check for players who left\n          const leftPlayers = previousPlayers.filter(id => !currentPlayers.includes(id));\n          \n          // Play join sound for new players\n          if (newPlayers.length > 0) {\n            soundService.play('ui.join');\n          }\n          \n          // Play leave sound for players who left\n          if (leftPlayers.length > 0) {\n            soundService.play('ui.leave');\n          }\n          \n          // Update previous players reference\n          prevPlayersRef.current = {...state.players};\n        }\n        \n        // Check for dealer change notification\n        if (state.dealerChanged) {\n          // Create a modified state that will keep dealerChanged true for 5 seconds\n          const enhancedState = {...state};\n          \n          // Update the game state immediately\n          setGameState(enhancedState);\n          \n          // After 5 seconds, update the state again with dealerChanged set to false\n          setTimeout(() => {\n            setGameState(prevState => {\n              if (prevState) {\n                return {...prevState, dealerChanged: false};\n              }\n              return prevState;\n            });\n          }, 5000);\n        } else {\n          // Just update the game state normally\n          setGameState({...state});\n        }\n      }\n    });\n\n    // Legacy handler for backward compatibility\n    socket.on('gameUpdate', (state) => {\n      if (state && state.id) {\n        // Handle legacy game update format\n        setGameState({...state});\n      }\n    });\n\n    // Game-specific error handling\n    socket.on('gameError', (message) => {\n      console.error('Game error:', message);\n      setError(message);\n    });\n    \n    // Clean up game-specific event listeners\n    return () => {\n      // We don't clean up the gameJoined event here anymore since it's now\n      // exclusively handled by LobbyContext\n      socket.off('gameReconnected');\n      socket.off('gameState');\n      socket.off('gameUpdate');\n      socket.off('gameError');\n    };\n  }, [socket]);\n\n  // Game-specific actions\n  const placeBet = useCallback((amount) => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('placeBet', { bet: amount, gameId });\n    } catch (err) {\n      console.error('Error placing bet:', err);\n      setError('Failed to place bet. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const payAnte = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('payAnte', { gameId });\n    } catch (err) {\n      console.error('Error paying ante:', err);\n      setError('Failed to pay ante. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  const dealCards = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('dealCards', { gameId });\n    } catch (err) {\n      console.error('Error dealing cards:', err);\n      setError('Failed to deal cards. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const revealMiddleCard = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('revealMiddleCard', { gameId });\n    } catch (err) {\n      console.error('Error revealing middle card:', err);\n      setError('Failed to reveal middle card. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const nextRound = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('nextRound', { gameId });\n    } catch (err) {\n      console.error('Error moving to next round:', err);\n      setError('Failed to move to next round. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player ready function (for paying ante)\n  const playerReady = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      // Server is listening for 'ready' event, not 'playerReady'\n      socket.emit('ready');\n    } catch (err) {\n      console.error('Error setting player ready:', err);\n      setError('Failed to set player ready. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player unready function (withdraw ante)\n  const playerUnready = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('unready');\n    } catch (err) {\n      console.error('Error setting player unready:', err);\n      setError('Failed to set player unready. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  /**\n   * @typedef {Object} GameContextValue\n   * @property {GameState|null} gameState - The complete game state\n   * @property {string|null} error - Any error message \n   * @property {(amount: number) => void} placeBet - Function to place a bet\n   * @property {() => void} payAnte - Function to pay the ante\n   * @property {() => void} playerReady - Function to set player ready (pay ante)\n   * @property {() => void} playerUnready - Function to set player unready (withdraw ante)\n   * @property {() => void} dealCards - Function to deal cards\n   * @property {() => void} revealMiddleCard - Function to reveal the middle card\n   * @property {() => void} nextRound - Function to move to the next round\n   * @property {() => void} clearError - Function to clear any error\n   * @property {string|null} gameId - Current game ID\n   */\n\n  /** @type {GameContextValue} */\n  const value = {\n    // Game state - just provide the complete gameState object\n    gameState,\n    error,\n    gameId,\n    \n    // Game actions\n    placeBet,\n    payAnte,\n    playerReady,\n    playerUnready,\n    dealCards,\n    revealMiddleCard,\n    nextRound,\n    // Helper methods\n    clearError: () => setError(null)\n  };\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\n// Named exports for specific pieces of state/actions\nexport const useGameState = () => {\n  const { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, dealerChanged, error } = useGameContext();\n  return { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, dealerChanged, error };\n};\n\nexport const useGameActions = () => {\n  const { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError } = useGameContext();\n  return { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError };\n};\n\nexport default GameContext;\n","/**\n * Game Constants - Defines fixed values used throughout the game\n * This is a shared constants file used by both server and client\n * Supports both ES modules (for Vite/client) and CommonJS (for Node.js/server)\n */\n\nconst GAME_CONSTANTS = {\n  // Game configuration\n  ANTE_AMOUNT: 1,  // Fixed ante amount - always $1\n  STARTING_BALANCE: 1000,  // Starting player balance - $1000\n  FULL_DECK_SIZE: 52,  // Number of cards in a full deck\n  RECONNECTION_TIMEOUT: 30000,  // Time window for player reconnection (30 seconds)\n  \n  // Timer durations (in milliseconds)\n  TIMERS: {\n    DEAL_FIRST_CARD_DELAY: 1000,    // Delay before dealing the first card (1 second)\n    DEAL_SECOND_CARD_DELAY: 1000,   // Delay before dealing the second card (1 second)\n    DEAL_THIRD_CARD_DELAY: 2000,    // Delay before revealing the third card (2 seconds)\n    DEALING_DURATION: 3000,         // Total duration of dealing phase (3 seconds)\n    BETTING_DURATION: 30000,        // Duration for betting phase (30 seconds)\n    DECISION_DURATION: 15000,       // Duration for ace and second chance decisions (15 seconds)\n    REVEALING_DURATION: 3000,       // Duration for revealing phase\n    RESULTS_DURATION: 5000          // Duration to show results before moving to next round (5 seconds)\n  }\n};\n\n// Dual module support - cleaner implementation\n// For ES modules (Vite/client)\nexport default GAME_CONSTANTS;\nexport const { TIMERS, ANTE_AMOUNT, STARTING_BALANCE, FULL_DECK_SIZE, RECONNECTION_TIMEOUT } = GAME_CONSTANTS;\n\n// For CommonJS (Node.js/server)\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = GAME_CONSTANTS;\n}\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport styles from './styles/MuteToggle.module.css';\nimport { ICONS } from '../constants/UIConstants';\n\nconst MuteToggle = ({ compact = false }) => {\n  const { preferences, toggleMute, loading } = usePreferences();\n  \n  const handleToggle = async () => {\n    await toggleMute();\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={`${styles.toggleContainer} ${compact ? styles.compact : ''}`}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.muted}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        {!compact && (\n          <span className={styles.toggleText}>\n            {preferences.muted ? 'Unmute' : 'Mute'}\n          </span>\n        )}\n        {compact && (\n          <span className={styles.compactText}>\n            Mute\n          </span>\n        )}\n      </label>\n    </div>\n  );\n};\n\nexport default MuteToggle;\n","import React, { useMemo } from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport styles from './styles/GameSummaryModal.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Game Summary Modal component that displays running scores and settle-up calculations\n */\nconst GameSummaryModal = ({ onClose }) => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.modalHeader}>\n            <h2>Game Summary</h2>\n            <button className={styles.closeButton} onClick={onClose}>×</button>\n          </div>\n          <div className={styles.settingsContainer}>\n            <div className={styles.loadingMessage}>Loading game data...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const { gameTransactions = {}, players = {}, id: gameId } = gameState;\n  \n  // Get player names (including those who left)\n  const playerNames = {};\n  \n  // First add current players\n  Object.entries(players).forEach(([playerId, player]) => {\n    playerNames[playerId] = player.name;\n  });\n  \n  // Then add players who left but have transactions\n  Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n    if (!playerNames[playerId] && transactions && transactions.length > 0) {\n      playerNames[playerId] = transactions[0].playerName || 'Unknown Player';\n    }\n  });\n\n  // Calculate player totals directly from transactions\n  const playerTotals = useMemo(() => {\n    const totals = {};\n    Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n      if (!transactions || !Array.isArray(transactions)) return;\n      totals[playerId] = transactions.reduce((sum, tx) => sum + tx.amount, 0);\n    });\n    return totals;\n  }, [gameTransactions]);\n  \n  // Calculate settle-up payments\n  const settleUpPayments = useMemo(() => {\n    // For simple 2-player games, just have the loser pay the winner directly\n    if (Object.keys(playerTotals).length === 2) {\n      const players = Object.entries(playerTotals);\n      const [player1Id, player1Total] = players[0];\n      const [player2Id, player2Total] = players[1];\n      \n      // If totals sum to zero (or close to it), one player pays the other\n      if (Math.abs(player1Total + player2Total) < 0.1) {\n        if (player1Total > 0) {\n          // Player 2 pays Player 1\n          return [{\n            from: player2Id,\n            fromName: playerNames[player2Id],\n            to: player1Id,\n            toName: playerNames[player1Id],\n            amount: Math.abs(player1Total)\n          }];\n        } else if (player2Total > 0) {\n          // Player 1 pays Player 2\n          return [{\n            from: player1Id,\n            fromName: playerNames[player1Id],\n            to: player2Id,\n            toName: playerNames[player2Id],\n            amount: Math.abs(player2Total)\n          }];\n        }\n      }\n    }\n    \n    // For more complex cases with more players\n    const payments = [];\n    \n    // Split into winners and losers\n    const losers = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount < 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount: Math.abs(amount) // Convert to positive amount for easier calculation\n      }));\n    \n    const winners = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount > 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount\n      }));\n    \n    // Sort by amount (descending)\n    losers.sort((a, b) => b.amount - a.amount);\n    winners.sort((a, b) => b.amount - a.amount);\n    \n    // Process each winner, starting with the biggest winner\n    while (winners.length > 0 && losers.length > 0) {\n      const winner = winners[0];\n      const loser = losers[0];\n      \n      // Calculate payment amount\n      const paymentAmount = Math.min(winner.amount, loser.amount);\n      \n      if (paymentAmount > 0.01) { // Only process meaningful payments\n        // Add payment\n        payments.push({\n          from: loser.playerId,\n          fromName: loser.playerName,\n          to: winner.playerId,\n          toName: winner.playerName,\n          amount: paymentAmount\n        });\n        \n        // Update balances\n        winner.amount -= paymentAmount;\n        loser.amount -= paymentAmount;\n        \n        // Remove settled players or re-sort if they still have balance\n        if (winner.amount < 0.01) {\n          winners.shift();\n        }\n        \n        if (loser.amount < 0.01) {\n          losers.shift();\n        }\n      } else {\n        // No meaningful payment possible\n        break;\n      }\n    }\n    \n    return payments;\n  }, [playerTotals, playerNames]);\n\n  return (\n    <div className={styles.modalOverlay} onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Game Summary ({gameId})</h2>\n          <button className={styles.closeButton} onClick={onClose}>×</button>\n        </div>\n        \n        <div className={styles.settingsContainer}>\n          {/* Totals Section */}\n          <div className={styles.settingSection}>\n            <h3>Totals</h3>\n            {Object.keys(playerTotals).length === 0 ? (\n              <p className={styles.noDataMessage}>No transactions recorded yet.</p>\n            ) : (\n              <div className={styles.totalsTable}>\n                {Object.entries(playerTotals).map(([playerId, total]) => (\n                  <div key={playerId} className={styles.totalRow}>\n                    <span className={styles.playerName}>{playerNames[playerId] || 'Unknown Player'}</span>\n                    <span className={`${styles.totalAmount} ${total >= 0 ? styles.positive : styles.negative}`}>\n                      <CurrencyAmount amount={total} size=\"small\" />\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Settle Up Section */}\n          <div className={styles.settingSection}>\n            <h3>Settle Up</h3>\n            {settleUpPayments.length === 0 ? (\n              <p className={styles.noDataMessage}>No payments needed or no transactions recorded yet.</p>\n            ) : (\n              <div className={styles.settleUpTable}>\n                {settleUpPayments.map((payment, index) => (\n                  <div key={index} className={styles.paymentRow}>\n                    <span className={styles.paymentText}>\n                      <span className={styles.playerName}>{payment.fromName}</span> pays{' '}\n                      <span className={styles.playerName}>{payment.toName}</span>\n                    </span>\n                    <span className={styles.paymentAmount}>\n                      <CurrencyAmount amount={payment.amount} size=\"small\" />\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameSummaryModal;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/GameHeader.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport GAME_CONSTANTS from '../../../shared/constants/GameConstants';\nconst { TIMERS } = GAME_CONSTANTS;\nimport { ICONS } from '../constants/UIConstants';\nimport MuteToggle from './MuteToggle.jsx';\nimport GameSummaryModal from './GameSummaryModal.jsx';\n\n// Phase display mapping with icons and friendly names\nconst phaseDisplayMap = {\n  waiting: { text: 'Waiting for Players', icon: '👥' },\n  dealing: { text: 'Dealing Cards', icon: ICONS.DEALER },\n  revealing: { text: 'Revealing Cards', icon: ICONS.CARDS },\n  results: { text: 'Round Results', icon: '🏆' }\n  // betting phase is handled dynamically to show player name\n};\n\nconst GameHeader = ({ handleLeaveGame }) => {\n  const { gameState, gameId } = useGameContext();\n  const { socket } = useSocket();\n  const currentPhase = gameState?.phase || 'waiting';\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n\n  // Timer effect for phases\n  useEffect(() => {\n    let timer;\n    \n    if (currentPhase === 'dealing') {\n      setTimeLeft(TIMERS.DEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'betting') {\n      setTimeLeft(TIMERS.BETTING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'revealing') {\n      setTimeLeft(TIMERS.REVEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'results') {\n      setTimeLeft(TIMERS.RESULTS_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else {\n      setTimeLeft(null);\n    }\n\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [currentPhase, gameState?.waitingForAceDecision]);\n  \n  // Get the phase display information\n  let phaseInfo = phaseDisplayMap[currentPhase] || { text: 'Unknown Phase', icon: '❓' };\n  \n  // Override phase info if waiting for Ace decision\n  if (gameState?.waitingForAceDecision && currentPhase === 'dealing') {\n    phaseInfo = { text: 'Choosing Ace Value', icon: ICONS.DEALER };\n  }\n  \n  // Check if current user is the current player (using userId instead of socket.id)\n  const isCurrentPlayersTurn = socket && socket.auth?.userId && gameState?.currentPlayerId === socket.auth.userId;\n  \n  // Special handling for betting phase\n  if (currentPhase === 'betting' && gameState?.currentPlayerId && gameState?.players) {\n    const currentPlayer = gameState.players[gameState.currentPlayerId];\n    \n    if (currentPlayer) {\n      if (isCurrentPlayersTurn) {\n        // It's YOUR turn to bet\n        phaseInfo = {\n          text: `Pass or Bet`,\n          icon: ICONS.COIN\n        };\n      } else {\n        // It's someone else's turn\n        phaseInfo = {\n          text: `${currentPlayer.name} is Betting`,\n          icon: ICONS.COIN\n        };\n      }\n    } else {\n      phaseInfo = { text: 'Betting Round', icon: ICONS.COIN };\n    }\n  }\n  \n  return (\n    <div className={styles.headerContainer}>\n      {/* Desktop layout - single row with 3 cells */}\n      <div className={styles.desktopLayout}>\n        {/* Left: Logo and game ID */}\n        <div className={styles.headerLeft}>\n          <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n          <p className={styles.gameIdText}>\n            <span \n              className={styles.gameIdLink} \n              onClick={() => setShowGameSummary(true)}\n              title=\"Click to view game summary\"\n            >\n              Game #{gameId}\n            </span>\n          </p>\n        </div>\n        \n        {/* Middle: Phase indicator */}\n        <div className={styles.headerCenter}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right: Leave and Mute stacked */}\n        <div className={styles.headerRight}>\n          <div className={styles.controlsStack}>\n            <button \n              className={styles.leaveButton}\n              onClick={handleLeaveGame}\n            >\n              Leave Game\n            </button>\n            <div className={styles.muteToggleContainer}>\n              <MuteToggle compact={true} />\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile layout - two rows */}\n      <div className={styles.mobileLayout}>\n        {/* Top row: Logo/ID, Mute, Leave */}\n        <div className={styles.mobileTopRow}>\n          <div className={styles.headerLeft}>\n            <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n            <p className={styles.gameIdText}>\n              <span \n                className={styles.gameIdLink} \n                onClick={() => setShowGameSummary(true)}\n                title=\"Click to view game summary\"\n              >\n                Game #{gameId}\n              </span>\n            </p>\n          </div>\n          \n          <div className={styles.muteToggleContainer}>\n            <MuteToggle compact={true} />\n          </div>\n          \n          <button \n            className={styles.leaveButton}\n            onClick={handleLeaveGame}\n          >\n            Leave Game\n          </button>\n        </div>\n        \n        {/* Bottom row: Phase indicator (full width) */}\n        <div className={styles.mobileBottomRow}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      {/* Game Summary Modal */}\n      {showGameSummary && <GameSummaryModal onClose={() => setShowGameSummary(false)} />}\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from 'react';\n\n/**\n * Arrow icon component that can be rotated to point up or down\n * @param {Object} props - Component props\n * @param {string} props.direction - Direction of the arrow ('up' or 'down')\n * @param {string} props.color - Color of the arrow (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ArrowIcon = ({ direction = 'up', color = 'currentColor', size = 24 }) => {\n  // Determine rotation based on direction\n  const rotation = direction === 'down' ? 'rotate(180deg)' : 'rotate(0deg)';\n  \n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={{ transform: rotation, display: 'inline-block', transformOrigin: 'center' }}\n    >\n      {/* This is the shift/arrow up icon from Material Design */}\n      <path d=\"M7 11l5-5 5 5M7 17l5-5 5 5\" />\n    </svg>\n  );\n};\n\nexport default ArrowIcon;\n","import React from 'react';\nimport styles from './styles/CardDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst CardDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return <div className={styles.loading}>Loading game state...</div>;\n  }\n  \n  const { \n    firstCard,\n    secondCard,\n    thirdCard,\n    phase, \n    remainingCards, \n    dealerChanged, \n    dealer,\n    deckNumber \n  } = gameState;\n  \n  // Card state is managed by the game context\n  \n  const dealerName = dealer?.name;\n  const cardLabels = {\n    '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '10': '10',\n    'J': 'J', 'Q': 'Q', 'K': 'K', 'A': 'A'\n  };\n  \n  // Map for handling both string names and direct symbols\n  const suitSymbols = {\n    'hearts': '♥',\n    'diamonds': '♦',\n    'clubs': '♣',\n    'spades': '♠',\n    // Handle direct Unicode symbols as well\n    '♥': '♥',\n    '♦': '♦',\n    '♣': '♣',\n    '♠': '♠'\n  };\n  \n  // Helper to determine if a suit is red\n  const isRedSuit = (suit) => {\n    return suit === '♥' || suit === '♦' || suit === 'hearts' || suit === 'diamonds';\n  };\n  \n  const renderCard = (card, index) => {\n    if (!card) return (\n      <div key={`empty-${index}`} className={styles.card}>\n        <div className={styles.cardBack}></div>\n      </div>\n    );\n    \n    const isRed = isRedSuit(card.suit);\n    const isAce = card.value === 'A';\n    const isAceLow = card.isAceLow;\n    const isMiddleCard = index === 1; // Index 1 is the middle card position\n    \n    return (\n      <div key={`${card.value}-${card.suit}-${index}`} \n        className={`${styles.card} ${isRed ? styles.redCard : styles.blackCard} ${isAce ? styles.aceCard : ''}`}\n      >\n        {isAce && !isMiddleCard && (\n          <div className={`${styles.aceIndicator} ${isAceLow ? styles.aceLow : styles.aceHigh} ${isRed ? styles.redCard : styles.blackCard}`}>\n            {isAceLow ? (\n              <span className={styles.indicatorContent}>LOW <ArrowIcon direction=\"down\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            ) : (\n              <span className={styles.indicatorContent}>HIGH <ArrowIcon direction=\"up\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            )}\n          </div>\n        )}\n        <div className={styles.cardCorner}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n        <div className={styles.cardCenter}>\n          {suitSymbols[card.suit]}\n        </div>\n        <div className={`${styles.cardCorner} ${styles.bottomRight}`}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  // Function to handle card positioning \n  const renderCardLayout = () => {\n    // Create an array of 3 nulls to represent the card slots\n    let displayCards = [null, null, null];\n    \n    // Check if we have a valid game state with cards\n    if (!firstCard && !secondCard && !thirdCard) {\n      return displayCards.map((card, index) => renderCard(card, index));\n    }\n    \n    // Handle the individual card properties\n    if (firstCard) {\n      displayCards[0] = {...firstCard}; // Left position - use spread operator to create a copy\n    }\n    \n    if (secondCard) {\n      displayCards[2] = {...secondCard}; // Right position - use spread operator to create a copy\n    }\n    \n    if (thirdCard) {\n      displayCards[1] = {...thirdCard}; // Middle position - use spread operator to create a copy\n    }\n    \n    return displayCards.map((card, index) => renderCard(card, index));\n  };\n\n  return (\n    <div className={styles.cardDisplayContainer}>\n      {dealerChanged && (\n        <div className={styles.dealerRotationAlert}>\n          <p>\n            <span className={styles.dealerIcon}>🃏</span>\n            <span className={styles.dealerRotationText}>\n              {dealerName} is now the dealer (Deck #{deckNumber})!\n            </span>\n          </p>\n        </div>\n      )}\n      \n      \n      <div className={`${styles.cardsRow} ${phase === 'dealing' ? styles.dealingPhase : ''} ${phase === 'revealing' ? styles.revealingPhase : ''}`}>\n        {renderCardLayout()}\n      </div>\n    </div>\n  );\n};\n\nexport default CardDisplay;\n","import React from 'react';\nimport styles from './styles/PotButton.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * PotButton - The most epic, baller button in the entire game\n * Features a shimmering gold border with a shiny silver background to make the gold currency pop\n * Includes multiple overlapping layers and effects for maximum visual impact\n * \n * @param {Object} props - Component props\n * @param {number} props.amount - The pot amount to display\n * @param {boolean} props.disabled - Whether the button is disabled\n * @param {function} props.onClick - Function to call when the button is clicked\n */\nconst PotButton = ({ amount, disabled, onClick }) => {\n  return (\n    <button\n      className={`${styles.potButton} ${disabled ? styles.disabled : ''}`}\n      onClick={onClick}\n      disabled={disabled}\n      aria-label={`Bet the pot: ${amount} chips`}\n    >\n      {/* Layer 2: Gold border with texture */}\n      <div className={styles.shimmerBorder}></div>\n      \n      {/* Layer 4: Silver metallic background */}\n      <div className={styles.buttonBackground}></div>\n      \n      {/* Layer 5: Light reflection effects */}\n      <div className={styles.reflectionEffect}></div>\n      \n      {/* Layer 6-8: Button content with 3D transform */}\n      <div className={styles.buttonContent}>\n        <span className={styles.potText}>POT</span>\n        <span className={styles.potAmount}>\n          <CurrencyAmount amount={amount} background=\"pill\" />\n        </span>\n      </div>\n    </button>\n  );\n};\n\nexport default PotButton;\n","import React, { useState } from 'react';\nimport styles from './styles/BettingPanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PotButton from './PotButton.jsx';\n\nconst BettingPanel = () => {\n  // Get game state and actions from context\n  const { gameState, placeBet } = useGameContext();\n  const { socket } = useSocket();\n  // Initialize state first - before any conditional returns\n  const [customBet, setCustomBet] = useState('');\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    currentPlayerId, \n    pot: potAmount, \n    phase,\n    firstCard,\n    secondCard\n  } = gameState;\n  \n  // Only show in betting phase\n  if (phase !== 'betting') return null;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const myPlayer = socket && players && socket.auth?.userId ? players[socket.auth.userId] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  \n  const handleCustomBetChange = (e) => {\n    // Only allow numbers\n    const value = e.target.value.replace(/[^0-9]/g, '');\n    \n    // Don't allow bets greater than pot or player balance\n    const maxBet = Math.min(potAmount, playerBalance);\n    if (value && parseInt(value) > maxBet) {\n      setCustomBet(maxBet.toString());\n    } else {\n      setCustomBet(value);\n    }\n  };\n  \n  const handleCustomBetSubmit = () => {\n    if (customBet && !isNaN(customBet)) {\n      const betAmount = parseInt(customBet, 10);\n      // Verify bet is at least $1 and at most the pot/balance\n      if (betAmount >= 1 && betAmount <= Math.min(potAmount, playerBalance)) {\n        placeBet(betAmount);\n        setCustomBet('');\n      }\n    }\n  };\n  \n  // Helper to handle Enter key in the custom bet input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleCustomBetSubmit();\n    }\n  };\n  \n\n  \n  const renderBettingControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.betContainer}>\n        <p className={styles.betText}>Place your bet (Min: <CurrencyAmount amount={1} />, Max: <CurrencyAmount amount={Math.min(potAmount, playerBalance)} />)</p>\n        \n        {/* Extreme options row */}\n        <div className={styles.extremeOptionsRow}>\n          <button\n            className={`${styles.betButton} ${styles.extremeButton} ${styles.passButton}`}\n            onClick={() => placeBet(0)}\n          >\n            PASS\n          </button>\n          \n          <PotButton \n            amount={potAmount}\n            onClick={() => placeBet(potAmount)}\n            disabled={potAmount > playerBalance}\n          />\n        </div>\n        \n        {/* Standard bet options */}\n        <div className={styles.betButtons}>\n          {[1, 2, 5].map(amount => {\n            const maxBet = Math.min(potAmount, playerBalance);\n            const disabled = amount > maxBet;\n            return (\n              <button\n                key={amount}\n                className={`${styles.betButton} ${disabled ? styles.disabledButton : ''}`}\n                onClick={() => placeBet(amount)}\n                disabled={disabled}\n              >\n                <CurrencyAmount amount={amount} />\n              </button>\n            );\n          })}\n          \n          {/* Custom bet input */}\n          <div className={styles.customBetContainer}>\n            <input\n              type=\"text\"\n              className={styles.customBetInput}\n              placeholder=\"Custom\"\n              value={customBet}\n              onChange={handleCustomBetChange}\n              onKeyPress={handleKeyPress}\n            />\n            <button\n              className={styles.customBetButton}\n              onClick={handleCustomBetSubmit}\n              disabled={!customBet}\n            >\n              Bet\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  \n\n  // Only render the panel for the current player\n  if (!isCurrentPlayer) return null;\n  \n  return (\n    <div className={styles.bettingPanel}>\n      {renderBettingControls()}\n    </div>\n  );\n};\n\nexport default BettingPanel;\n","import React, { useRef, useEffect, useState } from 'react';\nimport styles from './styles/PlayerList.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport UserAvatar from './UserAvatar.jsx';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PlayerList = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  \n  if (!gameState || !gameState.players) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for game data...</p>\n      </div>\n    );\n  }\n  \n  const { players, currentPlayerId, dealerId, deckNumber, remainingCards } = gameState;\n  const currentUserId = socket?.auth?.userId;\n  if (!players || Object.keys(players).length === 0) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for players to join...</p>\n      </div>\n    );\n  }\n\n  // Display deck information if available\n  const renderDeckInfo = () => {\n    if (typeof deckNumber === 'number' && typeof remainingCards === 'number') {\n      return (\n        <div className={styles.deckInfo}>\n          <span className={styles.deckNumber}>Deck #{deckNumber}</span>\n          <span className={styles.remainingCards}>{remainingCards} cards remaining</span>\n        </div>\n      );\n    }\n    return null;\n  };\n\n\n  \n  return (\n    <div className={styles.playersContainer}>\n      <h3 className={styles.playersTitle}>Players</h3>\n      {renderDeckInfo()}\n      <div className={styles.playersList}>\n        {/* Use gameState.seats to render players in seat order */}\n        {gameState.seats\n          .filter(playerId => playerId !== null && players[playerId])\n          .map(playerId => {\n            const player = players[playerId];\n            const isCurrentPlayer = playerId === currentPlayerId;\n            // Compare player.userId with currentUserId instead of comparing playerId with currentUserId\n            const isCurrentUser = player.userId === currentUserId;\n            const isDealer = playerId === dealerId; // Use playerId instead of player.id\n            const isDisconnected = player.disconnected === true;\n            \n            return (\n              <div \n                key={playerId} \n                className={`\n                  ${styles.playerItem}\n                  ${isCurrentPlayer ? styles.currentPlayer : ''}\n                  ${isCurrentUser ? styles.currentUser : ''}\n                `}\n              >\n              <div className={styles.playerInfo}>\n                <UserAvatar \n                  user={{ \n                    username: player.name, \n                    profileImg: player.mediaPreferences?.profileImg \n                  }} \n                  size=\"small\" \n                  showName={false}\n                />\n                <span className={styles.playerName}>\n                  {player.name}\n                  <span className={styles.playerStatus}>\n                    {isDealer && ` ${ICONS.DEALER}`}\n                    {player.disconnected && <span className={styles.disconnectedIndicator} title=\"Player disconnected\">⚠️ Disconnected</span>}\n                  </span>\n                </span>\n              </div>\n              <div className={styles.playerBalanceContainer}>\n                <BalanceDisplay balance={Number(player.balance || 0)} />\n\n                <div className={`${styles.readyIndicator} ${player.isReady ? styles.ready : styles.notReady}`}></div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst BalanceDisplay = ({ balance }) => {\n  const [prevBalance, setPrevBalance] = useState(balance);\n  const [animationClass, setAnimationClass] = useState('');\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (balance !== prevBalance) {\n      // Determine if balance increased or decreased\n      const isIncrease = balance > prevBalance;\n      setAnimationClass(isIncrease ? styles.balanceIncrease : styles.balanceDecrease);\n\n      // Clear previous timeout if it exists\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      // Remove animation class after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setAnimationClass('');\n      }, 1000); // Match animation duration\n\n      setPrevBalance(balance);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [balance]);\n\n  return (\n    <span className={`${styles.playerBalance} ${animationClass}`}>\n      <CurrencyAmount amount={balance} />\n    </span>\n  );\n};\n\nexport default PlayerList;\n","import React from 'react';\nimport styles from './styles/PotDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PotDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  const { pot } = gameState;\n  \n  return (\n    <div className={styles.potDisplayContainer}>\n      <div className={styles.potIconWrapper}>\n        <span className={styles.potIcon}>{ICONS.POT}</span>\n      </div>\n      <div className={styles.potInfo}>\n        <h3 className={styles.potLabel}>POT</h3>\n        <span className={styles.potAmount}><CurrencyAmount amount={pot} size=\"medium\" /></span>\n      </div>\n    </div>\n  );\n};\n\nexport default PotDisplay;\n","import React from 'react';\nimport styles from './styles/DeckDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { ICONS } from '../constants/UIConstants';\n\nconst DeckDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  // Get the deck size from the game state\n  const { deckSize = 0 } = gameState;\n  \n  // Calculate the visual thickness of the deck based on remaining cards\n  const getThicknessClass = () => {\n    if (deckSize >= 40) return styles.deckThick;\n    if (deckSize >= 25) return styles.deckMedium;\n    if (deckSize >= 10) return styles.deckThin;\n    return styles.deckVeryThin;\n  };\n  \n  return (\n    <div className={styles.deckDisplayContainer}>\n      <div className={`${styles.deckVisual} ${getThicknessClass()}`}>\n        <div className={styles.deckIcon}>{ICONS.DECK}</div>\n      </div>\n      <div className={styles.deckInfo}>\n        <h3 className={styles.deckLabel}>DECK</h3>\n        <span className={styles.deckCount}>{deckSize}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default DeckDisplay;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/AutoAnteToggle.module.css';\n\nconst AutoAnteToggle = () => {\n  const { preferences, toggleAutoAnte, loading } = usePreferences();\n  const { gameState, playerReady } = useGameContext();\n  const { socket } = useSocket();\n  \n  const handleToggle = async () => {\n    const newValue = !preferences.autoAnte;\n    const success = await toggleAutoAnte();\n    \n    // Only auto-ante if the player is not already anted\n    if (newValue && success && playerReady) {\n      // Check if player is already anted (using userId instead of socket.id)\n      let myPlayer = null;\n      if (socket && socket.auth?.userId && gameState?.players) {\n        // Find player by userId\n        const playerIds = Object.keys(gameState.players);\n        for (const id of playerIds) {\n          if (gameState.players[id].userId === socket.auth.userId) {\n            myPlayer = gameState.players[id];\n            break;\n          }\n        }\n      }\n      const isPlayerReady = myPlayer?.isReady;\n      \n      // Only call playerReady if the player is not already ready\n      if (!isPlayerReady) {\n        playerReady();\n      }\n    }\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.autoAnte}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        <span className={styles.toggleText}>\n          Auto-Ante\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default AutoAnteToggle;\n","import React from 'react';\nimport styles from './styles/AnteControls.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\nimport AutoAnteToggle from './AutoAnteToggle.jsx';\n\nconst AnteControls = () => {\n  // Get game state and actions from context\n  const { gameState, playerReady, playerUnready } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  const { preferences } = usePreferences();\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    anteAmount, \n    phase \n  } = gameState;\n  \n  // Only show in waiting phase\n  if (phase !== 'waiting') return null;\n  \n  // Find the player by user ID\n  let myPlayer = null;\n  if (socket && socket.auth?.userId && players) {\n    // Find player by userId\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === socket.auth.userId) {\n        myPlayer = players[id];\n        break;\n      }\n    }\n  } else if (user && players) {\n    // If we can't find by socket ID, try to find by user ID\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === user.id) {\n        myPlayer = players[id];\n        console.log(`[AnteControls] Found player by user ID instead of socket ID`);\n        break;\n      }\n    }\n  }\n  \n  // Get player balance and ready status\n  const playerBalance = Number(myPlayer?.balance || 0);\n  const isPlayerReady = myPlayer?.isReady;\n  \n  \n  // Check if player has enough chips\n  const hasEnoughChips = playerBalance >= anteAmount;\n  \n  // Player state and readiness is managed by the game context\n  \n  return (\n    <div className={styles.anteControlsWrapper}>\n      <div className={styles.controlsContainer}>\n        {/* Main action button (Ante or Back Out) */}\n        <div className={styles.buttonContainer}>\n          {!isPlayerReady ? (\n            // Player is not ready - show Ante button\n            <>\n              <button \n                className={styles.anteButton}\n                onClick={playerReady}\n                disabled={!hasEnoughChips}\n                aria-label=\"Ante up\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.anteIcon}>{ICONS.CHECK}</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>ANTE</h3>\n                  <span className={styles.buttonAmount}><CurrencyAmount amount={anteAmount} /></span>\n                </div>\n              </button>\n              \n              {!hasEnoughChips && (\n                <p className={styles.notEnoughChipsText}>Not enough coins (<CurrencyAmount amount={anteAmount} /> required)</p>\n              )}\n            </>\n          ) : (\n            // Player is ready - show Back Out button\n            <button \n              className={styles.backOutButton}\n              onClick={() => {\n                if (typeof playerUnready === 'function') {\n                  playerUnready();\n                } else {\n                  console.error('playerUnready is not a function');\n                }\n              }}\n              aria-label=\"Back out\"\n            >\n              {/* Add shimmer border for glimmering effect */}\n              <div className={styles.shimmerBorder}></div>\n              <span className={styles.backOutIcon}>✕</span>\n              <div className={styles.buttonInfo}>\n                <h3 className={styles.buttonLabel}>BACK OUT</h3>\n              </div>\n            </button>\n          )}\n        </div>\n        \n        {/* Auto-Ante toggle - always shown */}\n        <div className={styles.autoAnteContainer}>\n          <AutoAnteToggle />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnteControls;\n","import React from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/ResultsPanel.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Results panel component that displays the outcome of a hand during the results phase\n */\nconst ResultsPanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n\n  // If there's no result, don't render anything\n  if (!gameState.result) return null;\n\n  const { result, players, resultCountdown } = gameState;\n  const isCurrentPlayer = result.playerId === socket?.id;\n  const playerName = isCurrentPlayer ? 'You' : players[result.playerId]?.name;\n  const outcomeText = isCurrentPlayer \n    ? (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'PENALTY!' : 'Lost')\n    : (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'PENALTY!' : 'Lost');\n\n  return (\n    <div className={styles.resultsPanel}>\n      {/* Card display section removed - cards are now visible in the game board */}\n\n      <div className={styles.resultContent}>\n        {result.outcome === 'tie' && (\n          <div className={styles.penaltyWarning}>\n            <div className={styles.cautionTape}></div>\n          </div>\n        )}\n        <h2 className={`${styles.resultText} ${styles[result.outcome + 'Text']}`}>\n          {playerName} {outcomeText}{result.outcome !== 'tie' && '!'}\n        </h2>\n        \n        {result.winnings > 0 && (\n          <p className={styles.winningsText}>\n            Winnings: <CurrencyAmount amount={result.winnings} size=\"medium\" />\n          </p>\n        )}\n        \n        {result.outcome === 'tie' && (\n          <p className={styles.penaltyText}>\n            {result.isTripleAceTie ? '3X PENALTY' : '2X PENALTY'}\n          </p>\n        )}\n        \n        {resultCountdown && (\n          <div className={styles.countdownContainer}>\n            <p className={styles.countdownText}>\n              Next hand in: {resultCountdown.countdownSeconds}s\n            </p>\n            <div className={styles.countdownProgress}>\n              <div \n                className={styles.countdownBar} \n                style={{ width: `${(resultCountdown.countdownSeconds / 5) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ResultsPanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/AceChoicePanel.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst AceChoicePanel = () => {\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForAceDecision && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForAceDecision, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const handleAceChoice = (isAceLow) => {\n    socket.emit('chooseAceValue', { isAceLow });\n  };\n  \n  // Check if it's the current player's turn\n  const isCurrentPlayersTurn = socket?.auth?.userId === gameState.currentPlayerId;\n  const currentPlayerName = gameState.players[gameState.currentPlayerId]?.name || 'Current player';\n  \n  const renderAceChoiceControls = () => {\n    if (!isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.aceChoiceControls}>\n        <p className={styles.aceChoiceText}>\n          You've been dealt an Ace! Choose whether it should be high or low.\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.aceChoiceButtons}>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceHighButton}`}\n            onClick={() => handleAceChoice(false)}\n          >\n            <span className={styles.buttonContent}>ACE HIGH <ArrowIcon direction=\"up\" color=\"white\" size={20} /></span>\n          </button>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceLowButton}`}\n            onClick={() => handleAceChoice(true)}\n          >\n            <span className={styles.buttonContent}>ACE LOW <ArrowIcon direction=\"down\" color=\"white\" size={20} /></span>\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n        <p className={styles.waitingText}>\n          {currentPlayerName} is choosing whether their Ace is high or low...\n        </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.aceChoicePanel}>\n      {renderAceChoiceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default AceChoicePanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/SecondChancePanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst SecondChancePanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState(null); // 'ante' or 'pass'\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForSecondChance && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForSecondChance, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const { \n    players, \n    currentPlayerId, \n    anteAmount = 1\n  } = gameState;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const currentPlayer = players[currentPlayerId];\n  \n  const handleSecondChance = (anteAgain) => {\n    if (socket) {\n      setLoading(true);\n      setActionType(anteAgain ? 'ante' : 'pass');\n      socket.emit('secondChance', { anteAgain });\n    }\n  };\n  \n  const renderSecondChanceControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.secondChanceControls}>\n        <p className={styles.secondChanceText}>\n          Would you like to ante up again for a second chance?\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.secondChanceButtons}>\n          <button\n            className={`${styles.secondChanceButton} ${styles.anteAgainButton}`}\n            onClick={() => handleSecondChance(true)}\n          >\n            {loading && actionType === 'ante' ? 'Processing...' : (\n              <>\n                Ante Up <span className={styles.currencyWrapper}>\n                  <CurrencyAmount amount={anteAmount} size=\"small\" />\n                </span>\n              </>\n            )}\n          </button>\n          <button\n            className={`${styles.secondChanceButton} ${styles.passButton}`}\n            onClick={() => handleSecondChance(false)}\n          >\n            {loading && actionType === 'pass' ? 'Processing...' : 'Pass'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n          <p className={styles.waitingText}>\n            {currentPlayer?.name} is deciding whether to take a second chance.\n          </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.secondChancePanel}>\n      {renderSecondChanceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default SecondChancePanel;\n","import React, { useState } from 'react';\nimport styles from './styles/GameLog.module.css';\nimport { useGameContext } from '../contexts/GameContext';\n\nconst GameLog = () => {\n  const { gameState } = useGameContext();\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!gameState || !gameState.gameLog) return null;\n  \n  // Get the game log entries\n  const logEntries = gameState.gameLog || [];\n  \n  // Format timestamp to readable time\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n  \n  // Toggle expanded state\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  // Determine how many entries to show\n  const displayEntries = isExpanded ? logEntries : logEntries.slice(0, 5);\n  \n  return (\n    <div className={styles.gameLogContainer}>\n      <div className={styles.gameLogHeader} onClick={toggleExpanded}>\n        <h3>Game Log</h3>\n        <span className={styles.expandIcon}>{isExpanded ? '▲' : '▼'}</span>\n      </div>\n      \n      <div className={`${styles.gameLogEntries} ${isExpanded ? styles.expanded : ''}`}>\n        {displayEntries.length === 0 ? (\n          <div className={styles.emptyLog}>No game events yet</div>\n        ) : (\n          displayEntries.map((entry, index) => (\n            <div key={index} className={styles.logEntry}>\n              <span className={styles.logTime}>{formatTime(entry.timestamp)}</span>\n              <span className={styles.logMessage}>{entry.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {!isExpanded && logEntries.length > 5 && (\n        <div className={styles.showMoreButton} onClick={toggleExpanded}>\n          Show {logEntries.length - 5} more entries\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameLog;\n","import React, { useEffect } from 'react';\nimport styles from './styles/GameScreen.module.css';\nimport GameHeader from './GameHeader.jsx';\nimport CardDisplay from './CardDisplay.jsx';\nimport BettingPanel from './BettingPanel.jsx';\nimport PlayerList from './PlayerList.jsx';\nimport PotDisplay from './PotDisplay.jsx';\nimport DeckDisplay from './DeckDisplay.jsx';\nimport AnteControls from './AnteControls.jsx';\nimport ResultsPanel from './ResultsPanel.jsx';\nimport AceChoicePanel from './AceChoicePanel.jsx';\nimport SecondChancePanel from './SecondChancePanel.jsx';\nimport GameLog from './GameLog.jsx';\n\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\n\nconst GameScreen = ({ onReturnToLobby }) => {\n  // Get state and actions from context\n  const { \n    gameState,\n    error,\n    clearError\n  } = useGameContext();\n  \n  // Auto-clear errors after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 10000); // 10 seconds\n      \n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n  \n  // Handle returning to lobby\n  const handleLeaveGame = () => {\n    // Call the parent callback\n    if (onReturnToLobby) {\n      onReturnToLobby();\n    }\n  };\n  \n  // Get the socket instance for player identification\n  const { socket } = useSocket();\n  \n  // Safety check for null gameState or missing phase\n  if (!gameState) {\n    return (\n      <div className={styles.loadingContainer}>\n        <p>Loading game state...</p>\n      </div>\n    );\n  }\n  \n  // Make sure we have a valid phase\n  const phase = gameState.phase || 'waiting';\n\n\n  return (\n    <div className={styles.gameContainer}>\n      <div className={styles.gameScreen}>\n        <GameHeader handleLeaveGame={handleLeaveGame} />\n        \n        {error && (\n          <div className={styles.errorContainer}>\n            <p className={styles.errorText}>{error}</p>\n          </div>\n        )}\n        \n        <div className={styles.gameInfoWrapper}>\n          <DeckDisplay />\n          <PotDisplay />\n        </div>\n        \n        {/* Always show the CardDisplay component */}\n        <CardDisplay />\n        \n        {phase === 'waiting' ? (\n          /* Show ante controls during waiting phase */\n          <AnteControls />\n        ) : phase === 'results' ? (\n          /* Show the results panel during results phase */\n          <ResultsPanel />\n        ) : gameState.waitingForAceDecision ? (\n          /* Show the Ace choice panel when first card is an Ace */\n          <AceChoicePanel />\n        ) : gameState.waitingForSecondChance ? (\n          /* Show the Second Chance panel when matching cards are dealt */\n          <SecondChancePanel />\n        ) : phase === 'betting' ? (\n          /* Show the betting panel only during betting phase */\n          <BettingPanel />\n        ) : null}\n        \n        <div className={styles.gameBottomSection}>\n          <div className={styles.playerListContainer}>\n            <PlayerList />\n          </div>\n          <div className={styles.gameLogContainer}>\n            <GameLog />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameScreen;\n","import React from 'react';\nimport styles from './LoadingScreen.module.css';\n\n/**\n * A reusable loading screen component\n * @param {Object} props\n * @param {string} props.message - The message to display while loading\n */\nexport const LoadingScreen = ({ message = 'Loading...' }) => {\n  return (\n    <div className={styles.loadingScreen}>\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { GameProvider } from '../contexts/GameContext';\nimport GameScreen from './GameScreen';\nimport { useSocket } from '../contexts/SocketContext';\nimport { LoadingScreen } from './common/LoadingScreen';\nimport soundService from '../services/SoundService';\n\nconst GameRoom = () => {\n  const { gameId } = useParams();\n  const navigate = useNavigate();\n  const { socket, isConnected } = useSocket();\n  const [game, setGame] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Handle return to lobby\n  const handleReturnToLobby = () => {\n    if (socket && isConnected && gameId) {\n      soundService.play('ui.leave');\n      socket.emit('leaveGameLobby', { gameId });\n      navigate('/');\n    }\n  };\n\n  useEffect(() => {\n    if (!socket || !isConnected || !gameId) return;\n\n    setLoading(true);\n    \n    const onGameJoined = (data) => {\n      if (data && data.game && data.game.id === gameId) {\n        setGame(data.game);\n        setLoading(false);\n        setError(null);\n      }\n    };\n    \n    const onError = (error) => {\n      setError(error.message || 'An error occurred');\n      setLoading(false);\n      \n      if (error.message === 'Game not found') {\n        navigate('/');\n      }\n    };\n    \n    socket.on('gameJoined', onGameJoined);\n    socket.on('error', onError);\n    \n    // Play join sound when joining a game\n    soundService.play('ui.join');\n    \n    console.log(`[GameRoom] Joining game: ${gameId}`);\n    socket.emit('joinGame', { gameId });\n    \n    return () => {\n      console.log(`[GameRoom] Cleaning up event listeners for game: ${gameId}`);\n      socket.off('gameJoined', onGameJoined);\n      socket.off('error', onError);\n      \n      // Make sure we leave the game when unmounting if we're still connected\n      if (isConnected) {\n        console.log(`[GameRoom] Leaving game ${gameId} on unmount`);\n        socket.emit('leaveGameLobby', { gameId });\n      }\n    };\n  }, [socket, isConnected, gameId, navigate]);\n\n  if (loading) {\n    return <LoadingScreen message={`Joining game ${gameId}...`} />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\">\n        <h2>Error</h2>\n        <p>{error}</p>\n        <button onClick={() => navigate('/')}>Return to Lobby</button>\n      </div>\n    );\n  }\n\n  return (\n    <GameProvider gameId={gameId} initialGameState={game}>\n      <GameScreen onReturnToLobby={handleReturnToLobby} />\n    </GameProvider>\n  );\n};\n\nexport default GameRoom;\n","import { createBrowserRouter, Navigate } from 'react-router-dom';\nimport AuthPage from './components/auth/AuthPage';\nimport Lobby from './components/Lobby';\nimport GameRoom from './components/GameRoom';\nimport { LoadingScreen } from './components/common/LoadingScreen';\nimport { useAuth } from './contexts/AuthContext';\n\n// Auth protection wrapper component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading, token } = useAuth();\n  \n  if (loading) {\n    return <LoadingScreen message=\"Checking authentication...\" />;\n  }\n  \n  if (!user && !token) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n  \n  return children;\n};\n\n// Define the router configuration\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: <ProtectedRoute><Lobby /></ProtectedRoute>,\n  },\n  {\n    path: '/auth',\n    element: <AuthPage />,\n  },\n  {\n    path: '/:gameId',\n    element: <ProtectedRoute><GameRoom /></ProtectedRoute>,\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"/\" replace />,\n  },\n]);\n","import React from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport { router } from './router';\n\nfunction App() {\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <AuthProvider>\n      <SocketProvider>\n        <PreferencesProvider>\n          <App />\n        </PreferencesProvider>\n      </SocketProvider>\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"names":["m","require$$0","createRoot","hydrateRoot","AuthForm","onSubmit","mode","username","setUsername","useState","password","setPassword","error","setError","useMediaQuery","isSmallMobile","Paper","className","styles","elevation","children","jsx","Typography","variant","component","gutterBottom","sx","color","fontWeight","jsxRuntimeExports","Alert","severity","mb","backgroundColor","jsxs","async","e","preventDefault","err","message","TextField","label","fullWidth","margin","value","onChange","target","required","size","inputProps","minLength","borderColor","fontSize","padding","marginBottom","type","Button","mt","background","textTransform","letterSpacing","boxShadow","transform","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","forEach","key","ERROR_PACKET","data","withNativeBlob","Blob","prototype","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","toArray","Uint8Array","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","i","charCodeAt","decode","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","length","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","len","p","arraybuffer","bytes","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","packet","controller","arrayBuffer","then","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","shift","j","slice","Emitter","mixin","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","Array","emitReserved","listeners","hasListeners","nextTick","Promise","resolve","setTimeoutFn","globalThisShim","self","window","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","bind","clearTimeoutFn","randomString","Date","now","Math","random","TransportError","Error","constructor","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","open","readyState","doOpen","close","doClose","onClose","send","packets","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","indexOf","port","secure","Number","encodedQuery","str","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","join","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","XMLHttpRequest","hasCORS","empty","BaseXHR","location","isSSL","protocol","xd","req","request","method","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","cookieJar","addCookies","withCredentials","requestTimeout","timeout","onreadystatechange","parseCookies","getResponseHeader","status","_onLoad","_onError","document","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","unloadHandler","attachEvent","hasXHR2","newRequest","responseType","concat","isReactNative","navigator","product","toLowerCase","BaseWS","protocols","headers","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","catch","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","src","b","replace","exec","source","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","listener","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","id","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","code","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","ceil","_hasPingExpired","hasExpired","msg","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","to","_filterUpgrades","upgrades","filteredUpgrades","o","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","num","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","start","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect","connect_error","disconnect","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","min","max","factor","jitter","attempts","duration","rand","deviation","floor","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","cache","parsed","loc","test","href","url","sameNamespace","forceNew","multiplex","SocketContext","createContext","useSocket","useContext","SocketProvider","setSocket","setIsConnected","useEffect","token","localStorage","getItem","newSocket","import","log","console","userData","userId","Provider","ICONS","WelcomePopup","balance","onClick","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","updatedUser","setItem","fetchUserData","response","fetch","Authorization","ok","json","storedToken","logout","hasToken","isLoading","isMounted","loadUserData","login","removeItem","newToken","initialUserData","completeUserData","refreshUserData","handleCloseWelcomePopup","useAuth","AppHeader","AuthPage","setMode","navigate","useNavigate","Box","API_URL","endpoint","toUpperCase","requestBody","credentials","body","hasUser","hasUsername","hasId","textAlign","HowlerGlobal","init","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","_getSoundIds","sound","_soundById","_node","mute","muted","stop","unload","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","checkSafari","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","createBufferSource","destination","noteOn","resume","onended","_emit","_obtainHtml5Audio","testPlay","play","warn","audio","suspend","_sounds","_paused","_suspendTimer","handleSuspension","_resumeAfterSuspend","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_playLock","_onend","onend","_onfade","onfade","_onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","action","Sound","loadBuffer","internal","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","_seek","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","isCocoonJS","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","_clearSound","_interval","fade","from","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","remCache","events","isId","task","ended","_drain","limit","cnt","_panner","isIOS","vendor","howl","_parent","parent","createGain","createGainNode","_errorListener","_loadListener","_endListener","__default","loadSound","atob","dataView","decodeAudioData","safeXhrSend","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","createPanner","soundService","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","leave","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","maxTouchPoints","LobbyContext","LobbyProvider","gameList","setGameList","handleGameList","games","handleError","refreshGameList","contextValue","leaveGame","gameId","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","loadPreferences","React","useCallback","finalPreferences","updatePreference","prev","formattedData","toggleAutoAnte","newValue","toggleMute","uploadTwoSecondPotGif","file","fileName","fileSize","fileType","formData","FormData","append","text","statusText","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","CoinIcon","coinIcon","CurrencyAmount","amount","customClass","containerClasses","currencyAmount","darkBackground","pillBackground","Boolean","ToggleSwitch","isChecked","checked","FileUpload","onUpload","currentFileUrl","acceptedFileTypes","previewType","isUploading","setIsUploading","fileInputRef","useRef","ref","files","accept","alt","controls","handleButtonClick","current","click","disabled","PreferencesModal","style","position","border","borderRadius","top","left","PreferencesButton","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","d","UserAvatar","showName","namePosition","initials","getInitials","sizeClass","medium","containerClass","formattedImageUrl","userAvatarContainer","avatar","avatarImage","display","nextSibling","initialsPlaceholder","part","Lobby","lobbyLoading","lobbyError","searchQuery","setSearchQuery","setIsLoading","showPreferences","setShowPreferences","timeoutId","filteredGameList","useMemo","filtered","trim","game","sort","a","userInGameA","allPlayers","player","userInGameB","userDisconnectedInA","disconnectedPlayers","userDisconnectedInB","localeCompare","lobbyContainer","flexDirection","alignItems","justifyContent","height","gap","CircularProgress","maxWidth","formContainer","formSection","welcomeMessage","welcomeHeader","welcomeText","balanceDisplay","headerButtons","logoutButton","buttonText","gradientDivider","buttonGroup","actionButton","createButton","handleCreateGame","handleGameCreated","errorMessage","gameListContainer","gameListTitle","searchContainer","InputProps","startAdornment","InputAdornment","searchIcon","transition","opacity","gameListWrapper","gameListItem","userDisconnectedGame","userInGame","gameListInfo","gameListId","disconnectedBadge","title","inGameBadge","gameListPlayers","playerCount","joinGameButton","reconnectButton","continueButton","handleJoinGame","emptyGameList","emptyStateIcon","emptyStateMessage","emptyStateHint","LobbyWithProvider","GameContext","useGameContext","undefined","GameProvider","initialGameState","socketError","gameState","setGameState","prevPlayersRef","setPlayerId","players","currentPlayers","previousPlayers","newPlayers","leftPlayers","dealerChanged","enhancedState","prevState","placeBet","bet","payAnte","dealCards","revealMiddleCard","nextRound","playerReady","playerUnready","clearError","GAME_CONSTANTS","ANTE_AMOUNT","STARTING_BALANCE","FULL_DECK_SIZE","RECONNECTION_TIMEOUT","TIMERS","DEAL_FIRST_CARD_DELAY","DEAL_SECOND_CARD_DELAY","DEAL_THIRD_CARD_DELAY","DEALING_DURATION","BETTING_DURATION","DECISION_DURATION","REVEALING_DURATION","RESULTS_DURATION","module","MuteToggle","compact","GameSummaryModal","gameTransactions","playerNames","entries","playerId","transactions","playerName","playerTotals","totals","sum","tx","settleUpPayments","player1Id","player1Total","player2Id","player2Total","fromName","toName","payments","losers","_","winners","winner","loser","paymentAmount","currentTarget","payment","phaseDisplayMap","waiting","icon","dealing","revealing","results","GameHeader","handleLeaveGame","currentPhase","phase","timeLeft","setTimeLeft","showGameSummary","setShowGameSummary","waitingForAceDecision","phaseInfo","isCurrentPlayersTurn","currentPlayerId","currentPlayer","headerContainer","desktopLayout","headerLeft","gameTitle","liveTag","gameIdText","gameIdLink","headerCenter","gamePhase","phaseBettingYourTurn","phaseBettingWaiting","phaseIcon","phaseText","timerBar","timerProgress","width","headerRight","controlsStack","leaveButton","muteToggleContainer","mobileLayout","mobileTopRow","mobileBottomRow","ArrowIcon","direction","rotation","transformOrigin","CardDisplay","firstCard","secondCard","thirdCard","remainingCards","dealer","deckNumber","dealerName","cardLabels","J","Q","K","A","suitSymbols","hearts","diamonds","clubs","spades","renderCard","card","cardBack","isRed","suit","isAce","isAceLow","isMiddleCard","redCard","blackCard","aceCard","aceIndicator","aceLow","aceHigh","indicatorContent","cardCorner","cardValue","cardSuit","cardCenter","bottomRight","cardDisplayContainer","dealerRotationAlert","dealerIcon","dealerRotationText","cardsRow","dealingPhase","revealingPhase","renderCardLayout","displayCards","PotButton","BettingPanel","customBet","setCustomBet","pot","potAmount","isCurrentPlayer","myPlayer","playerBalance","handleCustomBetChange","maxBet","handleCustomBetSubmit","betAmount","handleKeyPress","renderBettingControls","onKeyPress","PlayerList","dealerId","currentUserId","seats","isCurrentUser","isDealer","mediaPreferences","BalanceDisplay","isReady","prevBalance","setPrevBalance","animationClass","setAnimationClass","timeoutRef","PotDisplay","POT","DeckDisplay","deckSize","AutoAnteToggle","playerIds","AnteControls","anteAmount","isPlayerReady","hasEnoughChips","Fragment","ResultsPanel","resultCountdown","outcomeText","outcome","resultsPanel","resultContent","penaltyWarning","cautionTape","resultText","winnings","winningsText","penaltyText","isTripleAceTie","countdownContainer","countdownText","countdownSeconds","countdownProgress","countdownBar","AceChoicePanel","countdown","setCountdown","prevCount","handleAceChoice","currentPlayerName","renderAceChoiceControls","SecondChancePanel","actionType","setActionType","waitingForSecondChance","handleSecondChance","anteAgain","renderSecondChanceControls","GameLog","isExpanded","setIsExpanded","gameLog","logEntries","toggleExpanded","displayEntries","entry","formatTime","timestamp","toLocaleTimeString","hour","minute","second","GameScreen","onReturnToLobby","loadingContainer","gameContainer","gameScreen","errorContainer","errorText","gameInfoWrapper","gameBottomSection","playerListContainer","gameLogContainer","LoadingScreen","GameRoom","useParams","setGame","onGameJoined","handleReturnToLobby","ProtectedRoute","Navigate","router","createBrowserRouter","element","App","RouterProvider","ReactDOM","getElementById","render","StrictMode"],"mappings":"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","x_google_ignoreList":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,36]}