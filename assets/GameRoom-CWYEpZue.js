import{j as e}from"./ui-BoIG0kJj.js";import{r as a,g as s,u as n}from"./vendor-CK21qyt8.js";import{a as t,u as l,s as r,U as i,f as c,L as o}from"./index-eaGedByF.js";import{I as d,C as u,a as _,R as m,P as h,S as g,c as x,b as j,G as p,U as v}from"./StoreModal-DHjxjFe9.js";import{u as N}from"./useGamepadNavigation-DgFngExv.js";const b="🍯",f="🃏",y="✓",C="🃏",{TIMERS:k}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},I=a.createContext(),w=()=>{const e=a.useContext(I);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},T=({children:s,gameId:n,initialGameState:i=null})=>{const{socket:c,error:o}=t(),{user:d}=l(),[u,_]=a.useState(i);a.useRef({});const m=a.useRef(null),[h,g]=a.useState(null),x=a.useCallback((()=>{g(null)}),[]);a.useEffect((()=>{o&&g(o)}),[o]),a.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{_(e.game),g(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(u)!==JSON.stringify(e)){if(e.currentPlayerId&&(null==d?void 0:d.id)){const a=e.currentPlayerId===d.id,s=m.current===d.id;a&&!s&&r.play("ui.alert"),m.current=e.currentPlayerId}_(e),x()}})),c.on("gameError",(e=>{g(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const j=a.useCallback((e=>{if(c&&n)try{c.emit("placeBet",{bet:e,gameId:n})}catch(a){g("Failed to place bet. Please try again.")}}),[c,n]),p=a.useCallback((()=>{if(c&&n)try{c.emit("payAnte",{gameId:n})}catch(e){g("Failed to pay ante. Please try again.")}}),[c,n]),v=a.useCallback((()=>{if(c&&n)try{c.emit("dealCards",{gameId:n})}catch(e){g("Failed to deal cards. Please try again.")}}),[c,n]),N=a.useCallback((()=>{if(c&&n)try{c.emit("revealMiddleCard",{gameId:n})}catch(e){g("Failed to reveal middle card. Please try again.")}}),[c,n]),b=a.useCallback((()=>{if(c&&n)try{c.emit("nextRound",{gameId:n})}catch(e){g("Failed to move to next round. Please try again.")}}),[c,n]),f=a.useCallback((()=>{if(c&&n)try{c.emit("ready")}catch(e){g("Failed to set player ready. Please try again.")}}),[c,n]),y=a.useCallback((()=>{if(c&&n)try{c.emit("unready")}catch(e){g("Failed to set player unready. Please try again.")}}),[c,n]),C={gameState:u,error:h,gameId:n,placeBet:j,payAnte:p,playerReady:f,playerUnready:y,dealCards:v,revealMiddleCard:N,nextRound:b,clearError:x};return e.jsx(I.Provider,{value:C,children:s})},S="_gameContainer_e1zrv_1",A="_gameScreen_e1zrv_16",B="_loadingContainer_e1zrv_52",P="_errorContainer_e1zrv_61",R="_errorText_e1zrv_71",L="_gameInfoWrapper_e1zrv_76",$="_gameBottomSection_e1zrv_91",E="_playerListContainer_e1zrv_98",D="_gameLogContainer_e1zrv_103",O="_imBackButton_e1zrv_141",F={headerContainer:"_headerContainer_bsfrc_1",desktopLayout:"_desktopLayout_bsfrc_14",mobileLayout:"_mobileLayout_bsfrc_22",mobileTopRow:"_mobileTopRow_bsfrc_28",mobileRight:"_mobileRight_bsfrc_40",mobileActions:"_mobileActions_bsfrc_47",mobileBottomRow:"_mobileBottomRow_bsfrc_54",headerLeft:"_headerLeft_bsfrc_63",headerRight:"_headerRight_bsfrc_69",controlsGroup:"_controlsGroup_bsfrc_75",controlsStack:"_controlsStack_bsfrc_82",mobileControlsStack:"_mobileControlsStack_bsfrc_89",gameTitle:"_gameTitle_bsfrc_98",liveTag:"_liveTag_bsfrc_108",pulse:"_pulse_bsfrc_1",gameIdText:"_gameIdText_bsfrc_160",gameIdLink:"_gameIdLink_bsfrc_167",balanceDisplay:"_balanceDisplay_bsfrc_184",headerCenter:"_headerCenter_bsfrc_217",gamePhase:"_gamePhase_bsfrc_245",phaseIcon:"_phaseIcon_bsfrc_307",phaseText:"_phaseText_bsfrc_312",timerBar:"_timerBar_bsfrc_316",timerProgress:"_timerProgress_bsfrc_326",dealPulse:"_dealPulse_bsfrc_1",betPulse:"_betPulse_bsfrc_1",revealFade:"_revealFade_bsfrc_1",resultPulse:"_resultPulse_bsfrc_1",phaseBettingYourTurn:"_phaseBettingYourTurn_bsfrc_480",phaseBettingWaiting:"_phaseBettingWaiting_bsfrc_487",reveal:"_reveal_bsfrc_1",sparkle:"_sparkle_bsfrc_1",timerDrain:"_timerDrain_bsfrc_1"},G=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),M=({onClick:a,title:s="Leave Game",...n})=>e.jsx(d,{icon:e.jsx(G,{color:"white",size:20}),title:s,onClick:a,variant:"danger",...n}),U={waiting:{text:"Waiting for Players",icon:"👥"},dealing:{text:"Dealing Cards",icon:f},revealing:{text:"Revealing Cards",icon:"🥁"},results:{text:"Round Results",icon:"🏆"}},z=({handleLeaveGame:s,onModalStateChange:n})=>{var r,i;const{gameState:c,gameId:o}=w(),{socket:d}=t(),{user:p}=l(),v=null==(r=null==d?void 0:d.auth)?void 0:r.userId,N=v&&(null==c?void 0:c.players)?c.players[v]:null,b=(null==N?void 0:N.balance)??(null==p?void 0:p.balance)??0,f=(null==c?void 0:c.phase)||"waiting",y=(null==N?void 0:N.isReady)||!1,[C,I]=a.useState(null),[T,S]=a.useState(!1),[A,B]=a.useState(!1),[P,R]=a.useState(!1),[L,$]=a.useState(!1),[E,D]=a.useState(!1);a.useEffect((()=>{let e;return"dealing"===f?(I(k.DEALING_DURATION),e=setInterval((()=>{I((e=>Math.max(0,e-100)))}),100)):"betting"===f?(I(k.BETTING_DURATION),e=setInterval((()=>{I((e=>Math.max(0,e-100)))}),100)):"revealing"===f?(I(k.REVEALING_DURATION),e=setInterval((()=>{I((e=>Math.max(0,e-100)))}),100)):"results"===f?(I(k.RESULTS_DURATION),e=setInterval((()=>{I((e=>Math.max(0,e-100)))}),100)):I(null),()=>{e&&clearInterval(e)}}),[f,null==c?void 0:c.waitingForAceDecision]),a.useEffect((()=>{n&&n(T||A||P||L||E)}),[T,A,P,L,E,n]);let O=U[f]||{text:"Unknown Phase",icon:"❓"};(null==c?void 0:c.waitingForAceDecision)&&"dealing"===f&&(O={text:"Choosing Ace Value",icon:"🤔"}),(null==c?void 0:c.waitingForSecondChance)&&(O={text:"Second Chance Decision",icon:"🤔"});const G=d&&(null==(i=d.auth)?void 0:i.userId)&&(null==c?void 0:c.currentPlayerId)===d.auth.userId;if("betting"===f&&(null==c?void 0:c.currentPlayerId)&&(null==c?void 0:c.players)){const e=c.players[c.currentPlayerId];O=e?G?{text:"Pass or Bet",icon:"🤔"}:{text:`${e.name} is Betting`,icon:"🤔"}:{text:"Betting Round",icon:"🤔"}}return e.jsxs("div",{className:F.headerContainer,children:[e.jsxs("div",{className:F.desktopLayout,children:[e.jsxs("div",{className:F.headerLeft,children:[e.jsxs("h1",{className:F.gameTitle,children:["In Between ",e.jsx("span",{className:F.liveTag,children:"LIVE"})]}),e.jsx("p",{className:F.gameIdText,children:e.jsxs("span",{className:F.gameIdLink,onClick:()=>S(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",o]})})]}),e.jsx("div",{className:F.headerCenter,children:e.jsxs("div",{className:`${F.gamePhase} ${"betting"===f?G?F.phaseBettingYourTurn:F.phaseBettingWaiting:F[`phase${f.charAt(0).toUpperCase()+f.slice(1)}`]}`,"data-phase":f,children:[e.jsx("span",{className:F.phaseIcon,children:O.icon}),e.jsx("span",{className:F.phaseText,children:O.text}),null!==C&&e.jsx("div",{className:F.timerBar,children:e.jsx("div",{className:F.timerProgress,style:{width:C/("dealing"===f?k.DEALING_DURATION:"betting"===f?k.BETTING_DURATION:"revealing"===f?k.REVEALING_DURATION:k.RESULTS_DURATION)*100+"%"}})})]})}),e.jsx("div",{className:F.headerRight,children:e.jsxs("div",{className:F.controlsStack,children:[e.jsxs("div",{className:F.balanceDisplay,children:["Balance: ",e.jsx(u,{amount:Number(b),size:"small"})]}),e.jsxs("div",{className:F.controlsGroup,children:[e.jsx(_,{onModalStateChange:R,"data-gamepad-focusable":"true"}),e.jsx(m,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(h,{onModalStateChange:D,"data-gamepad-focusable":"true"}),e.jsx(g,{onClick:()=>B(!0),"data-gamepad-focusable":"true"}),e.jsx(M,{onClick:s,disabled:y,"data-gamepad-focusable":"true"})]})]})})]}),e.jsxs("div",{className:F.mobileLayout,children:[e.jsxs("div",{className:F.mobileTopRow,children:[e.jsxs("div",{className:F.headerLeft,children:[e.jsxs("h1",{className:F.gameTitle,children:["In Between ",e.jsx("span",{className:F.liveTag,children:"LIVE"})]}),e.jsx("p",{className:F.gameIdText,children:e.jsxs("span",{className:F.gameIdLink,onClick:()=>S(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",o]})})]}),e.jsx("div",{className:F.mobileRight,children:e.jsxs("div",{className:F.mobileControlsStack,children:[e.jsxs("div",{className:F.balanceDisplay,children:["Balance: ",e.jsx(u,{amount:Number(b),size:"small"})]}),e.jsxs("div",{className:F.mobileActions,children:[e.jsx(_,{onModalStateChange:R,"data-gamepad-focusable":"true"}),e.jsx(m,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(h,{onModalStateChange:D,"data-gamepad-focusable":"true"}),e.jsx(g,{onClick:()=>B(!0),"data-gamepad-focusable":"true"}),e.jsx(M,{onClick:s,disabled:y,"data-gamepad-focusable":"true"})]})]})})]}),e.jsx("div",{className:F.mobileBottomRow,children:e.jsxs("div",{className:`${F.gamePhase} ${"betting"===f?G?F.phaseBettingYourTurn:F.phaseBettingWaiting:F[`phase${f.charAt(0).toUpperCase()+f.slice(1)}`]}`,"data-phase":f,children:[e.jsx("span",{className:F.phaseIcon,children:O.icon}),e.jsx("span",{className:F.phaseText,children:O.text}),null!==C&&e.jsx("div",{className:F.timerBar,children:e.jsx("div",{className:F.timerProgress,style:{width:C/("dealing"===f?k.DEALING_DURATION:"betting"===f?k.BETTING_DURATION:"revealing"===f?k.REVEALING_DURATION:k.RESULTS_DURATION)*100+"%"}})})]})})]}),T&&e.jsx(x,{onClose:()=>S(!1),gameData:c}),A&&e.jsx(j,{onClose:()=>B(!1)})]})},W={cardDisplayContainer:"_cardDisplayContainer_h5xgf_1",cardsRow:"_cardsRow_h5xgf_9",card:"_card_h5xgf_1",dealingPhase:"_dealingPhase_h5xgf_53",revealingPhase:"_revealingPhase_h5xgf_62",cardBack:"_cardBack_h5xgf_88",redCard:"_redCard_h5xgf_97",blackCard:"_blackCard_h5xgf_101",cardCorner:"_cardCorner_h5xgf_105",bottomRight:"_bottomRight_h5xgf_114",cardValue:"_cardValue_h5xgf_122",cardSuit:"_cardSuit_h5xgf_128",cardCenter:"_cardCenter_h5xgf_133",aceCard:"_aceCard_h5xgf_166",aceIndicator:"_aceIndicator_h5xgf_170",aceHigh:"_aceHigh_h5xgf_190",aceLow:"_aceLow_h5xgf_196",indicatorContent:"_indicatorContent_h5xgf_202"},q=({direction:a="up",color:s="currentColor",size:n=24})=>{const t="down"===a?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:t,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},V=()=>{const{gameState:a}=w();if(!a)return e.jsx("div",{className:W.loading,children:"Loading game state..."});const{firstCard:s,secondCard:n,thirdCard:t,phase:l,dealer:r}=a;null==r||r.name;const i={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},c={hearts:"♥",diamonds:"♦",clubs:"♣",spades:"♠","♥":"♥","♦":"♦","♣":"♣","♠":"♠"},o=(a,s)=>{if(!a)return e.jsx("div",{className:W.card,children:e.jsx("div",{className:W.cardBack})},`empty-${s}`);const n="♥"===(t=a.suit)||"♦"===t||"hearts"===t||"diamonds"===t;var t;const l="A"===a.value,r=a.isAceLow,o=1===s;return e.jsxs("div",{className:`${W.card} ${n?W.redCard:W.blackCard} ${l?W.aceCard:""}`,children:[l&&!o&&e.jsx("div",{className:`${W.aceIndicator} ${r?W.aceLow:W.aceHigh} ${n?W.redCard:W.blackCard}`,children:r?e.jsxs("span",{className:W.indicatorContent,children:["LOW ",e.jsx(q,{direction:"down",color:n?"#e74c3c":"#2c3e50",size:16})]}):e.jsxs("span",{className:W.indicatorContent,children:["HIGH ",e.jsx(q,{direction:"up",color:n?"#e74c3c":"#2c3e50",size:16})]})}),e.jsxs("div",{className:W.cardCorner,children:[e.jsx("div",{className:W.cardValue,children:i[a.value]}),e.jsx("div",{className:W.cardSuit,children:c[a.suit]})]}),e.jsx("div",{className:W.cardCenter,children:c[a.suit]}),e.jsxs("div",{className:`${W.cardCorner} ${W.bottomRight}`,children:[e.jsx("div",{className:W.cardValue,children:i[a.value]}),e.jsx("div",{className:W.cardSuit,children:c[a.suit]})]})]},`${a.value}-${a.suit}-${s}`)};return e.jsx("div",{className:W.cardDisplayContainer,children:e.jsx("div",{className:`${W.cardsRow} ${"dealing"===l?W.dealingPhase:""} ${"revealing"===l?W.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return s||n||t?(s&&(e[0]={...s}),n&&(e[2]={...n}),t&&(e[1]={...t}),e.map(((e,a)=>o(e,a)))):e.map(((e,a)=>o(e,a)))})()})})},H="_bettingPanel_1uxgg_1",J="_betContainer_1uxgg_19",Y="_betText_1uxgg_28",K="_extremeOptionsRow_1uxgg_45",Q="_betButtons_1uxgg_60",X="_betButton_1uxgg_60",Z="_disabledButton_1uxgg_110",ee="_extremeButton_1uxgg_117",ae="_passButton_1uxgg_131",se="_customBetContainer_1uxgg_141",ne="_customBetInput_1uxgg_155",te="_customBetButton_1uxgg_166",le="_potButton_146vb_5",re="_shimmerBorder_146vb_47",ie="_buttonBackground_146vb_81",ce="_reflectionEffect_146vb_101",oe="_buttonContent_146vb_148",de="_potText_146vb_164",ue="_potAmount_146vb_185",_e="_disabled_146vb_258",me=({amount:a,disabled:s,onClick:n,...t})=>e.jsxs("button",{className:`${le} ${s?_e:""}`,onClick:n,disabled:s,"aria-label":`Bet the pot: ${a} chips`,...t,children:[e.jsx("div",{className:re}),e.jsx("div",{className:ie}),e.jsx("div",{className:ce}),e.jsxs("div",{className:oe,children:[e.jsx("span",{className:de,children:"POT"}),e.jsx("span",{className:ue,children:e.jsx(u,{amount:a,background:"pill"})})]})]}),he=()=>{var s,n;const{gameState:l,placeBet:r}=w(),{socket:i}=t(),[c,o]=a.useState("");if(!l)return null;const{players:d,currentPlayerId:_,pot:m,phase:h,firstCard:g,secondCard:x}=l;if("betting"!==h)return null;const j=i&&_===(null==(s=i.auth)?void 0:s.userId),v=i&&d&&(null==(n=i.auth)?void 0:n.userId)?d[i.auth.userId]:null,N=Number((null==v?void 0:v.balance)||0),b=e=>{const a=e.target.value.replace(/[^0-9]/g,""),s=Math.min(m,N);a&&parseInt(a)>s?o(s.toString()):o(a)},f=()=>{if(c&&!isNaN(c)){const e=parseInt(c,10);e>=1&&e<=Math.min(m,N)&&(r(e),o(""))}},y=e=>{"Enter"===e.key&&f()};return j?e.jsx("div",{className:H,children:j?e.jsxs("div",{className:J,children:[e.jsxs("p",{className:Y,children:["Place your bet (Min: ",e.jsx(u,{amount:1}),", Max: ",e.jsx(u,{amount:Math.min(m,N)}),")"]}),e.jsxs("div",{className:K,children:[e.jsx("button",{className:`${X} ${ee} ${ae}`,onClick:()=>r(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),e.jsx(me,{amount:m,onClick:()=>r(m),disabled:m>N,"data-gamepad-focusable":"true"})]}),e.jsxs("div",{className:Q,children:[[1,2,5].map((a=>{const s=Math.min(m,N),n=a>s;return e.jsx("button",{className:`${X} ${n?Z:""}`,onClick:()=>r(a),disabled:n,"data-gamepad-focusable":"true",children:e.jsx(u,{amount:a})},a)})),e.jsxs("div",{className:se,children:[e.jsx(p,{title:"Enter Bet Amount",type:"number",className:ne,placeholder:"Custom",value:c,onChange:b,onKeyPress:y}),e.jsx("button",{className:te,onClick:f,disabled:!c,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},ge="_playersContainer_1etil_1",xe="_playersTitle_1etil_15",je="_playersList_1etil_38",pe="_playerItem_1etil_44",ve="_currentPlayer_1etil_72",Ne="_currentUser_1etil_78",be="_playerInfo_1etil_82",fe="_playerName_1etil_89",ye="_playerStatus_1etil_94",Ce="_disconnectedIndicator_1etil_101",ke="_playerBalanceContainer_1etil_108",Ie="_playerBalance_1etil_108",we="_balanceIncrease_1etil_127",Te="_balanceDecrease_1etil_131",Se="_readyIndicator_1etil_161",Ae="_ready_1etil_161",Be="_notReady_1etil_172",Pe="_sittingOut_1etil_176",Re="_emptyPlayerList_1etil_191",Le=()=>{var s;const{gameState:n}=w(),{socket:l}=t(),r=a.useContext(i);if(a.useEffect((()=>{if((null==n?void 0:n.players)&&r){const e=Object.values(n.players).map((e=>e.userId)).filter(Boolean);e.length>0&&r.prefetchUsers(e)}}),[null==n?void 0:n.players,r]),!n||!n.players)return e.jsx("div",{className:Re,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:c,currentPlayerId:o,dealerId:d,gameTransactions:u=[]}=n,_=null==(s=null==l?void 0:l.auth)?void 0:s.userId,m=n.totals||{};return c&&0!==Object.keys(c).length?e.jsxs("div",{className:ge,children:[e.jsx("h3",{className:xe,children:"Scoreboard"}),e.jsx("div",{className:je,children:n.seats.filter((e=>null!==e&&c[e])).map((a=>{const s=c[a],n=a===o,t=s.userId===_,l=a===d;return s.disconnected,e.jsxs("div",{className:`\n                  ${pe}\n                  ${n?ve:""}\n                  ${t?Ne:""}\n                `,children:[e.jsxs("div",{className:be,children:[e.jsx(v,{userId:s.userId,size:"small",showName:!1}),e.jsxs("span",{className:fe,children:[s.name,e.jsxs("span",{className:ye,children:[l&&` ${f}`,s.disconnected&&e.jsx("span",{className:Ce,title:"Player disconnected",children:"⚠️ Disconnected"})]})]})]}),e.jsxs("div",{className:ke,children:[e.jsx($e,{balance:m[a]||0}),e.jsx("div",{className:`\n                    ${Se} \n                    ${s.isSittingOut?Pe:s.isReady?Ae:Be}\n                  `,title:s.isSittingOut?"Sitting Out":s.isReady?"Ready":"Not Ready"})]})]},a)}))})]}):e.jsx("div",{className:Re,children:e.jsx("p",{children:"Waiting for players to join..."})})},$e=({balance:s})=>{const[n,t]=a.useState(s),[l,r]=a.useState(""),i=a.useRef(null);return a.useEffect((()=>{if(s!==n){r(s>n?we:Te),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{r("")}),1e3),t(s)}return()=>{i.current&&clearTimeout(i.current)}}),[s]),e.jsx("span",{className:`${Ie} ${l}`,children:e.jsx(u,{amount:s})})},Ee="_potDisplayContainer_1seua_1",De="_potIconWrapper_1seua_29",Oe="_potIcon_1seua_29",Fe="_potInfo_1seua_55",Ge="_potLabel_1seua_61",Me="_potAmount_1seua_73",Ue="_potCounter_1seua_80",ze=()=>{const{gameState:a}=w();if(!a)return null;const{pot:s,round:n=1}=a;return e.jsxs("div",{className:Ee,children:[e.jsx("div",{className:De,children:e.jsx("span",{className:Oe,children:b})}),e.jsxs("div",{className:Fe,children:[e.jsxs("h3",{className:Ge,children:["POT ",e.jsxs("span",{className:Ue,children:["(",n,")"]})]}),e.jsx("span",{className:Me,children:e.jsx(u,{amount:s,size:"medium"})})]})]})},We="_deckDisplayContainer_1nuck_1",qe="_deckVisual_1nuck_29",Ve="_deckIcon_1nuck_37",He="_deckThick_1nuck_45",Je="_deckMedium_1nuck_46",Ye="_deckThin_1nuck_47",Ke="_deckVeryThin_1nuck_48",Qe="_deckInfo_1nuck_95",Xe="_deckLabel_1nuck_101",Ze="_deckCount_1nuck_113",ea="_deckCounter_1nuck_120",aa=()=>{const{gameState:a}=w();if(!a)return null;const{deckSize:s=0,deckCount:n=1}=a;return e.jsxs("div",{className:We,children:[e.jsx("div",{className:`${qe} ${s>=40?He:s>=25?Je:s>=10?Ye:Ke}`,children:e.jsx("div",{className:Ve,children:C})}),e.jsxs("div",{className:Qe,children:[e.jsxs("h3",{className:Xe,children:["DECK ",e.jsxs("span",{className:ea,children:["(",n,")"]})]}),e.jsx("span",{className:Ze,children:s})]})]})},sa="_anteControlsWrapper_kosev_1",na="_controlsContainer_kosev_8",ta="_autoAnteContainer_kosev_25",la="_anteButton_kosev_32",ra="_backOutButton_kosev_32",ia="_shimmerBorder_kosev_107",ca="_anteIcon_kosev_225",oa="_backOutIcon_kosev_225",da="_buttonInfo_kosev_244",ua="_buttonLabel_kosev_250",_a="_buttonAmount_kosev_267",ma="_notEnoughChipsText_kosev_282",ha="_buttonContainerRow_kosev_294",ga="_sitOutHalfWidth_kosev_304",xa="_toggleContainer_11qbc_1",ja="_toggleLabel_11qbc_12",pa="_toggleInput_11qbc_19",va="_toggleSlider_11qbc_25",Na="_toggleText_11qbc_74",ba="_loading_11qbc_82",fa=()=>{const{preferences:a,toggleAutoAnte:s,loading:n}=c(),{gameState:l,playerReady:r}=w(),{socket:i}=t();return n?e.jsx("div",{className:ba,children:"Loading preferences..."}):e.jsx("div",{className:xa,children:e.jsxs("label",{className:ja,children:[e.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{var e;const n=!a.autoAnte,t=await s();if(n&&t&&r){let a=null;if(i&&(null==(e=i.auth)?void 0:e.userId)&&(null==l?void 0:l.players)){const e=Object.keys(l.players);for(const s of e)if(l.players[s].userId===i.auth.userId){a=l.players[s];break}}(null==a?void 0:a.isReady)||r()}},className:pa,"data-gamepad-focusable":"true"}),e.jsx("span",{className:va}),e.jsx("span",{className:Na,children:"Auto-Ante"})]})})},ya=()=>{var a;const{gameState:s,playerReady:n,playerUnready:r}=w(),{socket:i}=t(),{user:c}=l();if(!s)return null;const{players:o,anteAmount:d,phase:_}=s;if("waiting"!==_)return null;let m=null;if(i&&(null==(a=i.auth)?void 0:a.userId)&&o){const e=Object.keys(o);for(const a of e)if(o[a].userId===i.auth.userId){m=o[a];break}}else if(c&&o){const e=Object.keys(o);for(const a of e)if(o[a].userId===c.id){m=o[a];break}}const h=Number((null==m?void 0:m.balance)||0),g=null==m?void 0:m.isReady,x=h>=d;return e.jsx("div",{className:sa,children:e.jsxs("div",{className:na,children:[e.jsx("div",{className:ha,children:g?e.jsx("div",{className:ha,children:e.jsxs("button",{className:ra,onClick:()=>{"function"==typeof r&&r()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:ia}),e.jsx("span",{className:oa,children:"✕"}),e.jsx("div",{className:da,children:e.jsx("h3",{className:ua,children:"BACK OUT"})})]})}):e.jsxs("div",{className:ha,children:[e.jsxs("button",{className:la,onClick:n,disabled:!x,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:ia}),e.jsx("span",{className:ca,children:y}),e.jsxs("div",{className:da,children:[e.jsx("h3",{className:ua,children:"ANTE"}),e.jsx("span",{className:_a,children:e.jsx(u,{amount:d})})]})]}),e.jsxs("button",{className:`${ra} ${ga}`,onClick:()=>{var e;i&&s&&c&&i.emit("sitOut",{gameId:s.id,userId:(null==(e=i.auth)?void 0:e.userId)||c.id})},disabled:null==m?void 0:m.isSittingOut,title:(null==m?void 0:m.isSittingOut)?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:ia}),e.jsx("div",{className:da,children:e.jsx("h3",{className:ua,children:"SIT OUT"})})]}),!x&&e.jsxs("p",{className:ma,children:["Not enough coins (",e.jsx(u,{amount:d})," required)"]})]})}),e.jsx("div",{className:ta,children:e.jsx(fa,{})})]})})},Ca={resultsPanel:"_resultsPanel_ayp0x_1",resultContent:"_resultContent_ayp0x_19",resultText:"_resultText_ayp0x_27",winText:"_winText_ayp0x_34",tieText:"_tieText_ayp0x_39",loseText:"_loseText_ayp0x_50",winningsText:"_winningsText_ayp0x_55",countdownContainer:"_countdownContainer_ayp0x_62",countdownText:"_countdownText_ayp0x_67",countdownProgress:"_countdownProgress_ayp0x_74",countdownBar:"_countdownBar_ayp0x_82",penaltyWarning:"_penaltyWarning_ayp0x_95"},ka=()=>{var a;const{gameState:s}=w();if(!s.result)return null;const{result:n,players:t,resultCountdown:l}=s,r=null==(a=t[n.playerId])?void 0:a.name;return e.jsx("div",{className:Ca.resultsPanel,children:e.jsxs("div",{className:Ca.resultContent,children:[(()=>{switch(n.outcome){case"win":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${Ca.resultText} ${Ca.winText}`,children:[r," WON!"]}),n.winnings>0&&e.jsxs("p",{className:Ca.winningsText,children:["Winnings: ",e.jsx(u,{amount:n.winnings/2,size:"medium"})]})]});case"lose":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${Ca.resultText} ${Ca.loseText}`,children:[r," LOST!"]}),n.betAmount>0&&e.jsxs("p",{className:Ca.winningsText,children:["Loss: ",e.jsx(u,{amount:n.betAmount,size:"medium"})]})]});case"tie":return(()=>{const a=n.betAmount*(n.isTripleAceTie?3:2);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ca.penaltyWarning,children:e.jsx("div",{className:Ca.cautionTape})}),e.jsxs("h2",{className:`${Ca.resultText} ${Ca.tieText}`,children:[r," ",n.isTripleAceTie?"3X":"2X"," PENALTY!"]}),n.betAmount>0&&e.jsxs("p",{className:Ca.winningsText,children:["Penalty: ",e.jsx(u,{amount:a,size:"medium"})]})]})})();default:return null}})(),l&&e.jsxs("div",{className:Ca.countdownContainer,children:[e.jsxs("p",{className:Ca.countdownText,children:["Next hand in: ",l.countdownSeconds,"s"]}),e.jsx("div",{className:Ca.countdownProgress,children:e.jsx("div",{className:Ca.countdownBar,style:{width:l.countdownSeconds/5*100+"%"}})})]})]})})},Ia="_aceChoicePanel_1y6rg_1",wa="_aceChoiceControls_1y6rg_18",Ta="_aceChoiceText_1y6rg_31",Sa="_waitingMessage_1y6rg_39",Aa="_waitingText_1y6rg_53",Ba="_countdown_1y6rg_60",Pa="_aceChoiceButtons_1y6rg_66",Ra="_aceChoiceButton_1y6rg_66",La="_aceHighButton_1y6rg_100",$a="_aceLowButton_1y6rg_111",Ea="_buttonContent_1y6rg_122",Da=()=>{var s,n,r;const{socket:i}=t(),{gameState:c}=w(),{user:o}=l(),[d,u]=a.useState(15);a.useEffect((()=>{var e;if((null==c?void 0:c.waitingForAceDecision)&&(null==(e=null==i?void 0:i.auth)?void 0:e.userId)===c.currentPlayerId){u(15);const e=setInterval((()=>{u((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[null==c?void 0:c.waitingForAceDecision,null==c?void 0:c.currentPlayerId,null==(s=null==i?void 0:i.auth)?void 0:s.userId]);const _=e=>{i.emit("chooseAceValue",{isAceLow:e})},m=(null==(n=null==i?void 0:i.auth)?void 0:n.userId)===c.currentPlayerId,h=(null==(r=c.players[c.currentPlayerId])?void 0:r.name)||"Current player";return e.jsxs("div",{className:Ia,children:[m?e.jsxs("div",{className:wa,children:[e.jsxs("p",{className:Ta,children:["You've been dealt an Ace! Choose whether it should be high or low.",e.jsxs("span",{className:Ba,children:[" (",d,"s)"]})]}),e.jsxs("div",{className:Pa,children:[e.jsx("button",{className:`${Ra} ${La}`,onClick:()=>_(!1),"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsxs("span",{className:Ea,children:["ACE HIGH ",e.jsx(q,{direction:"up",color:"white",size:20})]})}),e.jsx("button",{className:`${Ra} ${$a}`,onClick:()=>_(!0),"data-gamepad-focusable":"true",children:e.jsxs("span",{className:Ea,children:["ACE LOW ",e.jsx(q,{direction:"down",color:"white",size:20})]})})]})]}):null,m?null:e.jsx("div",{className:Sa,children:e.jsxs("p",{className:Aa,children:[h," is choosing whether their Ace is high or low..."]})})]})},Oa="_secondChancePanel_mgk8a_1",Fa="_secondChanceControls_mgk8a_18",Ga="_secondChanceText_mgk8a_31",Ma="_waitingMessage_mgk8a_40",Ua="_waitingText_mgk8a_54",za="_countdown_mgk8a_61",Wa="_secondChanceButtons_mgk8a_68",qa="_secondChanceButton_mgk8a_68",Va="_anteAgainButton_mgk8a_94",Ha="_passButton_mgk8a_107",Ja="_currencyWrapper_mgk8a_120",Ya=()=>{var s,n;const{gameState:l}=w(),{socket:r}=t(),[i,c]=a.useState(!1),[o,d]=a.useState(null),[_,m]=a.useState(15);a.useEffect((()=>{var e;if((null==l?void 0:l.waitingForSecondChance)&&(null==(e=null==r?void 0:r.auth)?void 0:e.userId)===l.currentPlayerId){m(15);const e=setInterval((()=>{m((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[null==l?void 0:l.waitingForSecondChance,null==l?void 0:l.currentPlayerId,null==(s=null==r?void 0:r.auth)?void 0:s.userId]);const{players:h,currentPlayerId:g,anteAmount:x=1}=l,j=r&&g===(null==(n=r.auth)?void 0:n.userId),p=h[g],v=e=>{r&&(c(!0),d(e?"ante":"pass"),r.emit("secondChance",{anteAgain:e}))};return e.jsxs("div",{className:Oa,children:[j?e.jsxs("div",{className:Fa,children:[e.jsxs("p",{className:Ga,children:["Would you like to ante up again for a second chance?",e.jsxs("span",{className:za,children:[" (",_,"s)"]})]}),e.jsxs("div",{className:Wa,children:[e.jsx("button",{className:`${qa} ${Va}`,onClick:()=>v(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:i&&"ante"===o?"Processing...":e.jsxs(e.Fragment,{children:["Ante Up ",e.jsx("span",{className:Ja,children:e.jsx(u,{amount:x,size:"small"})})]})}),e.jsx("button",{className:`${qa} ${Ha}`,onClick:()=>v(!1),"data-gamepad-focusable":"true",children:i&&"pass"===o?"Processing...":"Pass"})]})]}):null,j?null:e.jsx("div",{className:Ma,children:e.jsxs("p",{className:Ua,children:[null==p?void 0:p.name," is deciding whether to take a second chance."]})})]})},Ka="_gameLogContainer_1c2o8_1",Qa="_gameLogHeader_1c2o8_10",Xa="_expandIcon_1c2o8_28",Za="_gameLogEntries_1c2o8_51",es="_expanded_1c2o8_61",as="_logEntry_1c2o8_65",ss="_logTime_1c2o8_90",ns="_logMessage_1c2o8_97",ts="_emptyLog_1c2o8_102",ls="_showMoreButton_1c2o8_110",rs=()=>{const{gameState:s}=w(),[n,t]=a.useState(!1);if(!s||!s.gameLog)return null;const l=s.gameLog||[],r=()=>{t(!n)},i=n?l:l.slice(0,5);return e.jsxs("div",{className:Ka,children:[e.jsxs("div",{className:Qa,onClick:r,children:[e.jsx("h3",{children:"Game Log"}),e.jsx("span",{className:Xa,children:n?"▲":"▼"})]}),e.jsx("div",{className:`${Za} ${n?es:""}`,children:0===i.length?e.jsx("div",{className:ts,children:"No game events yet"}):i.map(((a,s)=>{return e.jsxs("div",{className:as,children:[e.jsx("span",{className:ss,children:(n=a.timestamp,new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),e.jsx("span",{className:ns,children:a.message})]},s);var n}))}),!n&&l.length>5&&e.jsxs("div",{className:ls,onClick:r,children:["Show ",l.length-5," more entries"]})]})},is="_emojiReactions_19n7s_1",cs="_toggleButton_19n7s_8",os="_emojiPanel_19n7s_34",ds="_emojiGrid_19n7s_59",us="_emojiButton_19n7s_65",_s=()=>{const[s,n]=a.useState(!1),{socket:r}=t(),{gameState:i}=w(),{user:c}=l();return e.jsxs("div",{className:is,children:[e.jsx("button",{className:cs,onClick:()=>{n(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"😊"}),s&&e.jsx("div",{className:os,children:e.jsx("div",{className:ds,children:[{emoji:"🔥",name:"Fire",color:"#FF6B35"},{emoji:"😄",name:"Happy",color:"#FFD93D"},{emoji:"💩",name:"Poop",color:"#8B4513"},{emoji:"😎",name:"Cool",color:"#4A5568"},{emoji:"🤯",name:"Mind Blown",color:"#FFA500"},{emoji:"😈",name:"Devilish",color:"#9333EA"},{emoji:"😬",name:"Worried",color:"#FCD34D"},{emoji:"👏",name:"Applause",color:"#FBBF24"},{emoji:"😭",name:"Crying",color:"#3B82F6"},{emoji:"🤡",name:"Clown",color:"#EF4444"},{emoji:"💪",name:"Strong",color:"#F59E0B"},{emoji:"😅",name:"Nervous",color:"#60A5FA"},{emoji:"🎉",name:"Celebration",color:"#A855F7"},{emoji:"🤔",name:"Thinking",color:"#6B7280"},{emoji:"🙈",name:"See No Evil",color:"#A0522D"},{emoji:"😤",name:"Confident",color:"#DC2626"}].map(((a,s)=>e.jsx("button",{className:us,onClick:()=>(e=>{r&&i&&c&&(r.emit("emojiReaction",{gameId:i.id,emoji:e.emoji,color:e.color,playerName:c.username}),n(!1))})(a),"data-gamepad-focusable":"true",title:a.name,style:{"--emoji-color":a.color},children:a.emoji},s)))})})]})},ms=({onReturnToLobby:s})=>{const[n,r]=a.useState(!1),{gameState:i,error:c,clearError:o}=w();N(!0),a.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=t(),{user:u}=l();if(!i)return e.jsx("div",{className:B,children:e.jsx("p",{children:"Loading game state..."})});const _=i.phase||"waiting",m=null==u?void 0:u.id,h=i.players&&m?i.players[m]:null;return e.jsxs("div",{className:S,children:[e.jsxs("div",{className:`${A} mobile-scale-content`,children:[e.jsx(z,{handleLeaveGame:()=>{s&&s()},onModalStateChange:r}),c&&e.jsx("div",{className:P,children:e.jsx("p",{className:R,children:c})}),e.jsxs("div",{className:L,children:[e.jsx(aa,{}),e.jsx(ze,{})]}),e.jsx(V,{}),(null==h?void 0:h.isSittingOut)?e.jsx("button",{onClick:()=>{d&&i.id&&d.emit("imBack",{gameId:i.id})},className:O,"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===_?e.jsx(ya,{}):"results"===_?e.jsx(ka,{}):i.waitingForAceDecision?e.jsx(Da,{}):i.waitingForSecondChance?e.jsx(Ya,{}):"betting"===_?e.jsx(he,{}):null,e.jsxs("div",{className:$,children:[e.jsx("div",{className:E,children:e.jsx(Le,{})}),e.jsx("div",{className:D,children:e.jsx(rs,{})})]})]}),!n&&e.jsx(_s,{})]})},hs="_modalOverlay_quw6f_1",gs="_modalContent_quw6f_14",xs="_passwordInput_quw6f_34",js="_modalActions_quw6f_52",ps="_modalButton_quw6f_58",vs="_cancelButton_quw6f_69",Ns="_submitButton_quw6f_78";function bs({isOpen:s,onClose:n,onSubmit:t,gameId:l}){const[r,i]=a.useState("");if(!s)return null;return e.jsx("div",{className:hs,children:e.jsxs("div",{className:gs,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:l||""}),":"]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),t(r),i("")},children:[e.jsx(p,{title:"Enter Game Password",type:"password",value:r,onChange:e=>i(e.target.value),className:xs,autoFocus:!0,required:!0}),e.jsxs("div",{className:js,children:[e.jsx("button",{type:"button",onClick:()=>{i(""),n()},className:`${ps} ${vs}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${ps} ${Ns}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const fs=()=>{const{gameId:l}=s(),i=n(),{socket:c,isConnected:d}=t(),[u,_]=a.useState(!0),[m,h]=a.useState(null),[g,x]=a.useState(!1),j=a.useRef(!1),p=a.useCallback((()=>{c&&d&&l&&(r.play("ui.leave"),c.emit("leaveGame",{gameId:l}),i("/"))}),[c,d,l,i]),v=a.useCallback((e=>{x(!1),c&&l&&e&&(h(null),c.emit("joinGame",{gameId:l,password:e}),_(!0))}),[c,l]),N=a.useCallback((()=>{x(!1),i("/")}),[i]);a.useEffect((()=>{h(null),x(!1),_(!0)}),[l]),a.useEffect((()=>{if(!c)return;const e=e=>{e&&e.game&&e.game.id===l&&(r.play("ui.join"),_(!1),h(null),x(!1))},a=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(x(!0),_(!1),h(null)):"Invalid password"===a?(h("Invalid password."),x(!0),_(!1)):"Game not found"===a?i("/"):"Game is full"===a?(h(a),_(!1),x(!1),setTimeout((()=>i("/")),3e3)):(h(a),_(!1),x(!1))};return c.on("gameJoined",e),c.on("error",a),()=>{c.off("gameJoined",e),c.off("error",a)}}),[c,l,i]),a.useEffect((()=>{c&&l&&!j.current&&(j.current=!0,_(!0),h(null),x(!1),c.emit("joinGame",{gameId:l}))}),[c,l]);const b=()=>{const{gameState:s}=w(),{socket:n}=t();return a.useEffect((()=>{const e=e=>{var a;const t=null==(a=null==n?void 0:n.auth)?void 0:a.userId,l=t&&(null==s?void 0:s.players)?s.players[t]:null;if((null==l?void 0:l.isReady)||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(bs,{isOpen:g,onClose:N,onSubmit:v,gameId:l}),u&&e.jsx(o,{message:`Joining game ${l}...`}),m&&!u&&!g&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:m}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!u&&!m&&s&&e.jsx(ms,{onReturnToLobby:p})]})};return e.jsx(T,{gameId:l,children:e.jsx(b,{})})};export{fs as default};
//# sourceMappingURL=GameRoom-CWYEpZue.js.map
