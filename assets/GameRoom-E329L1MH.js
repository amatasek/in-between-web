import{r as e,j as a,m as s,u as t}from"./react-LCTZrjTk.js";import{a as n,u as r,s as l,U as i,f as c,L as o}from"./index-BdiHqHA_.js";import{I as d,C as u,a as m,R as _,P as h,S as g,c as x,b as p,G as j,U as N}from"./StoreModal-DGRXNZDU.js";import{u as y}from"./useGamepadNavigation-B8bT5PUC.js";import"./vendor-DCzzBhLE.js";import"./socket-DDuR0C0b.js";const v="🍯",b="🃏",C="✓",f="🃏",{TIMERS:k}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},I=e.createContext(),w=()=>{const a=e.useContext(I);if(void 0===a)throw new Error("useGameContext must be used within a GameProvider");return a},T=({children:s,gameId:t,initialGameState:i=null})=>{const{socket:c,error:o}=n(),{user:d}=r(),[u,m]=e.useState(i);e.useRef({});const _=e.useRef(null),[h,g]=e.useState(null),x=e.useCallback((()=>{g(null)}),[]);e.useEffect((()=>{o&&g(o)}),[o]),e.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{m(e.game),g(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(u)!==JSON.stringify(e)){if(e.currentPlayerId&&d?.id){const a=e.currentPlayerId===d.id,s=_.current===d.id;a&&!s&&l.play("ui.alert"),_.current=e.currentPlayerId}m(e),x()}})),c.on("gameError",(e=>{g(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const p=e.useCallback((e=>{if(c&&t)try{c.emit("placeBet",{bet:e,gameId:t})}catch(a){g("Failed to place bet. Please try again.")}}),[c,t]),j=e.useCallback((()=>{if(c&&t)try{c.emit("payAnte",{gameId:t})}catch(e){g("Failed to pay ante. Please try again.")}}),[c,t]),N=e.useCallback((()=>{if(c&&t)try{c.emit("dealCards",{gameId:t})}catch(e){g("Failed to deal cards. Please try again.")}}),[c,t]),y=e.useCallback((()=>{if(c&&t)try{c.emit("revealMiddleCard",{gameId:t})}catch(e){g("Failed to reveal middle card. Please try again.")}}),[c,t]),v=e.useCallback((()=>{if(c&&t)try{c.emit("nextRound",{gameId:t})}catch(e){g("Failed to move to next round. Please try again.")}}),[c,t]),b=e.useCallback((()=>{if(c&&t)try{c.emit("ready")}catch(e){g("Failed to set player ready. Please try again.")}}),[c,t]),C=e.useCallback((()=>{if(c&&t)try{c.emit("unready")}catch(e){g("Failed to set player unready. Please try again.")}}),[c,t]),f={gameState:u,error:h,gameId:t,placeBet:p,payAnte:j,playerReady:b,playerUnready:C,dealCards:N,revealMiddleCard:y,nextRound:v,clearError:x};return a.jsx(I.Provider,{value:f,children:s})},S={gameContainer:"_gameContainer_hptx1_1",gameScreen:"_gameScreen_hptx1_16",errorContainer:"_errorContainer_hptx1_60",errorText:"_errorText_hptx1_70",gameInfoWrapper:"_gameInfoWrapper_hptx1_75",gameBottomSection:"_gameBottomSection_hptx1_90",playerListContainer:"_playerListContainer_hptx1_97",gameLogContainer:"_gameLogContainer_hptx1_102",imBackButton:"_imBackButton_hptx1_205"},B={headerContainer:"_headerContainer_1ypzm_1",desktopLayout:"_desktopLayout_1ypzm_14",mobileLayout:"_mobileLayout_1ypzm_22",mobileTopRow:"_mobileTopRow_1ypzm_28",mobileRight:"_mobileRight_1ypzm_40",mobileActions:"_mobileActions_1ypzm_47",iconButton:"_iconButton_1ypzm_54",exitButton:"_exitButton_1ypzm_84",mobileBottomRow:"_mobileBottomRow_1ypzm_94",headerLeft:"_headerLeft_1ypzm_103",headerRight:"_headerRight_1ypzm_109",controlsGroup:"_controlsGroup_1ypzm_115",controlsStack:"_controlsStack_1ypzm_122",mobileControlsStack:"_mobileControlsStack_1ypzm_129",gameTitle:"_gameTitle_1ypzm_138",liveTag:"_liveTag_1ypzm_148",pulse:"_pulse_1ypzm_1",gameIdText:"_gameIdText_1ypzm_200",gameIdLink:"_gameIdLink_1ypzm_207",balanceDisplay:"_balanceDisplay_1ypzm_224",headerCenter:"_headerCenter_1ypzm_257",buttonGroup:"_buttonGroup_1ypzm_264",gamePhase:"_gamePhase_1ypzm_290",leaveButton:"_leaveButton_1ypzm_319",phaseIcon:"_phaseIcon_1ypzm_367",phaseText:"_phaseText_1ypzm_372",timerBar:"_timerBar_1ypzm_376",timerProgress:"_timerProgress_1ypzm_386",dealPulse:"_dealPulse_1ypzm_1",betPulse:"_betPulse_1ypzm_1",revealFade:"_revealFade_1ypzm_1",resultPulse:"_resultPulse_1ypzm_1",phaseWaiting:"_phaseWaiting_1ypzm_564",phaseDealing:"_phaseDealing_1ypzm_569",phaseBettingYourTurn:"_phaseBettingYourTurn_1ypzm_576",phaseBettingWaiting:"_phaseBettingWaiting_1ypzm_583",phaseRevealing:"_phaseRevealing_1ypzm_589",timerDrain:"_timerDrain_1ypzm_1",phaseResults:"_phaseResults_1ypzm_627",reveal:"_reveal_1ypzm_1",sparkle:"_sparkle_1ypzm_1"},A=({color:e="currentColor",size:s=24})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),R=({onClick:e,title:s="Leave Game",...t})=>a.jsx(d,{icon:a.jsx(A,{color:"white",size:20}),title:s,onClick:e,variant:"danger",...t}),P={waiting:{text:"Waiting for Players",icon:"👥"},dealing:{text:"Dealing Cards",icon:b},revealing:{text:"Revealing Cards",icon:"🥁"},results:{text:"Round Results",icon:"🏆"}},L=({handleLeaveGame:s,onModalStateChange:t})=>{const{gameState:l,gameId:i}=w(),{socket:c}=n(),{user:o}=r(),d=c?.auth?.userId,j=d&&l?.players?l.players[d]:null,N=j?.balance??o?.balance??0,y=l?.phase||"waiting",v=j?.isReady||!1,[b,C]=e.useState(null),[f,I]=e.useState(!1),[T,S]=e.useState(!1),[A,L]=e.useState(!1),[$,E]=e.useState(!1),[z,D]=e.useState(!1);e.useEffect((()=>{let e;return"dealing"===y?(C(k.DEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"betting"===y?(C(k.BETTING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"revealing"===y?(C(k.REVEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"results"===y?(C(k.RESULTS_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):C(null),()=>{e&&clearInterval(e)}}),[y,l?.waitingForAceDecision]),e.useEffect((()=>{t&&t(f||T||A||$||z)}),[f,T,A,$,z,t]);let O=P[y]||{text:"Unknown Phase",icon:"❓"};l?.waitingForAceDecision&&"dealing"===y&&(O={text:"Choosing Ace Value",icon:"🤔"}),l?.waitingForSecondChance&&(O={text:"Second Chance Decision",icon:"🤔"});const F=c&&c.auth?.userId&&l?.currentPlayerId===c.auth.userId;if("betting"===y&&l?.currentPlayerId&&l?.players){const e=l.players[l.currentPlayerId];O=e?F?{text:"Pass or Bet",icon:"🤔"}:{text:`${e.name} is Betting`,icon:"🤔"}:{text:"Betting Round",icon:"🤔"}}return a.jsxs("div",{className:B.headerContainer,children:[a.jsxs("div",{className:B.desktopLayout,children:[a.jsxs("div",{className:B.headerLeft,children:[a.jsxs("h1",{className:B.gameTitle,children:["In Between ",a.jsx("span",{className:B.liveTag,children:"LIVE"})]}),a.jsx("p",{className:B.gameIdText,children:a.jsxs("span",{className:B.gameIdLink,onClick:()=>I(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",i]})})]}),a.jsx("div",{className:B.headerCenter,children:a.jsxs("div",{className:`${B.gamePhase} ${"betting"===y?F?B.phaseBettingYourTurn:B.phaseBettingWaiting:B[`phase${y.charAt(0).toUpperCase()+y.slice(1)}`]}`,"data-phase":y,children:[a.jsx("span",{className:B.phaseIcon,children:O.icon}),a.jsx("span",{className:B.phaseText,children:O.text}),null!==b&&a.jsx("div",{className:B.timerBar,children:a.jsx("div",{className:B.timerProgress,style:{width:b/("dealing"===y?k.DEALING_DURATION:"betting"===y?k.BETTING_DURATION:"revealing"===y?k.REVEALING_DURATION:k.RESULTS_DURATION)*100+"%"}})})]})}),a.jsx("div",{className:B.headerRight,children:a.jsxs("div",{className:B.controlsStack,children:[a.jsxs("div",{className:B.balanceDisplay,children:["Balance: ",a.jsx(u,{amount:Number(N),size:"small"})]}),a.jsxs("div",{className:B.controlsGroup,children:[a.jsx(m,{onModalStateChange:L,"data-gamepad-focusable":"true"}),a.jsx(_,{onModalStateChange:E,"data-gamepad-focusable":"true"}),a.jsx(h,{onModalStateChange:D,"data-gamepad-focusable":"true"}),a.jsx(g,{onClick:()=>S(!0),"data-gamepad-focusable":"true"}),a.jsx(R,{onClick:s,disabled:v,"data-gamepad-focusable":"true"})]})]})})]}),a.jsxs("div",{className:B.mobileLayout,children:[a.jsxs("div",{className:B.mobileTopRow,children:[a.jsxs("div",{className:B.headerLeft,children:[a.jsxs("h1",{className:B.gameTitle,children:["In Between ",a.jsx("span",{className:B.liveTag,children:"LIVE"})]}),a.jsx("p",{className:B.gameIdText,children:a.jsxs("span",{className:B.gameIdLink,onClick:()=>I(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",i]})})]}),a.jsx("div",{className:B.mobileRight,children:a.jsxs("div",{className:B.mobileControlsStack,children:[a.jsxs("div",{className:B.balanceDisplay,children:["Balance: ",a.jsx(u,{amount:Number(N),size:"small"})]}),a.jsxs("div",{className:B.mobileActions,children:[a.jsx(m,{onModalStateChange:L,"data-gamepad-focusable":"true"}),a.jsx(_,{onModalStateChange:E,"data-gamepad-focusable":"true"}),a.jsx(h,{onModalStateChange:D,"data-gamepad-focusable":"true"}),a.jsx(g,{onClick:()=>S(!0),"data-gamepad-focusable":"true"}),a.jsx(R,{onClick:s,disabled:v,"data-gamepad-focusable":"true"})]})]})})]}),a.jsx("div",{className:B.mobileBottomRow,children:a.jsxs("div",{className:`${B.gamePhase} ${"betting"===y?F?B.phaseBettingYourTurn:B.phaseBettingWaiting:B[`phase${y.charAt(0).toUpperCase()+y.slice(1)}`]}`,"data-phase":y,children:[a.jsx("span",{className:B.phaseIcon,children:O.icon}),a.jsx("span",{className:B.phaseText,children:O.text}),null!==b&&a.jsx("div",{className:B.timerBar,children:a.jsx("div",{className:B.timerProgress,style:{width:b/("dealing"===y?k.DEALING_DURATION:"betting"===y?k.BETTING_DURATION:"revealing"===y?k.REVEALING_DURATION:k.RESULTS_DURATION)*100+"%"}})})]})})]}),f&&a.jsx(x,{onClose:()=>I(!1),gameData:l}),T&&a.jsx(p,{onClose:()=>S(!1)})]})},$={cardDisplayContainer:"_cardDisplayContainer_nd4gl_1",cardsRow:"_cardsRow_nd4gl_9",card:"_card_nd4gl_1",dealingPhase:"_dealingPhase_nd4gl_59",revealingPhase:"_revealingPhase_nd4gl_68",cardBack:"_cardBack_nd4gl_94",redCard:"_redCard_nd4gl_103",blackCard:"_blackCard_nd4gl_107",cardCorner:"_cardCorner_nd4gl_111",bottomRight:"_bottomRight_nd4gl_120",cardValue:"_cardValue_nd4gl_128",cardSuit:"_cardSuit_nd4gl_134",cardCenter:"_cardCenter_nd4gl_139",aceCard:"_aceCard_nd4gl_147",aceIndicator:"_aceIndicator_nd4gl_151",aceHigh:"_aceHigh_nd4gl_171",aceLow:"_aceLow_nd4gl_177",indicatorContent:"_indicatorContent_nd4gl_183"},E=({direction:e="up",color:s="currentColor",size:t=24})=>{const n="down"===e?"rotate(180deg)":"rotate(0deg)";return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:a.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},z=()=>{const{gameState:e}=w();if(!e)return a.jsx("div",{className:$.loading,children:"Loading game state..."});const{firstCard:s,secondCard:t,thirdCard:n,phase:r,dealer:l}=e,i={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},c={hearts:"♥",diamonds:"♦",clubs:"♣",spades:"♠","♥":"♥","♦":"♦","♣":"♣","♠":"♠"},o=(e,s)=>{if(!e)return a.jsx("div",{className:$.card,children:a.jsx("div",{className:$.cardBack})},`empty-${s}`);const t="♥"===(n=e.suit)||"♦"===n||"hearts"===n||"diamonds"===n;var n;const r="A"===e.value,l=e.isAceLow,o=1===s;return a.jsxs("div",{className:`${$.card} ${t?$.redCard:$.blackCard} ${r?$.aceCard:""}`,children:[r&&!o&&a.jsx("div",{className:`${$.aceIndicator} ${l?$.aceLow:$.aceHigh} ${t?$.redCard:$.blackCard}`,children:l?a.jsxs("span",{className:$.indicatorContent,children:["LOW ",a.jsx(E,{direction:"down",color:t?"#e74c3c":"#2c3e50",size:16})]}):a.jsxs("span",{className:$.indicatorContent,children:["HIGH ",a.jsx(E,{direction:"up",color:t?"#e74c3c":"#2c3e50",size:16})]})}),a.jsxs("div",{className:$.cardCorner,children:[a.jsx("div",{className:$.cardValue,children:i[e.value]}),a.jsx("div",{className:$.cardSuit,children:c[e.suit]})]}),a.jsx("div",{className:$.cardCenter,children:c[e.suit]}),a.jsxs("div",{className:`${$.cardCorner} ${$.bottomRight}`,children:[a.jsx("div",{className:$.cardValue,children:i[e.value]}),a.jsx("div",{className:$.cardSuit,children:c[e.suit]})]})]},`${e.value}-${e.suit}-${s}`)};return a.jsx("div",{className:$.cardDisplayContainer,children:a.jsx("div",{className:`${$.cardsRow} ${"dealing"===r?$.dealingPhase:""} ${"revealing"===r?$.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return s||t||n?(s&&(e[0]={...s}),t&&(e[2]={...t}),n&&(e[1]={...n}),e.map(((e,a)=>o(e,a)))):e.map(((e,a)=>o(e,a)))})()})})},D="_bettingPanel_tec12_1",O="_betContainer_tec12_145",F="_betText_tec12_154",G="_extremeOptionsRow_tec12_186",M="_betButtons_tec12_201",U="_betButton_tec12_201",W="_disabledButton_tec12_251",q="_extremeButton_tec12_258",V="_passButton_tec12_272",H="_customBetContainer_tec12_415",J="_customBetInput_tec12_429",Y="_customBetButton_tec12_440",K="_potButton_146vb_5",Q="_shimmerBorder_146vb_47",X="_buttonBackground_146vb_81",Z="_reflectionEffect_146vb_101",ee="_buttonContent_146vb_148",ae="_potText_146vb_164",se="_potAmount_146vb_185",te="_disabled_146vb_258",ne=({amount:e,disabled:s,onClick:t,...n})=>a.jsxs("button",{className:`${K} ${s?te:""}`,onClick:t,disabled:s,"aria-label":`Bet the pot: ${e} chips`,...n,children:[a.jsx("div",{className:Q}),a.jsx("div",{className:X}),a.jsx("div",{className:Z}),a.jsxs("div",{className:ee,children:[a.jsx("span",{className:ae,children:"POT"}),a.jsx("span",{className:se,children:a.jsx(u,{amount:e,background:"pill"})})]})]}),re=()=>{const{gameState:s,placeBet:t}=w(),{socket:r}=n(),[l,i]=e.useState("");if(!s)return null;const{players:c,currentPlayerId:o,pot:d,phase:m,firstCard:_,secondCard:h}=s;if("betting"!==m)return null;const g=r&&o===r.auth?.userId,x=r&&c&&r.auth?.userId?c[r.auth.userId]:null,p=Number(x?.balance||0),N=e=>{const a=e.target.value.replace(/[^0-9]/g,""),s=Math.min(d,p);a&&parseInt(a)>s?i(s.toString()):i(a)},y=()=>{if(l&&!isNaN(l)){const e=parseInt(l,10);e>=1&&e<=Math.min(d,p)&&(t(e),i(""))}},v=e=>{"Enter"===e.key&&y()};return g?a.jsx("div",{className:D,children:g?a.jsxs("div",{className:O,children:[a.jsxs("p",{className:F,children:["Place your bet (Min: ",a.jsx(u,{amount:1}),", Max: ",a.jsx(u,{amount:Math.min(d,p)}),")"]}),a.jsxs("div",{className:G,children:[a.jsx("button",{className:`${U} ${q} ${V}`,onClick:()=>t(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),a.jsx(ne,{amount:d,onClick:()=>t(d),disabled:d>p,"data-gamepad-focusable":"true"})]}),a.jsxs("div",{className:M,children:[[1,2,5].map((e=>{const s=Math.min(d,p),n=e>s;return a.jsx("button",{className:`${U} ${n?W:""}`,onClick:()=>t(e),disabled:n,"data-gamepad-focusable":"true",children:a.jsx(u,{amount:e})},e)})),a.jsxs("div",{className:H,children:[a.jsx(j,{title:"Enter Bet Amount",type:"number",className:J,placeholder:"Custom",value:l,onChange:N,onKeyPress:v}),a.jsx("button",{className:Y,onClick:y,disabled:!l,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},le="_playersContainer_1etil_1",ie="_playersTitle_1etil_15",ce="_playersList_1etil_38",oe="_playerItem_1etil_44",de="_currentPlayer_1etil_72",ue="_currentUser_1etil_78",me="_playerInfo_1etil_82",_e="_playerName_1etil_89",he="_playerStatus_1etil_94",ge="_disconnectedIndicator_1etil_101",xe="_playerBalanceContainer_1etil_108",pe="_playerBalance_1etil_108",je="_balanceIncrease_1etil_127",Ne="_balanceDecrease_1etil_131",ye="_readyIndicator_1etil_161",ve="_ready_1etil_161",be="_notReady_1etil_172",Ce="_sittingOut_1etil_176",fe="_emptyPlayerList_1etil_191",ke=()=>{const{gameState:s}=w(),{socket:t}=n(),r=e.useContext(i);if(e.useEffect((()=>{if(s?.players&&r){const e=Object.values(s.players).map((e=>e.userId)).filter(Boolean);e.length>0&&r.prefetchUsers(e)}}),[s?.players,r]),!s||!s.players)return a.jsx("div",{className:fe,children:a.jsx("p",{children:"Waiting for game data..."})});const{players:l,currentPlayerId:c,dealerId:o,gameTransactions:d=[]}=s,u=t?.auth?.userId,m=s.totals||{};return l&&0!==Object.keys(l).length?a.jsxs("div",{className:le,children:[a.jsx("h3",{className:ie,children:"Scoreboard"}),a.jsx("div",{className:ce,children:s.seats.filter((e=>null!==e&&l[e])).map((e=>{const s=l[e],t=e===c,n=s.userId===u,r=e===o;return s.disconnected,a.jsxs("div",{className:`\n                  ${oe}\n                  ${t?de:""}\n                  ${n?ue:""}\n                `,children:[a.jsxs("div",{className:me,children:[a.jsx(N,{userId:s.userId,size:"small",showName:!1}),a.jsxs("span",{className:_e,children:[s.name,a.jsxs("span",{className:he,children:[r&&` ${b}`,s.disconnected&&a.jsx("span",{className:ge,title:"Player disconnected",children:"⚠️ Disconnected"})]})]})]}),a.jsxs("div",{className:xe,children:[a.jsx(Ie,{balance:m[e]||0}),a.jsx("div",{className:`\n                    ${ye} \n                    ${s.isSittingOut?Ce:s.isReady?ve:be}\n                  `,title:s.isSittingOut?"Sitting Out":s.isReady?"Ready":"Not Ready"})]})]},e)}))})]}):a.jsx("div",{className:fe,children:a.jsx("p",{children:"Waiting for players to join..."})})},Ie=({balance:s})=>{const[t,n]=e.useState(s),[r,l]=e.useState(""),i=e.useRef(null);return e.useEffect((()=>{if(s!==t){l(s>t?je:Ne),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{l("")}),1e3),n(s)}return()=>{i.current&&clearTimeout(i.current)}}),[s]),a.jsx("span",{className:`${pe} ${r}`,children:a.jsx(u,{amount:s})})},we="_potDisplayContainer_1seua_1",Te="_potIconWrapper_1seua_29",Se="_potIcon_1seua_29",Be="_potInfo_1seua_55",Ae="_potLabel_1seua_61",Re="_potAmount_1seua_73",Pe="_potCounter_1seua_80",Le=()=>{const{gameState:e}=w();if(!e)return null;const{pot:s,round:t=1}=e;return a.jsxs("div",{className:we,children:[a.jsx("div",{className:Te,children:a.jsx("span",{className:Se,children:v})}),a.jsxs("div",{className:Be,children:[a.jsxs("h3",{className:Ae,children:["POT ",a.jsxs("span",{className:Pe,children:["(",t,")"]})]}),a.jsx("span",{className:Re,children:a.jsx(u,{amount:s,size:"medium"})})]})]})},$e="_deckDisplayContainer_1nuck_1",Ee="_deckVisual_1nuck_29",ze="_deckIcon_1nuck_37",De="_deckThick_1nuck_45",Oe="_deckMedium_1nuck_46",Fe="_deckThin_1nuck_47",Ge="_deckVeryThin_1nuck_48",Me="_deckInfo_1nuck_95",Ue="_deckLabel_1nuck_101",We="_deckCount_1nuck_113",qe="_deckCounter_1nuck_120",Ve=()=>{const{gameState:e}=w();if(!e)return null;const{deckSize:s=0,deckCount:t=1}=e;return a.jsxs("div",{className:$e,children:[a.jsx("div",{className:`${Ee} ${s>=40?De:s>=25?Oe:s>=10?Fe:Ge}`,children:a.jsx("div",{className:ze,children:f})}),a.jsxs("div",{className:Me,children:[a.jsxs("h3",{className:Ue,children:["DECK ",a.jsxs("span",{className:qe,children:["(",t,")"]})]}),a.jsx("span",{className:We,children:s})]})]})},He="_anteControlsWrapper_kosev_1",Je="_controlsContainer_kosev_8",Ye="_autoAnteContainer_kosev_25",Ke="_anteButton_kosev_32",Qe="_backOutButton_kosev_32",Xe="_shimmerBorder_kosev_107",Ze="_anteIcon_kosev_225",ea="_backOutIcon_kosev_225",aa="_buttonInfo_kosev_244",sa="_buttonLabel_kosev_250",ta="_buttonAmount_kosev_267",na="_notEnoughChipsText_kosev_282",ra="_buttonContainerRow_kosev_294",la="_sitOutHalfWidth_kosev_304",ia="_toggleContainer_11qbc_1",ca="_toggleLabel_11qbc_12",oa="_toggleInput_11qbc_19",da="_toggleSlider_11qbc_25",ua="_toggleText_11qbc_74",ma="_loading_11qbc_82",_a=()=>{const{preferences:e,toggleAutoAnte:s,loading:t}=c(),{gameState:r,playerReady:l}=w(),{socket:i}=n();return t?a.jsx("div",{className:ma,children:"Loading preferences..."}):a.jsx("div",{className:ia,children:a.jsxs("label",{className:ca,children:[a.jsx("input",{type:"checkbox",checked:e.autoAnte,onChange:async()=>{const a=!e.autoAnte,t=await s();if(a&&t&&l){let e=null;if(i&&i.auth?.userId&&r?.players){const a=Object.keys(r.players);for(const s of a)if(r.players[s].userId===i.auth.userId){e=r.players[s];break}}const a=e?.isReady;a||l()}},className:oa,"data-gamepad-focusable":"true"}),a.jsx("span",{className:da}),a.jsx("span",{className:ua,children:"Auto-Ante"})]})})},ha=()=>{const{gameState:e,playerReady:s,playerUnready:t}=w(),{socket:l}=n(),{user:i}=r();if(!e)return null;const{players:c,anteAmount:o,phase:d}=e;if("waiting"!==d)return null;let m=null;if(l&&l.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.auth.userId){m=c[a];break}}else if(i&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.id){m=c[a];break}}const _=Number(m?.balance||0),h=m?.isReady,g=_>=o;return a.jsx("div",{className:He,children:a.jsxs("div",{className:Je,children:[a.jsx("div",{className:ra,children:h?a.jsx("div",{className:ra,children:a.jsxs("button",{className:Qe,onClick:()=>{"function"==typeof t&&t()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[a.jsx("div",{className:Xe}),a.jsx("span",{className:ea,children:"✕"}),a.jsx("div",{className:aa,children:a.jsx("h3",{className:sa,children:"BACK OUT"})})]})}):a.jsxs("div",{className:ra,children:[a.jsxs("button",{className:Ke,onClick:s,disabled:!g,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[a.jsx("div",{className:Xe}),a.jsx("span",{className:Ze,children:C}),a.jsxs("div",{className:aa,children:[a.jsx("h3",{className:sa,children:"ANTE"}),a.jsx("span",{className:ta,children:a.jsx(u,{amount:o})})]})]}),a.jsxs("button",{className:`${Qe} ${la}`,onClick:()=>{l&&e&&i&&l.emit("sitOut",{gameId:e.id,userId:l.auth?.userId||i.id})},disabled:m?.isSittingOut,title:m?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[a.jsx("div",{className:Xe}),a.jsx("div",{className:aa,children:a.jsx("h3",{className:sa,children:"SIT OUT"})})]}),!g&&a.jsxs("p",{className:na,children:["Not enough coins (",a.jsx(u,{amount:o})," required)"]})]})}),a.jsx("div",{className:Ye,children:a.jsx(_a,{})})]})})},ga={resultsPanel:"_resultsPanel_ayp0x_1",resultContent:"_resultContent_ayp0x_19",resultText:"_resultText_ayp0x_27",winText:"_winText_ayp0x_34",tieText:"_tieText_ayp0x_39",loseText:"_loseText_ayp0x_50",winningsText:"_winningsText_ayp0x_55",countdownContainer:"_countdownContainer_ayp0x_62",countdownText:"_countdownText_ayp0x_67",countdownProgress:"_countdownProgress_ayp0x_74",countdownBar:"_countdownBar_ayp0x_82",penaltyWarning:"_penaltyWarning_ayp0x_95"},xa=()=>{const{gameState:e}=w();if(!e.result)return null;const{result:s,players:t,resultCountdown:n}=e,r=t[s.playerId]?.name;return a.jsx("div",{className:ga.resultsPanel,children:a.jsxs("div",{className:ga.resultContent,children:[(()=>{switch(s.outcome){case"win":return a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:`${ga.resultText} ${ga.winText}`,children:[r," WON!"]}),s.winnings>0&&a.jsxs("p",{className:ga.winningsText,children:["Winnings: ",a.jsx(u,{amount:s.winnings/2,size:"medium"})]})]});case"lose":return a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:`${ga.resultText} ${ga.loseText}`,children:[r," LOST!"]}),s.betAmount>0&&a.jsxs("p",{className:ga.winningsText,children:["Loss: ",a.jsx(u,{amount:s.betAmount,size:"medium"})]})]});case"tie":return(()=>{const e=s.betAmount*(s.isTripleAceTie?3:2);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ga.penaltyWarning,children:a.jsx("div",{className:ga.cautionTape})}),a.jsxs("h2",{className:`${ga.resultText} ${ga.tieText}`,children:[r," ",s.isTripleAceTie?"3X":"2X"," PENALTY!"]}),s.betAmount>0&&a.jsxs("p",{className:ga.winningsText,children:["Penalty: ",a.jsx(u,{amount:e,size:"medium"})]})]})})();default:return null}})(),n&&a.jsxs("div",{className:ga.countdownContainer,children:[a.jsxs("p",{className:ga.countdownText,children:["Next hand in: ",n.countdownSeconds,"s"]}),a.jsx("div",{className:ga.countdownProgress,children:a.jsx("div",{className:ga.countdownBar,style:{width:n.countdownSeconds/5*100+"%"}})})]})]})})},pa="_aceChoicePanel_1y6rg_1",ja="_aceChoiceControls_1y6rg_18",Na="_aceChoiceText_1y6rg_31",ya="_waitingMessage_1y6rg_39",va="_waitingText_1y6rg_53",ba="_countdown_1y6rg_60",Ca="_aceChoiceButtons_1y6rg_66",fa="_aceChoiceButton_1y6rg_66",ka="_aceHighButton_1y6rg_100",Ia="_aceLowButton_1y6rg_111",wa="_buttonContent_1y6rg_122",Ta=()=>{const{socket:s}=n(),{gameState:t}=w(),{user:l}=r(),[i,c]=e.useState(15);e.useEffect((()=>{if(t?.waitingForAceDecision&&s?.auth?.userId===t.currentPlayerId){c(15);const e=setInterval((()=>{c((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[t?.waitingForAceDecision,t?.currentPlayerId,s?.auth?.userId]);const o=e=>{s.emit("chooseAceValue",{isAceLow:e})},d=s?.auth?.userId===t.currentPlayerId,u=t.players[t.currentPlayerId]?.name||"Current player";return a.jsxs("div",{className:pa,children:[d?a.jsxs("div",{className:ja,children:[a.jsxs("p",{className:Na,children:["You've been dealt an Ace! Choose whether it should be high or low.",a.jsxs("span",{className:ba,children:[" (",i,"s)"]})]}),a.jsxs("div",{className:Ca,children:[a.jsx("button",{className:`${fa} ${ka}`,onClick:()=>o(!1),"data-gamepad-focusable":"true",autoFocus:!0,children:a.jsxs("span",{className:wa,children:["ACE HIGH ",a.jsx(E,{direction:"up",color:"white",size:20})]})}),a.jsx("button",{className:`${fa} ${Ia}`,onClick:()=>o(!0),"data-gamepad-focusable":"true",children:a.jsxs("span",{className:wa,children:["ACE LOW ",a.jsx(E,{direction:"down",color:"white",size:20})]})})]})]}):null,d?null:a.jsx("div",{className:ya,children:a.jsxs("p",{className:va,children:[u," is choosing whether their Ace is high or low..."]})})]})},Sa="_secondChancePanel_mgk8a_1",Ba="_secondChanceControls_mgk8a_18",Aa="_secondChanceText_mgk8a_31",Ra="_waitingMessage_mgk8a_40",Pa="_waitingText_mgk8a_54",La="_countdown_mgk8a_61",$a="_secondChanceButtons_mgk8a_68",Ea="_secondChanceButton_mgk8a_68",za="_anteAgainButton_mgk8a_94",Da="_passButton_mgk8a_107",Oa="_currencyWrapper_mgk8a_120",Fa=()=>{const{gameState:s}=w(),{socket:t}=n(),[r,l]=e.useState(!1),[i,c]=e.useState(null),[o,d]=e.useState(15);e.useEffect((()=>{if(s?.waitingForSecondChance&&t?.auth?.userId===s.currentPlayerId){d(15);const e=setInterval((()=>{d((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[s?.waitingForSecondChance,s?.currentPlayerId,t?.auth?.userId]);const{players:m,currentPlayerId:_,anteAmount:h=1}=s,g=t&&_===t.auth?.userId,x=m[_],p=e=>{t&&(l(!0),c(e?"ante":"pass"),t.emit("secondChance",{anteAgain:e}))};return a.jsxs("div",{className:Sa,children:[g?a.jsxs("div",{className:Ba,children:[a.jsxs("p",{className:Aa,children:["Would you like to ante up again for a second chance?",a.jsxs("span",{className:La,children:[" (",o,"s)"]})]}),a.jsxs("div",{className:$a,children:[a.jsx("button",{className:`${Ea} ${za}`,onClick:()=>p(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:r&&"ante"===i?"Processing...":a.jsxs(a.Fragment,{children:["Ante Up ",a.jsx("span",{className:Oa,children:a.jsx(u,{amount:h,size:"small"})})]})}),a.jsx("button",{className:`${Ea} ${Da}`,onClick:()=>p(!1),"data-gamepad-focusable":"true",children:r&&"pass"===i?"Processing...":"Pass"})]})]}):null,g?null:a.jsx("div",{className:Ra,children:a.jsxs("p",{className:Pa,children:[x?.name," is deciding whether to take a second chance."]})})]})},Ga="_gameLogContainer_1c2o8_1",Ma="_gameLogHeader_1c2o8_10",Ua="_expandIcon_1c2o8_28",Wa="_gameLogEntries_1c2o8_51",qa="_expanded_1c2o8_61",Va="_logEntry_1c2o8_65",Ha="_logTime_1c2o8_90",Ja="_logMessage_1c2o8_97",Ya="_emptyLog_1c2o8_102",Ka="_showMoreButton_1c2o8_110",Qa=()=>{const{gameState:s}=w(),[t,n]=e.useState(!1);if(!s||!s.gameLog)return null;const r=s.gameLog||[],l=()=>{n(!t)},i=t?r:r.slice(0,5);return a.jsxs("div",{className:Ga,children:[a.jsxs("div",{className:Ma,onClick:l,children:[a.jsx("h3",{children:"Game Log"}),a.jsx("span",{className:Ua,children:t?"▲":"▼"})]}),a.jsx("div",{className:`${Wa} ${t?qa:""}`,children:0===i.length?a.jsx("div",{className:Ya,children:"No game events yet"}):i.map(((e,s)=>{return a.jsxs("div",{className:Va,children:[a.jsx("span",{className:Ha,children:(t=e.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),a.jsx("span",{className:Ja,children:e.message})]},s);var t}))}),!t&&r.length>5&&a.jsxs("div",{className:Ka,onClick:l,children:["Show ",r.length-5," more entries"]})]})},Xa="_emojiReactions_19n7s_1",Za="_toggleButton_19n7s_8",es="_emojiPanel_19n7s_34",as="_emojiGrid_19n7s_59",ss="_emojiButton_19n7s_65",ts=()=>{const[s,t]=e.useState(!1),{socket:l}=n(),{gameState:i}=w(),{user:c}=r();return a.jsxs("div",{className:Xa,children:[a.jsx("button",{className:Za,onClick:()=>{t(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"😊"}),s&&a.jsx("div",{className:es,children:a.jsx("div",{className:as,children:[{emoji:"🔥",name:"Fire",color:"#FF6B35"},{emoji:"😄",name:"Happy",color:"#FFD93D"},{emoji:"💩",name:"Poop",color:"#8B4513"},{emoji:"😎",name:"Cool",color:"#4A5568"},{emoji:"🤯",name:"Mind Blown",color:"#FFA500"},{emoji:"😈",name:"Devilish",color:"#9333EA"},{emoji:"😬",name:"Worried",color:"#FCD34D"},{emoji:"👏",name:"Applause",color:"#FBBF24"},{emoji:"😭",name:"Crying",color:"#3B82F6"},{emoji:"🤡",name:"Clown",color:"#EF4444"},{emoji:"💪",name:"Strong",color:"#F59E0B"},{emoji:"😅",name:"Nervous",color:"#60A5FA"},{emoji:"🎉",name:"Celebration",color:"#A855F7"},{emoji:"🤔",name:"Thinking",color:"#6B7280"},{emoji:"🙈",name:"See No Evil",color:"#A0522D"},{emoji:"😤",name:"Confident",color:"#DC2626"}].map(((e,s)=>a.jsx("button",{className:ss,onClick:()=>(e=>{l&&i&&c&&(l.emit("emojiReaction",{gameId:i.id,emoji:e.emoji,color:e.color,playerName:c.username}),t(!1))})(e),"data-gamepad-focusable":"true",title:e.name,style:{"--emoji-color":e.color},children:e.emoji},s)))})})]})},ns=({onReturnToLobby:s})=>{const[t,l]=e.useState(!1),{gameState:i,error:c,clearError:o}=w();y(!0),e.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=n(),{user:u}=r();if(!i)return a.jsx("div",{className:S.loadingContainer,children:a.jsx("p",{children:"Loading game state..."})});const m=i.phase||"waiting",_=u?.id,h=i.players&&_?i.players[_]:null;return a.jsxs("div",{className:S.gameContainer,children:[a.jsxs("div",{className:`${S.gameScreen} mobile-scale-content`,children:[a.jsx(L,{handleLeaveGame:()=>{s&&s()},onModalStateChange:l}),c&&a.jsx("div",{className:S.errorContainer,children:a.jsx("p",{className:S.errorText,children:c})}),a.jsxs("div",{className:S.gameInfoWrapper,children:[a.jsx(Ve,{}),a.jsx(Le,{})]}),a.jsx(z,{}),h?.isSittingOut?a.jsx("button",{onClick:()=>{d&&i.id&&d.emit("imBack",{gameId:i.id})},className:S.imBackButton,"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===m?a.jsx(ha,{}):"results"===m?a.jsx(xa,{}):i.waitingForAceDecision?a.jsx(Ta,{}):i.waitingForSecondChance?a.jsx(Fa,{}):"betting"===m?a.jsx(re,{}):null,a.jsxs("div",{className:S.gameBottomSection,children:[a.jsx("div",{className:S.playerListContainer,children:a.jsx(ke,{})}),a.jsx("div",{className:S.gameLogContainer,children:a.jsx(Qa,{})})]})]}),!t&&a.jsx(ts,{})]})},rs="_modalOverlay_quw6f_1",ls="_modalContent_quw6f_14",is="_passwordInput_quw6f_34",cs="_modalActions_quw6f_52",os="_modalButton_quw6f_58",ds="_cancelButton_quw6f_69",us="_submitButton_quw6f_78";function ms({isOpen:s,onClose:t,onSubmit:n,gameId:r}){const[l,i]=e.useState("");if(!s)return null;return a.jsx("div",{className:rs,children:a.jsxs("div",{className:ls,children:[a.jsx("h2",{children:"Password Required"}),a.jsxs("p",{children:["Please enter the password for game ",a.jsx("strong",{children:r||""}),":"]}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(l),i("")},children:[a.jsx(j,{title:"Enter Game Password",type:"password",value:l,onChange:e=>i(e.target.value),className:is,autoFocus:!0,required:!0}),a.jsxs("div",{className:cs,children:[a.jsx("button",{type:"button",onClick:()=>{i(""),t()},className:`${os} ${ds}`,"data-gamepad-focusable":"true",children:"Cancel"}),a.jsx("button",{type:"submit",className:`${os} ${us}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const _s=()=>{const{gameId:r}=s(),i=t(),{socket:c,isConnected:d}=n(),[u,m]=e.useState(!0),[_,h]=e.useState(null),[g,x]=e.useState(!1),p=e.useRef(!1),j=e.useCallback((()=>{c&&d&&r&&(l.play("ui.leave"),c.emit("leaveGame",{gameId:r}),i("/"))}),[c,d,r,i]),N=e.useCallback((e=>{x(!1),c&&r&&e&&(h(null),c.emit("joinGame",{gameId:r,password:e}),m(!0))}),[c,r]),y=e.useCallback((()=>{x(!1),i("/")}),[i]);e.useEffect((()=>{h(null),x(!1),m(!0)}),[r]),e.useEffect((()=>{if(!c)return;const e=e=>{e&&e.game&&e.game.id===r&&(l.play("ui.join"),m(!1),h(null),x(!1))},a=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(x(!0),m(!1),h(null)):"Invalid password"===a?(h("Invalid password."),x(!0),m(!1)):"Game not found"===a?i("/"):"Game is full"===a?(h(a),m(!1),x(!1),setTimeout((()=>i("/")),3e3)):(h(a),m(!1),x(!1))};return c.on("gameJoined",e),c.on("error",a),()=>{c.off("gameJoined",e),c.off("error",a)}}),[c,r,i]),e.useEffect((()=>{c&&r&&!p.current&&(p.current=!0,m(!0),h(null),x(!1),c.emit("joinGame",{gameId:r}))}),[c,r]);const v=()=>{const{gameState:s}=w(),{socket:t}=n();return e.useEffect((()=>{const e=e=>{const a=t?.auth?.userId,n=a&&s?.players?s.players[a]:null;if(n?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,t]),a.jsxs(a.Fragment,{children:[a.jsx(ms,{isOpen:g,onClose:y,onSubmit:N,gameId:r}),u&&a.jsx(o,{message:`Joining game ${r}...`}),_&&!u&&!g&&a.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[a.jsx("h2",{children:"An error occurred"}),a.jsx("p",{children:_}),a.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!u&&!_&&s&&a.jsx(ns,{onReturnToLobby:j})]})};return a.jsx(T,{gameId:r,children:a.jsx(v,{})})};export{_s as default};
