import{a2 as O,_ as Z,a6 as ae,Z as e,a5 as _e,aa as H,ab as xe,ac as je,ad as ye}from"./index-C2Xvkgvu.js";import{b as m,h as fe,u as be}from"./vendor-CT7sGowS.js";import{G as pe,C as L,a as Ce,R as ve,P as Ne,S as Be,I as we,e as Ae,b as Te,U as Se,g as le,f as Ie,u as Pe,A as ke,c as Le,d as de}from"./useAdInterstitial-LH5w6QQm.js";import{u as $e}from"./useGamepadNavigation-DKu7SyYo.js";import"./socket-CA1CrNgP.js";import"./audio-hxunv4lQ.js";const ge=m.createContext(),P=()=>{const t=m.useContext(ge);if(t===void 0)throw new Error("useGameContext must be used within a GameProvider");return t},Ee=({children:t,gameId:n,initialGameState:o=null})=>{const{socket:s,error:c}=O(),{user:r}=Z(),[d,a]=m.useState(o),l=m.useRef(null),[_,i]=m.useState(null),h=m.useCallback(()=>{i(null)},[]);m.useEffect(()=>{c&&i(c)},[c]),m.useEffect(()=>{if(s)return s.on("gameReconnected",g=>{console.log(`[Game] Reconnected to game: ${g.gameId}`,g.game),a(g.game),console.log(`[Game] Successfully reconnected as user ID: ${r?.id}`),i(null),g.game&&g.game.id&&setTimeout(()=>{console.log("[Game] Requesting fresh game state after reconnection"),s.emit("getGameState",{gameId:g.game.id})},500)}),s.on("gameState",g=>{if(g&&g.id&&JSON.stringify(d)!==JSON.stringify(g)){if(g.currentPlayerId&&r?.id){const W=g.currentPlayerId===r.id,Y=l.current===r.id;W&&!Y&&ae.play("ui.alert"),l.current=g.currentPlayerId}a(g),h()}}),s.on("gameError",g=>{console.error("Game error:",g),i(g)}),()=>{s.off("gameReconnected"),s.off("gameState"),s.off("gameError")}},[s,h,d,r]);const u=m.useCallback(g=>{if(!(!s||!n))try{s.emit("placeBet",{bet:g,gameId:n})}catch(W){console.error("Error placing bet:",W),i("Failed to place bet. Please try again.")}},[s,n]),p=m.useCallback(()=>{if(!(!s||!n))try{s.emit("payAnte",{gameId:n})}catch(g){console.error("Error paying ante:",g),i("Failed to pay ante. Please try again.")}},[s,n]),f=m.useCallback(()=>{if(!(!s||!n))try{s.emit("dealCards",{gameId:n})}catch(g){console.error("Error dealing cards:",g),i("Failed to deal cards. Please try again.")}},[s,n]),v=m.useCallback(()=>{if(!(!s||!n))try{s.emit("revealMiddleCard",{gameId:n})}catch(g){console.error("Error revealing middle card:",g),i("Failed to reveal middle card. Please try again.")}},[s,n]),C=m.useCallback(()=>{if(!(!s||!n))try{s.emit("nextRound",{gameId:n})}catch(g){console.error("Error moving to next round:",g),i("Failed to move to next round. Please try again.")}},[s,n]),$=m.useCallback(()=>{if(!(!s||!n))try{s.emit("ready")}catch(g){console.error("Error setting player ready:",g),i("Failed to set player ready. Please try again.")}},[s,n]),S=m.useCallback(()=>{if(!(!s||!n))try{s.emit("unready")}catch(g){console.error("Error setting player unready:",g),i("Failed to set player unready. Please try again.")}},[s,n]),w={gameState:d,error:_,gameId:n,placeBet:u,payAnte:p,playerReady:$,playerUnready:S,dealCards:f,revealMiddleCard:v,nextRound:C,clearError:h};return e.jsx(ge.Provider,{value:w,children:t})},Re="_modalOverlay_17ksc_1",Oe="_modalContent_17ksc_14",Me="_passwordInput_17ksc_34",De="_modalActions_17ksc_54",Ge="_modalButton_17ksc_60",Fe="_cancelButton_17ksc_71",qe="_submitButton_17ksc_80",M={modalOverlay:Re,modalContent:Oe,passwordInput:Me,modalActions:De,modalButton:Ge,cancelButton:Fe,submitButton:qe};function Ue({isOpen:t,onClose:n,onSubmit:o,gameId:s}){const[c,r]=m.useState("");if(!t)return null;const d=l=>{l.preventDefault(),o(c),r("")},a=()=>{r(""),n()};return e.jsx("div",{className:M.modalOverlay,children:e.jsxs("div",{className:M.modalContent,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:s||""}),":"]}),e.jsxs("form",{onSubmit:d,autoComplete:"off",children:[e.jsx(pe,{title:"Enter Game Password",type:"text",value:c,onChange:l=>r(l.target.value),className:M.passwordInput,autoFocus:!0,required:!0,autoComplete:"off","data-form-type":"other","data-lpignore":"true"}),e.jsxs("div",{className:M.modalActions,children:[e.jsx("button",{type:"button",onClick:a,className:`${M.modalButton} ${M.cancelButton}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${M.modalButton} ${M.submitButton}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const ze="_gameContainer_1m0ij_1",He="_gameScreen_1m0ij_7",We="_loadingContainer_1m0ij_41",Ye="_errorContainer_1m0ij_50",Ve="_errorText_1m0ij_66",Je="_gameBottomSection_1m0ij_95",Ke="_withAds_1m0ij_102",G={gameContainer:ze,gameScreen:He,loadingContainer:We,errorContainer:Ye,errorText:Ve,gameBottomSection:Je,withAds:Ke},Qe="_emojiReactions_1sxwe_1",Ze="_withAds_1sxwe_8",Xe="_toggleButton_1sxwe_24",et="_emojiPanel_1sxwe_51",tt="_emojiGrid_1sxwe_76",st="_emojiButton_1sxwe_82",F={emojiReactions:Qe,withAds:Ze,toggleButton:Xe,emojiPanel:et,emojiGrid:tt,emojiButton:st},nt=()=>{const[t,n]=m.useState(!1),{socket:o}=O(),{gameState:s}=P(),{user:c}=Z(),{showAds:r}=_e(),d=m.useRef(null),a=[{emoji:"ğŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ğŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ğŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ğŸ˜",name:"Cool",color:"#4A5568"},{emoji:"ğŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ğŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ğŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ğŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ğŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ğŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ğŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ğŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ğŸ‰",name:"Celebration",color:"#A855F7"},{emoji:"ğŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ğŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ğŸ˜¤",name:"Confident",color:"#DC2626"}],l=i=>{!o||!s||!c||(o.emit("emojiReaction",{gameId:s.id,emoji:i.emoji,color:i.color,playerName:c.username}),n(!1))},_=()=>{n(!t)};return m.useEffect(()=>{const i=h=>{d.current&&!d.current.contains(h.target)&&n(!1)};return t&&(document.addEventListener("mousedown",i),document.addEventListener("touchstart",i)),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}},[t]),e.jsxs("div",{className:`${F.emojiReactions} ${r?F.withAds:""}`,ref:d,children:[e.jsx("button",{type:"button",className:F.toggleButton,onClick:_,"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ğŸ˜Š"}),t&&e.jsx("div",{className:F.emojiPanel,children:e.jsx("div",{className:F.emojiGrid,children:a.map(i=>e.jsx("button",{type:"button",className:F.emojiButton,onClick:()=>l(i),"data-gamepad-focusable":"true",title:i.name,style:{"--emoji-color":i.color},children:i.emoji},i.name))})})]})},at="_headerContainer_j4t2f_1",ot="_header_j4t2f_1",rt="_headerLeft_j4t2f_30",ct="_gameTitle_j4t2f_39",it="_gameIdText_j4t2f_50",lt="_gameIdLink_j4t2f_57",dt="_headerRight_j4t2f_70",ut="_controlsStack_j4t2f_76",mt="_balanceDisplay_j4t2f_83",_t="_balanceLabel_j4t2f_96",pt="_controlsGroup_j4t2f_102",E={headerContainer:at,header:ot,headerLeft:rt,gameTitle:ct,gameIdText:it,gameIdLink:lt,headerRight:dt,controlsStack:ut,balanceDisplay:mt,balanceLabel:_t,controlsGroup:pt},gt=({color:t="currentColor",size:n=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),ht=({handleLeaveGame:t,onModalStateChange:n})=>{const{gameState:o,gameId:s}=P(),{socket:c}=O(),{user:r}=Z(),d=c?.auth?.userId,a=d&&o?.players?o.players[d]:null,l=a?.balance??r?.balance??0,_=a?.isReady||!1,[i,h]=m.useState(!1),[u,p]=m.useState(!1),[f,v]=m.useState(!1),[C,$]=m.useState(!1),[S,w]=m.useState(!1);return m.useEffect(()=>{n&&n(i||u||f||C||S)},[i,u,f,C,S,n]),e.jsxs("div",{className:E.headerContainer,children:[e.jsxs("div",{className:E.header,children:[e.jsxs("div",{className:E.headerLeft,children:[e.jsxs("h1",{className:E.gameTitle,children:["In Between ",e.jsx("span",{className:"live-tag small",children:"LIVE"})]}),e.jsx("p",{className:E.gameIdText,children:e.jsxs("span",{className:E.gameIdLink,onClick:()=>h(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",s]})})]}),e.jsx("div",{className:E.headerRight,children:e.jsxs("div",{className:E.controlsStack,children:[e.jsxs("div",{className:E.balanceDisplay,children:[e.jsx("span",{className:E.balanceLabel,children:"Balance:"}),e.jsx(L,{amount:Number(l),size:"small"})]}),e.jsxs("div",{className:E.controlsGroup,children:[e.jsx(Ce,{inGame:!0,onModalStateChange:v,"data-gamepad-focusable":"true"}),e.jsx(ve,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(Ne,{onModalStateChange:w,"data-gamepad-focusable":"true"}),e.jsx(Be,{onClick:()=>p(!0),"data-gamepad-focusable":"true"}),e.jsx(we,{icon:e.jsx(gt,{color:"white",size:20}),title:"Leave Game",onClick:t,variant:"danger",disabled:_,"data-gamepad-focusable":"true"})]})]})})]}),i&&e.jsx(Ae,{onClose:()=>h(!1),gameData:o}),u&&e.jsx(Te,{onClose:()=>p(!1)})]})},xt="_gameLogContainer_avo5w_1",jt="_gameLogHeader_avo5w_15",yt="_expandIcon_avo5w_29",ft="_gameLogEntries_avo5w_53",bt="_logEntry_avo5w_63",Ct="_logTime_avo5w_88",vt="_logMessage_avo5w_95",Nt="_systemMessage_avo5w_100",Bt="_emptyLog_avo5w_111",wt="_showMoreButton_avo5w_119",k={gameLogContainer:xt,gameLogHeader:jt,expandIcon:yt,gameLogEntries:ft,logEntry:bt,logTime:Ct,logMessage:vt,systemMessage:Nt,emptyLog:Bt,showMoreButton:wt},At="_roundPanel_1npc7_2",Tt="_dividerLine_1npc7_26",St="_roundLabel_1npc7_38",X={roundPanel:At,dividerLine:Tt,roundLabel:St},It=({roundNumber:t})=>e.jsxs("div",{className:`panel-alt ${X.roundPanel}`,children:[e.jsx("div",{className:X.dividerLine}),e.jsxs("span",{className:X.roundLabel,children:["Round ",t]}),e.jsx("div",{className:X.dividerLine})]}),Pt="_turnPanel_1mzsb_2",kt="_leftSection_1mzsb_15",Lt="_win_1mzsb_22",$t="_lose_1mzsb_27",Et="_penalty_1mzsb_32",Rt="_pass_1mzsb_37",Ot="_cardsContainer_1mzsb_43",Mt="_playerName_1mzsb_49",Dt="_action_1mzsb_56",Gt="_amount_1mzsb_65",R={turnPanel:Pt,leftSection:kt,win:Lt,lose:$t,penalty:Et,pass:Rt,cardsContainer:Ot,playerName:Mt,action:Dt,amount:Gt},Ft="_cardMini_tdd1b_2",qt="_red_tdd1b_18",Ut="_black_tdd1b_22",zt="_rank_tdd1b_26",Ht="_aceIndicator_tdd1b_34",Wt="_suit_tdd1b_53",Yt="_cardPlaceholder_tdd1b_58",D={cardMini:Ft,red:qt,black:Ut,rank:zt,aceIndicator:Ht,suit:Wt,cardPlaceholder:Yt},Vt={TIMERS:{BETTING_DURATION:3e4,DECISION_DURATION:15e3}},y={HEARTS:"â™¥",DIAMONDS:"â™¦",CLUBS:"â™£",SPADES:"â™ ",ARROW_RIGHT:"â†’",ARROW_UP:"â†‘",ARROW_DOWN:"â†“",ROTATE:"â†»",CHECK:"âœ“",CROSS:"âœ•"},{TIMERS:oe}=Vt,ne=({card:t})=>{if(!t)return e.jsx("div",{className:D.cardPlaceholder,children:"?"});const n=l=>{switch(l){case"hearts":case"â™¥":return y.HEARTS;case"diamonds":case"â™¦":return y.DIAMONDS;case"clubs":case"â™£":return y.CLUBS;case"spades":case"â™ ":return y.SPADES;default:return l||""}},o=t.value||"?",s=t.suit||"?",c=s==="â™¥"||s==="â™¦"||s==="hearts"||s==="diamonds",r=o==="A",d=t.isAceLow===!0,a=r&&!d;return e.jsxs("div",{className:`${D.cardMini} ${c?D.red:D.black}`,children:[e.jsxs("span",{className:D.rank,children:[o,r&&(a?e.jsx("span",{className:D.aceIndicator,children:"â†‘"}):d?e.jsx("span",{className:D.aceIndicator,children:"â†“"}):null)]}),e.jsx("span",{className:D.suit,children:n(s)})]})},Jt=({summary:t})=>{if(!t)return null;const n=c=>{switch(c){case"win":return R.win;case"lose":return R.lose;case"penalty":case"triple_penalty":return R.penalty;case"pass":return R.pass;default:return R.default}},o=c=>{switch(c){case"win":return"WON";case"lose":return"LOST";case"penalty":return"PENALTY";case"triple_penalty":return"TRIPLE PENALTY";case"pass":return"PASSED";case"bet":return"BET";default:return c?.toUpperCase()||""}},s=()=>t.winAmount?t.winAmount/2:t.lossAmount?t.lossAmount:t.betAmount?t.betAmount:0;return e.jsxs("div",{className:`panel-alt ${R.turnPanel} ${n(t.action)}`,children:[e.jsxs("div",{className:R.leftSection,children:[e.jsxs("div",{className:R.cardsContainer,children:[e.jsx(ne,{card:t.cards?.left}),t.cards?.middle&&e.jsx(ne,{card:t.cards?.middle}),e.jsx(ne,{card:t.cards?.right})]}),e.jsx("span",{className:R.playerName,children:e.jsx(H,{username:t.playerName})}),e.jsx("span",{className:R.action,children:o(t.action)})]}),s()>0&&e.jsx("div",{className:R.amount,children:e.jsx(L,{amount:s(),size:"small"})})]})},Kt=()=>{const{gameState:t}=P(),[n,o]=m.useState(!1),s=t?.gameLog||[],c=t?.seats?t.seats.filter(p=>p!==null).length:0,r=Math.max(c,4),[d,a]=m.useState(r);if(m.useEffect(()=>{n||a(r)},[c,r,n]),!t||!t.gameLog)return null;const l=p=>new Date(p).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_=()=>{o(!n),n&&a(r)},i=()=>{a(p=>p+Math.max(c,5))},h=n?[]:s.slice(0,d),u=p=>p.type==="turn"?e.jsx(Jt,{summary:p},p.id):p.type==="round_start"?e.jsx(It,{roundNumber:p.roundNumber},p.id):p.type==="system"||p.type==="error"?e.jsxs("div",{className:`${k.logEntry} ${k.systemMessage}`,children:[e.jsx("span",{className:k.logTime,children:l(p.timestamp)}),e.jsx("span",{className:k.logMessage,children:p.message})]},p.id):e.jsxs("div",{className:k.logEntry,children:[e.jsx("span",{className:k.logTime,children:l(p.timestamp)}),e.jsx("span",{className:k.logMessage,children:p.message})]},p.id);return e.jsxs("div",{className:k.gameLogContainer,children:[e.jsxs("h3",{className:k.gameLogHeader,onClick:_,children:["Game Log",e.jsx("span",{className:k.expandIcon,children:n?"â–¶":"â–¼"})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:k.gameLogEntries,children:s.length===0?e.jsx("div",{className:k.emptyLog,children:"No game events yet"}):h.map(u)}),s.length>d&&e.jsxs("div",{className:k.showMoreButton,onClick:i,children:["Show ",Math.min(Math.max(c,5),s.length-d)," more",s.length-d>Math.max(c,5)&&` (${s.length-d} remaining)`]})]})]})},Qt="_playersContainer_1b112_1",Zt="_playersTitle_1b112_21",Xt="_playersList_1b112_45",es="_currentPlayerGlow_1b112_53",ts="_currentUser_1b112_67",ss="_playerInfo_1b112_71",ns="_playerStatus_1b112_79",as="_disconnectedIndicator_1b112_86",os="_playerBalanceContainer_1b112_93",rs="_readyIndicator_1b112_146",cs="_ready_1b112_146",is="_notReady_1b112_157",ls="_sittingOut_1b112_161",ds="_emptyPlayerList_1b112_176",T={playersContainer:Qt,playersTitle:Zt,playersList:Xt,currentPlayerGlow:es,currentUser:ts,playerInfo:ss,playerStatus:ns,disconnectedIndicator:as,playerBalanceContainer:os,readyIndicator:rs,ready:cs,notReady:is,sittingOut:ls,emptyPlayerList:ds},us=()=>{const{gameState:t}=P(),{socket:n}=O(),o=m.useContext(xe);if(m.useEffect(()=>{if(t?.players&&o){const a=Object.values(t.players).map(l=>l.userId).filter(Boolean);a.length>0&&o.prefetchUsers(a)}},[t?.players,o]),!t||!t.players)return e.jsx("div",{className:T.emptyPlayerList,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:s,currentPlayerId:c}=t,r=n?.auth?.userId,d=t.totals||{};return!s||Object.keys(s).length===0?e.jsx("div",{className:T.emptyPlayerList,children:e.jsx("p",{children:"Waiting for players to join..."})}):e.jsxs("div",{className:T.playersContainer,children:[e.jsx("h3",{className:T.playersTitle,children:"Scoreboard"}),e.jsx("div",{className:T.playersList,children:t.seats.filter(a=>a!==null&&s[a]).map(a=>{const l=s[a],_=a===c,i=l.userId===r;return e.jsxs("div",{className:`
                  ${_?"panel":"panel-alt"}
                  ${_?T.currentPlayerGlow:""}
                  ${i?T.currentUser:""}
                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[e.jsxs("div",{className:T.playerInfo,children:[e.jsx(Se,{userId:l.userId,size:"small",showName:!0,namePosition:"right",fontWeight:"bold"}),e.jsx("span",{className:T.playerStatus,children:l.disconnected&&e.jsx("span",{className:T.disconnectedIndicator,title:"Player disconnected",children:"âš ï¸ Disconnected"})})]}),e.jsxs("div",{className:T.playerBalanceContainer,children:[e.jsx(L,{amount:d[a]||0,size:"small"}),e.jsx("div",{className:`
                    ${T.readyIndicator} 
                    ${l.isSittingOut?T.sittingOut:l.isReady?T.ready:T.notReady}
                  `,title:l.isSittingOut?"Sitting Out":l.isReady?"Ready":"Not Ready"})]})]},a)})})]})},ms="_table_1c3a2_2",_s="_feltTexture_1c3a2_75",ps="_sitOutOverlay_1c3a2_104",ee={table:ms,feltTexture:_s,sitOutOverlay:ps},gs="_aceOverlay_1apr0_2",hs="_cardGlow_1apr0_14",xs="_countdownRing_1apr0_24",js="_countdownCircle_1apr0_34",ys="_choiceButton_1apr0_43",fs="_highButton_1apr0_74",bs="_lowButton_1apr0_85",Cs="_timerDisplay_1apr0_96",vs="_waitingMessage_1apr0_109",Ns="_aceControlsBottom_1apr0_136",Bs="_timerContainer_1apr0_150",ws="_aceButtonContainer_1apr0_158",As="_choicePrompt_1apr0_165",Ts="_bottomChoiceButton_1apr0_174",Ss="_lowButtonBottom_1apr0_200",Is="_highButtonBottom_1apr0_210",B={aceOverlay:gs,cardGlow:hs,countdownRing:xs,countdownCircle:js,choiceButton:ys,highButton:fs,lowButton:bs,timerDisplay:Cs,waitingMessage:vs,aceControlsBottom:Ns,timerContainer:Bs,aceButtonContainer:ws,choicePrompt:As,bottomChoiceButton:Ts,lowButtonBottom:Ss,highButtonBottom:Is},Ps="_waitingTimer_egezv_2",ks="_timerContent_egezv_16",Ls="_playerName_egezv_23",$s="_action_egezv_29",Es="_timerBar_egezv_35",Rs="_timerProgress_egezv_43",q={waitingTimer:Ps,timerContent:ks,playerName:Ls,action:$s,timerBar:Es,timerProgress:Rs},re=({playerName:t,action:n="deciding",duration:o=15e3})=>{const[s,c]=m.useState(o),r=m.useRef(Date.now());m.useEffect(()=>{r.current=Date.now(),c(o)},[o]),m.useEffect(()=>{const a=setInterval(()=>{const l=Date.now()-r.current,_=Math.max(0,o-l);c(_),_<=0&&clearInterval(a)},100);return()=>clearInterval(a)},[o]);const d=(o-s)/o*100;return e.jsxs("div",{className:`panel-game ${q.waitingTimer}`,children:[e.jsxs("div",{className:q.timerContent,children:[e.jsx("span",{className:q.playerName,children:e.jsx(H,{username:t})}),e.jsxs("span",{className:q.action,children:["is ",n,"..."]})]}),e.jsx("div",{className:q.timerBar,children:e.jsx("div",{className:q.timerProgress,style:{width:`${d}%`}})})]})},Os="_countdownTimer_1r3bp_3",Ms="_progressRing_1r3bp_19",Ds="_progressRingBackground_1r3bp_25",Gs="_progressRingCircle_1r3bp_31",Fs="_timeDisplay_1r3bp_40",V={countdownTimer:Os,progressRing:Ms,progressRingBackground:Ds,progressRingCircle:Gs,timeDisplay:Fs},ce=({duration:t=15,isActive:n=!0})=>{const[o,s]=m.useState(t),c=m.useRef(Date.now());m.useEffect(()=>{n&&(c.current=Date.now(),s(t))},[t,n]),m.useEffect(()=>{if(!n)return;const u=setInterval(()=>{const p=Math.floor((Date.now()-c.current)/1e3),f=Math.max(0,t-p);s(f),f<=0&&clearInterval(u)},100);return()=>clearInterval(u)},[t,n]);const r=o/t*100,d=()=>{const u=o/t*100;return u>66?"var(--color-ready)":u>33?"var(--accent)":"var(--secondary)"},a=50,l=3,_=(a-l*2)/2,i=_*2*Math.PI,h=i-r/100*i;return e.jsxs("div",{className:V.countdownTimer,children:[e.jsxs("svg",{className:V.progressRing,width:a,height:a,viewBox:`0 0 ${a} ${a}`,children:[e.jsx("circle",{className:V.progressRingBackground,cx:a/2,cy:a/2,r:_,strokeWidth:l}),e.jsx("circle",{className:V.progressRingCircle,cx:a/2,cy:a/2,r:_,strokeWidth:l,strokeDasharray:`${i} ${i}`,strokeDashoffset:h,style:{stroke:d()}})]}),e.jsxs("div",{className:V.timeDisplay,children:[o,"s"]})]})},te=({direction:t="up",color:n="currentColor",size:o=24})=>{const s=t==="down"?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:s,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},qs=({isCurrentPlayersTurn:t,bottomPosition:n=!1})=>{const{socket:o}=O(),{gameState:s}=P(),[c,r]=m.useState(null),d=l=>{c===null&&(r(l),o.emit("chooseAceValue",{isAceLow:l}))},a=s.players[s.currentPlayerId]?.name||"Current player";return n?t?e.jsxs("div",{className:`panel-game ${B.aceControlsBottom}`,children:[e.jsx("div",{className:B.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:B.aceButtonContainer,children:[e.jsx("span",{className:B.choicePrompt,children:"ACE VALUE:"}),e.jsxs("button",{type:"button",className:`${B.bottomChoiceButton} ${B.lowButtonBottom}`,onClick:()=>d(!0),disabled:c!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(te,{direction:"down",size:16}),e.jsx("span",{children:"LOW"})]}),e.jsxs("button",{type:"button",className:`${B.bottomChoiceButton} ${B.highButtonBottom}`,onClick:()=>d(!1),disabled:c!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"HIGH"}),e.jsx(te,{direction:"up",size:16})]})]})]}):e.jsx(re,{playerName:a,action:"choosing ace value",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:B.aceOverlay,children:[e.jsx("div",{className:B.cardGlow}),t&&e.jsx("svg",{className:B.countdownRing,children:e.jsx("circle",{className:B.countdownCircle,cx:"60",cy:"87",r:"80",style:{strokeDasharray:`${countdown/15*502} 502`}})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:`${B.choiceButton} ${B.highButton}`,onClick:()=>d(!1),disabled:c!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(te,{direction:"up",size:20}),e.jsx("span",{children:"HIGH"})]}),e.jsxs("button",{type:"button",className:`${B.choiceButton} ${B.lowButton}`,onClick:()=>d(!0),disabled:c!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"LOW"}),e.jsx(te,{direction:"down",size:20})]}),e.jsxs("div",{className:B.timerDisplay,children:[countdown,"s"]})]}):e.jsxs("div",{className:B.waitingMessage,children:[a," is choosing..."]})]})},Us="_anteControls_68v5e_4",zs="_anteButton_68v5e_27",Hs="_backOutButton_68v5e_27",Ws="_sitOutHalfWidth_68v5e_27",Ys="_shimmerBorder_68v5e_110",Vs="_buttonInfo_68v5e_125",Js="_buttonLabel_68v5e_132",Ks="_buttonAmount_68v5e_143",Qs="_notEnoughChipsText_68v5e_154",A={anteControls:Us,anteButton:zs,backOutButton:Hs,sitOutHalfWidth:Ws,shimmerBorder:Ys,buttonInfo:Vs,buttonLabel:Js,buttonAmount:Ks,notEnoughChipsText:Qs},Zs="_toggleLabel_b88gt_2",Xs="_toggleInput_b88gt_9",en="_toggleSlider_b88gt_15",tn="_toggleText_b88gt_64",sn="_loading_b88gt_86",J={toggleLabel:Zs,toggleInput:Xs,toggleSlider:en,toggleText:tn,loading:sn},nn=()=>{const{preferences:t,toggleAutoAnte:n,loading:o}=je(),{gameState:s,playerReady:c}=P(),{socket:r}=O(),d=async()=>{const a=!t.autoAnte,l=await n();if(a&&l&&c){let _=null;if(r&&r.auth?.userId&&s?.players){const h=Object.keys(s.players);for(const u of h)if(s.players[u].userId===r.auth.userId){_=s.players[u];break}}_?.isReady||c()}};return o?e.jsx("div",{className:J.loading,children:"Loading preferences..."}):e.jsxs("label",{className:J.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:t.autoAnte,onChange:d,className:J.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:J.toggleSlider}),e.jsx("span",{className:J.toggleText,children:"Auto-Ante"})]})},an=()=>{const{gameState:t,playerReady:n,playerUnready:o}=P(),{socket:s}=O(),{user:c}=Z(),[r,d]=m.useState(!1);if(!t)return null;const{players:a,anteAmount:l,phase:_}=t;if(_!=="waiting")return null;let i=null;if(s&&s.auth?.userId&&a){const f=Object.keys(a);for(const v of f)if(a[v].userId===s.auth.userId){i=a[v];break}}else if(c&&a){const f=Object.keys(a);for(const v of f)if(a[v].userId===c.id){i=a[v],console.log("[AnteControls] Found player by user ID instead of socket ID");break}}const h=Number(i?.balance||0),u=i?.isReady,p=h>=l;return e.jsxs("div",{className:`panel-game ${A.anteControls}`,children:[u?e.jsxs("button",{type:"button",className:A.backOutButton,onClick:()=>{r||(typeof o=="function"?(d(!0),o()):console.error("playerUnready is not a function"))},disabled:r,"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:A.shimmerBorder}),e.jsx("div",{className:A.buttonInfo,children:e.jsx("span",{className:A.buttonLabel,children:"BACK OUT"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(nn,{}),e.jsxs("button",{type:"button",className:A.anteButton,onClick:()=>{r||(d(!0),n())},disabled:!p||r,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:A.shimmerBorder}),e.jsxs("div",{className:A.buttonInfo,children:[e.jsx("span",{className:A.buttonLabel,children:"ANTE"}),e.jsx("span",{className:A.buttonAmount,children:e.jsx(L,{amount:l})})]})]}),e.jsxs("button",{type:"button",className:`${A.backOutButton} ${A.sitOutHalfWidth}`,onClick:()=>{r||s&&t&&c&&(d(!0),s.emit("sitOut",{gameId:t.id,userId:s.auth?.userId||c.id}))},disabled:i?.isSittingOut||r,title:i?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:A.shimmerBorder}),e.jsx("div",{className:A.buttonInfo,children:e.jsx("span",{className:A.buttonLabel,children:"SIT OUT"})})]})]}),!u&&!p&&e.jsx("p",{className:A.notEnoughChipsText,children:"Not enough coins"})]})},on="_bettingOverlay_1q32g_2",rn="_timerContainer_1q32g_26",cn="_betButton_1q32g_57",ln="_passButton_1q32g_84",dn="_amountButton_1q32g_96",un="_customButton_1q32g_108",mn="_amountPill_1q32g_120",_n="_potButtonWrapper_1q32g_137",pn="_customInput_1q32g_142",gn="_betInput_1q32g_152",hn="_confirmButton_1q32g_172",xn="_cancelButton_1q32g_173",I={bettingOverlay:on,timerContainer:rn,betButton:cn,passButton:ln,amountButton:dn,customButton:un,amountPill:mn,potButtonWrapper:_n,customInput:pn,betInput:gn,confirmButton:hn,cancelButton:xn},jn="_potButton_1pkys_3",yn="_glowEffect_1pkys_37",fn="_potLabel_1pkys_53",bn="_currencyPill_1pkys_63",Cn="_disabled_1pkys_102",K={potButton:jn,glowEffect:yn,potLabel:fn,currencyPill:bn,disabled:Cn},vn=({amount:t,disabled:n,onClick:o,...s})=>e.jsxs("button",{type:"button",className:`${K.potButton} ${n?K.disabled:""}`,onClick:o,disabled:n,"aria-label":`Bet the pot: ${t} chips`,"data-gamepad-focusable":"true",...s,children:[e.jsx("div",{className:K.glowEffect}),e.jsx("span",{className:K.potLabel,children:"POT"}),e.jsx("div",{className:K.currencyPill,children:e.jsx(L,{amount:t,size:"small"})})]}),Nn=({isCurrentPlayersTurn:t})=>{const{gameState:n,placeBet:o}=P(),[s,c]=m.useState(""),[r,d]=m.useState(!1),[a,l]=m.useState(!1);if(!n||!t)return e.jsx(re,{playerName:n?.players[n.currentPlayerId]?.name||"Player",action:"betting",duration:oe.BETTING_DURATION});const{pot:_,firstCard:i,secondCard:h,players:u,currentPlayerId:p,anteAmount:f=1}=n,C=u[p]?.balance||0,$=i?.value==="A"&&h?.value==="A",S=Math.floor($?C/3:C/2),w=Math.min(_,S),g=f,W=[1,5,10,20,50,100].filter(N=>N>=g&&N<=w).slice(-3),Y=N=>{a||N>=g&&N<=w&&(l(!0),o(N),d(!1))},he=()=>{a||(l(!0),o(0))},ie=()=>{const N=parseInt(s);!isNaN(N)&&N>=g&&N<=w&&(Y(N),c(""))};return e.jsxs("div",{className:`panel-game ${I.bettingOverlay}`,children:[e.jsx("div",{className:I.timerContainer,children:e.jsx(ce,{duration:30,isActive:!0})}),r?e.jsxs("div",{className:I.customInput,children:[e.jsx(pe,{title:"Enter Custom Bet",type:"number",value:s,onChange:N=>c(N.target.value),onKeyPress:N=>N.key==="Enter"&&ie(),placeholder:`${g}-${w}`,min:g,max:w,autoFocus:!0,className:I.betInput}),e.jsx("button",{type:"button",onClick:ie,className:I.confirmButton,disabled:a,"data-gamepad-focusable":"true",children:y.CHECK}),e.jsx("button",{type:"button",onClick:()=>{d(!1),c("")},className:I.cancelButton,disabled:a,"data-gamepad-focusable":"true",children:y.CROSS})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:`${I.betButton} ${I.passButton}`,onClick:he,disabled:a,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{children:"PASS"})}),W.map(N=>e.jsx("button",{type:"button",className:`${I.betButton} ${I.amountButton}`,onClick:()=>Y(N),disabled:a,"data-gamepad-focusable":"true",children:e.jsx("div",{className:I.amountPill,children:e.jsx(L,{amount:N,size:"small"})})},N)),w===_&&e.jsx("div",{className:I.potButtonWrapper,children:e.jsx(vn,{onClick:()=>Y(_),disabled:a,amount:_})}),e.jsx("button",{type:"button",className:`${I.betButton} ${I.customButton}`,onClick:()=>d(!0),disabled:a,"data-gamepad-focusable":"true",children:e.jsx("span",{children:"CUSTOM"})})]})]})},Bn="_cardsRow_12pga_1",wn="_card_12pga_1",An="_dealingPhase_12pga_74",Tn="_revealingPhase_12pga_83",Sn="_cardBack_12pga_109",In="_redCard_12pga_119",Pn="_blackCard_12pga_123",kn="_cardCorner_12pga_127",Ln="_bottomRight_12pga_136",$n="_cardValue_12pga_144",En="_cardSuit_12pga_150",Rn="_cardCenter_12pga_155",On="_aceCard_12pga_212",Mn="_aceIndicator_12pga_216",Dn="_aceHigh_12pga_236",Gn="_aceLow_12pga_242",Fn="_indicatorContent_12pga_248",b={cardsRow:Bn,card:wn,dealingPhase:An,revealingPhase:Tn,cardBack:Sn,redCard:In,blackCard:Pn,cardCorner:kn,bottomRight:Ln,cardValue:$n,cardSuit:En,cardCenter:Rn,aceCard:On,aceIndicator:Mn,aceHigh:Dn,aceLow:Gn,indicatorContent:Fn},qn=()=>{const{gameState:t}=P(),[n,o]=m.useState(le());if(m.useEffect(()=>{const u=()=>{o(le())};return window.addEventListener("cardbackchange",u),()=>window.removeEventListener("cardbackchange",u)},[]),!t)return e.jsx("div",{className:b.loading,children:"Loading game state..."});const{firstCard:s,secondCard:c,thirdCard:r,phase:d}=t,a={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},l={hearts:y.HEARTS,diamonds:y.DIAMONDS,clubs:y.CLUBS,spades:y.SPADES,[y.HEARTS]:y.HEARTS,[y.DIAMONDS]:y.DIAMONDS,[y.CLUBS]:y.CLUBS,[y.SPADES]:y.SPADES},_=u=>u===y.HEARTS||u===y.DIAMONDS||u==="hearts"||u==="diamonds",i=(u,p)=>{if(!u)return e.jsx("div",{className:b.card,children:e.jsx("div",{className:b.cardBack,style:{backgroundImage:`url(${n})`}})},`empty-${p}`);const f=_(u.suit),v=u.value==="A",C=u.isAceLow,$=p===1;return e.jsxs("div",{className:`${b.card} ${f?b.redCard:b.blackCard} ${v?b.aceCard:""}`,children:[v&&!$&&e.jsx("div",{className:`${b.aceIndicator} ${C?b.aceLow:b.aceHigh} ${f?b.redCard:b.blackCard}`,children:C?e.jsxs("span",{className:b.indicatorContent,children:["LOW ",y.ARROW_DOWN]}):e.jsxs("span",{className:b.indicatorContent,children:["HIGH ",y.ARROW_UP]})}),e.jsxs("div",{className:b.cardCorner,children:[e.jsx("div",{className:b.cardValue,children:a[u.value]}),e.jsx("div",{className:b.cardSuit,children:l[u.suit]})]}),e.jsx("div",{className:b.cardCenter,children:l[u.suit]}),e.jsxs("div",{className:`${b.cardCorner} ${b.bottomRight}`,children:[e.jsx("div",{className:b.cardValue,children:a[u.value]}),e.jsx("div",{className:b.cardSuit,children:l[u.suit]})]})]},`${u.value}-${u.suit}-${p}`)},h=()=>{const u=[null,null,null];return!s&&!c&&!r?u.map((p,f)=>i(p,f)):(s&&(u[0]={...s}),c&&(u[2]={...c}),r&&(u[1]={...r}),u.map((p,f)=>i(p,f)))};return e.jsx("div",{className:`${b.cardsRow} ${d==="dealing"?b.dealingPhase:""} ${d==="revealing"?b.revealingPhase:""}`,children:h()})},Un="_imBackOverlay_1wm7i_3",zn="_container_1wm7i_11",Hn="_sittingOutText_1wm7i_21",Wn="_imBackButton_1wm7i_30",Yn="_buttonText_1wm7i_48",Vn="_helpText_1wm7i_66",U={imBackOverlay:Un,container:zn,sittingOutText:Hn,imBackButton:Wn,buttonText:Yn,helpText:Vn},Jn=({onClick:t,disabled:n=!1})=>e.jsx("div",{className:U.imBackOverlay,children:e.jsxs("div",{className:U.container,children:[e.jsx("h3",{className:U.sittingOutText,children:"You are sitting out"}),e.jsx("button",{type:"button",className:U.imBackButton,onClick:t,disabled:n,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{className:U.buttonText,children:"I'M BACK!"})}),e.jsx("p",{className:U.helpText,children:"Click to rejoin the game"})]})}),Kn="_potDisplay_1o95d_2",Qn="_potLabel_1o95d_18",ue={potDisplay:Kn,potLabel:Qn},Zn=()=>{const{gameState:t}=P();if(!t)return null;const{pot:n=0}=t;return e.jsxs("div",{className:ue.potDisplay,children:[e.jsx("span",{className:ue.potLabel,children:"POT"}),e.jsx(L,{amount:n,size:"large"})]})},Xn="_resultsContainer_upvys_2",ea="_messageArea_upvys_11",ta="_resultBar_upvys_22",sa="_playerName_upvys_66",na="_resultText_upvys_71",aa="_winBar_upvys_78",oa="_winAmount_upvys_82",ra="_lossBar_upvys_91",ca="_lossAmount_upvys_95",ia="_penaltyBar_upvys_104",la="_penaltyText_upvys_108",da="_penaltyAmount_upvys_114",ua="_animationContainer_upvys_124",ma="_cautionTapeContainer_upvys_132",_a="_cautionTape_upvys_132",j={resultsContainer:Xn,messageArea:ea,resultBar:ta,playerName:sa,resultText:na,winBar:aa,winAmount:oa,lossBar:ra,lossAmount:ca,penaltyBar:ia,penaltyText:la,penaltyAmount:da,animationContainer:ua,cautionTapeContainer:ma,cautionTape:_a},pa="_rainContainer_fxhyg_2",ga="_fallingItem_fxhyg_10",ha="_emoji_fxhyg_18",xa="_confetti_fxhyg_26",z={rainContainer:pa,fallingItem:ga,emoji:ha,confetti:xa},se=({type:t="emoji",items:n=[],count:o=10,animationDuration:s=2.5,className:c=""})=>{const r=d=>{const a=d/o*s,l=(Math.random()-.5)*.3,_=a+l,i=Math.random()*100;switch(t){case"coin":return e.jsx("div",{className:z.fallingItem,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s}s`},children:e.jsx(Ie,{size:"large"})},d);case"confetti":const h=n.length>0?n:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"];return e.jsx("div",{className:`${z.fallingItem} ${z.confetti}`,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s*1.2}s`,backgroundColor:h[Math.floor(Math.random()*h.length)]}},d);case"emoji":default:const u=n.length>0?n:["ğŸ‰"];return e.jsx("div",{className:z.fallingItem,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s}s`},children:e.jsx("span",{className:z.emoji,children:u[Math.floor(Math.random()*u.length)]})},d)}};return e.jsx("div",{className:`${z.rainContainer} ${c}`,children:[...Array(o)].map((d,a)=>r(a))})},ja=({result:t,players:n})=>{if(!t)return null;const o=n[t.playerId]?.name||"Player",s=t.outcome;if(s==="win"){const a=t.winnings||0,l=Math.min(a/500,1),_=Math.floor(10+l*40),i=Math.floor(5+l*20);return e.jsxs("div",{className:j.resultsContainer,children:[e.jsxs("div",{className:j.animationContainer,children:[e.jsx(se,{type:"confetti",count:_,animationDuration:3,items:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"]}),e.jsx(se,{type:"coin",count:i,animationDuration:2})]}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.winBar}`,children:[e.jsx("span",{className:j.playerName,children:e.jsx(H,{username:o})}),e.jsx("span",{className:j.resultText,children:"WINS"}),t.winnings&&t.winnings>0&&e.jsx("span",{className:j.winAmount,children:e.jsx(L,{amount:t.winnings/2,size:"small"})})]})})]})}if(s==="lose"){const a=t.betAmount||0,l=Math.min(a/500,1),_=Math.floor(8+l*22),i=["ğŸ˜¢","ğŸ˜”","ğŸ˜•","ğŸ‘","ğŸ“‰","ğŸ’”","ğŸ—‘ï¸","ğŸ¤¦â€â™‚ï¸"],h=["ğŸ˜­","ğŸ˜©","ğŸ¤¦","ğŸ’¸","ğŸ“‰","ğŸ˜¤","ğŸ˜£","ğŸ—‘ï¸","ğŸ¤¡","ğŸ’©","ğŸ™ˆ"],u=["ğŸ¤¡","ğŸ’©","ğŸ˜‚","ğŸ¤£","ğŸ—‘ï¸","ğŸ’€","â˜ ï¸","ğŸª¦","âš°ï¸","ğŸ¤ª","ğŸ˜µâ€ğŸ’«","ğŸ™ƒ","ğŸ¤®"];let p;return a<50?p=i:a<200?p=h:p=u,e.jsxs("div",{className:j.resultsContainer,children:[e.jsx("div",{className:j.animationContainer,children:e.jsx(se,{type:"emoji",items:p,count:_,animationDuration:2.5})}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.lossBar}`,children:[e.jsx("span",{className:j.playerName,children:e.jsx(H,{username:o})}),e.jsx("span",{className:j.resultText,children:"LOST"}),t.betAmount&&t.betAmount>0&&e.jsx("span",{className:j.lossAmount,children:e.jsx(L,{amount:t.betAmount,size:"small"})})]})})]})}const c=(t.betAmount||0)*(t.isTripleAceTie?3:2),r=t.isTripleAceTie?15:8,d=t.isTripleAceTie?["ğŸ’€","â˜ ï¸","âš ï¸","ğŸš¨","â›”","ğŸ’¥","ğŸ”¥","ğŸ˜±","ğŸ°","ğŸ’¸"]:["âš ï¸","ğŸš¨","â›”","ğŸ”´","âŒ","ğŸ’¥","ğŸ¯","ğŸ²"];return e.jsxs("div",{className:j.resultsContainer,children:[e.jsxs("div",{className:j.cautionTapeContainer,children:[e.jsxs("div",{className:j.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]}),e.jsxs("div",{className:j.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]})]}),e.jsx("div",{className:j.animationContainer,children:e.jsx(se,{type:"emoji",items:d,count:r,animationDuration:t.isTripleAceTie?2:3})}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.penaltyBar}`,children:[e.jsx("span",{className:j.playerName,children:e.jsx(H,{username:o})}),e.jsx("span",{className:j.resultText,children:t.isTripleAceTie?"TRIPLE":""}),e.jsxs("span",{className:j.penaltyText,children:[t.isTripleAceTie?"3x":"2x"," PENALTY"]}),e.jsx("span",{className:j.penaltyAmount,children:e.jsx(L,{amount:c,size:"small"})})]})})]})},ya="_revealingOverlay_hpopv_2",fa="_revealingContent_hpopv_26",ba="_playerName_hpopv_35",Ca="_actionText_hpopv_43",va="_betAmount_hpopv_51",Q={revealingOverlay:ya,revealingContent:fa,playerName:ba,actionText:Ca,betAmount:va},Na=({playerName:t,betAmount:n})=>!t||!n?null:e.jsx("div",{className:`panel-game ${Q.revealingOverlay}`,children:e.jsxs("div",{className:Q.revealingContent,children:[e.jsx("span",{className:Q.playerName,children:e.jsx(H,{username:t})}),e.jsx("span",{className:Q.actionText,children:"bets"}),e.jsx("div",{className:Q.betAmount,children:e.jsx(L,{amount:n,size:"small"})})]})}),Ba="_secondChanceOverlay_1sq4x_2",wa="_bridge_1sq4x_13",Aa="_bridgeLine_1sq4x_20",Ta="_matchBadge_1sq4x_57",Sa="_matchText_1sq4x_69",Ia="_choiceContainer_1sq4x_78",Pa="_timer_1sq4x_87",ka="_buttons_1sq4x_106",La="_choiceButton_1sq4x_112",$a="_anteButton_1sq4x_139",Ea="_passButton_1sq4x_151",Ra="_buttonIcon_1sq4x_162",Oa="_buttonText_1sq4x_168",Ma="_buttonAmount_1sq4x_174",Da="_waitingContainer_1sq4x_180",Ga="_waitingMessage_1sq4x_187",Fa="_secondChanceBottom_1sq4x_229",qa="_timerContainer_1sq4x_243",Ua="_bottomButtonContainer_1sq4x_251",za="_choicePrompt_1sq4x_258",Ha="_bottomChoiceButton_1sq4x_267",Wa="_anteButtonBottom_1sq4x_293",Ya="_passButtonBottom_1sq4x_302",x={secondChanceOverlay:Ba,bridge:wa,bridgeLine:Aa,matchBadge:Ta,matchText:Sa,choiceContainer:Ia,timer:Pa,buttons:ka,choiceButton:La,anteButton:$a,passButton:Ea,buttonIcon:Ra,buttonText:Oa,buttonAmount:Ma,waitingContainer:Da,waitingMessage:Ga,secondChanceBottom:Fa,timerContainer:qa,bottomButtonContainer:Ua,choicePrompt:za,bottomChoiceButton:Ha,anteButtonBottom:Wa,passButtonBottom:Ya},me=({isCurrentPlayersTurn:t,bottomPosition:n=!1,indicatorOnly:o=!1})=>{const{gameState:s}=P(),{socket:c}=O(),[r,d]=m.useState(null),{anteAmount:a=1,players:l,currentPlayerId:_}=s,h=l[_]?.name||"Player",u=p=>{r===null&&c&&(d(p),c.emit("secondChance",{anteAgain:p}))};return o?null:n?t?e.jsxs("div",{className:`panel-game ${x.secondChanceBottom}`,children:[e.jsx("div",{className:x.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:x.bottomButtonContainer,children:[e.jsx("span",{className:x.choicePrompt,children:"SECOND CHANCE:"}),e.jsxs("button",{type:"button",className:`${x.bottomChoiceButton} ${x.anteButtonBottom}`,onClick:()=>u(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:x.buttonIcon,children:y.ROTATE}),e.jsx("span",{children:"ANTE AGAIN"}),e.jsx(L,{amount:a,size:"small"})]}),e.jsxs("button",{type:"button",className:`${x.bottomChoiceButton} ${x.passButtonBottom}`,onClick:()=>u(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"PASS"}),e.jsx("span",{className:x.buttonIcon,children:y.ARROW_RIGHT})]})]})]}):e.jsx(re,{playerName:h,action:"deciding on second chance",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:x.secondChanceOverlay,children:[e.jsxs("div",{className:x.bridge,children:[e.jsx("div",{className:x.bridgeLine}),e.jsx("div",{className:x.matchBadge,children:e.jsx("span",{className:x.matchText,children:"MATCH!"})})]}),t?e.jsxs("div",{className:x.choiceContainer,children:[e.jsxs("div",{className:x.timer,children:[countdown,"s"]}),e.jsxs("div",{className:x.buttons,children:[e.jsxs("button",{type:"button",className:`${x.choiceButton} ${x.anteButton}`,onClick:()=>u(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:x.buttonIcon,children:y.ROTATE}),e.jsx("span",{className:x.buttonText,children:"ANTE AGAIN"}),e.jsx("span",{className:x.buttonAmount,children:e.jsx(L,{amount:a,size:"small"})})]}),e.jsxs("button",{type:"button",className:`${x.choiceButton} ${x.passButton}`,onClick:()=>u(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{className:x.buttonText,children:"PASS"}),e.jsx("span",{className:x.buttonIcon,children:y.ARROW_RIGHT})]})]})]}):e.jsx("div",{className:x.waitingContainer,children:e.jsxs("div",{className:x.waitingMessage,children:[h," is deciding..."]})})]})},Va=()=>{const{gameState:t}=P(),{socket:n}=O(),{user:o}=Z(),[s,c]=m.useState(!1);if(!t)return null;const{phase:r,currentPlayerId:d,players:a,waitingForAceDecision:l,waitingForSecondChance:_,firstCard:i,secondCard:h,result:u}=t,p=o?.id,f=a&&p?a[p]:null,v=p===d,C=f?.isSittingOut||!1,$=()=>{s||n&&t.id&&(c(!0),n.emit("imBack",{gameId:t.id}))};return e.jsxs("div",{className:ee.table,children:[e.jsx("div",{className:ee.feltTexture}),e.jsx(Zn,{}),e.jsx(qn,{}),l&&e.jsx("div",{className:ee.aceGlowEffect}),_&&e.jsx(me,{firstCard:i,secondCard:h,isCurrentPlayersTurn:v,indicatorOnly:!0}),!C&&e.jsxs(e.Fragment,{children:[r==="betting"&&!l&&!_&&e.jsx(Nn,{isCurrentPlayersTurn:v}),l&&e.jsx(qs,{card:i,isCurrentPlayersTurn:v,bottomPosition:!0}),_&&e.jsx(me,{firstCard:i,secondCard:h,isCurrentPlayersTurn:v,bottomPosition:!0})]}),r==="revealing"&&!C&&e.jsx(Na,{playerName:a[d]?.name||"Player",betAmount:a[d]?.currentBet||0}),r==="results"&&u&&!C&&e.jsx(ja,{result:u,players:a}),r==="waiting"&&!C&&e.jsx(an,{}),C&&e.jsx("div",{className:ee.sitOutOverlay,children:e.jsx(Jn,{onClick:$,disabled:s})})]})},Ja=({onReturnToLobby:t})=>{const[n,o]=m.useState(!1),{gameState:s,error:c,clearError:r}=P(),{showAds:d}=_e();$e(!0),m.useEffect(()=>{if(c){const l=setTimeout(()=>{r()},1e4);return()=>clearTimeout(l)}},[c,r]);const a=()=>{t&&t()};return s?e.jsxs("div",{className:`screen app-gradient-bg ${G.gameContainer} ${d?G.withAds:""}`,children:[e.jsxs("div",{className:`${G.gameScreen} mobile-scale-content`,children:[e.jsx(ht,{handleLeaveGame:a,onModalStateChange:o}),c&&e.jsx("div",{className:G.errorContainer,children:e.jsx("p",{className:G.errorText,children:c})}),e.jsx(Va,{}),e.jsxs("div",{className:G.gameBottomSection,children:[e.jsx(us,{}),e.jsx(Kt,{})]})]}),!n&&e.jsx(nt,{})]}):e.jsx("div",{className:G.loadingContainer,children:e.jsx("p",{children:"Loading game state..."})})},Ka=({loading:t,error:n,isPasswordModalOpen:o,handlePasswordCancel:s,handlePasswordSubmit:c,handleReturnToLobby:r,gameId:d})=>{const{gameState:a}=P(),{socket:l}=O();return m.useEffect(()=>{const _=i=>{const h=l?.auth?.userId;if((h&&a?.players?a.players[h]:null)?.isReady||!1)return i.preventDefault(),i.returnValue="You have money in the pot! Are you sure you want to leave?",i.returnValue};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[a,l]),e.jsxs(e.Fragment,{children:[e.jsx(Ue,{isOpen:o,onClose:s,onSubmit:c,gameId:d}),t&&e.jsx(ye,{message:`Joining game ${d}...`}),n&&!t&&!o&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:n}),e.jsx("button",{type:"button",onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!t&&!n&&a&&e.jsx(Ja,{onReturnToLobby:r})]})},no=()=>{const{gameId:t}=fe(),n=be(),{socket:o,isConnected:s}=O(),[c,r]=m.useState(!0),[d,a]=m.useState(null),[l,_]=m.useState(!1),i=m.useRef(!1),{shouldShowAd:h,hideAd:u}=Pe(),p=m.useCallback(()=>{o&&s&&t&&(ae.play("ui.leave"),o.emit("leaveGame",{gameId:t}),n("/",{state:{fromGame:!0}}))},[o,s,t,n]),f=m.useCallback(C=>{_(!1),o&&t&&C&&(a(null),o.emit("joinGame",{gameId:t,password:C}),r(!0))},[o,t]),v=m.useCallback(()=>{_(!1),n("/")},[n]);return m.useEffect(()=>{a(null),_(!1),r(!0)},[t]),m.useEffect(()=>{if(!o)return;const C=S=>{S&&S.game&&S.game.id===t&&(ae.play("ui.join"),r(!1),a(null),_(!1))},$=S=>{const w=S.message||"An unknown error occurred";w==="Password required"?(console.error(S),_(!0),r(!1),a(null)):w==="Invalid password"?(console.error(S),a("Invalid password."),_(!0),r(!1)):w==="Game not found"?n("/"):w==="Game is full"?(a(w),r(!1),_(!1),setTimeout(()=>n("/"),3e3)):(a(w),r(!1),_(!1))};return o.on("gameJoined",C),o.on("error",$),()=>{o.off("gameJoined",C),o.off("error",$)}},[o,t,n]),m.useEffect(()=>{o&&t&&!i.current&&(i.current=!0,r(!0),a(null),_(!1),o.emit("joinGame",{gameId:t}))},[o,t]),e.jsxs(Ee,{gameId:t,children:[e.jsx(Ka,{loading:c,error:d,isPasswordModalOpen:l,handlePasswordCancel:v,handlePasswordSubmit:f,handleReturnToLobby:p,gameId:t}),h&&e.jsx(ke,{onClose:u}),e.jsx(Le,{}),e.jsx(de,{position:"left",minWidth:1200}),e.jsx(de,{position:"right",minWidth:1200})]})};export{no as default};
