import{j as e}from"./ui-DgYMOojV.js";import{r as a,c as s}from"./vendor-BoU4GIkp.js";import{b as t,u as l,f as n,A as r,c as i,B as o,U as c,e as d}from"./index-pHr3zac6.js";const m={coinIcon:"_coinIcon_1htv9_1",small:"_small_1htv9_15",medium:"_medium_1htv9_19",large:"_large_1htv9_23"},h=({size:s="small",className:t=""})=>{const l={small:15,medium:19,large:24},n=l[s]||l.small,r=a.useMemo((()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`),[]),i=a.useMemo((()=>`goldShine-${Math.random().toString(36).substr(2,9)}`),[]);return e.jsx("span",{className:`${m.coinIcon} ${m[s]} ${t}`,children:e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:i,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${r})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${i})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},u={userAvatarContainer:"_userAvatarContainer_1spmo_1",containerRight:"_containerRight_1spmo_6",containerBelow:"_containerBelow_1spmo_11",avatar:"_avatar_1spmo_16",small:"_small_1spmo_33",medium:"_medium_1spmo_39",large:"_large_1spmo_45",avatarImageContainer:"_avatarImageContainer_1spmo_51",avatarImage:"_avatarImage_1spmo_51",initialsPlaceholder:"_initialsPlaceholder_1spmo_69",userInfo:"_userInfo_1spmo_83",username:"_username_1spmo_89",userTitle:"_userTitle_1spmo_95",playerCard:"_playerCard_1spmo_114",cardAppear:"_cardAppear_1spmo_1",playerCardAvatar:"_playerCardAvatar_1spmo_142",playerCardImage:"_playerCardImage_1spmo_151",playerCardInitials:"_playerCardInitials_1spmo_159",playerCardInfo:"_playerCardInfo_1spmo_173",playerCardUsername:"_playerCardUsername_1spmo_182",playerCardTitle:"_playerCardTitle_1spmo_190",playerCardXP:"_playerCardXP_1spmo_198",playerCardLevelXP:"_playerCardLevelXP_1spmo_206",separator:"_separator_1spmo_214",xpValue:"_xpValue_1spmo_218",loading:"_loading_1spmo_223",shimmerBg:"_shimmerBg_1spmo_1",avatarLoader:"_avatarLoader_1spmo_229",shimmerOverlay:"_shimmerOverlay_1spmo_1",skeletonUsername:"_skeletonUsername_1spmo_238",skeletonTitle:"_skeletonTitle_1spmo_248",shimmerText:"_shimmerText_1spmo_1"},p=({userId:s,size:l="medium",showName:n=!0,namePosition:r="right",className:i="",showTitle:o=!0})=>{const[c,d]=a.useState(!1),m=t(s);if(!s)return null;if(!m){const a=u[l]||u.medium,s=n?u[`container${r.charAt(0).toUpperCase()+r.slice(1)}`]:"";return e.jsxs("div",{className:`${u.userAvatarContainer} ${s} ${i}`,children:[e.jsx("div",{className:`${u.avatar} ${a} ${u.loading}`,children:e.jsx("div",{className:u.avatarLoader})}),n&&e.jsxs("div",{className:u.userInfo,children:[e.jsx("div",{className:u.skeletonUsername}),o&&e.jsx("div",{className:u.skeletonTitle})]})]})}const{username:h,profileImg:p,title:_,xp:y,level:f}=m,j=g(h||"Unknown"),v=u[l]||u.medium,b=n?u[`container${r.charAt(0).toUpperCase()+r.slice(1)}`]:"",N="https://api.in-between.live";let w=null;if(p)if(p.startsWith("http"))w=p;else if(p.includes("/uploads/")){w=`${N}/files/images/${p.split("/").pop()}`}else w=`${N}${p}`;return e.jsxs("div",{className:`${u.userAvatarContainer} ${b} ${i}`,children:[e.jsxs("div",{className:`${u.avatar} ${v}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsxs("div",{className:u.avatarImageContainer,children:[w?e.jsx("img",{src:w,alt:`${h}'s avatar`,className:u.avatarImage,onError:e=>{console.error(`Failed to load profile image for ${h}:`,e),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:u.initialsPlaceholder,style:{display:w?"none":"flex"},children:j})]}),c&&e.jsxs("div",{className:u.playerCard,children:[e.jsx("div",{className:u.playerCardAvatar,children:w?e.jsx("img",{src:w,alt:`${h}'s avatar`,className:u.playerCardImage}):e.jsx("div",{className:u.playerCardInitials,children:j})}),e.jsxs("div",{className:u.playerCardInfo,children:[e.jsx("div",{className:u.playerCardUsername,children:h||"Unknown"}),_&&e.jsx("div",{className:u.playerCardTitle,children:_}),void 0!==f&&void 0!==y&&e.jsxs("div",{className:u.playerCardLevelXP,children:["Level ",f," ",e.jsx("span",{className:u.separator,children:"â€¢"})," ",e.jsxs("span",{className:u.xpValue,children:[x(y)," XP"]})]})]})]})]}),n&&e.jsxs("div",{className:u.userInfo,children:[e.jsx("div",{className:u.username,children:h||"Unknown"}),o&&_&&e.jsx("div",{className:u.userTitle,children:_})]})]})},g=e=>e.split(" ").map((e=>e.charAt(0))).join("").toUpperCase().substring(0,2),x=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),_={currencyAmount:"_currencyAmount_18625_1",pillBackground:"_pillBackground_18625_18",darkBackground:"_darkBackground_18625_29"},y=({amount:a,size:s,background:t,customClass:l})=>{const n=[_.currencyAmount,"dark"===t?_.darkBackground:"","pill"===t?_.pillBackground:"",l||""].filter(Boolean).join(" ");return e.jsxs("span",{className:n,children:[e.jsx(h,{size:s}),e.jsx("span",{children:a.toLocaleString()})]})},f=({className:a="h-6 w-6",...s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,...s,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),j="_toggleContainer_19p7v_1",v="_toggleInput_19p7v_8",b="_toggleLabel_19p7v_14",N="_toggleSlider_19p7v_21",w="_toggleText_19p7v_70",C=({isChecked:a,onChange:s,label:t})=>e.jsx("div",{className:j,children:e.jsxs("label",{className:b,children:[e.jsx("input",{type:"checkbox",checked:a,onChange:s,className:v,"data-gamepad-focusable":"true"}),e.jsx("span",{className:N}),t&&e.jsx("span",{className:w,children:t})]})}),k="_fileUploadContainer_1ak4l_1",S="_fileInput_1ak4l_8",$="_uploadButton_1ak4l_12",I="_changeButton_1ak4l_37",A="_previewContainer_1ak4l_53",P="_imagePreview_1ak4l_61",T="_audioPreview_1ak4l_70",L="_errorMessage_1ak4l_76",U=({onUpload:s,currentFileUrl:t,acceptedFileTypes:l,label:n,previewType:r="image"})=>{const[i,o]=a.useState(!1),[c,d]=a.useState(null),m=a.useRef(null);return e.jsxs("div",{className:k,children:[e.jsx("input",{type:"file",ref:m,onChange:async e=>{const a=e.target.files[0];if(a){console.log("[FileUpload] File selected:",{name:a.name,type:a.type,size:a.size}),d(null),o(!0);try{console.log("[FileUpload] Calling onUpload function");const e=await s(a);console.log("[FileUpload] Upload result:",e),e?console.log("[FileUpload] Upload successful"):(console.error("[FileUpload] Upload failed"),d("Failed to upload file. Please try again."))}catch(t){console.error("[FileUpload] Error uploading file:",t),d("An error occurred during upload.")}finally{o(!1)}}else console.error("[FileUpload] No file selected")},accept:l,className:S}),t&&(t?"image"===r?e.jsx("div",{className:A,children:e.jsx("img",{src:t,alt:"Preview",className:P})}):"audio"===r?e.jsx("div",{className:A,children:e.jsx("audio",{controls:!0,src:t,className:T,children:"Your browser does not support the audio element."})}):null:null),e.jsx("button",{type:"button",onClick:()=>{m.current.click()},className:`${$} ${t?I:""}`,disabled:i,"data-gamepad-focusable":"true",children:i?"Uploading...":t?`Change ${n}`:`Upload ${n}`}),c&&e.jsx("div",{className:L,children:c})]})},B=()=>{const{token:s}=l(),{preferences:t,updateSelectedTitle:o}=n(),[c,d]=a.useState([]),[m,h]=a.useState(!0),[u,p]=a.useState(null);a.useEffect((()=>{g()}),[]);const g=async()=>{try{h(!0);const e=await fetch(`${r}/me/titles`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error("Failed to load titles");const a=await e.json();d(a)}catch(e){p(e.message)}finally{h(!1)}},x=async e=>{try{await o(e)}catch(a){p("Failed to update title")}};return m?e.jsx("div",{className:i.loadingMessage,children:"Loading titles..."}):u?e.jsx("div",{className:i.errorMessage,children:u}):0===c.length?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#a0b9d6"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px"},children:[e.jsxs("div",{onClick:()=>x(""),style:{display:"inline-block",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle?"rgba(255, 255, 255, 0.08)":"rgba(100, 169, 255, 0.3)",border:t.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid #64a9ff",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"#bcdcff",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"#a0b9d6",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),c.map((a=>e.jsxs("div",{onClick:()=>x(a.title),style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle===a.title?"rgba(100, 169, 255, 0.3)":"rgba(255, 255, 255, 0.08)",border:t.selectedTitle===a.title?"2px solid #64a9ff":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"#bcdcff",fontSize:"13px"},children:a.title}),e.jsx("div",{style:{color:"#a0b9d6",fontSize:"10px",marginTop:"2px"},children:a.description})]},a.title))),0===c.length&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"#a0b9d6",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},E=({onClose:a})=>{const{preferences:s,toggleAutoAnte:t,toggleMute:l,uploadTwoSecondPotGif:r,uploadTwoSecondPotMp3:c,uploadProfileImg:d,loading:m}=n();return m?e.jsx(o,{title:"Preferences",onClose:a,style:{maxWidth:600,maxHeight:"25vh"},children:e.jsx("div",{className:i.loadingMessage,children:"Loading preferences..."})}):e.jsx(o,{title:"Preferences",onClose:a,style:{maxWidth:600,maxHeight:"80vh"},children:e.jsxs("div",{className:i.settingsContainer,children:[e.jsx("div",{className:i.sectionHeader,children:"Game Options"}),e.jsxs("div",{className:i.settingItem,children:[e.jsxs("div",{className:i.settingDescription,children:[e.jsx("h4",{children:"Mute Sound"}),e.jsx("p",{children:"Mute all game sound effects"})]}),e.jsx(C,{isChecked:s.muted,onChange:l})]}),e.jsxs("div",{className:i.settingItem,children:[e.jsxs("div",{className:i.settingDescription,children:[e.jsx("h4",{children:"Auto-Ante"}),e.jsx("p",{children:"Automatically ante up when a new round begins"})]}),e.jsx(C,{isChecked:s.autoAnte,onChange:t})]}),e.jsx("div",{className:i.sectionHeader,children:"Customization Options"}),e.jsxs("div",{className:i.settingItem,children:[e.jsxs("div",{className:i.settingDescription,children:[e.jsx("h4",{children:"Profile Image"}),e.jsx("p",{children:"Upload a profile image to personalize your account"})]}),e.jsx(U,{onUpload:d,currentFileUrl:s.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:i.settingItem,style:{flexDirection:"column",alignItems:"stretch"},children:[e.jsxs("div",{className:i.settingDescription,style:{marginRight:0,marginBottom:"12px"},children:[e.jsx("h4",{children:"Title"}),e.jsx("p",{children:"Choose a title to display with your name. Unlock more by playing games!"})]}),e.jsx(B,{})]})]})})},z={iconButton:"_iconButton_1paw6_1",default:"_default_1paw6_18",danger:"_danger_1paw6_31",preferences:"_preferences_1paw6_44",stats:"_stats_1paw6_67",success:"_success_1paw6_84",store:"_store_1paw6_97"},M=({icon:a,title:s,onClick:t,variant:l="default",compact:n=!0,className:r="",...i})=>e.jsx("button",{className:`${z.iconButton} ${z[l]} ${r}`,onClick:t,title:s,type:"button",...i,children:a}),F=({onModalStateChange:s})=>{const[t,l]=a.useState(!1);return a.useEffect((()=>{s&&s(t)}),[t,s]),e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:()=>{l(!0)},icon:e.jsx(f,{style:{color:"white",width:20,height:20}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),t&&e.jsx(E,{isOpen:t,onClose:()=>{l(!1)}})]})},D=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"}),e.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"})]}),R="_modalOverlay_zs1o4_1",H="_modalContent_zs1o4_15",O="_modalHeader_zs1o4_29",W="_headerButtons_zs1o4_39",G="_closeButton_zs1o4_77",V="_settingsContainer_zs1o4_96",q="_tabsContainer_zs1o4_101",X="_tabButton_zs1o4_108",Y="_activeTab_zs1o4_125",Z="_tabContent_zs1o4_140",J="_totalsTable_zs1o4_158",K="_settleUpTable_zs1o4_158",Q="_totalRow_zs1o4_164",ee="_paymentRow_zs1o4_164",ae="_playerName_zs1o4_173",se="_totalAmount_zs1o4_184",te="_paymentAmount_zs1o4_184",le="_positive_zs1o4_190",ne="_negative_zs1o4_194",re="_paymentText_zs1o4_198",ie="_noDataMessage_zs1o4_211",oe="_loadingMessage_zs1o4_218",ce=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 15 L12 18"}),e.jsx("path",{d:"M9.5 16.5 L12 19 L14.5 16.5"}),e.jsx("path",{d:"M8 10 L10 10"}),e.jsx("path",{d:"M12 10 L14 10"}),e.jsx("path",{d:"M16 10 L16 10"})]});let de;try{de=require("../../contexts/GameContext").useGameContext}catch(ja){de=()=>({gameState:null})}const me=({title:a="Download Transaction Log as CSV",gameState:s,...t})=>{var l;let n;try{n=de?de():{gameState:null}}catch(ja){n={gameState:null}}const r=s||(null==n?void 0:n.gameState),i=(null==r?void 0:r.gameTransactions)||(null==(l=null==r?void 0:r.gameData)?void 0:l.gameTransactions)||[],o=(null==r?void 0:r._id)||(null==r?void 0:r.id)||"unknown";return e.jsx(M,{icon:e.jsx(ce,{color:"white",size:20}),title:a,onClick:()=>{const e=Array.isArray(i)?i:[];if(0===e.length)return;let a="Player,Transaction Type,Amount,Round,Timestamp\n";const s=[...e].map((e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})));s.sort(((e,a)=>e.timestamp-a.timestamp)),s.forEach((e=>{const s=e.timestamp?new Date(e.timestamp).toLocaleString():"N/A",t=e.playerName||e.player||"Unknown Player",l=t.includes(",")?`"${t}"`:t;let n=e.transactionType||"Transaction";if(!e.transactionType&&e.reason){const a=e.reason.split(" ");n=a[0],"Won"===a[0]?n="Win":e.reason.includes("penalty")&&(n="Penalty")}a+=`${l},${n},${e.amount},${e.round||"N/A"},${s}\n`}));const t=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(t),n=document.createElement("a");n.setAttribute("href",l),n.setAttribute("download",`game-${o}-transactions.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},variant:"default",...t})},he="_noDataMessage_qnwhh_2",ue="_tabContent_qnwhh_9",pe="_statsGrid_qnwhh_15",ge="_statItem_qnwhh_24",xe="_statLabel_qnwhh_40",_e="_statValue_qnwhh_47",ye="_statSuffix_qnwhh_55",fe=({gameData:s})=>{const t=s.gameTransactions,l=s.players,n={};Object.entries(l).forEach((([e,a])=>{n[e]=a.name})),t.forEach((e=>{e.playerId&&!n[e.playerId]&&(n[e.playerId]=e.playerName||"Unknown Player")}));const r=a.useMemo((()=>{if(0===t.length)return[];const e=e=>e.toLocaleString(),a={};t.forEach((e=>{a[e.playerId]||(a[e.playerId]=[]),a[e.playerId].push(e)}));const l=s.round||1,r=s.deckCount||1,i=t.filter((e=>"Ante"===e.transactionType)).reduce(((e,a)=>e+Math.abs(a.amount)),0),o=t.filter((e=>"Bet"===e.transactionType)).reduce(((e,a)=>e+Math.abs(a.amount)),0),c=t.filter((e=>"Bet"===e.transactionType)),d=c.length>0?c.reduce(((e,a)=>Math.abs(a.amount)>Math.abs(e.amount)?a:e),c[0]):null,m=t.reduce(((e,a)=>a.potAmount>e?a.potAmount:e),0),h=t.filter((e=>"2x"===e.transactionType||"3x"===e.transactionType)),u=h.reduce(((e,a)=>e+Math.abs(a.amount)),0),p={};c.forEach((e=>{p[e.playerId]=(p[e.playerId]||0)+1}));let g=null,x=0;Object.entries(p).forEach((([e,a])=>{a>x&&(x=a,g=e)}));const _={};c.forEach((e=>{_[e.playerId]||(_[e.playerId]={total:0,count:0}),_[e.playerId].total+=Math.abs(e.amount),_[e.playerId].count+=1}));let y=null,f=0;Object.entries(_).forEach((([e,a])=>{const s=a.total/a.count;s>f&&(f=s,y=e)}));const j={};t.filter((e=>"Win"===e.transactionType)).forEach((e=>{j[e.playerId]=(j[e.playerId]||0)+1}));let v=null,b=0;Object.entries(j).forEach((([e,a])=>{a>b&&(b=a,v=e)}));const N={};h.forEach((e=>{N[e.playerId]=(N[e.playerId]||0)+1}));let w=null,C=0;Object.entries(N).forEach((([e,a])=>{a>C&&(C=a,w=e)}));const k=s.totals||{};let S=null,$=0,I=null,A=0;return Object.entries(k).forEach((([e,a])=>{a>$&&($=a,S=e),a<A&&(A=a,I=e)})),[{key:"totalDecks",label:"Total Decks",value:r,type:"number"},{key:"totalRounds",label:"Total Rounds",value:l,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:c.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:i,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:o,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:m,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:d?Math.abs(d.amount):0,type:"currency",suffix:d?` by ${d.playerName}`:""},{key:"biggestWinner",label:"Biggest Winner",value:S?n[S]||"Unknown Player":"N/A",type:"text",suffix:S?` (+${e($)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:I?n[I]||"Unknown Player":"N/A",type:"text",suffix:I?` (${e(A)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:g?n[g]||"Unknown Player":"N/A",type:"text",suffix:g?` (${e(x)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:y?n[y]||"Unknown Player":"N/A",type:"text",suffix:y?` (avg: ${e(Math.round(f))})`:""},{key:"mostWinning",label:"Most Winning Player",value:v?n[v]||"Unknown Player":"N/A",type:"text",suffix:v?` (${e(b)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:h.length,type:"number",suffix:h.length>0?` (${e(u)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:w?n[w]||"Unknown Player":"N/A",type:"text",suffix:w?` (${e(C)} penalties)`:""}]}),[t,n]);return e.jsx("div",{className:ue,children:0===r.length?e.jsx("p",{className:he,children:"No statistics available for this game."}):e.jsx("div",{className:pe,children:r.map((a=>{return e.jsxs("div",{className:ge,children:[e.jsx("div",{className:xe,children:a.label}),e.jsxs("div",{className:_e,children:[(s=a.type,t=a.value,"currency"===s?e.jsx(y,{amount:t,size:"small"}):"percentage"===s?`${(100*t).toFixed(1)}%`:"number"===s?t.toLocaleString():t),a.suffix&&e.jsx("span",{className:ye,children:a.suffix})]})]},a.key);var s,t}))})})},je=({onClose:t,gameData:l})=>{var n;if(!l){const a=e.jsx("div",{className:R,children:e.jsxs("div",{className:H,children:[e.jsxs("div",{className:O,children:[e.jsx("h2",{children:"Game Summary"}),e.jsx("button",{className:G,onClick:t,"data-gamepad-focusable":"true",children:"Ã—"})]}),e.jsx("div",{className:V,children:e.jsx("div",{className:oe,children:"Loading game data..."})})]})});return s.createPortal(a,document.body)}const r=l.gameTransactions||[],i=l.players||{},o=l.id||"unknown",c=(null==(n=l.settings)?void 0:n.isPrivate)||!1,d=Array.isArray(r)?r:[],m={};Object.entries(i).forEach((([e,a])=>{m[e]=a.name})),d.forEach((e=>{e.playerId&&!m[e.playerId]&&(m[e.playerId]=e.playerName||"Unknown Player")}));const h=l.totals||{},u=a.useMemo((()=>{if(2===Object.keys(h).length){const e=Object.entries(h),[a,s]=e[0],[t,l]=e[1];if(Math.abs(s+l)<.1){if(s>0)return[{from:t,fromName:m[t],to:a,toName:m[a],amount:Math.abs(s)}];if(l>0)return[{from:a,fromName:m[a],to:t,toName:m[t],amount:Math.abs(l)}]}}const e=[],a=Object.entries(h).filter((([e,a])=>a<0)).map((([e,a])=>({playerId:e,playerName:m[e]||"Unknown Player",amount:Math.abs(a)}))),s=Object.entries(h).filter((([e,a])=>a>0)).map((([e,a])=>({playerId:e,playerName:m[e]||"Unknown Player",amount:a})));for(a.sort(((e,a)=>a.amount-e.amount)),s.sort(((e,a)=>a.amount-e.amount));s.length>0&&a.length>0;){const t=s[0],l=a[0],n=Math.min(t.amount,l.amount);if(!(n>.01))break;e.push({from:l.playerId,fromName:l.playerName,to:t.playerId,toName:t.playerName,amount:n}),t.amount-=n,l.amount-=n,t.amount<.01&&s.shift(),l.amount<.01&&a.shift()}return e}),[h,m]),[p,g]=a.useState("totals"),x=e.jsx("div",{className:R,onClick:e=>e.target===e.currentTarget&&t(),children:e.jsxs("div",{className:H,children:[e.jsxs("div",{className:O,children:[e.jsxs("h2",{children:["Game Summary (",o,")"]}),e.jsxs("div",{className:W,children:[e.jsx(me,{gameState:l}),e.jsx("button",{className:G,onClick:t,"data-gamepad-focusable":"true",children:"Ã—"})]})]}),e.jsxs("div",{className:V,children:[e.jsxs("div",{className:q,children:[e.jsx("button",{className:`${X} ${"totals"===p?Y:""}`,onClick:()=>g("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{className:`${X} ${"stats"===p?Y:""}`,onClick:()=>g("stats"),"data-gamepad-focusable":"true",children:"Stats"}),c&&e.jsx("button",{className:`${X} ${"payouts"===p?Y:""}`,onClick:()=>g("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),"totals"===p&&e.jsx("div",{className:Z,children:0===Object.keys(h).length?e.jsx("p",{className:ie,children:"No transactions recorded yet."}):e.jsx("div",{className:J,children:Object.entries(h).map((([a,s])=>e.jsxs("div",{className:Q,children:[e.jsx("span",{className:ae,children:m[a]||"Unknown Player"}),e.jsx("span",{className:`${se} ${s>=0?le:ne}`,children:e.jsx(y,{amount:s,size:"small"})})]},a)))})}),"stats"===p&&e.jsx(fe,{gameData:l}),"payouts"===p&&c&&e.jsx("div",{className:Z,children:0===u.length?e.jsx("p",{className:ie,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:K,children:u.map(((a,s)=>e.jsxs("div",{className:ee,children:[e.jsxs("span",{className:re,children:[e.jsx("span",{className:ae,children:a.fromName})," pays"," ",e.jsx("span",{className:ae,children:a.toName})]}),e.jsx("span",{className:te,children:e.jsx(y,{amount:a.amount,size:"small"})})]},s)))})})]})]})});return s.createPortal(x,document.body)},ve="_leaderboardContainer_1gsc7_1",be="_leaderboardHeader_1gsc7_9",Ne="_durationSelector_1gsc7_15",we="_durationButton_1gsc7_23",Ce="_active_1gsc7_38",ke="_loadingMessage_1gsc7_43",Se="_errorMessage_1gsc7_43",$e="_emptyMessage_1gsc7_43",Ie="_loadingSpinner_1gsc7_55",Ae="_leaderboardList_1gsc7_73",Pe="_leaderboardRow_1gsc7_82",Te="_rankCell_1gsc7_97",Le="_rank_1gsc7_97",Ue="_playerCell_1gsc7_108",Be="_statsCell_1gsc7_113",Ee=()=>{const[s,t]=a.useState([]),[l,n]=a.useState(!0),[i,o]=a.useState(null),[d,m]=a.useState("all"),h=a.useContext(c);a.useEffect((()=>{u()}),[d]);const u=async()=>{n(!0),o(null);try{const e=await fetch(`${r}/leaderboard?duration=${d}`);if(!e.ok)throw new Error("Failed to fetch leaderboard");const a=await e.json();if(t(a.leaderboard||[]),h&&a.leaderboard){const e=a.leaderboard.map((e=>e.userId));h.prefetchUsers(e)}}catch(e){console.error("Error fetching leaderboard:",e),o(e.message)}finally{n(!1)}};return e.jsxs("div",{className:ve,children:[e.jsx("div",{className:be,children:e.jsxs("div",{className:Ne,children:[e.jsx("button",{className:`${we} ${"all"===d?Ce:""}`,onClick:()=>m("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{className:`${we} ${"30days"===d?Ce:""}`,onClick:()=>m("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),l?e.jsxs("div",{className:ke,children:[e.jsx("div",{className:Ie}),"Loading leaderboard..."]}):i?e.jsxs("div",{className:Se,children:["Error: ",i]}):0===s.length?e.jsx("div",{className:$e,children:"No players found for this time period."}):e.jsx("div",{className:Ae,"data-gamepad-scrollable":"true",tabIndex:"0",children:s.map((a=>{return e.jsxs("div",{className:Pe,children:[e.jsx("div",{className:Te,children:e.jsx("span",{className:Le,children:(s=a.rank,1===s?"ðŸ¥‡":2===s?"ðŸ¥ˆ":3===s?"ðŸ¥‰":`#${s}`)})}),e.jsx("div",{className:Ue,children:e.jsx(p,{userId:a.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:Be,children:e.jsx(y,{amount:a.totalProfit,size:"small"})})]},a.userId);var s}))})]})},ze="_statsPlaceholder_t0x7w_1",Me="_tabsContainer_t0x7w_12",Fe="_tabButton_t0x7w_19",De="_activeTab_t0x7w_36",Re="_tabContent_t0x7w_51",He="_statsGrid_t0x7w_62",Oe="_statItem_t0x7w_92",We="_statLabel_t0x7w_108",Ge="_statValue_t0x7w_115",Ve="_statSuffix_t0x7w_123",qe="_historyTable_t0x7w_137",Xe="_tableHeader_t0x7w_169",Ye="_gameNameHeader_t0x7w_180",Ze="_playerCountHeader_t0x7w_180",Je="_roundsHeader_t0x7w_180",Ke="_endDateHeader_t0x7w_180",Qe="_historyRow_t0x7w_196",ea="_gameNameCell_t0x7w_203",aa="_playerCountCell_t0x7w_211",sa="_roundsCell_t0x7w_211",ta="_endDateCell_t0x7w_219",la="_gameNameLink_t0x7w_227",na="_pageButton_t0x7w_313",ra="_pageInfo_t0x7w_339",ia="_errorMessage_t0x7w_351",oa="_loadingMessage_t0x7w_372",ca="_loadingSpinner_t0x7w_383",da=({onClose:s})=>{const{token:t}=l(),[n,c]=a.useState("leaderboard"),[d,m]=a.useState(!0),[h,u]=a.useState(null),[p,g]=a.useState({games:[],pagination:{}}),[x,_]=a.useState(0),[f,j]=a.useState(!1),[v,b]=a.useState(null),[N,w]=a.useState(null),[C,k]=a.useState(!0),[S,$]=a.useState(null);a.useEffect((()=>{(async()=>{m(!0),u(null);try{const e=await fetch(`${r}/games/history?pageSize=5&pageNumber=${x}`,{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("Failed to fetch game history");const a=await e.json();g(a)}catch(e){console.error("Error fetching game history:",e),u(e.message)}finally{m(!1)}})()}),[t,x]),a.useEffect((()=>{(async()=>{k(!0),$(null);try{const e=await fetch(`${r}/me/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("Failed to fetch lifetime stats");const a=await e.json();w(a.stats)}catch(e){console.error("Error fetching lifetime stats:",e),$(e.message)}finally{k(!1)}})()}),[t]);const I=e=>{if(!e)return"Unknown";const a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},A=e=>e.roundCount||0;return e.jsxs(e.Fragment,{children:[e.jsx(o,{title:"Player Stats",onClose:s,style:{maxWidth:800,height:"90ÃŸvh"},children:e.jsxs("div",{className:i.settingsContainer,children:[e.jsxs("div",{className:Me,children:[e.jsx("button",{className:`${Fe} ${"leaderboard"===n?De:""}`,onClick:()=>c("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{className:`${Fe} ${"stats"===n?De:""}`,onClick:()=>c("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{className:`${Fe} ${"history"===n?De:""}`,onClick:()=>c("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),"leaderboard"===n&&e.jsx("div",{className:Re,children:e.jsx(Ee,{})}),"stats"===n&&e.jsx("div",{className:Re,children:C?e.jsxs("div",{className:oa,children:[e.jsx("div",{className:ca}),"Loading your lifetime stats..."]}):S?e.jsxs("div",{className:ia,children:["Error: ",S]}):N&&0!==N.length?e.jsx("div",{className:He,"data-gamepad-scrollable":"true",tabIndex:"0",children:N.map(((a,s)=>{return e.jsxs("div",{className:Oe,children:[e.jsx("div",{className:We,children:a.label}),e.jsxs("div",{className:Ge,children:[(t=a.type,l=a.value,"number"==typeof l?"currency"===t?e.jsx(y,{amount:l.toFixed(2),size:"small"}):"percentage"===t?`${(100*l).toFixed(1)}%`:l.toLocaleString():"boolean"==typeof l?l?"Yes":"No":"date"===t||l instanceof Date?I(l):"number"===t?Number(l).toLocaleString():String(l)),a.suffix&&e.jsx("span",{className:Ve,children:a.suffix})]})]},a.key||`stat-${s}`);var t,l}))}):e.jsx("div",{className:ze,children:e.jsx("p",{children:"No lifetime statistics available."})})}),"history"===n&&e.jsx("div",{className:Re,children:d?e.jsxs("div",{className:oa,children:[e.jsx("div",{className:ca}),"Loading your game history..."]}):h?e.jsxs("div",{className:ia,children:["Error: ",h]}):0===p.games.length?e.jsx("div",{className:ze,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:qe,"data-gamepad-scrollable":"true",tabIndex:"0",children:[e.jsxs("div",{className:Xe,children:[e.jsx("div",{className:Ye,children:"Game"}),e.jsx("div",{className:Ze,children:"Players"}),e.jsx("div",{className:Je,children:"Rounds"}),e.jsx("div",{className:Ke,children:"Ended"})]}),p.games.map((a=>e.jsxs("div",{className:Qe,children:[e.jsx("div",{className:ea,children:e.jsxs("span",{className:la,onClick:()=>(e=>{const a=p.games.find((a=>a.id===e));a&&(b(a),j(!0))})(a.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",a.id]})}),e.jsx("div",{className:aa,children:a.totalPlayerCount}),e.jsx("div",{className:sa,children:A(a)}),e.jsx("div",{className:ta,children:I(a.endedAt)})]},a.id)))]}),e.jsxs("div",{className:ra,children:[e.jsx("button",{onClick:()=>{x>0&&_(x-1)},disabled:0===x,className:na,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"â†"}),"Page ",x+1,p.pagination&&p.pagination.total?` of ${Math.ceil(p.pagination.total/5)}`:"",e.jsx("button",{onClick:()=>{p.pagination&&5===p.games.length&&_(x+1)},disabled:!p.pagination||p.games.length<5,className:na,"aria-label":"Next page","data-gamepad-focusable":"true",children:"â†’"})]})]})})]})}),f&&v&&e.jsx(je,{gameData:v,onClose:()=>{j(!1),b(null)}})]})},ma=({onModalStateChange:s,...t})=>{const[l,n]=a.useState(!1);return a.useEffect((()=>{s&&s(l)}),[l,s]),e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:()=>{n(!0)},icon:e.jsx(D,{color:"white",size:20}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...t}),l&&e.jsx(da,{isOpen:l,onClose:()=>{n(!1)}})]})},ha=({className:a="h-6 w-6",...s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:a,...s,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z"})}),ua=({onClick:a,...s})=>e.jsx(M,{onClick:a,icon:e.jsx(ha,{style:{color:"white",width:20,height:20}}),"aria-label":"Store",variant:"store",title:"Store",...s}),pa=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"})]}),ga=({onClose:a})=>e.jsx(o,{title:"Game Rules",onClose:a,style:{maxWidth:600},children:e.jsxs("div",{className:`${i.content} ${i.scrollableContent}`,style:{maxHeight:"60vh",padding:"0"},"data-gamepad-scrollable":"true",tabIndex:"0",children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:i.sectionHeader,children:"Objective"}),e.jsx("div",{className:i.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:i.sectionHeader,children:"Card Values"}),e.jsx("div",{className:i.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:i.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:i.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"The player to the right of the dealer goes first."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:i.sectionHeader,children:"Betting"}),e.jsxs("div",{className:i.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:i.sectionHeader,children:"POT Button"}),e.jsx("div",{className:i.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:i.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:i.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]})}),xa=({title:s="View Game Rules",onModalStateChange:t,...l})=>{const[n,r]=a.useState(!1);return a.useEffect((()=>{t&&t(n)}),[n,t]),e.jsxs(e.Fragment,{children:[e.jsx(M,{icon:e.jsx(pa,{color:"white",size:20}),title:s,onClick:()=>{r(!0)},variant:"default",...l}),n&&e.jsx(ga,{onClose:()=>{r(!1)}})]})},_a=({type:s="text",title:t="",...l})=>{const n=a.useRef(null),{enhanceInput:r}=d();return a.useEffect((()=>{if(n.current){return r(n.current,s,t)}}),[r,s,t]),e.jsx("input",{ref:n,type:s,"data-gamepad-focusable":"true",...l})};const ya=new class{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`}getAuthHeaders(){const e=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}}async getOfferingsByType(e){try{const a=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(e)}`,s=await fetch(a,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!s.ok){const e=await s.json().catch((()=>({})));throw new Error(e.error||`HTTP ${s.status}: Failed to fetch offerings`)}return(await s.json()).offerings||[]}catch(ja){throw console.error("[PURCHASE_SERVICE] Error fetching offerings:",ja),new Error(`Failed to fetch product offerings: ${ja.message}`)}}async getAllOfferings(){try{const e=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!e.ok){const a=await e.json().catch((()=>({})));throw new Error(a.error||`HTTP ${e.status}: Failed to fetch offerings`)}return(await e.json()).offerings||[]}catch(ja){throw console.error("[PURCHASE_SERVICE] Error fetching all offerings:",ja),new Error(`Failed to fetch product offerings: ${ja.message}`)}}async processPurchase(e){try{if(!e)throw new Error("Product ID is required");const a=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(),credentials:"include",body:JSON.stringify({productId:e})});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||`HTTP ${a.status}: Purchase failed`)}const s=await a.json();return console.log("[PURCHASE_SERVICE] Purchase completed:",{productId:e,coinsAdded:s.coinsAdded,newBalance:s.newBalance}),s}catch(ja){throw console.error("[PURCHASE_SERVICE] Error processing purchase:",ja),new Error(`Purchase failed: ${ja.message}`)}}async getCoinOfferings(){return this.getOfferingsByType("coin")}},fa=({onClose:s})=>{const[t,l]=a.useState("coins"),[n,r]=a.useState([]),[c,d]=a.useState(!0),[m,h]=a.useState(null),[u,p]=a.useState(null);a.useEffect((()=>{g()}),[]);const g=async()=>{try{d(!0),p(null);const e=await ya.getCoinOfferings();r(e)}catch(e){console.error("Failed to load coin offerings:",e),p("Failed to load products. Please try again.")}finally{d(!1)}};return c?e.jsx(o,{title:"Store",onClose:s,style:{maxWidth:800,maxHeight:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(o,{title:"Store",onClose:s,style:{maxWidth:800,maxHeight:"80vh"},children:[e.jsx("div",{className:Me,children:e.jsx("button",{className:`${Fe} ${"coins"===t?De:""}`,onClick:()=>l("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"})}),u&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:u}),"coins"===t&&e.jsxs("div",{children:[e.jsx("div",{className:i.sectionHeader,children:"Available Coin Packs"}),0===n.length?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:n.map((a=>{return e.jsxs("div",{className:i.settingItem,style:{flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center",padding:"1.5rem",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",minHeight:"280px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80px",marginBottom:"1rem"},children:a.imageUrl&&e.jsx("img",{src:a.imageUrl,alt:a.name,style:{width:"64px",height:"64px",objectFit:"contain"},onError:e=>{e.target.style.display="none"}})}),e.jsxs("div",{style:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",marginBottom:"1rem"},children:[e.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#FFD700",margin:"0 0 0.5rem 0",textAlign:"center"},children:[(l=a.coinAmount,new Intl.NumberFormat("en-US").format(l))," Coins"]}),e.jsx("p",{style:{color:"#a0b9d6",fontSize:"0.875rem",margin:"0 0 0.75rem 0",textAlign:"center",lineHeight:"1.4"},children:a.description}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#bcdcff",textAlign:"center"},children:(t=a.priceUSD,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t))})]}),e.jsx("button",{onClick:()=>(async e=>{try{h(e),p(null);const a=await ya.processPurchase(e);console.log("Purchase successful:",a),s()}catch(a){console.error("Purchase failed:",a),p(a.message||"Purchase failed. Please try again.")}finally{h(null)}})(a.id),disabled:m===a.id,className:i.primaryButton,style:{width:"100%",opacity:m===a.id?.6:1,cursor:m===a.id?"not-allowed":"pointer"},"data-gamepad-focusable":"true",children:m===a.id?e.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{className:ca,style:{marginRight:"0.5rem"}}),"Processing..."]}):"Purchase"})]},a.id);var t,l}))})]})]})};export{y as C,_a as G,M as I,ma as P,xa as R,ua as S,C as T,p as U,F as a,fa as b,je as c};
//# sourceMappingURL=StoreModal-DXJo4HnO.js.map
