const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AuthPage-DvSWxMML.js","./vendor-ByZL_ylL.js","./useGamepadNavigation-DCsD-Nlu.js","./AppHeader-DDYGVuDk.js","./AppHeader-Dw3y85lw.css","./audio-Do0jXn0P.js","./socket-CA1CrNgP.js","./AuthPage-DiDOAi1u.css","./Lobby-DTeV6ACQ.js","./GamepadInput-BWAkNxdb.js","./GamepadInput-CVsK06U_.css","./Lobby-DJOYs0hE.css","./GameRoom-Dd8uCHhm.js","./GameRoom-DTN8b981.css","./web-cZK17pf2.js"])))=>i.map(i=>d[i]);
import{r as xe,a as we,g as ke,b as i,d as Ae,N as ie,e as _e,R as Ee,f as de}from"./vendor-ByZL_ylL.js";import{r as Pe}from"./audio-Do0jXn0P.js";import{l as Ce}from"./socket-CA1CrNgP.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var q={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y;function Se(){if(Y)return U;Y=1;var r=xe(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(f,d,m){var w,h={},c=null,y=null;m!==void 0&&(c=""+m),d.key!==void 0&&(c=""+d.key),d.ref!==void 0&&(y=d.ref);for(w in d)s.call(d,w)&&!a.hasOwnProperty(w)&&(h[w]=d[w]);if(f&&f.defaultProps)for(w in d=f.defaultProps,d)h[w]===void 0&&(h[w]=d[w]);return{$$typeof:e,type:f,key:c,ref:y,props:h,_owner:n.current}}return U.Fragment=t,U.jsx=u,U.jsxs=u,U}var Z;function Le(){return Z||(Z=1,q.exports=Se()),q.exports}var p=Le(),B={},X;function je(){if(X)return B;X=1;var r=we();return B.createRoot=r.createRoot,B.hydrateRoot=r.hydrateRoot,B}var Fe=je();const Te=ke(Fe);var Ie=Pe();class Re{constructor(){this.sounds={},this.muted=!1,this.initialized=!1,this.categories=["ui"],this.lastPlayedTime={},this.debounceTime=500,this.audioUnlocked=!1,this.API_URL="https://api.in-between.live",typeof window<"u"&&setTimeout(()=>{this.initialize(),this._setupMobileAudioUnlock()},0)}initialize(){this.initialized||(this.loadCategory("ui"),this.initialized=!0)}loadCategory(e){if(this.sounds[e])return;const t={};e==="ui"&&(t.join=[0,500],t.leave=[500,1e3],t.alert=[1500,1500]),this.sounds[e]=new Ie.Howl({src:[`${this.API_URL}/assets/audio/${e}-sounds.mp3`,`${this.API_URL}/assets/audio/${e}-sounds.webm`],sprite:t,preload:!0,html5:this._isMobileDevice(),format:["mp3","webm"],pool:10})}play(e,t=1){if(this.muted)return;this.initialized||this.initialize();let s,n;if(e.includes(".")?[s,n]=e.split("."):(s="ui",n=e),!this.sounds[s]){this.loadCategory(s);return}const a=`${s}.${n}`,u=Date.now(),f=this.lastPlayedTime[a]||0;if(!(u-f<this.debounceTime))return this.lastPlayedTime[a]=u,this.sounds[s].volume(t),this.sounds[s].play(n)}setMuted(e){this.muted=e,Object.values(this.sounds).forEach(t=>{t&&t.mute&&t.mute(e)})}syncWithPreferences(e){e&&typeof e.muted<"u"&&this.setMuted(e.muted)}_setupMobileAudioUnlock(){if(typeof window>"u"||!this._isMobileDevice())return;const e=()=>{if(this.audioUnlocked)return;const t=new Audio;t.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////",t.load(),t.play().then(()=>{this.audioUnlocked=!0,document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("click",e)}).catch(s=>{})};document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)}_isMobileDevice(){return typeof navigator>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}}const V=new Re,$e="modulepreload",Ue=function(r,e){return new URL(r,e).href},ee={},K=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let m=function(w){return Promise.all(w.map(h=>Promise.resolve(h).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};const u=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),d=f?.nonce||f?.getAttribute("nonce");n=m(t.map(w=>{if(w=Ue(w,s),w in ee)return;ee[w]=!0;const h=w.endsWith(".css"),c=h?'[rel="stylesheet"]':"";if(s)for(let A=u.length-1;A>=0;A--){const l=u[A];if(l.href===w&&(!h||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${c}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":$e,h||(y.as="script"),y.crossOrigin="",y.href=w,d&&y.setAttribute("nonce",d),document.head.appendChild(y),h)return new Promise((A,l)=>{y.addEventListener("load",A),y.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${w}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return n.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},Oe="_loadingScreen_16l5s_1",De="_loadingContainer_16l5s_10",Be="_spinner_16l5s_21",Me="_message_16l5s_31",M={loadingScreen:Oe,loadingContainer:De,spinner:Be,message:Me},N=({message:r="Loading..."})=>p.jsx("div",{className:M.loadingScreen,children:p.jsxs("div",{className:M.loadingContainer,children:[p.jsx("div",{className:M.spinner}),p.jsx("p",{className:M.message,children:r})]})}),le="https://api.in-between.live",Ne="https://api.in-between.live",ue=i.createContext(),z=()=>i.useContext(ue),Ke=({children:r})=>{const{token:e}=W(),[t,s]=i.useState(null),[n,a]=i.useState(!1),[u,f]=i.useState(null);i.useEffect(()=>{if(typeof window>"u")return;if(!e){t&&(t.disconnect(),s(null),a(!1),f(null));return}const m=Ce(Ne,{auth:{token:e},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,transports:["websocket","polling"],timeout:1e4});s(m),m.on("connect",()=>{f(null)}),m.on("authenticated",h=>{m.auth={userId:h.userId,username:h.username},a(!0),m.emit("getGameList")}),m.on("connect_error",h=>{f("Failed to connect to game server: "+h.message),a(!1)}),m.on("disconnect",()=>{a(!1)}),m.on("error",h=>{f(h.message||"Unknown socket error")});const w=["connect","authenticated","disconnect","connect_error","error","transport"];return()=>{m&&(w.forEach(h=>m.off(h)),m.disconnect(),s(null),a(!1),f(null))}},[e]);const d={socket:t,isConnected:n,error:u,setError:f};return p.jsx(ue.Provider,{value:d,children:r})},fe=i.createContext(null),ze=({children:r})=>{const[e,t]=i.useState(null),[s,n]=i.useState(null),[a,u]=i.useState(!0),[f,d]=i.useState(!1),w=z()?.socket;i.useEffect(()=>{if(w&&e)return w.on("balanceUpdated",l=>{if(console.log("[AuthContext] Received balanceUpdated event:",l),l&&typeof l.balance=="number"){console.log(`[AuthContext] Updating user balance from ${e?.balance} to ${l.balance}`);const b={...e,balance:l.balance};t(b)}else console.warn("[AuthContext] Received invalid balance data:",l)}),()=>{w.off("balanceUpdated")}},[w,e]);const h=async l=>{try{if(!l)return null;const b=await fetch(`${le}/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!b.ok)throw new Error("Failed to fetch user data");return(await b.json()).user}catch(b){return console.error("[Auth] Error fetching user data:",b),null}};i.useEffect(()=>{(async()=>{let b=null;try{b=localStorage.getItem("token"),b&&n(b)}catch(o){console.error("[Auth] Error reading token from localStorage:",o),localStorage.removeItem("token")}if(b)try{const o=await h(b);o?t(o):(console.error("[Auth] Token valid but failed to fetch user data. Logging out."),t(null),n(null),localStorage.removeItem("token"))}catch(o){console.error("[Auth] Error during user data fetch. Logging out.",o),t(null),n(null),localStorage.removeItem("token")}finally{u(!1)}else t(null),n(null),u(!1)})()},[]);const c=async(l,b)=>{if(!l||!l.username||!l.id||typeof l.balance!="number")throw console.error("[Auth] Invalid user data:",l),new Error("Invalid user data provided");if(!b)throw console.error("[Auth] No token provided"),new Error("No authentication token provided");try{const o={username:l.username,id:l.id,balance:l.balance};t(o),n(b),localStorage.setItem("token",b),d(!0);const v=await h(b);v&&t(v)}catch(o){throw console.error("[Auth] Error during login:",o),o}},y=i.useCallback(()=>{t(null),n(null),d(!1),localStorage.removeItem("token")},[]),A=i.useCallback(async()=>{try{const l=await h(s);l?t(l):(console.error("[Auth] Failed to refresh user data. Logging out."),y())}catch(l){console.error("[Auth] Error during manual refresh. Logging out.",l),y()}},[s,y]);return a?null:p.jsx(fe.Provider,{value:{user:e,token:s,login:c,logout:y,refreshUserData:A,loading:a},children:r})},W=()=>{const r=i.useContext(fe);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},be=i.createContext(),Xt=()=>i.useContext(be),We=({children:r})=>{const{socket:e,isConnected:t}=z(),[s,n]=i.useState([]),[a,u]=i.useState(!0),[f,d]=i.useState(null);i.useEffect(()=>{if(!e||!t)return;const w=c=>{n(c),u(!1)},h=c=>{console.error("[LobbyContext] Socket error:",c.message||c),d(c.message||"An error occurred"),u(!1)};return e.on("gameList",w),e.on("error",h),e.emit("getGameList"),()=>{e.off("gameList",w),e.off("error",h)}},[e,t]);const m={gameList:s,loading:a,error:f};return p.jsx(be.Provider,{value:m,children:r})},qe=i.lazy(()=>K(()=>import("./AuthPage-DvSWxMML.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),Ge=i.lazy(()=>K(()=>import("./Lobby-DTeV6ACQ.js"),__vite__mapDeps([8,1,2,3,4,9,10,5,6,11]),import.meta.url)),He=i.lazy(()=>K(()=>import("./GameRoom-Dd8uCHhm.js"),__vite__mapDeps([12,1,9,10,2,5,6,13]),import.meta.url)),te=({children:r})=>{const{user:e,loading:t}=W();return t?p.jsx(N,{message:"Checking authentication..."}):e?r:p.jsx(ie,{to:"/auth",replace:!0})},Ve=Ae([{path:"/",element:p.jsx(te,{children:p.jsx(We,{children:p.jsx(i.Suspense,{fallback:p.jsx(N,{message:"Loading..."}),children:p.jsx(Ge,{})})})})},{path:"/auth",element:p.jsx(i.Suspense,{fallback:p.jsx(N,{message:"Loading..."}),children:p.jsx(qe,{})})},{path:"/:gameId",element:p.jsx(te,{children:p.jsx(i.Suspense,{fallback:p.jsx(N,{message:"Loading..."}),children:p.jsx(He,{})})})},{path:"*",element:p.jsx(ie,{to:"/",replace:!0})}]),Je=()=>{const[r,e]=i.useState(!1),[t,s]=i.useState(null),[n,a]=i.useState("text"),[u,f]=i.useState(""),[d,m]=i.useState(!1);i.useEffect(()=>{const l=()=>{const o=document.body.classList.contains("gamepad-navigation-active");m(o)};l();const b=new MutationObserver(l);return b.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>b.disconnect()},[]);const w=i.useCallback((l,b="text",o="")=>{l&&(s(l),a(b),f(o),e(!0),l.blur())},[]),h=i.useCallback(()=>{e(!1),s(null),a("text"),f("")},[]),c=i.useCallback(l=>{if(!t)return;Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(t,l||"");const o=new Event("input",{bubbles:!0});t.dispatchEvent(o);const v=new Event("change",{bubbles:!0});t.dispatchEvent(v),h()},[t,h]),y=i.useCallback((l,b="text",o="")=>{if(!l)return;let v=l;l.querySelector&&l.querySelector("input")&&(v=l.querySelector("input"));const E=j=>{d&&document.body.classList.contains("gamepad-navigation-active")&&(j.preventDefault(),w(v,b,o))};return v.addEventListener("click",E),()=>{v.removeEventListener("click",E)}},[d,w]),A=i.useCallback(()=>t?.value||"",[t]);return{isVisible:r,inputType:n,keyboardTitle:u,currentInput:t,isGamepadActive:d,showKeyboard:w,hideKeyboard:h,handleEnter:c,enhanceInput:y,getCurrentInputValue:A}},Qe="_overlay_1162b_1",Ye="_modal_1162b_17",Ze="_header_1162b_38",Xe="_closeButton_1162b_55",et="_sectionHeader_1162b_74",tt="_settingDescription_1162b_90",rt="_errorMessage_1162b_112",nt="_content_1162b_122",at="_footer_1162b_150",R={overlay:Qe,modal:Ye,header:Ze,closeButton:Xe,sectionHeader:et,settingDescription:tt,errorMessage:rt,content:nt,footer:at};let re=0;function st({title:r,onClose:e,children:t,footer:s,headerButtons:n,className:a="",overlayStyle:u,...f}){i.useEffect(()=>(++re===1&&document.body.classList.add("modal-open"),()=>{--re===0&&document.body.classList.remove("modal-open")}),[]);const d=p.jsx("div",{className:R.overlay,style:u,onClick:e,children:p.jsxs("div",{className:`${R.modal} ${a}`,onClick:m=>m.stopPropagation(),...f,children:[r&&p.jsxs("div",{className:R.header,children:[p.jsx("h2",{children:r}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n,p.jsx("button",{className:R.closeButton,onClick:e,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"Ã—"})]})]}),p.jsx("div",{className:R.content,children:t}),s&&p.jsx("div",{className:R.footer,children:s})]})});return _e.createPortal(d,document.body)}const ot="_keyboardModal_nsw4g_2",ct="_inputDisplay_nsw4g_7",it="_tempInput_nsw4g_12",dt="_keyboardGrid_nsw4g_37",lt="_keyRow_nsw4g_41",ut="_key_nsw4g_2",ft="_specialKey_nsw4g_87",bt="_spaceKey_nsw4g_98",gt="_activeShift_nsw4g_103",T={keyboardModal:ot,inputDisplay:ct,tempInput:it,keyboardGrid:dt,keyRow:lt,key:ut,specialKey:ft,spaceKey:bt,activeShift:gt},ht=({isVisible:r,onClose:e,onEnter:t,inputType:s="text",initialValue:n=""})=>{const{keyboardTitle:a}=pt(),[u,f]=i.useState("lowercase"),[d,m]=i.useState("");i.useEffect(()=>{m(r?s==="number"?n&&n!=="0"?n:"":n||"":"")},[r,n,s]);const c={lowercase:[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["space","enter"]],uppercase:[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["space","enter"]],numbers:[["1","2","3"],["4","5","6"],["7","8","9"],["0","backspace"],["enter"]]}[s==="number"?"numbers":u],y=i.useCallback(b=>{switch(b){case"shift":f(o=>o==="lowercase"?"uppercase":"lowercase");break;case"backspace":m(o=>o.slice(0,-1));break;case"enter":t?.(d);break;case"space":m(o=>o+" ");break;default:m(o=>o+b);break}},[t,d]),A=b=>{switch(b){case"shift":return"â‡§";case"backspace":return"âŒ«";case"space":return"Space";case"enter":return"â†µ";default:return b}},l=b=>{let o=T.key;return["shift","backspace","space","enter"].includes(b)&&(o+=` ${T.specialKey}`),b==="space"&&(o+=` ${T.spaceKey}`),b==="shift"&&u==="uppercase"&&(o+=` ${T.activeShift}`),o};return i.useEffect(()=>{if(r){const b=o=>{o.key==="Escape"&&(o.preventDefault(),e?.())};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}}},[r,e]),r?p.jsxs(st,{title:a||(s==="number"?"Number Pad":"Virtual Keyboard"),onClose:e,className:T.keyboardModal,overlayStyle:{zIndex:1300},children:[p.jsx("div",{className:T.inputDisplay,children:p.jsx("input",{type:s==="password"?"password":"text",value:d,className:T.tempInput,readOnly:!0,placeholder:"Type below..."})}),p.jsx("div",{className:T.keyboardGrid,children:c.map((b,o)=>p.jsx("div",{className:T.keyRow,children:b.map((v,E)=>p.jsx("button",{className:l(v),onClick:()=>y(v),"data-gamepad-focusable":"true","aria-label":v==="backspace"?"Backspace":v==="enter"?"Enter":v==="space"?"Space":v==="shift"?"Shift":v,children:A(v)},`${o}-${E}`))},o))})]}):null},ge=i.createContext(),pt=()=>{const r=i.useContext(ge);if(!r)throw new Error("useVirtualKeyboardContext must be used within a VirtualKeyboardProvider");return r},mt=({children:r})=>{const e=Je(),{isVisible:t,inputType:s,hideKeyboard:n,handleEnter:a,getCurrentInputValue:u}=e;return p.jsxs(ge.Provider,{value:e,children:[r,t&&p.jsx(ht,{isVisible:t,inputType:s,initialValue:u(),onClose:n,onEnter:a})]})},yt="_toast_1g2ii_1",vt="_slideOut_1g2ii_32",xt="_iconWrapper_1g2ii_47",wt="_icon_1g2ii_47",kt="_emojiIcon_1g2ii_62",At="_content_1g2ii_76",_t="_title_1g2ii_83",Et="_message_1g2ii_90",Pt="_emojiMessage_1g2ii_98",Ct="_playerName_1g2ii_105",St="_reactionText_1g2ii_111",Lt="_emojiReaction_1g2ii_117",jt="_closeButton_1g2ii_135",L={toast:yt,slideOut:vt,iconWrapper:xt,icon:wt,emojiIcon:kt,content:At,title:_t,message:Et,emojiMessage:Pt,playerName:Ct,reactionText:St,emojiReaction:Lt,closeButton:jt},Ft=({title:r,message:e,emoji:t="â„¹",color:s="#3498db",duration:n=4e3,onClose:a,position:u})=>{const[f,d]=i.useState(!0);i.useEffect(()=>{if(n>0){const w=setTimeout(()=>{d(!1),setTimeout(a,300)},n);return()=>clearTimeout(w)}},[n,a]);const m=!r&&t!=="â„¹";return p.jsxs("div",{className:`${L.toast} ${m&&f?L.emojiReaction:""} ${f?"":L.slideOut}`,style:{top:"max(20px, var(--safe-area-inset-top))",zIndex:1e4+u,borderColor:s},children:[p.jsx("div",{className:L.iconWrapper,children:p.jsx("span",{className:`${L.icon} ${m?L.emojiIcon:""}`,style:{color:s,textShadow:m?`0 0 20px ${s}, 0 0 40px ${s}60`:`0 0 8px ${s}80`},children:t})}),p.jsxs("div",{className:L.content,children:[r&&p.jsx("div",{className:L.title,children:r}),p.jsx("div",{className:`${L.message} ${m?L.emojiMessage:""}`,children:m?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:L.playerName,children:e}),p.jsx("span",{className:L.reactionText,children:"reacted!"})]}):e})]}),p.jsx("button",{className:L.closeButton,onClick:a,"aria-label":"Close notification",children:"Ã—"})]})},Tt=i.createContext(),It=({children:r})=>{const[e,t]=i.useState([]),[s,n]=i.useState([]),[a,u]=i.useState(0),{socket:f}=z(),d=i.useCallback((o,v,E="â„¹",j="#3498db",g=4e3)=>{const k=Date.now()+Math.random(),P={id:k,title:o,message:v,emoji:E,color:j,duration:g},x=Date.now();return x-a>=600?(t(C=>[...C,P]),u(x)):n(C=>[...C,P]),k},[a]),m=i.useCallback(o=>{t(v=>v.filter(E=>E.id!==o))},[]),w=i.useCallback((o,v,E)=>d(o,v,"âœ“","#27ae60",E),[d]),h=i.useCallback((o,v,E)=>d(o,v,"âœ•","#e74c3c",E),[d]),c=i.useCallback((o,v,E)=>d(o,v,"âš ","#f39c12",E),[d]),y=i.useCallback((o,v,E)=>d(o,v,"â„¹","#3498db",E),[d]),A=i.useCallback((o,v,E)=>d(o,v,"ðŸŽ®","#9b59b6",E),[d]),l=i.useCallback((o,v,E)=>d(o,v,"ðŸ’°","#16a085",E),[d]);i.useEffect(()=>{if(s.length===0)return;const o=setTimeout(()=>{const v=s[0];n(E=>E.slice(1)),t(E=>[...E,v]),u(Date.now())},600);return()=>clearTimeout(o)},[s,e]),i.useEffect(()=>{if(!f)return;const o=v=>{d(v.title||"",v.message,v.emoji||"â„¹",v.color||"#3498db",v.duration)};return f.on("toast",o),()=>{f.off("toast",o)}},[f,d]);const b={addToast:d,removeToast:m,showSuccess:w,showError:h,showWarning:c,showInfo:y,showGameEvent:A,showMoneyEvent:l,toasts:e};return p.jsxs(Tt.Provider,{value:b,children:[r,p.jsx("div",{className:"toast-container",style:{position:"fixed",top:0,right:0,zIndex:1e4},children:e.map((o,v)=>p.jsx(Ft,{title:o.title,message:o.message,emoji:o.emoji,color:o.color,duration:o.duration,position:v,onClose:()=>m(o.id)},o.id))})]})};function Rt(){return i.useEffect(()=>{V.initialize()},[]),p.jsx(It,{children:p.jsx(mt,{children:p.jsx(Ee,{router:Ve})})})}const ne={default:{"--bg-primary":"#1a2a3a","--bg-secondary":"#2c3e50","--bg-card":"#152534","--bg-card-dark":"#1c2a3a","--bg-panel-start":"#1e2a38","--bg-panel-end":"#2980b9","--bg-loading":"#1a1a2e","--text-primary":"#ecf0f1","--text-secondary":"#bdc3c7","--text-dark":"#2c3e50","--text-light":"#ecf0f1","--text-muted":"#7f8c8d","--text-white":"#ffffff","--text-gray":"#666666","--text-error":"#e74c3c","--text-success":"#2ecc71","--text-warning":"#f1c40f","--text-info":"#3498db","--text-faded":"rgba(255, 255, 255, 0.6)","--text-subtle":"rgba(255, 255, 255, 0.7)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#3498db","--info-dark":"#2980b9","--info-light":"#5dade2","--success":"#2ecc71","--success-dark":"#27ae60","--success-light":"#58d68d","--btn-primary-start":"#3498db","--btn-primary-end":"#27ae60","--btn-primary-hover-start":"#3fa9e5","--btn-primary-hover-end":"#2ecc71","--btn-secondary-start":"rgba(52, 73, 94, 0.9)","--btn-secondary-end":"rgba(44, 62, 80, 0.9)","--btn-secondary-hover-start":"rgba(52, 73, 94, 1)","--btn-secondary-hover-end":"rgba(44, 62, 80, 1)","--btn-tertiary-start":"#3498db","--btn-tertiary-end":"#2980b9","--btn-tertiary-hover-start":"#5faee3","--btn-tertiary-hover-end":"#3498db","--btn-tertiary-shadow":"rgba(52, 152, 219, 0.3)","--color-focus":"#00ff88","--color-focus-shadow":"rgba(0, 255, 136, 0.3)","--color-divider-start":"rgba(52, 152, 219, 0.2)","--color-divider-middle":"rgba(52, 152, 219, 0.8)","--color-divider-end":"rgba(52, 152, 219, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--accent2":"#3498db","--accent3":"#00ff88","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(10, 25, 47, 0.95)","--input-bg-hover":"rgba(15, 35, 60, 0.98)","--input-bg-focus":"rgba(20, 40, 70, 1)","--input-text-color":"#ecf0f1","--input-border-color":"rgba(51, 65, 85, 0.7)","--color-glass-dark":"rgba(0, 0, 0, 0.3)","--color-glass-light":"rgba(0, 0, 0, 0.1)"},light:{"--bg-primary":"#f8f9fa","--bg-secondary":"#e9ecef","--bg-card":"#ffffff","--bg-card-dark":"#f1f3f5","--bg-panel-start":"#dee2e6","--bg-panel-end":"#ced4da","--bg-loading":"#e9ecef","--text-primary":"#212529","--text-secondary":"#495057","--text-dark":"#212529","--text-light":"#212529","--text-muted":"#6c757d","--text-white":"#ffffff","--text-gray":"#6c757d","--text-error":"#dc3545","--text-success":"#28a745","--text-warning":"#ffc107","--text-info":"#17a2b8","--text-faded":"rgba(33, 37, 41, 0.6)","--text-subtle":"rgba(33, 37, 41, 0.75)","--text-bright":"rgba(33, 37, 41, 0.9)","--info":"#17a2b8","--info-dark":"#138496","--info-light":"#20c997","--color-glass-dark":"rgba(248, 249, 250, 1)","--color-glass-light":"rgba(233, 236, 239, 0.8)","--success":"#28a745","--success-dark":"#218838","--success-light":"#38c757","--btn-primary-start":"#007bff","--btn-primary-end":"#0056b3","--btn-primary-hover-start":"#0069d9","--btn-primary-hover-end":"#004085","--btn-secondary-start":"rgba(108, 117, 125, 0.2)","--btn-secondary-end":"rgba(73, 80, 87, 0.2)","--btn-secondary-hover-start":"rgba(108, 117, 125, 0.3)","--btn-secondary-hover-end":"rgba(73, 80, 87, 0.3)","--btn-tertiary-start":"#6c757d","--btn-tertiary-end":"#545b62","--btn-tertiary-hover-start":"#5a6268","--btn-tertiary-hover-end":"#454d55","--btn-tertiary-shadow":"rgba(108, 117, 125, 0.3)","--color-focus":"#007bff","--color-focus-shadow":"rgba(0, 123, 255, 0.25)","--color-border-light":"rgba(0, 0, 0, 0.175)","--color-border-lighter":"rgba(0, 0, 0, 0.125)","--color-divider-start":"rgba(0, 123, 255, 0.15)","--color-divider-middle":"rgba(0, 123, 255, 0.5)","--color-divider-end":"rgba(0, 123, 255, 0.15)","--accent":"#ffc107","--accent-dark":"#e0a800","--accent2":"#17a2b8","--accent3":"#28a745","--secondary":"#6c757d","--secondary-dark":"#545b62","--input-bg":"#ffffff","--input-bg-hover":"#f8f9fa","--input-bg-focus":"#ffffff","--input-text-color":"#212529","--input-border-color":"rgba(0, 0, 0, 0.15)"},dark:{"--bg-primary":"#0a0a0a","--bg-secondary":"#161616","--bg-card":"#1a1a1a","--bg-card-dark":"#222222","--bg-panel-start":"#1f1f1f","--bg-panel-end":"#2980b9","--bg-loading":"#0d0d0d","--text-primary":"#e8e8e8","--text-secondary":"#a8a8a8","--text-dark":"#ffffff","--text-light":"#e8e8e8","--text-muted":"#888888","--text-white":"#ffffff","--text-gray":"#999999","--text-error":"#ff6b6b","--text-success":"#51cf66","--text-warning":"#ffd43b","--text-info":"#4dabf7","--text-faded":"rgba(255, 255, 255, 0.45)","--text-subtle":"rgba(255, 255, 255, 0.6)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#2980b9","--info-dark":"#2471a3","--info-light":"#3498db","--success":"#27ae60","--success-dark":"#1e8449","--success-light":"#2ecc71","--btn-primary-start":"#2980b9","--btn-primary-end":"#f39c12","--btn-primary-hover-start":"#3498db","--btn-primary-hover-end":"#f1c40f","--btn-secondary-start":"rgba(33, 37, 41, 0.9)","--btn-secondary-end":"rgba(23, 25, 28, 0.9)","--btn-secondary-hover-start":"rgba(52, 58, 64, 1)","--btn-secondary-hover-end":"rgba(33, 37, 41, 1)","--btn-tertiary-start":"#2980b9","--btn-tertiary-end":"#1f618d","--btn-tertiary-hover-start":"#3498db","--btn-tertiary-hover-end":"#2980b9","--btn-tertiary-shadow":"rgba(41, 128, 185, 0.4)","--color-focus":"#00ccff","--color-focus-shadow":"rgba(0, 204, 255, 0.3)","--color-border-light":"rgba(255, 255, 255, 0.12)","--color-border-lighter":"rgba(255, 255, 255, 0.18)","--color-divider-start":"rgba(41, 128, 185, 0.2)","--color-divider-middle":"rgba(41, 128, 185, 0.8)","--color-divider-end":"rgba(41, 128, 185, 0.2)","--accent":"#f39c12","--accent-dark":"#d68910","--accent2":"#00ccff","--accent3":"#ff6b6b","--secondary":"#c0392b","--secondary-dark":"#a93226","--input-bg":"rgba(255, 255, 255, 0.08)","--input-bg-hover":"rgba(255, 255, 255, 0.1)","--input-bg-focus":"rgba(255, 255, 255, 0.12)","--input-text-color":"var(--text-primary)","--input-border-color":"var(--color-border-light)","--color-glass-dark":"rgba(41, 128, 185, 0.08)","--color-glass-light":"rgba(243, 156, 18, 0.08)"},packers:{"--bg-primary":"#0A1713","--bg-secondary":"#154734","--bg-card":"#0D1F1A","--bg-card-dark":"#122A1F","--bg-panel-start":"#154734","--bg-panel-end":"#203731","--bg-loading":"#061109","--text-primary":"#FFFFFF","--text-secondary":"#FFB612","--text-dark":"#FFB612","--text-light":"#FFFFFF","--text-muted":"#C9B896","--text-white":"#FFFFFF","--text-gray":"#B5A482","--text-error":"#FF6B6B","--text-success":"#FFB612","--text-warning":"#FFC42E","--text-info":"#FFB612","--text-faded":"rgba(255, 255, 255, 0.6)","--text-subtle":"rgba(255, 255, 255, 0.7)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#FFB612","--info-dark":"#FFA300","--info-light":"#FFC42E","--success":"#203731","--success-dark":"#154734","--success-light":"#2F5645","--btn-primary-start":"#203731","--btn-primary-end":"#154734","--btn-primary-hover-start":"#2F5645","--btn-primary-hover-end":"#203731","--btn-secondary-start":"#FFB612","--btn-secondary-end":"#FFA300","--btn-secondary-hover-start":"#FFC42E","--btn-secondary-hover-end":"#FFB612","--btn-tertiary-start":"#FFB612","--btn-tertiary-end":"#FFA300","--btn-tertiary-hover-start":"#FFC42E","--btn-tertiary-hover-end":"#FFB612","--btn-tertiary-shadow":"rgba(255, 182, 18, 0.3)","--color-focus":"#FFB612","--color-focus-shadow":"rgba(255, 182, 18, 0.3)","--color-divider-start":"rgba(32, 55, 49, 0.2)","--color-divider-middle":"rgba(255, 182, 18, 0.8)","--color-divider-end":"rgba(32, 55, 49, 0.2)","--accent":"#FFB612","--accent-dark":"#FFA300","--accent2":"#C9B896","--accent3":"#FFFFFF","--secondary":"#C9B896","--secondary-dark":"#B5A482","--input-bg":"rgba(21, 71, 52, 0.3)","--input-bg-hover":"rgba(21, 71, 52, 0.4)","--input-bg-focus":"rgba(21, 71, 52, 0.5)","--input-text-color":"#FFFFFF","--input-placeholder-color":"rgba(255, 255, 255, 0.5)","--input-border-color":"rgba(255, 182, 18, 0.4)","--input-border-hover":"rgba(255, 182, 18, 0.6)","--input-border-focus":"#FFB612","--input-border-width":"2px","--input-padding":"12px 16px","--input-font-size":"16px","--input-line-height":"1.5","--input-shadow-focus":"0 0 0 3px rgba(255, 182, 18, 0.25)","--color-glass-dark":"rgba(32, 55, 49, 0.08)","--color-glass-light":"rgba(255, 182, 18, 0.05)"},sunset:{"--bg-primary":"#0c1929","--bg-secondary":"#162544","--bg-card":"#0a1520","--bg-card-dark":"#111f35","--bg-panel-start":"#162544","--bg-panel-end":"#ff6b6b","--bg-loading":"#060d17","--text-primary":"#ffd6a5","--text-secondary":"#ffb088","--text-dark":"#8b5a3c","--text-light":"#ffd6a5","--text-muted":"#daa49a","--text-white":"#fff5f0","--text-gray":"#c9a882","--text-error":"#ff6b6b","--text-success":"#ff9a76","--text-warning":"#ffc93c","--text-info":"#ff8e71","--text-faded":"rgba(255, 214, 165, 0.6)","--text-subtle":"rgba(255, 214, 165, 0.7)","--text-bright":"rgba(255, 214, 165, 0.9)","--info":"#ff8e71","--info-dark":"#ff7657","--info-light":"#ffa589","--success":"#ff9a76","--success-dark":"#ff8561","--success-light":"#ffb088","--btn-primary-start":"#c44569","--btn-primary-end":"#f8961e","--btn-primary-hover-start":"#d65577","--btn-primary-hover-end":"#f9a73e","--btn-secondary-start":"rgba(22, 37, 68, 0.9)","--btn-secondary-end":"rgba(12, 25, 41, 0.9)","--btn-secondary-hover-start":"rgba(28, 46, 78, 1)","--btn-secondary-hover-end":"rgba(22, 37, 68, 1)","--btn-tertiary-start":"#ff6b6b","--btn-tertiary-end":"#ee5a52","--btn-tertiary-hover-start":"#ff8080","--btn-tertiary-hover-end":"#ff6b6b","--btn-tertiary-shadow":"rgba(255, 107, 107, 0.3)","--color-focus":"#ff8e71","--color-focus-shadow":"rgba(255, 142, 113, 0.3)","--color-divider-start":"rgba(196, 69, 105, 0.2)","--color-divider-middle":"rgba(248, 150, 30, 0.8)","--color-divider-end":"rgba(196, 69, 105, 0.2)","--accent":"#f8961e","--accent-dark":"#f37121","--accent2":"#ff6b6b","--accent3":"#c44569","--secondary":"#ff6b6b","--secondary-dark":"#ee5a52","--input-bg":"rgba(12, 25, 41, 0.95)","--input-bg-hover":"rgba(18, 35, 51, 0.98)","--input-bg-focus":"rgba(22, 37, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(255, 142, 113, 0.3)","--color-glass-dark":"rgba(196, 69, 105, 0.08)","--color-glass-light":"rgba(248, 150, 30, 0.05)"},"miami-vice":{"--bg-primary":"#1a0f2e","--bg-secondary":"#2d1844","--bg-card":"#160d28","--bg-card-dark":"#231432","--bg-panel-start":"#2d1844","--bg-panel-end":"#ff6b9d","--bg-loading":"#0f0820","--text-primary":"#ffeaa7","--text-secondary":"#fab1a0","--text-dark":"#74526c","--text-light":"#ffeaa7","--text-muted":"#dfe6e9","--text-white":"#fff5f0","--text-gray":"#b2bec3","--text-error":"#ff7675","--text-success":"#fdcb6e","--text-warning":"#ffeb3b","--text-info":"#00d2d3","--text-faded":"rgba(255, 234, 167, 0.6)","--text-subtle":"rgba(255, 234, 167, 0.7)","--text-bright":"rgba(255, 234, 167, 0.9)","--info":"#00d2d3","--info-dark":"#00b8b8","--info-light":"#01e5e5","--success":"#fdcb6e","--success-dark":"#f9b747","--success-light":"#ffeaa7","--btn-primary-start":"#ff6b9d","--btn-primary-end":"#00d2d3","--btn-primary-hover-start":"#ee5a6f","--btn-primary-hover-end":"#01e5e5","--btn-secondary-start":"rgba(45, 24, 68, 0.9)","--btn-secondary-end":"rgba(26, 15, 46, 0.9)","--btn-secondary-hover-start":"rgba(55, 34, 78, 1)","--btn-secondary-hover-end":"rgba(45, 24, 68, 1)","--btn-tertiary-start":"#00d2d3","--btn-tertiary-end":"#00b8b8","--btn-tertiary-hover-start":"#01e5e5","--btn-tertiary-hover-end":"#00d2d3","--btn-tertiary-shadow":"rgba(0, 210, 211, 0.3)","--color-focus":"#00d2d3","--color-focus-shadow":"rgba(0, 210, 211, 0.3)","--color-divider-start":"rgba(255, 107, 157, 0.2)","--color-divider-middle":"rgba(0, 210, 211, 0.8)","--color-divider-end":"rgba(255, 107, 157, 0.2)","--accent":"#feca57","--accent-dark":"#f9b747","--accent2":"#00d2d3","--accent3":"#ff6b9d","--secondary":"#ff7979","--secondary-dark":"#ff6348","--input-bg":"rgba(26, 15, 46, 0.95)","--input-bg-hover":"rgba(35, 20, 56, 0.98)","--input-bg-focus":"rgba(45, 24, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(0, 210, 211, 0.3)","--color-glass-dark":"rgba(255, 107, 157, 0.08)","--color-glass-light":"rgba(0, 210, 211, 0.05)"},purple:{"--bg-primary":"#1a1a2e","--bg-secondary":"#2d2d44","--bg-card":"#16132d","--bg-card-dark":"#1f1b3a","--bg-panel-start":"#1a1a2e","--bg-panel-end":"#8e44ad","--bg-loading":"#0f0f1a","--text-primary":"#f3e5f5","--text-secondary":"#ce93d8","--text-dark":"#4a148c","--text-light":"#f3e5f5","--text-muted":"#ba68c8","--text-white":"#ffffff","--text-gray":"#9c27b0","--text-error":"#f44336","--text-success":"#ab47bc","--text-warning":"#ffc107","--text-info":"#ba68c8","--text-faded":"rgba(243, 229, 245, 0.6)","--text-subtle":"rgba(243, 229, 245, 0.7)","--text-bright":"rgba(243, 229, 245, 0.9)","--info":"#8e44ad","--info-dark":"#7d3c98","--info-light":"#a569bd","--success":"#a569bd","--success-dark":"#8e44ad","--success-light":"#bb8fce","--btn-primary-start":"#8e44ad","--btn-primary-end":"#f1c40f","--btn-primary-hover-start":"#a569bd","--btn-primary-hover-end":"#f39c12","--btn-secondary-start":"rgba(45, 45, 68, 0.9)","--btn-secondary-end":"rgba(26, 26, 46, 0.9)","--btn-secondary-hover-start":"rgba(58, 58, 88, 1)","--btn-secondary-hover-end":"rgba(45, 45, 68, 1)","--btn-tertiary-start":"#8e44ad","--btn-tertiary-end":"#6c3483","--btn-tertiary-hover-start":"#a569bd","--btn-tertiary-hover-end":"#8e44ad","--btn-tertiary-shadow":"rgba(142, 68, 173, 0.3)","--color-focus":"#cc99ff","--color-focus-shadow":"rgba(204, 153, 255, 0.3)","--color-divider-start":"rgba(142, 68, 173, 0.2)","--color-divider-middle":"rgba(142, 68, 173, 0.8)","--color-divider-end":"rgba(142, 68, 173, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--accent2":"#ab47bc","--accent3":"#ba68c8","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(26, 26, 46, 0.95)","--input-bg-hover":"rgba(35, 35, 55, 0.98)","--input-bg-focus":"rgba(45, 45, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(142, 68, 173, 0.3)","--color-glass-dark":"rgba(142, 68, 173, 0.08)","--color-glass-light":"rgba(241, 196, 15, 0.08)"}},he=r=>{const e=ne[r]||ne.default,t=document.documentElement;Object.entries(e).forEach(([s,n])=>{t.style.setProperty(s,n)})},$t=()=>{const r=localStorage.getItem("selectedTheme")||"default";he(r)},er=()=>localStorage.getItem("selectedTheme")||"default",tr=r=>{localStorage.setItem("selectedTheme",r),he(r)},pe=i.createContext(null),me=r=>{if(!r)return null;const e="https://api.in-between.live";if(r.startsWith("http"))return r;if(r.startsWith("/files/"))return`${e}${r}`;if(r.includes("/uploads/")){const t=r.split("/"),s=t.pop(),n=t[t.length-1];return`${e}/files/${n}/${s}`}else return`${e}${r}`},ae=r=>r?{...r,profileImg:me(r.profileImg)}:{},Ut=({children:r})=>{const[e,t]=i.useState({profileImg:null,autoAnte:!1,muted:!1,selectedTitle:null}),[s,n]=i.useState(!0),{user:a}=W(),u=de.useCallback(async()=>{if(!a){t({autoAnte:!1}),n(!1);return}try{n(!0);const c="https://api.in-between.live",y=localStorage.getItem("token");if(!y){console.error("[Preferences] No token available"),n(!1);return}const A=await fetch(`${c}/preferences`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`}});if(!A.ok)throw new Error("Failed to load preferences");const l=await A.json(),o=ae(l)||{autoAnte:!1,muted:!1};t(o),typeof o.muted<"u"&&V.setMuted(o.muted)}catch(c){console.error("[Preferences] Error loading preferences:",c),t({autoAnte:!1})}finally{n(!1)}},[a]);i.useEffect(()=>{a&&u()},[a,u]);const f=async(c,y)=>{if(!a)return console.error("[Preferences] Cannot update preferences: User not logged in"),!1;try{const A="https://api.in-between.live",l=localStorage.getItem("token");if(!l)return console.error("[Preferences] No token available"),!1;t(E=>({...E,[c]:y})),c==="muted"&&V.setMuted(y);const b=await fetch(`${A}/preferences/${c}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({value:y})});if(!b.ok)throw new Error(`Failed to update ${c} preference`);const o=await b.json(),v=ae(o);return t(v),!0}catch(A){return console.error(`[Preferences] Error updating ${c}:`,A),await u(),!1}},d=async()=>{const c=!e.autoAnte;return await f("autoAnte",c)},m=async()=>{const c=!e.muted;return await f("muted",c)},w=async c=>await f("selectedTitle",c),h=async c=>{if(!c)return console.error("[Preferences] No file provided for profile image upload"),!1;try{const y=new FormData;y.append("file",c);const A="https://api.in-between.live",l=localStorage.getItem("token");if(!l)return console.error("[Preferences] No token available"),!1;const b=await fetch(`${A}/preferences/profileImg`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:y}),o=await b.text();if(!b.ok)throw new Error(`Failed to upload profile image: ${o}`);const v=o?JSON.parse(o):{},E=me(v.fileUrl);return t(j=>({...j,profileImg:E})),!0}catch(y){return console.error("[Preferences] Error uploading profile image:",y),!1}};return p.jsx(pe.Provider,{value:{preferences:e,updatePreference:f,toggleAutoAnte:d,toggleMute:m,updateSelectedTitle:w,uploadProfileImg:h,loading:s},children:r})},rr=()=>{const r=i.useContext(pe);if(!r)throw new Error("usePreferences must be used within a PreferencesProvider");return r},ye=i.createContext(null),Ot=({children:r})=>{const{socket:e}=z(),{token:t}=W(),[s,n]=i.useState(new Map),a=i.useRef(new Set),u=i.useRef(null);i.useEffect(()=>{if(!e)return;const c=({userId:y,data:A})=>{console.log("[UserDataContext] Received user data update:",y,A),n(l=>{const b=new Map(l);return b.set(y,A),b})};return e.on("userDataUpdated",c),()=>{e.off("userDataUpdated",c)}},[e]),i.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]);const f=i.useCallback(async c=>{if(!c||c.length===0||!t)return{};try{const y=await fetch(`${le}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({userIds:c})});if(!y.ok)throw new Error("Failed to fetch users data");const A=await y.json();return n(l=>{const b=new Map(l);return Object.entries(A).forEach(([o,v])=>{b.set(o,v)}),b}),A}catch{return{}}},[t]),d=i.useCallback(()=>{if(a.current.size===0)return;const c=Array.from(a.current);a.current.clear(),f(c)},[f]),m=i.useCallback(c=>{if(!c)return null;const y=s.get(c);return y||(a.current.add(c),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{d()},10),null)},[s,d]),w=i.useCallback(c=>{const y=c.filter(A=>!s.has(A));y.length>0&&f(y)},[s,f]),h={getUserData:m,prefetchUsers:w};return p.jsx(ye.Provider,{value:h,children:r})},nr=r=>{const e=i.useContext(ye);if(!e)throw new Error("useUserData must be used within UserDataProvider");return e.getUserData(r)};/*! Capacitor: https://capacitorjs.com/ - MIT License */var $;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})($||($={}));class G extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const Dt=r=>{var e,t;return r?.androidBridge?"android":!((t=(e=r?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Bt=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},s=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:Dt(r),a=()=>n()!=="web",u=h=>{const c=m.get(h);return!!(c?.platforms.has(n())||f(h))},f=h=>{var c;return(c=t.PluginHeaders)===null||c===void 0?void 0:c.find(y=>y.name===h)},d=h=>r.console.error(h),m=new Map,w=(h,c={})=>{const y=m.get(h);if(y)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),y.proxy;const A=n(),l=f(h);let b;const o=async()=>(!b&&A in c?b=typeof c[A]=="function"?b=await c[A]():b=c[A]:e!==null&&!b&&"web"in c&&(b=typeof c.web=="function"?b=await c.web():b=c.web),b),v=(x,_)=>{var C,S;if(l){const I=l?.methods.find(F=>_===F.name);if(I)return I.rtype==="promise"?F=>t.nativePromise(h,_.toString(),F):(F,O)=>t.nativeCallback(h,_.toString(),F,O);if(x)return(C=x[_])===null||C===void 0?void 0:C.bind(x)}else{if(x)return(S=x[_])===null||S===void 0?void 0:S.bind(x);throw new G(`"${h}" plugin is not implemented on ${A}`,$.Unimplemented)}},E=x=>{let _;const C=(...S)=>{const I=o().then(F=>{const O=v(F,x);if(O){const D=O(...S);return _=D?.remove,D}else throw new G(`"${h}.${x}()" is not implemented on ${A}`,$.Unimplemented)});return x==="addListener"&&(I.remove=async()=>_()),I};return C.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:x,writable:!1,configurable:!1}),C},j=E("addListener"),g=E("removeListener"),k=(x,_)=>{const C=j({eventName:x},_),S=async()=>{const F=await C;g({eventName:x,callbackId:F},_)},I=new Promise(F=>C.then(()=>F({remove:S})));return I.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await S()},I},P=new Proxy({},{get(x,_){switch(_){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return l?k:j;case"removeListener":return g;default:return E(_)}}});return s[h]=P,m.set(h,{name:h,proxy:P,platforms:new Set([...Object.keys(c),...l?[A]:[]])}),P};return t.convertFileSrc||(t.convertFileSrc=h=>h),t.getPlatform=n,t.handleError=d,t.isNativePlatform=a,t.isPluginAvailable=u,t.registerPlugin=w,t.Exception=G,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Mt=r=>r.Capacitor=Bt(r),J=Mt(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Q=J.registerPlugin;class ve{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,t);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const n=this.listeners[e];if(!n){if(s){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}n.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new J.Exception(e,$.Unimplemented)}unavailable(e="not available"){return new J.Exception(e,$.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const n=s.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(s=>{this.notifyListeners(e,s)}))}}const se=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),oe=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Nt extends ve{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[n,a]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=oe(n).trim(),a=oe(a).trim(),t[n]=a}),t}async setCookie(e){try{const t=se(e.key),s=se(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${n}; path=${a}; ${u};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Q("CapacitorCookies",{web:()=>new Nt});const Kt=async r=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const n=s.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>t(n),s.readAsDataURL(r)}),zt=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(n=>n.toLocaleLowerCase()).reduce((n,a,u)=>(n[a]=r[e[u]],n),{})},Wt=(r,e=!0)=>r?Object.entries(r).reduce((s,n)=>{const[a,u]=n;let f,d;return Array.isArray(u)?(d="",u.forEach(m=>{f=e?encodeURIComponent(m):m,d+=`${a}=${f}&`}),d.slice(0,-1)):(f=e?encodeURIComponent(u):u,d=`${a}=${f}`),`${s}&${d}`},"").substr(1):null,qt=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),n=zt(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(n.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[u,f]of Object.entries(r.data||{}))a.set(u,f);t.body=a.toString()}else if(n.includes("multipart/form-data")||r.data instanceof FormData){const a=new FormData;if(r.data instanceof FormData)r.data.forEach((f,d)=>{a.append(d,f)});else for(const f of Object.keys(r.data))a.append(f,r.data[f]);t.body=a;const u=new Headers(t.headers);u.delete("content-type"),t.headers=u}else(n.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class Gt extends ve{async request(e){const t=qt(e,e.webFetchExtra),s=Wt(e.params,e.shouldEncodeUrlParams),n=s?`${e.url}?${s}`:e.url,a=await fetch(n,t),u=a.headers.get("content-type")||"";let{responseType:f="text"}=a.ok?e:{};u.includes("application/json")&&(f="json");let d,m;switch(f){case"arraybuffer":case"blob":m=await a.blob(),d=await Kt(m);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const w={};return a.headers.forEach((h,c)=>{w[c]=h}),{data:d,headers:w,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Q("CapacitorHttp",{web:()=>new Gt});const Ht="__capgo_keep_url_path_after_reload",H="__capgo_history_stack__",ce=100,Vt=typeof window<"u"&&typeof document<"u"&&typeof history<"u";if(Vt){const r=window;if(!r.__capgoHistoryPatched){r.__capgoHistoryPatched=!0;const e=()=>{try{if(r.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return window.localStorage.getItem(Ht)==="1"}catch{return!1}},t=()=>{try{const g=window.sessionStorage.getItem(H);if(!g)return{stack:[],index:-1};const k=JSON.parse(g);return!k||!Array.isArray(k.stack)||typeof k.index!="number"?{stack:[],index:-1}:k}catch{return{stack:[],index:-1}}},s=(g,k)=>{try{window.sessionStorage.setItem(H,JSON.stringify({stack:g,index:k}))}catch{}},n=()=>{try{window.sessionStorage.removeItem(H)}catch{}},a=g=>{try{const k=g??window.location.href,P=new URL(k instanceof URL?k.toString():k,window.location.href);return`${P.pathname}${P.search}${P.hash}`}catch{return null}},u=(g,k)=>{if(g.length<=ce)return{stack:g,index:k};const P=g.length-ce,x=g.slice(P),_=Math.max(0,k-P);return{stack:x,index:_}},f=g=>{document.readyState==="complete"||document.readyState==="interactive"?g():window.addEventListener("DOMContentLoaded",g,{once:!0})};let d=!1,m=!1,w=!1;const h=()=>{if(!d)return;const g=t(),k=a();if(k){if(g.stack.length===0){g.stack.push(k),g.index=0,s(g.stack,g.index);return}(g.index<0||g.index>=g.stack.length)&&(g.index=g.stack.length-1),g.stack[g.index]!==k&&(g.stack[g.index]=k,s(g.stack,g.index))}},c=(g,k)=>{if(!d||m)return;const P=a(g);if(!P)return;let{stack:x,index:_}=t();x.length===0?(x.push(P),_=x.length-1):k?((_<0||_>=x.length)&&(_=x.length-1),x[_]=P):_>=x.length-1?(x.push(P),_=x.length-1):(x=x.slice(0,_+1),x.push(P),_=x.length-1),{stack:x,index:_}=u(x,_),s(x,_)},y=()=>{if(!d||m)return;const g=t();if(g.stack.length===0){h();return}const k=g.index>=0&&g.index<g.stack.length?g.index:g.stack.length-1,P=a();if(g.stack.length===1&&P===g.stack[0])return;const x=g.stack[0];if(!x)return;m=!0;try{history.replaceState(history.state,document.title,x);for(let S=1;S<g.stack.length;S+=1)history.pushState(history.state,document.title,g.stack[S])}catch{m=!1;return}m=!1;const _=g.stack.length-1,C=k-_;C!==0?history.go(C):(history.replaceState(history.state,document.title,g.stack[k]),window.dispatchEvent(new PopStateEvent("popstate")))},A=()=>{!d||w||(w=!0,f(()=>{w=!1,y()}))};let l=null,b=null;const o=()=>{if(!d||m)return;const g=a();if(!g)return;const k=t(),P=k.stack.lastIndexOf(g);P>=0?k.index=P:(k.stack.push(g),k.index=k.stack.length-1);const x=u(k.stack,k.index);s(x.stack,x.index)},v=()=>{l&&b||(l=history.pushState,b=history.replaceState,history.pushState=function(k,P,x){const _=l.call(history,k,P,x);return c(x,!1),_},history.replaceState=function(k,P,x){const _=b.call(history,k,P,x);return c(x,!0),_},window.addEventListener("popstate",o))},E=()=>{l&&(history.pushState=l,l=null),b&&(history.replaceState=b,b=null),window.removeEventListener("popstate",o)},j=g=>{if(d===g){d&&(h(),A());return}d=g,d?(v(),h(),A()):(E(),n())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",g=>{var k;const P=g,x=(k=P?.detail)===null||k===void 0?void 0:k.enabled;typeof x=="boolean"?(r.__capgoKeepUrlPathAfterReload=x,j(x)):(r.__capgoKeepUrlPathAfterReload=!0,j(!0))}),j(e())}}const Jt=Q("CapacitorUpdater",{web:()=>K(()=>import("./web-cZK17pf2.js"),__vite__mapDeps([14,1,5,6]),import.meta.url).then(r=>new r.CapacitorUpdaterWeb)});$t();window.Capacitor?.isNativePlatform()&&(Jt.notifyAppReady(),window.Capacitor?.getPlatform()==="android"&&(document.documentElement.style.setProperty("--safe-area-inset-top","48px"),document.documentElement.style.setProperty("--safe-area-inset-bottom","0px"),console.log("âœ… Android safe area insets set: top=48px")));Te.createRoot(document.getElementById("root")).render(p.jsx(de.StrictMode,{children:p.jsx(ze,{children:p.jsx(Ke,{children:p.jsx(Ot,{children:p.jsx(Ut,{children:p.jsx(Rt,{})})})})})}));export{le as A,st as B,N as L,ye as U,ve as W,W as a,z as b,nr as c,Xt as d,rr as e,R as f,er as g,tr as h,p as j,V as s,pt as u};
