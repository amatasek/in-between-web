import{a1 as O,_ as Y,a4 as ne,Z as e,a9 as W,aa as ye,ab as je,ac as fe}from"./index-NRT9ESP6.js";import{b as m,h as be,u as Ce}from"./vendor-CT7sGowS.js";import{G as he,Z as Ne,C as E,a as ve,R as Be,P as Ae,S as Te,I as we,e as Ie,b as Se,U as Pe,g as le,f as ke,u as Le,A as $e,c as Ee,d as de}from"./useAdInterstitial-BxbIF6Az.js";import{u as Re}from"./useGamepadNavigation-DKu7SyYo.js";import{c as ae}from"./createLucideIcon-D-AJSOET.js";import"./socket-CA1CrNgP.js";import"./audio-hxunv4lQ.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ue=ae("chevron-down",Oe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],me=ae("chevron-up",Me);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ge=ae("log-out",De),ge=m.createContext(),P=()=>{const t=m.useContext(ge);if(t===void 0)throw new Error("useGameContext must be used within a GameProvider");return t},Fe=({children:t,gameId:n,initialGameState:o=null})=>{const{socket:s,error:c}=O(),{user:r}=Y(),[d,a]=m.useState(o),l=m.useRef(null),[_,i]=m.useState(null),g=m.useCallback(()=>{i(null)},[]);m.useEffect(()=>{c&&i(c)},[c]),m.useEffect(()=>{if(s)return s.on("gameReconnected",h=>{console.log(`[Game] Reconnected to game: ${h.gameId}`,h.game),a(h.game),console.log(`[Game] Successfully reconnected as user ID: ${r?.id}`),i(null),h.game&&h.game.id&&setTimeout(()=>{console.log("[Game] Requesting fresh game state after reconnection"),s.emit("getGameState",{gameId:h.game.id})},500)}),s.on("gameState",h=>{if(h&&h.id&&JSON.stringify(d)!==JSON.stringify(h)){if(h.currentPlayerId&&r?.id){const F=h.currentPlayerId===r.id,V=l.current===r.id;F&&!V&&ne.play("ui.alert"),l.current=h.currentPlayerId}a(h),g()}}),s.on("gameError",h=>{console.error("Game error:",h),i(h)}),()=>{s.off("gameReconnected"),s.off("gameState"),s.off("gameError")}},[s,g,d,r]);const u=m.useCallback(h=>{if(!(!s||!n))try{s.emit("placeBet",{bet:h,gameId:n})}catch(F){console.error("Error placing bet:",F),i("Failed to place bet. Please try again.")}},[s,n]),p=m.useCallback(()=>{if(!(!s||!n))try{s.emit("payAnte",{gameId:n})}catch(h){console.error("Error paying ante:",h),i("Failed to pay ante. Please try again.")}},[s,n]),f=m.useCallback(()=>{if(!(!s||!n))try{s.emit("dealCards",{gameId:n})}catch(h){console.error("Error dealing cards:",h),i("Failed to deal cards. Please try again.")}},[s,n]),C=m.useCallback(()=>{if(!(!s||!n))try{s.emit("revealMiddleCard",{gameId:n})}catch(h){console.error("Error revealing middle card:",h),i("Failed to reveal middle card. Please try again.")}},[s,n]),N=m.useCallback(()=>{if(!(!s||!n))try{s.emit("nextRound",{gameId:n})}catch(h){console.error("Error moving to next round:",h),i("Failed to move to next round. Please try again.")}},[s,n]),k=m.useCallback(()=>{if(!(!s||!n))try{s.emit("ready")}catch(h){console.error("Error setting player ready:",h),i("Failed to set player ready. Please try again.")}},[s,n]),L=m.useCallback(()=>{if(!(!s||!n))try{s.emit("unready")}catch(h){console.error("Error setting player unready:",h),i("Failed to set player unready. Please try again.")}},[s,n]),B={gameState:d,error:_,gameId:n,placeBet:u,payAnte:p,playerReady:k,playerUnready:L,dealCards:f,revealMiddleCard:C,nextRound:N,clearError:g};return e.jsx(ge.Provider,{value:B,children:t})},qe="_modalOverlay_17ksc_1",ze="_modalContent_17ksc_14",Ue="_passwordInput_17ksc_34",He="_modalActions_17ksc_54",We="_modalButton_17ksc_60",Ye="_cancelButton_17ksc_71",Ve="_submitButton_17ksc_80",M={modalOverlay:qe,modalContent:ze,passwordInput:Ue,modalActions:He,modalButton:We,cancelButton:Ye,submitButton:Ve};function Je({isOpen:t,onClose:n,onSubmit:o,gameId:s}){const[c,r]=m.useState("");if(!t)return null;const d=l=>{l.preventDefault(),o(c),r("")},a=()=>{r(""),n()};return e.jsx("div",{className:M.modalOverlay,children:e.jsxs("div",{className:M.modalContent,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:s||""}),":"]}),e.jsxs("form",{onSubmit:d,autoComplete:"off",children:[e.jsx(he,{title:"Enter Game Password",type:"text",value:c,onChange:l=>r(l.target.value),className:M.passwordInput,autoFocus:!0,required:!0,autoComplete:"off","data-form-type":"other","data-lpignore":"true"}),e.jsxs("div",{className:M.modalActions,children:[e.jsx("button",{type:"button",onClick:a,className:`${M.modalButton} ${M.cancelButton}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${M.modalButton} ${M.submitButton}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const Ke="_gameContainer_un67s_1",Ze="_gameScreen_un67s_7",Qe="_loadingContainer_un67s_41",Xe="_errorContainer_un67s_50",et="_errorText_un67s_66",tt="_gameBottomSection_un67s_95",st="_withAds_un67s_102",G={gameContainer:Ke,gameScreen:Ze,loadingContainer:Qe,errorContainer:Xe,errorText:et,gameBottomSection:tt,withAds:st},nt="_emojiReactions_1sxwe_1",at="_withAds_1sxwe_8",ot="_toggleButton_1sxwe_24",rt="_emojiPanel_1sxwe_51",ct="_emojiGrid_1sxwe_76",it="_emojiButton_1sxwe_82",q={emojiReactions:nt,withAds:at,toggleButton:ot,emojiPanel:rt,emojiGrid:ct,emojiButton:it},lt=()=>{const[t,n]=m.useState(!1),{socket:o}=O(),{gameState:s}=P(),{user:c}=Y(),r=!c?.subscription?.isPremium,d=m.useRef(null),a=[{emoji:"ğŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ğŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ğŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ğŸ˜",name:"Cool",color:"#4A5568"},{emoji:"ğŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ğŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ğŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ğŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ğŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ğŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ğŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ğŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ğŸ‰",name:"Celebration",color:"#A855F7"},{emoji:"ğŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ğŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ğŸ˜¤",name:"Confident",color:"#DC2626"}],l=i=>{!o||!s||!c||(o.emit("emojiReaction",{gameId:s.id,emoji:i.emoji,color:i.color,playerName:c.username}),n(!1))},_=()=>{n(!t)};return m.useEffect(()=>{const i=g=>{d.current&&!d.current.contains(g.target)&&n(!1)};return t&&(document.addEventListener("mousedown",i),document.addEventListener("touchstart",i)),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}},[t]),e.jsxs("div",{className:`${q.emojiReactions} ${r?q.withAds:""}`,ref:d,children:[e.jsx("button",{type:"button",className:q.toggleButton,onClick:_,"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ğŸ˜Š"}),t&&e.jsx("div",{className:q.emojiPanel,children:e.jsx("div",{className:q.emojiGrid,children:a.map(i=>e.jsx("button",{type:"button",className:q.emojiButton,onClick:()=>l(i),"data-gamepad-focusable":"true",title:i.name,style:{"--emoji-color":i.color},children:i.emoji},i.name))})})]})},dt="_headerContainer_1aj4p_1",ut="_header_1aj4p_1",mt="_headerLeft_1aj4p_30",_t="_gameTitle_1aj4p_39",pt="_gameIdText_1aj4p_50",ht="_gameIdLink_1aj4p_57",gt="_headerRight_1aj4p_70",xt="_controlsStack_1aj4p_76",yt="_balanceDisplay_1aj4p_83",jt="_balanceLeft_1aj4p_96",ft="_xpBonusIndicator_1aj4p_108",bt="_xpBonusIcon_1aj4p_114",Ct="_xpBonusText_1aj4p_120",Nt="_controlsGroup_1aj4p_128",I={headerContainer:dt,header:ut,headerLeft:mt,gameTitle:_t,gameIdText:pt,gameIdLink:ht,headerRight:gt,controlsStack:xt,balanceDisplay:yt,balanceLeft:jt,xpBonusIndicator:ft,xpBonusIcon:bt,xpBonusText:Ct,controlsGroup:Nt},vt=({handleLeaveGame:t,onModalStateChange:n})=>{const{gameState:o,gameId:s}=P(),{socket:c}=O(),{user:r}=Y(),d=c?.auth?.userId,a=d&&o?.players?o.players[d]:null,l=a?.balance??r?.balance??0,_=a?.isReady||!1,i=r?.subscription?.isPremium,[g,u]=m.useState(!1),[p,f]=m.useState(!1),[C,N]=m.useState(!1),[k,L]=m.useState(!1),[B,h]=m.useState(!1);return m.useEffect(()=>{n&&n(g||p||C||k||B)},[g,p,C,k,B,n]),e.jsxs("div",{className:I.headerContainer,children:[e.jsxs("div",{className:I.header,children:[e.jsxs("div",{className:I.headerLeft,children:[e.jsxs("h1",{className:I.gameTitle,children:["In Between ",e.jsx("span",{className:"live-tag small",children:"LIVE"})]}),e.jsx("p",{className:I.gameIdText,children:e.jsxs("span",{className:I.gameIdLink,onClick:()=>u(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",s]})})]}),e.jsx("div",{className:I.headerRight,children:e.jsxs("div",{className:I.controlsStack,children:[e.jsxs("div",{className:I.balanceDisplay,children:[i&&e.jsxs("div",{className:I.xpBonusIndicator,children:[e.jsx(Ne,{size:16,strokeWidth:2.5,className:I.xpBonusIcon}),e.jsx("span",{className:I.xpBonusText,children:"2x XP"})]}),e.jsx("div",{className:I.balanceLeft,children:e.jsx(E,{amount:Number(l),size:"small"})})]}),e.jsxs("div",{className:I.controlsGroup,children:[e.jsx(ve,{inGame:!0,onModalStateChange:N,"data-gamepad-focusable":"true"}),e.jsx(Be,{onModalStateChange:L,"data-gamepad-focusable":"true"}),e.jsx(Ae,{onModalStateChange:h,"data-gamepad-focusable":"true"}),e.jsx(Te,{onClick:()=>f(!0),"data-gamepad-focusable":"true"}),e.jsx(we,{icon:e.jsx(Ge,{size:20,style:{color:"white"}}),title:"Leave Game",onClick:t,variant:"danger",disabled:_,"data-gamepad-focusable":"true"})]})]})})]}),g&&e.jsx(Ie,{onClose:()=>u(!1),gameData:o}),p&&e.jsx(Se,{onClose:()=>f(!1)})]})},Bt="_gameLogContainer_avo5w_1",At="_gameLogHeader_avo5w_15",Tt="_expandIcon_avo5w_29",wt="_gameLogEntries_avo5w_53",It="_logEntry_avo5w_63",St="_logTime_avo5w_88",Pt="_logMessage_avo5w_95",kt="_systemMessage_avo5w_100",Lt="_emptyLog_avo5w_111",$t="_showMoreButton_avo5w_119",$={gameLogContainer:Bt,gameLogHeader:At,expandIcon:Tt,gameLogEntries:wt,logEntry:It,logTime:St,logMessage:Pt,systemMessage:kt,emptyLog:Lt,showMoreButton:$t},Et="_roundPanel_1npc7_2",Rt="_dividerLine_1npc7_26",Ot="_roundLabel_1npc7_38",X={roundPanel:Et,dividerLine:Rt,roundLabel:Ot},Mt=({roundNumber:t})=>e.jsxs("div",{className:`panel-alt ${X.roundPanel}`,children:[e.jsx("div",{className:X.dividerLine}),e.jsxs("span",{className:X.roundLabel,children:["Round ",t]}),e.jsx("div",{className:X.dividerLine})]}),Dt="_turnPanel_1mzsb_2",Gt="_leftSection_1mzsb_15",Ft="_win_1mzsb_22",qt="_lose_1mzsb_27",zt="_penalty_1mzsb_32",Ut="_pass_1mzsb_37",Ht="_cardsContainer_1mzsb_43",Wt="_playerName_1mzsb_49",Yt="_action_1mzsb_56",Vt="_amount_1mzsb_65",R={turnPanel:Dt,leftSection:Gt,win:Ft,lose:qt,penalty:zt,pass:Ut,cardsContainer:Ht,playerName:Wt,action:Yt,amount:Vt},Jt="_cardMini_tdd1b_2",Kt="_red_tdd1b_18",Zt="_black_tdd1b_22",Qt="_rank_tdd1b_26",Xt="_aceIndicator_tdd1b_34",es="_suit_tdd1b_53",ts="_cardPlaceholder_tdd1b_58",D={cardMini:Jt,red:Kt,black:Zt,rank:Qt,aceIndicator:Xt,suit:es,cardPlaceholder:ts},ss={TIMERS:{BETTING_DURATION:3e4,DECISION_DURATION:15e3}},j={HEARTS:"â™¥",DIAMONDS:"â™¦",CLUBS:"â™£",SPADES:"â™ ",ARROW_RIGHT:"â†’",ARROW_UP:"â†‘",ARROW_DOWN:"â†“",ROTATE:"â†»",CHECK:"âœ“",CROSS:"âœ•"},{TIMERS:oe}=ss,se=({card:t})=>{if(!t)return e.jsx("div",{className:D.cardPlaceholder,children:"?"});const n=l=>{switch(l){case"hearts":case"â™¥":return j.HEARTS;case"diamonds":case"â™¦":return j.DIAMONDS;case"clubs":case"â™£":return j.CLUBS;case"spades":case"â™ ":return j.SPADES;default:return l||""}},o=t.value||"?",s=t.suit||"?",c=s==="â™¥"||s==="â™¦"||s==="hearts"||s==="diamonds",r=o==="A",d=t.isAceLow===!0,a=r&&!d;return e.jsxs("div",{className:`${D.cardMini} ${c?D.red:D.black}`,children:[e.jsxs("span",{className:D.rank,children:[o,r&&(a?e.jsx("span",{className:D.aceIndicator,children:"â†‘"}):d?e.jsx("span",{className:D.aceIndicator,children:"â†“"}):null)]}),e.jsx("span",{className:D.suit,children:n(s)})]})},ns=({summary:t})=>{if(!t)return null;const n=c=>{switch(c){case"win":return R.win;case"lose":return R.lose;case"penalty":case"triple_penalty":return R.penalty;case"pass":return R.pass;default:return R.default}},o=c=>{switch(c){case"win":return"WON";case"lose":return"LOST";case"penalty":return"PENALTY";case"triple_penalty":return"TRIPLE PENALTY";case"pass":return"PASSED";case"bet":return"BET";default:return c?.toUpperCase()||""}},s=()=>t.winAmount?t.winAmount/2:t.lossAmount?t.lossAmount:t.betAmount?t.betAmount:0;return e.jsxs("div",{className:`panel-alt ${R.turnPanel} ${n(t.action)}`,children:[e.jsxs("div",{className:R.leftSection,children:[e.jsxs("div",{className:R.cardsContainer,children:[e.jsx(se,{card:t.cards?.left}),t.cards?.middle&&e.jsx(se,{card:t.cards?.middle}),e.jsx(se,{card:t.cards?.right})]}),e.jsx("span",{className:R.playerName,children:e.jsx(W,{username:t.playerName})}),e.jsx("span",{className:R.action,children:o(t.action)})]}),s()>0&&e.jsx("div",{className:R.amount,children:e.jsx(E,{amount:s(),size:"small"})})]})},as=()=>{const{gameState:t}=P(),[n,o]=m.useState(!1),s=t?.gameLog||[],c=t?.seats?t.seats.filter(p=>p!==null).length:0,r=Math.max(c,4),[d,a]=m.useState(r);if(m.useEffect(()=>{n||a(r)},[c,r,n]),!t||!t.gameLog)return null;const l=p=>new Date(p).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_=()=>{o(!n),n&&a(r)},i=()=>{a(p=>p+Math.max(c,5))},g=n?[]:s.slice(0,d),u=p=>p.type==="turn"?e.jsx(ns,{summary:p},p.id):p.type==="round_start"?e.jsx(Mt,{roundNumber:p.roundNumber},p.id):p.type==="system"||p.type==="error"?e.jsxs("div",{className:`${$.logEntry} ${$.systemMessage}`,children:[e.jsx("span",{className:$.logTime,children:l(p.timestamp)}),e.jsx("span",{className:$.logMessage,children:p.message})]},p.id):e.jsxs("div",{className:$.logEntry,children:[e.jsx("span",{className:$.logTime,children:l(p.timestamp)}),e.jsx("span",{className:$.logMessage,children:p.message})]},p.id);return e.jsxs("div",{className:$.gameLogContainer,children:[e.jsxs("h3",{className:$.gameLogHeader,onClick:_,children:["Game Log",e.jsx("span",{className:$.expandIcon,children:n?"â–¶":"â–¼"})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$.gameLogEntries,children:s.length===0?e.jsx("div",{className:$.emptyLog,children:"No game events yet"}):g.map(u)}),s.length>d&&e.jsxs("div",{className:$.showMoreButton,onClick:i,children:["Show ",Math.min(Math.max(c,5),s.length-d)," more",s.length-d>Math.max(c,5)&&` (${s.length-d} remaining)`]})]})]})},os="_playersContainer_1b112_1",rs="_playersTitle_1b112_21",cs="_playersList_1b112_45",is="_currentPlayerGlow_1b112_53",ls="_currentUser_1b112_67",ds="_playerInfo_1b112_71",us="_playerStatus_1b112_79",ms="_disconnectedIndicator_1b112_86",_s="_playerBalanceContainer_1b112_93",ps="_readyIndicator_1b112_146",hs="_ready_1b112_146",gs="_notReady_1b112_157",xs="_sittingOut_1b112_161",ys="_emptyPlayerList_1b112_176",w={playersContainer:os,playersTitle:rs,playersList:cs,currentPlayerGlow:is,currentUser:ls,playerInfo:ds,playerStatus:us,disconnectedIndicator:ms,playerBalanceContainer:_s,readyIndicator:ps,ready:hs,notReady:gs,sittingOut:xs,emptyPlayerList:ys},js=()=>{const{gameState:t}=P(),{socket:n}=O(),o=m.useContext(ye);if(m.useEffect(()=>{if(t?.players&&o){const a=Object.values(t.players).map(l=>l.userId).filter(Boolean);a.length>0&&o.prefetchUsers(a)}},[t?.players,o]),!t||!t.players)return e.jsx("div",{className:w.emptyPlayerList,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:s,currentPlayerId:c}=t,r=n?.auth?.userId,d=t.totals||{};return!s||Object.keys(s).length===0?e.jsx("div",{className:w.emptyPlayerList,children:e.jsx("p",{children:"Waiting for players to join..."})}):e.jsxs("div",{className:w.playersContainer,children:[e.jsx("h3",{className:w.playersTitle,children:"Scoreboard"}),e.jsx("div",{className:w.playersList,children:t.seats.filter(a=>a!==null&&s[a]).map(a=>{const l=s[a],_=a===c,i=l.userId===r;return e.jsxs("div",{className:`
                  ${_?"panel":"panel-alt"}
                  ${_?w.currentPlayerGlow:""}
                  ${i?w.currentUser:""}
                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[e.jsxs("div",{className:w.playerInfo,children:[e.jsx(Pe,{userId:l.userId,size:"small",showName:!0,namePosition:"right",fontWeight:"bold"}),e.jsx("span",{className:w.playerStatus,children:l.disconnected&&e.jsx("span",{className:w.disconnectedIndicator,title:"Player disconnected",children:"âš ï¸ Disconnected"})})]}),e.jsxs("div",{className:w.playerBalanceContainer,children:[e.jsx(E,{amount:d[a]||0,size:"small"}),e.jsx("div",{className:`
                    ${w.readyIndicator} 
                    ${l.isSittingOut?w.sittingOut:l.isReady?w.ready:w.notReady}
                  `,title:l.isSittingOut?"Sitting Out":l.isReady?"Ready":"Not Ready"})]})]},a)})})]})},fs="_table_1c3a2_2",bs="_feltTexture_1c3a2_75",Cs="_sitOutOverlay_1c3a2_104",ee={table:fs,feltTexture:bs,sitOutOverlay:Cs},Ns="_aceOverlay_1apr0_2",vs="_cardGlow_1apr0_14",Bs="_countdownRing_1apr0_24",As="_countdownCircle_1apr0_34",Ts="_choiceButton_1apr0_43",ws="_highButton_1apr0_74",Is="_lowButton_1apr0_85",Ss="_timerDisplay_1apr0_96",Ps="_waitingMessage_1apr0_109",ks="_aceControlsBottom_1apr0_136",Ls="_timerContainer_1apr0_150",$s="_aceButtonContainer_1apr0_158",Es="_choicePrompt_1apr0_165",Rs="_bottomChoiceButton_1apr0_174",Os="_lowButtonBottom_1apr0_200",Ms="_highButtonBottom_1apr0_210",A={aceOverlay:Ns,cardGlow:vs,countdownRing:Bs,countdownCircle:As,choiceButton:Ts,highButton:ws,lowButton:Is,timerDisplay:Ss,waitingMessage:Ps,aceControlsBottom:ks,timerContainer:Ls,aceButtonContainer:$s,choicePrompt:Es,bottomChoiceButton:Rs,lowButtonBottom:Os,highButtonBottom:Ms},Ds="_waitingTimer_egezv_2",Gs="_timerContent_egezv_16",Fs="_playerName_egezv_23",qs="_action_egezv_29",zs="_timerBar_egezv_35",Us="_timerProgress_egezv_43",z={waitingTimer:Ds,timerContent:Gs,playerName:Fs,action:qs,timerBar:zs,timerProgress:Us},re=({playerName:t,action:n="deciding",duration:o=15e3})=>{const[s,c]=m.useState(o),r=m.useRef(Date.now());m.useEffect(()=>{r.current=Date.now(),c(o)},[o]),m.useEffect(()=>{const a=setInterval(()=>{const l=Date.now()-r.current,_=Math.max(0,o-l);c(_),_<=0&&clearInterval(a)},100);return()=>clearInterval(a)},[o]);const d=(o-s)/o*100;return e.jsxs("div",{className:`panel-game ${z.waitingTimer}`,children:[e.jsxs("div",{className:z.timerContent,children:[e.jsx("span",{className:z.playerName,children:e.jsx(W,{username:t})}),e.jsxs("span",{className:z.action,children:["is ",n,"..."]})]}),e.jsx("div",{className:z.timerBar,children:e.jsx("div",{className:z.timerProgress,style:{width:`${d}%`}})})]})},Hs="_countdownTimer_1r3bp_3",Ws="_progressRing_1r3bp_19",Ys="_progressRingBackground_1r3bp_25",Vs="_progressRingCircle_1r3bp_31",Js="_timeDisplay_1r3bp_40",J={countdownTimer:Hs,progressRing:Ws,progressRingBackground:Ys,progressRingCircle:Vs,timeDisplay:Js},ce=({duration:t=15,isActive:n=!0})=>{const[o,s]=m.useState(t),c=m.useRef(Date.now());m.useEffect(()=>{n&&(c.current=Date.now(),s(t))},[t,n]),m.useEffect(()=>{if(!n)return;const u=setInterval(()=>{const p=Math.floor((Date.now()-c.current)/1e3),f=Math.max(0,t-p);s(f),f<=0&&clearInterval(u)},100);return()=>clearInterval(u)},[t,n]);const r=o/t*100,d=()=>{const u=o/t*100;return u>66?"var(--color-ready)":u>33?"var(--accent)":"var(--secondary)"},a=50,l=3,_=(a-l*2)/2,i=_*2*Math.PI,g=i-r/100*i;return e.jsxs("div",{className:J.countdownTimer,children:[e.jsxs("svg",{className:J.progressRing,width:a,height:a,viewBox:`0 0 ${a} ${a}`,children:[e.jsx("circle",{className:J.progressRingBackground,cx:a/2,cy:a/2,r:_,strokeWidth:l}),e.jsx("circle",{className:J.progressRingCircle,cx:a/2,cy:a/2,r:_,strokeWidth:l,strokeDasharray:`${i} ${i}`,strokeDashoffset:g,style:{stroke:d()}})]}),e.jsxs("div",{className:J.timeDisplay,children:[o,"s"]})]})},Ks=({isCurrentPlayersTurn:t,bottomPosition:n=!1})=>{const{socket:o}=O(),{gameState:s}=P(),[c,r]=m.useState(null),d=l=>{c===null&&(r(l),o.emit("chooseAceValue",{isAceLow:l}))},a=s.players[s.currentPlayerId]?.name||"Current player";return n?t?e.jsxs("div",{className:`panel-game ${A.aceControlsBottom}`,children:[e.jsx("div",{className:A.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:A.aceButtonContainer,children:[e.jsx("span",{className:A.choicePrompt,children:"ACE VALUE:"}),e.jsxs("button",{type:"button",className:`${A.bottomChoiceButton} ${A.lowButtonBottom}`,onClick:()=>d(!0),disabled:c!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(ue,{size:16}),e.jsx("span",{children:"LOW"})]}),e.jsxs("button",{type:"button",className:`${A.bottomChoiceButton} ${A.highButtonBottom}`,onClick:()=>d(!1),disabled:c!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"HIGH"}),e.jsx(me,{size:16})]})]})]}):e.jsx(re,{playerName:a,action:"choosing ace value",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:A.aceOverlay,children:[e.jsx("div",{className:A.cardGlow}),t&&e.jsx("svg",{className:A.countdownRing,children:e.jsx("circle",{className:A.countdownCircle,cx:"60",cy:"87",r:"80",style:{strokeDasharray:`${countdown/15*502} 502`}})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:`${A.choiceButton} ${A.highButton}`,onClick:()=>d(!1),disabled:c!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(me,{size:20}),e.jsx("span",{children:"HIGH"})]}),e.jsxs("button",{type:"button",className:`${A.choiceButton} ${A.lowButton}`,onClick:()=>d(!0),disabled:c!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"LOW"}),e.jsx(ue,{size:20})]}),e.jsxs("div",{className:A.timerDisplay,children:[countdown,"s"]})]}):e.jsxs("div",{className:A.waitingMessage,children:[a," is choosing..."]})]})},Zs="_anteControls_1r55v_4",Qs="_anteButton_1r55v_27",Xs="_backOutButton_1r55v_27",en="_sitOutHalfWidth_1r55v_27",tn="_shimmerBorder_1r55v_105",sn="_buttonInfo_1r55v_120",nn="_buttonLabel_1r55v_127",an="_buttonAmount_1r55v_138",on="_notEnoughChipsText_1r55v_149",T={anteControls:Zs,anteButton:Qs,backOutButton:Xs,sitOutHalfWidth:en,shimmerBorder:tn,buttonInfo:sn,buttonLabel:nn,buttonAmount:an,notEnoughChipsText:on},rn="_toggleLabel_b88gt_2",cn="_toggleInput_b88gt_9",ln="_toggleSlider_b88gt_15",dn="_toggleText_b88gt_64",un="_loading_b88gt_86",K={toggleLabel:rn,toggleInput:cn,toggleSlider:ln,toggleText:dn,loading:un},mn=()=>{const{preferences:t,toggleAutoAnte:n,loading:o}=je(),{gameState:s,playerReady:c}=P(),{socket:r}=O(),d=async()=>{const a=!t.autoAnte,l=await n();if(a&&l&&c){let _=null;if(r&&r.auth?.userId&&s?.players){const g=Object.keys(s.players);for(const u of g)if(s.players[u].userId===r.auth.userId){_=s.players[u];break}}_?.isReady||c()}};return o?e.jsx("div",{className:K.loading,children:"Loading preferences..."}):e.jsxs("label",{className:K.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:t.autoAnte,onChange:d,className:K.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:K.toggleSlider}),e.jsx("span",{className:K.toggleText,children:"Auto-Ante"})]})},_n=()=>{const{gameState:t,playerReady:n,playerUnready:o}=P(),{socket:s}=O(),{user:c}=Y(),[r,d]=m.useState(!1);if(!t)return null;const{players:a,anteAmount:l,phase:_}=t;if(_!=="waiting")return null;let i=null;if(s&&s.auth?.userId&&a){const f=Object.keys(a);for(const C of f)if(a[C].userId===s.auth.userId){i=a[C];break}}else if(c&&a){const f=Object.keys(a);for(const C of f)if(a[C].userId===c.id){i=a[C],console.log("[AnteControls] Found player by user ID instead of socket ID");break}}const g=Number(i?.balance||0),u=i?.isReady,p=g>=l;return e.jsxs("div",{className:`panel-game ${T.anteControls}`,children:[u?e.jsxs("button",{type:"button",className:T.backOutButton,onClick:()=>{r||(typeof o=="function"?(d(!0),o()):console.error("playerUnready is not a function"))},disabled:r,"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:T.shimmerBorder}),e.jsx("div",{className:T.buttonInfo,children:e.jsx("span",{className:T.buttonLabel,children:"BACK OUT"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{}),e.jsxs("button",{type:"button",className:T.anteButton,onClick:()=>{r||(d(!0),n())},disabled:!p||r,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:T.shimmerBorder}),e.jsxs("div",{className:T.buttonInfo,children:[e.jsx("span",{className:T.buttonLabel,children:"ANTE"}),e.jsx("span",{className:T.buttonAmount,children:e.jsx(E,{amount:l})})]})]}),e.jsxs("button",{type:"button",className:`${T.backOutButton} ${T.sitOutHalfWidth}`,onClick:()=>{r||s&&t&&c&&(d(!0),s.emit("sitOut",{gameId:t.id,userId:s.auth?.userId||c.id}))},disabled:i?.isSittingOut||r,title:i?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:T.shimmerBorder}),e.jsx("div",{className:T.buttonInfo,children:e.jsx("span",{className:T.buttonLabel,children:"SIT OUT"})})]})]}),!u&&!p&&e.jsx("p",{className:T.notEnoughChipsText,children:"Not enough coins"})]})},pn="_bettingOverlay_1q32g_2",hn="_timerContainer_1q32g_26",gn="_betButton_1q32g_57",xn="_passButton_1q32g_84",yn="_amountButton_1q32g_96",jn="_customButton_1q32g_108",fn="_amountPill_1q32g_120",bn="_potButtonWrapper_1q32g_137",Cn="_customInput_1q32g_142",Nn="_betInput_1q32g_152",vn="_confirmButton_1q32g_172",Bn="_cancelButton_1q32g_173",S={bettingOverlay:pn,timerContainer:hn,betButton:gn,passButton:xn,amountButton:yn,customButton:jn,amountPill:fn,potButtonWrapper:bn,customInput:Cn,betInput:Nn,confirmButton:vn,cancelButton:Bn},An="_potButton_1pkys_3",Tn="_glowEffect_1pkys_37",wn="_potLabel_1pkys_53",In="_currencyPill_1pkys_63",Sn="_disabled_1pkys_102",Z={potButton:An,glowEffect:Tn,potLabel:wn,currencyPill:In,disabled:Sn},Pn=({amount:t,disabled:n,onClick:o,...s})=>e.jsxs("button",{type:"button",className:`${Z.potButton} ${n?Z.disabled:""}`,onClick:o,disabled:n,"aria-label":`Bet the pot: ${t} chips`,"data-gamepad-focusable":"true",...s,children:[e.jsx("div",{className:Z.glowEffect}),e.jsx("span",{className:Z.potLabel,children:"POT"}),e.jsx("div",{className:Z.currencyPill,children:e.jsx(E,{amount:t,size:"small"})})]}),kn=({isCurrentPlayersTurn:t})=>{const{gameState:n,placeBet:o}=P(),[s,c]=m.useState(""),[r,d]=m.useState(!1),[a,l]=m.useState(!1);if(!n||!t)return e.jsx(re,{playerName:n?.players[n.currentPlayerId]?.name||"Player",action:"betting",duration:oe.BETTING_DURATION});const{pot:_,firstCard:i,secondCard:g,players:u,currentPlayerId:p,anteAmount:f=1}=n,N=u[p]?.balance||0,k=i?.value==="A"&&g?.value==="A",L=Math.floor(k?N/3:N/2),B=Math.min(_,L),h=f,F=[1,5,10,20,50,100].filter(v=>v>=h&&v<=B).slice(-3),V=v=>{a||v>=h&&v<=B&&(l(!0),o(v),d(!1))},xe=()=>{a||(l(!0),o(0))},ie=()=>{const v=parseInt(s);!isNaN(v)&&v>=h&&v<=B&&(V(v),c(""))};return e.jsxs("div",{className:`panel-game ${S.bettingOverlay}`,children:[e.jsx("div",{className:S.timerContainer,children:e.jsx(ce,{duration:30,isActive:!0})}),r?e.jsxs("div",{className:S.customInput,children:[e.jsx(he,{title:"Enter Custom Bet",type:"number",value:s,onChange:v=>c(v.target.value),onKeyPress:v=>v.key==="Enter"&&ie(),placeholder:`${h}-${B}`,min:h,max:B,autoFocus:!0,className:S.betInput}),e.jsx("button",{type:"button",onClick:ie,className:S.confirmButton,disabled:a,"data-gamepad-focusable":"true",children:j.CHECK}),e.jsx("button",{type:"button",onClick:()=>{d(!1),c("")},className:S.cancelButton,disabled:a,"data-gamepad-focusable":"true",children:j.CROSS})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:`${S.betButton} ${S.passButton}`,onClick:xe,disabled:a,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{children:"PASS"})}),F.map(v=>e.jsx("button",{type:"button",className:`${S.betButton} ${S.amountButton}`,onClick:()=>V(v),disabled:a,"data-gamepad-focusable":"true",children:e.jsx("div",{className:S.amountPill,children:e.jsx(E,{amount:v,size:"small"})})},v)),B===_&&e.jsx("div",{className:S.potButtonWrapper,children:e.jsx(Pn,{onClick:()=>V(_),disabled:a,amount:_})}),e.jsx("button",{type:"button",className:`${S.betButton} ${S.customButton}`,onClick:()=>d(!0),disabled:a,"data-gamepad-focusable":"true",children:e.jsx("span",{children:"CUSTOM"})})]})]})},Ln="_cardsRow_12pga_1",$n="_card_12pga_1",En="_dealingPhase_12pga_74",Rn="_revealingPhase_12pga_83",On="_cardBack_12pga_109",Mn="_redCard_12pga_119",Dn="_blackCard_12pga_123",Gn="_cardCorner_12pga_127",Fn="_bottomRight_12pga_136",qn="_cardValue_12pga_144",zn="_cardSuit_12pga_150",Un="_cardCenter_12pga_155",Hn="_aceCard_12pga_212",Wn="_aceIndicator_12pga_216",Yn="_aceHigh_12pga_236",Vn="_aceLow_12pga_242",Jn="_indicatorContent_12pga_248",b={cardsRow:Ln,card:$n,dealingPhase:En,revealingPhase:Rn,cardBack:On,redCard:Mn,blackCard:Dn,cardCorner:Gn,bottomRight:Fn,cardValue:qn,cardSuit:zn,cardCenter:Un,aceCard:Hn,aceIndicator:Wn,aceHigh:Yn,aceLow:Vn,indicatorContent:Jn},Kn=()=>{const{gameState:t}=P(),[n,o]=m.useState(le());if(m.useEffect(()=>{const u=()=>{o(le())};return window.addEventListener("cardbackchange",u),()=>window.removeEventListener("cardbackchange",u)},[]),!t)return e.jsx("div",{className:b.loading,children:"Loading game state..."});const{firstCard:s,secondCard:c,thirdCard:r,phase:d}=t,a={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},l={hearts:j.HEARTS,diamonds:j.DIAMONDS,clubs:j.CLUBS,spades:j.SPADES,[j.HEARTS]:j.HEARTS,[j.DIAMONDS]:j.DIAMONDS,[j.CLUBS]:j.CLUBS,[j.SPADES]:j.SPADES},_=u=>u===j.HEARTS||u===j.DIAMONDS||u==="hearts"||u==="diamonds",i=(u,p)=>{if(!u)return e.jsx("div",{className:b.card,children:e.jsx("div",{className:b.cardBack,style:{backgroundImage:`url(${n})`}})},`empty-${p}`);const f=_(u.suit),C=u.value==="A",N=u.isAceLow,k=p===1;return e.jsxs("div",{className:`${b.card} ${f?b.redCard:b.blackCard} ${C?b.aceCard:""}`,children:[C&&!k&&e.jsx("div",{className:`${b.aceIndicator} ${N?b.aceLow:b.aceHigh} ${f?b.redCard:b.blackCard}`,children:N?e.jsxs("span",{className:b.indicatorContent,children:["LOW ",j.ARROW_DOWN]}):e.jsxs("span",{className:b.indicatorContent,children:["HIGH ",j.ARROW_UP]})}),e.jsxs("div",{className:b.cardCorner,children:[e.jsx("div",{className:b.cardValue,children:a[u.value]}),e.jsx("div",{className:b.cardSuit,children:l[u.suit]})]}),e.jsx("div",{className:b.cardCenter,children:l[u.suit]}),e.jsxs("div",{className:`${b.cardCorner} ${b.bottomRight}`,children:[e.jsx("div",{className:b.cardValue,children:a[u.value]}),e.jsx("div",{className:b.cardSuit,children:l[u.suit]})]})]},`${u.value}-${u.suit}-${p}`)},g=()=>{const u=[null,null,null];return!s&&!c&&!r?u.map((p,f)=>i(p,f)):(s&&(u[0]={...s}),c&&(u[2]={...c}),r&&(u[1]={...r}),u.map((p,f)=>i(p,f)))};return e.jsx("div",{className:`${b.cardsRow} ${d==="dealing"?b.dealingPhase:""} ${d==="revealing"?b.revealingPhase:""}`,children:g()})},Zn="_imBackOverlay_1wm7i_3",Qn="_container_1wm7i_11",Xn="_sittingOutText_1wm7i_21",ea="_imBackButton_1wm7i_30",ta="_buttonText_1wm7i_48",sa="_helpText_1wm7i_66",U={imBackOverlay:Zn,container:Qn,sittingOutText:Xn,imBackButton:ea,buttonText:ta,helpText:sa},na=({onClick:t,disabled:n=!1})=>e.jsx("div",{className:U.imBackOverlay,children:e.jsxs("div",{className:U.container,children:[e.jsx("h3",{className:U.sittingOutText,children:"You are sitting out"}),e.jsx("button",{type:"button",className:U.imBackButton,onClick:t,disabled:n,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{className:U.buttonText,children:"I'M BACK!"})}),e.jsx("p",{className:U.helpText,children:"Click to rejoin the game"})]})}),aa="_potDisplay_1o95d_2",oa="_potLabel_1o95d_18",_e={potDisplay:aa,potLabel:oa},ra=()=>{const{gameState:t}=P();if(!t)return null;const{pot:n=0}=t;return e.jsxs("div",{className:_e.potDisplay,children:[e.jsx("span",{className:_e.potLabel,children:"POT"}),e.jsx(E,{amount:n,size:"large"})]})},ca="_resultsContainer_upvys_2",ia="_messageArea_upvys_11",la="_resultBar_upvys_22",da="_playerName_upvys_66",ua="_resultText_upvys_71",ma="_winBar_upvys_78",_a="_winAmount_upvys_82",pa="_lossBar_upvys_91",ha="_lossAmount_upvys_95",ga="_penaltyBar_upvys_104",xa="_penaltyText_upvys_108",ya="_penaltyAmount_upvys_114",ja="_animationContainer_upvys_124",fa="_cautionTapeContainer_upvys_132",ba="_cautionTape_upvys_132",y={resultsContainer:ca,messageArea:ia,resultBar:la,playerName:da,resultText:ua,winBar:ma,winAmount:_a,lossBar:pa,lossAmount:ha,penaltyBar:ga,penaltyText:xa,penaltyAmount:ya,animationContainer:ja,cautionTapeContainer:fa,cautionTape:ba},Ca="_rainContainer_fxhyg_2",Na="_fallingItem_fxhyg_10",va="_emoji_fxhyg_18",Ba="_confetti_fxhyg_26",H={rainContainer:Ca,fallingItem:Na,emoji:va,confetti:Ba},te=({type:t="emoji",items:n=[],count:o=10,animationDuration:s=2.5,className:c=""})=>{const r=d=>{const a=d/o*s,l=(Math.random()-.5)*.3,_=a+l,i=Math.random()*100;switch(t){case"coin":return e.jsx("div",{className:H.fallingItem,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s}s`},children:e.jsx(ke,{size:"large"})},d);case"confetti":const g=n.length>0?n:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"];return e.jsx("div",{className:`${H.fallingItem} ${H.confetti}`,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s*1.2}s`,backgroundColor:g[Math.floor(Math.random()*g.length)]}},d);case"emoji":default:const u=n.length>0?n:["ğŸ‰"];return e.jsx("div",{className:H.fallingItem,style:{left:`${i}%`,animationDelay:`${_}s`,"--animation-duration":`${s}s`},children:e.jsx("span",{className:H.emoji,children:u[Math.floor(Math.random()*u.length)]})},d)}};return e.jsx("div",{className:`${H.rainContainer} ${c}`,children:[...Array(o)].map((d,a)=>r(a))})},Aa=({result:t,players:n})=>{if(!t)return null;const o=n[t.playerId]?.name||"Player",s=t.outcome;if(s==="win"){const a=t.winnings||0,l=Math.min(a/500,1),_=Math.floor(10+l*40),i=Math.floor(5+l*20);return e.jsxs("div",{className:y.resultsContainer,children:[e.jsxs("div",{className:y.animationContainer,children:[e.jsx(te,{type:"confetti",count:_,animationDuration:3,items:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"]}),e.jsx(te,{type:"coin",count:i,animationDuration:2})]}),e.jsx("div",{className:y.messageArea,children:e.jsxs("div",{className:`panel ${y.resultBar} ${y.winBar}`,children:[e.jsx("span",{className:y.playerName,children:e.jsx(W,{username:o})}),e.jsx("span",{className:y.resultText,children:"WINS"}),t.winnings&&t.winnings>0&&e.jsx("span",{className:y.winAmount,children:e.jsx(E,{amount:t.winnings/2,size:"small"})})]})})]})}if(s==="lose"){const a=t.betAmount||0,l=Math.min(a/500,1),_=Math.floor(8+l*22),i=["ğŸ˜¢","ğŸ˜”","ğŸ˜•","ğŸ‘","ğŸ“‰","ğŸ’”","ğŸ—‘ï¸","ğŸ¤¦â€â™‚ï¸"],g=["ğŸ˜­","ğŸ˜©","ğŸ¤¦","ğŸ’¸","ğŸ“‰","ğŸ˜¤","ğŸ˜£","ğŸ—‘ï¸","ğŸ¤¡","ğŸ’©","ğŸ™ˆ"],u=["ğŸ¤¡","ğŸ’©","ğŸ˜‚","ğŸ¤£","ğŸ—‘ï¸","ğŸ’€","â˜ ï¸","ğŸª¦","âš°ï¸","ğŸ¤ª","ğŸ˜µâ€ğŸ’«","ğŸ™ƒ","ğŸ¤®"];let p;return a<50?p=i:a<200?p=g:p=u,e.jsxs("div",{className:y.resultsContainer,children:[e.jsx("div",{className:y.animationContainer,children:e.jsx(te,{type:"emoji",items:p,count:_,animationDuration:2.5})}),e.jsx("div",{className:y.messageArea,children:e.jsxs("div",{className:`panel ${y.resultBar} ${y.lossBar}`,children:[e.jsx("span",{className:y.playerName,children:e.jsx(W,{username:o})}),e.jsx("span",{className:y.resultText,children:"LOST"}),t.betAmount&&t.betAmount>0&&e.jsx("span",{className:y.lossAmount,children:e.jsx(E,{amount:t.betAmount,size:"small"})})]})})]})}const c=(t.betAmount||0)*(t.isTripleAceTie?3:2),r=t.isTripleAceTie?15:8,d=t.isTripleAceTie?["ğŸ’€","â˜ ï¸","âš ï¸","ğŸš¨","â›”","ğŸ’¥","ğŸ”¥","ğŸ˜±","ğŸ°","ğŸ’¸"]:["âš ï¸","ğŸš¨","â›”","ğŸ”´","âŒ","ğŸ’¥","ğŸ¯","ğŸ²"];return e.jsxs("div",{className:y.resultsContainer,children:[e.jsxs("div",{className:y.cautionTapeContainer,children:[e.jsxs("div",{className:y.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]}),e.jsxs("div",{className:y.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]})]}),e.jsx("div",{className:y.animationContainer,children:e.jsx(te,{type:"emoji",items:d,count:r,animationDuration:t.isTripleAceTie?2:3})}),e.jsx("div",{className:y.messageArea,children:e.jsxs("div",{className:`panel ${y.resultBar} ${y.penaltyBar}`,children:[e.jsx("span",{className:y.playerName,children:e.jsx(W,{username:o})}),e.jsx("span",{className:y.resultText,children:t.isTripleAceTie?"TRIPLE":""}),e.jsxs("span",{className:y.penaltyText,children:[t.isTripleAceTie?"3x":"2x"," PENALTY"]}),e.jsx("span",{className:y.penaltyAmount,children:e.jsx(E,{amount:c,size:"small"})})]})})]})},Ta="_revealingOverlay_hpopv_2",wa="_revealingContent_hpopv_26",Ia="_playerName_hpopv_35",Sa="_actionText_hpopv_43",Pa="_betAmount_hpopv_51",Q={revealingOverlay:Ta,revealingContent:wa,playerName:Ia,actionText:Sa,betAmount:Pa},ka=({playerName:t,betAmount:n})=>!t||!n?null:e.jsx("div",{className:`panel-game ${Q.revealingOverlay}`,children:e.jsxs("div",{className:Q.revealingContent,children:[e.jsx("span",{className:Q.playerName,children:e.jsx(W,{username:t})}),e.jsx("span",{className:Q.actionText,children:"bets"}),e.jsx("div",{className:Q.betAmount,children:e.jsx(E,{amount:n,size:"small"})})]})}),La="_secondChanceOverlay_1sq4x_2",$a="_bridge_1sq4x_13",Ea="_bridgeLine_1sq4x_20",Ra="_matchBadge_1sq4x_57",Oa="_matchText_1sq4x_69",Ma="_choiceContainer_1sq4x_78",Da="_timer_1sq4x_87",Ga="_buttons_1sq4x_106",Fa="_choiceButton_1sq4x_112",qa="_anteButton_1sq4x_139",za="_passButton_1sq4x_151",Ua="_buttonIcon_1sq4x_162",Ha="_buttonText_1sq4x_168",Wa="_buttonAmount_1sq4x_174",Ya="_waitingContainer_1sq4x_180",Va="_waitingMessage_1sq4x_187",Ja="_secondChanceBottom_1sq4x_229",Ka="_timerContainer_1sq4x_243",Za="_bottomButtonContainer_1sq4x_251",Qa="_choicePrompt_1sq4x_258",Xa="_bottomChoiceButton_1sq4x_267",eo="_anteButtonBottom_1sq4x_293",to="_passButtonBottom_1sq4x_302",x={secondChanceOverlay:La,bridge:$a,bridgeLine:Ea,matchBadge:Ra,matchText:Oa,choiceContainer:Ma,timer:Da,buttons:Ga,choiceButton:Fa,anteButton:qa,passButton:za,buttonIcon:Ua,buttonText:Ha,buttonAmount:Wa,waitingContainer:Ya,waitingMessage:Va,secondChanceBottom:Ja,timerContainer:Ka,bottomButtonContainer:Za,choicePrompt:Qa,bottomChoiceButton:Xa,anteButtonBottom:eo,passButtonBottom:to},pe=({isCurrentPlayersTurn:t,bottomPosition:n=!1,indicatorOnly:o=!1})=>{const{gameState:s}=P(),{socket:c}=O(),[r,d]=m.useState(null),{anteAmount:a=1,players:l,currentPlayerId:_}=s,g=l[_]?.name||"Player",u=p=>{r===null&&c&&(d(p),c.emit("secondChance",{anteAgain:p}))};return o?null:n?t?e.jsxs("div",{className:`panel-game ${x.secondChanceBottom}`,children:[e.jsx("div",{className:x.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:x.bottomButtonContainer,children:[e.jsx("span",{className:x.choicePrompt,children:"SECOND CHANCE:"}),e.jsxs("button",{type:"button",className:`${x.bottomChoiceButton} ${x.anteButtonBottom}`,onClick:()=>u(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:x.buttonIcon,children:j.ROTATE}),e.jsx("span",{children:"ANTE AGAIN"}),e.jsx(E,{amount:a,size:"small"})]}),e.jsxs("button",{type:"button",className:`${x.bottomChoiceButton} ${x.passButtonBottom}`,onClick:()=>u(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"PASS"}),e.jsx("span",{className:x.buttonIcon,children:j.ARROW_RIGHT})]})]})]}):e.jsx(re,{playerName:g,action:"deciding on second chance",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:x.secondChanceOverlay,children:[e.jsxs("div",{className:x.bridge,children:[e.jsx("div",{className:x.bridgeLine}),e.jsx("div",{className:x.matchBadge,children:e.jsx("span",{className:x.matchText,children:"MATCH!"})})]}),t?e.jsxs("div",{className:x.choiceContainer,children:[e.jsxs("div",{className:x.timer,children:[countdown,"s"]}),e.jsxs("div",{className:x.buttons,children:[e.jsxs("button",{type:"button",className:`${x.choiceButton} ${x.anteButton}`,onClick:()=>u(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:x.buttonIcon,children:j.ROTATE}),e.jsx("span",{className:x.buttonText,children:"ANTE AGAIN"}),e.jsx("span",{className:x.buttonAmount,children:e.jsx(E,{amount:a,size:"small"})})]}),e.jsxs("button",{type:"button",className:`${x.choiceButton} ${x.passButton}`,onClick:()=>u(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{className:x.buttonText,children:"PASS"}),e.jsx("span",{className:x.buttonIcon,children:j.ARROW_RIGHT})]})]})]}):e.jsx("div",{className:x.waitingContainer,children:e.jsxs("div",{className:x.waitingMessage,children:[g," is deciding..."]})})]})},so=()=>{const{gameState:t}=P(),{socket:n}=O(),{user:o}=Y(),[s,c]=m.useState(!1);if(!t)return null;const{phase:r,currentPlayerId:d,players:a,waitingForAceDecision:l,waitingForSecondChance:_,firstCard:i,secondCard:g,result:u}=t,p=o?.id,f=a&&p?a[p]:null,C=p===d,N=f?.isSittingOut||!1,k=()=>{s||n&&t.id&&(c(!0),n.emit("imBack",{gameId:t.id}))};return e.jsxs("div",{className:ee.table,children:[e.jsx("div",{className:ee.feltTexture}),e.jsx(ra,{}),e.jsx(Kn,{}),l&&e.jsx("div",{className:ee.aceGlowEffect}),_&&e.jsx(pe,{firstCard:i,secondCard:g,isCurrentPlayersTurn:C,indicatorOnly:!0}),!N&&e.jsxs(e.Fragment,{children:[r==="betting"&&!l&&!_&&e.jsx(kn,{isCurrentPlayersTurn:C}),l&&e.jsx(Ks,{card:i,isCurrentPlayersTurn:C,bottomPosition:!0}),_&&e.jsx(pe,{firstCard:i,secondCard:g,isCurrentPlayersTurn:C,bottomPosition:!0})]}),r==="revealing"&&!N&&e.jsx(ka,{playerName:a[d]?.name||"Player",betAmount:a[d]?.currentBet||0}),r==="results"&&u&&!N&&e.jsx(Aa,{result:u,players:a}),r==="waiting"&&!N&&e.jsx(_n,{}),N&&e.jsx("div",{className:ee.sitOutOverlay,children:e.jsx(na,{onClick:k,disabled:s})})]})},no=({onReturnToLobby:t})=>{const[n,o]=m.useState(!1),{gameState:s,error:c,clearError:r}=P(),{user:d}=Y(),a=!d?.subscription?.isPremium;Re(!0),m.useEffect(()=>{if(c){const _=setTimeout(()=>{r()},1e4);return()=>clearTimeout(_)}},[c,r]);const l=()=>{t&&t()};return s?e.jsxs("div",{className:`screen app-gradient-bg ${G.gameContainer} ${a?G.withAds:""}`,children:[e.jsxs("div",{className:`${G.gameScreen} mobile-scale-content`,children:[e.jsx(vt,{handleLeaveGame:l,onModalStateChange:o}),c&&e.jsx("div",{className:G.errorContainer,children:e.jsx("p",{className:G.errorText,children:c})}),e.jsx(so,{}),e.jsxs("div",{className:G.gameBottomSection,children:[e.jsx(js,{}),e.jsx(as,{})]})]}),!n&&e.jsx(lt,{})]}):e.jsx("div",{className:G.loadingContainer,children:e.jsx("p",{children:"Loading game state..."})})},ao=({loading:t,error:n,isPasswordModalOpen:o,handlePasswordCancel:s,handlePasswordSubmit:c,handleReturnToLobby:r,gameId:d})=>{const{gameState:a}=P(),{socket:l}=O();return m.useEffect(()=>{const _=i=>{const g=l?.auth?.userId;if((g&&a?.players?a.players[g]:null)?.isReady||!1)return i.preventDefault(),i.returnValue="You have money in the pot! Are you sure you want to leave?",i.returnValue};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[a,l]),e.jsxs(e.Fragment,{children:[e.jsx(Je,{isOpen:o,onClose:s,onSubmit:c,gameId:d}),t&&e.jsx(fe,{message:`Joining game ${d}...`}),n&&!t&&!o&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:n}),e.jsx("button",{type:"button",onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!t&&!n&&a&&e.jsx(no,{onReturnToLobby:r})]})},_o=()=>{const{gameId:t}=be(),n=Ce(),{socket:o,isConnected:s}=O(),[c,r]=m.useState(!0),[d,a]=m.useState(null),[l,_]=m.useState(!1),i=m.useRef(!1),{shouldShowAd:g,hideAd:u}=Le(),p=m.useCallback(()=>{o&&s&&t&&(ne.play("ui.leave"),o.emit("leaveGame",{gameId:t}),n("/",{state:{fromGame:!0}}))},[o,s,t,n]),f=m.useCallback(N=>{_(!1),o&&t&&N&&(a(null),o.emit("joinGame",{gameId:t,password:N}),r(!0))},[o,t]),C=m.useCallback(()=>{_(!1),n("/")},[n]);return m.useEffect(()=>{a(null),_(!1),r(!0)},[t]),m.useEffect(()=>{if(!o)return;const N=L=>{L&&L.game&&L.game.id===t&&(ne.play("ui.join"),r(!1),a(null),_(!1))},k=L=>{const B=L.message||"An unknown error occurred";B==="Password required"?(console.error(L),_(!0),r(!1),a(null)):B==="Invalid password"?(console.error(L),a("Invalid password."),_(!0),r(!1)):B==="Game not found"?n("/"):B==="Game is full"?(a(B),r(!1),_(!1),setTimeout(()=>n("/"),3e3)):(a(B),r(!1),_(!1))};return o.on("gameJoined",N),o.on("error",k),()=>{o.off("gameJoined",N),o.off("error",k)}},[o,t,n]),m.useEffect(()=>{o&&t&&!i.current&&(i.current=!0,r(!0),a(null),_(!1),o.emit("joinGame",{gameId:t}))},[o,t]),e.jsxs(Fe,{gameId:t,children:[e.jsx(ao,{loading:c,error:d,isPasswordModalOpen:l,handlePasswordCancel:C,handlePasswordSubmit:f,handleReturnToLobby:p,gameId:t}),g&&e.jsx($e,{onClose:u}),e.jsx(Ee,{}),e.jsx(de,{position:"left",minWidth:1200}),e.jsx(de,{position:"right",minWidth:1200})]})};export{_o as default};
