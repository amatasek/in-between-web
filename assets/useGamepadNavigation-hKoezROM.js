import{ah as N,ai as z,aj as W,E as F,F as O,G,h as U,K as q,O as H,ak as Y,R as _,T as j,a as X,al as K,S as V,am as Z,Q as J,b as Q,A as $,c as ee,d as te,f as se,L as ne,g as ae,an as oe,e as re,M as ie,N as le,ao as ce,i as ue,J as de,l as fe,I as me,H as ge,ap as he,aq as pe,ar as be,r as ve,j as we,s as Ae,k as Ee,m as ke,o as Ce,p as ye,as as Ie,q as Me,t as Se,u as Pe,v as Re,D as Te,C as xe,at as Le,w as De,x as Be,y as Ne,z as ze,B as We}from"./index-DWcvftUn.js";import{r as m}from"./vendor-KCSzRvRf.js";const Ge=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:N,AuthCredential:z,EmailAuthCredential:W,EmailAuthProvider:F,FacebookAuthProvider:O,GithubAuthProvider:G,GoogleAuthProvider:U,OAuthCredential:q,OAuthProvider:H,PhoneAuthCredential:Y,RecaptchaVerifier:_,TwitterAuthProvider:j,applyActionCode:X,beforeAuthStateChanged:K,browserLocalPersistence:V,browserPopupRedirectResolver:Z,browserSessionPersistence:J,confirmPasswordReset:Q,connectAuthEmulator:$,createUserWithEmailAndPassword:ee,deleteUser:te,fetchSignInMethodsForEmail:se,getAdditionalUserInfo:ne,getAuth:ae,getIdTokenResult:oe,getRedirectResult:re,inMemoryPersistence:ie,indexedDBLocalPersistence:le,initializeAuth:ce,isSignInWithEmailLink:ue,linkWithCredential:de,linkWithPhoneNumber:fe,linkWithPopup:me,linkWithRedirect:ge,onAuthStateChanged:he,onIdTokenChanged:pe,prodErrorMap:be,reload:ve,revokeAccessToken:we,sendEmailVerification:Ae,sendPasswordResetEmail:Ee,sendSignInLinkToEmail:ke,setPersistence:Ce,signInAnonymously:ye,signInWithCredential:Ie,signInWithCustomToken:Me,signInWithEmailAndPassword:Se,signInWithEmailLink:Pe,signInWithPhoneNumber:Re,signInWithPopup:Te,signInWithRedirect:xe,signOut:Le,unlink:De,updateEmail:Be,updatePassword:Ne,updateProfile:ze,verifyBeforeUpdateEmail:We},Symbol.toStringTag,{value:"Module"})),Ue=(p=!0)=>{const[A,k]=m.useState(null),[i,L]=m.useState([]),[D,B]=m.useState(!1),[M,S]=m.useState(!1),T=m.useRef(0),P=m.useRef({}),E=m.useCallback(()=>{if(!p)return;const f=Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).filter(a=>{const b=a.getBoundingClientRect();if(b.width===0&&b.height===0){const t=a.closest("label")||a.closest('[class*="toggle"]')||a.parentElement;if(t){const l=t.getBoundingClientRect();if(l.width===0||l.height===0)return!1}else return!1}const d=document.querySelectorAll('[class*="modal"], [class*="Modal"], [role="dialog"], [class*="overlay"]');if(d.length>0){const t=Array.from(d).filter(l=>{const c=l.className;return c.includes("modal")||c.includes("Modal")||l.getAttribute("role")==="dialog"});if(t.length>0){const c=t.sort((n,v)=>{let h=parseInt(window.getComputedStyle(n).zIndex)||0,o=parseInt(window.getComputedStyle(v).zIndex)||0;if(h===0){const e=n.parentElement;e&&e.classList.toString().includes("overlay")&&(h=parseInt(window.getComputedStyle(e).zIndex)||0)}if(o===0){const e=v.parentElement;e&&e.classList.toString().includes("overlay")&&(o=parseInt(window.getComputedStyle(e).zIndex)||0)}return o-h})[0];return c&&c.contains(a)}}return!0});L(a=>a.length!==f.length||!a.every((b,d)=>b===f[d])?f:a)},[p]),g=m.useCallback(s=>{const f=Date.now();if(f-T.current<150||(T.current=f,!i.length))return;S(!0);const a=document.activeElement;let b=A;a&&a.getAttribute("data-gamepad-focusable")==="true"&&i.includes(a)&&(b=a,k(a));const d=i.findIndex(n=>n===b);if(d===-1||!b){const n=i[0];k(n),n.focus();return}const t=i[d];if(t?.getAttribute("data-gamepad-scrollable")==="true"&&(s==="up"||s==="down")){const v=t.scrollTop<=0,h=t.scrollTop>=t.scrollHeight-t.clientHeight;if(s==="up"&&!v){t.scrollTop=Math.max(0,t.scrollTop-50);return}if(s==="down"&&!h){t.scrollTop=Math.min(t.scrollHeight-t.clientHeight,t.scrollTop+50);return}}let c=null;if(s==="up"||s==="down"){let n=t?.getBoundingClientRect();if(!n)return;if(n.width===0&&n.height===0){const o=t.closest("label"),e=t.closest('[class*="toggle"]')||t.closest('[class*="Toggle"]'),r=o||e||t.parentElement;r&&(n=r.getBoundingClientRect())}const v=n.left+n.width/2,h=i.map((o,e)=>({el:o,index:e,rect:o.getBoundingClientRect()})).filter(({rect:o,index:e})=>e===d?!1:s==="up"?o.bottom<=n.top+20:o.top>=n.bottom-20);if(h.length>0)c=h.map(e=>({...e,horizontalDistance:Math.abs(e.rect.left+e.rect.width/2-v),verticalDistance:s==="up"?n.top-e.rect.bottom:e.rect.top-n.bottom})).sort((e,r)=>{const u=e.horizontalDistance-r.horizontalDistance;if(Math.abs(u)>100)return u;const w=e.verticalDistance-r.verticalDistance;return Math.abs(w)>10?w:u})[0].el;else{const o=i.filter((e,r)=>r!==d).map(e=>({el:e,rect:e.getBoundingClientRect()}));if(o.length>0){const e=s==="up"?0:window.innerHeight;c=o.reduce((u,w)=>{const y=Math.abs(w.rect.top-e),I=Math.abs(u.rect.top-e);return y<I?w:u}).el}else s==="up"?c=i[i.length-1]:c=i[0]}}else{const n=t?.getBoundingClientRect();if(!n)s==="left"?c=d>0?i[d-1]:i[i.length-1]:c=d<i.length-1?i[d+1]:i[0];else{const v=n.top+n.height/2,h=Math.max(n.height/2,20),o=i.map((r,u)=>({el:r,index:u,rect:r.getBoundingClientRect()})).filter(({rect:r})=>{const u=r.top+r.height/2;return Math.abs(u-v)<=h}).sort((r,u)=>r.rect.left-u.rect.left),e=o.findIndex(({el:r})=>r===t);e!==-1&&o.length>1?s==="left"?c=e>0?o[e-1].el:null:c=e<o.length-1?o[e+1].el:null:c=null}}c&&(k(c),c.focus())},[i,A]),C=m.useCallback(()=>{const s=document.activeElement?.getAttribute("data-gamepad-focusable")==="true"?document.activeElement:A;s&&(S(!0),s.click())},[A]);return m.useEffect(()=>{if(!p)return;const s=f=>{if(!(document.activeElement&&(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")&&f.key==="Enter"))switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"," "].includes(f.key)&&f.preventDefault(),f.key){case"ArrowUp":g("up");break;case"ArrowDown":g("down");break;case"ArrowLeft":g("left");break;case"ArrowRight":g("right");break;case"Enter":case" ":C();break}};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[g,C,p]),m.useEffect(()=>{if(!p)return;let s;const f=()=>{const a=navigator.getGamepads();let b=!1;for(let d=0;d<a.length;d++){const t=a[d];if(t&&t.connected){b=!0,P.current[d]||(P.current[d]={});const l=P.current[d],c=t.buttons[12]?.pressed,n=t.buttons[13]?.pressed,v=t.buttons[14]?.pressed,h=t.buttons[15]?.pressed,o=t.buttons[0]?.pressed;c&&!l.up&&g("up"),n&&!l.down&&g("down"),v&&!l.left&&g("left"),h&&!l.right&&g("right"),o&&!l.a&&C(),l.up=c,l.down=n,l.left=v,l.right=h,l.a=o;const e=t.axes[0]||0,r=t.axes[1]||0,u=.3;!l.stickMoved&&(Math.abs(e)>u||Math.abs(r)>u)?(Math.abs(e)>Math.abs(r)?e>u?g("right"):e<-u&&g("left"):r>u?g("down"):r<-u&&g("up"),l.stickMoved=!0):Math.abs(e)<=u&&Math.abs(r)<=u&&(l.stickMoved=!1);const w=t.axes[2]||0,y=t.axes[3]||0,I=.2,x=8;if(Math.abs(y)>I){const R=y*x;window.scrollBy(0,R)}if(Math.abs(w)>I){const R=w*x;window.scrollBy(R,0)}}}B(b),s=requestAnimationFrame(f)};return f(),()=>{s&&cancelAnimationFrame(s)}},[g,C,p]),m.useEffect(()=>{if(!p)return;const s=()=>{S(!1)};return document.addEventListener("mousemove",s),()=>document.removeEventListener("mousemove",s)},[p]),m.useEffect(()=>(M?document.body.classList.add("gamepad-navigation-active"):document.body.classList.remove("gamepad-navigation-active"),()=>{document.body.classList.remove("gamepad-navigation-active")}),[M]),m.useEffect(()=>{if(i.length>0&&!A){const s=i[0];k(s)}},[i,A]),m.useEffect(()=>{if(!p)return;const s=f=>{const a=f.target;a&&a.getAttribute("data-gamepad-focusable")==="true"&&(E(),setTimeout(()=>{Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).includes(a)&&k(a)},0))};return document.addEventListener("focus",s,!0),()=>{document.removeEventListener("focus",s,!0)}},[p,E]),m.useEffect(()=>{if(!p)return;const s=new MutationObserver(E);return s.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-gamepad-focusable","disabled"]}),E(),()=>s.disconnect()},[E,p]),{focusedElement:A,isGamepadConnected:D,showFocusIndicator:M,registerNavigableElements:E}};export{Ge as i,Ue as u};
