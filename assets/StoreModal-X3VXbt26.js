import{U as e,a7 as pe,a4 as ge,a8 as E,a9 as J,aa as he,V as X,$ as Y,ab as ne,ac as ue,ad as xe,ae as ye,af as fe}from"./index-DCTCU-m8.js";import{r as d,a as be}from"./vendor-KCSzRvRf.js";const _e="_overlay_12fs3_1",ve="_modal_12fs3_17",je="_header_12fs3_38",we="_closeButton_12fs3_55",ke="_sectionHeader_12fs3_74",Ne="_settingDescription_12fs3_90",Ce="_errorMessage_12fs3_112",Se="_content_12fs3_122",Pe="_footer_12fs3_151",I={overlay:_e,modal:ve,header:je,closeButton:we,sectionHeader:ke,settingDescription:Ne,errorMessage:Ce,content:Se,footer:Pe};let oe=0;function D({title:s,onClose:t,children:r,footer:a,headerButtons:n,className:m="",overlayStyle:i,...p}){d.useEffect(()=>(++oe===1&&document.body.classList.add("modal-open"),()=>{--oe===0&&document.body.classList.remove("modal-open")}),[]);const h=e.jsx("div",{className:I.overlay,style:i,onClick:t,children:e.jsxs("div",{className:`${I.modal} ${m}`,onClick:k=>k.stopPropagation(),...p,children:[s&&e.jsxs("div",{className:I.header,children:[e.jsx("h2",{children:s}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[n,e.jsx("button",{className:I.closeButton,onClick:t,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"√ó"})]})]}),e.jsx("div",{className:I.content,children:r}),a&&e.jsx("div",{className:I.footer,children:a})]})});return be.createPortal(h,document.body)}const Ie="_toggleContainer_1gama_1",Ae="_toggleInput_1gama_5",$e="_toggleLabel_1gama_11",Te="_toggleSlider_1gama_17",Be="_toggleText_1gama_65",W={toggleContainer:Ie,toggleInput:Ae,toggleLabel:$e,toggleSlider:Te,toggleText:Be},le=({isChecked:s,onChange:t,label:r})=>e.jsx("div",{className:W.toggleContainer,children:e.jsxs("label",{className:W.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:s,onChange:t,className:W.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:W.toggleSlider}),r&&e.jsx("span",{className:W.toggleText,children:r})]})}),xs=({type:s="text",title:t="",...r})=>{const a=d.useRef(null);let n=null;try{n=pe()?.enhanceInput}catch{console.warn("VirtualKeyboardProvider not found - GamepadInput working as regular input")}return d.useEffect(()=>{if(a.current&&n)return n(a.current,s,t)},[n,s,t]),e.jsx("input",{ref:a,type:s,"data-gamepad-focusable":"true",...r})},Le="_userAvatarContainer_32qpa_1",Me="_containerRight_32qpa_6",Ue="_containerBelow_32qpa_11",Ee="_avatar_32qpa_16",De="_small_32qpa_34",Re="_medium_32qpa_40",ze="_large_32qpa_46",Fe="_avatarImageContainer_32qpa_52",He="_avatarImage_32qpa_52",Ge="_initialsPlaceholder_32qpa_70",Oe="_userInfo_32qpa_84",qe="_username_32qpa_92",We="_userTitle_32qpa_101",Ve="_playerCard_32qpa_120",Xe="_cardAppear_32qpa_1",Ye="_playerCardAvatar_32qpa_149",Ke="_playerCardImage_32qpa_158",Ze="_playerCardInitials_32qpa_166",Je="_playerCardInfo_32qpa_180",Qe="_playerCardUsername_32qpa_189",ea="_playerCardTitle_32qpa_197",aa="_playerCardXP_32qpa_205",ta="_playerCardLevelXP_32qpa_213",sa="_separator_32qpa_221",ra="_xpValue_32qpa_225",na="_loading_32qpa_230",oa="_shimmerBg_32qpa_1",la="_avatarLoader_32qpa_236",ia="_shimmerOverlay_32qpa_1",ca="_skeletonUsername_32qpa_245",da="_skeletonTitle_32qpa_255",ua="_shimmerText_32qpa_1",v={userAvatarContainer:Le,containerRight:Me,containerBelow:Ue,avatar:Ee,small:De,medium:Re,large:ze,avatarImageContainer:Fe,avatarImage:He,initialsPlaceholder:Ge,userInfo:Oe,username:qe,userTitle:We,playerCard:Ve,cardAppear:Xe,playerCardAvatar:Ye,playerCardImage:Ke,playerCardInitials:Ze,playerCardInfo:Je,playerCardUsername:Qe,playerCardTitle:ea,playerCardXP:aa,playerCardLevelXP:ta,separator:sa,xpValue:ra,loading:na,shimmerBg:oa,avatarLoader:la,shimmerOverlay:ia,skeletonUsername:ca,skeletonTitle:da,shimmerText:ua},ma=({userId:s,size:t="medium",showName:r=!0,namePosition:a="right",className:n="",showTitle:m=!0,fontWeight:i="normal"})=>{const[p,h]=d.useState(!1),k=ge(s);if(!s)return null;if(!k){const T=v[t]||v.medium,M=r?v[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"";return e.jsxs("div",{className:`${v.userAvatarContainer} ${M} ${n}`,children:[e.jsx("div",{className:`${v.avatar} ${T} ${v.loading}`,children:e.jsx("div",{className:v.avatarLoader})}),r&&e.jsxs("div",{className:v.userInfo,children:[e.jsx("div",{className:v.skeletonUsername}),m&&e.jsx("div",{className:v.skeletonTitle})]})]})}const{username:x,profileImg:o,title:g,xp:y,level:l}=k,f=E(x),b=pa(f||"Unknown"),S=v[t]||v.medium,P=r?v[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"",c="https://api.in-between.live";let C=null;if(o)if(o.startsWith("http"))C=o;else if(o.includes("/uploads/")){const T=o.split("/").pop();C=`${c}/files/images/${T}`}else C=`${c}${o}`;return e.jsxs("div",{className:`${v.userAvatarContainer} ${P} ${n}`,children:[e.jsxs("div",{className:`${v.avatar} ${S}`,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{className:v.avatarImageContainer,children:[C?e.jsx("img",{src:C,alt:`${x}'s avatar`,className:v.avatarImage,onError:T=>{console.error(`Failed to load profile image for ${x}:`,T),T.target.style.display="none",T.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:v.initialsPlaceholder,style:{display:C?"none":"flex"},children:b})]}),p&&e.jsxs("div",{className:v.playerCard,children:[e.jsx("div",{className:v.playerCardAvatar,children:C?e.jsx("img",{src:C,alt:`${x}'s avatar`,className:v.playerCardImage}):e.jsx("div",{className:v.playerCardInitials,children:b})}),e.jsxs("div",{className:v.playerCardInfo,children:[e.jsx("div",{className:v.playerCardUsername,children:e.jsx(J,{username:x||"Unknown",showDiscriminator:!0})}),g&&e.jsx("div",{className:v.playerCardTitle,children:g}),l!==void 0&&y!==void 0&&e.jsxs("div",{className:v.playerCardLevelXP,children:["Level ",l," ",e.jsx("span",{className:v.separator,children:"‚Ä¢"})," ",e.jsxs("span",{className:v.xpValue,children:[ga(y)," XP"]})]})]})]})]}),r&&e.jsxs("div",{className:v.userInfo,children:[e.jsx("div",{className:v.username,style:{fontWeight:i},children:f||"Unknown"}),m&&g&&e.jsx("div",{className:v.userTitle,children:g})]})]})},pa=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),ga=s=>s>=1e6?`${(s/1e6).toFixed(1).replace(/\.0$/,"")}M`:s>=1e3?`${(s/1e3).toFixed(1).replace(/\.0$/,"")}K`:s.toString(),ha="_iconButton_3xp6j_1",xa="_danger_3xp6j_31",ya="_preferences_3xp6j_44",fa="_stats_3xp6j_57",ba="_store_3xp6j_70",ie={iconButton:ha,default:"_default_3xp6j_18",danger:xa,preferences:ya,stats:fa,store:ba},K=({icon:s,title:t,onClick:r,variant:a="default",className:n="",...m})=>e.jsx("button",{className:`${ie.iconButton} ${ie[a]} ${n}`,onClick:r,title:t,type:"button",...m,children:s}),_a=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"}),e.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"})]}),va="_currencyAmount_rl73n_1",ja="_pillBackground_rl73n_17",wa="_darkBackground_rl73n_28",ae={currencyAmount:va,pillBackground:ja,darkBackground:wa},ka="_coinIcon_isycs_1",Na="_small_isycs_13",Ca="_medium_isycs_17",Sa="_large_isycs_21",ce={coinIcon:ka,small:Na,medium:Ca,large:Sa},Pa=({size:s="small",className:t=""})=>{const r={small:15,medium:19,large:24},a=r[s]||r.small,n=d.useMemo(()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`,[]),m=d.useMemo(()=>`goldShine-${Math.random().toString(36).substr(2,9)}`,[]);return e.jsx("span",{className:`${ce.coinIcon} ${ce[s]} ${t}`,children:e.jsxs("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:m,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${n})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${m})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},H=({amount:s=0,size:t,background:r,customClass:a})=>{const n=[ae.currencyAmount,r==="dark"?ae.darkBackground:"",r==="pill"?ae.pillBackground:"",a||""].filter(Boolean).join(" "),m=typeof s=="number"?s:0;return e.jsxs("span",{className:n,children:[e.jsx(Pa,{size:t}),e.jsx("span",{children:m.toLocaleString()})]})},Ia="_noDataMessage_13uuv_2",Aa="_statsGrid_13uuv_9",$a="_statLabel_13uuv_42",Ta="_statValue_13uuv_49",Ba="_statSuffix_13uuv_57",V={noDataMessage:Ia,statsGrid:Aa,statLabel:$a,statValue:Ta,statSuffix:Ba},La=({gameData:s})=>{const t=s.gameTransactions,r=s.players,a={};Object.entries(r).forEach(([i,p])=>{a[i]=p.name}),t.forEach(i=>{i.playerId&&!a[i.playerId]&&(a[i.playerId]=i.playerName||"Unknown Player")});const n=d.useMemo(()=>{if(t.length===0)return[];const i=u=>u.toLocaleString(),p={};t.forEach(u=>{p[u.playerId]||(p[u.playerId]=[]),p[u.playerId].push(u)});const h=s.round||1,k=s.deckCount||1,x=t.filter(u=>u.transactionType==="Ante").reduce((u,N)=>u+Math.abs(N.amount),0),o=t.filter(u=>u.transactionType==="Bet").reduce((u,N)=>u+Math.abs(N.amount),0),g=t.filter(u=>u.transactionType==="Bet"),y=g.length>0?g.reduce((u,N)=>Math.abs(N.amount)>Math.abs(u.amount)?N:u,g[0]):null,l=t.reduce((u,N)=>N.potAmount>u?N.potAmount:u,0),f=t.filter(u=>u.transactionType==="2x"||u.transactionType==="3x"),b=f.reduce((u,N)=>u+Math.abs(N.amount),0),S={};g.forEach(u=>{S[u.playerId]=(S[u.playerId]||0)+1});let P=null,c=0;Object.entries(S).forEach(([u,N])=>{N>c&&(c=N,P=u)});const C={};g.forEach(u=>{C[u.playerId]||(C[u.playerId]={total:0,count:0}),C[u.playerId].total+=Math.abs(u.amount),C[u.playerId].count+=1});let T=null,M=0;Object.entries(C).forEach(([u,N])=>{const re=N.total/N.count;re>M&&(M=re,T=u)});const G={};t.filter(u=>u.transactionType==="Win").forEach(u=>{G[u.playerId]=(G[u.playerId]||0)+1});let z=null,R=0;Object.entries(G).forEach(([u,N])=>{N>R&&(R=N,z=u)});const O={};f.forEach(u=>{O[u.playerId]=(O[u.playerId]||0)+1});let F=null,q=0;Object.entries(O).forEach(([u,N])=>{N>q&&(q=N,F=u)});const j=s.totals||{};let _=null,L=0,Z=null,ee=0;return Object.entries(j).forEach(([u,N])=>{N>L&&(L=N,_=u),N<ee&&(ee=N,Z=u)}),[{key:"totalDecks",label:"Total Decks",value:k,type:"number"},{key:"totalRounds",label:"Total Rounds",value:h,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:g.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:x,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:o,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:l,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:y?Math.abs(y.amount):0,type:"currency",suffix:y?` by ${E(y.playerName)}`:""},{key:"biggestWinner",label:"Biggest Winner",value:_?E(a[_]||"Unknown Player"):"N/A",type:"text",suffix:_?` (+${i(L)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:Z?E(a[Z]||"Unknown Player"):"N/A",type:"text",suffix:Z?` (${i(ee)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:P?E(a[P]||"Unknown Player"):"N/A",type:"text",suffix:P?` (${i(c)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:T?E(a[T]||"Unknown Player"):"N/A",type:"text",suffix:T?` (avg: ${i(Math.round(M))})`:""},{key:"mostWinning",label:"Most Winning Player",value:z?E(a[z]||"Unknown Player"):"N/A",type:"text",suffix:z?` (${i(R)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:f.length,type:"number",suffix:f.length>0?` (${i(b)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:F?E(a[F]||"Unknown Player"):"N/A",type:"text",suffix:F?` (${i(q)} penalties)`:""}]},[t,a]),m=(i,p)=>i==="currency"?e.jsx(H,{amount:p,size:"small"}):i==="percentage"?`${(p*100).toFixed(1)}%`:i==="number"?p.toLocaleString():p;return e.jsx(e.Fragment,{children:n.length===0?e.jsx("p",{className:V.noDataMessage,children:"No statistics available for this game."}):e.jsx("div",{className:V.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:n.map(i=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:V.statLabel,children:i.label}),e.jsxs("div",{className:V.statValue,children:[m(i.type,i.value),i.suffix&&e.jsx("span",{className:V.statSuffix,children:i.suffix})]})]},i.key))})})},Ma=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 15 L12 18"}),e.jsx("path",{d:"M9.5 16.5 L12 19 L14.5 16.5"}),e.jsx("path",{d:"M8 10 L10 10"}),e.jsx("path",{d:"M12 10 L14 10"}),e.jsx("path",{d:"M16 10 L16 10"})]});let Q;try{Q=require("../../contexts/GameContext").useGameContext}catch{Q=()=>({gameState:null})}const Ua=({title:s="Download Transaction Log as CSV",gameState:t,...r})=>{let a;try{a=Q?Q():{gameState:null}}catch{a={gameState:null}}const n=t||a?.gameState,m=n?.gameTransactions||n?.gameData?.gameTransactions||[],i=n?._id||n?.id||"unknown",p=()=>{const h=Array.isArray(m)?m:[];if(h.length===0)return;let k=`Player,Transaction Type,Amount,Round,Timestamp
`;const x=[...h].map(l=>({...l,timestamp:l.timestamp?new Date(l.timestamp):new Date}));x.sort((l,f)=>l.timestamp-f.timestamp),x.forEach(l=>{const f=l.timestamp?new Date(l.timestamp).toLocaleString():"N/A",b=l.playerName||l.player||"Unknown Player",S=b.includes(",")?`"${b}"`:b;let P=l.transactionType||"Transaction";if(!l.transactionType&&l.reason){const c=l.reason.split(" ");P=c[0],c[0]==="Won"?P="Win":l.reason.includes("penalty")&&(P="Penalty")}k+=`${S},${P},${l.amount},${l.round||"N/A"},${f}
`});const o=new Blob([k],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(o),y=document.createElement("a");y.setAttribute("href",g),y.setAttribute("download",`game-${i}-transactions.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)};return e.jsx(K,{icon:e.jsx(Ma,{color:"white",size:20}),title:s,onClick:p,variant:"default",...r})},Ea="_totalsTable_ugw0i_3",Da="_settleUpTable_ugw0i_3",Ra="_totalRow_ugw0i_9",za="_paymentRow_ugw0i_9",Fa="_playerName_ugw0i_18",Ha="_totalAmount_ugw0i_29",Ga="_paymentAmount_ugw0i_29",Oa="_positive_ugw0i_35",qa="_negative_ugw0i_39",Wa="_paymentText_ugw0i_43",Va="_noDataMessage_ugw0i_54",Xa="_loadingMessage_ugw0i_61",B={totalsTable:Ea,settleUpTable:Da,totalRow:Ra,paymentRow:za,playerName:Fa,totalAmount:Ha,paymentAmount:Ga,positive:Oa,negative:qa,paymentText:Wa,noDataMessage:Va,loadingMessage:Xa},Ya=({onClose:s,gameData:t})=>{if(!t)return e.jsx(D,{title:"Game Summary",onClose:s,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{className:B.loadingMessage,children:"Loading game data..."})});const r=t.gameTransactions||[],a=t.players||{},n=t.id||"unknown",m=t.settings?.isPrivate||!1,i=Array.isArray(r)?r:[],p={};Object.entries(a).forEach(([g,y])=>{p[g]=y.name}),i.forEach(g=>{g.playerId&&!p[g.playerId]&&(p[g.playerId]=g.playerName||"Unknown Player")});const h=t.totals||{},k=d.useMemo(()=>{if(Object.keys(h).length===2){const f=Object.entries(h),[b,S]=f[0],[P,c]=f[1];if(Math.abs(S+c)<.1){if(S>0)return[{from:P,fromName:p[P],to:b,toName:p[b],amount:Math.abs(S)}];if(c>0)return[{from:b,fromName:p[b],to:P,toName:p[P],amount:Math.abs(c)}]}}const g=[],y=Object.entries(h).filter(([,f])=>f<0).map(([f,b])=>({playerId:f,playerName:p[f]||"Unknown Player",amount:Math.abs(b)})),l=Object.entries(h).filter(([,f])=>f>0).map(([f,b])=>({playerId:f,playerName:p[f]||"Unknown Player",amount:b}));for(y.sort((f,b)=>b.amount-f.amount),l.sort((f,b)=>b.amount-f.amount);l.length>0&&y.length>0;){const f=l[0],b=y[0],S=Math.min(f.amount,b.amount);if(S>.01)g.push({from:b.playerId,fromName:b.playerName,to:f.playerId,toName:f.playerName,amount:S}),f.amount-=S,b.amount-=S,f.amount<.01&&l.shift(),b.amount<.01&&y.shift();else break}return g},[h,p]),[x,o]=d.useState("totals");return e.jsxs(D,{title:`Game Summary (${n})`,onClose:s,headerButtons:e.jsx(Ua,{gameState:t}),style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${x==="totals"?"active":""}`,onClick:()=>o("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{className:`tab-button ${x==="stats"?"active":""}`,onClick:()=>o("stats"),"data-gamepad-focusable":"true",children:"Stats"}),m&&e.jsx("button",{className:`tab-button ${x==="payouts"?"active":""}`,onClick:()=>o("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),x==="totals"&&e.jsx("div",{className:"tab-content",children:Object.keys(h).length===0?e.jsx("p",{className:B.noDataMessage,children:"No transactions recorded yet."}):e.jsx("div",{className:B.totalsTable,children:Object.entries(h).map(([g,y])=>e.jsxs("div",{className:B.totalRow,children:[e.jsx("span",{className:B.playerName,children:e.jsx(J,{username:p[g]||"Unknown Player",showDiscriminator:!0})}),e.jsx("span",{className:`${B.totalAmount} ${y>=0?B.positive:B.negative}`,children:e.jsx(H,{amount:y,size:"small"})})]},g))})}),x==="stats"&&e.jsx(La,{gameData:t}),x==="payouts"&&m&&e.jsx("div",{className:"tab-content",children:k.length===0?e.jsx("p",{className:B.noDataMessage,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:B.settleUpTable,children:k.map((g,y)=>e.jsxs("div",{className:B.paymentRow,children:[e.jsxs("span",{className:B.paymentText,children:[e.jsx("span",{className:B.playerName,children:e.jsx(J,{username:g.fromName,showDiscriminator:!0})})," pays"," ",e.jsx("span",{className:B.playerName,children:e.jsx(J,{username:g.toName,showDiscriminator:!0})})]}),e.jsx("span",{className:B.paymentAmount,children:e.jsx(H,{amount:g.amount,size:"small"})})]},y))})})]})},Ka="_leaderboardContainer_1al73_1",Za="_leaderboardHeader_1al73_9",Ja="_durationSelector_1al73_15",Qa="_durationButton_1al73_24",et="_active_1al73_41",at="_loadingMessage_1al73_48",tt="_errorMessage_1al73_48",st="_emptyMessage_1al73_48",rt="_loadingSpinner_1al73_60",nt="_leaderboardList_1al73_78",ot="_leaderboardRow_1al73_88",lt="_rankCell_1al73_102",it="_rank_1al73_102",ct="_playerCell_1al73_113",dt="_statsCell_1al73_118",A={leaderboardContainer:Ka,leaderboardHeader:Za,durationSelector:Ja,durationButton:Qa,active:et,loadingMessage:at,errorMessage:tt,emptyMessage:st,loadingSpinner:rt,leaderboardList:nt,leaderboardRow:ot,rankCell:lt,rank:it,playerCell:ct,statsCell:dt},ut=()=>{const[s,t]=d.useState([]),[r,a]=d.useState(!0),[n,m]=d.useState(null),[i,p]=d.useState("all"),h=d.useContext(he);d.useEffect(()=>{k()},[i]);const k=async()=>{a(!0),m(null);try{const o=await fetch(`${X}/leaderboard?duration=${i}`);if(!o.ok)throw new Error("Failed to fetch leaderboard");const g=await o.json();if(t(g.leaderboard||[]),h&&g.leaderboard){const y=g.leaderboard.map(l=>l.userId);h.prefetchUsers(y)}}catch(o){console.error("Error fetching leaderboard:",o),m(o.message)}finally{a(!1)}},x=o=>o===1?"ü•á":o===2?"ü•à":o===3?"ü•â":`#${o}`;return e.jsxs("div",{className:A.leaderboardContainer,children:[e.jsx("div",{className:A.leaderboardHeader,children:e.jsxs("div",{className:A.durationSelector,children:[e.jsx("button",{className:`${A.durationButton} ${i==="all"?A.active:""}`,onClick:()=>p("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{className:`${A.durationButton} ${i==="30days"?A.active:""}`,onClick:()=>p("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),r?e.jsxs("div",{className:A.loadingMessage,children:[e.jsx("div",{className:A.loadingSpinner}),"Loading leaderboard..."]}):n?e.jsxs("div",{className:A.errorMessage,children:["Error: ",n]}):s.length===0?e.jsx("div",{className:A.emptyMessage,children:"No players found for this time period."}):e.jsx("div",{className:A.leaderboardList,"data-gamepad-scrollable":"true",tabIndex:"0",children:s.map(o=>e.jsxs("div",{className:`panel-alt ${A.leaderboardRow}`,children:[e.jsx("div",{className:A.rankCell,children:e.jsx("span",{className:A.rank,children:x(o.rank)})}),e.jsx("div",{className:A.playerCell,children:e.jsx(ma,{userId:o.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:A.statsCell,children:e.jsx(H,{amount:o.totalProfit,size:"small"})})]},o.userId))})]})},mt="_statsPlaceholder_1uz5o_1",pt="_statsGrid_1uz5o_14",gt="_statLabel_1uz5o_47",ht="_statValue_1uz5o_54",xt="_statSuffix_1uz5o_62",yt="_historyTable_1uz5o_77",ft="_tableBody_1uz5o_89",bt="_tableHeader_1uz5o_117",_t="_gameNameHeader_1uz5o_130",vt="_playerCountHeader_1uz5o_130",jt="_roundsHeader_1uz5o_130",wt="_endDateHeader_1uz5o_130",kt="_historyRow_1uz5o_146",Nt="_gameNameCell_1uz5o_159",Ct="_playerCountCell_1uz5o_167",St="_roundsCell_1uz5o_167",Pt="_endDateCell_1uz5o_175",It="_gameNameLink_1uz5o_183",At="_pageButton_1uz5o_262",$t="_pageInfo_1uz5o_293",Tt="_errorMessage_1uz5o_304",Bt="_loadingMessage_1uz5o_325",Lt="_loadingSpinner_1uz5o_336",Mt="_dateMobile_1uz5o_351",Ut="_dateDesktop_1uz5o_355",w={statsPlaceholder:mt,statsGrid:pt,statLabel:gt,statValue:ht,statSuffix:xt,historyTable:yt,tableBody:ft,tableHeader:bt,gameNameHeader:_t,playerCountHeader:vt,roundsHeader:jt,endDateHeader:wt,historyRow:kt,gameNameCell:Nt,playerCountCell:Ct,roundsCell:St,endDateCell:Pt,gameNameLink:It,pageButton:At,pageInfo:$t,errorMessage:Tt,loadingMessage:Bt,loadingSpinner:Lt,dateMobile:Mt,dateDesktop:Ut},Et=({onClose:s})=>{const{token:t}=Y(),[r,a]=d.useState("leaderboard"),[n,m]=d.useState(!0),[i,p]=d.useState(null),[h,k]=d.useState({games:[],pagination:{}}),[x,o]=d.useState(0),[g,y]=d.useState(!1),[l,f]=d.useState(null),[b,S]=d.useState(null),[P,c]=d.useState(!0),[C,T]=d.useState(null),M=5;d.useEffect(()=>{(async()=>{m(!0),p(null);try{const _=await fetch(`${X}/games/history?pageSize=${M}&pageNumber=${x}`,{headers:{Authorization:`Bearer ${t}`}});if(!_.ok)throw new Error("Failed to fetch game history");const L=await _.json();k(L)}catch(_){console.error("Error fetching game history:",_),p(_.message)}finally{m(!1)}})()},[t,x]),d.useEffect(()=>{(async()=>{c(!0),T(null);try{const _=await fetch(`${X}/me/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!_.ok)throw new Error("Failed to fetch lifetime stats");const L=await _.json();S(L.stats)}catch(_){console.error("Error fetching lifetime stats:",_),T(_.message)}finally{c(!1)}})()},[t]);const G=()=>{x>0&&o(x-1)},z=()=>{h.pagination&&h.games.length===M&&o(x+1)},R=(j,_=!1)=>{if(!j)return"Unknown";const L=new Date(j);return _?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(L):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(L)},O=(j,_)=>typeof _=="number"?j==="currency"?e.jsx(H,{amount:_,size:"small"}):j==="percentage"?`${(_*100).toFixed(1)}%`:_.toLocaleString():typeof _=="boolean"?_?"Yes":"No":j==="date"||_ instanceof Date?R(_):j==="number"?Number(_).toLocaleString():String(_),F=j=>j.roundCount||0,q=j=>{const _=h.games.find(L=>L.id===j);_&&(f(_),y(!0))};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{title:"Player Stats",onClose:s,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${r==="leaderboard"?"active":""}`,onClick:()=>a("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{className:`tab-button ${r==="stats"?"active":""}`,onClick:()=>a("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{className:`tab-button ${r==="history"?"active":""}`,onClick:()=>a("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),r==="leaderboard"&&e.jsx("div",{className:"tab-content",children:e.jsx(ut,{})}),r==="stats"&&e.jsx("div",{className:"tab-content",children:P?e.jsxs("div",{className:w.loadingMessage,children:[e.jsx("div",{className:w.loadingSpinner}),"Loading your lifetime stats..."]}):C?e.jsxs("div",{className:w.errorMessage,children:["Error: ",C]}):!b||b.length===0?e.jsx("div",{className:w.statsPlaceholder,children:e.jsx("p",{children:"No lifetime statistics available."})}):e.jsx("div",{className:w.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:b.map((j,_)=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:w.statLabel,children:j.label}),e.jsxs("div",{className:w.statValue,children:[O(j.type,j.value),j.suffix&&e.jsx("span",{className:w.statSuffix,children:j.suffix})]})]},j.key||`stat-${_}`))})}),r==="history"&&e.jsx("div",{className:"tab-content",children:n?e.jsxs("div",{className:w.loadingMessage,children:[e.jsx("div",{className:w.loadingSpinner}),"Loading your game history..."]}):i?e.jsxs("div",{className:w.errorMessage,children:["Error: ",i]}):h.games.length===0?e.jsx("div",{className:w.statsPlaceholder,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`panel-alt ${w.historyTable}`,children:[e.jsxs("div",{className:w.tableHeader,children:[e.jsx("div",{className:w.gameNameHeader,children:"Game"}),e.jsx("div",{className:w.playerCountHeader,children:"Players"}),e.jsx("div",{className:w.roundsHeader,children:"Rounds"}),e.jsx("div",{className:w.endDateHeader,children:"Ended"})]}),e.jsx("div",{className:w.tableBody,"data-gamepad-scrollable":"true",tabIndex:"0",children:h.games.map(j=>e.jsxs("div",{className:w.historyRow,children:[e.jsx("div",{className:w.gameNameCell,children:e.jsxs("span",{className:w.gameNameLink,onClick:()=>q(j.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",j.id]})}),e.jsx("div",{className:w.playerCountCell,children:j.totalPlayerCount}),e.jsx("div",{className:w.roundsCell,children:F(j)}),e.jsxs("div",{className:w.endDateCell,children:[e.jsx("span",{className:w.dateDesktop,children:R(j.endedAt)}),e.jsx("span",{className:w.dateMobile,children:R(j.endedAt,!0)})]})]},j.id))})]}),e.jsxs("div",{className:w.pageInfo,children:[e.jsx("button",{onClick:G,disabled:x===0,className:w.pageButton,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"‚Üê"}),"Page ",x+1,h.pagination&&h.pagination.total?` of ${Math.ceil(h.pagination.total/M)}`:"",e.jsx("button",{onClick:z,disabled:!h.pagination||h.games.length<M,className:w.pageButton,"aria-label":"Next page","data-gamepad-focusable":"true",children:"‚Üí"})]})]})})]}),g&&l&&e.jsx(Ya,{gameData:l,onClose:()=>{y(!1),f(null)}})]})},ys=({onModalStateChange:s,...t})=>{const[r,a]=d.useState(!1),n=()=>{a(!0)},m=()=>{a(!1)};return d.useEffect(()=>{s&&s(r)},[r,s]),e.jsxs(e.Fragment,{children:[e.jsx(K,{onClick:n,icon:e.jsx(_a,{color:"white",size:20}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...t}),r&&e.jsx(Et,{isOpen:r,onClose:m})]})},Dt=({className:s="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Rt=({currentUsername:s,onUsernameChanged:t})=>{const[r,a]=d.useState(""),[n,m]=d.useState(!1),[i,p]=d.useState(""),[h,k]=d.useState(""),{token:x}=Y(),{base:o,discriminator:g}=ne(s),y=async l=>{if(l.preventDefault(),p(""),k(""),m(!0),!x){p("You must be logged in to change your username"),m(!1);return}try{const f=await fetch(`${X}/users/username`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({username:r})}),b=await f.json();if(!f.ok){p(b.message||"Failed to change username");return}const{base:S,discriminator:P}=ne(b.username);k(`Username changed to ${S}#${P}`),a(""),t&&t(b.username),setTimeout(()=>{window.location.reload()},1500)}catch{p("Network error. Please try again.")}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("h4",{style:{margin:0},children:"Username"}),e.jsxs("span",{style:{color:"var(--text-primary)",fontWeight:500,fontSize:"0.95rem"},children:[o,g&&e.jsxs("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:["#",g]})]})]}),e.jsxs("form",{onSubmit:y,autoComplete:"off",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",name:"new-display-name",value:r,onChange:l=>a(l.target.value),placeholder:"Enter new username",minLength:2,maxLength:32,pattern:"[a-zA-Z0-9_\\-]+",required:!0,disabled:n,readOnly:!0,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true",style:{flexGrow:1,flexShrink:1,minWidth:0,padding:"8px 14px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-primary)",fontSize:"0.9rem",outline:"none",transition:"border-color 0.2s, background 0.2s",height:"36px"},onFocus:l=>{l.target.removeAttribute("readonly"),l.target.style.borderColor="var(--btn-tertiary-start)",l.target.style.background="rgba(255, 255, 255, 0.08)"},onBlur:l=>{l.target.setAttribute("readonly",!0),l.target.style.borderColor="rgba(255, 255, 255, 0.1)",l.target.style.background="rgba(255, 255, 255, 0.05)"}}),e.jsx("button",{type:"submit",disabled:n||!r.trim()||r.trim()===o,style:{background:n||!r.trim()||r.trim()===o?"#95a5a6":"linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",color:"var(--text-white)",border:"none",borderRadius:"34px",padding:"8px 16px",fontSize:"0.9rem",fontWeight:500,cursor:n||!r.trim()||r.trim()===o?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"120px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",flexShrink:0,height:"36px"},onMouseEnter:l=>{l.target.disabled||(l.target.style.background="linear-gradient(to right, var(--btn-tertiary-hover-start), var(--btn-tertiary-hover-end))",l.target.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.3)",l.target.style.transform="translateY(-1px)")},onMouseLeave:l=>{l.target.disabled||(l.target.style.background="linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",l.target.style.boxShadow="0 2px 5px rgba(0, 0, 0, 0.2)",l.target.style.transform="translateY(0)")},children:n?"Saving...":"Change"})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-subtle)",opacity:.6},children:"2-32 characters ‚Ä¢ Letters, numbers, underscores, hyphens"}),i&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"6px",color:"#f87171",fontSize:"0.875rem"},children:i}),h&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"6px",color:"#86efac",fontSize:"0.875rem"},children:h})]})]})},zt="_fileUploadContainer_z5fvc_1",Ft="_fileInput_z5fvc_8",Ht="_uploadButton_z5fvc_12",Gt="_changeButton_z5fvc_37",Ot="_previewContainer_z5fvc_53",qt="_imagePreview_z5fvc_61",Wt="_audioPreview_z5fvc_70",Vt="_errorMessage_z5fvc_76",U={fileUploadContainer:zt,fileInput:Ft,uploadButton:Ht,changeButton:Gt,previewContainer:Ot,imagePreview:qt,audioPreview:Wt,errorMessage:Vt},Xt=({onUpload:s,currentFileUrl:t,acceptedFileTypes:r,previewType:a="image"})=>{const[n,m]=d.useState(!1),[i,p]=d.useState(null),h=d.useRef(null),k=async g=>{const y=g.target.files[0];if(!y){console.error("[FileUpload] No file selected");return}console.log("[FileUpload] File selected:",{name:y.name,type:y.type,size:y.size}),p(null),m(!0);try{console.log("[FileUpload] Calling onUpload function");const l=await s(y);console.log("[FileUpload] Upload result:",l),l?console.log("[FileUpload] Upload successful"):(console.error("[FileUpload] Upload failed"),p("Failed to upload file. Please try again."))}catch(l){console.error("[FileUpload] Error uploading file:",l),p("An error occurred during upload.")}finally{m(!1)}},x=()=>{h.current.click()},o=()=>t?a==="image"?e.jsx("div",{className:U.previewContainer,children:e.jsx("img",{src:t,alt:"Preview",className:U.imagePreview})}):a==="audio"?e.jsx("div",{className:U.previewContainer,children:e.jsx("audio",{controls:!0,src:t,className:U.audioPreview,children:"Your browser does not support the audio element."})}):null:null;return e.jsxs("div",{className:U.fileUploadContainer,children:[e.jsx("input",{type:"file",ref:h,onChange:k,accept:r,className:U.fileInput}),t&&o(),e.jsx("button",{type:"button",onClick:x,className:`${U.uploadButton} ${t?U.changeButton:""}`,disabled:n,"data-gamepad-focusable":"true",children:n?"Uploading...":t?"Change":"Upload"}),i&&e.jsx("div",{className:U.errorMessage,children:i})]})},Yt=()=>{const{token:s}=Y(),{preferences:t,updateSelectedTitle:r}=ue(),[a,n]=d.useState([]),[m,i]=d.useState(!0),[p,h]=d.useState(null);d.useEffect(()=>{k()},[]);const k=async()=>{try{i(!0);const o=await fetch(`${X}/me/titles`,{headers:{Authorization:`Bearer ${s}`}});if(!o.ok)throw new Error("Failed to load titles");const g=await o.json();n(g)}catch(o){h(o.message)}finally{i(!1)}},x=async o=>{try{await r(o)}catch{h("Failed to update title")}};return m?e.jsx("div",{className:I.loadingMessage,children:"Loading titles..."}):p?e.jsx("div",{className:I.errorMessage,children:p}):a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:[e.jsxs("div",{onClick:()=>x(""),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),x(""))},style:{display:"inline-flex",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle?"rgba(255, 255, 255, 0.08)":"var(--btn-tertiary-shadow)",border:t.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid var(--btn-tertiary-start)",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),a.map(o=>e.jsxs("div",{onClick:()=>x(o.title),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),x(o.title))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle===o.title?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:t.selectedTitle===o.title?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:o.title}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:o.description})]},o.title)),a.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"var(--text-muted)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},se={back01:"/cards/back01.png",back02:"/cards/back02.png",back03:"/cards/back03.png",back04:"/cards/back04.png",back05:"/cards/back05.png",back06:"/cards/back06.png",back07:"/cards/back07.png",back08:"/cards/back08.png"},me=()=>localStorage.getItem("selectedCardBack")||"back01",fs=()=>{const s=me();return se[s]||se.back01},Kt=s=>{se[s]&&(localStorage.setItem("selectedCardBack",s),window.dispatchEvent(new CustomEvent("cardbackchange",{detail:s})))},de=[{id:"back01",image:"/cards/back01.png"},{id:"back02",image:"/cards/back02.png"},{id:"back03",image:"/cards/back03.png"},{id:"back04",image:"/cards/back04.png"},{id:"back05",image:"/cards/back05.png"},{id:"back06",image:"/cards/back06.png"},{id:"back07",image:"/cards/back07.png"},{id:"back08",image:"/cards/back08.png"}],Zt=()=>{const[s,t]=d.useState("back01");d.useEffect(()=>{const a=me();t(a)},[]);const r=a=>{t(a),Kt(a)};return e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",overflowY:"visible",paddingTop:"8px",paddingBottom:"8px",alignItems:"center",minHeight:"100px"},children:de.map((a,n)=>e.jsx("div",{onClick:()=>r(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),r(a.id))},style:{position:"relative",cursor:"pointer",flexShrink:0,transition:"transform 0.2s ease",transform:s===a.id?"scale(1.1)":"scale(1)",marginLeft:n===0?"8px":0,marginRight:n===de.length-1?"8px":0},children:e.jsx("div",{style:{width:"60px",height:"84px",backgroundImage:`url(${a.image})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",boxShadow:s===a.id?"0 0 0 3px var(--btn-tertiary-start), 0 4px 12px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"}})},a.id))})},Jt=[{id:"default",name:"Default",description:"Classic blue theme",primary:"#1a2a3a",accent:"#3498db"},{id:"light",name:"Light Mode",description:"Professional theme",primary:"#f8f9fa",accent:"#ffc107"},{id:"dark",name:"Dark Mode",description:"Deep dark theme",primary:"#0d0d0d",accent:"#2980b9"},{id:"packers",name:"Packers",description:"Go Pack Go!",primary:"#203731",accent:"#FFB612"},{id:"sunset",name:"Sunset",description:"Romantic twilight",primary:"#0c1929",accent:"#ff6b6b"},{id:"miami-vice",name:"Miami Vice",description:"Neon pink & cyan",primary:"#1a0f2e",accent:"#00d2d3"},{id:"purple",name:"Royal Purple",description:"Elegant purple theme",primary:"#1a1a2e",accent:"#8e44ad"}],Qt=()=>{const[s,t]=d.useState("default");d.useEffect(()=>{const a=xe();t(a)},[]);const r=a=>{t(a),ye(a)};return e.jsx("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:Jt.map(a=>e.jsxs("div",{onClick:()=>r(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),r(a.id))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"50px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:s===a.id?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:s===a.id?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"3px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.primary,border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.accent,border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:a.name}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:a.description})]},a.id))})},es=({onClose:s,defaultTab:t="profile"})=>{const{user:r}=Y(),{preferences:a,toggleAutoAnte:n,toggleMute:m,uploadProfileImg:i,loading:p}=ue(),[h,k]=d.useState(t);return p?e.jsx(D,{title:"Preferences",onClose:s,style:{maxWidth:600,maxHeight:"25vh"},children:e.jsx("div",{className:I.loadingMessage,children:"Loading preferences..."})}):e.jsxs(D,{title:"Preferences",onClose:s,style:{maxWidth:600},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${h==="profile"?"active":""}`,onClick:()=>k("profile"),"data-gamepad-focusable":"true",children:"Profile"}),e.jsx("button",{className:`tab-button ${h==="game"?"active":""}`,onClick:()=>k("game"),"data-gamepad-focusable":"true",children:"Game Options"})]}),h==="profile"&&e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"panel-alt",children:e.jsx(Rt,{currentUsername:r?.username,onUsernameChanged:x=>{console.log("Username changed to:",x)}})}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Profile Image"}),e.jsx(Xt,{onUpload:i,currentFileUrl:a.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Title"}),e.jsx(Yt,{})]})]}),h==="game"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Mute Sound"}),e.jsx(le,{isChecked:a.muted,onChange:m})]}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Auto-Ante"}),e.jsx(le,{isChecked:a.autoAnte,onChange:n})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Theme"}),e.jsx(Qt,{})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Card Back"}),e.jsx(Zt,{})]})]})]})},bs=({onModalStateChange:s,inGame:t=!1})=>{const[r,a]=d.useState(!1),n=()=>{a(!0)},m=()=>{a(!1)};return d.useEffect(()=>{s&&s(r)},[r,s]),e.jsxs(e.Fragment,{children:[e.jsx(K,{onClick:n,icon:e.jsx(Dt,{style:{color:"white",width:20,height:20}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),r&&e.jsx(es,{isOpen:r,onClose:m,defaultTab:t?"game":"profile"})]})},as=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"})]}),ts=({onClose:s})=>e.jsxs(D,{title:"Game Rules",onClose:s,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Objective"}),e.jsx("div",{className:I.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Card Values"}),e.jsx("div",{className:I.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:I.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"Players take turns in seat order."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Betting"}),e.jsxs("div",{className:I.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"POT Button"}),e.jsx("div",{className:I.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:I.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:I.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),_s=({title:s="View Game Rules",onModalStateChange:t,...r})=>{const[a,n]=d.useState(!1),m=()=>{n(!0)},i=()=>{n(!1)};return d.useEffect(()=>{t&&t(a)},[a,t]),e.jsxs(e.Fragment,{children:[e.jsx(K,{icon:e.jsx(as,{color:"white",size:20}),title:s,onClick:m,variant:"default",...r}),a&&e.jsx(ts,{onClose:i})]})},ss=({className:s="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:s,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z"})}),vs=({onClick:s,...t})=>e.jsx(K,{onClick:s,icon:e.jsx(ss,{style:{color:"white",width:20,height:20}}),"aria-label":"Store",variant:"store",title:"Store",...t}),rs="_coinPacksGrid_1p81q_3",ns="_coinPackCard_1p81q_50",os="_coinAmount_1p81q_56",ls="_productImage_1p81q_64",is="_productDescription_1p81q_78",cs="_productPrice_1p81q_87",ds="_free_1p81q_94",us="_paid_1p81q_98",ms="_adButton_1p81q_103",$={coinPacksGrid:rs,coinPackCard:ns,coinAmount:os,productImage:ls,productDescription:is,productPrice:cs,free:ds,paid:us,adButton:ms};class ps{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`}getAuthHeaders(t){return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getOfferingsByType(t,r){try{const a=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(t)}`,n=await fetch(a,{method:"GET",headers:this.getAuthHeaders(r),credentials:"include"});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||`HTTP ${n.status}: Failed to fetch offerings`)}return(await n.json()).offerings||[]}catch(a){throw console.error("[PURCHASE_SERVICE] Error fetching offerings:",a),new Error(`Failed to fetch product offerings: ${a.message}`)}}async getAllOfferings(t){try{const r=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(t),credentials:"include"});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.error||`HTTP ${r.status}: Failed to fetch offerings`)}return(await r.json()).offerings||[]}catch(r){throw console.error("[PURCHASE_SERVICE] Error fetching all offerings:",r),new Error(`Failed to fetch product offerings: ${r.message}`)}}async processPurchase(t,r){try{if(!t)throw new Error("Product ID is required");const a=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(r),credentials:"include",body:JSON.stringify({productId:t})});if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.error||`HTTP ${a.status}: Purchase failed`)}const n=await a.json();return console.log("[PURCHASE_SERVICE] Purchase completed:",{productId:t,coinsAdded:n.coinsAdded,newBalance:n.newBalance}),n}catch(a){throw console.error("[PURCHASE_SERVICE] Error processing purchase:",a),new Error(`Purchase failed: ${a.message}`)}}}const te=new ps,js=({onClose:s})=>{const{token:t}=Y(),{showToast:r}=fe(),[a,n]=d.useState("coins"),[m,i]=d.useState([]),[p,h]=d.useState([]),[k,x]=d.useState(!0),[o,g]=d.useState(null),[y,l]=d.useState(null);d.useEffect(()=>{t&&(f(),b())},[t]);const f=async()=>{try{x(!0),l(null);const c=await te.getOfferingsByType("coin",t);i([{id:"watch-ad",coinAmount:300,priceUSD:0,name:"Watch Ad",description:"Watch a short video ad to earn free coins!",imageUrl:null,isAd:!0},...c])}catch(c){console.error("Failed to load coin offerings:",c),l("Failed to load products. Please try again.")}finally{x(!1)}},b=async()=>{try{const c=await te.getOfferingsByType("upgrade",t);h(c)}catch(c){console.error("Failed to load upgrade offerings:",c)}},S=async c=>{try{if(g(c),l(null),c==="watch-ad"){console.log("Watch ad clicked - Ad integration coming soon!"),r("Ad feature coming soon! You would earn 300 coins by watching a short video."),g(null);return}const C=await te.processPurchase(c,t);console.log("Purchase successful:",C),s()}catch(C){console.error("Purchase failed:",C),l(C.message||"Purchase failed. Please try again.")}finally{g(null)}},P=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c);return k?e.jsx(D,{title:"Store",onClose:s,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(D,{title:"Store",onClose:s,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${a==="coins"?"active":""}`,onClick:()=>n("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"}),e.jsx("button",{className:`tab-button ${a==="upgrade"?"active":""}`,onClick:()=>n("upgrade"),"data-gamepad-focusable":"true",children:"Upgrades"})]}),y&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:y}),a==="coins"&&e.jsx("div",{className:"tab-content",children:m.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{className:$.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:m.map(c=>e.jsxs("div",{className:`panel-alt ${$.coinPackCard}`,children:[e.jsx("h3",{className:$.coinAmount,children:e.jsx(H,{amount:c.coinAmount,size:"large"})}),e.jsx("div",{className:$.productImage,children:c.imageUrl&&e.jsx("img",{src:c.imageUrl,alt:c.name,onError:C=>{C.target.style.display="none"}})}),e.jsx("p",{className:$.productDescription,children:c.description}),e.jsx("div",{className:`${$.productPrice} ${c.isAd?$.free:$.paid}`,children:c.isAd?"FREE":P(c.priceUSD)}),e.jsx("button",{onClick:()=>S(c.id),disabled:o===c.id,className:c.isAd?$.adButton:"btn btn-primary","data-gamepad-focusable":"true",children:o===c.id?"Processing...":c.isAd?"Watch Ad":"Purchase"})]},c.id))})}),a==="upgrade"&&e.jsx("div",{className:"tab-content",children:p.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No upgrades available at the moment."}):e.jsx("div",{className:$.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:p.map(c=>e.jsxs("div",{className:`panel-alt ${$.coinPackCard}`,children:[e.jsx("h3",{className:$.coinAmount,children:c.name}),e.jsx("div",{className:$.productImage,children:c.imageUrl&&e.jsx("img",{src:c.imageUrl,alt:c.name,onError:C=>{C.target.style.display="none"}})}),e.jsx("p",{className:$.productDescription,children:c.description}),e.jsxs("div",{className:`${$.productPrice} ${$.paid}`,children:[P(c.priceUSD),"/month"]}),e.jsx("button",{onClick:()=>S(c.id),disabled:o===c.id,className:"btn btn-primary","data-gamepad-focusable":"true",children:o===c.id?"Processing...":"Subscribe"})]},c.id))})})]})};export{D as B,H as C,xs as G,K as I,ys as P,_s as R,vs as S,le as T,ma as U,bs as a,js as b,Ya as c,Pa as d,fs as g};
