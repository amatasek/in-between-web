import{b as e,a,s,j as t,f as n,U as r,L as i}from"./index-DEXnF-Zl.js";import{r as l,e as c,u as o}from"./vendor-D3vErxIQ.js";import{C as d,a as m,R as u,P as _,S as h,I as p,c as x,b as j,g,d as N,U as y,G as f}from"./GamepadInput-EzA_KFlD.js";import{u as v}from"./useGamepadNavigation-Tj-O-nX_.js";import"./audio-D4HOgbU8.js";import"./socket-DfKCw8Ob.js";const b="â™¥",C="â™¦",k="â™£",w="â™ ",T="â†’",I="â†‘",A="â†“",S="â†»",$="âœ“",P="âœ•",{TIMERS:B}={TIMERS:{BETTING_DURATION:3e4,DECISION_DURATION:15e3}},E=l.createContext(),L=()=>{const e=l.useContext(E);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},q=({children:n,gameId:r,initialGameState:i=null})=>{const{socket:c,error:o}=e(),{user:d}=a(),[m,u]=l.useState(i);l.useRef({});const _=l.useRef(null),[h,p]=l.useState(null),x=l.useCallback((()=>{p(null)}),[]);l.useEffect((()=>{o&&p(o)}),[o]),l.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{u(e.game),p(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(m)!==JSON.stringify(e)){if(e.currentPlayerId&&d?.id){const a=e.currentPlayerId===d.id,t=_.current===d.id;a&&!t&&s.play("ui.alert"),_.current=e.currentPlayerId}u(e),x()}})),c.on("gameError",(e=>{p(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const j=l.useCallback((e=>{if(c&&r)try{c.emit("placeBet",{bet:e,gameId:r})}catch(a){p("Failed to place bet. Please try again.")}}),[c,r]),g=l.useCallback((()=>{if(c&&r)try{c.emit("payAnte",{gameId:r})}catch(e){p("Failed to pay ante. Please try again.")}}),[c,r]),N=l.useCallback((()=>{if(c&&r)try{c.emit("dealCards",{gameId:r})}catch(e){p("Failed to deal cards. Please try again.")}}),[c,r]),y=l.useCallback((()=>{if(c&&r)try{c.emit("revealMiddleCard",{gameId:r})}catch(e){p("Failed to reveal middle card. Please try again.")}}),[c,r]),f=l.useCallback((()=>{if(c&&r)try{c.emit("nextRound",{gameId:r})}catch(e){p("Failed to move to next round. Please try again.")}}),[c,r]),v=l.useCallback((()=>{if(c&&r)try{c.emit("ready")}catch(e){p("Failed to set player ready. Please try again.")}}),[c,r]),b=l.useCallback((()=>{if(c&&r)try{c.emit("unready")}catch(e){p("Failed to set player unready. Please try again.")}}),[c,r]),C={gameState:m,error:h,gameId:r,placeBet:j,payAnte:g,playerReady:v,playerUnready:b,dealCards:N,revealMiddleCard:y,nextRound:f,clearError:x};return t.jsx(E.Provider,{value:C,children:n})},O="_gameContainer_l6mu0_1",R="_gameScreen_l6mu0_5",D="_loadingContainer_l6mu0_31",F="_errorContainer_l6mu0_40",M="_errorText_l6mu0_50",z="_tableWrapper_l6mu0_71",G="_gameBottomSection_l6mu0_85",Y="_headerContainer_wf4qp_1",U="_header_wf4qp_1",H="_headerLeft_wf4qp_24",W="_gameTitle_wf4qp_33",V="_liveTag_wf4qp_44",J="_gameIdText_wf4qp_62",K="_gameIdLink_wf4qp_69",Q="_headerRight_wf4qp_82",X="_controlsStack_wf4qp_88",Z="_balanceDisplay_wf4qp_95",ee="_balanceLabel_wf4qp_108",ae="_controlsGroup_wf4qp_114",se=({color:e="currentColor",size:a=24})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),te=({handleLeaveGame:s,onModalStateChange:n})=>{const{gameState:r,gameId:i}=L(),{socket:c}=e(),{user:o}=a(),g=c?.auth?.userId,N=g&&r?.players?r.players[g]:null,y=N?.balance??o?.balance??0,f=N?.isReady||!1,[v,b]=l.useState(!1),[C,k]=l.useState(!1),[w,T]=l.useState(!1),[I,A]=l.useState(!1),[S,$]=l.useState(!1);return l.useEffect((()=>{n&&n(v||C||w||I||S)}),[v,C,w,I,S,n]),t.jsxs("div",{className:Y,children:[t.jsxs("div",{className:U,children:[t.jsxs("div",{className:H,children:[t.jsxs("h1",{className:W,children:["In Between ",t.jsx("span",{className:V,children:"LIVE"})]}),t.jsx("p",{className:J,children:t.jsxs("span",{className:K,onClick:()=>b(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",i]})})]}),t.jsx("div",{className:Q,children:t.jsxs("div",{className:X,children:[t.jsxs("div",{className:Z,children:[t.jsx("span",{className:ee,children:"Balance:"}),t.jsx(d,{amount:Number(y),size:"small"})]}),t.jsxs("div",{className:ae,children:[t.jsx(m,{onModalStateChange:T,"data-gamepad-focusable":"true"}),t.jsx(u,{onModalStateChange:A,"data-gamepad-focusable":"true"}),t.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),t.jsx(h,{onClick:()=>k(!0),"data-gamepad-focusable":"true"}),t.jsx(p,{icon:t.jsx(se,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:f,"data-gamepad-focusable":"true"})]})]})})]}),v&&t.jsx(x,{onClose:()=>b(!1),gameData:r}),C&&t.jsx(j,{onClose:()=>k(!1)})]})},ne={table:"_table_zbyr4_2",feltTexture:"_feltTexture_zbyr4_75",sitOutOverlay:"_sitOutOverlay_zbyr4_104"},re={cardsRow:"_cardsRow_12pga_1",card:"_card_12pga_1",dealingPhase:"_dealingPhase_12pga_74",revealingPhase:"_revealingPhase_12pga_83",cardBack:"_cardBack_12pga_109",redCard:"_redCard_12pga_119",blackCard:"_blackCard_12pga_123",cardCorner:"_cardCorner_12pga_127",bottomRight:"_bottomRight_12pga_136",cardValue:"_cardValue_12pga_144",cardSuit:"_cardSuit_12pga_150",cardCenter:"_cardCenter_12pga_155",aceCard:"_aceCard_12pga_212",aceIndicator:"_aceIndicator_12pga_216",aceHigh:"_aceHigh_12pga_236",aceLow:"_aceLow_12pga_242",indicatorContent:"_indicatorContent_12pga_248"},ie=()=>{const{gameState:e}=L(),[a,s]=l.useState(g());if(l.useEffect((()=>{const e=()=>{s(g())};return window.addEventListener("cardbackchange",e),()=>window.removeEventListener("cardbackchange",e)}),[]),!e)return t.jsx("div",{className:re.loading,children:"Loading game state..."});const{firstCard:n,secondCard:r,thirdCard:i,phase:c,dealer:o}=e,d={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},m={hearts:b,diamonds:C,clubs:k,spades:w,[b]:b,[C]:C,[k]:k,[w]:w},u=(e,s)=>{if(!e)return t.jsx("div",{className:re.card,children:t.jsx("div",{className:re.cardBack,style:{backgroundImage:`url(${a})`}})},`empty-${s}`);const n=(e=>e===b||e===C||"hearts"===e||"diamonds"===e)(e.suit),r="A"===e.value,i=e.isAceLow,l=1===s;return t.jsxs("div",{className:`${re.card} ${n?re.redCard:re.blackCard} ${r?re.aceCard:""}`,children:[r&&!l&&t.jsx("div",{className:`${re.aceIndicator} ${i?re.aceLow:re.aceHigh} ${n?re.redCard:re.blackCard}`,children:i?t.jsxs("span",{className:re.indicatorContent,children:["LOW ",A]}):t.jsxs("span",{className:re.indicatorContent,children:["HIGH ",I]})}),t.jsxs("div",{className:re.cardCorner,children:[t.jsx("div",{className:re.cardValue,children:d[e.value]}),t.jsx("div",{className:re.cardSuit,children:m[e.suit]})]}),t.jsx("div",{className:re.cardCenter,children:m[e.suit]}),t.jsxs("div",{className:`${re.cardCorner} ${re.bottomRight}`,children:[t.jsx("div",{className:re.cardValue,children:d[e.value]}),t.jsx("div",{className:re.cardSuit,children:m[e.suit]})]})]},`${e.value}-${e.suit}-${s}`)};return t.jsx("div",{className:`${re.cardsRow} ${"dealing"===c?re.dealingPhase:""} ${"revealing"===c?re.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return n||r||i?(n&&(e[0]={...n}),r&&(e[2]={...r}),i&&(e[1]={...i}),e.map(((e,a)=>u(e,a)))):e.map(((e,a)=>u(e,a)))})()})},le="_potDisplay_1o95d_2",ce="_potLabel_1o95d_18",oe=()=>{const{gameState:e}=L();if(!e)return null;const{pot:a=0}=e;return t.jsxs("div",{className:le,children:[t.jsx("span",{className:ce,children:"POT"}),t.jsx(d,{amount:a,size:"large"})]})},de="_aceOverlay_1apr0_2",me="_cardGlow_1apr0_14",ue="_countdownRing_1apr0_24",_e="_countdownCircle_1apr0_34",he="_choiceButton_1apr0_43",pe="_highButton_1apr0_74",xe="_lowButton_1apr0_85",je="_timerDisplay_1apr0_96",ge="_waitingMessage_1apr0_109",Ne="_aceControlsBottom_1apr0_136",ye="_timerContainer_1apr0_150",fe="_aceButtonContainer_1apr0_158",ve="_choicePrompt_1apr0_165",be="_bottomChoiceButton_1apr0_174",Ce="_lowButtonBottom_1apr0_200",ke="_highButtonBottom_1apr0_210",we=({direction:e="up",color:a="currentColor",size:s=24})=>{const n="down"===e?"rotate(180deg)":"rotate(0deg)";return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:t.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},Te="_waitingTimer_egezv_2",Ie="_timerContent_egezv_16",Ae="_playerName_egezv_23",Se="_action_egezv_29",$e="_timerBar_egezv_35",Pe="_timerProgress_egezv_43",Be=({playerName:e,action:a="deciding",duration:s=15e3})=>{const[n,r]=l.useState(s),i=l.useRef(Date.now());l.useEffect((()=>{i.current=Date.now(),r(s)}),[s]),l.useEffect((()=>{const e=setInterval((()=>{const a=Date.now()-i.current,t=Math.max(0,s-a);r(t),t<=0&&clearInterval(e)}),100);return()=>clearInterval(e)}),[s]);const c=(s-n)/s*100;return t.jsxs("div",{className:`panel-game ${Te}`,children:[t.jsxs("div",{className:Ie,children:[t.jsx("span",{className:Ae,children:e}),t.jsxs("span",{className:Se,children:["is ",a,"..."]})]}),t.jsx("div",{className:$e,children:t.jsx("div",{className:Pe,style:{width:`${c}%`}})})]})},Ee="_countdownTimer_1r3bp_3",Le="_progressRing_1r3bp_19",qe="_progressRingBackground_1r3bp_25",Oe="_progressRingCircle_1r3bp_31",Re="_timeDisplay_1r3bp_40",De=({duration:e=15,isActive:a=!0})=>{const[s,n]=l.useState(e),r=l.useRef(Date.now());l.useEffect((()=>{a&&(r.current=Date.now(),n(e))}),[e,a]),l.useEffect((()=>{if(!a)return;const s=setInterval((()=>{const a=Math.floor((Date.now()-r.current)/1e3),t=Math.max(0,e-a);n(t),t<=0&&clearInterval(s)}),100);return()=>clearInterval(s)}),[e,a]);const i=s/e*100,c=50,o=44*Math.PI,d=o-i/100*o;return t.jsxs("div",{className:Ee,children:[t.jsxs("svg",{className:Le,width:c,height:c,viewBox:"0 0 50 50",children:[t.jsx("circle",{className:qe,cx:25,cy:25,r:22,strokeWidth:3}),t.jsx("circle",{className:Oe,cx:25,cy:25,r:22,strokeWidth:3,strokeDasharray:`${o} ${o}`,strokeDashoffset:d,style:{stroke:(()=>{const a=s/e*100;return a>66?"var(--success)":a>33?"var(--accent)":"var(--secondary)"})()}})]}),t.jsxs("div",{className:Re,children:[s,"s"]})]})},Fe=({card:a,isCurrentPlayersTurn:s,bottomPosition:n=!1})=>{const{socket:r}=e(),{gameState:i}=L(),[c,o]=l.useState(null),d=e=>{null===c&&(o(e),r.emit("chooseAceValue",{isAceLow:e}))},m=i.players[i.currentPlayerId]?.name||"Current player";return n?s?t.jsxs("div",{className:`panel-game ${Ne}`,children:[t.jsx("div",{className:ye,children:t.jsx(De,{duration:15,isActive:!0})}),t.jsxs("div",{className:fe,children:[t.jsx("span",{className:ve,children:"ACE VALUE:"}),t.jsxs("button",{className:`${be} ${Ce}`,onClick:()=>d(!0),disabled:null!==c,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx(we,{direction:"down",size:16}),t.jsx("span",{children:"LOW"})]}),t.jsxs("button",{className:`${be} ${ke}`,onClick:()=>d(!1),disabled:null!==c,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"HIGH"}),t.jsx(we,{direction:"up",size:16})]})]})]}):t.jsx(Be,{playerName:m,action:"choosing ace value",duration:B.DECISION_DURATION}):t.jsxs("div",{className:de,children:[t.jsx("div",{className:me}),s&&t.jsx("svg",{className:ue,children:t.jsx("circle",{className:_e,cx:"60",cy:"87",r:"80",style:{strokeDasharray:countdown/15*502+" 502"}})}),s?t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`${he} ${pe}`,onClick:()=>d(!1),disabled:null!==c,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx(we,{direction:"up",size:20}),t.jsx("span",{children:"HIGH"})]}),t.jsxs("button",{className:`${he} ${xe}`,onClick:()=>d(!0),disabled:null!==c,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"LOW"}),t.jsx(we,{direction:"down",size:20})]}),t.jsxs("div",{className:je,children:[countdown,"s"]})]}):t.jsxs("div",{className:ge,children:[m," is choosing..."]})]})},Me="_bettingOverlay_mx54q_2",ze="_timerContainer_mx54q_26",Ge="_betButton_mx54q_57",Ye="_passButton_mx54q_84",Ue="_amountButton_mx54q_96",He="_customButton_mx54q_108",We="_amountPill_mx54q_120",Ve="_potButtonWrapper_mx54q_137",Je="_customInput_mx54q_142",Ke="_betInput_mx54q_152",Qe="_confirmButton_mx54q_172",Xe="_cancelButton_mx54q_173",Ze="_potButton_1pkys_3",ea="_glowEffect_1pkys_37",aa="_potLabel_1pkys_53",sa="_currencyPill_1pkys_63",ta="_disabled_1pkys_102",na=({amount:e,disabled:a,onClick:s,...n})=>t.jsxs("button",{className:`${Ze} ${a?ta:""}`,onClick:s,disabled:a,"aria-label":`Bet the pot: ${e} chips`,"data-gamepad-focusable":"true",...n,children:[t.jsx("div",{className:ea}),t.jsx("span",{className:aa,children:"POT"}),t.jsx("div",{className:sa,children:t.jsx(d,{amount:e,size:"small"})})]}),ra=({isCurrentPlayersTurn:a})=>{const{gameState:s,placeBet:n}=L(),{socket:r}=e(),[i,c]=l.useState(""),[o,m]=l.useState(!1);if(!s||!a)return t.jsx(Be,{playerName:s?.players[s.currentPlayerId]?.name||"Player",action:"betting",duration:B.BETTING_DURATION});const{pot:u,firstCard:_,secondCard:h,players:p,currentPlayerId:x}=s,j=p[x],g=j?.balance||0;Math.abs(_.numericValue-h.numericValue);const N=Math.min(u,g),y=[1,5,10,20,50,100].filter((e=>e<=N)).slice(-3),f=e=>{e>0&&e<=N&&(n(e),m(!1))},v=()=>{const e=parseInt(i);!isNaN(e)&&e>0&&e<=N&&(f(e),c(""))};return t.jsxs("div",{className:`panel-game ${Me}`,children:[t.jsx("div",{className:ze,children:t.jsx(De,{duration:30,isActive:!0})}),o?t.jsxs("div",{className:Je,children:[t.jsx("input",{type:"number",value:i,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&v(),placeholder:`1-${N}`,min:"1",max:N,autoFocus:!0,className:Ke,"data-gamepad-focusable":"true"}),t.jsx("button",{onClick:v,className:Qe,"data-gamepad-focusable":"true",children:$}),t.jsx("button",{onClick:()=>{m(!1),c("")},className:Xe,"data-gamepad-focusable":"true",children:P})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:`${Ge} ${Ye}`,onClick:()=>{n(0)},"data-gamepad-focusable":"true",autoFocus:!0,children:t.jsx("span",{children:"PASS"})}),y.map((e=>t.jsx("button",{className:`${Ge} ${Ue}`,onClick:()=>f(e),"data-gamepad-focusable":"true",children:t.jsx("div",{className:We,children:t.jsx(d,{amount:e,size:"small"})})},e))),N===u&&t.jsx("div",{className:Ve,children:t.jsx(na,{onClick:()=>f(u),disabled:!1,amount:u})}),t.jsx("button",{className:`${Ge} ${He}`,onClick:()=>m(!0),"data-gamepad-focusable":"true",children:t.jsx("span",{children:"CUSTOM"})})]})]})},ia="_secondChanceOverlay_1sq4x_2",la="_bridge_1sq4x_13",ca="_bridgeLine_1sq4x_20",oa="_matchBadge_1sq4x_57",da="_matchText_1sq4x_69",ma="_choiceContainer_1sq4x_78",ua="_timer_1sq4x_87",_a="_buttons_1sq4x_106",ha="_choiceButton_1sq4x_112",pa="_anteButton_1sq4x_139",xa="_passButton_1sq4x_151",ja="_buttonIcon_1sq4x_162",ga="_buttonText_1sq4x_168",Na="_buttonAmount_1sq4x_174",ya="_waitingContainer_1sq4x_180",fa="_waitingMessage_1sq4x_187",va="_secondChanceBottom_1sq4x_229",ba="_timerContainer_1sq4x_243",Ca="_bottomButtonContainer_1sq4x_251",ka="_choicePrompt_1sq4x_258",wa="_bottomChoiceButton_1sq4x_267",Ta="_anteButtonBottom_1sq4x_293",Ia="_passButtonBottom_1sq4x_302",Aa=({firstCard:a,secondCard:s,isCurrentPlayersTurn:n,bottomPosition:r=!1,indicatorOnly:i=!1})=>{const{gameState:c}=L(),{socket:o}=e(),[m,u]=l.useState(!1),[_,h]=l.useState(null),{anteAmount:p=1,players:x,currentPlayerId:j}=c,g=x[j],N=g?.name||"Player",y=e=>{o&&null===_&&(u(!0),h(e),o.emit("secondChance",{anteAgain:e}))};return a&&s&&(a.numericValue,s.numericValue),i?null:r?n?t.jsxs("div",{className:`panel-game ${va}`,children:[t.jsx("div",{className:ba,children:t.jsx(De,{duration:15,isActive:!0})}),t.jsxs("div",{className:Ca,children:[t.jsx("span",{className:ka,children:"SECOND CHANCE:"}),t.jsxs("button",{className:`${wa} ${Ta}`,onClick:()=>y(!0),disabled:m||null!==_,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("span",{className:ja,children:S}),t.jsx("span",{children:"ANTE AGAIN"}),t.jsx(d,{amount:p,size:"small"})]}),t.jsxs("button",{className:`${wa} ${Ia}`,onClick:()=>y(!1),disabled:m||null!==_,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"PASS"}),t.jsx("span",{className:ja,children:T})]})]})]}):t.jsx(Be,{playerName:N,action:"deciding on second chance",duration:B.DECISION_DURATION}):t.jsxs("div",{className:ia,children:[t.jsxs("div",{className:la,children:[t.jsx("div",{className:ca}),t.jsx("div",{className:oa,children:t.jsx("span",{className:da,children:"MATCH!"})})]}),n?t.jsxs("div",{className:ma,children:[t.jsxs("div",{className:ua,children:[countdown,"s"]}),t.jsxs("div",{className:_a,children:[t.jsxs("button",{className:`${ha} ${pa}`,onClick:()=>y(!0),disabled:m||null!==_,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("span",{className:ja,children:S}),t.jsx("span",{className:ga,children:"ANTE AGAIN"}),t.jsx("span",{className:Na,children:t.jsx(d,{amount:p,size:"small"})})]}),t.jsxs("button",{className:`${ha} ${xa}`,onClick:()=>y(!1),disabled:m||null!==_,"data-gamepad-focusable":"true",children:[t.jsx("span",{className:ga,children:"PASS"}),t.jsx("span",{className:ja,children:T})]})]})]}):t.jsx("div",{className:ya,children:t.jsxs("div",{className:fa,children:[N," is deciding..."]})})]})},Sa="_resultsContainer_1yhtk_2",$a="_messageArea_1yhtk_11",Pa="_resultBar_1yhtk_22",Ba="_playerName_1yhtk_66",Ea="_resultText_1yhtk_71",La="_winBar_1yhtk_78",qa="_winAmount_1yhtk_82",Oa="_lossBar_1yhtk_91",Ra="_lossAmount_1yhtk_95",Da="_penaltyBar_1yhtk_104",Fa="_penaltyText_1yhtk_108",Ma="_penaltyAmount_1yhtk_114",za="_animationContainer_1yhtk_124",Ga="_cautionTapeContainer_1yhtk_132",Ya="_cautionTape_1yhtk_132",Ua="_rainContainer_fxhyg_2",Ha="_fallingItem_fxhyg_10",Wa="_emoji_fxhyg_18",Va="_confetti_fxhyg_26",Ja=({type:e="emoji",items:a=[],count:s=10,animationDuration:n=2.5,className:r=""})=>t.jsx("div",{className:`${Ua} ${r}`,children:[...Array(s)].map(((r,i)=>(r=>{const i=r/s*n+.3*(Math.random()-.5),l=100*Math.random();switch(e){case"coin":return t.jsx("div",{className:Ha,style:{left:`${l}%`,animationDelay:`${i}s`,"--animation-duration":`${n}s`},children:t.jsx(N,{size:"large"})},r);case"confetti":const e=a.length>0?a:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"];return t.jsx("div",{className:`${Ha} ${Va}`,style:{left:`${l}%`,animationDelay:`${i}s`,"--animation-duration":1.2*n+"s",backgroundColor:e[Math.floor(Math.random()*e.length)]}},r);default:const s=a.length>0?a:["ðŸŽ‰"];return t.jsx("div",{className:Ha,style:{left:`${l}%`,animationDelay:`${i}s`,"--animation-duration":`${n}s`},children:t.jsx("span",{className:Wa,children:s[Math.floor(Math.random()*s.length)]})},r)}})(i)))}),Ka=({result:e,players:a})=>{const[s,n]=l.useState(!0);if(l.useEffect((()=>{n(!0);const e=setTimeout((()=>n(!1)),3e3);return()=>clearTimeout(e)}),[e]),!e)return null;const r=a[e.playerId]?.name||"Player",i=e.outcome;if("win"===i){const a=e.winnings||0,s=Math.min(a/500,1),n=Math.floor(10+40*s),i=Math.floor(5+20*s);return t.jsxs("div",{className:Sa,children:[t.jsxs("div",{className:za,children:[t.jsx(Ja,{type:"confetti",count:n,animationDuration:3,items:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"]}),t.jsx(Ja,{type:"coin",count:i,animationDuration:2})]}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${La}`,children:[t.jsx("span",{className:Ba,children:r}),t.jsx("span",{className:Ea,children:"WINS"}),e.winnings&&e.winnings>0&&t.jsx("span",{className:qa,children:t.jsx(d,{amount:e.winnings/2,size:"small"})})]})})]})}if("lose"===i){const a=e.betAmount||0,s=Math.min(a/500,1),n=Math.floor(8+22*s);let i;return i=a<50?["ðŸ˜¢","ðŸ˜”","ðŸ˜•","ðŸ‘Ž","ðŸ“‰","ðŸ’”"]:a<200?["ðŸ˜­","ðŸ˜©","ðŸ¤¦","ðŸ’¸","ðŸ“‰","ðŸ˜¤","ðŸ˜£"]:["ðŸ¤¡","ðŸ’©","ðŸ˜‚","ðŸ¤£","ðŸ—‘ï¸","ðŸ’€","â˜ ï¸","ðŸª¦","âš°ï¸"],t.jsxs("div",{className:Sa,children:[t.jsx("div",{className:za,children:t.jsx(Ja,{type:"emoji",items:i,count:n,animationDuration:2.5})}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${Oa}`,children:[t.jsx("span",{className:Ba,children:r}),t.jsx("span",{className:Ea,children:"LOST"}),e.betAmount&&e.betAmount>0&&t.jsx("span",{className:Ra,children:t.jsx(d,{amount:e.betAmount,size:"small"})})]})})]})}const c=(e.betAmount||0)*(e.isTripleAceTie?3:2),o=e.isTripleAceTie?15:8,m=e.isTripleAceTie?["ðŸ’€","â˜ ï¸","âš ï¸","ðŸš¨","â›”","ðŸ’¥","ðŸ”¥","ðŸ˜±","ðŸŽ°","ðŸ’¸"]:["âš ï¸","ðŸš¨","â›”","ðŸ”´","âŒ","ðŸ’¥","ðŸŽ¯","ðŸŽ²"];return t.jsxs("div",{className:Sa,children:[t.jsxs("div",{className:Ga,children:[t.jsxs("div",{className:Ya,children:[t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]}),t.jsxs("div",{className:Ya,children:[t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]})]}),t.jsx("div",{className:za,children:t.jsx(Ja,{type:"emoji",items:m,count:o,animationDuration:e.isTripleAceTie?2:3})}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${Da}`,children:[t.jsx("span",{className:Ba,children:r}),t.jsx("span",{className:Ea,children:e.isTripleAceTie?"TRIPLE":""}),t.jsxs("span",{className:Fa,children:[e.isTripleAceTie?"3x":"2x"," PENALTY"]}),t.jsx("span",{className:Ma,children:t.jsx(d,{amount:c,size:"small"})})]})})]})},Qa="_revealingOverlay_hpopv_2",Xa="_revealingContent_hpopv_26",Za="_playerName_hpopv_35",es="_actionText_hpopv_43",as="_betAmount_hpopv_51",ss=({playerName:e,betAmount:a})=>e&&a?t.jsx("div",{className:`panel-game ${Qa}`,children:t.jsxs("div",{className:Xa,children:[t.jsx("span",{className:Za,children:e}),t.jsx("span",{className:es,children:"bets"}),t.jsx("div",{className:as,children:t.jsx(d,{amount:a,size:"small"})})]})}):null,ts="_anteControls_68v5e_4",ns="_anteButton_68v5e_27",rs="_backOutButton_68v5e_27",is="_sitOutHalfWidth_68v5e_27",ls="_shimmerBorder_68v5e_110",cs="_buttonInfo_68v5e_125",os="_buttonLabel_68v5e_132",ds="_buttonAmount_68v5e_143",ms="_notEnoughChipsText_68v5e_154",us="_toggleLabel_b88gt_2",_s="_toggleInput_b88gt_9",hs="_toggleSlider_b88gt_15",ps="_toggleText_b88gt_64",xs="_loading_b88gt_86",js=()=>{const{preferences:a,toggleAutoAnte:s,loading:r}=n(),{gameState:i,playerReady:l}=L(),{socket:c}=e();return r?t.jsx("div",{className:xs,children:"Loading preferences..."}):t.jsxs("label",{className:us,children:[t.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{const e=!a.autoAnte,t=await s();if(e&&t&&l){let e=null;if(c&&c.auth?.userId&&i?.players){const a=Object.keys(i.players);for(const s of a)if(i.players[s].userId===c.auth.userId){e=i.players[s];break}}const a=e?.isReady;a||l()}},className:_s,"data-gamepad-focusable":"true"}),t.jsx("span",{className:hs}),t.jsx("span",{className:ps,children:"Auto-Ante"})]})},gs=()=>{const{gameState:s,playerReady:n,playerUnready:r}=L(),{socket:i}=e(),{user:l}=a();if(!s)return null;const{players:c,anteAmount:o,phase:m}=s;if("waiting"!==m)return null;let u=null;if(i&&i.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.auth.userId){u=c[a];break}}else if(l&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.id){u=c[a];break}}const _=Number(u?.balance||0),h=u?.isReady,p=_>=o;return t.jsxs("div",{className:`panel-game ${ts}`,children:[h?t.jsxs("button",{className:rs,onClick:()=>{"function"==typeof r&&r()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:ls}),t.jsx("div",{className:cs,children:t.jsx("span",{className:os,children:"BACK OUT"})})]}):t.jsxs(t.Fragment,{children:[t.jsx(js,{}),t.jsxs("button",{className:ns,onClick:n,disabled:!p,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("div",{className:ls}),t.jsxs("div",{className:cs,children:[t.jsx("span",{className:os,children:"ANTE"}),t.jsx("span",{className:ds,children:t.jsx(d,{amount:o})})]})]}),t.jsxs("button",{className:`${rs} ${is}`,onClick:()=>{i&&s&&l&&i.emit("sitOut",{gameId:s.id,userId:i.auth?.userId||l.id})},disabled:u?.isSittingOut,title:u?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:ls}),t.jsx("div",{className:cs,children:t.jsx("span",{className:os,children:"SIT OUT"})})]})]}),!h&&!p&&t.jsx("p",{className:ms,children:"Not enough coins"})]})},Ns="_imBackOverlay_1wm7i_3",ys="_container_1wm7i_11",fs="_sittingOutText_1wm7i_21",vs="_imBackButton_1wm7i_30",bs="_buttonText_1wm7i_48",Cs="_helpText_1wm7i_66",ks=({onClick:e})=>t.jsx("div",{className:Ns,children:t.jsxs("div",{className:ys,children:[t.jsx("h3",{className:fs,children:"You are sitting out"}),t.jsx("button",{className:vs,onClick:e,"data-gamepad-focusable":"true",autoFocus:!0,children:t.jsx("span",{className:bs,children:"I'M BACK!"})}),t.jsx("p",{className:Cs,children:"Click to rejoin the game"})]})}),ws=()=>{const{gameState:s}=L(),{socket:n}=e(),{user:r}=a();if(!s)return null;const{phase:i,currentPlayerId:l,players:c,waitingForAceDecision:o,waitingForSecondChance:d,firstCard:m,secondCard:u,result:_}=s,h=r?.id,p=c&&h?c[h]:null,x=h===l,j=p?.isSittingOut||!1;return t.jsxs("div",{className:ne.table,children:[t.jsx("div",{className:ne.feltTexture}),t.jsx(oe,{}),t.jsx(ie,{}),o&&t.jsx("div",{className:ne.aceGlowEffect}),d&&t.jsx(Aa,{firstCard:m,secondCard:u,isCurrentPlayersTurn:x,indicatorOnly:!0}),!j&&t.jsxs(t.Fragment,{children:["betting"===i&&!o&&!d&&t.jsx(ra,{isCurrentPlayersTurn:x}),o&&t.jsx(Fe,{card:m,isCurrentPlayersTurn:x,bottomPosition:!0}),d&&t.jsx(Aa,{firstCard:m,secondCard:u,isCurrentPlayersTurn:x,bottomPosition:!0})]}),"revealing"===i&&!j&&t.jsx(ss,{playerName:c[l]?.name||"Player",betAmount:c[l]?.currentBet||0}),"results"===i&&_&&!j&&t.jsx(Ka,{result:_,players:c}),"waiting"===i&&!j&&t.jsx(gs,{}),j&&t.jsx("div",{className:ne.sitOutOverlay,children:t.jsx(ks,{onClick:()=>{n&&s.id&&n.emit("imBack",{gameId:s.id})}})})]})},Ts="_playersContainer_1p4he_1",Is="_playersTitle_1p4he_23",As="_playersList_1p4he_47",Ss="_currentPlayerGlow_1p4he_55",$s="_currentUser_1p4he_69",Ps="_playerInfo_1p4he_73",Bs="_playerStatus_1p4he_81",Es="_disconnectedIndicator_1p4he_88",Ls="_playerBalanceContainer_1p4he_95",qs="_playerBalance_1p4he_95",Os="_balanceIncrease_1p4he_114",Rs="_balanceDecrease_1p4he_118",Ds="_readyIndicator_1p4he_148",Fs="_ready_1p4he_148",Ms="_notReady_1p4he_159",zs="_sittingOut_1p4he_163",Gs="_emptyPlayerList_1p4he_178",Ys=()=>{const{gameState:a}=L(),{socket:s}=e(),n=l.useContext(r);if(l.useEffect((()=>{if(a?.players&&n){const e=Object.values(a.players).map((e=>e.userId)).filter(Boolean);e.length>0&&n.prefetchUsers(e)}}),[a?.players,n]),!a||!a.players)return t.jsx("div",{className:Gs,children:t.jsx("p",{children:"Waiting for game data..."})});const{players:i,currentPlayerId:c,gameTransactions:o=[]}=a,d=s?.auth?.userId,m=a.totals||{};return i&&0!==Object.keys(i).length?t.jsxs("div",{className:Ts,children:[t.jsx("h3",{className:Is,children:"Scoreboard"}),t.jsx("div",{className:As,children:a.seats.filter((e=>null!==e&&i[e])).map((e=>{const a=i[e],s=e===c,n=a.userId===d;return a.disconnected,t.jsxs("div",{className:`\n                  ${s?"panel":"panel-alt"}\n                  ${s?Ss:""}\n                  ${n?$s:""}\n                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{className:Ps,children:[t.jsx(y,{userId:a.userId,size:"small",showName:!0,namePosition:"right"}),t.jsx("span",{className:Bs,children:a.disconnected&&t.jsx("span",{className:Es,title:"Player disconnected",children:"âš ï¸ Disconnected"})})]}),t.jsxs("div",{className:Ls,children:[t.jsx(Us,{balance:m[e]||0}),t.jsx("div",{className:`\n                    ${Ds} \n                    ${a.isSittingOut?zs:a.isReady?Fs:Ms}\n                  `,title:a.isSittingOut?"Sitting Out":a.isReady?"Ready":"Not Ready"})]})]},e)}))})]}):t.jsx("div",{className:Gs,children:t.jsx("p",{children:"Waiting for players to join..."})})},Us=({balance:e})=>{const[a,s]=l.useState(e),[n,r]=l.useState(""),i=l.useRef(null);return l.useEffect((()=>{if(e!==a){r(e>a?Os:Rs),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{r("")}),1e3),s(e)}return()=>{i.current&&clearTimeout(i.current)}}),[e]),t.jsx("span",{className:`${qs} ${n}`,children:t.jsx(d,{amount:e})})},Hs="_gameLogContainer_hejid_1",Ws="_gameLogHeader_hejid_16",Vs="_expandIcon_hejid_30",Js="_gameLogEntries_hejid_54",Ks="_logEntry_hejid_64",Qs="_logTime_hejid_89",Xs="_logMessage_hejid_96",Zs="_systemMessage_hejid_101",et="_emptyLog_hejid_112",at="_showMoreButton_hejid_120",st={leftSection:"_leftSection_1lwai_2",win:"_win_1lwai_9",lose:"_lose_1lwai_13",penalty:"_penalty_1lwai_17",pass:"_pass_1lwai_21",cardsContainer:"_cardsContainer_1lwai_26",playerName:"_playerName_1lwai_32",action:"_action_1lwai_38",amount:"_amount_1lwai_46"},tt="_cardMini_1mkke_2",nt="_red_1mkke_18",rt="_black_1mkke_22",it="_rank_1mkke_26",lt="_aceIndicator_1mkke_34",ct="_suit_1mkke_53",ot="_cardPlaceholder_1mkke_58",dt=({card:e})=>{if(!e)return t.jsx("div",{className:ot,children:"?"});const a=e.value||"?",s=e.suit||"?",n="â™¥"===s||"â™¦"===s||"hearts"===s||"diamonds"===s,r="A"===a,i=!0===e.isAceLow,l=r&&!i;return t.jsxs("div",{className:`${tt} ${n?nt:rt}`,children:[t.jsxs("span",{className:it,children:[a,r&&(l?t.jsx("span",{className:lt,children:"â†‘"}):i?t.jsx("span",{className:lt,children:"â†“"}):null)]}),t.jsx("span",{className:ct,children:(e=>{switch(e){case"hearts":case"â™¥":return b;case"diamonds":case"â™¦":return C;case"clubs":case"â™£":return k;case"spades":case"â™ ":return w;default:return e||""}})(s)})]})},mt=({summary:e})=>{if(!e)return null;const a=()=>e.winAmount?e.winAmount:e.lossAmount?e.lossAmount:e.betAmount?e.betAmount:0;return t.jsxs("div",{className:`panel-alt ${(e=>{switch(e){case"win":return st.win;case"lose":return st.lose;case"penalty":case"triple_penalty":return st.penalty;case"pass":return st.pass;default:return st.default}})(e.action)}`,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[t.jsxs("div",{className:st.leftSection,children:[t.jsxs("div",{className:st.cardsContainer,children:[t.jsx(dt,{card:e.cards?.left}),e.cards?.middle&&t.jsx(dt,{card:e.cards?.middle}),t.jsx(dt,{card:e.cards?.right})]}),t.jsx("span",{className:st.playerName,children:e.playerName}),t.jsx("span",{className:st.action,children:(e=>{switch(e){case"win":return"WON";case"lose":return"LOST";case"penalty":return"PENALTY";case"triple_penalty":return"TRIPLE PENALTY";case"pass":return"PASSED";case"bet":return"BET";default:return e?.toUpperCase()||""}})(e.action)})]}),a()>0&&t.jsx("div",{className:st.amount,children:t.jsx(d,{amount:a(),size:"small"})})]})},ut="_roundDivider_1vqg3_2",_t="_dividerLine_1vqg3_10",ht="_roundLabel_1vqg3_22",pt=({roundNumber:e})=>t.jsxs("div",{className:ut,children:[t.jsx("div",{className:_t}),t.jsxs("span",{className:ht,children:["Round ",e]}),t.jsx("div",{className:_t})]}),xt=()=>{const{gameState:e}=L(),[a,s]=l.useState(!1),[n,r]=l.useState(10);if(!e||!e.gameLog)return null;const i=e.gameLog||[],c=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),o=a?[]:i.slice(0,n);return t.jsxs("div",{className:Hs,children:[t.jsxs("h3",{className:Ws,onClick:()=>{s(!a),a&&r(10)},children:["Game Log",t.jsx("span",{className:Vs,children:a?"â–¶":"â–¼"})]}),!a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Js,children:0===i.length?t.jsx("div",{className:et,children:"No game events yet"}):o.map(((e,a)=>"turn"===e.type?t.jsx(mt,{summary:e},a):"round_start"===e.type?t.jsx(pt,{roundNumber:e.roundNumber},a):"system"===e.type||"error"===e.type?t.jsxs("div",{className:`${Ks} ${Zs}`,children:[t.jsx("span",{className:Qs,children:c(e.timestamp)}),t.jsx("span",{className:Xs,children:e.message})]},a):t.jsxs("div",{className:Ks,children:[t.jsx("span",{className:Qs,children:c(e.timestamp)}),t.jsx("span",{className:Xs,children:e.message})]},a)))}),i.length>n&&t.jsxs("div",{className:at,onClick:()=>{r((e=>e+10))},children:["Show ",Math.min(10,i.length-n)," more",i.length-n>10&&` (${i.length-n} remaining)`]})]})]})},jt="_emojiReactions_1y1z5_1",gt="_toggleButton_1y1z5_8",Nt="_emojiPanel_1y1z5_35",yt="_emojiGrid_1y1z5_60",ft="_emojiButton_1y1z5_66",vt=()=>{const[s,n]=l.useState(!1),{socket:r}=e(),{gameState:i}=L(),{user:c}=a();return t.jsxs("div",{className:jt,children:[t.jsx("button",{className:gt,onClick:()=>{n(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ðŸ˜Š"}),s&&t.jsx("div",{className:Nt,children:t.jsx("div",{className:yt,children:[{emoji:"ðŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ðŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ðŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ðŸ˜Ž",name:"Cool",color:"#4A5568"},{emoji:"ðŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ðŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ðŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ðŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ðŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ðŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ðŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ðŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ðŸŽ‰",name:"Celebration",color:"#A855F7"},{emoji:"ðŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ðŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ðŸ˜¤",name:"Confident",color:"#DC2626"}].map(((e,a)=>t.jsx("button",{className:ft,onClick:()=>(e=>{r&&i&&c&&(r.emit("emojiReaction",{gameId:i.id,emoji:e.emoji,color:e.color,playerName:c.username}),n(!1))})(e),"data-gamepad-focusable":"true",title:e.name,style:{"--emoji-color":e.color},children:e.emoji},a)))})})]})},bt=({onReturnToLobby:s})=>{const[n,r]=l.useState(!1),{gameState:i,error:c,clearError:o}=L();v(!0),l.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=e(),{user:m}=a();if(!i)return t.jsx("div",{className:D,children:t.jsx("p",{children:"Loading game state..."})});i.phase;const u=m?.id;return i.players&&u&&i.players[u],t.jsxs("div",{className:`screen ${O}`,children:[t.jsxs("div",{className:`${R} mobile-scale-content`,children:[t.jsx(te,{handleLeaveGame:()=>{s&&s()},onModalStateChange:r}),c&&t.jsx("div",{className:F,children:t.jsx("p",{className:M,children:c})}),t.jsx("div",{className:z,children:t.jsx(ws,{})}),t.jsxs("div",{className:G,children:[t.jsx(Ys,{}),t.jsx(xt,{})]})]}),!n&&t.jsx(vt,{})]})},Ct="_modalOverlay_jrbqi_1",kt="_modalContent_jrbqi_14",wt="_passwordInput_jrbqi_34",Tt="_modalActions_jrbqi_52",It="_modalButton_jrbqi_58",At="_cancelButton_jrbqi_69",St="_submitButton_jrbqi_78";function $t({isOpen:e,onClose:a,onSubmit:s,gameId:n}){const[r,i]=l.useState("");if(!e)return null;return t.jsx("div",{className:Ct,children:t.jsxs("div",{className:kt,children:[t.jsx("h2",{children:"Password Required"}),t.jsxs("p",{children:["Please enter the password for game ",t.jsx("strong",{children:n||""}),":"]}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),s(r),i("")},children:[t.jsx(f,{title:"Enter Game Password",type:"password",value:r,onChange:e=>i(e.target.value),className:wt,autoFocus:!0,required:!0}),t.jsxs("div",{className:Tt,children:[t.jsx("button",{type:"button",onClick:()=>{i(""),a()},className:`${It} ${At}`,"data-gamepad-focusable":"true",children:"Cancel"}),t.jsx("button",{type:"submit",className:`${It} ${St}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const Pt=()=>{const{gameId:a}=c(),n=o(),{socket:r,isConnected:d}=e(),[m,u]=l.useState(!0),[_,h]=l.useState(null),[p,x]=l.useState(!1),j=l.useRef(!1),g=l.useCallback((()=>{r&&d&&a&&(s.play("ui.leave"),r.emit("leaveGame",{gameId:a}),n("/"))}),[r,d,a,n]),N=l.useCallback((e=>{x(!1),r&&a&&e&&(h(null),r.emit("joinGame",{gameId:a,password:e}),u(!0))}),[r,a]),y=l.useCallback((()=>{x(!1),n("/")}),[n]);l.useEffect((()=>{h(null),x(!1),u(!0)}),[a]),l.useEffect((()=>{if(!r)return;const e=e=>{e&&e.game&&e.game.id===a&&(s.play("ui.join"),u(!1),h(null),x(!1))},t=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(x(!0),u(!1),h(null)):"Invalid password"===a?(h("Invalid password."),x(!0),u(!1)):"Game not found"===a?n("/"):"Game is full"===a?(h(a),u(!1),x(!1),setTimeout((()=>n("/")),3e3)):(h(a),u(!1),x(!1))};return r.on("gameJoined",e),r.on("error",t),()=>{r.off("gameJoined",e),r.off("error",t)}}),[r,a,n]),l.useEffect((()=>{r&&a&&!j.current&&(j.current=!0,u(!0),h(null),x(!1),r.emit("joinGame",{gameId:a}))}),[r,a]);const f=()=>{const{gameState:s}=L(),{socket:n}=e();return l.useEffect((()=>{const e=e=>{const a=n?.auth?.userId,t=a&&s?.players?s.players[a]:null;if(t?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,n]),t.jsxs(t.Fragment,{children:[t.jsx($t,{isOpen:p,onClose:y,onSubmit:N,gameId:a}),m&&t.jsx(i,{message:`Joining game ${a}...`}),_&&!m&&!p&&t.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[t.jsx("h2",{children:"An error occurred"}),t.jsx("p",{children:_}),t.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!m&&!_&&s&&t.jsx(bt,{onReturnToLobby:g})]})};return t.jsx(q,{gameId:a,children:t.jsx(f,{})})};export{Pt as default};
