import{ac as N,ad as z,ae as W,E as F,F as O,G,h as U,K as H,O as q,af as Y,R as _,T as j,a as X,ag as K,S as V,ah as Z,Q as J,b as Q,A as $,c as ee,d as te,f as se,L as ne,g as ae,ai as oe,e as re,M as ie,N as le,aj as ce,i as ue,J as de,l as fe,I as me,H as ge,ak as he,al as pe,am as be,r as ve,j as we,s as Ae,k as Ee,m as ke,o as Ce,p as ye,an as Ie,q as Me,t as Se,u as Pe,v as Re,D as xe,C as Te,ao as Le,w as De,x as Be,y as Ne,z as ze,B as We}from"./index-Bg6RFtxx.js";import{r as m}from"./vendor-BGrsVhb6.js";const Ge=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:N,AuthCredential:z,EmailAuthCredential:W,EmailAuthProvider:F,FacebookAuthProvider:O,GithubAuthProvider:G,GoogleAuthProvider:U,OAuthCredential:H,OAuthProvider:q,PhoneAuthCredential:Y,RecaptchaVerifier:_,TwitterAuthProvider:j,applyActionCode:X,beforeAuthStateChanged:K,browserLocalPersistence:V,browserPopupRedirectResolver:Z,browserSessionPersistence:J,confirmPasswordReset:Q,connectAuthEmulator:$,createUserWithEmailAndPassword:ee,deleteUser:te,fetchSignInMethodsForEmail:se,getAdditionalUserInfo:ne,getAuth:ae,getIdTokenResult:oe,getRedirectResult:re,inMemoryPersistence:ie,indexedDBLocalPersistence:le,initializeAuth:ce,isSignInWithEmailLink:ue,linkWithCredential:de,linkWithPhoneNumber:fe,linkWithPopup:me,linkWithRedirect:ge,onAuthStateChanged:he,onIdTokenChanged:pe,prodErrorMap:be,reload:ve,revokeAccessToken:we,sendEmailVerification:Ae,sendPasswordResetEmail:Ee,sendSignInLinkToEmail:ke,setPersistence:Ce,signInAnonymously:ye,signInWithCredential:Ie,signInWithCustomToken:Me,signInWithEmailAndPassword:Se,signInWithEmailLink:Pe,signInWithPhoneNumber:Re,signInWithPopup:xe,signInWithRedirect:Te,signOut:Le,unlink:De,updateEmail:Be,updatePassword:Ne,updateProfile:ze,verifyBeforeUpdateEmail:We},Symbol.toStringTag,{value:"Module"})),Ue=(p=!0)=>{const[A,k]=m.useState(null),[i,L]=m.useState([]),[D,B]=m.useState(!1),[M,S]=m.useState(!1),x=m.useRef(0),P=m.useRef({}),E=m.useCallback(()=>{if(!p)return;const f=Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).filter(o=>{const b=o.getBoundingClientRect();if(b.width===0&&b.height===0){const t=o.closest("label")||o.closest('[class*="toggle"]')||o.parentElement;if(t){const l=t.getBoundingClientRect();if(l.width===0||l.height===0)return!1}else return!1}const u=document.querySelectorAll('[class*="modal"], [class*="Modal"], [role="dialog"], [class*="overlay"]');if(u.length>0){const t=Array.from(u).filter(l=>{const c=l.className;return c.includes("modal")||c.includes("Modal")||l.getAttribute("role")==="dialog"});if(t.length>0){const c=t.sort((n,v)=>{let h=parseInt(window.getComputedStyle(n).zIndex)||0,r=parseInt(window.getComputedStyle(v).zIndex)||0;if(h===0){const e=n.parentElement;e&&e.classList.toString().includes("overlay")&&(h=parseInt(window.getComputedStyle(e).zIndex)||0)}if(r===0){const e=v.parentElement;e&&e.classList.toString().includes("overlay")&&(r=parseInt(window.getComputedStyle(e).zIndex)||0)}return r-h})[0];return c&&c.contains(o)}}return!0});L(o=>o.length!==f.length||!o.every((b,u)=>b===f[u])?f:o)},[p]),g=m.useCallback(s=>{const f=Date.now();if(f-x.current<150||(x.current=f,!i.length))return;S(!0);const o=document.activeElement;let b=A;o&&o.getAttribute("data-gamepad-focusable")==="true"&&i.includes(o)&&(b=o,k(o));const u=i.findIndex(n=>n===b);if(u===-1||!b){const n=i[0];k(n),n.focus();return}const t=i[u];if(t?.getAttribute("data-gamepad-scrollable")==="true"&&(s==="up"||s==="down")){const v=t.scrollTop<=0,h=t.scrollTop>=t.scrollHeight-t.clientHeight;if(s==="up"&&!v){t.scrollTop=Math.max(0,t.scrollTop-50);return}if(s==="down"&&!h){t.scrollTop=Math.min(t.scrollHeight-t.clientHeight,t.scrollTop+50);return}}let c=null;if(s==="up"||s==="down"){let n=t?.getBoundingClientRect();if(!n)return;if(n.width===0&&n.height===0){const r=t.closest("label"),e=t.closest('[class*="toggle"]')||t.closest('[class*="Toggle"]'),a=r||e||t.parentElement;a&&(n=a.getBoundingClientRect())}const v=n.left+n.width/2,h=i.map((r,e)=>({el:r,index:e,rect:r.getBoundingClientRect()})).filter(({el:r,rect:e,index:a})=>a===u?!1:s==="up"?e.bottom<=n.top+20:e.top>=n.bottom-20);if(h.length>0)c=h.map(e=>({...e,horizontalDistance:Math.abs(e.rect.left+e.rect.width/2-v),verticalDistance:s==="up"?n.top-e.rect.bottom:e.rect.top-n.bottom})).sort((e,a)=>{const d=e.horizontalDistance-a.horizontalDistance;if(Math.abs(d)>100)return d;const w=e.verticalDistance-a.verticalDistance;return Math.abs(w)>10?w:d})[0].el;else{const r=i.filter((e,a)=>a!==u).map((e,a)=>({el:e,rect:e.getBoundingClientRect()}));if(r.length>0){const e=s==="up"?0:window.innerHeight;c=r.reduce((d,w)=>{const y=Math.abs(w.rect.top-e),I=Math.abs(d.rect.top-e);return y<I?w:d}).el}else s==="up"?c=i[i.length-1]:c=i[0]}}else{const n=t?.getBoundingClientRect();if(!n)s==="left"?c=u>0?i[u-1]:i[i.length-1]:c=u<i.length-1?i[u+1]:i[0];else{const v=n.top+n.height/2,h=Math.max(n.height/2,20),r=i.map((a,d)=>({el:a,index:d,rect:a.getBoundingClientRect()})).filter(({rect:a,index:d})=>{const w=a.top+a.height/2;return Math.abs(w-v)<=h}).sort((a,d)=>a.rect.left-d.rect.left),e=r.findIndex(({el:a})=>a===t);e!==-1&&r.length>1?s==="left"?c=e>0?r[e-1].el:null:c=e<r.length-1?r[e+1].el:null:c=null}}c&&(k(c),c.focus())},[i,A]),C=m.useCallback(()=>{const s=document.activeElement?.getAttribute("data-gamepad-focusable")==="true"?document.activeElement:A;s&&(S(!0),s.click())},[A]);return m.useEffect(()=>{if(!p)return;const s=f=>{if(!(document.activeElement&&(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")&&f.key==="Enter"))switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"," "].includes(f.key)&&f.preventDefault(),f.key){case"ArrowUp":g("up");break;case"ArrowDown":g("down");break;case"ArrowLeft":g("left");break;case"ArrowRight":g("right");break;case"Enter":case" ":C();break}};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[g,C,p]),m.useEffect(()=>{if(!p)return;let s;const f=()=>{const o=navigator.getGamepads();let b=!1;for(let u=0;u<o.length;u++){const t=o[u];if(t&&t.connected){b=!0,P.current[u]||(P.current[u]={});const l=P.current[u],c=t.buttons[12]?.pressed,n=t.buttons[13]?.pressed,v=t.buttons[14]?.pressed,h=t.buttons[15]?.pressed,r=t.buttons[0]?.pressed;c&&!l.up&&g("up"),n&&!l.down&&g("down"),v&&!l.left&&g("left"),h&&!l.right&&g("right"),r&&!l.a&&C(),l.up=c,l.down=n,l.left=v,l.right=h,l.a=r;const e=t.axes[0]||0,a=t.axes[1]||0,d=.3;!l.stickMoved&&(Math.abs(e)>d||Math.abs(a)>d)?(Math.abs(e)>Math.abs(a)?e>d?g("right"):e<-d&&g("left"):a>d?g("down"):a<-d&&g("up"),l.stickMoved=!0):Math.abs(e)<=d&&Math.abs(a)<=d&&(l.stickMoved=!1);const w=t.axes[2]||0,y=t.axes[3]||0,I=.2,T=8;if(Math.abs(y)>I){const R=y*T;window.scrollBy(0,R)}if(Math.abs(w)>I){const R=w*T;window.scrollBy(R,0)}}}B(b),s=requestAnimationFrame(f)};return f(),()=>{s&&cancelAnimationFrame(s)}},[g,C,p]),m.useEffect(()=>{if(!p)return;const s=()=>{S(!1)};return document.addEventListener("mousemove",s),()=>document.removeEventListener("mousemove",s)},[p]),m.useEffect(()=>(M?document.body.classList.add("gamepad-navigation-active"):document.body.classList.remove("gamepad-navigation-active"),()=>{document.body.classList.remove("gamepad-navigation-active")}),[M]),m.useEffect(()=>{if(i.length>0&&!A){const s=i[0];k(s)}},[i.length]),m.useEffect(()=>{if(!p)return;const s=f=>{const o=f.target;o&&o.getAttribute("data-gamepad-focusable")==="true"&&(E(),setTimeout(()=>{Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).includes(o)&&k(o)},0))};return document.addEventListener("focus",s,!0),()=>{document.removeEventListener("focus",s,!0)}},[p,E]),m.useEffect(()=>{if(!p)return;const s=new MutationObserver(E);return s.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-gamepad-focusable","disabled"]}),E(),()=>s.disconnect()},[E,p]),{focusedElement:A,isGamepadConnected:D,showFocusIndicator:M,registerNavigableElements:E}};export{Ge as i,Ue as u};
