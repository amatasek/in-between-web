import{b as e,a,s,j as t,U as n,f as r,L as i}from"./index-9FNDV-VY.js";import{r as l,e as c,u as o}from"./vendor-D3vErxIQ.js";import{C as d,a as m,R as u,P as _,S as h,I as x,c as g,b as p,g as j,G as b,U as N}from"./GamepadInput-BYKH3vjn.js";import{u as v}from"./useGamepadNavigation-Tj-O-nX_.js";import"./audio-D4HOgbU8.js";import"./socket-DfKCw8Ob.js";const f="ðŸ¯",y="ðŸƒ",C="âœ“",I="ðŸƒ",{TIMERS:w}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},k=l.createContext(),S=()=>{const e=l.useContext(k);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},T=({children:n,gameId:r,initialGameState:i=null})=>{const{socket:c,error:o}=e(),{user:d}=a(),[m,u]=l.useState(i);l.useRef({});const _=l.useRef(null),[h,x]=l.useState(null),g=l.useCallback((()=>{x(null)}),[]);l.useEffect((()=>{o&&x(o)}),[o]),l.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{u(e.game),x(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(m)!==JSON.stringify(e)){if(e.currentPlayerId&&d?.id){const a=e.currentPlayerId===d.id,t=_.current===d.id;a&&!t&&s.play("ui.alert"),_.current=e.currentPlayerId}u(e),g()}})),c.on("gameError",(e=>{x(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const p=l.useCallback((e=>{if(c&&r)try{c.emit("placeBet",{bet:e,gameId:r})}catch(a){x("Failed to place bet. Please try again.")}}),[c,r]),j=l.useCallback((()=>{if(c&&r)try{c.emit("payAnte",{gameId:r})}catch(e){x("Failed to pay ante. Please try again.")}}),[c,r]),b=l.useCallback((()=>{if(c&&r)try{c.emit("dealCards",{gameId:r})}catch(e){x("Failed to deal cards. Please try again.")}}),[c,r]),N=l.useCallback((()=>{if(c&&r)try{c.emit("revealMiddleCard",{gameId:r})}catch(e){x("Failed to reveal middle card. Please try again.")}}),[c,r]),v=l.useCallback((()=>{if(c&&r)try{c.emit("nextRound",{gameId:r})}catch(e){x("Failed to move to next round. Please try again.")}}),[c,r]),f=l.useCallback((()=>{if(c&&r)try{c.emit("ready")}catch(e){x("Failed to set player ready. Please try again.")}}),[c,r]),y=l.useCallback((()=>{if(c&&r)try{c.emit("unready")}catch(e){x("Failed to set player unready. Please try again.")}}),[c,r]),C={gameState:m,error:h,gameId:r,placeBet:p,payAnte:j,playerReady:f,playerUnready:y,dealCards:b,revealMiddleCard:N,nextRound:v,clearError:g};return t.jsx(k.Provider,{value:C,children:n})},A="_gameContainer_126jq_1",B="_gameScreen_126jq_5",P="_loadingContainer_126jq_31",R="_errorContainer_126jq_40",L="_errorText_126jq_50",E="_gameInfoWrapper_126jq_55",$="_gameBottomSection_126jq_70",O={headerContainer:"_headerContainer_7fahv_1",desktopLayout:"_desktopLayout_7fahv_7",mobileLayout:"_mobileLayout_7fahv_13",mobileTopRow:"_mobileTopRow_7fahv_19",mobileRight:"_mobileRight_7fahv_31",mobileActions:"_mobileActions_7fahv_38",mobileBottomRow:"_mobileBottomRow_7fahv_45",headerLeft:"_headerLeft_7fahv_54",headerRight:"_headerRight_7fahv_60",controlsGroup:"_controlsGroup_7fahv_66",controlsStack:"_controlsStack_7fahv_73",mobileControlsStack:"_mobileControlsStack_7fahv_80",gameTitle:"_gameTitle_7fahv_89",liveTag:"_liveTag_7fahv_99",pulse:"_pulse_7fahv_1",gameIdText:"_gameIdText_7fahv_151",gameIdLink:"_gameIdLink_7fahv_158",headerCenter:"_headerCenter_7fahv_195",gamePhase:"_gamePhase_7fahv_223",phaseIcon:"_phaseIcon_7fahv_285",phaseText:"_phaseText_7fahv_290",timerBar:"_timerBar_7fahv_294",timerProgress:"_timerProgress_7fahv_304",dealPulse:"_dealPulse_7fahv_1",betPulse:"_betPulse_7fahv_1",revealFade:"_revealFade_7fahv_1",resultPulse:"_resultPulse_7fahv_1",phaseBettingYourTurn:"_phaseBettingYourTurn_7fahv_458",phaseBettingWaiting:"_phaseBettingWaiting_7fahv_465",reveal:"_reveal_7fahv_1",sparkle:"_sparkle_7fahv_1",timerDrain:"_timerDrain_7fahv_1"},D=({color:e="currentColor",size:a=24})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),F={waiting:{text:"Waiting for Players",icon:"ðŸ‘¥"},dealing:{text:"Dealing Cards",icon:y},revealing:{text:"Revealing Cards",icon:"ðŸ¥"},results:{text:"Round Results",icon:"ðŸ†"}},z=({handleLeaveGame:s,onModalStateChange:n})=>{const{gameState:r,gameId:i}=S(),{socket:c}=e(),{user:o}=a(),j=c?.auth?.userId,b=j&&r?.players?r.players[j]:null,N=b?.balance??o?.balance??0,v=r?.phase||"waiting",f=b?.isReady||!1,[y,C]=l.useState(null),[I,k]=l.useState(!1),[T,A]=l.useState(!1),[B,P]=l.useState(!1),[R,L]=l.useState(!1),[E,$]=l.useState(!1);l.useEffect((()=>{let e;return"dealing"===v?(C(w.DEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"betting"===v?(C(w.BETTING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"revealing"===v?(C(w.REVEALING_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):"results"===v?(C(w.RESULTS_DURATION),e=setInterval((()=>{C((e=>Math.max(0,e-100)))}),100)):C(null),()=>{e&&clearInterval(e)}}),[v,r?.waitingForAceDecision]),l.useEffect((()=>{n&&n(I||T||B||R||E)}),[I,T,B,R,E,n]);let z=F[v]||{text:"Unknown Phase",icon:"â“"};r?.waitingForAceDecision&&"dealing"===v&&(z={text:"Choosing Ace Value",icon:"ðŸ¤”"}),r?.waitingForSecondChance&&(z={text:"Second Chance Decision",icon:"ðŸ¤”"});const G=c&&c.auth?.userId&&r?.currentPlayerId===c.auth.userId;if("betting"===v&&r?.currentPlayerId&&r?.players){const e=r.players[r.currentPlayerId];z=e?G?{text:"Pass or Bet",icon:"ðŸ¤”"}:{text:`${e.name} is Betting`,icon:"ðŸ¤”"}:{text:"Betting Round",icon:"ðŸ¤”"}}return t.jsxs("div",{className:O.headerContainer,children:[t.jsxs("div",{className:`panel ${O.desktopLayout}`,children:[t.jsxs("div",{className:O.headerLeft,children:[t.jsxs("h1",{className:O.gameTitle,children:["In Between ",t.jsx("span",{className:O.liveTag,children:"LIVE"})]}),t.jsx("p",{className:O.gameIdText,children:t.jsxs("span",{className:O.gameIdLink,onClick:()=>k(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",i]})})]}),t.jsx("div",{className:O.headerCenter,children:t.jsxs("div",{className:`${O.gamePhase} ${"betting"===v?G?O.phaseBettingYourTurn:O.phaseBettingWaiting:O[`phase${v.charAt(0).toUpperCase()+v.slice(1)}`]}`,"data-phase":v,children:[t.jsx("span",{className:O.phaseIcon,children:z.icon}),t.jsx("span",{className:O.phaseText,children:z.text}),null!==y&&t.jsx("div",{className:O.timerBar,children:t.jsx("div",{className:O.timerProgress,style:{width:y/("dealing"===v?w.DEALING_DURATION:"betting"===v?w.BETTING_DURATION:"revealing"===v?w.REVEALING_DURATION:w.RESULTS_DURATION)*100+"%"}})})]})}),t.jsx("div",{className:O.headerRight,children:t.jsxs("div",{className:O.controlsStack,children:[t.jsx("div",{className:"panel-alt",style:{padding:"0.2rem 0.4rem",margin:"0 0 0.2rem 0",gap:"0.25rem"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem",fontWeight:600,color:"var(--text-primary)"},children:[t.jsx("span",{children:"Balance:"}),t.jsx(d,{amount:Number(N),size:"small"})]})}),t.jsxs("div",{className:O.controlsGroup,children:[t.jsx(m,{onModalStateChange:P,"data-gamepad-focusable":"true"}),t.jsx(u,{onModalStateChange:L,"data-gamepad-focusable":"true"}),t.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),t.jsx(h,{onClick:()=>A(!0),"data-gamepad-focusable":"true"}),t.jsx(x,{icon:t.jsx(D,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:f,"data-gamepad-focusable":"true"})]})]})})]}),t.jsxs("div",{className:`panel ${O.mobileLayout}`,children:[t.jsxs("div",{className:O.mobileTopRow,children:[t.jsxs("div",{className:O.headerLeft,children:[t.jsxs("h1",{className:O.gameTitle,children:["In Between ",t.jsx("span",{className:O.liveTag,children:"LIVE"})]}),t.jsx("p",{className:O.gameIdText,children:t.jsxs("span",{className:O.gameIdLink,onClick:()=>k(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",i]})})]}),t.jsx("div",{className:O.mobileRight,children:t.jsxs("div",{className:O.mobileControlsStack,children:[t.jsx("div",{className:"panel-alt",style:{padding:"0.15rem 0.35rem",margin:"0 0 0.2rem 0",gap:"0.25rem"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem",fontWeight:600,color:"#ecf0f1"},children:[t.jsx("span",{children:"Balance:"}),t.jsx(d,{amount:Number(N),size:"small"})]})}),t.jsxs("div",{className:O.mobileActions,children:[t.jsx(m,{onModalStateChange:P,"data-gamepad-focusable":"true"}),t.jsx(u,{onModalStateChange:L,"data-gamepad-focusable":"true"}),t.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),t.jsx(h,{onClick:()=>A(!0),"data-gamepad-focusable":"true"}),t.jsx(x,{icon:t.jsx(D,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:f,"data-gamepad-focusable":"true"})]})]})})]}),t.jsx("div",{className:O.mobileBottomRow,children:t.jsxs("div",{className:`${O.gamePhase} ${"betting"===v?G?O.phaseBettingYourTurn:O.phaseBettingWaiting:O[`phase${v.charAt(0).toUpperCase()+v.slice(1)}`]}`,"data-phase":v,children:[t.jsx("span",{className:O.phaseIcon,children:z.icon}),t.jsx("span",{className:O.phaseText,children:z.text}),null!==y&&t.jsx("div",{className:O.timerBar,children:t.jsx("div",{className:O.timerProgress,style:{width:y/("dealing"===v?w.DEALING_DURATION:"betting"===v?w.BETTING_DURATION:"revealing"===v?w.REVEALING_DURATION:w.RESULTS_DURATION)*100+"%"}})})]})})]}),I&&t.jsx(g,{onClose:()=>k(!1),gameData:r}),T&&t.jsx(p,{onClose:()=>A(!1)})]})},G={cardDisplayContainer:"_cardDisplayContainer_bxh0s_1",cardsRow:"_cardsRow_bxh0s_9",card:"_card_bxh0s_1",dealingPhase:"_dealingPhase_bxh0s_53",revealingPhase:"_revealingPhase_bxh0s_62",cardBack:"_cardBack_bxh0s_88",redCard:"_redCard_bxh0s_98",blackCard:"_blackCard_bxh0s_102",cardCorner:"_cardCorner_bxh0s_106",bottomRight:"_bottomRight_bxh0s_115",cardValue:"_cardValue_bxh0s_123",cardSuit:"_cardSuit_bxh0s_129",cardCenter:"_cardCenter_bxh0s_134",aceCard:"_aceCard_bxh0s_167",aceIndicator:"_aceIndicator_bxh0s_171",aceHigh:"_aceHigh_bxh0s_191",aceLow:"_aceLow_bxh0s_197",indicatorContent:"_indicatorContent_bxh0s_203"},U=({direction:e="up",color:a="currentColor",size:s=24})=>{const n="down"===e?"rotate(180deg)":"rotate(0deg)";return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:t.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},W=()=>{const{gameState:e}=S(),[a,s]=l.useState(j());if(l.useEffect((()=>{const e=()=>{s(j())};return window.addEventListener("cardbackchange",e),()=>window.removeEventListener("cardbackchange",e)}),[]),!e)return t.jsx("div",{className:G.loading,children:"Loading game state..."});const{firstCard:n,secondCard:r,thirdCard:i,phase:c,dealer:o}=e,d={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},m={hearts:"â™¥",diamonds:"â™¦",clubs:"â™£",spades:"â™ ","â™¥":"â™¥","â™¦":"â™¦","â™£":"â™£","â™ ":"â™ "},u=(e,s)=>{if(!e)return t.jsx("div",{className:G.card,children:t.jsx("div",{className:G.cardBack,style:{backgroundImage:`url(${a})`}})},`empty-${s}`);const n="â™¥"===(r=e.suit)||"â™¦"===r||"hearts"===r||"diamonds"===r;var r;const i="A"===e.value,l=e.isAceLow,c=1===s;return t.jsxs("div",{className:`${G.card} ${n?G.redCard:G.blackCard} ${i?G.aceCard:""}`,children:[i&&!c&&t.jsx("div",{className:`${G.aceIndicator} ${l?G.aceLow:G.aceHigh} ${n?G.redCard:G.blackCard}`,children:l?t.jsxs("span",{className:G.indicatorContent,children:["LOW ",t.jsx(U,{direction:"down",color:n?"#e74c3c":"#2c3e50",size:16})]}):t.jsxs("span",{className:G.indicatorContent,children:["HIGH ",t.jsx(U,{direction:"up",color:n?"#e74c3c":"#2c3e50",size:16})]})}),t.jsxs("div",{className:G.cardCorner,children:[t.jsx("div",{className:G.cardValue,children:d[e.value]}),t.jsx("div",{className:G.cardSuit,children:m[e.suit]})]}),t.jsx("div",{className:G.cardCenter,children:m[e.suit]}),t.jsxs("div",{className:`${G.cardCorner} ${G.bottomRight}`,children:[t.jsx("div",{className:G.cardValue,children:d[e.value]}),t.jsx("div",{className:G.cardSuit,children:m[e.suit]})]})]},`${e.value}-${e.suit}-${s}`)};return t.jsx("div",{className:G.cardDisplayContainer,children:t.jsx("div",{className:`${G.cardsRow} ${"dealing"===c?G.dealingPhase:""} ${"revealing"===c?G.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return n||r||i?(n&&(e[0]={...n}),r&&(e[2]={...r}),i&&(e[1]={...i}),e.map(((e,a)=>u(e,a)))):e.map(((e,a)=>u(e,a)))})()})})},M="_bettingPanel_r2326_1",q="_betContainer_r2326_19",V="_betText_r2326_28",H="_extremeOptionsRow_r2326_45",J="_betButtons_r2326_60",Y="_customBetContainer_r2326_78",K="_customBetInput_r2326_90",Q="_potButton_1wzdu_5",X="_shimmerBorder_1wzdu_47",Z="_buttonBackground_1wzdu_81",ee="_reflectionEffect_1wzdu_101",ae="_buttonContent_1wzdu_148",se="_potText_1wzdu_164",te="_potAmount_1wzdu_185",ne="_disabled_1wzdu_258",re=({amount:e,disabled:a,onClick:s,...n})=>t.jsxs("button",{className:`${Q} ${a?ne:""}`,onClick:s,disabled:a,"aria-label":`Bet the pot: ${e} chips`,...n,children:[t.jsx("div",{className:X}),t.jsx("div",{className:Z}),t.jsx("div",{className:ee}),t.jsxs("div",{className:ae,children:[t.jsx("span",{className:se,children:"POT"}),t.jsx("span",{className:te,children:t.jsx(d,{amount:e,background:"pill"})})]})]}),ie=()=>{const{gameState:a,placeBet:s}=S(),{socket:n}=e(),[r,i]=l.useState("");if(!a)return null;const{players:c,currentPlayerId:o,pot:m,phase:u,firstCard:_,secondCard:h}=a;if("betting"!==u)return null;const x=n&&o===n.auth?.userId,g=n&&c&&n.auth?.userId?c[n.auth.userId]:null,p=Number(g?.balance||0),j=e=>{const a=e.target.value.replace(/[^0-9]/g,""),s=Math.min(m,p);a&&parseInt(a)>s?i(s.toString()):i(a)},N=()=>{if(r&&!isNaN(r)){const e=parseInt(r,10);e>=1&&e<=Math.min(m,p)&&(s(e),i(""))}},v=e=>{"Enter"===e.key&&N()};return x?t.jsx("div",{className:M,children:x?t.jsxs("div",{className:q,children:[t.jsxs("p",{className:V,children:["Place your bet (Min: ",t.jsx(d,{amount:1}),", Max: ",t.jsx(d,{amount:Math.min(m,p)}),")"]}),t.jsxs("div",{className:H,children:[t.jsx("button",{className:"btn btn-secondary",style:{flex:1},onClick:()=>s(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),t.jsx(re,{amount:m,onClick:()=>s(m),disabled:m>p,"data-gamepad-focusable":"true"})]}),t.jsxs("div",{className:J,children:[[1,2,5].map((e=>{const a=Math.min(m,p),n=e>a;return t.jsx("button",{className:"btn btn-tertiary",style:{minWidth:"40px",padding:"0.65rem 0.4rem",fontSize:"0.95rem"},onClick:()=>s(e),disabled:n,"data-gamepad-focusable":"true",children:t.jsx(d,{amount:e})},e)})),t.jsxs("div",{className:Y,children:[t.jsx(b,{title:"Enter Bet Amount",type:"number",className:K,placeholder:"Custom",value:r,onChange:j,onKeyPress:v}),t.jsx("button",{className:"btn btn-primary",style:{minWidth:"40px",padding:"0.65rem 0.4rem",fontSize:"0.95rem"},onClick:N,disabled:!r,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},le="_playersContainer_16b1x_1",ce="_playersTitle_16b1x_23",oe="_playersList_16b1x_47",de="_currentPlayerGlow_16b1x_57",me="_currentUser_16b1x_71",ue="_playerInfo_16b1x_75",_e="_playerStatus_16b1x_83",he="_disconnectedIndicator_16b1x_90",xe="_playerBalanceContainer_16b1x_97",ge="_playerBalance_16b1x_97",pe="_balanceIncrease_16b1x_116",je="_balanceDecrease_16b1x_120",be="_readyIndicator_16b1x_150",Ne="_ready_16b1x_150",ve="_notReady_16b1x_161",fe="_sittingOut_16b1x_165",ye="_emptyPlayerList_16b1x_180",Ce=()=>{const{gameState:a}=S(),{socket:s}=e(),r=l.useContext(n);if(l.useEffect((()=>{if(a?.players&&r){const e=Object.values(a.players).map((e=>e.userId)).filter(Boolean);e.length>0&&r.prefetchUsers(e)}}),[a?.players,r]),!a||!a.players)return t.jsx("div",{className:ye,children:t.jsx("p",{children:"Waiting for game data..."})});const{players:i,currentPlayerId:c,dealerId:o,gameTransactions:d=[]}=a,m=s?.auth?.userId,u=a.totals||{};return i&&0!==Object.keys(i).length?t.jsxs("div",{className:le,children:[t.jsx("h3",{className:ce,children:"Scoreboard"}),t.jsx("div",{className:oe,children:a.seats.filter((e=>null!==e&&i[e])).map((e=>{const a=i[e],s=e===c,n=a.userId===m,r=e===o;return a.disconnected,t.jsxs("div",{className:`\n                  ${s?"panel":"panel-alt"}\n                  ${s?de:""}\n                  ${n?me:""}\n                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{className:ue,children:[t.jsx(N,{userId:a.userId,size:"small",showName:!0,namePosition:"right"}),t.jsxs("span",{className:_e,children:[r&&` ${y}`,a.disconnected&&t.jsx("span",{className:he,title:"Player disconnected",children:"âš ï¸ Disconnected"})]})]}),t.jsxs("div",{className:xe,children:[t.jsx(Ie,{balance:u[e]||0}),t.jsx("div",{className:`\n                    ${be} \n                    ${a.isSittingOut?fe:a.isReady?Ne:ve}\n                  `,title:a.isSittingOut?"Sitting Out":a.isReady?"Ready":"Not Ready"})]})]},e)}))})]}):t.jsx("div",{className:ye,children:t.jsx("p",{children:"Waiting for players to join..."})})},Ie=({balance:e})=>{const[a,s]=l.useState(e),[n,r]=l.useState(""),i=l.useRef(null);return l.useEffect((()=>{if(e!==a){r(e>a?pe:je),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{r("")}),1e3),s(e)}return()=>{i.current&&clearTimeout(i.current)}}),[e]),t.jsx("span",{className:`${ge} ${n}`,children:t.jsx(d,{amount:e})})},we="_potIconWrapper_58b18_2",ke="_potIcon_58b18_2",Se="_potInfo_58b18_28",Te="_potLabel_58b18_34",Ae="_potAmount_58b18_46",Be="_potCounter_58b18_53",Pe=()=>{const{gameState:e}=S();if(!e)return null;const{pot:a,round:s=1}=e;return t.jsxs("div",{className:"card",style:{width:"150px",padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",border:"2px solid #f1c40f"},children:[t.jsx("div",{className:we,children:t.jsx("span",{className:ke,children:f})}),t.jsxs("div",{className:Se,children:[t.jsxs("h3",{className:Te,children:["POT ",t.jsxs("span",{className:Be,children:["(",s,")"]})]}),t.jsx("span",{className:Ae,children:t.jsx(d,{amount:a,size:"medium"})})]})]})},Re="_deckVisual_nb490_2",Le="_deckIcon_nb490_9",Ee="_deckInfo_nb490_25",$e="_deckLabel_nb490_31",Oe="_deckCount_nb490_43",De="_deckCounter_nb490_50",Fe=()=>{const{gameState:e}=S();if(!e)return null;const{deckSize:a=0,deckCount:s=1}=e;return t.jsxs("div",{className:"card",style:{width:"150px",padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",border:"2px solid var(--accent2)"},children:[t.jsx("div",{className:Re,children:t.jsx("div",{className:Le,children:I})}),t.jsxs("div",{className:Ee,children:[t.jsxs("h3",{className:$e,children:["DECK ",t.jsxs("span",{className:De,children:["(",s,")"]})]}),t.jsx("span",{className:Oe,children:a})]})]})},ze="_anteControlsWrapper_ypuxr_1",Ge="_controlsContainer_ypuxr_8",Ue="_autoAnteContainer_ypuxr_25",We="_anteButton_ypuxr_32",Me="_backOutButton_ypuxr_32",qe="_shimmerBorder_ypuxr_106",Ve="_anteIcon_ypuxr_224",He="_backOutIcon_ypuxr_224",Je="_buttonInfo_ypuxr_243",Ye="_buttonLabel_ypuxr_249",Ke="_buttonAmount_ypuxr_266",Qe="_notEnoughChipsText_ypuxr_281",Xe="_buttonContainerRow_ypuxr_293",Ze="_sitOutHalfWidth_ypuxr_303",ea="_toggleLabel_8n6m6_2",aa="_toggleInput_8n6m6_9",sa="_toggleSlider_8n6m6_15",ta="_toggleText_8n6m6_64",na="_loading_8n6m6_72",ra=()=>{const{preferences:a,toggleAutoAnte:s,loading:n}=r(),{gameState:i,playerReady:l}=S(),{socket:c}=e();return n?t.jsx("div",{className:na,children:"Loading preferences..."}):t.jsx("div",{className:"panel-alt",style:{padding:"0.5rem 0.75rem",gap:"0",marginTop:"5px",maxWidth:"fit-content"},children:t.jsxs("label",{className:ea,children:[t.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{const e=!a.autoAnte,t=await s();if(e&&t&&l){let e=null;if(c&&c.auth?.userId&&i?.players){const a=Object.keys(i.players);for(const s of a)if(i.players[s].userId===c.auth.userId){e=i.players[s];break}}const a=e?.isReady;a||l()}},className:aa,"data-gamepad-focusable":"true"}),t.jsx("span",{className:sa}),t.jsx("span",{className:ta,children:"Auto-Ante"})]})})},ia=()=>{const{gameState:s,playerReady:n,playerUnready:r}=S(),{socket:i}=e(),{user:l}=a();if(!s)return null;const{players:c,anteAmount:o,phase:m}=s;if("waiting"!==m)return null;let u=null;if(i&&i.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.auth.userId){u=c[a];break}}else if(l&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.id){u=c[a];break}}const _=Number(u?.balance||0),h=u?.isReady,x=_>=o;return t.jsx("div",{className:ze,children:t.jsxs("div",{className:Ge,children:[t.jsx("div",{className:Xe,children:h?t.jsx("div",{className:Xe,children:t.jsxs("button",{className:Me,onClick:()=>{"function"==typeof r&&r()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:qe}),t.jsx("span",{className:He,children:"âœ•"}),t.jsx("div",{className:Je,children:t.jsx("h3",{className:Ye,children:"BACK OUT"})})]})}):t.jsxs("div",{className:Xe,children:[t.jsxs("button",{className:We,onClick:n,disabled:!x,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("div",{className:qe}),t.jsx("span",{className:Ve,children:C}),t.jsxs("div",{className:Je,children:[t.jsx("h3",{className:Ye,children:"ANTE"}),t.jsx("span",{className:Ke,children:t.jsx(d,{amount:o})})]})]}),t.jsxs("button",{className:`${Me} ${Ze}`,onClick:()=>{i&&s&&l&&i.emit("sitOut",{gameId:s.id,userId:i.auth?.userId||l.id})},disabled:u?.isSittingOut,title:u?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:qe}),t.jsx("div",{className:Je,children:t.jsx("h3",{className:Ye,children:"SIT OUT"})})]}),!x&&t.jsxs("p",{className:Qe,children:["Not enough coins (",t.jsx(d,{amount:o})," required)"]})]})}),t.jsx("div",{className:Ue,children:t.jsx(ra,{})})]})})},la={resultContent:"_resultContent_8ie9r_4",resultText:"_resultText_8ie9r_12",winText:"_winText_8ie9r_19",tieText:"_tieText_8ie9r_24",loseText:"_loseText_8ie9r_35",winningsText:"_winningsText_8ie9r_40",countdownContainer:"_countdownContainer_8ie9r_47",countdownText:"_countdownText_8ie9r_52",countdownProgress:"_countdownProgress_8ie9r_59",countdownBar:"_countdownBar_8ie9r_67",penaltyWarning:"_penaltyWarning_8ie9r_80",tiePanel:"_tiePanel_8ie9r_90"},ca=()=>{const{gameState:e}=S();if(!e.result)return null;const{result:a,players:s,resultCountdown:n}=e,r=s[a.playerId]?.name,i="tie"===a.outcome?`panel-alt ${la.tiePanel}`:"panel-alt";return t.jsx("div",{className:i,style:{maxWidth:"500px",margin:"1rem auto",width:"90%",animation:"fadeIn 0.5s ease-out"},children:t.jsxs("div",{className:la.resultContent,children:[(()=>{switch(a.outcome){case"win":return t.jsxs(t.Fragment,{children:[t.jsxs("h2",{className:`${la.resultText} ${la.winText}`,children:[r," WON!"]}),a.winnings>0&&t.jsxs("p",{className:la.winningsText,children:["Winnings: ",t.jsx(d,{amount:a.winnings/2,size:"medium"})]})]});case"lose":return t.jsxs(t.Fragment,{children:[t.jsxs("h2",{className:`${la.resultText} ${la.loseText}`,children:[r," LOST!"]}),a.betAmount>0&&t.jsxs("p",{className:la.winningsText,children:["Loss: ",t.jsx(d,{amount:a.betAmount,size:"medium"})]})]});case"tie":return(()=>{const e=a.betAmount*(a.isTripleAceTie?3:2);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:la.penaltyWarning,children:t.jsx("div",{className:la.cautionTape})}),t.jsxs("h2",{className:`${la.resultText} ${la.tieText}`,children:[r," ",a.isTripleAceTie?"3X":"2X"," PENALTY!"]}),a.betAmount>0&&t.jsxs("p",{className:la.winningsText,children:["Penalty: ",t.jsx(d,{amount:e,size:"medium"})]})]})})();default:return null}})(),n&&t.jsxs("div",{className:la.countdownContainer,children:[t.jsxs("p",{className:la.countdownText,children:["Next hand in: ",n.countdownSeconds,"s"]}),t.jsx("div",{className:la.countdownProgress,children:t.jsx("div",{className:la.countdownBar,style:{width:n.countdownSeconds/5*100+"%"}})})]})]})})},oa="_aceChoicePanel_xp6de_1",da="_aceChoiceText_xp6de_19",ma="_waitingText_xp6de_28",ua="_countdown_xp6de_35",_a="_aceChoiceButtons_xp6de_41",ha="_buttonContent_xp6de_50",xa=()=>{const{socket:s}=e(),{gameState:n}=S(),{user:r}=a(),[i,c]=l.useState(15);l.useEffect((()=>{if(n?.waitingForAceDecision&&s?.auth?.userId===n.currentPlayerId){c(15);const e=setInterval((()=>{c((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[n?.waitingForAceDecision,n?.currentPlayerId,s?.auth?.userId]);const o=e=>{s.emit("chooseAceValue",{isAceLow:e})},d=s?.auth?.userId===n.currentPlayerId,m=n.players[n.currentPlayerId]?.name||"Current player";return t.jsxs("div",{className:oa,children:[d?t.jsxs("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem",alignItems:"center"},children:[t.jsxs("p",{className:da,children:["You've been dealt an Ace! Choose whether it should be high or low.",t.jsxs("span",{className:ua,children:[" (",i,"s)"]})]}),t.jsxs("div",{className:_a,children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>o(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:t.jsxs("span",{className:ha,children:["ACE LOW ",t.jsx(U,{direction:"down",color:"white",size:20})]})}),t.jsx("button",{className:"btn btn-tertiary",onClick:()=>o(!1),"data-gamepad-focusable":"true",children:t.jsxs("span",{className:ha,children:["ACE HIGH ",t.jsx(U,{direction:"up",color:"white",size:20})]})})]})]}):null,d?null:t.jsx("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem"},children:t.jsxs("p",{className:ma,children:[m," is choosing whether their Ace is high or low..."]})})]})},ga="_secondChancePanel_1sg84_1",pa="_secondChanceText_1sg84_19",ja="_waitingText_1sg84_29",ba="_countdown_1sg84_36",Na="_secondChanceButtons_1sg84_43",va="_currencyWrapper_1sg84_95",fa=()=>{const{gameState:a}=S(),{socket:s}=e(),[n,r]=l.useState(!1),[i,c]=l.useState(null),[o,m]=l.useState(15);l.useEffect((()=>{if(a?.waitingForSecondChance&&s?.auth?.userId===a.currentPlayerId){m(15);const e=setInterval((()=>{m((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[a?.waitingForSecondChance,a?.currentPlayerId,s?.auth?.userId]);const{players:u,currentPlayerId:_,anteAmount:h=1}=a,x=s&&_===s.auth?.userId,g=u[_],p=e=>{s&&(r(!0),c(e?"ante":"pass"),s.emit("secondChance",{anteAgain:e}))};return t.jsxs("div",{className:ga,children:[x?t.jsxs("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem",alignItems:"center"},children:[t.jsxs("p",{className:pa,children:["Would you like to ante up again for a second chance?",t.jsxs("span",{className:ba,children:[" (",o,"s)"]})]}),t.jsxs("div",{className:Na,children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>p(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:n&&"ante"===i?"Processing...":t.jsxs(t.Fragment,{children:["Ante Up ",t.jsx("span",{className:va,children:t.jsx(d,{amount:h,size:"small"})})]})}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>p(!1),"data-gamepad-focusable":"true",children:n&&"pass"===i?"Processing...":"Pass"})]})]}):null,x?null:t.jsx("div",{className:"panel-alt",style:{width:"100%",marginBottom:"0.5rem"},children:t.jsxs("p",{className:ja,children:[g?.name," is deciding whether to take a second chance."]})})]})},ya="_gameLogContainer_16qz1_1",Ca="_gameLogHeader_16qz1_16",Ia="_expandIcon_16qz1_30",wa="_gameLogEntries_16qz1_54",ka="_logEntry_16qz1_64",Sa="_logTime_16qz1_89",Ta="_logMessage_16qz1_96",Aa="_emptyLog_16qz1_101",Ba="_showMoreButton_16qz1_109",Pa=()=>{const{gameState:e}=S(),[a,s]=l.useState(!1),[n,r]=l.useState(10);if(!e||!e.gameLog)return null;const i=e.gameLog||[],c=a?[]:i.slice(0,n);return t.jsxs("div",{className:ya,children:[t.jsxs("h3",{className:Ca,onClick:()=>{s(!a),a&&r(10)},children:["Game Log",t.jsx("span",{className:Ia,children:a?"â–¶":"â–¼"})]}),!a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:wa,children:0===i.length?t.jsx("div",{className:Aa,children:"No game events yet"}):c.map(((e,a)=>{return t.jsxs("div",{className:ka,children:[t.jsx("span",{className:Sa,children:(s=e.timestamp,new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),t.jsx("span",{className:Ta,children:e.message})]},a);var s}))}),i.length>n&&t.jsxs("div",{className:Ba,onClick:()=>{r((e=>e+10))},children:["Show ",Math.min(10,i.length-n)," more",i.length-n>10&&` (${i.length-n} remaining)`]})]})]})},Ra="_emojiReactions_1y1z5_1",La="_toggleButton_1y1z5_8",Ea="_emojiPanel_1y1z5_35",$a="_emojiGrid_1y1z5_60",Oa="_emojiButton_1y1z5_66",Da=()=>{const[s,n]=l.useState(!1),{socket:r}=e(),{gameState:i}=S(),{user:c}=a();return t.jsxs("div",{className:Ra,children:[t.jsx("button",{className:La,onClick:()=>{n(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ðŸ˜Š"}),s&&t.jsx("div",{className:Ea,children:t.jsx("div",{className:$a,children:[{emoji:"ðŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ðŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ðŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ðŸ˜Ž",name:"Cool",color:"#4A5568"},{emoji:"ðŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ðŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ðŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ðŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ðŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ðŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ðŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ðŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ðŸŽ‰",name:"Celebration",color:"#A855F7"},{emoji:"ðŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ðŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ðŸ˜¤",name:"Confident",color:"#DC2626"}].map(((e,a)=>t.jsx("button",{className:Oa,onClick:()=>(e=>{r&&i&&c&&(r.emit("emojiReaction",{gameId:i.id,emoji:e.emoji,color:e.color,playerName:c.username}),n(!1))})(e),"data-gamepad-focusable":"true",title:e.name,style:{"--emoji-color":e.color},children:e.emoji},a)))})})]})},Fa=({onReturnToLobby:s})=>{const[n,r]=l.useState(!1),{gameState:i,error:c,clearError:o}=S();v(!0),l.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=e(),{user:m}=a();if(!i)return t.jsx("div",{className:P,children:t.jsx("p",{children:"Loading game state..."})});const u=i.phase||"waiting",_=m?.id,h=i.players&&_?i.players[_]:null;return t.jsxs("div",{className:`screen ${A}`,children:[t.jsxs("div",{className:`${B} mobile-scale-content`,children:[t.jsx(z,{handleLeaveGame:()=>{s&&s()},onModalStateChange:r}),c&&t.jsx("div",{className:R,children:t.jsx("p",{className:L,children:c})}),t.jsxs("div",{className:E,children:[t.jsx(Fe,{}),t.jsx(Pe,{})]}),t.jsx(W,{}),h?.isSittingOut?t.jsx("button",{onClick:()=>{d&&i.id&&d.emit("imBack",{gameId:i.id})},className:"btn btn-primary",style:{maxWidth:"300px"},"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===u?t.jsx(ia,{}):"results"===u?t.jsx(ca,{}):i.waitingForAceDecision?t.jsx(xa,{}):i.waitingForSecondChance?t.jsx(fa,{}):"betting"===u?t.jsx(ie,{}):null,t.jsxs("div",{className:$,children:[t.jsx(Ce,{}),t.jsx(Pa,{})]})]}),!n&&t.jsx(Da,{})]})},za="_modalOverlay_jrbqi_1",Ga="_modalContent_jrbqi_14",Ua="_passwordInput_jrbqi_34",Wa="_modalActions_jrbqi_52",Ma="_modalButton_jrbqi_58",qa="_cancelButton_jrbqi_69",Va="_submitButton_jrbqi_78";function Ha({isOpen:e,onClose:a,onSubmit:s,gameId:n}){const[r,i]=l.useState("");if(!e)return null;return t.jsx("div",{className:za,children:t.jsxs("div",{className:Ga,children:[t.jsx("h2",{children:"Password Required"}),t.jsxs("p",{children:["Please enter the password for game ",t.jsx("strong",{children:n||""}),":"]}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),s(r),i("")},children:[t.jsx(b,{title:"Enter Game Password",type:"password",value:r,onChange:e=>i(e.target.value),className:Ua,autoFocus:!0,required:!0}),t.jsxs("div",{className:Wa,children:[t.jsx("button",{type:"button",onClick:()=>{i(""),a()},className:`${Ma} ${qa}`,"data-gamepad-focusable":"true",children:"Cancel"}),t.jsx("button",{type:"submit",className:`${Ma} ${Va}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const Ja=()=>{const{gameId:a}=c(),n=o(),{socket:r,isConnected:d}=e(),[m,u]=l.useState(!0),[_,h]=l.useState(null),[x,g]=l.useState(!1),p=l.useRef(!1),j=l.useCallback((()=>{r&&d&&a&&(s.play("ui.leave"),r.emit("leaveGame",{gameId:a}),n("/"))}),[r,d,a,n]),b=l.useCallback((e=>{g(!1),r&&a&&e&&(h(null),r.emit("joinGame",{gameId:a,password:e}),u(!0))}),[r,a]),N=l.useCallback((()=>{g(!1),n("/")}),[n]);l.useEffect((()=>{h(null),g(!1),u(!0)}),[a]),l.useEffect((()=>{if(!r)return;const e=e=>{e&&e.game&&e.game.id===a&&(s.play("ui.join"),u(!1),h(null),g(!1))},t=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(g(!0),u(!1),h(null)):"Invalid password"===a?(h("Invalid password."),g(!0),u(!1)):"Game not found"===a?n("/"):"Game is full"===a?(h(a),u(!1),g(!1),setTimeout((()=>n("/")),3e3)):(h(a),u(!1),g(!1))};return r.on("gameJoined",e),r.on("error",t),()=>{r.off("gameJoined",e),r.off("error",t)}}),[r,a,n]),l.useEffect((()=>{r&&a&&!p.current&&(p.current=!0,u(!0),h(null),g(!1),r.emit("joinGame",{gameId:a}))}),[r,a]);const v=()=>{const{gameState:s}=S(),{socket:n}=e();return l.useEffect((()=>{const e=e=>{const a=n?.auth?.userId,t=a&&s?.players?s.players[a]:null;if(t?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,n]),t.jsxs(t.Fragment,{children:[t.jsx(Ha,{isOpen:x,onClose:N,onSubmit:b,gameId:a}),m&&t.jsx(i,{message:`Joining game ${a}...`}),_&&!m&&!x&&t.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[t.jsx("h2",{children:"An error occurred"}),t.jsx("p",{children:_}),t.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!m&&!_&&s&&t.jsx(Fa,{onReturnToLobby:j})]})};return t.jsx(T,{gameId:a,children:t.jsx(v,{})})};export{Ja as default};
