{"version":3,"mappings":";wzBAEIA,EAAIC,eAEeD,EAAEE,yBACDF,EAAEG;;;;;;;;;OCK1B,WAWE,IAAIC,EAAe,WACjBC,KAAKC,MACN,EACDF,EAAaG,UAAY,CAKvBD,KAAM,WACJ,IAAIE,EAAOH,MAAQI,EA8BZD,OA3BPA,EAAKE,SAAW,IAGhBF,EAAKG,gBAAkB,GACvBH,EAAKI,cAAgB,GAGrBJ,EAAKK,QAAU,CAAE,EACjBL,EAAKM,OAAS,GACdN,EAAKO,QAAS,EACdP,EAAKQ,QAAU,EACfR,EAAKS,cAAgB,iBACrBT,EAAKU,WAAgC,oBAAXC,QAA0BA,OAAOC,UAAaD,OAAOC,UAAY,KAG3FZ,EAAKa,WAAa,KAClBb,EAAKc,SAAU,EACfd,EAAKe,eAAgB,EACrBf,EAAKgB,aAAc,EACnBhB,EAAKiB,IAAM,KAGXjB,EAAKkB,YAAa,EAGlBlB,EAAKmB,SAEEnB,CACR,EAODoB,OAAQ,SAASC,GACf,IAAIrB,EAAOH,MAAQI,EAQnB,GAPAoB,EAAMC,WAAWD,GAGZrB,EAAKiB,KACWM,SAGF,IAARF,GAAuBA,GAAO,GAAKA,GAAO,EAAG,CAItD,GAHArB,EAAKQ,QAAUa,EAGXrB,EAAKO,OACAP,SAILA,EAAKe,eACPf,EAAKa,WAAWW,KAAKC,eAAeJ,EAAKpB,EAAOgB,IAAIS,aAItD,QAASC,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC,IAAK3B,EAAKM,OAAOqB,GAAGE,UAKlB,IAHA,IAAIC,EAAM9B,EAAKM,OAAOqB,GAAGI,eAGhBC,EAAE,EAAGA,EAAEF,EAAIF,OAAQI,IAAK,CAC3B,IAAAC,EAAQjC,EAAKM,OAAOqB,GAAGO,WAAWJ,EAAIE,IAEtCC,GAASA,EAAME,QACXF,EAAAE,MAAMf,OAASa,EAAMzB,QAAUa,GAMtCrB,SAGT,OAAOA,EAAKQ,OACb,EAMD4B,KAAM,SAASC,GACb,IAAIrC,EAAOH,MAAQI,EAGdD,EAAKiB,KACWM,IAGrBvB,EAAKO,OAAS8B,EAGVrC,EAAKe,eACPf,EAAKa,WAAWW,KAAKC,eAAeY,EAAQ,EAAIrC,EAAKQ,QAASP,EAAOgB,IAAIS,aAI3E,QAASC,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC,IAAK3B,EAAKM,OAAOqB,GAAGE,UAKlB,IAHA,IAAIC,EAAM9B,EAAKM,OAAOqB,GAAGI,eAGhBC,EAAE,EAAGA,EAAEF,EAAIF,OAAQI,IAAK,CAC3B,IAAAC,EAAQjC,EAAKM,OAAOqB,GAAGO,WAAWJ,EAAIE,IAEtCC,GAASA,EAAME,QACjBF,EAAME,MAAME,QAASA,GAAgBJ,EAAM1B,QAM5CP,QACR,EAKDsC,KAAM,WAIJ,IAHA,IAAItC,EAAOH,MAAQI,EAGV0B,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC3B,EAAKM,OAAOqB,GAAGW,OAGVtC,QACR,EAMDuC,OAAQ,WAGN,IAFA,IAAIvC,EAAOH,MAAQI,EAEV0B,EAAE3B,EAAKM,OAAOsB,OAAO,EAAGD,GAAG,EAAGA,IACrC3B,EAAKM,OAAOqB,GAAGY,SAUVvC,OANHA,EAAKe,eAAiBf,EAAKiB,UAAiC,IAAnBjB,EAAKiB,IAAIuB,QACpDxC,EAAKiB,IAAIuB,QACTxC,EAAKiB,IAAM,KACQM,KAGdvB,CACR,EAODyC,OAAQ,SAASC,GACf,OAAQ7C,MAAQI,GAAQI,QAAQqC,EAAIC,QAAQ,MAAO,IACpD,EAMDxB,OAAQ,WACN,IAAInB,EAAOH,MAAQI,EASf,GANJD,EAAK4C,MAAQ5C,EAAKiB,KAAMjB,EAAKiB,IAAI2B,OAAuB,YAGxD5C,EAAK6C,gBAGA7C,EAAKe,cAEJ,GAAiB,oBAAV+B,MACL,SAImC,KAH1B,IAAIA,OAGCC,mBACd/C,EAAKS,cAAgB,UAExB,OAAOuC,GACNhD,EAAKc,SAAU,OAGjBd,EAAKc,SAAU,EAKf,KACS,IAAIgC,OACNT,QACPrC,EAAKc,SAAU,EAElB,OAAQkC,GAAG,CAOLhD,OAJFA,EAAKc,SACRd,EAAKiD,eAGAjD,CACR,EAMDiD,aAAc,WACZ,IAAIjD,EAAOH,MAAQI,EACfiD,EAAY,KAGZ,IACFA,EAA8B,oBAAVJ,MAAyB,IAAIA,MAAU,IAC5D,OAAQK,GACAnD,SAGT,IAAKkD,GAA8C,mBAA1BA,EAAUE,YAC1BpD,SAGT,IAAIqD,EAAWH,EAAUE,YAAY,eAAeT,QAAQ,OAAQ,IAGhEW,EAAKtD,EAAKU,WAAaV,EAAKU,WAAW6C,UAAY,GACnDC,EAAaF,EAAGG,MAAM,eACtBC,EAAcF,GAAcG,SAASH,EAAW,GAAGI,MAAM,KAAK,GAAI,IAAM,GACxEC,GAA6C,IAA/BP,EAAGQ,QAAQ,YAA6C,IAAzBR,EAAGQ,QAAQ,UACxDC,EAAgBT,EAAGG,MAAM,mBACzBO,EAAeH,GAAeE,GAAiBJ,SAASI,EAAc,GAAI,IAAM,GAoB7E/D,OAlBPA,EAAKK,QAAU,CACb4D,MAASP,IAAeL,IAAYH,EAAUE,YAAY,cAAcT,QAAQ,OAAQ,KACxFuB,OAAQb,EACRc,OAAQjB,EAAUE,YAAY,4BAA4BT,QAAQ,OAAQ,IAC1EyB,MAAOlB,EAAUE,YAAY,8BAA8BT,QAAQ,OAAQ,IAC3E0B,MAAOnB,EAAUE,YAAY,8BAA8BT,QAAQ,OAAQ,IAC3E2B,OAAQpB,EAAUE,YAAY,0BAA4BF,EAAUE,YAAY,cAAcT,QAAQ,OAAQ,IAC9G4B,MAAOrB,EAAUE,YAAY,cAAcT,QAAQ,OAAQ,IAC3D6B,MAAOtB,EAAUE,YAAY,gBAAgBT,QAAQ,OAAQ,IAC7D8B,OAAQvB,EAAUE,YAAY,iBAAmBF,EAAUE,YAAY,eAAiBF,EAAUE,YAAY,eAAeT,QAAQ,OAAQ,IAC7I+B,OAAQxB,EAAUE,YAAY,iBAAmBF,EAAUE,YAAY,eAAiBF,EAAUE,YAAY,eAAeT,QAAQ,OAAQ,IAC7IgC,OAAQzB,EAAUE,YAAY,iBAAmBF,EAAUE,YAAY,eAAiBF,EAAUE,YAAY,eAAeT,QAAQ,OAAQ,IAC7IiC,OAAUZ,IAAed,EAAUE,YAAY,+BAA+BT,QAAQ,OAAQ,KAC9FkC,OAAUb,IAAed,EAAUE,YAAY,+BAA+BT,QAAQ,OAAQ,KAC9FmC,QAAS5B,EAAUE,YAAY,4BAA4BT,QAAQ,OAAQ,IAC3EoC,QAAS7B,EAAUE,YAAY,kBAAoBF,EAAUE,YAAY,gBAAgBT,QAAQ,OAAQ,KAGpG3C,CACR,EAQDgF,aAAc,WACZ,IAAIhF,EAAOH,MAAQI,EAGnB,IAAID,EAAKiF,gBAAmBjF,EAAKiB,IAAjC,CAIAjB,EAAKiF,gBAAiB,EACtBjF,EAAKkB,YAAa,EAKblB,EAAKkF,iBAA2C,QAAxBlF,EAAKiB,IAAIkE,aACpCnF,EAAKkF,iBAAkB,EACvBlF,EAAKuC,UAKPvC,EAAKoF,eAAiBpF,EAAKiB,IAAIoE,aAAa,EAAG,EAAG,OAK9C,IAAAC,EAAS,SAAStC,GAOpB,KAAOhD,EAAKG,gBAAgByB,OAAS5B,EAAKI,eACpC,IACE,IAAAmF,EAAY,IAAIzC,MAIpByC,EAAUC,WAAY,EAGtBxF,EAAKyF,mBAAmBF,EACzB,OAAQvC,GACPhD,EAAKc,SAAU,EACf,MAKJ,QAASa,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC,IAAK3B,EAAKM,OAAOqB,GAAGE,UAKlB,IAHA,IAAIC,EAAM9B,EAAKM,OAAOqB,GAAGI,eAGhBC,EAAE,EAAGA,EAAEF,EAAIF,OAAQI,IAAK,CAC3B,IAAAC,EAAQjC,EAAKM,OAAOqB,GAAGO,WAAWJ,EAAIE,IAEtCC,GAASA,EAAME,QAAUF,EAAME,MAAMqD,YACvCvD,EAAME,MAAMqD,WAAY,EACxBvD,EAAME,MAAMuD,QAOpB1F,EAAK2F,cAGD,IAAAC,EAAS5F,EAAKiB,IAAI4E,qBACtBD,EAAOE,OAAS9F,EAAKoF,eACdQ,EAAAG,QAAQ/F,EAAKiB,IAAI+E,kBAGI,IAAjBJ,EAAOK,MAChBL,EAAOM,OAAO,GAEdN,EAAOK,MAAM,GAIgB,mBAApBjG,EAAKiB,IAAIkF,QAClBnG,EAAKiB,IAAIkF,SAIXP,EAAOQ,QAAU,WACfR,EAAOS,WAAW,GAGlBrG,EAAKiF,gBAAiB,EAGbqB,SAAAC,oBAAoB,aAAcjB,GAAQ,GAC1CgB,SAAAC,oBAAoB,WAAYjB,GAAQ,GACxCgB,SAAAC,oBAAoB,QAASjB,GAAQ,GACrCgB,SAAAC,oBAAoB,UAAWjB,GAAQ,GAGhD,QAAS3D,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC3B,EAAKM,OAAOqB,GAAG6E,MAAM,SAExB,CACF,EAQMxG,OALEsG,SAAAG,iBAAiB,aAAcnB,GAAQ,GACvCgB,SAAAG,iBAAiB,WAAYnB,GAAQ,GACrCgB,SAAAG,iBAAiB,QAASnB,GAAQ,GAClCgB,SAAAG,iBAAiB,UAAWnB,GAAQ,GAEtCtF,EACR,EAOD0G,kBAAmB,WACjB,IAAI1G,EAAOH,MAAQI,EAGfD,KAAKG,gBAAgByB,OAChB5B,SAAKG,gBAAgBwG,MAI9B,IAAIC,GAAW,IAAI9D,OAAQ+D,OAO3B,OANID,GAA+B,oBAAZE,UAA4BF,aAAoBE,SAAoC,mBAAlBF,EAASG,OAChGH,EAASI,OAAM,WAEvB,IAGa,IAAIlE,KACZ,EAMD2C,mBAAoB,SAASwB,GAC3B,IAAIjH,EAAOH,MAAQI,EAOZD,OAJHiH,EAAMzB,WACRxF,EAAKG,gBAAgB+G,KAAKD,GAGrBjH,CACR,EAOD6C,aAAc,WACZ,IAAI7C,EAAOH,KAEX,GAAKG,EAAKgB,aAAgBhB,EAAKiB,UAAmC,IAArBjB,EAAKiB,IAAIkG,SAA4BlH,EAAOc,cAAzF,CAKA,QAASY,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC,GAAI3B,EAAKM,OAAOqB,GAAGE,UACR,QAAAG,EAAE,EAAGA,EAAEhC,EAAKM,OAAOqB,GAAGyF,QAAQxF,OAAQI,IACzC,IAAChC,EAAKM,OAAOqB,GAAGyF,QAAQpF,GAAGqF,QACtBrH,SAkCRA,OA5BHA,EAAKsH,eACPC,aAAavH,EAAKsH,eAIpBtH,EAAKsH,cAAgBE,YAAW,WAC1B,GAACxH,EAAKgB,YAAN,CAIJhB,EAAKsH,cAAgB,KACrBtH,EAAK4C,MAAQ,aAGb,IAAI6E,EAAmB,WACrBzH,EAAK4C,MAAQ,YAET5C,EAAK0H,6BACA1H,EAAK0H,oBACZ1H,EAAK2F,cAER,EAID3F,EAAKiB,IAAIkG,UAAUJ,KAAKU,EAAkBA,GAC3C,GAAE,KAEIzH,EACR,EAMD2F,YAAa,WACX,IAAI3F,EAAOH,KAEP,GAACG,EAAKiB,UAAkC,IAApBjB,EAAKiB,IAAIkF,QAA2BlG,EAAOc,cAyB5Df,MArBY,YAAfA,EAAK4C,OAA0C,gBAAnB5C,EAAKiB,IAAI2B,OAA2B5C,EAAKsH,eACvEC,aAAavH,EAAKsH,eAClBtH,EAAKsH,cAAgB,MACG,cAAftH,EAAK4C,OAAwC,YAAf5C,EAAK4C,OAA0C,gBAAnB5C,EAAKiB,IAAI2B,OAC5E5C,EAAKiB,IAAIkF,SAASY,MAAK,WACrB/G,EAAK4C,MAAQ,UAGb,QAASjB,EAAE,EAAGA,EAAE3B,EAAKM,OAAOsB,OAAQD,IAClC3B,EAAKM,OAAOqB,GAAG6E,MAAM,SAEjC,IAEYxG,EAAKsH,gBACPC,aAAavH,EAAKsH,eAClBtH,EAAKsH,cAAgB,OAEC,eAAftH,EAAK4C,QACd5C,EAAK0H,qBAAsB,GAGtB1H,IAKPC,MAAS,IAAIL,EASb+H,EAAO,SAASC,GAIbA,EAAEC,KAAwB,IAAjBD,EAAEC,IAAIjG,QAHT/B,KAQNC,KAAK8H,EACX,EACDD,EAAK5H,UAAY,CAMfD,KAAM,SAAS8H,GACb,IAAI5H,EAAOH,KA2EJG,OAxEFC,EAAOgB,KACSM,IAIrBvB,EAAK8H,UAAYF,EAAEG,WAAY,EAC/B/H,EAAKgI,QAA+B,iBAAbJ,EAAEK,OAAuBL,EAAEK,OAAS,CAACL,EAAEK,QAC9DjI,EAAKkI,OAASN,EAAEO,QAAS,EACzBnI,EAAKO,OAASqH,EAAExF,OAAQ,EACxBpC,EAAKoI,MAAQR,EAAES,OAAQ,EACvBrI,EAAKsI,MAAQV,EAAEW,MAAQ,EACvBvI,EAAKwI,SAAiC,kBAAdZ,EAAEa,SAAuC,aAAdb,EAAEa,SAA0Bb,EAAEa,QACjFzI,EAAK0I,MAAQd,EAAEe,MAAQ,EACvB3I,EAAK4I,QAAUhB,EAAEiB,QAAU,CAAE,EAC7B7I,EAAK8I,KAAyB,iBAAVlB,EAAEC,IAAoBD,EAAEC,IAAM,CAACD,EAAEC,KACrD7H,EAAKQ,aAAuB,IAAboH,EAAExG,OAAuBwG,EAAExG,OAAS,EACnDpB,EAAK+I,KAAO,CACVC,OAAQpB,EAAEqB,KAAOrB,EAAEqB,IAAID,OAASpB,EAAEqB,IAAID,OAAS,MAC/CE,QAAStB,EAAEqB,KAAOrB,EAAEqB,IAAIC,QAAUtB,EAAEqB,IAAIC,QAAU,KAClDC,mBAAiBvB,EAAEqB,MAAOrB,EAAEqB,IAAIE,kBAAkBvB,EAAEqB,IAAIE,iBAI1DnJ,EAAKoJ,UAAY,EACjBpJ,EAAKqJ,OAAS,WACdrJ,EAAKoH,QAAU,GACfpH,EAAKsJ,WAAa,CAAE,EACpBtJ,EAAKuJ,OAAS,GACdvJ,EAAKwJ,WAAY,EAGjBxJ,EAAKyJ,OAAS7B,EAAE8B,MAAQ,CAAC,CAACC,GAAI/B,EAAE8B,QAAU,GAC1C1J,EAAK4J,QAAUhC,EAAEiC,OAAS,CAAC,CAACF,GAAI/B,EAAEiC,SAAW,GAC7C7J,EAAK8J,QAAUlC,EAAEmC,OAAS,CAAC,CAACJ,GAAI/B,EAAEmC,SAAW,GAC7C/J,EAAKgK,aAAepC,EAAEqC,YAAc,CAAC,CAACN,GAAI/B,EAAEqC,cAAgB,GAC5DjK,EAAKkK,aAAetC,EAAEuC,YAAc,CAAC,CAACR,GAAI/B,EAAEuC,cAAgB,GAC5DnK,EAAKoK,SAAWxC,EAAEyC,QAAU,CAAC,CAACV,GAAI/B,EAAEyC,UAAY,GAChDrK,EAAKsK,QAAU1C,EAAE2C,OAAS,CAAC,CAACZ,GAAI/B,EAAE2C,SAAW,GAC7CvK,EAAKwK,QAAU5C,EAAE6C,OAAS,CAAC,CAACd,GAAI/B,EAAE6C,SAAW,GAC7CzK,EAAK0K,QAAU9C,EAAE+C,OAAS,CAAC,CAAChB,GAAI/B,EAAE+C,SAAW,GAC7C3K,EAAK4K,UAAYhD,EAAEiD,SAAW,CAAC,CAAClB,GAAI/B,EAAEiD,WAAa,GACnD7K,EAAK8K,QAAUlD,EAAEmD,OAAS,CAAC,CAACpB,GAAI/B,EAAEmD,SAAW,GAC7C/K,EAAKgL,QAAUpD,EAAEqD,OAAS,CAAC,CAACtB,GAAI/B,EAAEqD,SAAW,GAC7CjL,EAAKkL,UAAYtD,EAAEuD,SAAW,CAAC,CAACxB,GAAI/B,EAAEuD,WAAa,GACnDnL,EAAKoL,UAAY,GAGjBpL,EAAK6B,UAAY5B,EAAOc,gBAAkBf,EAAKkI,YAGrB,IAAfjI,EAAOgB,KAAuBhB,EAAOgB,KAAOhB,EAAOiB,YAC5DjB,EAAO+E,eAIT/E,EAAOK,OAAO4G,KAAKlH,GAGfA,EAAK8H,WACP9H,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAK6G,UAMP7G,EAAKwI,UAA8B,SAAlBxI,EAAKwI,UACxBxI,EAAK0F,OAGA1F,CACR,EAMD0F,KAAM,WACJ,IAAI1F,EAAOH,KACP0L,EAAM,KAGV,GAAItL,EAAOa,QACTd,EAAKwG,MAAM,YAAa,KAAM,yBADhC,CAMyB,iBAAdxG,EAAK8I,OACd9I,EAAK8I,KAAO,CAAC9I,EAAK8I,OAIpB,QAASnH,EAAE,EAAGA,EAAE3B,EAAK8I,KAAKlH,OAAQD,IAAK,CACrC,IAAIe,EAAK8I,EAET,GAAIxL,EAAKgI,SAAWhI,EAAKgI,QAAQrG,GAEzB3B,IAAKgI,QAAQrG,OACd,CAGD,GAAe,iBADb3B,IAAK8I,KAAKnH,IACa,CAC3B3B,EAAKwG,MAAM,YAAa,KAAM,0DAC9B,UAII9D,EAAA,0BAA0B+I,KAAKD,MAE7B9I,EAAA,aAAa+I,KAAKD,EAAI5H,MAAM,IAAK,GAAG,KAGxClB,IACIA,IAAI,GAAGgJ,eAUjB,GAAIhJ,GAAOzC,EAAOwC,OAAOC,GAAM,CAC7B6I,EAAMvL,EAAK8I,KAAKnH,GAChB,OAIJ,GAAK4J,EAuBEvL,OAlBPA,EAAK8I,KAAOyC,EACZvL,EAAKqJ,OAAS,UAImB,WAA7B1I,OAAOgL,SAASC,UAA6C,UAApBL,EAAIM,MAAM,EAAG,KACxD7L,EAAKkI,QAAS,EACdlI,EAAK6B,WAAY,GAInB,IAAIiK,EAAM9L,GAGNA,EAAK6B,WACPkK,EAAW/L,GAGNA,EAtBLA,EAAKwG,MAAM,YAAa,KAAM,gDAuBjC,EAQDK,KAAM,SAASgC,EAAQmD,GACrB,IAAIhM,EAAOH,KACPoM,EAAK,KAGL,GAAkB,iBAAXpD,EACJoD,EAAApD,EACIA,EAAA,SACV,IAA4B,iBAAXA,GAAuC,WAAhB7I,EAAKqJ,SAAwBrJ,EAAK4I,QAAQC,GAE1E,YACf,QAAmC,IAAXA,IAEPA,EAAA,aAIJ7I,EAAKwJ,WAAW,CAEnB,IADA,IAAI0C,EAAM,EACDvK,EAAE,EAAGA,EAAE3B,EAAKoH,QAAQxF,OAAQD,IAC/B3B,EAAKoH,QAAQzF,GAAG0F,UAAYrH,EAAKoH,QAAQzF,GAAGwK,SAC9CD,IACKlM,IAAKoH,QAAQzF,GAAGyK,KAIb,IAARF,EACOrD,EAAA,KAEJoD,EAAA,MAMX,IAAIhK,EAAQgK,EAAKjM,EAAKkC,WAAW+J,GAAMjM,EAAKqM,iBAG5C,IAAKpK,EACI,YAWLjC,GAPAiM,IAAOpD,IACTA,EAAS5G,EAAM2G,SAAW,aAMR,WAAhB5I,EAAKqJ,OAAqB,CAE5BpH,EAAM2G,QAAUC,EAGhB5G,EAAMkK,QAAS,EAGf,IAAIG,EAAUrK,EAAMmK,IAQb,OAPPpM,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAK6G,KAAKyF,MAIPA,EAIL,GAAAL,IAAOhK,EAAMoF,QAMf,OAJK2E,GACHhM,EAAKuM,WAAW,QAGXtK,EAAMmK,IAIXpM,EAAK6B,WACP5B,EAAO0F,cAIT,IAAI6G,EAAOC,KAAKC,IAAI,EAAGzK,EAAM0K,MAAQ,EAAI1K,EAAM0K,MAAQ3M,EAAK4I,QAAQC,GAAQ,GAAK,KAC7E+D,EAAWH,KAAKC,IAAI,GAAK1M,EAAK4I,QAAQC,GAAQ,GAAK7I,EAAK4I,QAAQC,GAAQ,IAAM,IAAQ2D,GACtFK,EAAsB,IAAXD,EAAmBH,KAAKK,IAAI7K,EAAMyG,OAC7CzC,EAAQjG,EAAK4I,QAAQC,GAAQ,GAAK,IAClCvG,GAAQtC,EAAK4I,QAAQC,GAAQ,GAAK7I,EAAK4I,QAAQC,GAAQ,IAAM,IACjE5G,EAAM2G,QAAUC,EAIhB5G,EAAMkK,QAAS,EAGf,IAAIY,EAAY,WACd9K,EAAMoF,SAAU,EAChBpF,EAAM0K,MAAQH,EACdvK,EAAM+K,OAAS/G,EACfhE,EAAMgL,MAAQ3K,EACRL,EAAAmG,SAAWnG,EAAMmG,QAASpI,EAAK4I,QAAQC,GAAQ,GACtD,EAGD,KAAI2D,GAAQlK,GAAZ,CAMA,IAAI4K,EAAOjL,EAAME,MACjB,GAAInC,EAAK6B,UAAW,CAElB,IAAIsL,EAAe,WACjBnN,EAAKwJ,WAAY,EACNuD,IACX/M,EAAKoN,eAAenL,GAGpB,IAAIZ,EAAOY,EAAM1B,QAAUP,EAAKO,OAAU,EAAI0B,EAAMzB,QACpD0M,EAAK1L,KAAKC,eAAeJ,EAAKpB,EAAOgB,IAAIS,aACnCO,EAAAoL,WAAapN,EAAOgB,IAAIS,iBAGS,IAA5BwL,EAAKI,aAAarH,MAC3BhE,EAAMmG,MAAQ8E,EAAKI,aAAaC,YAAY,EAAGf,EAAM,OAASU,EAAKI,aAAaC,YAAY,EAAGf,EAAMI,GAErG3K,EAAMmG,MAAQ8E,EAAKI,aAAarH,MAAM,EAAGuG,EAAM,OAASU,EAAKI,aAAarH,MAAM,EAAGuG,EAAMI,GAIvFC,IAAYW,MACdxN,EAAKsJ,WAAWrH,EAAMmK,KAAO5E,WAAWxH,EAAKmM,OAAOsB,KAAKzN,EAAMiC,GAAQ4K,IAGpEb,GACHxE,YAAW,WACTxH,EAAKwG,MAAM,OAAQvE,EAAMmK,KACzBpM,EAAKuM,YACN,GAAE,EAEN,EAEoB,YAAjBtM,EAAO2C,OAA4C,gBAArB3C,EAAOgB,IAAI2B,MAC7BuK,KAEdnN,EAAKwJ,WAAY,EAGjBxJ,EAAK0N,KAAK,SAAUP,GAGpBnN,EAAK2N,YAAY1L,EAAMmK,KAEjC,KAAa,CAEL,IAAIwB,EAAY,WACdV,EAAKxL,YAAc8K,EACnBU,EAAK7K,MAAQJ,EAAM1B,QAAUP,EAAKO,QAAUN,EAAOM,QAAU2M,EAAK7K,MAClE6K,EAAK9L,OAASa,EAAMzB,QAAUP,EAAOmB,SACrC8L,EAAKW,aAAe5L,EAAMyG,MAGtB,IACE,IAAA7B,EAAOqG,EAAKrG,OAwChB,GArCIA,GAA2B,oBAAZC,UAA4BD,aAAgBC,SAAgC,mBAAdD,EAAKE,OAEpF/G,EAAKwJ,WAAY,EAGNuD,IAGXlG,EACGE,MAAK,WACJ/G,EAAKwJ,WAAY,EACjB0D,EAAK1H,WAAY,EACZwG,EAGHhM,EAAKuM,aAFLvM,EAAKwG,MAAM,OAAQvE,EAAMmK,IAI5B,IACApF,OAAM,WACLhH,EAAKwJ,WAAY,EACjBxJ,EAAKwG,MAAM,YAAavE,EAAMmK,IAAK,+IAInCnK,EAAMkK,QAAS,EACflK,EAAMoF,SAAU,CAClC,KACwB2E,IACVhM,EAAKwJ,WAAY,EACNuD,IACX/M,EAAKwG,MAAM,OAAQvE,EAAMmK,MAI3Bc,EAAKW,aAAe5L,EAAMyG,MAGtBwE,EAAKY,OAGP,YAFA9N,EAAKwG,MAAM,YAAavE,EAAMmK,IAAK,+IAMtB,cAAXvD,GAA0B5G,EAAMmG,MAClCpI,EAAKsJ,WAAWrH,EAAMmK,KAAO5E,WAAWxH,EAAKmM,OAAOsB,KAAKzN,EAAMiC,GAAQ4K,IAEvE7M,EAAKsJ,WAAWrH,EAAMmK,KAAO,WAE3BpM,EAAKmM,OAAOlK,GAGZiL,EAAK3G,oBAAoB,QAASvG,EAAKsJ,WAAWrH,EAAMmK,MAAM,EAC/D,EACDc,EAAKzG,iBAAiB,QAASzG,EAAKsJ,WAAWrH,EAAMmK,MAAM,GAE9D,OAAQjJ,GACPnD,EAAKwG,MAAM,YAAavE,EAAMmK,IAAKjJ,GAEtC,EAGgB,2FAAb+J,EAAKrF,MACPqF,EAAKrF,IAAM7H,EAAK8I,KAChBoE,EAAKxH,QAIH,IAAAqI,EAAsBpN,QAAUA,OAAOqN,SAAad,EAAKe,YAAchO,EAAOS,WAAWwN,WACzF,GAAAhB,EAAKe,YAAc,GAAKF,EACfH,QACN,CACL5N,EAAKwJ,WAAY,EACjBxJ,EAAKqJ,OAAS,UAEd,IAAI8E,EAAW,WACbnO,EAAKqJ,OAAS,SAGHuE,IAGXV,EAAK3G,oBAAoBtG,EAAOQ,cAAe0N,GAAU,EAC1D,EACDjB,EAAKzG,iBAAiBxG,EAAOQ,cAAe0N,GAAU,GAGtDnO,EAAK2N,YAAY1L,EAAMmK,MAI3B,OAAOnK,EAAMmK,IAzJXpM,EAAKmM,OAAOlK,EA0Jf,EAODmM,MAAO,SAASnC,GACd,IAAIjM,EAAOH,KAGX,GAAoB,WAAhBG,EAAKqJ,QAAuBrJ,EAAKwJ,UAQ5BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,QACPC,OAAQ,WACNtL,EAAKoO,MAAMnC,MAIRjM,EAMT,IAFI,IAAA8B,EAAM9B,EAAK+B,aAAakK,GAEnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B3B,EAAK2N,YAAY7L,EAAIH,IAGrB,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAE5B,GAAAM,IAAUA,EAAMoF,UAElBpF,EAAM0K,MAAQ3M,EAAKwM,KAAK1K,EAAIH,IAC5BM,EAAMoM,UAAY,EAClBpM,EAAMoF,SAAU,EAGhBrH,EAAKsO,UAAUxM,EAAIH,IAEfM,EAAME,OACR,GAAInC,EAAK6B,UAAW,CAEd,IAACI,EAAME,MAAMmL,aACf,cAG2C,IAAlCrL,EAAME,MAAMmL,aAAahL,KAC5BL,EAAAE,MAAMmL,aAAaiB,QAAQ,GAE3BtM,EAAAE,MAAMmL,aAAahL,KAAK,GAIhCtC,EAAKwO,aAAavM,EAAME,MACtC,MAAwBsM,MAAMxM,EAAME,MAAMyK,WAAa3K,EAAME,MAAMyK,WAAaY,KAClEvL,EAAME,MAAMiM,QAMbM,UAAU,IACb1O,EAAKwG,MAAM,QAASvE,EAAQA,EAAMmK,IAAM,MAIrCpM,QACR,EAQDsC,KAAM,SAAS2J,EAAID,GACjB,IAAIhM,EAAOH,KAGX,GAAoB,WAAhBG,EAAKqJ,QAAuBrJ,EAAKwJ,UAQ5BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAKsC,KAAK2J,MAIPjM,EAMT,IAFI,IAAA8B,EAAM9B,EAAK+B,aAAakK,GAEnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B3B,EAAK2N,YAAY7L,EAAIH,IAGrB,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAE5BM,IAEIA,EAAA0K,MAAQ1K,EAAM+K,QAAU,EAC9B/K,EAAMoM,UAAY,EAClBpM,EAAMoF,SAAU,EAChBpF,EAAMkK,QAAS,EAGfnM,EAAKsO,UAAUxM,EAAIH,IAEfM,EAAME,QACJnC,EAAK6B,UAEHI,EAAME,MAAMmL,oBAC+B,IAAlCrL,EAAME,MAAMmL,aAAahL,KAC5BL,EAAAE,MAAMmL,aAAaiB,QAAQ,GAE3BtM,EAAAE,MAAMmL,aAAahL,KAAK,GAIhCtC,EAAKwO,aAAavM,EAAME,QAEhBsM,MAAMxM,EAAME,MAAMyK,WAAa3K,EAAME,MAAMyK,WAAaY,MAC5DvL,EAAAE,MAAMT,YAAcO,EAAM+K,QAAU,EAC1C/K,EAAME,MAAMiM,QAGRnM,EAAME,MAAMyK,WAAaY,KAC3BxN,EAAK2O,YAAY1M,EAAME,SAKxB6J,GACHhM,EAAKwG,MAAM,OAAQvE,EAAMmK,MAKxBpM,QACR,EAQDoC,KAAM,SAASC,EAAO4J,GACpB,IAAIjM,EAAOH,KAGX,GAAoB,WAAhBG,EAAKqJ,QAAsBrJ,EAAKwJ,UAQ3BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAKoC,KAAKC,EAAO4J,MAIdjM,EAIL,QAAc,IAAPiM,EAAoB,CACzB,GAAiB,kBAAV5J,EAGT,OAAOrC,EAAKO,OAFZP,EAAKO,OAAS8B,EASlB,IAFI,IAAAP,EAAM9B,EAAK+B,aAAakK,GAEnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAE5BM,IACFA,EAAM1B,OAAS8B,EAGXJ,EAAM2M,WACR5O,EAAKsO,UAAUrM,EAAMmK,KAGnBpM,EAAK6B,WAAaI,EAAME,MACpBF,EAAAE,MAAMX,KAAKC,eAAeY,EAAQ,EAAIJ,EAAMzB,QAASP,EAAOgB,IAAIS,aAC7DO,EAAME,QACfF,EAAME,MAAME,QAAQpC,EAAOM,QAAgB8B,GAG7CrC,EAAKwG,MAAM,OAAQvE,EAAMmK,MAItBpM,QACR,EAUDoB,OAAQ,WACN,IAEIC,EAAK4K,EAqBLhK,EAvBAjC,EAAOH,KACPgP,EAAOH,UAIP,GAAgB,IAAhBG,EAAKjN,OAEP,OAAO5B,EAAKQ,QAiBd,GAhB2B,IAAhBqO,EAAKjN,QAAgC,IAAhBiN,EAAKjN,aAAmC,IAAZiN,EAAK,GAErD7O,EAAK+B,eACC+B,QAAQ+K,EAAK,KAChB,EACX5C,EAAKtI,SAASkL,EAAK,GAAI,IAEjBxN,EAAAC,WAAWuN,EAAK,IAEfA,EAAKjN,QAAU,IAClBP,EAAAC,WAAWuN,EAAK,IACtB5C,EAAKtI,SAASkL,EAAK,GAAI,YAKN,IAARxN,GAAuBA,GAAO,GAAKA,GAAO,GA2C5C,OADPY,EAAQgK,EAAKjM,EAAKkC,WAAW+J,GAAMjM,EAAKoH,QAAQ,IACjCnF,EAAMzB,QAAU,EAzC/B,GAAoB,WAAhBR,EAAKqJ,QAAsBrJ,EAAKwJ,UAQ3BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,SACPC,OAAQ,WACNtL,EAAKoB,OAAO0N,MAAM9O,EAAM6O,MAIrB7O,OAIS,IAAPiM,IACTjM,EAAKQ,QAAUa,GAIZrB,IAAK+B,aAAakK,GACvB,QAAStK,EAAE,EAAGA,EAAEsK,EAAGrK,OAAQD,KAEzBM,EAAQjC,EAAKkC,WAAW+J,EAAGtK,OAGzBM,EAAMzB,QAAUa,EAGXwN,EAAK,IACR7O,EAAKsO,UAAUrC,EAAGtK,IAGhB3B,EAAK6B,WAAaI,EAAME,QAAUF,EAAM1B,OAC1C0B,EAAME,MAAMX,KAAKC,eAAeJ,EAAKpB,EAAOgB,IAAIS,aACvCO,EAAME,QAAUF,EAAM1B,SAC/B0B,EAAME,MAAMf,OAASC,EAAMpB,EAAOmB,UAGpCpB,EAAKwG,MAAM,SAAUvE,EAAMmK,MAQ1BpM,QACR,EAUD+O,KAAM,SAASC,EAAMC,EAAIC,EAAKjD,GAC5B,IAAIjM,EAAOH,KAGX,GAAoB,WAAhBG,EAAKqJ,QAAuBrJ,EAAKwJ,UAQ5BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAK+O,KAAKC,EAAMC,EAAIC,EAAKjD,MAItBjM,EAIFgP,EAAAvC,KAAK0C,IAAI1C,KAAKC,IAAI,EAAGpL,WAAW0N,IAAQ,GAC1CC,EAAAxC,KAAK0C,IAAI1C,KAAKC,IAAI,EAAGpL,WAAW2N,IAAM,GAC3CC,EAAM5N,WAAW4N,GAGjBlP,EAAKoB,OAAO4N,EAAM/C,GAIlB,IADI,IAAAnK,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAGhC,GAAIM,EAAO,CAOT,GALKgK,GACHjM,EAAKsO,UAAUxM,EAAIH,IAIjB3B,EAAK6B,YAAcI,EAAM1B,OAAQ,CAC/B,IAAAmB,EAAczB,EAAOgB,IAAIS,YACzB0N,EAAM1N,EAAewN,EAAM,IAC/BjN,EAAMzB,QAAUwO,EAChB/M,EAAME,MAAMX,KAAKC,eAAeuN,EAAMtN,GACtCO,EAAME,MAAMX,KAAK6N,wBAAwBJ,EAAIG,GAG/CpP,EAAKsP,mBAAmBrN,EAAO+M,EAAMC,EAAIC,EAAKpN,EAAIH,QAAkB,IAAPsK,IAI1DjM,QACR,EAWDsP,mBAAoB,SAASrN,EAAO+M,EAAMC,EAAIC,EAAKjD,EAAIsD,GACrD,IAAIvP,EAAOH,KACPwB,EAAM2N,EACNQ,EAAOP,EAAKD,EACZS,EAAQhD,KAAKK,IAAI0C,EAAO,KACxBE,EAAUjD,KAAKC,IAAI,EAAI+C,EAAQ,EAAKP,EAAMO,EAAQP,GAClDS,EAAWC,KAAKC,MAGpB5N,EAAM6N,QAAUb,EAGVhN,EAAA2M,UAAYmB,aAAY,WAE5B,IAAIC,GAAQJ,KAAKC,MAAQF,GAAYT,EACrCS,EAAWC,KAAKC,MAChBxO,GAAOmO,EAAOQ,EAGd3O,EAAMoL,KAAKwD,MAAY,IAAN5O,GAAa,IAItBA,EADJmO,EAAO,EACH/C,KAAKC,IAAIuC,EAAI5N,GAEboL,KAAK0C,IAAIF,EAAI5N,GAIjBrB,EAAK6B,UACPI,EAAMzB,QAAUa,EAEhBrB,EAAKoB,OAAOC,EAAKY,EAAMmK,KAAK,GAI1BmD,IACFvP,EAAKQ,QAAUa,IAIZ4N,EAAKD,GAAQ3N,GAAO4N,GAAQA,EAAKD,GAAQ3N,GAAO4N,KACnDiB,cAAcjO,EAAM2M,WACpB3M,EAAM2M,UAAY,KAClB3M,EAAM6N,QAAU,KAChB9P,EAAKoB,OAAO6N,EAAIhN,EAAMmK,KACtBpM,EAAKwG,MAAM,OAAQvE,EAAMmK,KAE5B,GAAEsD,EACJ,EAQDpB,UAAW,SAASrC,GAClB,IAAIjM,EAAOH,KACPoC,EAAQjC,EAAKkC,WAAW+J,GAcrBjM,OAZHiC,GAASA,EAAM2M,YACb5O,EAAK6B,WACPI,EAAME,MAAMX,KAAK2O,sBAAsBlQ,EAAOgB,IAAIS,aAGpDwO,cAAcjO,EAAM2M,WACpB3M,EAAM2M,UAAY,KAClB5O,EAAKoB,OAAOa,EAAM6N,QAAS7D,GAC3BhK,EAAM6N,QAAU,KAChB9P,EAAKwG,MAAM,OAAQyF,IAGdjM,CACR,EAUDqI,KAAM,WACJ,IAEIA,EAAM4D,EAAIhK,EAFVjC,EAAOH,KACPgP,EAAOH,UAIP,GAAgB,IAAhBG,EAAKjN,OAEP,OAAO5B,EAAKoI,MACpB,GAAiC,IAAhByG,EAAKjN,OAAc,CAC5B,GAAuB,kBAAZiN,EAAK,GAMP,SADP5M,EAAQjC,EAAKkC,WAAWyB,SAASkL,EAAK,GAAI,OAC3B5M,EAAMmG,MALrBC,EAAOwG,EAAK,GACZ7O,EAAKoI,MAAQC,CAMvB,MAAiC,IAAhBwG,EAAKjN,SACdyG,EAAOwG,EAAK,GACZ5C,EAAKtI,SAASkL,EAAK,GAAI,KAKzB,IADI,IAAA/M,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,KAC1BM,EAAQjC,EAAKkC,WAAWJ,EAAIH,OAG1BM,EAAMmG,MAAQC,EACVrI,EAAK6B,WAAaI,EAAME,OAASF,EAAME,MAAMmL,eACzCrL,EAAAE,MAAMmL,aAAajF,KAAOA,EAC5BA,IACFpG,EAAME,MAAMmL,aAAa8C,UAAYnO,EAAM+K,QAAU,EAC/C/K,EAAAE,MAAMmL,aAAa+C,QAAUpO,EAAMgL,MAGrCjN,EAAKsQ,QAAQxO,EAAIH,MACnB3B,EAAKoO,MAAMtM,EAAIH,IAAI,GACnB3B,EAAK6G,KAAK/E,EAAIH,IAAI,OAOrB3B,QACR,EAUD2I,KAAM,WACJ,IAEIA,EAAMsD,EAqBNhK,EAvBAjC,EAAOH,KACPgP,EAAOH,UAuBP,GAnBgB,IAAhBG,EAAKjN,OAEF5B,IAAKoH,QAAQ,GAAGgF,IACI,IAAhByC,EAAKjN,OAEJ5B,EAAK+B,eACC+B,QAAQ+K,EAAK,KAChB,EACX5C,EAAKtI,SAASkL,EAAK,GAAI,IAEhBlG,EAAArH,WAAWuN,EAAK,IAEA,IAAhBA,EAAKjN,SACP+G,EAAArH,WAAWuN,EAAK,IACvB5C,EAAKtI,SAASkL,EAAK,GAAI,KAKL,iBAATlG,EAwDF,OADC3I,IAAKkC,WAAW+J,IACThK,EAAMyG,MAAQ1I,EAAK0I,MAtDlC,GAAoB,WAAhB1I,EAAKqJ,QAAuBrJ,EAAKwJ,UAQ5BxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAK2I,KAAKmG,MAAM9O,EAAM6O,MAInB7O,OAIS,IAAPiM,IACTjM,EAAK0I,MAAQC,GAIV3I,IAAK+B,aAAakK,GACvB,QAAStK,EAAE,EAAGA,EAAEsK,EAAGrK,OAAQD,IAIzB,GAFAM,EAAQjC,EAAKkC,WAAW+J,EAAGtK,IAEhB,CAGL3B,EAAKsQ,QAAQrE,EAAGtK,MAClBM,EAAMoM,UAAYrO,EAAKwM,KAAKP,EAAGtK,IAC/BM,EAAMoL,WAAarN,EAAK6B,UAAY5B,EAAOgB,IAAIS,YAAcO,EAAMoL,YAErEpL,EAAMyG,MAAQC,EAGV3I,EAAK6B,WAAaI,EAAME,OAASF,EAAME,MAAMmL,aAC/CrL,EAAME,MAAMmL,aAAaO,aAAapM,eAAekH,EAAM1I,EAAOgB,IAAIS,aAC7DO,EAAME,QACfF,EAAME,MAAM0L,aAAelF,GAI7B,IAAI6D,EAAOxM,EAAKwM,KAAKP,EAAGtK,IAEpBkL,EAAsB,MADT7M,EAAK4I,QAAQ3G,EAAM2G,SAAS,GAAK5I,EAAK4I,QAAQ3G,EAAM2G,SAAS,IAAM,IAAQ4D,GAC1DC,KAAKK,IAAI7K,EAAMyG,QAG7C1I,EAAKsJ,WAAW2C,EAAGtK,KAAQM,EAAMoF,UACnCrH,EAAK2N,YAAY1B,EAAGtK,IACpB3B,EAAKsJ,WAAW2C,EAAGtK,IAAM6F,WAAWxH,EAAKmM,OAAOsB,KAAKzN,EAAMiC,GAAQ4K,IAGrE7M,EAAKwG,MAAM,OAAQvE,EAAMmK,KAQxBpM,QACR,EAUDwM,KAAM,WACJ,IAEIA,EAAMP,EAFNjM,EAAOH,KACPgP,EAAOH,UAyBP,GArBgB,IAAhBG,EAAKjN,OAEH5B,EAAKoH,QAAQxF,SACV5B,IAAKoH,QAAQ,GAAGgF,KAEE,IAAhByC,EAAKjN,OAEJ5B,EAAK+B,eACC+B,QAAQ+K,EAAK,KAChB,EACX5C,EAAKtI,SAASkL,EAAK,GAAI,IACd7O,EAAKoH,QAAQxF,SACjB5B,IAAKoH,QAAQ,GAAGgF,IACdI,EAAAlL,WAAWuN,EAAK,KAEA,IAAhBA,EAAKjN,SACP4K,EAAAlL,WAAWuN,EAAK,IACvB5C,EAAKtI,SAASkL,EAAK,GAAI,UAIP,IAAP5C,EACF,SAIT,GAAoB,iBAATO,IAAsC,WAAhBxM,EAAKqJ,QAAuBrJ,EAAKwJ,WAQzDxJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,OACPC,OAAQ,WACNtL,EAAKwM,KAAKsC,MAAM9O,EAAM6O,MAInB7O,EAIL,IAAAiC,EAAQjC,EAAKkC,WAAW+J,GAE5B,GAAIhK,EAAO,CACT,KAAoB,iBAATuK,GAAqBA,GAAQ,GAwCjC,CACL,GAAIxM,EAAK6B,UAAW,CACd,IAAA0O,EAAWvQ,EAAKsQ,QAAQrE,GAAMhM,EAAOgB,IAAIS,YAAcO,EAAMoL,WAAa,EAC1EmD,EAAWvO,EAAMoM,UAAYpM,EAAMoM,UAAYpM,EAAM0K,MAAQ,EACjE,OAAO1K,EAAM0K,OAAS6D,EAAWD,EAAW9D,KAAKK,IAAI7K,EAAMyG,OACvE,CACY,OAAOzG,EAAME,MAAMT,YA5CjB,IAAA4O,EAAUtQ,EAAKsQ,QAAQrE,GACvBqE,GACFtQ,EAAKoO,MAAMnC,GAAI,GAIjBhK,EAAM0K,MAAQH,EACdvK,EAAMkK,QAAS,EACfnM,EAAK2N,YAAY1B,GAGZjM,EAAK6B,YAAaI,EAAME,OAAUsM,MAAMxM,EAAME,MAAMyK,YACvD3K,EAAME,MAAMT,YAAc8K,GAI5B,IAAIiE,EAAc,WAEZH,GACFtQ,EAAK6G,KAAKoF,GAAI,GAGhBjM,EAAKwG,MAAM,OAAQyF,EACpB,EAGG,GAAAqE,IAAYtQ,EAAK6B,UAAW,CAC9B,IAAI6O,EAAW,WACR1Q,EAAKwJ,UAGRhC,WAAWkJ,EAAU,GAFRD,GAIhB,EACDjJ,WAAWkJ,EAAU,EACjC,MACyBD,IAaZzQ,QACR,EAODsQ,QAAS,SAASrE,GAChB,IAAIjM,EAAOH,KAGP,GAAc,iBAAPoM,EAAiB,CACtB,IAAAhK,EAAQjC,EAAKkC,WAAW+J,GACrB,QAAAhK,IAASA,EAAMoF,QAIxB,QAAS1F,EAAE,EAAGA,EAAE3B,EAAKoH,QAAQxF,OAAQD,IACnC,IAAK3B,EAAKoH,QAAQzF,GAAG0F,QACZ,SAIJ,QACR,EAODuF,SAAU,SAASX,GACjB,IAAIjM,EAAOH,KACP+M,EAAW5M,EAAKoJ,UAGhBnH,EAAQjC,EAAKkC,WAAW+J,GAKrB,OAJHhK,IACF2K,EAAW5M,EAAK4I,QAAQ3G,EAAM2G,SAAS,GAAK,KAGvCgE,CACR,EAMDhK,MAAO,WACL,OAAO/C,KAAKwJ,MACb,EAMD9G,OAAQ,WAKN,IAJA,IAAIvC,EAAOH,KAGP8Q,EAAS3Q,EAAKoH,QACTzF,EAAE,EAAGA,EAAEgP,EAAO/O,OAAQD,IAExBgP,EAAOhP,GAAG0F,SACbrH,EAAKsC,KAAKqO,EAAOhP,GAAGyK,KAIjBpM,EAAK6B,YAER7B,EAAK2O,YAAYgC,EAAOhP,GAAGQ,OAGpBwO,EAAAhP,GAAGQ,MAAMoE,oBAAoB,QAASoK,EAAOhP,GAAGiP,UAAU,GAC1DD,EAAAhP,GAAGQ,MAAMoE,oBAAoBtG,EAAOQ,cAAekQ,EAAOhP,GAAGkP,SAAS,GACtEF,EAAAhP,GAAGQ,MAAMoE,oBAAoB,QAASoK,EAAOhP,GAAGmP,QAAQ,GAG/D7Q,EAAOwF,mBAAmBkL,EAAOhP,GAAGQ,eAI/BwO,EAAOhP,GAAGQ,MAGjBnC,EAAK2N,YAAYgD,EAAOhP,GAAGyK,KAI7B,IAAI2E,EAAQ9Q,EAAOK,OAAOwD,QAAQ9D,GAC9B+Q,GAAS,GACX9Q,EAAOK,OAAO0Q,OAAOD,EAAO,GAI9B,IAAIE,GAAW,EACf,IAAKtP,EAAE,EAAGA,EAAE1B,EAAOK,OAAOsB,OAAQD,IAChC,GAAI1B,EAAOK,OAAOqB,GAAGmH,OAAS9I,EAAK8I,MAAQ9I,EAAK8I,KAAKhF,QAAQ7D,EAAOK,OAAOqB,GAAGmH,OAAS,EAAG,CAC7EmI,GAAA,EACX,MAgBG,OAZHC,GAASD,UACJC,EAAMlR,EAAK8I,MAIpB7I,EAAOa,SAAU,EAGjBd,EAAKqJ,OAAS,WACdrJ,EAAKoH,QAAU,GACfpH,EAAO,KAEA,IACR,EAUDmR,GAAI,SAAS9F,EAAO1B,EAAIsC,EAAIyB,GAC1B,IACI0D,EADOvR,KACO,MAAQwL,GAMnBrL,MAJW,mBAAP2J,GACFyH,EAAAlK,KAAKwG,EAAO,CAACzB,KAAQtC,KAAQ+D,QAAc,CAACzB,KAAQtC,OAJlD9J,IAQZ,EASDwR,IAAK,SAAShG,EAAO1B,EAAIsC,GACvB,IAAIjM,EAAOH,KACPuR,EAASpR,EAAK,MAAQqL,GACtB1J,EAAI,EAQR,GALkB,iBAAPgI,IACJsC,EAAAtC,EACAA,EAAA,MAGHA,GAAMsC,EAER,IAAKtK,EAAE,EAAGA,EAAEyP,EAAOxP,OAAQD,IAAK,CAC9B,IAAI2P,EAAQrF,IAAOmF,EAAOzP,GAAGsK,GACzB,GAAAtC,IAAOyH,EAAOzP,GAAGgI,IAAM2H,IAAS3H,GAAM2H,EAAM,CACvCF,EAAAJ,OAAOrP,EAAG,GACjB,eAGK0J,EAETrL,EAAK,MAAQqL,GAAS,OACjB,CAED,IAAAkG,EAAOC,OAAOD,KAAKvR,GACvB,IAAK2B,EAAE,EAAGA,EAAE4P,EAAK3P,OAAQD,IACS,IAA3B4P,EAAK5P,GAAGmC,QAAQ,QAAiB2N,MAAMC,QAAQ1R,EAAKuR,EAAK5P,OAC5D3B,EAAKuR,EAAK5P,IAAM,IAKf3B,QACR,EASD0N,KAAM,SAASrC,EAAO1B,EAAIsC,GAMjBjM,OALIH,KAGNsR,GAAG9F,EAAO1B,EAAIsC,EAAI,GAHZpM,IAMZ,EASD2G,MAAO,SAAS6E,EAAOY,EAAI0F,GAKzB,IAJA,IAAI3R,EAAOH,KACPuR,EAASpR,EAAK,MAAQqL,GAGjB1J,EAAEyP,EAAOxP,OAAO,EAAGD,GAAG,EAAGA,IAE3ByP,EAAOzP,GAAGsK,IAAMmF,EAAOzP,GAAGsK,KAAOA,GAAgB,SAAVZ,IAC1C7D,WAAA,SAAoBmC,GACfA,EAAAiI,KAAK/R,KAAMoM,EAAI0F,EAC9B,EAAYlE,KAAKzN,EAAMoR,EAAOzP,GAAGgI,IAAK,GAGxByH,EAAOzP,GAAG+L,MACZ1N,EAAKqR,IAAIhG,EAAO+F,EAAOzP,GAAGgI,GAAIyH,EAAOzP,GAAGsK,KAQvCjM,OAFPA,EAAKuM,WAAWlB,GAETrL,CACR,EAQDuM,WAAY,SAASlB,GACnB,IAAIrL,EAAOH,KAEPG,KAAKuJ,OAAO3H,OAAS,EAAG,CACtB,IAAAiQ,EAAO7R,EAAKuJ,OAAO,GAGnBsI,EAAKxG,QAAUA,IACjBrL,EAAKuJ,OAAOuI,QACZ9R,EAAKuM,cAIFlB,GACHwG,EAAKvG,SAIFtL,QACR,EAODmM,OAAQ,SAASlK,GACf,IAAIjC,EAAOH,KACPgJ,EAAS5G,EAAM2G,QAKnB,IAAK5I,EAAK6B,WAAaI,EAAME,QAAUF,EAAME,MAAM2L,SAAW7L,EAAME,MAAM4P,OAAS9P,EAAME,MAAMT,YAAcO,EAAMgL,MAE1GjN,OADPwH,WAAWxH,EAAKmM,OAAOsB,KAAKzN,EAAMiC,GAAQ,KACnCjC,EAIL,IAAAqI,KAAUpG,EAAMmG,QAASpI,EAAK4I,QAAQC,GAAQ,IAW9C7I,GARJA,EAAKwG,MAAM,MAAOvE,EAAMmK,MAGnBpM,EAAK6B,WAAawG,GACrBrI,EAAKsC,KAAKL,EAAMmK,KAAK,GAAMvF,KAAK5E,EAAMmK,KAIpCpM,EAAK6B,WAAawG,EAAM,CAC1BrI,EAAKwG,MAAM,OAAQvE,EAAMmK,KACnBnK,EAAA0K,MAAQ1K,EAAM+K,QAAU,EAC9B/K,EAAMoM,UAAY,EACZpM,EAAAoL,WAAapN,EAAOgB,IAAIS,YAE1B,IAAAmL,EAA0C,KAA9B5K,EAAMgL,MAAQhL,EAAM+K,QAAkBP,KAAKK,IAAI7K,EAAMyG,OACrE1I,EAAKsJ,WAAWrH,EAAMmK,KAAO5E,WAAWxH,EAAKmM,OAAOsB,KAAKzN,EAAMiC,GAAQ4K,GAuBlE7M,OAnBHA,EAAK6B,YAAcwG,IACrBpG,EAAMoF,SAAU,EAChBpF,EAAMkK,QAAS,EACTlK,EAAA0K,MAAQ1K,EAAM+K,QAAU,EAC9B/K,EAAMoM,UAAY,EAClBrO,EAAK2N,YAAY1L,EAAMmK,KAGvBpM,EAAKwO,aAAavM,EAAME,OAGxBlC,EAAO4C,gBAIJ7C,EAAK6B,WAAcwG,GACtBrI,EAAKsC,KAAKL,EAAMmK,KAAK,GAGhBpM,CACR,EAOD2N,YAAa,SAAS1B,GACpB,IAAIjM,EAAOH,KAEPG,KAAKsJ,WAAW2C,GAAK,CAEvB,GAAmC,mBAAxBjM,EAAKsJ,WAAW2C,GACZjM,eAAKsJ,WAAW2C,QACxB,CACD,IAAAhK,EAAQjC,EAAKkC,WAAW+J,GACxBhK,GAASA,EAAME,OACjBF,EAAME,MAAMoE,oBAAoB,QAASvG,EAAKsJ,WAAW2C,IAAK,UAI3DjM,EAAKsJ,WAAW2C,GAGlBjM,QACR,EAODkC,WAAY,SAAS+J,GAInB,IAHA,IAAIjM,EAAOH,KAGF8B,EAAE,EAAGA,EAAE3B,EAAKoH,QAAQxF,OAAQD,IACnC,GAAIsK,IAAOjM,EAAKoH,QAAQzF,GAAGyK,IAClBpM,SAAKoH,QAAQzF,GAIjB,WACR,EAMD0K,eAAgB,WACd,IAAIrM,EAAOH,KAEXG,EAAKgS,SAGL,QAASrQ,EAAE,EAAGA,EAAE3B,EAAKoH,QAAQxF,OAAQD,IACnC,GAAI3B,EAAKoH,QAAQzF,GAAGwK,OAClB,OAAOnM,EAAKoH,QAAQzF,GAAGsQ,QAKpB,WAAInG,EAAM9L,EAClB,EAKDgS,OAAQ,WACN,IAAIhS,EAAOH,KACPqS,EAAQlS,EAAKsI,MACb6J,EAAM,EACNxQ,EAAI,EAGJ3B,OAAKoH,QAAQxF,OAASsQ,GAAtBlS,CAKJ,IAAK2B,EAAE,EAAGA,EAAE3B,EAAKoH,QAAQxF,OAAQD,IAC3B3B,EAAKoH,QAAQzF,GAAGwK,QAClBgG,IAKJ,IAAKxQ,EAAE3B,EAAKoH,QAAQxF,OAAS,EAAGD,GAAG,EAAGA,IAAK,CACzC,GAAIwQ,GAAOD,EACT,OAGElS,EAAKoH,QAAQzF,GAAGwK,SAEdnM,EAAK6B,WAAa7B,EAAKoH,QAAQzF,GAAGQ,OACpCnC,EAAKoH,QAAQzF,GAAGQ,MAAMkE,WAAW,GAInCrG,EAAKoH,QAAQ4J,OAAOrP,EAAG,GACvBwQ,MAGL,EAODpQ,aAAc,SAASkK,GAGjB,QAAc,IAAPA,EAAoB,CAE7B,IADA,IAAInK,EAAM,GACDH,EAAE,EAAGA,EAJL9B,KAIYuH,QAAQxF,OAAQD,IACnCG,EAAIoF,KALGrH,KAKOuH,QAAQzF,GAAGyK,KAGpB,OAAAtK,CACf,CACQ,MAAO,CAACmK,EAEX,EAODmB,eAAgB,SAASnL,GAsBhBjC,OAlBPiC,EAAME,MAAMmL,aAAerN,EAAOgB,IAAI4E,qBACtC5D,EAAME,MAAMmL,aAAaxH,OAASoL,EAJvBrR,KAIkCiJ,MAGzC7G,EAAMmQ,QACRnQ,EAAME,MAAMmL,aAAavH,QAAQ9D,EAAMmQ,SAEvCnQ,EAAME,MAAMmL,aAAavH,QAAQ9D,EAAME,OAInCF,EAAAE,MAAMmL,aAAajF,KAAOpG,EAAMmG,MAClCnG,EAAMmG,QACRnG,EAAME,MAAMmL,aAAa8C,UAAYnO,EAAM+K,QAAU,EACrD/K,EAAME,MAAMmL,aAAa+C,QAAUpO,EAAMgL,OAAS,GAE9ChL,EAAAE,MAAMmL,aAAaO,aAAapM,eAAeQ,EAAMyG,MAAOzI,EAAOgB,IAAIS,aAnBlE7B,IAsBZ,EAOD2O,aAAc,SAAStB,GACrB,IACImF,EAAQpS,EAAOS,YAAcT,EAAOS,WAAW4R,OAAOxO,QAAQ,UAAY,EAE1E,IAACoJ,EAAKI,aACDtN,OAJEH,KAOPI,KAAOmF,gBAAkB8H,EAAKI,eAChCJ,EAAKI,aAAalH,QAAU,KACvB8G,EAAAI,aAAajH,WAAW,GACzBgM,GACE,IAAOnF,EAAAI,aAAaxH,OAAS7F,EAAOmF,cAAe,OAASpC,GAAG,CAKhEhD,OAFPkN,EAAKI,aAAe,KAdTzN,IAiBZ,EAMD8O,YAAa,SAASzB,GACN,kBAAkBqF,KAAKtS,EAAOS,YAAcT,EAAOS,WAAW6C,aAE1E2J,EAAKrF,IAAM,4FAYbiE,MAAQ,SAAS0G,GACnB3S,KAAK4S,QAAUD,EACf3S,KAAKC,MACN,EACDgM,EAAM/L,UAAY,CAKhBD,KAAM,WACJ,IAAIE,EAAOH,KACP6S,EAAS1S,EAAKyS,QAqBXzS,OAlBPA,EAAKO,OAASmS,EAAOnS,OACrBP,EAAKoI,MAAQsK,EAAOtK,MACpBpI,EAAKQ,QAAUkS,EAAOlS,QACtBR,EAAK0I,MAAQgK,EAAOhK,MACpB1I,EAAK2M,MAAQ,EACb3M,EAAKqH,SAAU,EACfrH,EAAKmM,QAAS,EACdnM,EAAK4I,QAAU,YAGf5I,EAAKoM,MAAQnM,EAAOC,SAGbwS,EAAAtL,QAAQF,KAAKlH,GAGpBA,EAAK2S,SAEE3S,CACR,EAMD2S,OAAQ,WACN,IAAI3S,EAAOH,KACP6S,EAAS1S,EAAKyS,QACdrR,EAAUnB,EAAOM,QAAUP,EAAKO,QAAUP,EAAKyS,QAAQlS,OAAU,EAAIP,EAAKQ,QAkCvER,OAhCH0S,EAAO7Q,WAET7B,EAAKmC,WAA0C,IAA1BlC,EAAOgB,IAAI2R,WAA8B3S,EAAOgB,IAAI4R,iBAAmB5S,EAAOgB,IAAI2R,aACvG5S,EAAKmC,MAAMX,KAAKC,eAAeL,EAAQnB,EAAOgB,IAAIS,aAClD1B,EAAKmC,MAAM2L,QAAS,EACpB9N,EAAKmC,MAAM4D,QAAQ9F,EAAOY,aAChBZ,EAAOa,UAEjBd,EAAKmC,MAAQlC,EAAOyG,oBAGpB1G,EAAK4Q,SAAW5Q,EAAK8S,eAAerF,KAAKzN,GACzCA,EAAKmC,MAAMsE,iBAAiB,QAASzG,EAAK4Q,UAAU,GAGpD5Q,EAAK6Q,QAAU7Q,EAAK+S,cAActF,KAAKzN,GACvCA,EAAKmC,MAAMsE,iBAAiBxG,EAAOQ,cAAeT,EAAK6Q,SAAS,GAIhE7Q,EAAK8Q,OAAS9Q,EAAKgT,aAAavF,KAAKzN,GACrCA,EAAKmC,MAAMsE,iBAAiB,QAASzG,EAAK8Q,QAAQ,GAGlD9Q,EAAKmC,MAAM0F,IAAM6K,EAAO5J,KACxB9I,EAAKmC,MAAMsG,SAA8B,IAApBiK,EAAOlK,SAAoB,OAASkK,EAAOlK,SAChExI,EAAKmC,MAAMf,OAASA,EAASnB,EAAOmB,SAGpCpB,EAAKmC,MAAMuD,QAGN1F,CACR,EAMDiS,MAAO,WACL,IAAIjS,EAAOH,KACP6S,EAAS1S,EAAKyS,QAgBXzS,OAbPA,EAAKO,OAASmS,EAAOnS,OACrBP,EAAKoI,MAAQsK,EAAOtK,MACpBpI,EAAKQ,QAAUkS,EAAOlS,QACtBR,EAAK0I,MAAQgK,EAAOhK,MACpB1I,EAAK2M,MAAQ,EACb3M,EAAKqO,UAAY,EACjBrO,EAAKqH,SAAU,EACfrH,EAAKmM,QAAS,EACdnM,EAAK4I,QAAU,YAGf5I,EAAKoM,MAAQnM,EAAOC,SAEbF,CACR,EAKD8S,eAAgB,WACd,IAAI9S,EAAOH,KAGXG,EAAKyS,QAAQjM,MAAM,YAAaxG,EAAKoM,IAAKpM,EAAKmC,MAAM8Q,MAAQjT,EAAKmC,MAAM8Q,MAAMC,KAAO,GAGrFlT,EAAKmC,MAAMoE,oBAAoB,QAASvG,EAAK4Q,UAAU,EACxD,EAKDmC,cAAe,WACb,IAAI/S,EAAOH,KACP6S,EAAS1S,EAAKyS,QAGlBC,EAAOtJ,UAAYqD,KAAK0G,KAA2B,GAAtBnT,EAAKmC,MAAMyK,UAAiB,GAGd,IAAvC4E,OAAOD,KAAKmB,EAAO9J,SAAShH,SACvB8Q,EAAA9J,QAAU,CAACwK,UAAW,CAAC,EAAsB,IAAnBV,EAAOtJ,aAGpB,WAAlBsJ,EAAOrJ,SACTqJ,EAAOrJ,OAAS,SAChBqJ,EAAOlM,MAAM,QACbkM,EAAOnG,cAITvM,EAAKmC,MAAMoE,oBAAoBtG,EAAOQ,cAAeT,EAAK6Q,SAAS,EACpE,EAKDmC,aAAc,WACZ,IAAIhT,EAAOH,KACP6S,EAAS1S,EAAKyS,QAGdC,EAAOtJ,YAAcoE,MAGvBkF,EAAOtJ,UAAYqD,KAAK0G,KAA2B,GAAtBnT,EAAKmC,MAAMyK,UAAiB,GAGrD8F,EAAO9J,QAAQwK,UAAU,KAAO5F,MAClCkF,EAAO9J,QAAQwK,UAAU,GAAwB,IAAnBV,EAAOtJ,WAIvCsJ,EAAOvG,OAAOnM,IAIhBA,EAAKmC,MAAMoE,oBAAoB,QAASvG,EAAK8Q,QAAQ,KAOzD,IAAII,EAAQ,CAAE,EAMVnF,EAAa,SAAS/L,GACxB,IAAIuL,EAAMvL,EAAK8I,KAGXoI,KAAM3F,GAOR,OALAvL,EAAKoJ,UAAY8H,EAAM3F,GAAKqB,cAG5ByG,EAAUrT,GAKR,yBAAsBuS,KAAKhH,GAAM,CAInC,IAFA,IAAI+H,EAAOC,KAAKhI,EAAI3H,MAAM,KAAK,IAC3B4P,EAAW,IAAIC,WAAWH,EAAK1R,QAC1BD,EAAE,EAAGA,EAAE2R,EAAK1R,SAAUD,EAC7B6R,EAAS7R,GAAK2R,EAAKI,WAAW/R,GAGhBgS,EAAAH,EAAS1N,OAAQ9F,EACvC,KAAW,CAED,IAAAiJ,EAAM,IAAI2K,eACd3K,EAAI4K,KAAK7T,EAAK+I,KAAKC,OAAQuC,GAAK,GAC5BtC,EAAAE,gBAAkBnJ,EAAK+I,KAAKI,gBAChCF,EAAI6K,aAAe,cAGf9T,EAAK+I,KAAKG,SACZsI,OAAOD,KAAKvR,EAAK+I,KAAKG,SAAS6K,SAAQ,SAASC,GAC9C/K,EAAIgL,iBAAiBD,EAAKhU,EAAK+I,KAAKG,QAAQ8K,GACtD,IAGM/K,EAAIc,OAAS,WAEX,IAAImJ,GAAQjK,EAAIiL,OAAS,IAAI,GAChB,MAAThB,GAAyB,MAATA,GAAyB,MAATA,EAKpBS,EAAA1K,EAAIkL,SAAUnU,GAJ5BA,EAAKwG,MAAM,YAAa,KAAM,0CAA4CyC,EAAIiL,OAAS,IAK1F,EACDjL,EAAImL,QAAU,WAERpU,EAAK6B,YACP7B,EAAKkI,QAAS,EACdlI,EAAK6B,WAAY,EACjB7B,EAAKoH,QAAU,UACR8J,EAAM3F,GACbvL,EAAK0F,OAER,EACD2O,EAAYpL,GAEf,EAMGoL,EAAc,SAASpL,GACrB,IACFA,EAAIqL,MACL,OAAQtR,GACPiG,EAAImL,UAEP,EAOGT,EAAkB,SAASY,EAAavU,GAE1C,IAAIiT,EAAQ,WACVjT,EAAKwG,MAAM,YAAa,KAAM,8BAC/B,EAGGgO,EAAU,SAAS1O,GACjBA,GAAU9F,EAAKoH,QAAQxF,OAAS,GAClCsP,EAAMlR,EAAK8I,MAAQhD,EACnBuN,EAAUrT,EAAM8F,IAETmN,GAEV,EAGsB,oBAAZnM,SAAiE,IAAtC7G,EAAOgB,IAAI0S,gBAAgB/R,OAC/D3B,EAAOgB,IAAI0S,gBAAgBY,GAAaxN,KAAKyN,GAASxN,MAAMiM,GAE5DhT,EAAOgB,IAAI0S,gBAAgBY,EAAaC,EAASvB,IASjDI,EAAY,SAASrT,EAAM8F,GAEzBA,IAAW9F,EAAKoJ,YAClBpJ,EAAKoJ,UAAYtD,EAAO8G,UAIe,IAArC4E,OAAOD,KAAKvR,EAAK4I,SAAShH,SAC5B5B,EAAK4I,QAAU,CAACwK,UAAW,CAAC,EAAoB,IAAjBpT,EAAKoJ,aAIlB,WAAhBpJ,EAAKqJ,SACPrJ,EAAKqJ,OAAS,SACdrJ,EAAKwG,MAAM,QACXxG,EAAKuM,aAER,EAKGhL,EAAoB,WAElB,GAACtB,EAAOc,cAAR,CAKA,IAC0B,oBAAjB0T,aACTxU,EAAOgB,IAAM,IAAIwT,aACsB,oBAAvBC,mBAChBzU,EAAOgB,IAAM,IAAIyT,mBAEjBzU,EAAOc,eAAgB,CAE1B,OAAOiC,GACN/C,EAAOc,eAAgB,EAIpBd,EAAOgB,MACVhB,EAAOc,eAAgB,GAKzB,IAAI4T,EAAO,iBAAiBpC,KAAKtS,EAAOS,YAAcT,EAAOS,WAAWkU,UACpEC,EAAa5U,EAAOS,YAAcT,EAAOS,WAAWmU,WAAWpR,MAAM,0BACrEqR,EAAUD,EAAalR,SAASkR,EAAW,GAAI,IAAM,KACrD,GAAAF,GAAOG,GAAWA,EAAU,EAAG,CAC7B,IAAAC,EAAS,SAASxC,KAAKtS,EAAOS,YAAcT,EAAOS,WAAW6C,UAAUmI,eACxEzL,EAAOS,aAAeqU,IACxB9U,EAAOc,eAAgB,GAKvBd,EAAOc,gBACTd,EAAOY,gBAA+C,IAA1BZ,EAAOgB,IAAI2R,WAA8B3S,EAAOgB,IAAI4R,iBAAmB5S,EAAOgB,IAAI2R,aAC9G3S,EAAOY,WAAWW,KAAKC,eAAexB,EAAOM,OAAS,EAAIN,EAAOO,QAASP,EAAOgB,IAAIS,aACrFzB,EAAOY,WAAWkF,QAAQ9F,EAAOgB,IAAI+E,cAIvC/F,EAAOkB,SACR,EAcC6T,EAAA/U,OAAiBA,EACjB+U,EAAArN,KAAeA,OAIK,IAAXsN,GACTA,EAAOrV,aAAeA,EACtBqV,EAAOhV,OAASA,EAChBgV,EAAOtN,KAAOA,EACdsN,EAAOnJ,MAAQA,GACY,oBAAXnL,SAChBA,OAAOf,aAAeA,EACtBe,OAAOV,OAASA,EAChBU,OAAOgH,KAAOA,EACdhH,OAAOmL,MAAQA,EAEf,CAhhFJ;;;;;;;;;;;;AA+hFA,WAKElM,aAAaG,UAAUmV,KAAO,CAAC,EAAG,EAAG,GACxBtV,aAAAG,UAAUoV,aAAe,CAAC,EAAG,GAAO,IAAG,EAAG,GAW1CvV,aAAAG,UAAUqV,OAAS,SAASC,GACvC,IAAIrV,EAAOH,KAGX,IAAKG,EAAKiB,MAAQjB,EAAKiB,IAAIkN,SAClBnO,SAIT,QAAS2B,EAAE3B,EAAKM,OAAOsB,OAAO,EAAGD,GAAG,EAAGA,IACrC3B,EAAKM,OAAOqB,GAAGyT,OAAOC,GAGjBrV,QACR,EAUDJ,aAAaG,UAAUuV,IAAM,SAASC,EAAGC,EAAGC,GAC1C,IAAIzV,EAAOH,KAGX,OAAKG,EAAKiB,KAAQjB,EAAKiB,IAAIkN,UAK3BqH,EAAkB,iBAANA,EAAkBxV,EAAKkV,KAAK,GAAKM,EAC7CC,EAAkB,iBAANA,EAAkBzV,EAAKkV,KAAK,GAAKO,EAE5B,iBAANF,EAWFvV,EAAKkV,MAVZlV,EAAKkV,KAAO,CAACK,EAAGC,EAAGC,QAEwB,IAAhCzV,EAAKiB,IAAIkN,SAASuH,WAC3B1V,EAAKiB,IAAIkN,SAASuH,UAAUC,gBAAgB3V,EAAKkV,KAAK,GAAIjV,OAAOgB,IAAIS,YAAa,IAClF1B,EAAKiB,IAAIkN,SAASyH,UAAUD,gBAAgB3V,EAAKkV,KAAK,GAAIjV,OAAOgB,IAAIS,YAAa,IAClF1B,EAAKiB,IAAIkN,SAAS0H,UAAUF,gBAAgB3V,EAAKkV,KAAK,GAAIjV,OAAOgB,IAAIS,YAAa,KAElF1B,EAAKiB,IAAIkN,SAAS2H,YAAY9V,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,IAMjElV,IArBEA,CAsBV,EAgBYJ,aAAAG,UAAUgW,YAAc,SAASR,EAAGC,EAAGC,EAAGO,EAAKC,EAAKC,GAC/D,IAAIlW,EAAOH,KAGX,IAAKG,EAAKiB,MAAQjB,EAAKiB,IAAIkN,SAClBnO,SAIT,IAAImW,EAAKnW,EAAKmV,aAOV,OANJK,EAAkB,iBAANA,EAAkBW,EAAG,GAAKX,EACtCC,EAAkB,iBAANA,EAAkBU,EAAG,GAAKV,EACtCO,EAAsB,iBAARA,EAAoBG,EAAG,GAAKH,EAC1CC,EAAsB,iBAARA,EAAoBE,EAAG,GAAKF,EAC1CC,EAAsB,iBAARA,EAAoBC,EAAG,GAAKD,EAEzB,iBAANX,EAcFY,GAbPnW,EAAKmV,aAAe,CAACI,EAAGC,EAAGC,EAAGO,EAAKC,EAAKC,QAEE,IAA/BlW,EAAKiB,IAAIkN,SAASiI,UAC3BpW,EAAKiB,IAAIkN,SAASiI,SAAST,gBAAgBJ,EAAGtV,OAAOgB,IAAIS,YAAa,IACtE1B,EAAKiB,IAAIkN,SAASkI,SAASV,gBAAgBH,EAAGvV,OAAOgB,IAAIS,YAAa,IACtE1B,EAAKiB,IAAIkN,SAASmI,SAASX,gBAAgBF,EAAGxV,OAAOgB,IAAIS,YAAa,IACtE1B,EAAKiB,IAAIkN,SAASoI,IAAIZ,gBAAgBK,EAAK/V,OAAOgB,IAAIS,YAAa,IACnE1B,EAAKiB,IAAIkN,SAASqI,IAAIb,gBAAgBM,EAAKhW,OAAOgB,IAAIS,YAAa,IACnE1B,EAAKiB,IAAIkN,SAASsI,IAAId,gBAAgBO,EAAKjW,OAAOgB,IAAIS,YAAa,KAEnE1B,EAAKiB,IAAIkN,SAASuI,eAAenB,EAAGC,EAAGC,EAAGO,EAAKC,EAAKC,GAMjDlW,EACR,EAUI2H,KAAA5H,UAAUD,KAAQ,SAAS6W,GAC9B,OAAO,SAAS/O,GACd,IAAI5H,EAAOH,KAuBJ,OApBPG,EAAKmV,aAAevN,EAAEmO,aAAe,CAAC,EAAG,EAAG,GAC5C/V,EAAK4W,QAAUhP,EAAEwN,QAAU,KAC3BpV,EAAKkV,KAAOtN,EAAE0N,KAAO,KACrBtV,EAAK6W,YAAc,CACjBC,oBAA4C,IAArBlP,EAAEkP,eAAiClP,EAAEkP,eAAiB,IAC7EC,oBAA4C,IAArBnP,EAAEmP,eAAiCnP,EAAEmP,eAAiB,IAC7EC,mBAA0C,IAApBpP,EAAEoP,cAAgCpP,EAAEoP,cAAgB,EAC1EC,mBAA0C,IAApBrP,EAAEqP,cAAgCrP,EAAEqP,cAAgB,UAC1EC,iBAAsC,IAAlBtP,EAAEsP,YAA8BtP,EAAEsP,YAAc,IACpEC,kBAAwC,IAAnBvP,EAAEuP,aAA+BvP,EAAEuP,aAAe,OACvEC,iBAAsC,IAAlBxP,EAAEwP,YAA8BxP,EAAEwP,YAAc,EACpEC,mBAA0C,IAApBzP,EAAEyP,cAAgCzP,EAAEyP,cAAgB,GAI5ErX,EAAKsX,UAAY1P,EAAE2P,SAAW,CAAC,CAAC5N,GAAI/B,EAAE2P,WAAa,GACnDvX,EAAKwX,OAAS5P,EAAE6P,MAAQ,CAAC,CAAC9N,GAAI/B,EAAE6P,QAAU,GAC1CzX,EAAK0X,eAAiB9P,EAAE+P,cAAgB,CAAC,CAAChO,GAAI/B,EAAE+P,gBAAkB,GAG3DhB,EAAO/E,KAAK/R,KAAM+H,EAC1B,CACL,CA3ByB,CA2BpBD,KAAK5H,UAAUD,MAQlB6H,KAAK5H,UAAUqV,OAAS,SAASC,EAAKpJ,GACpC,IAAIjM,EAAOH,KAGP,IAACG,EAAK6B,UACD7B,SAILA,GAAgB,WAAhBA,EAAKqJ,OAQArJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,SACPC,OAAQ,WACNtL,EAAKoV,OAAOC,EAAKpJ,MAIdjM,EAIT,IAAI4X,OAAuD,IAAlC3X,OAAOgB,IAAI4W,mBAAsC,UAAY,SAGlF,QAAc,IAAP5L,EAAoB,CAEzB,GAAe,iBAARoJ,EAIT,OAAOrV,EAAK4W,QAHZ5W,EAAK4W,QAAUvB,EACfrV,EAAKkV,KAAO,CAACG,EAAK,EAAG,GAQzB,IADI,IAAAvT,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAEhC,GAAIM,EAAO,CACL,GAAe,iBAARoT,EA4BT,OAAOpT,EAAM2U,QA3Bb3U,EAAM2U,QAAUvB,EAChBpT,EAAMiT,KAAO,CAACG,EAAK,EAAG,GAElBpT,EAAME,QAERF,EAAM4U,YAAYM,aAAe,aAG5BlV,EAAMmQ,SAAYnQ,EAAMmQ,QAAQiD,KACnCyC,EAAY7V,EAAO2V,GAGF,YAAfA,OACqC,IAA5B3V,EAAMmQ,QAAQsD,WACvBzT,EAAMmQ,QAAQsD,UAAUjU,eAAe4T,EAAKpV,OAAOgB,IAAIS,aACvDO,EAAMmQ,QAAQwD,UAAUnU,eAAe,EAAGxB,OAAOgB,IAAIS,aACrDO,EAAMmQ,QAAQyD,UAAUpU,eAAe,EAAGxB,OAAOgB,IAAIS,cAErDO,EAAMmQ,QAAQ0D,YAAYT,EAAK,EAAG,GAGpCpT,EAAMmQ,QAAQiD,IAAI5T,eAAe4T,EAAKpV,OAAOgB,IAAIS,cAIrD1B,EAAKwG,MAAM,SAAUvE,EAAMmK,MAO1BpM,QACR,EAUD2H,KAAK5H,UAAUuV,IAAM,SAASC,EAAGC,EAAGC,EAAGxJ,GACrC,IAAIjM,EAAOH,KAGP,IAACG,EAAK6B,UACD7B,SAILA,GAAgB,WAAhBA,EAAKqJ,OAQArJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,MACPC,OAAQ,WACNtL,EAAKsV,IAAIC,EAAGC,EAAGC,EAAGxJ,MAIfjM,EAQL,GAJCwV,EAAa,iBAANA,EAAkB,EAAIA,EAC7BC,EAAa,iBAANA,GAAyB,GAAAA,OAGnB,IAAPxJ,EAAoB,CAEzB,GAAa,iBAANsJ,EAGT,OAAOvV,EAAKkV,KAFZlV,EAAKkV,KAAO,CAACK,EAAGC,EAAGC,GAQvB,IADI,IAAA3T,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAEhC,GAAIM,EAAO,CACL,GAAa,iBAANsT,EAoBT,OAAOtT,EAAMiT,KAnBbjT,EAAMiT,KAAO,CAACK,EAAGC,EAAGC,GAEhBxT,EAAME,QAEHF,EAAMmQ,UAAWnQ,EAAMmQ,QAAQiD,KAClCyC,EAAY7V,EAAO,gBAGkB,IAA5BA,EAAMmQ,QAAQsD,WACvBzT,EAAMmQ,QAAQsD,UAAUjU,eAAe8T,EAAGtV,OAAOgB,IAAIS,aACrDO,EAAMmQ,QAAQwD,UAAUnU,eAAe+T,EAAGvV,OAAOgB,IAAIS,aACrDO,EAAMmQ,QAAQyD,UAAUpU,eAAegU,EAAGxV,OAAOgB,IAAIS,cAErDO,EAAMmQ,QAAQ0D,YAAYP,EAAGC,EAAGC,IAIpCzV,EAAKwG,MAAM,MAAOvE,EAAMmK,MAOvBpM,QACR,EAYD2H,KAAK5H,UAAUgW,YAAc,SAASR,EAAGC,EAAGC,EAAGxJ,GAC7C,IAAIjM,EAAOH,KAGP,IAACG,EAAK6B,UACD7B,SAILA,GAAgB,WAAhBA,EAAKqJ,OAQArJ,OAPPA,EAAKuJ,OAAOrC,KAAK,CACfmE,MAAO,cACPC,OAAQ,WACNtL,EAAK+V,YAAYR,EAAGC,EAAGC,EAAGxJ,MAIvBjM,EAQL,GAJJwV,EAAkB,iBAANA,EAAkBxV,EAAKmV,aAAa,GAAKK,EACrDC,EAAkB,iBAANA,EAAkBzV,EAAKmV,aAAa,GAAKM,OAGnC,IAAPxJ,EAAoB,CAEzB,GAAa,iBAANsJ,EAGT,OAAOvV,EAAKmV,aAFZnV,EAAKmV,aAAe,CAACI,EAAGC,EAAGC,GAQ/B,IADI,IAAA3T,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAAK,CAE/B,IAAIM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAEhC,GAAIM,EAAO,CACL,GAAa,iBAANsT,EAyBT,OAAOtT,EAAMkT,aAxBblT,EAAMkT,aAAe,CAACI,EAAGC,EAAGC,GAExBxT,EAAME,QAEHF,EAAMmQ,UAEJnQ,EAAMiT,OACTjT,EAAMiT,KAAOlV,EAAKkV,MAAQ,CAAC,EAAG,GAAO,KAGvC4C,EAAY7V,EAAO,iBAGqB,IAA/BA,EAAMmQ,QAAQ2F,cACvB9V,EAAMmQ,QAAQ2F,aAAatW,eAAe8T,EAAGtV,OAAOgB,IAAIS,aACxDO,EAAMmQ,QAAQ4F,aAAavW,eAAe+T,EAAGvV,OAAOgB,IAAIS,aACxDO,EAAMmQ,QAAQ6F,aAAaxW,eAAegU,EAAGxV,OAAOgB,IAAIS,cAExDO,EAAMmQ,QAAQsE,eAAenB,EAAGC,EAAGC,IAIvCzV,EAAKwG,MAAM,cAAevE,EAAMmK,MAO/BpM,QACR,EAgCI2H,KAAA5H,UAAUmY,WAAa,WAC1B,IAEItQ,EAAGqE,EAAIhK,EAFPjC,EAAOH,KACPgP,EAAOH,UAIP,IAAC1O,EAAK6B,UACD7B,SAIL,GAAgB,IAAhB6O,EAAKjN,OAEP,OAAO5B,EAAK6W,YAClB,GAA+B,IAAhBhI,EAAKjN,OAAc,CAC5B,GAAuB,iBAAZiN,EAAK,GAgCP,OADP5M,EAAQjC,EAAKkC,WAAWyB,SAASkL,EAAK,GAAI,MAC3B5M,EAAM4U,YAAc7W,EAAK6W,YA/BxCjP,EAAIiH,EAAK,QAGS,IAAP5C,IACJrE,EAAEsQ,aACLtQ,EAAEsQ,WAAa,CACbpB,eAAgBlP,EAAEkP,eAClBC,eAAgBnP,EAAEmP,eAClBC,cAAepP,EAAEoP,cACjBC,cAAerP,EAAEqP,cACjBC,YAAatP,EAAEsP,YACfE,YAAaxP,EAAEwP,YACfC,cAAezP,EAAEyP,cACjBF,aAAcvP,EAAEuP,eAIpBnX,EAAK6W,YAAc,CACjBC,oBAAuD,IAAhClP,EAAEsQ,WAAWpB,eAAiClP,EAAEsQ,WAAWpB,eAAiB9W,EAAKmY,gBACxGpB,oBAAuD,IAAhCnP,EAAEsQ,WAAWnB,eAAiCnP,EAAEsQ,WAAWnB,eAAiB/W,EAAKoY,gBACxGpB,mBAAqD,IAA/BpP,EAAEsQ,WAAWlB,cAAgCpP,EAAEsQ,WAAWlB,cAAgBhX,EAAKqY,eACrGpB,mBAAqD,IAA/BrP,EAAEsQ,WAAWjB,cAAgCrP,EAAEsQ,WAAWjB,cAAgBjX,EAAKsY,eACrGpB,iBAAiD,IAA7BtP,EAAEsQ,WAAWhB,YAA8BtP,EAAEsQ,WAAWhB,YAAclX,EAAKuY,aAC/FnB,iBAAiD,IAA7BxP,EAAEsQ,WAAWd,YAA8BxP,EAAEsQ,WAAWd,YAAcpX,EAAKwY,aAC/FnB,mBAAqD,IAA/BzP,EAAEsQ,WAAWb,cAAgCzP,EAAEsQ,WAAWb,cAAgBrX,EAAKyY,eACrGtB,kBAAmD,IAA9BvP,EAAEsQ,WAAWf,aAA+BvP,EAAEsQ,WAAWf,aAAenX,EAAK0Y,eAQ9G,MAA+B,IAAhB7J,EAAKjN,SACdgG,EAAIiH,EAAK,GACT5C,EAAKtI,SAASkL,EAAK,GAAI,KAKzB,IADI,IAAA/M,EAAM9B,EAAK+B,aAAakK,GACnBtK,EAAE,EAAGA,EAAEG,EAAIF,OAAQD,IAG1B,GAFAM,EAAQjC,EAAKkC,WAAWJ,EAAIH,IAEjB,CAET,IAAIgX,EAAK1W,EAAM4U,YACV8B,EAAA,CACH7B,oBAA4C,IAArBlP,EAAEkP,eAAiClP,EAAEkP,eAAiB6B,EAAG7B,eAChFC,oBAA4C,IAArBnP,EAAEmP,eAAiCnP,EAAEmP,eAAiB4B,EAAG5B,eAChFC,mBAA0C,IAApBpP,EAAEoP,cAAgCpP,EAAEoP,cAAgB2B,EAAG3B,cAC7EC,mBAA0C,IAApBrP,EAAEqP,cAAgCrP,EAAEqP,cAAgB0B,EAAG1B,cAC7EC,iBAAsC,IAAlBtP,EAAEsP,YAA8BtP,EAAEsP,YAAcyB,EAAGzB,YACvEE,iBAAsC,IAAlBxP,EAAEwP,YAA8BxP,EAAEwP,YAAcuB,EAAGvB,YACvEC,mBAA0C,IAApBzP,EAAEyP,cAAgCzP,EAAEyP,cAAgBsB,EAAGtB,cAC7EF,kBAAwC,IAAnBvP,EAAEuP,aAA+BvP,EAAEuP,aAAewB,EAAGxB,cAI5E,IAAIyB,EAAS3W,EAAMmQ,QACdwG,IAEE3W,EAAMiT,OACTjT,EAAMiT,KAAOlV,EAAKkV,MAAQ,CAAC,EAAG,GAAO,KAIvC4C,EAAY7V,EAAO,WACnB2W,EAAS3W,EAAMmQ,SAIjBwG,EAAO9B,eAAiB6B,EAAG7B,eAC3B8B,EAAO7B,eAAiB4B,EAAG5B,eAC3B6B,EAAO5B,cAAgB2B,EAAG3B,cAC1B4B,EAAO3B,cAAgB0B,EAAG1B,cAC1B2B,EAAO1B,YAAcyB,EAAGzB,YACxB0B,EAAOxB,YAAcuB,EAAGvB,YACxBwB,EAAOvB,cAAgBsB,EAAGtB,cAC1BuB,EAAOzB,aAAewB,EAAGxB,aAItBnX,QACR,EAUK8L,MAAA/L,UAAUD,KAAQ,SAAS6W,GAC/B,OAAO,WACL,IAAI3W,EAAOH,KACP6S,EAAS1S,EAAKyS,QAGlBzS,EAAKmV,aAAezC,EAAOyC,aAC3BnV,EAAK4W,QAAUlE,EAAOkE,QACtB5W,EAAKkV,KAAOxC,EAAOwC,KACnBlV,EAAK6W,YAAcnE,EAAOmE,YAG1BF,EAAO/E,KAAK/R,MAGRG,EAAK4W,QACAlE,EAAA0C,OAAOpV,EAAK4W,SACV5W,EAAKkV,MACdxC,EAAO4C,IAAItV,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,GAAIlV,EAAKoM,IAE7D,CACL,CArB0B,CAqBrBN,MAAM/L,UAAUD,MAObgM,MAAA/L,UAAUkS,MAAS,SAAS0E,GAChC,OAAO,WACL,IAAI3W,EAAOH,KACP6S,EAAS1S,EAAKyS,QAqBX,OAlBPzS,EAAKmV,aAAezC,EAAOyC,aAC3BnV,EAAK4W,QAAUlE,EAAOkE,QACtB5W,EAAKkV,KAAOxC,EAAOwC,KACnBlV,EAAK6W,YAAcnE,EAAOmE,YAGtB7W,EAAK4W,QACAlE,EAAA0C,OAAOpV,EAAK4W,SACV5W,EAAKkV,KACdxC,EAAO4C,IAAItV,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,GAAIlV,EAAKkV,KAAK,GAAIlV,EAAKoM,KACjDpM,EAAKoS,UAEdpS,EAAKoS,QAAQ/L,WAAW,GACxBrG,EAAKoS,aAAU,EACfM,EAAOtF,eAAepN,IAIjB2W,EAAO/E,KAAK/R,KACpB,CACL,CA1B2B,CA0BtBiM,MAAM/L,UAAUkS,OAUf,IAAA6F,EAAc,SAAS7V,EAAO4W,GAInB,aAHbA,EAAOA,GAAQ,YAIP5W,EAAAmQ,QAAUnS,OAAOgB,IAAI6X,eACrB7W,EAAAmQ,QAAQ0E,eAAiB7U,EAAM4U,YAAYC,eAC3C7U,EAAAmQ,QAAQ2E,eAAiB9U,EAAM4U,YAAYE,eAC3C9U,EAAAmQ,QAAQ4E,cAAgB/U,EAAM4U,YAAYG,cAC1C/U,EAAAmQ,QAAQ6E,cAAgBhV,EAAM4U,YAAYI,cAC1ChV,EAAAmQ,QAAQ8E,YAAcjV,EAAM4U,YAAYK,YACxCjV,EAAAmQ,QAAQgF,YAAcnV,EAAM4U,YAAYO,YACxCnV,EAAAmQ,QAAQiF,cAAgBpV,EAAM4U,YAAYQ,cAC1CpV,EAAAmQ,QAAQ+E,aAAelV,EAAM4U,YAAYM,kBAER,IAA5BlV,EAAMmQ,QAAQsD,WACjBzT,EAAAmQ,QAAQsD,UAAUjU,eAAeQ,EAAMiT,KAAK,GAAIjV,OAAOgB,IAAIS,aAC3DO,EAAAmQ,QAAQwD,UAAUnU,eAAeQ,EAAMiT,KAAK,GAAIjV,OAAOgB,IAAIS,aAC3DO,EAAAmQ,QAAQyD,UAAUpU,eAAeQ,EAAMiT,KAAK,GAAIjV,OAAOgB,IAAIS,cAEjEO,EAAMmQ,QAAQ0D,YAAY7T,EAAMiT,KAAK,GAAIjT,EAAMiT,KAAK,GAAIjT,EAAMiT,KAAK,SAG3B,IAA/BjT,EAAMmQ,QAAQ2F,cACjB9V,EAAAmQ,QAAQ2F,aAAatW,eAAeQ,EAAMkT,aAAa,GAAIlV,OAAOgB,IAAIS,aACtEO,EAAAmQ,QAAQ4F,aAAavW,eAAeQ,EAAMkT,aAAa,GAAIlV,OAAOgB,IAAIS,aACtEO,EAAAmQ,QAAQ6F,aAAaxW,eAAeQ,EAAMkT,aAAa,GAAIlV,OAAOgB,IAAIS,cAE5EO,EAAMmQ,QAAQsE,eAAezU,EAAMkT,aAAa,GAAIlT,EAAMkT,aAAa,GAAIlT,EAAMkT,aAAa,MAG1FlT,EAAAmQ,QAAUnS,OAAOgB,IAAI4W,qBAC3B5V,EAAMmQ,QAAQiD,IAAI5T,eAAeQ,EAAM2U,QAAS3W,OAAOgB,IAAIS,cAGvDO,EAAAmQ,QAAQrM,QAAQ9D,EAAME,OAGvBF,EAAMoF,SACHpF,EAAAwQ,QAAQrE,MAAMnM,EAAMmK,KAAK,GAAMvF,KAAK5E,EAAMmK,KAAK,EAExD,EAroBH,GC12EM,MAAA2M,EAAe,IAzLrB,MACE,WAAAC,GACEnZ,KAAK8Q,OAAS,CAAC,EACf9Q,KAAKwC,OAAQ,EACbxC,KAAKoZ,aAAc,EACdpZ,KAAAqZ,WAAa,CAAC,MACnBrZ,KAAKsZ,eAAiB,CAAC,EACvBtZ,KAAKuZ,aAAe,IACpBvZ,KAAKwZ,eAAgB,EAGrBxZ,KAAKyZ,QAAU,8BAGO,oBAAX3Y,QAET6G,YAAW,KACT3H,KAAK0Z,aACL1Z,KAAK2Z,yBAAwB,GAC5B,EACL,CAMF,UAAAD,GACM1Z,KAAKoZ,cAGTpZ,KAAK4Z,aAAa,MAGlB5Z,KAAKoZ,aAAc,GAOrB,YAAAQ,CAAaC,GAEP,GAAA7Z,KAAK8Q,OAAO+I,GAAW,OAG3B,MAAMC,EAAU,CAAC,EAGA,OAAbD,IAEMC,EAAAC,KAAO,CAAC,EAAG,KACXD,EAAAE,MAAQ,CAAC,IAAK,KACdF,EAAAG,MAAQ,CAAC,KAAM,OAIzBja,KAAK8Q,OAAO+I,GAAY,IAAI/R,OAAK,CAC/BE,IAAK,CACH,GAAGhI,KAAKyZ,wBAAwBI,eAChC,GAAG7Z,KAAKyZ,wBAAwBI,iBAElC7Q,OAAQ8Q,EACRlR,SAAS,EAETN,MAAOtI,KAAKka,kBACZ9R,OAAQ,CAAC,MAAO,QAChBM,KAAM,IACP,CASH,IAAA1B,CAAK5E,EAAOb,EAAS,GAEnB,GAAIvB,KAAKwC,MAAO,OAKhB,IAAIqX,EAAUM,EAQd,GAVKna,KAAKoZ,aAAapZ,KAAK0Z,aAGxBtX,EAAMgY,SAAS,MAChBP,EAAUM,GAAa/X,EAAM2B,MAAM,MAEzB8V,EAAA,KACCM,EAAA/X,IAGTpC,KAAK8Q,OAAO+I,GAGf,YADA7Z,KAAK4Z,aAAaC,GAKpB,MAAMQ,EAAW,GAAGR,KAAYM,IAG1BnK,EAAMD,KAAKC,MAEb,OAAAA,GADehQ,KAAKsZ,eAAee,IAAa,GAC7Bra,KAAKuZ,kBAAxB,GAKCvZ,KAAAsZ,eAAee,GAAYrK,EAGhChQ,KAAK8Q,OAAO+I,GAAUtY,OAAOA,GACtBvB,KAAK8Q,OAAO+I,GAAU7S,KAAKmT,GAAS,CAO7C,QAAAG,CAAS9X,GACPxC,KAAKwC,MAAQA,EAGbmP,OAAO4I,OAAOva,KAAK8Q,QAAQoD,SAAiB9R,IACtCA,GAASA,EAAMG,MACjBH,EAAMG,KAAKC,EAAK,GAEnB,CAOH,mBAAAgY,CAAoBC,GACdA,QAA4C,IAAtBA,EAAYjY,OAC/BxC,KAAAsa,SAASG,EAAYjY,MAC5B,CAOF,uBAAAmX,GACE,GAAsB,oBAAX7Y,SAA2Bd,KAAKka,kBAAmB,OAE9D,MAAMQ,EAAc,KAClB,GAAI1a,KAAKwZ,cAAe,OAGlB,MAAAmB,EAAU,IAAI1X,MACpB0X,EAAQ3S,IAAM,iRACd2S,EAAQ9U,OACA8U,EAAA3T,OAAOE,MAAK,KAClBlH,KAAKwZ,eAAgB,EACZ/S,SAAAmU,KAAKlU,oBAAoB,aAAcgU,GACvCjU,SAAAmU,KAAKlU,oBAAoB,WAAYgU,GACrCjU,SAAAmU,KAAKlU,oBAAoB,QAASgU,EAAW,IACrDvT,OAAWhE,IAAL,GAER,EAIHsD,SAASmU,KAAKhU,iBAAiB,aAAc8T,GAAa,GAC1DjU,SAASmU,KAAKhU,iBAAiB,WAAY8T,GAAa,GACxDjU,SAASmU,KAAKhU,iBAAiB,QAAS8T,GAAa,EAAK,CAQ5D,eAAAR,GACM,MAAqB,oBAAdnZ,YAEJ,iEAAiE2R,KAAK3R,UAAU2C,YAC7D,aAAvB3C,UAAUgU,UAA2BhU,UAAU8Z,eAAiB,ilCCjL1DC,EAAgB,EAAGC,UAAU,gBAEtCC,EAAAC,IAAC,OAAIC,UAAWC,EACdC,SAACC,OAAA,OAAIH,UAAWC,EACdC,SAAA,GAACH,IAAA,OAAIC,UAAWC,IACfF,MAAA,KAAEC,UAAWC,EAAiBC,SAAQL,SCbzCO,EAAsB3J,OAAAmB,OAAO,MACnCwI,EAAmB,KAAI,IACvBA,EAAoB,MAAI,IACxBA,EAAmB,KAAI,IACvBA,EAAmB,KAAI,IACvBA,EAAsB,QAAI,IAC1BA,EAAsB,QAAI,IAC1BA,EAAmB,KAAI,IACvB,MAAMC,EAA8B5J,OAAAmB,OAAO,MAC3CnB,OAAOD,KAAK4J,GAAcpH,SAASC,IACVoH,EAAAD,EAAanH,IAAQA,KAE9C,MAAMqH,EAAe,CAAExC,KAAM,QAASvF,KAAM,gBCXtCgI,EAAiC,mBAATC,MACT,oBAATA,MACqC,6BAAzC/J,OAAOzR,UAAUyb,SAAS5J,KAAK2J,MACjCE,EAA+C,mBAAhBC,YAE/BC,EAAUC,GACyB,mBAAvBF,YAAYC,OACpBD,YAAYC,OAAOC,GACnBA,GAAOA,EAAI9V,kBAAkB4V,YAEjCG,EAAe,EAAGhD,OAAMvF,QAAQwI,EAAgBC,IAC9CT,GAAkBhI,aAAgBiI,KAC9BO,EACOC,EAASzI,GAGT0I,EAAmB1I,EAAMyI,GAG/BN,IACJnI,aAAgBoI,aAAeC,EAAOrI,IACnCwI,EACOC,EAASzI,GAGT0I,EAAmB,IAAIT,KAAK,CAACjI,IAAQyI,GAI7CA,EAASZ,EAAatC,IAASvF,GAAQ,KAE5C0I,EAAqB,CAAC1I,EAAMyI,KACxB,MAAAE,EAAa,IAAIC,WAKhB,OAJPD,EAAWlS,OAAS,WAChB,MAAMoS,EAAUF,EAAWG,OAAOxY,MAAM,KAAK,GACpCmY,EAAA,KAAOI,GAAW,IAC9B,EACMF,EAAWI,cAAc/I,EAAI,EAExC,SAASgJ,EAAQhJ,GACb,OAAIA,aAAgBG,WACTH,EAEFA,aAAgBoI,YACd,IAAIjI,WAAWH,GAGf,IAAIG,WAAWH,EAAKxN,OAAQwN,EAAKiJ,WAAYjJ,EAAKkJ,WAEjE,CACA,IAAIC,EClDJ,MAAMC,EAAQ,mEAERC,EAA+B,oBAAflJ,WAA6B,GAAK,IAAIA,WAAW,KACvE,QAAS9R,GAAI,EAAGA,GAAI+a,GAAc/a,KAC9Bgb,EAAOD,EAAMhJ,WAAW/R,KAAMA,GAkB3B,MCrBD8Z,EAA+C,mBAAhBC,YACxBkB,EAAe,CAACC,EAAeC,KACpC,GAAyB,iBAAlBD,EACA,OACHhE,KAAM,UACNvF,KAAMyJ,EAAUF,EAAeC,IAGjC,MAAAjE,EAAOgE,EAAcG,OAAO,GAClC,GAAa,MAATnE,EACO,OACHA,KAAM,UACNvF,KAAM2J,EAAmBJ,EAAcK,UAAU,GAAIJ,IAI7D,OADmB1B,EAAqBvC,GAIjCgE,EAAcjb,OAAS,EACxB,CACEiX,KAAMuC,EAAqBvC,GAC3BvF,KAAMuJ,EAAcK,UAAU,IAEhC,CACErE,KAAMuC,EAAqBvC,IARxBwC,CASN,EAEH4B,EAAqB,CAAC3J,EAAMwJ,KAC9B,GAAIrB,EAAuB,CACjB,MAAA0B,EDTQ,CAACC,IACnB,IAA8Dzb,EAAU0b,EAAUC,EAAUC,EAAUC,EAAlGC,EAA+B,IAAhBL,EAAOxb,OAAesN,EAAMkO,EAAOxb,OAAW8b,EAAI,EACnC,MAA9BN,EAAOA,EAAOxb,OAAS,KACvB6b,IACkC,MAA9BL,EAAOA,EAAOxb,OAAS,IACvB6b,KAGF,MAAAlJ,EAAc,IAAImH,YAAY+B,GAAeE,EAAQ,IAAIlK,WAAWc,GAC1E,IAAK5S,EAAI,EAAGA,EAAIuN,EAAKvN,GAAK,EACtB0b,EAAWV,EAAOS,EAAO1J,WAAW/R,IACpC2b,EAAWX,EAAOS,EAAO1J,WAAW/R,EAAI,IACxC4b,EAAWZ,EAAOS,EAAO1J,WAAW/R,EAAI,IACxC6b,EAAWb,EAAOS,EAAO1J,WAAW/R,EAAI,IACxCgc,EAAMD,KAAQL,GAAY,EAAMC,GAAY,EAC5CK,EAAMD,MAAoB,GAAXJ,IAAkB,EAAMC,GAAY,EACnDI,EAAMD,MAAoB,EAAXH,IAAiB,EAAiB,GAAXC,EAEnC,OAAAjJ,CAAA,ECTaqJ,CAAOtK,GAChB,OAAAyJ,EAAUI,EAASL,EAClC,CAEe,OAAEM,QAAQ,EAAM9J,OAC/B,EAEMyJ,EAAY,CAACzJ,EAAMwJ,IAEZ,SADDA,EAEIxJ,aAAgBiI,KAETjI,EAIA,IAAIiI,KAAK,CAACjI,IAIjBA,aAAgBoI,YAETpI,EAIAA,EAAKxN,OCvDtB+X,EAAYC,OAAOC,aAAa,IA4B/B,SAASC,IACZ,OAAO,IAAIC,gBAAgB,CACvB,SAAAC,CAAUC,EAAQC,IHmBnB,SAA8BD,EAAQpC,GACrCT,GAAkB6C,EAAO7K,gBAAgBiI,KAClC4C,EAAO7K,KAAK+K,cAActX,KAAKuV,GAASvV,KAAKgV,GAE/CN,IACJ0C,EAAO7K,gBAAgBoI,aAAeC,EAAOwC,EAAO7K,OAC9CyI,EAASO,EAAQ6B,EAAO7K,OAEtBuI,EAAAsC,GAAQ,GAAQG,IACpB7B,IACDA,EAAe,IAAI8B,aAEdxC,EAAAU,EAAa+B,OAAOF,GAAQ,GAE7C,CGhCiCG,CAAAN,GAAStB,IAC1B,MAAM6B,EAAgB7B,EAAcjb,OAChC+c,MAEJ,GAAID,EAAgB,IAChBC,EAAS,IAAIlL,WAAW,GACxB,IAAImL,SAASD,EAAO7Y,QAAQ+Y,SAAS,EAAGH,QAC5D,GACyBA,EAAgB,MAAO,CAC5BC,EAAS,IAAIlL,WAAW,GACxB,MAAMqL,EAAO,IAAIF,SAASD,EAAO7Y,QAC5BgZ,EAAAD,SAAS,EAAG,KACZC,EAAAC,UAAU,EAAGL,EACtC,KACqB,CACDC,EAAS,IAAIlL,WAAW,GACxB,MAAMqL,EAAO,IAAIF,SAASD,EAAO7Y,QAC5BgZ,EAAAD,SAAS,EAAG,KACjBC,EAAKE,aAAa,EAAGC,OAAOP,GAChD,CAEoBP,EAAO7K,MAA+B,iBAAhB6K,EAAO7K,OAC7BqL,EAAO,IAAM,KAEjBP,EAAWc,QAAQP,GACnBP,EAAWc,QAAQrC,EAAa,GAEvC,GAET,CACA,IAAIsC,EACJ,SAASC,EAAYC,GACV,OAAAA,EAAOC,QAAO,CAACC,EAAKC,IAAUD,EAAMC,EAAM5d,QAAQ,EAC7D,CACA,SAAS6d,EAAaJ,EAAQK,GAC1B,GAAIL,EAAO,GAAGzd,SAAW8d,EACrB,OAAOL,EAAOvN,QAEZ,MAAAhM,EAAS,IAAI2N,WAAWiM,GAC9B,IAAI1d,EAAI,EACR,QAASL,EAAI,EAAGA,EAAI+d,EAAM/d,IACtBmE,EAAOnE,GAAK0d,EAAO,GAAGrd,KAClBA,IAAMqd,EAAO,GAAGzd,SAChByd,EAAOvN,QACH9P,EAAA,GAML,OAHHqd,EAAOzd,QAAUI,EAAIqd,EAAO,GAAGzd,SAC/Byd,EAAO,GAAKA,EAAO,GAAGxT,MAAM7J,IAEzB8D,CACX,CC/EO,SAAS6Z,EAAQ/D,GAClB,GAAAA,EAAY,OAWlB,SAAeA,GACJ5H,aAAO2L,EAAQ5f,UACtB6b,EAAI5H,GAAO2L,EAAQ5f,UAAUiU,GAExB,OAAA4H,CACT,CAhBkBgE,CAAMhE,EACxB,CA0BA+D,EAAQ5f,UAAUoR,GAClBwO,EAAQ5f,UAAU0G,iBAAmB,SAAS4E,EAAO1B,GAI5C,OAHF9J,KAAAggB,WAAahgB,KAAKggB,YAAc,CAAE,GACtChgB,KAAKggB,WAAW,IAAMxU,GAASxL,KAAKggB,WAAW,IAAMxU,IAAU,IAC7DnE,KAAKyC,GACD9J,IACT,EAYA8f,EAAQ5f,UAAU2N,KAAO,SAASrC,EAAO1B,GACvC,SAASwH,IACFtR,KAAAwR,IAAIhG,EAAO8F,GACbxH,EAAAmF,MAAMjP,KAAM6O,UACnB,CAIS,OAFPyC,EAAGxH,GAAKA,EACH9J,KAAAsR,GAAG9F,EAAO8F,GACRtR,IACT,EAYA8f,EAAQ5f,UAAUsR,IAClBsO,EAAQ5f,UAAU+f,eAClBH,EAAQ5f,UAAUggB,mBAClBJ,EAAQ5f,UAAUwG,oBAAsB,SAAS8E,EAAO1B,GAIlD,GAHC9J,KAAAggB,WAAahgB,KAAKggB,YAAc,CAAE,EAGnC,GAAKnR,UAAU9M,OAEV,OADP/B,KAAKggB,WAAa,CAAE,EACbhgB,KAIT,IAUImgB,EAVAC,EAAYpgB,KAAKggB,WAAW,IAAMxU,GAClC,IAAC4U,EAAkB,OAAApgB,KAGnB,MAAK6O,UAAU9M,OAEV,cADA/B,KAAKggB,WAAW,IAAMxU,GACtBxL,KAKT,QAAS8B,EAAI,EAAGA,EAAIse,EAAUre,OAAQD,IAEpC,IADAqe,EAAKC,EAAUte,MACJgI,GAAMqW,EAAGrW,KAAOA,EAAI,CACnBsW,EAAAjP,OAAOrP,EAAG,GACpB,KACN,CASS,OAJkB,IAArBse,EAAUre,eACL/B,KAAKggB,WAAW,IAAMxU,GAGxBxL,IACT,EAUA8f,EAAQ5f,UAAUmgB,KAAO,SAAS7U,GAC3BxL,KAAAggB,WAAahgB,KAAKggB,YAAc,CAAE,EAKvC,IAHI,IAAAhR,EAAO,IAAI4C,MAAM/C,UAAU9M,OAAS,GACpCqe,EAAYpgB,KAAKggB,WAAW,IAAMxU,GAE7B1J,EAAI,EAAGA,EAAI+M,UAAU9M,OAAQD,IACpCkN,EAAKlN,EAAI,GAAK+M,UAAU/M,GAG1B,GAAIse,EAEO,CAAAte,EAAI,EAAJ,QAAOuN,GADJ+Q,IAAUpU,MAAM,IACIjK,OAAQD,EAAIuN,IAAOvN,EACjDse,EAAUte,GAAGmN,MAAMjP,KAAMgP,EADKjN,CAK3B,OAAA/B,IACT,EAGA8f,EAAQ5f,UAAUogB,aAAeR,EAAQ5f,UAAUmgB,KAUnDP,EAAQ5f,UAAUqgB,UAAY,SAAS/U,GAErC,OADKxL,KAAAggB,WAAahgB,KAAKggB,YAAc,CAAE,EAChChgB,KAAKggB,WAAW,IAAMxU,IAAU,EACzC,EAUAsU,EAAQ5f,UAAUsgB,aAAe,SAAShV,GACxC,QAAUxL,KAAKugB,UAAU/U,GAAOzJ,MAClC,ECxKO,MAAM0e,EACqC,mBAAZxZ,SAAqD,mBAApBA,QAAQyZ,QAE/DP,GAAOlZ,QAAQyZ,UAAUxZ,KAAKiZ,GAG/B,CAACA,EAAIQ,IAAiBA,EAAaR,EAAI,GAGzCS,EACW,oBAATzgB,KACAA,KAEgB,oBAAXW,OACLA,OAGA+f,SAAS,cAATA,GChBR,SAASC,EAAK/E,KAAQgF,GACzB,OAAOA,EAAKtB,QAAO,CAACC,EAAKsB,KACjBjF,EAAIkF,eAAeD,KACftB,EAAAsB,GAAKjF,EAAIiF,IAEVtB,IACR,GACP,CAEA,MAAMwB,EAAqBC,EAAWxZ,WAChCyZ,EAAuBD,EAAWzZ,aACjC,SAAS2Z,EAAsBtF,EAAKuF,GACnCA,EAAKC,iBACDxF,EAAA4E,aAAeO,EAAmBtT,KAAKuT,GACvCpF,EAAAyF,eAAiBJ,EAAqBxT,KAAKuT,KAG/CpF,EAAI4E,aAAeQ,EAAWxZ,WAAWiG,KAAKuT,GAC9CpF,EAAIyF,eAAiBL,EAAWzZ,aAAakG,KAAKuT,GAE1D,CAkCO,SAASM,IACZ,OAAQ1R,KAAKC,MAAM2L,SAAS,IAAI0B,UAAU,GACtCzQ,KAAK8U,SAAS/F,SAAS,IAAI0B,UAAU,EAAG,EAChD,CCtDO,MAAMsE,UAAuBC,MAChC,WAAAzI,CAAY0I,EAAQC,EAAaC,GAC7BC,MAAMH,GACN7hB,KAAK8hB,YAAcA,EACnB9hB,KAAK+hB,QAAUA,EACf/hB,KAAKgZ,KAAO,gBACpB,EAEO,MAAMiJ,UAAkBnC,EAO3B,WAAA3G,CAAYmI,GACDU,QACPhiB,KAAKkiB,UAAW,EAChBb,EAAsBrhB,KAAMshB,GAC5BthB,KAAKshB,KAAOA,EACZthB,KAAKmiB,MAAQb,EAAKa,MAClBniB,KAAKoiB,OAASd,EAAKc,OACdpiB,KAAAic,gBAAkBqF,EAAKe,WACpC,CAUI,OAAAC,CAAQT,EAAQC,EAAaC,GAElB,OADPC,MAAM1B,aAAa,QAAS,IAAIqB,EAAeE,EAAQC,EAAaC,IAC7D/hB,IACf,CAII,IAAAgU,GAGW,OAFPhU,KAAKoO,WAAa,UAClBpO,KAAKuiB,SACEviB,IACf,CAII,KAAA2C,GAKW,MAJiB,YAApB3C,KAAKoO,YAAgD,SAApBpO,KAAKoO,aACtCpO,KAAKwiB,UACLxiB,KAAKyiB,WAEFziB,IACf,CAMI,IAAAyU,CAAKiO,GACuB,SAApB1iB,KAAKoO,YACLpO,KAAK2iB,MAAMD,EAKvB,CAMI,MAAAE,GACI5iB,KAAKoO,WAAa,OAClBpO,KAAKkiB,UAAW,EAChBF,MAAM1B,aAAa,OAC3B,CAOI,MAAAuC,CAAOpP,GACH,MAAM6K,EAASvB,EAAatJ,EAAMzT,KAAKoiB,OAAOnF,YAC9Cjd,KAAK8iB,SAASxE,EACtB,CAMI,QAAAwE,CAASxE,GACC0D,MAAA1B,aAAa,SAAUhC,EACrC,CAMI,OAAAmE,CAAQM,GACJ/iB,KAAKoO,WAAa,SACZ4T,MAAA1B,aAAa,QAASyC,EACpC,CAMI,KAAAxU,CAAMyU,GAAS,CACf,SAAAC,CAAUC,EAAQf,EAAQ,IACtB,OAAQe,EACJ,MACAljB,KAAKmjB,YACLnjB,KAAKojB,QACLpjB,KAAKshB,KAAK+B,KACVrjB,KAAKsjB,OAAOnB,EACxB,CACI,SAAAgB,GACU,MAAAI,EAAWvjB,KAAKshB,KAAKiC,SAC3B,OAAsC,IAA/BA,EAAStf,QAAQ,KAAcsf,EAAW,IAAMA,EAAW,GAC1E,CACI,KAAAH,GACQ,OAAApjB,KAAKshB,KAAKkC,OACRxjB,KAAKshB,KAAKmC,QAAUC,OAA0B,MAAnB1jB,KAAKshB,KAAKkC,QACjCxjB,KAAKshB,KAAKmC,QAAqC,KAA3BC,OAAO1jB,KAAKshB,KAAKkC,OACpC,IAAMxjB,KAAKshB,KAAKkC,KAGhB,EAEnB,CACI,MAAAF,CAAOnB,GACG,MAAAwB,EClIP,SAAgB5H,GACnB,IAAIpQ,EAAM,GACV,QAAS7J,KAAKia,EACNA,EAAIkF,eAAenf,KACf6J,EAAI5J,SACG4J,GAAA,KACXA,GAAOiY,mBAAmB9hB,GAAK,IAAM8hB,mBAAmB7H,EAAIja,KAG7D,OAAA6J,CACX,CDwH6BgT,CAAOwD,GACrB,OAAAwB,EAAa5hB,OAAS,IAAM4hB,EAAe,EAC1D,EEzIO,MAAME,UAAgB5B,EACzB,WAAA9I,GACI6I,SAASnT,WACT7O,KAAK8jB,UAAW,CACxB,CACI,QAAIC,GACO,eACf,CAOI,MAAAxB,GACIviB,KAAKgkB,OACb,CAOI,KAAAzV,CAAMyU,GACFhjB,KAAKoO,WAAa,UAClB,MAAMG,EAAQ,KACVvO,KAAKoO,WAAa,SACT4U,GAAA,EAEb,GAAIhjB,KAAK8jB,WAAa9jB,KAAKkiB,SAAU,CACjC,IAAI+B,EAAQ,EACRjkB,KAAK8jB,WACLG,IACKjkB,KAAA6N,KAAK,gBAAgB,aACpBoW,GAAS1V,GAC/B,KAEiBvO,KAAKkiB,WACN+B,IACKjkB,KAAA6N,KAAK,SAAS,aACboW,GAAS1V,GAC/B,IAEA,MAEmBA,GAEnB,CAMI,KAAAyV,GACIhkB,KAAK8jB,UAAW,EAChB9jB,KAAKkkB,SACLlkB,KAAKsgB,aAAa,OAC1B,CAMI,MAAAuC,CAAOpP,GN/CW,EAAC0Q,EAAgBlH,KAC7B,MAAAmH,EAAiBD,EAAepgB,MAAMia,GACtC0E,EAAU,GAChB,QAAS5gB,EAAI,EAAGA,EAAIsiB,EAAeriB,OAAQD,IAAK,CAC5C,MAAMuiB,EAAgBtH,EAAaqH,EAAetiB,GAAImb,GAElD,GADJyF,EAAQrb,KAAKgd,GACc,UAAvBA,EAAcrL,KACd,KAEZ,CACW,OAAA0J,CAAA,EMoDH4B,CAAc7Q,EAAMzT,KAAKoiB,OAAOnF,YAAY/I,SAd1BoK,IAMV,GAJA,YAActe,KAAKoO,YAA8B,SAAhBkQ,EAAOtF,MACxChZ,KAAK4iB,SAGL,UAAYtE,EAAOtF,KAEZ,OADPhZ,KAAKyiB,QAAQ,CAAEX,YAAa,oCACrB,EAGX9hB,KAAK8iB,SAASxE,EAAM,IAKpB,WAAate,KAAKoO,aAElBpO,KAAK8jB,UAAW,EAChB9jB,KAAKsgB,aAAa,gBACd,SAAWtgB,KAAKoO,YAChBpO,KAAKgkB,QAKrB,CAMI,OAAAxB,GACI,MAAM7f,EAAQ,KACV3C,KAAK2iB,MAAM,CAAC,CAAE3J,KAAM,UAAU,EAE9B,SAAWhZ,KAAKoO,WACTzL,IAKF3C,KAAA6N,KAAK,OAAQlL,EAE9B,CAOI,KAAAggB,CAAMD,GACF1iB,KAAKkiB,UAAW,ENnHF,EAACQ,EAASxG,KAE5B,MAAMna,EAAS2gB,EAAQ3gB,OACjBqiB,EAAiB,IAAIxS,MAAM7P,GACjC,IAAIwiB,EAAQ,EACJ7B,EAAAxO,SAAQ,CAACoK,EAAQxc,KAERka,EAAAsC,GAAQ,GAAQtB,IACzBoH,EAAetiB,GAAKkb,IACduH,IAAUxiB,GACHma,EAAAkI,EAAerK,KAAKiE,GAC7C,GACS,GACJ,EMuGiBwG,CAAA9B,GAAUjP,IACfzT,KAAAykB,QAAQhR,GAAM,KACfzT,KAAKkiB,UAAW,EAChBliB,KAAKsgB,aAAa,QAAO,GAC5B,GAEb,CAMI,GAAAoE,GACI,MAAMxB,EAASljB,KAAKshB,KAAKmC,OAAS,QAAU,OACtCtB,EAAQniB,KAAKmiB,OAAS,CAAE,EAQvB,OANH,IAAUniB,KAAKshB,KAAKqD,oBACpBxC,EAAMniB,KAAKshB,KAAKsD,gBAAkBnD,KAEjCzhB,KAAKic,gBAAmBkG,EAAM0C,MAC/B1C,EAAM2C,IAAM,GAET9kB,KAAKijB,UAAUC,EAAQf,EACtC,EC9IA,IAAI4C,GAAQ,EACZ,IACIA,EAAkC,oBAAnBhR,gBACX,oBAAqB,IAAIA,cACjC,OACOzQ,IAGP,CACO,MAAM0hB,EAAUD,ECLvB,SAASE,KAAQ,CACV,MAAMC,WAAgBrB,EAOzB,WAAA1K,CAAYmI,GAEJ,GADJU,MAAMV,GACkB,oBAAbxV,SAA0B,CAC3B,MAAAqZ,EAAQ,WAAarZ,SAASC,SACpC,IAAIyX,EAAO1X,SAAS0X,KAEfA,IACDA,EAAO2B,EAAQ,MAAQ,MAEtBnlB,KAAAolB,GACoB,oBAAbtZ,UACJwV,EAAKiC,WAAazX,SAASyX,UAC3BC,IAASlC,EAAKkC,IAClC,CACA,CAQI,OAAAiB,CAAQhR,EAAM3J,GACJ,MAAAub,EAAMrlB,KAAKslB,QAAQ,CACrBnc,OAAQ,OACRsK,SAEA4R,EAAA/T,GAAG,UAAWxH,GAClBub,EAAI/T,GAAG,SAAS,CAACiU,EAAWxD,KACnB/hB,KAAAsiB,QAAQ,iBAAkBiD,EAAWxD,EAAO,GAE7D,CAMI,MAAAmC,GACU,MAAAmB,EAAMrlB,KAAKslB,UACjBD,EAAI/T,GAAG,OAAQtR,KAAK6iB,OAAOjV,KAAK5N,OAChCqlB,EAAI/T,GAAG,SAAS,CAACiU,EAAWxD,KACnB/hB,KAAAsiB,QAAQ,iBAAkBiD,EAAWxD,EAAO,IAErD/hB,KAAKwlB,QAAUH,CACvB,EAEO,MAAMI,WAAgB3F,EAOzB,WAAA3G,CAAYuM,EAAehB,EAAKpD,GACrBU,QACPhiB,KAAK0lB,cAAgBA,EACrBrE,EAAsBrhB,KAAMshB,GAC5BthB,KAAK2lB,MAAQrE,EACRthB,KAAA4lB,QAAUtE,EAAKnY,QAAU,MAC9BnJ,KAAK6lB,KAAOnB,EACZ1kB,KAAK8lB,WAAQ,IAAcxE,EAAK7N,KAAO6N,EAAK7N,KAAO,KACnDzT,KAAK+lB,SACb,CAMI,OAAAA,GACQ,IAAAC,EACJ,MAAM1E,EAAOR,EAAK9gB,KAAK2lB,MAAO,QAAS,MAAO,MAAO,aAAc,OAAQ,KAAM,UAAW,qBAAsB,aAClHrE,EAAK2E,UAAYjmB,KAAK2lB,MAAMP,GAC5B,MAAMhc,EAAOpJ,KAAKkJ,KAAOlJ,KAAK0lB,cAAcpE,GACxC,IACAlY,EAAI4K,KAAKhU,KAAK4lB,QAAS5lB,KAAK6lB,MAAM,GAC9B,IACI,GAAA7lB,KAAK2lB,MAAMO,aAAc,CAErB9c,EAAA+c,uBAAyB/c,EAAI+c,uBAAsB,GAC9C,QAAArkB,KAAK9B,KAAK2lB,MAAMO,aACjBlmB,KAAK2lB,MAAMO,aAAajF,eAAenf,IACvCsH,EAAIgL,iBAAiBtS,EAAG9B,KAAK2lB,MAAMO,aAAapkB,GAG5E,CACA,OACmBqB,GAAG,CACN,YAAWnD,KAAK4lB,QACZ,IACIxc,EAAAgL,iBAAiB,eAAgB,2BACzD,OACuBjR,GAAG,CAEV,IACIiG,EAAAgL,iBAAiB,SAAU,MAC/C,OACmBjR,GAAG,CACsB,QAA/B6iB,EAAKhmB,KAAK2lB,MAAMS,iBAA8B,IAAPJ,GAAyBA,EAAGK,WAAWjd,GAE3E,oBAAqBA,IACjBA,EAAAE,gBAAkBtJ,KAAK2lB,MAAMrc,iBAEjCtJ,KAAK2lB,MAAMW,iBACPld,EAAA4D,QAAUhN,KAAK2lB,MAAMW,gBAE7Bld,EAAImd,mBAAqB,KACjBP,MACmB,IAAnB5c,EAAIgF,aAC4B,QAA/B4X,EAAKhmB,KAAK2lB,MAAMS,iBAA8B,IAAPJ,GAAyBA,EAAGQ,aAEpEpd,EAAIqd,kBAAkB,gBAEtB,IAAMrd,EAAIgF,aAEV,MAAQhF,EAAIiL,QAAU,OAASjL,EAAIiL,OACnCrU,KAAK0mB,UAKL1mB,KAAK2gB,cAAa,KACd3gB,KAAK2mB,SAA+B,iBAAfvd,EAAIiL,OAAsBjL,EAAIiL,OAAS,EAAC,GAC9D,GACvB,EAEgBjL,EAAAqL,KAAKzU,KAAK8lB,MAC1B,OACe3iB,GAOH,YAHAnD,KAAK2gB,cAAa,KACd3gB,KAAK2mB,SAASxjB,EAAC,GAChB,EAEf,CACgC,oBAAbsD,WACPzG,KAAK4mB,OAASnB,GAAQoB,gBACdpB,GAAAqB,SAAS9mB,KAAK4mB,QAAU5mB,KAE5C,CAMI,QAAA2mB,CAASrjB,GACLtD,KAAKsgB,aAAa,QAAShd,EAAKtD,KAAKkJ,MACrClJ,KAAK+mB,UAAS,EACtB,CAMI,QAAAA,CAASC,GACL,QAAI,IAAuBhnB,KAAKkJ,MAAQ,OAASlJ,KAAKkJ,KAAtD,CAIA,GADAlJ,KAAKkJ,KAAKqd,mBAAqBtB,GAC3B+B,EACI,IACAhnB,KAAKkJ,KAAK+d,OAC1B,OACmB9jB,GAAG,CAEU,oBAAbsD,iBACAgf,GAAQqB,SAAS9mB,KAAK4mB,QAEjC5mB,KAAKkJ,KAAO,IAXpB,CAYA,CAMI,OAAAwd,GACU,MAAAjT,EAAOzT,KAAKkJ,KAAKge,aACV,OAATzT,IACKzT,KAAAsgB,aAAa,OAAQ7M,GAC1BzT,KAAKsgB,aAAa,WAClBtgB,KAAK+mB,WAEjB,CAMI,KAAAE,GACIjnB,KAAK+mB,UACb,EASA,GAPAtB,GAAQoB,cAAgB,EACxBpB,GAAQqB,SAAW,CAAE,EAMG,oBAAbrgB,SAEH,GAAuB,mBAAhB0gB,YAEPA,YAAY,WAAYC,SAChC,GACyC,mBAArBxgB,iBAAiC,CAE5BA,iBADQ,eAAgBua,EAAa,WAAa,SAChCiG,IAAe,EAC1D,CAEA,SAASA,KACI,QAAAtlB,KAAK2jB,GAAQqB,SACdrB,GAAQqB,SAAS7F,eAAenf,IACxB2jB,GAAAqB,SAAShlB,GAAGmlB,OAGhC,CACA,MAAMI,GAAW,WACb,MAAMje,EAAMke,GAAW,CACnBrB,SAAS,IAEN,OAAA7c,GAA4B,OAArBA,EAAI6K,YACtB,CALiB,GAwBjB,SAASqT,GAAWhG,GAChB,MAAM2E,EAAU3E,EAAK2E,QAEjB,IACA,GAAI,oBAAuBlS,kBAAoBkS,GAAWjB,GACtD,OAAO,IAAIjR,cAEvB,OACW5Q,GAAG,CACV,IAAK8iB,EACG,IACA,OAAO,IAAI9E,EAAW,CAAC,UAAUoG,OAAO,UAAUxN,KAAK,OAAM,oBACzE,OACe5W,GAAG,CAElB,CCzQA,MAAMqkB,GAAqC,oBAAdzmB,WACI,iBAAtBA,UAAU0mB,SACmB,gBAApC1mB,UAAU0mB,QAAQ5b,cACf,MAAM6b,WAAezF,EACxB,QAAI8B,GACO,iBACf,CACI,MAAAxB,GACU,MAAAmC,EAAM1kB,KAAK0kB,MACXiD,EAAY3nB,KAAKshB,KAAKqG,UAEtBrG,EAAOkG,GACP,GACA1G,EAAK9gB,KAAKshB,KAAM,QAAS,oBAAqB,MAAO,MAAO,aAAc,OAAQ,KAAM,UAAW,qBAAsB,eAAgB,kBAAmB,SAAU,aAAc,SAAU,uBAChMthB,KAAKshB,KAAK4E,eACL5E,EAAAjY,QAAUrJ,KAAKshB,KAAK4E,cAEzB,IACAlmB,KAAK4nB,GAAK5nB,KAAK6nB,aAAanD,EAAKiD,EAAWrG,EACxD,OACehe,IACI,OAAAtD,KAAKsgB,aAAa,QAAShd,GAC9C,CACatD,KAAA4nB,GAAG3K,WAAajd,KAAKoiB,OAAOnF,WACjCjd,KAAK8nB,mBACb,CAMI,iBAAAA,GACS9nB,KAAA4nB,GAAGG,OAAS,KACT/nB,KAAKshB,KAAK0G,WACLhoB,KAAA4nB,GAAGK,QAAQC,QAEpBloB,KAAK4iB,QAAQ,EAEjB5iB,KAAK4nB,GAAGO,QAAWC,GAAepoB,KAAKyiB,QAAQ,CAC3CX,YAAa,8BACbC,QAASqG,IAEbpoB,KAAK4nB,GAAGS,UAAaC,GAAOtoB,KAAK6iB,OAAOyF,EAAG7U,MAC3CzT,KAAK4nB,GAAGrT,QAAWpR,GAAMnD,KAAKsiB,QAAQ,kBAAmBnf,EACjE,CACI,KAAAwf,CAAMD,GACF1iB,KAAKkiB,UAAW,EAGhB,QAASpgB,EAAI,EAAGA,EAAI4gB,EAAQ3gB,OAAQD,IAAK,CAC/B,MAAAwc,EAASoE,EAAQ5gB,GACjBymB,EAAazmB,IAAM4gB,EAAQ3gB,OAAS,EAC1Cia,EAAasC,EAAQte,KAAKic,gBAAiBxI,IAInC,IACKzT,KAAAykB,QAAQnG,EAAQ7K,EACzC,OACuBtQ,GACvB,CACoBolB,GAGA9H,GAAS,KACLzgB,KAAKkiB,UAAW,EAChBliB,KAAKsgB,aAAa,QAAO,GAC1BtgB,KAAK2gB,aAC5B,GAEA,CACA,CACI,OAAA6B,QAC2B,IAAZxiB,KAAK4nB,KACP5nB,KAAA4nB,GAAGrT,QAAU,OAClBvU,KAAK4nB,GAAGjlB,QACR3C,KAAK4nB,GAAK,KAEtB,CAMI,GAAAlD,GACI,MAAMxB,EAASljB,KAAKshB,KAAKmC,OAAS,MAAQ,KACpCtB,EAAQniB,KAAKmiB,OAAS,CAAE,EASvB,OAPHniB,KAAKshB,KAAKqD,oBACVxC,EAAMniB,KAAKshB,KAAKsD,gBAAkBnD,KAGjCzhB,KAAKic,iBACNkG,EAAM2C,IAAM,GAET9kB,KAAKijB,UAAUC,EAAQf,EACtC,EAEA,MAAMqG,GAAgBrH,EAAWsH,WAAatH,EAAWuH,aCpGlD,MAAMC,GAAa,CACtBC,UD6GG,cAAiBlB,GACpB,YAAAG,CAAanD,EAAKiD,EAAWrG,GACzB,OAAQkG,GAIF,IAAIgB,GAAc9D,EAAKiD,EAAWrG,GAHlCqG,EACI,IAAIa,GAAc9D,EAAKiD,GACvB,IAAIa,GAAc9D,EAEpC,CACI,OAAAD,CAAQoE,EAASpV,GACRzT,KAAA4nB,GAAGnT,KAAKhB,EACrB,GCtHIqV,aCMG,cAAiB7G,EACpB,QAAI8B,GACO,oBACf,CACI,MAAAxB,GACQ,IAEAviB,KAAK+oB,WAAa,IAAIC,aAAahpB,KAAKijB,UAAU,SAAUjjB,KAAKshB,KAAK2H,iBAAiBjpB,KAAK+jB,MACxG,OACezgB,IACI,OAAAtD,KAAKsgB,aAAa,QAAShd,GAC9C,CACatD,KAAA+oB,WAAWG,OACXhiB,MAAK,KACNlH,KAAKyiB,SAAS,IAEbtb,OAAO7D,IACHtD,KAAAsiB,QAAQ,qBAAsBhf,EAAG,IAGrCtD,KAAA+oB,WAAWI,MAAMjiB,MAAK,KACvBlH,KAAK+oB,WAAWK,4BAA4BliB,MAAMmiB,IAC9C,MAAMC,EXqDf,SAAmCC,EAAYtM,GAC7CqC,IACDA,EAAe,IAAIkK,aAEvB,MAAMhK,EAAS,GACf,IAAIzc,EAAQ,EACR0mB,GAAiB,EACjBC,GAAW,EACf,OAAO,IAAItL,gBAAgB,CACvB,SAAAC,CAAUsB,EAAOpB,GAEb,IADAiB,EAAOnY,KAAKsY,KACC,CACT,GAAc,IAAV5c,EAAqC,CACjC,GAAAwc,EAAYC,GAAU,EACtB,MAEEV,QAASc,EAAaJ,EAAQ,GACpCkK,IAAkC,KAAtB5K,EAAO,IACFA,EAAY,IAAZA,EAAO,GAEZ/b,EADR0mB,EAAiB,IACT,EAEgB,MAAnBA,EACG,EAGA,CAEhC,SACmC,IAAV1mB,EAAiD,CAClD,GAAAwc,EAAYC,GAAU,EACtB,MAEE,MAAAmK,EAAc/J,EAAaJ,EAAQ,GACxBiK,EAAA,IAAI1K,SAAS4K,EAAY1jB,OAAQ0jB,EAAYjN,WAAYiN,EAAY5nB,QAAQ6nB,UAAU,GAChG7mB,EAAA,CAC5B,SACmC,IAAVA,EAAiD,CAClD,GAAAwc,EAAYC,GAAU,EACtB,MAEE,MAAAmK,EAAc/J,EAAaJ,EAAQ,GACnCP,EAAO,IAAIF,SAAS4K,EAAY1jB,OAAQ0jB,EAAYjN,WAAYiN,EAAY5nB,QAC5E8nB,EAAI5K,EAAK6K,UAAU,GACzB,GAAID,EAAIjd,KAAKmd,IAAI,EAAG,IAAW,EAAG,CAE9BxL,EAAWc,QAAQ7D,GACnB,KACxB,CACqCiO,EAAAI,EAAIjd,KAAKmd,IAAI,EAAG,IAAM9K,EAAK6K,UAAU,GAC9C/mB,EAAA,CAC5B,KACqB,CACG,GAAAwc,EAAYC,GAAUiK,EACtB,MAEE,MAAAhW,EAAOmM,EAAaJ,EAAQiK,GACvBlL,EAAAc,QAAQtC,EAAa2M,EAAWjW,EAAO6L,EAAavB,OAAOtK,GAAOwJ,IACrEla,EAAA,CAC5B,CACoB,GAAmB,IAAnB0mB,GAAwBA,EAAiBF,EAAY,CACrDhL,EAAWc,QAAQ7D,GACnB,KACpB,CACA,CACS,GAET,CWxHsCwO,CAA0BtG,OAAOuG,iBAAkBjqB,KAAKoiB,OAAOnF,YAC/EiN,EAASb,EAAOc,SAASC,YAAYd,GAAee,YACpDC,EAAgBnM,IACRmM,EAAAH,SAASI,OAAOlB,EAAOnH,UAChCliB,KAAAwqB,QAAUF,EAAcpI,SAASuI,YACtC,MAAMC,EAAO,KAEJR,EAAAQ,OACAxjB,MAAK,EAAGyjB,OAAM5F,YACX4F,IAGJ3qB,KAAK8iB,SAASiC,GACR2F,IAAA,IAELvjB,OAAO7D,IAAD,GACV,EAEConB,IACA,MAAApM,EAAS,CAAEtF,KAAM,QACnBhZ,KAAKmiB,MAAM0C,MACXvG,EAAO7K,KAAO,WAAWzT,KAAKmiB,MAAM0C,SAEnC7kB,KAAAwqB,QAAQ7H,MAAMrE,GAAQpX,MAAK,IAAMlH,KAAK4iB,UAAQ,GACtD,GAEb,CACI,KAAAD,CAAMD,GACF1iB,KAAKkiB,UAAW,EAChB,QAASpgB,EAAI,EAAGA,EAAI4gB,EAAQ3gB,OAAQD,IAAK,CAC/B,MAAAwc,EAASoE,EAAQ5gB,GACjBymB,EAAazmB,IAAM4gB,EAAQ3gB,OAAS,EAC1C/B,KAAKwqB,QAAQ7H,MAAMrE,GAAQpX,MAAK,KACxBqhB,GACA9H,GAAS,KACLzgB,KAAKkiB,UAAW,EAChBliB,KAAKsgB,aAAa,QAAO,GAC1BtgB,KAAK2gB,aAC5B,GAEA,CACA,CACI,OAAA6B,GACQ,IAAAwD,EACuB,QAA1BA,EAAKhmB,KAAK+oB,kBAA+B,IAAP/C,GAAyBA,EAAGrjB,OACvE,GDxEIioB,QF8OG,cAAkB1F,GACrB,WAAA/L,CAAYmI,GACRU,MAAMV,GACA,MAAAe,EAAcf,GAAQA,EAAKe,YAC5BriB,KAAAic,eAAiBoL,KAAYhF,CAC1C,CACI,OAAAiD,CAAQhE,EAAO,IAEX,OADO3P,OAAAkZ,OAAOvJ,EAAM,CAAE8D,GAAIplB,KAAKolB,IAAMplB,KAAKshB,MACnC,IAAImE,GAAQ6B,GAAYtnB,KAAK0kB,MAAOpD,EACnD,II1OMwJ,GAAK,sPACLC,GAAQ,CACV,SAAU,WAAY,YAAa,WAAY,OAAQ,WAAY,OAAQ,OAAQ,WAAY,OAAQ,YAAa,OAAQ,QAAS,UAElI,SAASC,GAAMrf,GACd,GAAAA,EAAI5J,OAAS,IACP,oBAEJ,MAAAiG,EAAM2D,EAAKsf,EAAItf,EAAI1H,QAAQ,KAAMd,EAAIwI,EAAI1H,QAAQ,MACxC,GAAXgnB,IAAoB,GAAT9nB,IACXwI,EAAMA,EAAI0R,UAAU,EAAG4N,GAAKtf,EAAI0R,UAAU4N,EAAG9nB,GAAGL,QAAQ,KAAM,KAAO6I,EAAI0R,UAAUla,EAAGwI,EAAI5J,SAE1FpC,MAAImrB,GAAGlf,KAAKD,GAAO,IAAK+Y,EAAM,GAAI5iB,EAAI,GAC1C,KAAOA,KACH4iB,EAAIqG,GAAMjpB,IAAMnC,EAAEmC,IAAM,GAUrB,OARQ,GAAXmpB,IAAoB,GAAT9nB,IACXuhB,EAAI3e,OAASiC,EACb0c,EAAIwG,KAAOxG,EAAIwG,KAAK7N,UAAU,EAAGqH,EAAIwG,KAAKnpB,OAAS,GAAGe,QAAQ,KAAM,KACpE4hB,EAAIyG,UAAYzG,EAAIyG,UAAUroB,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,KAAM,KAC9E4hB,EAAI0G,SAAU,GAElB1G,EAAI2G,UAIR,SAAmBtP,EAAKsH,GACd,MAAAiI,EAAO,WAAYC,EAAQlI,EAAKvgB,QAAQwoB,EAAM,KAAKvnB,MAAM,KACvC,KAApBsf,EAAKrX,MAAM,EAAG,IAA6B,IAAhBqX,EAAKthB,QAC1BwpB,EAAApa,OAAO,EAAG,GAEE,KAAlBkS,EAAKrX,OAAQ,IACbuf,EAAMpa,OAAOoa,EAAMxpB,OAAS,EAAG,GAE5B,OAAAwpB,CACX,CAboBF,CAAU3G,EAAKA,EAAU,MACzCA,EAAI8G,SAaR,SAAkB9G,EAAKvC,GACnB,MAAM1O,EAAO,CAAE,EAMR,OALP0O,EAAMrf,QAAQ,6BAA6B,SAAU2oB,EAAIC,EAAIC,GACrDD,IACAjY,EAAKiY,GAAMC,EAEvB,IACWlY,CACX,CArBmB+X,CAAS9G,EAAKA,EAAW,OACjCA,CACX,CCrCA,MAAMkH,GAAiD,mBAArBhlB,kBACC,mBAAxBF,oBACLmlB,GAA0B,GAC5BD,IAGAhlB,iBAAiB,WAAW,KACxBilB,GAAwB3X,SAAS5F,GAAaA,KAAU,IACzD,GAyBA,MAAMwd,WAA6BhM,EAOtC,WAAA3G,CAAYuL,EAAKpD,GAiBb,GAhBOU,QACPhiB,KAAKid,WX7BoB,cW8BzBjd,KAAK+rB,YAAc,GACnB/rB,KAAKgsB,eAAiB,EACtBhsB,KAAKisB,eAAgB,EACrBjsB,KAAKksB,cAAe,EACpBlsB,KAAKmsB,aAAc,EAKnBnsB,KAAKosB,iBAAmBze,IACpB+W,GAAO,iBAAoBA,IACpBpD,EAAAoD,EACDA,EAAA,MAENA,EAAK,CACC,MAAA2H,EAAYrB,GAAMtG,GACxBpD,EAAKiC,SAAW8I,EAAUnB,KAC1B5J,EAAKmC,OACsB,UAAvB4I,EAAUtgB,UAA+C,QAAvBsgB,EAAUtgB,SAChDuV,EAAKkC,KAAO6I,EAAU7I,KAClB6I,EAAUlK,QACVb,EAAKa,MAAQkK,EAAUlK,MACvC,MACiBb,EAAK4J,OACV5J,EAAKiC,SAAWyH,GAAM1J,EAAK4J,MAAMA,MAErC7J,EAAsBrhB,KAAMshB,GACvBthB,KAAAyjB,OACD,MAAQnC,EAAKmC,OACPnC,EAAKmC,OACe,oBAAb3X,UAA4B,WAAaA,SAASC,SAC/DuV,EAAKiC,WAAajC,EAAKkC,OAElBlC,EAAAkC,KAAOxjB,KAAKyjB,OAAS,MAAQ,MAEtCzjB,KAAKujB,SACDjC,EAAKiC,WACoB,oBAAbzX,SAA2BA,SAASyX,SAAW,aAC/DvjB,KAAKwjB,KACDlC,EAAKkC,OACoB,oBAAb1X,UAA4BA,SAAS0X,KACvC1X,SAAS0X,KACTxjB,KAAKyjB,OACD,MACA,MAClBzjB,KAAK2oB,WAAa,GAClB3oB,KAAKssB,kBAAoB,CAAE,EACtBhL,EAAAqH,WAAWzU,SAASqY,IACf,MAAAC,EAAgBD,EAAErsB,UAAU6jB,KAC7B/jB,KAAA2oB,WAAWthB,KAAKmlB,GAChBxsB,KAAAssB,kBAAkBE,GAAiBD,CAAA,IAEvCvsB,KAAAshB,KAAO3P,OAAOkZ,OAAO,CACtBxH,KAAM,aACNoJ,OAAO,EACPnjB,iBAAiB,EACjBojB,SAAS,EACT9H,eAAgB,IAChB+H,iBAAiB,EACjBC,kBAAkB,EAClBC,oBAAoB,EACpBC,kBAAmB,CACfC,UAAW,MAEf9D,iBAAkB,CAAE,EACpB+D,qBAAqB,GACtB1L,GACHthB,KAAKshB,KAAK+B,KACNrjB,KAAKshB,KAAK+B,KAAKvgB,QAAQ,MAAO,KACzB9C,KAAKshB,KAAKsL,iBAAmB,IAAM,IACb,iBAApB5sB,KAAKshB,KAAKa,QACjBniB,KAAKshB,KAAKa,MRhGf,SAAgB8K,GACnB,IAAIC,EAAM,CAAE,EACRC,EAAQF,EAAGlpB,MAAM,KACrB,QAASjC,EAAI,EAAGsrB,EAAID,EAAMprB,OAAQD,EAAIsrB,EAAGtrB,IAAK,CAC1C,IAAIurB,EAAOF,EAAMrrB,GAAGiC,MAAM,KACtBmpB,EAAAI,mBAAmBD,EAAK,KAAOC,mBAAmBD,EAAK,GACnE,CACW,OAAAH,CACX,CQwF8BnP,CAAO/d,KAAKshB,KAAKa,QAEnCyJ,KACI5rB,KAAKshB,KAAK0L,sBAIVhtB,KAAKutB,2BAA6B,KAC1BvtB,KAAKwtB,YAELxtB,KAAKwtB,UAAUtN,qBACflgB,KAAKwtB,UAAU7qB,QACvC,EAEiCiE,iBAAA,eAAgB5G,KAAKutB,4BAA4B,IAEhD,cAAlBvtB,KAAKujB,WACLvjB,KAAKytB,sBAAwB,KACzBztB,KAAK0tB,SAAS,kBAAmB,CAC7B5L,YAAa,2BAChB,EAEmB+J,GAAAxkB,KAAKrH,KAAKytB,yBAGtCztB,KAAKshB,KAAKhY,kBACVtJ,KAAK2tB,gBAAaC,GAEtB5tB,KAAK6tB,OACb,CAQI,eAAAC,CAAgB/J,GACZ,MAAM5B,EAAQxQ,OAAOkZ,OAAO,CAAE,EAAE7qB,KAAKshB,KAAKa,OAE1CA,EAAM4L,IbPU,EaShB5L,EAAMqL,UAAYzJ,EAEd/jB,KAAKoM,KACL+V,EAAM0C,IAAM7kB,KAAKoM,IACrB,MAAMkV,EAAO3P,OAAOkZ,OAAO,GAAI7qB,KAAKshB,KAAM,CACtCa,QACAC,OAAQpiB,KACRujB,SAAUvjB,KAAKujB,SACfE,OAAQzjB,KAAKyjB,OACbD,KAAMxjB,KAAKwjB,MACZxjB,KAAKshB,KAAK2H,iBAAiBlF,IAC9B,OAAO,IAAI/jB,KAAKssB,kBAAkBvI,GAAMzC,EAChD,CAMI,KAAAuM,GACQ,GAA2B,IAA3B7tB,KAAK2oB,WAAW5mB,OAKhB,YAHA/B,KAAK2gB,cAAa,KACT3gB,KAAAsgB,aAAa,QAAS,0BAAyB,GACrD,GAGP,MAAMkM,EAAgBxsB,KAAKshB,KAAKqL,iBAC5Bb,GAAqBkC,wBACoB,IAAzChuB,KAAK2oB,WAAW1kB,QAAQ,aACtB,YACAjE,KAAK2oB,WAAW,GACtB3oB,KAAKoO,WAAa,UACZ,MAAAof,EAAYxtB,KAAK8tB,gBAAgBtB,GACvCgB,EAAUxZ,OACVhU,KAAKiuB,aAAaT,EAC1B,CAMI,YAAAS,CAAaT,GACLxtB,KAAKwtB,WACLxtB,KAAKwtB,UAAUtN,qBAGnBlgB,KAAKwtB,UAAYA,EAEjBA,EACKlc,GAAG,QAAStR,KAAKkuB,SAAStgB,KAAK5N,OAC/BsR,GAAG,SAAUtR,KAAKmuB,UAAUvgB,KAAK5N,OACjCsR,GAAG,QAAStR,KAAK2mB,SAAS/Y,KAAK5N,OAC/BsR,GAAG,SAAUuQ,GAAW7hB,KAAK0tB,SAAS,kBAAmB7L,IACtE,CAMI,MAAAe,GACI5iB,KAAKoO,WAAa,OACG0d,GAAAkC,sBACjB,cAAgBhuB,KAAKwtB,UAAUzJ,KACnC/jB,KAAKsgB,aAAa,QAClBtgB,KAAKouB,OACb,CAMI,SAAAD,CAAU7P,GACF,eAActe,KAAKoO,YACnB,SAAWpO,KAAKoO,YAChB,YAAcpO,KAAKoO,WAInB,OAHKpO,KAAAsgB,aAAa,SAAUhC,GAE5Bte,KAAKsgB,aAAa,aACVhC,EAAOtF,MACX,IAAK,OACDhZ,KAAKquB,YAAYC,KAAKtD,MAAM1M,EAAO7K,OACnC,MACJ,IAAK,OACDzT,KAAKuuB,YAAY,QACjBvuB,KAAKsgB,aAAa,QAClBtgB,KAAKsgB,aAAa,QAClBtgB,KAAKwuB,oBACL,MACJ,IAAK,QACK,MAAAlrB,EAAM,IAAIse,MAAM,gBAEtBte,EAAI+P,KAAOiL,EAAO7K,KAClBzT,KAAK2mB,SAASrjB,GACd,MACJ,IAAK,UACItD,KAAAsgB,aAAa,OAAQhC,EAAO7K,MAC5BzT,KAAAsgB,aAAa,UAAWhC,EAAO7K,MAMxD,CAOI,WAAA4a,CAAY5a,GACHzT,KAAAsgB,aAAa,YAAa7M,GAC/BzT,KAAKoM,GAAKqH,EAAKoR,IACV7kB,KAAAwtB,UAAUrL,MAAM0C,IAAMpR,EAAKoR,IAChC7kB,KAAKisB,cAAgBxY,EAAKgb,aAC1BzuB,KAAKksB,aAAezY,EAAKib,YACzB1uB,KAAKmsB,YAAc1Y,EAAK8V,WACxBvpB,KAAK4iB,SAED,WAAa5iB,KAAKoO,YAEtBpO,KAAKwuB,mBACb,CAMI,iBAAAA,GACSxuB,KAAAwhB,eAAexhB,KAAK2uB,mBACnB,MAAAC,EAAQ5uB,KAAKisB,cAAgBjsB,KAAKksB,aACnClsB,KAAAosB,iBAAmBrc,KAAKC,MAAQ4e,EAChC5uB,KAAA2uB,kBAAoB3uB,KAAK2gB,cAAa,KACvC3gB,KAAK0tB,SAAS,eAAc,GAC7BkB,GACC5uB,KAAKshB,KAAK0G,WACVhoB,KAAK2uB,kBAAkBzG,OAEnC,CAMI,QAAAgG,GACIluB,KAAK+rB,YAAY5a,OAAO,EAAGnR,KAAKgsB,gBAIhChsB,KAAKgsB,eAAiB,EAClB,IAAMhsB,KAAK+rB,YAAYhqB,OACvB/B,KAAKsgB,aAAa,SAGlBtgB,KAAKouB,OAEjB,CAMI,KAAAA,GACQ,cAAapuB,KAAKoO,YAClBpO,KAAKwtB,UAAUtL,WACdliB,KAAK6uB,WACN7uB,KAAK+rB,YAAYhqB,OAAQ,CACnB,MAAA2gB,EAAU1iB,KAAK8uB,sBAChB9uB,KAAAwtB,UAAU/Y,KAAKiO,GAGpB1iB,KAAKgsB,eAAiBtJ,EAAQ3gB,OAC9B/B,KAAKsgB,aAAa,QAC9B,CACA,CAOI,mBAAAwO,GAII,KAH+B9uB,KAAKmsB,aACR,YAAxBnsB,KAAKwtB,UAAUzJ,MACf/jB,KAAK+rB,YAAYhqB,OAAS,GAE1B,OAAO/B,KAAK+rB,YAEhB,IAAIgD,EAAc,EAClB,QAASjtB,EAAI,EAAGA,EAAI9B,KAAK+rB,YAAYhqB,OAAQD,IAAK,CAC9C,MAAM2R,EAAOzT,KAAK+rB,YAAYjqB,GAAG2R,KAIjC,GAHIA,IACAsb,GVxUO,iBADIhT,EUyUetI,GVlU1C,SAAoB9H,GACZ,IAAAqjB,EAAI,EAAGjtB,EAAS,EACpB,QAASD,EAAI,EAAGsrB,EAAIzhB,EAAI5J,OAAQD,EAAIsrB,EAAGtrB,IAC/BktB,EAAArjB,EAAIkI,WAAW/R,GACfktB,EAAI,IACMjtB,GAAA,EAELitB,EAAI,KACCjtB,GAAA,EAELitB,EAAI,OAAUA,GAAK,MACdjtB,GAAA,GAGVD,IACUC,GAAA,GAGX,OAAAA,CACX,CAxBektB,CAAWlT,GAGfnP,KAAK0G,KAPQ,MAOFyI,EAAIY,YAAcZ,EAAI8D,QUsU5B/d,EAAI,GAAKitB,EAAc/uB,KAAKmsB,YAC5B,OAAOnsB,KAAK+rB,YAAY/f,MAAM,EAAGlK,GAEtBitB,GAAA,CAC3B,CV/UO,IAAoBhT,EUgVnB,OAAO/b,KAAK+rB,WACpB,CAUkB,eAAAmD,GACV,IAAKlvB,KAAKosB,iBACC,SACX,MAAM+C,EAAapf,KAAKC,MAAQhQ,KAAKosB,iBAO9B,OANH+C,IACAnvB,KAAKosB,iBAAmB,EACxB3L,GAAS,KACLzgB,KAAK0tB,SAAS,eAAc,GAC7B1tB,KAAK2gB,eAELwO,CACf,CASI,KAAAxM,CAAM7Q,EAAKsd,EAAStlB,GAET,OADP9J,KAAKuuB,YAAY,UAAWzc,EAAKsd,EAAStlB,GACnC9J,IACf,CASI,IAAAyU,CAAK3C,EAAKsd,EAAStlB,GAER,OADP9J,KAAKuuB,YAAY,UAAWzc,EAAKsd,EAAStlB,GACnC9J,IACf,CAUI,WAAAuuB,CAAYvV,EAAMvF,EAAM2b,EAAStlB,GAS7B,GARI,mBAAsB2J,IACjB3J,EAAA2J,EACEA,OAAA,GAEP,mBAAsB2b,IACjBtlB,EAAAslB,EACKA,EAAA,MAEV,YAAcpvB,KAAKoO,YAAc,WAAapO,KAAKoO,WACnD,QAEJghB,EAAUA,GAAW,CAAE,GACfC,UAAW,IAAUD,EAAQC,SACrC,MAAM/Q,EAAS,CACXtF,OACAvF,OACA2b,WAECpvB,KAAAsgB,aAAa,eAAgBhC,GAC7Bte,KAAA+rB,YAAY1kB,KAAKiX,GAClBxU,GACK9J,KAAA6N,KAAK,QAAS/D,GACvB9J,KAAKouB,OACb,CAII,KAAAzrB,GACI,MAAMA,EAAQ,KACV3C,KAAK0tB,SAAS,gBACd1tB,KAAKwtB,UAAU7qB,OAAO,EAEpB2sB,EAAkB,KACftvB,KAAAwR,IAAI,UAAW8d,GACftvB,KAAAwR,IAAI,eAAgB8d,GAClB3sB,GAAA,EAEL4sB,EAAiB,KAEdvvB,KAAA6N,KAAK,UAAWyhB,GAChBtvB,KAAA6N,KAAK,eAAgByhB,EAAe,EAqBtC,MAnBH,YAActvB,KAAKoO,YAAc,SAAWpO,KAAKoO,aACjDpO,KAAKoO,WAAa,UACdpO,KAAK+rB,YAAYhqB,OACZ/B,KAAA6N,KAAK,SAAS,KACX7N,KAAK6uB,UACWU,IAGT5sB,GAC/B,IAGqB3C,KAAK6uB,UACMU,IAGT5sB,KAGR3C,IACf,CAMI,QAAA2mB,CAASrjB,GAED,GADJwoB,GAAqBkC,uBAAwB,EACzChuB,KAAKshB,KAAKkO,kBACVxvB,KAAK2oB,WAAW5mB,OAAS,GACL,YAApB/B,KAAKoO,WAEL,OADApO,KAAK2oB,WAAW1W,QACTjS,KAAK6tB,QAEX7tB,KAAAsgB,aAAa,QAAShd,GACtBtD,KAAA0tB,SAAS,kBAAmBpqB,EACzC,CAMI,QAAAoqB,CAAS7L,EAAQC,GACT,eAAc9hB,KAAKoO,YACnB,SAAWpO,KAAKoO,YAChB,YAAcpO,KAAKoO,WAAY,CAS/B,GAPKpO,KAAAwhB,eAAexhB,KAAK2uB,mBAEpB3uB,KAAAwtB,UAAUtN,mBAAmB,SAElClgB,KAAKwtB,UAAU7qB,QAEf3C,KAAKwtB,UAAUtN,qBACX0L,KACI5rB,KAAKutB,4BACe7mB,oBAAA,eAAgB1G,KAAKutB,4BAA4B,GAErEvtB,KAAKytB,uBAAuB,CAC5B,MAAM3rB,EAAI+pB,GAAwB5nB,QAAQjE,KAAKytB,wBACjC,IAAV3rB,GACwB+pB,GAAA1a,OAAOrP,EAAG,EAE1D,CAGY9B,KAAKoO,WAAa,SAElBpO,KAAKoM,GAAK,KAELpM,KAAAsgB,aAAa,QAASuB,EAAQC,GAGnC9hB,KAAK+rB,YAAc,GACnB/rB,KAAKgsB,eAAiB,CAClC,CACA,EAEAF,GAAqB/f,SbhYG,EawZjB,MAAM0jB,WAA0B3D,GACnC,WAAA3S,GACI6I,SAASnT,WACT7O,KAAK0vB,UAAY,EACzB,CACI,MAAA9M,GAEI,GADAZ,MAAMY,SACF,SAAW5iB,KAAKoO,YAAcpO,KAAKshB,KAAKoL,QACxC,QAAS5qB,EAAI,EAAGA,EAAI9B,KAAK0vB,UAAU3tB,OAAQD,IACvC9B,KAAK2vB,OAAO3vB,KAAK0vB,UAAU5tB,GAG3C,CAOI,MAAA6tB,CAAO5L,GACC,IAAAyJ,EAAYxtB,KAAK8tB,gBAAgB/J,GACjC6L,GAAS,EACb9D,GAAqBkC,uBAAwB,EAC7C,MAAM6B,EAAkB,KAChBD,IAEMpC,EAAA/Y,KAAK,CAAC,CAAEuE,KAAM,OAAQvF,KAAM,WAC5B+Z,EAAA3f,KAAK,UAAWiE,IAClB,IAAA8d,EAEJ,GAAI,SAAW9d,EAAIkH,MAAQ,UAAYlH,EAAI2B,KAAM,CAG7C,GAFAzT,KAAK6uB,WAAY,EACZ7uB,KAAAsgB,aAAa,YAAakN,IAC1BA,EACD,OACiB1B,GAAAkC,sBACjB,cAAgBR,EAAUzJ,KACzB/jB,KAAAwtB,UAAUjf,OAAM,KACbqhB,GAEA,WAAa5vB,KAAKoO,aAEb0hB,IACT9vB,KAAKiuB,aAAaT,GAClBA,EAAU/Y,KAAK,CAAC,CAAEuE,KAAM,aACnBhZ,KAAAsgB,aAAa,UAAWkN,GACjBA,EAAA,KACZxtB,KAAK6uB,WAAY,EACjB7uB,KAAKouB,QAAO,GAEpC,KACqB,CACK,MAAA9qB,EAAM,IAAIse,MAAM,eAEtBte,EAAIkqB,UAAYA,EAAUzJ,KACrB/jB,KAAAsgB,aAAa,eAAgBhd,EACtD,KACa,EAEL,SAASysB,IACDH,IAGKA,GAAA,EACAE,IACTtC,EAAU7qB,QACE6qB,EAAA,KACxB,CAEc,MAAAjZ,EAAWjR,IACb,MAAM8P,EAAQ,IAAIwO,MAAM,gBAAkBte,GAE1C8P,EAAMoa,UAAYA,EAAUzJ,KACXgM,IACZ/vB,KAAAsgB,aAAa,eAAgBlN,EAAK,EAE3C,SAAS4c,IACLzb,EAAQ,mBACpB,CAEQ,SAAS4T,IACL5T,EAAQ,gBACpB,CAEQ,SAAS0b,EAAU7gB,GACXoe,GAAape,EAAG2U,OAASyJ,EAAUzJ,MAClBgM,GAEjC,CAEQ,MAAMD,EAAU,KACFtC,EAAAvN,eAAe,OAAQ4P,GACvBrC,EAAAvN,eAAe,QAAS1L,GACxBiZ,EAAAvN,eAAe,QAAS+P,GAC7BhwB,KAAAwR,IAAI,QAAS2W,GACbnoB,KAAAwR,IAAI,YAAaye,EAAS,EAEzBzC,EAAA3f,KAAK,OAAQgiB,GACbrC,EAAA3f,KAAK,QAAS0G,GACdiZ,EAAA3f,KAAK,QAASmiB,GACnBhwB,KAAA6N,KAAK,QAASsa,GACdnoB,KAAA6N,KAAK,YAAaoiB,IACwB,IAA3CjwB,KAAK0vB,UAAUzrB,QAAQ,iBACd,iBAAT8f,EAEA/jB,KAAK2gB,cAAa,KACTiP,GACDpC,EAAUxZ,MAC9B,GACe,KAGHwZ,EAAUxZ,MAEtB,CACI,WAAAqa,CAAY5a,GACRzT,KAAK0vB,UAAY1vB,KAAKkwB,gBAAgBzc,EAAK0c,UAC3CnO,MAAMqM,YAAY5a,EAC1B,CAOI,eAAAyc,CAAgBC,GACZ,MAAMC,EAAmB,GACzB,QAAStuB,EAAI,EAAGA,EAAIquB,EAASpuB,OAAQD,KAC5B9B,KAAK2oB,WAAW1kB,QAAQksB,EAASruB,KACjBsuB,EAAA/oB,KAAK8oB,EAASruB,IAEhC,OAAAsuB,CACf,SAqBO,cAAqBX,GACxB,WAAAtW,CAAYuL,EAAKpD,EAAO,IACpB,MAAMvZ,EAAmB,iBAAR2c,EAAmBA,EAAMpD,IACrCvZ,EAAE4gB,YACF5gB,EAAE4gB,YAAyC,iBAApB5gB,EAAE4gB,WAAW,MACnC5gB,EAAA4gB,YAAc5gB,EAAE4gB,YAAc,CAAC,UAAW,YAAa,iBACpD0H,KAAK7D,GAAkB8D,GAAmB9D,KAC1C+D,QAAQhE,KAAQA,KAEzBvK,MAAM0C,EAAK3c,EACnB,GCrtBA,MAAM6T,GAA+C,mBAAhBC,YAM/BF,GAAWhK,OAAOzR,UAAUyb,SAC5BF,GAAiC,mBAATC,MACT,oBAATA,MACoB,6BAAxBC,GAAS5J,KAAK2J,MAChB8U,GAAiC,mBAATC,MACT,oBAATA,MACoB,6BAAxB9U,GAAS5J,KAAK0e,MAMf,SAAS/G,GAAS3N,GACZ,OAAAH,KAA0BG,aAAeF,aAlBvC,CAACE,GACyB,mBAAvBF,YAAYC,OACpBD,YAAYC,OAAOC,GACnBA,EAAI9V,kBAAkB4V,YAeqCC,CAAOC,KACnEN,IAAkBM,aAAeL,MACjC8U,IAAkBzU,aAAe0U,IAC1C,CACO,SAASC,GAAU3U,EAAK4U,GAC3B,IAAK5U,GAAsB,iBAARA,EACR,SAEP,GAAAnK,MAAMC,QAAQkK,GAAM,CACpB,QAASja,EAAI,EAAGsrB,EAAIrR,EAAIha,OAAQD,EAAIsrB,EAAGtrB,IACnC,GAAI4uB,GAAU3U,EAAIja,IACP,SAGR,QACf,CACQ,GAAA4nB,GAAS3N,GACF,SAEP,GAAAA,EAAI4U,QACkB,mBAAf5U,EAAI4U,QACU,IAArB9hB,UAAU9M,OACV,OAAO2uB,GAAU3U,EAAI4U,UAAU,GAEnC,UAAWxc,KAAO4H,EACV,GAAApK,OAAOzR,UAAU+gB,eAAelP,KAAKgK,EAAK5H,IAAQuc,GAAU3U,EAAI5H,IACzD,SAGR,QACX,CCzCO,SAASyc,GAAkBtS,GAC9B,MAAMuS,EAAU,GACVC,EAAaxS,EAAO7K,KACpBsd,EAAOzS,EAGN,OAFFyS,EAAAtd,KAAOud,GAAmBF,EAAYD,GAC3CE,EAAKE,YAAcJ,EAAQ9uB,OACpB,CAAEuc,OAAQyS,EAAMF,UAC3B,CACA,SAASG,GAAmBvd,EAAMod,GAC9B,IAAKpd,EACM,OAAAA,EACP,GAAAiW,GAASjW,GAAO,CAChB,MAAMyd,EAAc,CAAEC,cAAc,EAAM9kB,IAAKwkB,EAAQ9uB,QAEhD,OADP8uB,EAAQxpB,KAAKoM,GACNyd,CACf,CACa,GAAAtf,MAAMC,QAAQ4B,GAAO,CAC1B,MAAM2d,EAAU,IAAIxf,MAAM6B,EAAK1R,QAC/B,QAASD,EAAI,EAAGA,EAAI2R,EAAK1R,OAAQD,IAC7BsvB,EAAQtvB,GAAKkvB,GAAmBvd,EAAK3R,GAAI+uB,GAEtC,OAAAO,CACf,IAC6B,iBAAT3d,KAAuBA,aAAgB1D,MAAO,CAC1D,MAAMqhB,EAAU,CAAE,EAClB,UAAWjd,KAAOV,EACV9B,OAAOzR,UAAU+gB,eAAelP,KAAK0B,EAAMU,KAC3Cid,EAAQjd,GAAO6c,GAAmBvd,EAAKU,GAAM0c,IAG9C,OAAAO,CACf,CACW,OAAA3d,CACX,CASO,SAAS4d,GAAkB/S,EAAQuS,GAG/B,OAFPvS,EAAO7K,KAAO6d,GAAmBhT,EAAO7K,KAAMod,UACvCvS,EAAO2S,YACP3S,CACX,CACA,SAASgT,GAAmB7d,EAAMod,GAC9B,IAAKpd,EACM,OAAAA,EACP,GAAAA,IAA8B,IAAtBA,EAAK0d,aAAuB,CAIpC,GAHyC,iBAAb1d,EAAKpH,KAC7BoH,EAAKpH,KAAO,GACZoH,EAAKpH,IAAMwkB,EAAQ9uB,OAEZ,OAAA8uB,EAAQpd,EAAKpH,KAGd,UAAIuV,MAAM,sBAE5B,CACa,GAAAhQ,MAAMC,QAAQ4B,GACnB,QAAS3R,EAAI,EAAGA,EAAI2R,EAAK1R,OAAQD,IAC7B2R,EAAK3R,GAAKwvB,GAAmB7d,EAAK3R,GAAI+uB,QAElD,GAC6B,iBAATpd,EACZ,UAAWU,KAAOV,EACV9B,OAAOzR,UAAU+gB,eAAelP,KAAK0B,EAAMU,KAC3CV,EAAKU,GAAOmd,GAAmB7d,EAAKU,GAAM0c,IAI/C,OAAApd,CACX,CC5EA,MAAM8d,GAAkB,CACpB,UACA,gBACA,aACA,gBACA,cACA,kBAQG,IAAIC,GACAA,OAQRA,KAAeA,GAAa,KAPhBA,GAAoB,QAAI,GAAK,UACxCA,GAAWA,GAAuB,WAAI,GAAK,aAC3CA,GAAWA,GAAkB,MAAI,GAAK,QACtCA,GAAWA,GAAgB,IAAI,GAAK,MACpCA,GAAWA,GAA0B,cAAI,GAAK,gBAC9CA,GAAWA,GAAyB,aAAI,GAAK,eAC7CA,GAAWA,GAAuB,WAAI,GAAK,aA2E/C,SAASC,GAAS1M,GACd,MAAiD,oBAA1CpT,OAAOzR,UAAUyb,SAAS5J,KAAKgT,EAC1C,CAMO,MAAM2M,WAAgB5R,EAMzB,WAAA3G,CAAYwY,GACD3P,QACPhiB,KAAK2xB,QAAUA,CACvB,CAMI,GAAAC,CAAI7V,GACI,IAAAuC,EACA,GAAe,iBAARvC,EAAkB,CACzB,GAAI/b,KAAK6xB,cACC,UAAIjQ,MAAM,mDAEXtD,EAAAte,KAAK8xB,aAAa/V,GACrB,MAAAgW,EAAgBzT,EAAOtF,OAASwY,GAAWQ,aAC7CD,GAAiBzT,EAAOtF,OAASwY,GAAWS,YAC5C3T,EAAOtF,KAAO+Y,EAAgBP,GAAWU,MAAQV,GAAWW,IAEvDnyB,KAAA6xB,cAAgB,IAAIO,GAAoB9T,GAElB,IAAvBA,EAAO2S,aACDjP,MAAA1B,aAAa,UAAWhC,IAK5B0D,MAAA1B,aAAa,UAAWhC,EAE9C,KACiB,KAAAoL,GAAS3N,KAAQA,EAAIwB,OAepB,UAAIqE,MAAM,iBAAmB7F,GAb/B,IAAC/b,KAAK6xB,cACA,UAAIjQ,MAAM,oDAGPtD,EAAAte,KAAK6xB,cAAcQ,eAAetW,GACvCuC,IAEAte,KAAK6xB,cAAgB,KACf7P,MAAA1B,aAAa,UAAWhC,GAMlD,CACA,CAOI,YAAAwT,CAAanmB,GACT,IAAI7J,EAAI,EAER,MAAM+b,EAAI,CACN7E,KAAM0K,OAAO/X,EAAIwR,OAAO,KAE5B,QAA2B,IAAvBqU,GAAW3T,EAAE7E,MACb,MAAM,IAAI4I,MAAM,uBAAyB/D,EAAE7E,MAG/C,GAAI6E,EAAE7E,OAASwY,GAAWQ,cACtBnU,EAAE7E,OAASwY,GAAWS,WAAY,CAClC,MAAM7rB,EAAQtE,EAAI,EACX,KAAoB,MAApB6J,EAAIwR,SAASrb,IAAcA,GAAK6J,EAAI5J,SAC3C,MAAMuwB,EAAM3mB,EAAI0R,UAAUjX,EAAOtE,GAC7B,GAAAwwB,GAAO5O,OAAO4O,IAA0B,MAAlB3mB,EAAIwR,OAAOrb,GAC3B,UAAI8f,MAAM,uBAElB/D,EAAAoT,YAAcvN,OAAO4O,EACnC,CAEQ,GAAI,MAAQ3mB,EAAIwR,OAAOrb,EAAI,GAAI,CAC3B,MAAMsE,EAAQtE,EAAI,EAClB,OAASA,GAAG,CAER,GAAI,MADM6J,EAAIwR,OAAOrb,GAEjB,MACJ,GAAIA,IAAM6J,EAAI5J,OACV,KACpB,CACY8b,EAAE0U,IAAM5mB,EAAI0R,UAAUjX,EAAOtE,EACzC,MAEY+b,EAAE0U,IAAM,IAGZ,MAAMC,EAAO7mB,EAAIwR,OAAOrb,EAAI,GAC5B,GAAI,KAAO0wB,GAAQ9O,OAAO8O,IAASA,EAAM,CACrC,MAAMpsB,EAAQtE,EAAI,EAClB,OAASA,GAAG,CACF,MAAAktB,EAAIrjB,EAAIwR,OAAOrb,GACrB,GAAI,MAAQktB,GAAKtL,OAAOsL,IAAMA,EAAG,GAC3BltB,EACF,KACpB,CACgB,GAAIA,IAAM6J,EAAI5J,OACV,KACpB,CACY8b,EAAEzR,GAAKsX,OAAO/X,EAAI0R,UAAUjX,EAAOtE,EAAI,GACnD,CAEQ,GAAI6J,EAAIwR,SAASrb,GAAI,CACjB,MAAM2wB,EAAUzyB,KAAK0yB,SAAS/mB,EAAIgnB,OAAO7wB,IACzC,IAAI4vB,GAAQkB,eAAe/U,EAAE7E,KAAMyZ,GAIzB,UAAI7Q,MAAM,mBAHhB/D,EAAEpK,KAAOgf,CAKzB,CACe,OAAA5U,CACf,CACI,QAAA6U,CAAS/mB,GACD,IACA,OAAO2iB,KAAKtD,MAAMrf,EAAK3L,KAAK2xB,QACxC,OACexuB,GACI,QACnB,CACA,CACI,qBAAOyvB,CAAe5Z,EAAMyZ,GACxB,OAAQzZ,GACJ,KAAKwY,GAAWqB,QACZ,OAAOpB,GAASgB,GACpB,KAAKjB,GAAWsB,WACZ,YAAmB,IAAZL,EACX,KAAKjB,GAAWuB,cACZ,MAA0B,iBAAZN,GAAwBhB,GAASgB,GACnD,KAAKjB,GAAWU,MAChB,KAAKV,GAAWQ,aACZ,OAAQpgB,MAAMC,QAAQ4gB,KACK,iBAAfA,EAAQ,IACW,iBAAfA,EAAQ,KAC4B,IAAxClB,GAAgBttB,QAAQwuB,EAAQ,KAChD,KAAKjB,GAAWW,IAChB,KAAKX,GAAWS,WACL,OAAArgB,MAAMC,QAAQ4gB,GAErC,CAII,OAAAO,GACQhzB,KAAK6xB,gBACL7xB,KAAK6xB,cAAcoB,yBACnBjzB,KAAK6xB,cAAgB,KAEjC,EAUA,MAAMO,GACF,WAAAjZ,CAAYmF,GACRte,KAAKse,OAASA,EACdte,KAAK6wB,QAAU,GACf7wB,KAAKkzB,UAAY5U,CACzB,CASI,cAAA+T,CAAec,GAEX,GADKnzB,KAAA6wB,QAAQxpB,KAAK8rB,GACdnzB,KAAK6wB,QAAQ9uB,SAAW/B,KAAKkzB,UAAUjC,YAAa,CAEpD,MAAM3S,EAAS+S,GAAkBrxB,KAAKkzB,UAAWlzB,KAAK6wB,SAE/C,OADP7wB,KAAKizB,yBACE3U,CACnB,CACe,WACf,CAII,sBAAA2U,GACIjzB,KAAKkzB,UAAY,KACjBlzB,KAAK6wB,QAAU,EACvB,kFApRO,MAMH,WAAA1X,CAAYia,GACRpzB,KAAKozB,SAAWA,CACxB,CAOI,MAAAzU,CAAO5C,GACH,OAAIA,EAAI/C,OAASwY,GAAWU,OAASnW,EAAI/C,OAASwY,GAAWW,MACrDzB,GAAU3U,GAWX,CAAC/b,KAAKqzB,eAAetX,IAVb/b,KAAKszB,eAAe,CACvBta,KAAM+C,EAAI/C,OAASwY,GAAWU,MACxBV,GAAWQ,aACXR,GAAWS,WACjBM,IAAKxW,EAAIwW,IACT9e,KAAMsI,EAAItI,KACVrH,GAAI2P,EAAI3P,IAK5B,CAII,cAAAinB,CAAetX,GAEP,IAAApQ,EAAM,GAAKoQ,EAAI/C,KAmBZ,OAjBH+C,EAAI/C,OAASwY,GAAWQ,cACxBjW,EAAI/C,OAASwY,GAAWS,aACxBtmB,GAAOoQ,EAAIkV,YAAc,KAIzBlV,EAAIwW,KAAO,MAAQxW,EAAIwW,MACvB5mB,GAAOoQ,EAAIwW,IAAM,KAGjB,MAAQxW,EAAI3P,KACZT,GAAOoQ,EAAI3P,IAGX,MAAQ2P,EAAItI,OACZ9H,GAAO2iB,KAAKiF,UAAUxX,EAAItI,KAAMzT,KAAKozB,WAElCznB,CACf,CAMI,cAAA2nB,CAAevX,GACL,MAAAyX,EAAiB5C,GAAkB7U,GACnCgV,EAAO/wB,KAAKqzB,eAAeG,EAAelV,QAC1CuS,EAAU2C,EAAe3C,QAExB,OADPA,EAAQ4C,QAAQ1C,GACTF,CACf,wCAjFwB,yCCnBjB,SAASvf,GAAGyK,EAAKuM,EAAIxe,GAExB,OADIiS,EAAAzK,GAAGgX,EAAIxe,GACJ,WACCiS,EAAAvK,IAAI8W,EAAIxe,EACf,CACL,CCEA,MAAMynB,GAAkB5f,OAAO+hB,OAAO,CAClCxtB,QAAS,EACTytB,cAAe,EACfntB,WAAY,EACZotB,cAAe,EAEfC,YAAa,EACb5T,eAAgB,IA0Bb,MAAM6T,WAAehU,EAIxB,WAAA3G,CAAY4a,EAAIxB,EAAKjR,GACVU,QAePhiB,KAAKg0B,WAAY,EAKjBh0B,KAAKi0B,WAAY,EAIjBj0B,KAAKk0B,cAAgB,GAIrBl0B,KAAKm0B,WAAa,GAOlBn0B,KAAK0J,OAAS,GAKd1J,KAAKo0B,UAAY,EACjBp0B,KAAKiC,IAAM,EAwBXjC,KAAKq0B,KAAO,CAAE,EACdr0B,KAAKs0B,MAAQ,CAAE,EACft0B,KAAK+zB,GAAKA,EACV/zB,KAAKuyB,IAAMA,EACPjR,GAAQA,EAAKiT,OACbv0B,KAAKu0B,KAAOjT,EAAKiT,MAErBv0B,KAAK2lB,MAAQhU,OAAOkZ,OAAO,GAAIvJ,GAC3BthB,KAAK+zB,GAAGS,cACRx0B,KAAKgU,MACjB,CAeI,gBAAIygB,GACA,OAAQz0B,KAAKg0B,SACrB,CAMI,SAAAU,GACI,GAAI10B,KAAK20B,KACL,OACJ,MAAMZ,EAAK/zB,KAAK+zB,GAChB/zB,KAAK20B,KAAO,CACRrjB,GAAGyiB,EAAI,OAAQ/zB,KAAK+nB,OAAOna,KAAK5N,OAChCsR,GAAGyiB,EAAI,SAAU/zB,KAAK40B,SAAShnB,KAAK5N,OACpCsR,GAAGyiB,EAAI,QAAS/zB,KAAKuU,QAAQ3G,KAAK5N,OAClCsR,GAAGyiB,EAAI,QAAS/zB,KAAKmoB,QAAQva,KAAK5N,OAE9C,CAkBI,UAAI60B,GACO,QAAE70B,KAAK20B,IACtB,CAWI,OAAAzuB,GACI,OAAIlG,KAAKg0B,YAETh0B,KAAK00B,YACA10B,KAAK+zB,GAAkB,eACxB/zB,KAAK+zB,GAAG/f,OACR,SAAWhU,KAAK+zB,GAAGe,aACnB90B,KAAK+nB,UALE/nB,IAOnB,CAII,IAAAgU,GACI,OAAOhU,KAAKkG,SACpB,CAgBI,IAAAuO,IAAQzF,GAGG,OAFPA,EAAKykB,QAAQ,WACRzzB,KAAAqgB,KAAKpR,MAAMjP,KAAMgP,GACfhP,IACf,CAkBI,IAAAqgB,CAAKiI,KAAOtZ,GACR,IAAIgX,EAAI+O,EAAIC,EACR,GAAAzD,GAAgBtQ,eAAeqH,GAC/B,MAAM,IAAI1G,MAAM,IAAM0G,EAAG3M,WAAa,8BAGtC,GADJ3M,EAAKykB,QAAQnL,GACTtoB,KAAK2lB,MAAMsP,UAAYj1B,KAAKs0B,MAAMY,YAAcl1B,KAAKs0B,MAAMa,SAEpD,OADPn1B,KAAKo1B,YAAYpmB,GACVhP,KAEX,MAAMse,EAAS,CACXtF,KAAMwY,GAAWU,MACjBze,KAAMzE,EAEVsP,QAAiB,CAAE,GAGnB,GAFAA,EAAO8Q,QAAQC,UAAmC,IAAxBrvB,KAAKs0B,MAAMjF,SAEjC,mBAAsBrgB,EAAKA,EAAKjN,OAAS,GAAI,CAC7C,MAAMqK,EAAKpM,KAAKiC,MACVozB,EAAMrmB,EAAKlI,MACZ9G,KAAAs1B,qBAAqBlpB,EAAIipB,GAC9B/W,EAAOlS,GAAKA,CACxB,CACQ,MAAMmpB,EAAyG,QAAlFR,EAA+B,QAAzB/O,EAAKhmB,KAAK+zB,GAAGyB,cAA2B,IAAPxP,OAAgB,EAASA,EAAGwH,iBAA8B,IAAPuH,OAAgB,EAASA,EAAG7S,SAC7IuT,EAAcz1B,KAAKg0B,aAAyC,QAAzBgB,EAAKh1B,KAAK+zB,GAAGyB,cAA2B,IAAPR,OAAgB,EAASA,EAAG9F,mBAY/F,OAXelvB,KAAKs0B,MAAMa,WAAaI,IAGrCE,GACLz1B,KAAK01B,wBAAwBpX,GAC7Bte,KAAKse,OAAOA,IAGPte,KAAAm0B,WAAW9sB,KAAKiX,IAEzBte,KAAKs0B,MAAQ,CAAE,EACRt0B,IACf,CAII,oBAAAs1B,CAAqBlpB,EAAIipB,GACjB,IAAArP,EACE,MAAAhZ,EAAwC,QAA7BgZ,EAAKhmB,KAAKs0B,MAAMtnB,eAA4B,IAAPgZ,EAAgBA,EAAKhmB,KAAK2lB,MAAMgQ,WACtF,QAAgB,IAAZ3oB,EAEA,YADKhN,KAAAq0B,KAAKjoB,GAAMipB,GAIpB,MAAMO,EAAQ51B,KAAK+zB,GAAGpT,cAAa,YACxB3gB,KAAKq0B,KAAKjoB,GACjB,QAAStK,EAAI,EAAGA,EAAI9B,KAAKm0B,WAAWpyB,OAAQD,IACpC9B,KAAKm0B,WAAWryB,GAAGsK,KAAOA,GACrBpM,KAAAm0B,WAAWhjB,OAAOrP,EAAG,GAGlCuzB,EAAItjB,KAAK/R,KAAM,IAAI4hB,MAAM,2BAA0B,GACpD5U,GACGlD,EAAK,IAAIkF,KAENhP,KAAA+zB,GAAGvS,eAAeoU,GACnBP,EAAApmB,MAAMjP,KAAMgP,EAAI,EAExBlF,EAAG+rB,WAAY,EACV71B,KAAAq0B,KAAKjoB,GAAMtC,CACxB,CAiBI,WAAAgsB,CAAYxN,KAAOtZ,GACf,OAAO,IAAI/H,SAAQ,CAACyZ,EAASqV,KACnB,MAAAjsB,EAAK,CAACksB,EAAMC,IACPD,EAAOD,EAAOC,GAAQtV,EAAQuV,GAEzCnsB,EAAG+rB,WAAY,EACf7mB,EAAK3H,KAAKyC,GACL9J,KAAAqgB,KAAKiI,KAAOtZ,EAAI,GAEjC,CAMI,WAAAomB,CAAYpmB,GACJ,IAAAqmB,EACiC,mBAA1BrmB,EAAKA,EAAKjN,OAAS,KAC1BszB,EAAMrmB,EAAKlI,OAEf,MAAMwX,EAAS,CACXlS,GAAIpM,KAAKo0B,YACT8B,SAAU,EACVC,SAAS,EACTnnB,OACAslB,MAAO3iB,OAAOkZ,OAAO,CAAEqK,WAAW,GAAQl1B,KAAKs0B,QAE9CtlB,EAAA3H,MAAK,CAAC/D,KAAQ8yB,KACf,GAAI9X,IAAWte,KAAK0J,OAAO,GAEvB,OAkBJ,OAhByB,OAARpG,EAETgb,EAAO4X,SAAWl2B,KAAK2lB,MAAMsP,UAC7Bj1B,KAAK0J,OAAOuI,QACRojB,GACAA,EAAI/xB,KAKZtD,KAAK0J,OAAOuI,QACRojB,GACIA,EAAA,QAASe,IAGrB9X,EAAO6X,SAAU,EACVn2B,KAAKq2B,aAAa,IAExBr2B,KAAA0J,OAAOrC,KAAKiX,GACjBte,KAAKq2B,aACb,CAOI,WAAAA,CAAYC,GAAQ,GAChB,IAAKt2B,KAAKg0B,WAAoC,IAAvBh0B,KAAK0J,OAAO3H,OAC/B,OAEE,MAAAuc,EAASte,KAAK0J,OAAO,GACvB4U,EAAO6X,UAAYG,IAGvBhY,EAAO6X,SAAU,EACV7X,EAAA4X,WACPl2B,KAAKs0B,MAAQhW,EAAOgW,MACpBt0B,KAAKqgB,KAAKpR,MAAMjP,KAAMse,EAAOtP,MACrC,CAOI,MAAAsP,CAAOA,GACHA,EAAOiU,IAAMvyB,KAAKuyB,IACbvyB,KAAA+zB,GAAGlL,QAAQvK,EACxB,CAMI,MAAAyJ,GAC4B,mBAAb/nB,KAAKu0B,KACPv0B,KAAAu0B,MAAM9gB,IACPzT,KAAKu2B,mBAAmB9iB,EAAI,IAI3BzT,KAAAu2B,mBAAmBv2B,KAAKu0B,KAEzC,CAOI,kBAAAgC,CAAmB9iB,GACfzT,KAAKse,OAAO,CACRtF,KAAMwY,GAAWqB,QACjBpf,KAAMzT,KAAKw2B,KACL7kB,OAAOkZ,OAAO,CAAE4L,IAAKz2B,KAAKw2B,KAAME,OAAQ12B,KAAK22B,aAAeljB,GAC5DA,GAElB,CAOI,OAAAc,CAAQjR,GACCtD,KAAKg0B,WACDh0B,KAAAsgB,aAAa,gBAAiBhd,EAE/C,CAQI,OAAA6kB,CAAQtG,EAAQC,GACZ9hB,KAAKg0B,WAAY,SACVh0B,KAAKoM,GACPpM,KAAAsgB,aAAa,aAAcuB,EAAQC,GACxC9hB,KAAK42B,YACb,CAOI,UAAAA,GACIjlB,OAAOD,KAAK1R,KAAKq0B,MAAMngB,SAAS9H,IAE5B,IADmBpM,KAAKm0B,WAAW0C,MAAMvY,GAAWL,OAAOK,EAAOlS,MAAQA,IACzD,CAEP,MAAAipB,EAAMr1B,KAAKq0B,KAAKjoB,UACfpM,KAAKq0B,KAAKjoB,GACbipB,EAAIQ,WACJR,EAAItjB,KAAK/R,KAAM,IAAI4hB,MAAM,gCAE7C,IAEA,CAOI,QAAAgT,CAAStW,GAEL,GADsBA,EAAOiU,MAAQvyB,KAAKuyB,IAG1C,OAAQjU,EAAOtF,MACX,KAAKwY,GAAWqB,QACRvU,EAAO7K,MAAQ6K,EAAO7K,KAAKoR,IAC3B7kB,KAAK82B,UAAUxY,EAAO7K,KAAKoR,IAAKvG,EAAO7K,KAAKgjB,KAG5Cz2B,KAAKsgB,aAAa,gBAAiB,IAAIsB,MAAM,8LAEjD,MACJ,KAAK4P,GAAWU,MAChB,KAAKV,GAAWQ,aACZhyB,KAAK+2B,QAAQzY,GACb,MACJ,KAAKkT,GAAWW,IAChB,KAAKX,GAAWS,WACZjyB,KAAKg3B,MAAM1Y,GACX,MACJ,KAAKkT,GAAWsB,WACZ9yB,KAAKi3B,eACL,MACJ,KAAKzF,GAAWuB,cACZ/yB,KAAKgzB,UACL,MAAM1vB,EAAM,IAAIse,MAAMtD,EAAO7K,KAAKsH,SAE9BzX,EAAAmQ,KAAO6K,EAAO7K,KAAKA,KAClBzT,KAAAsgB,aAAa,gBAAiBhd,GAGnD,CAOI,OAAAyzB,CAAQzY,GACE,MAAAtP,EAAOsP,EAAO7K,MAAQ,GACxB,MAAQ6K,EAAOlS,IACf4C,EAAK3H,KAAKrH,KAAKq1B,IAAI/W,EAAOlS,KAE1BpM,KAAKg0B,UACLh0B,KAAKk3B,UAAUloB,GAGfhP,KAAKk0B,cAAc7sB,KAAKsK,OAAO+hB,OAAO1kB,GAElD,CACI,SAAAkoB,CAAUloB,GACN,GAAIhP,KAAKm3B,eAAiBn3B,KAAKm3B,cAAcp1B,OAAQ,CAC3C,MAAAwe,EAAYvgB,KAAKm3B,cAAcnrB,QACrC,UAAWsC,KAAYiS,EACVjS,EAAAW,MAAMjP,KAAMgP,EAErC,CACcgT,MAAA3B,KAAKpR,MAAMjP,KAAMgP,GACnBhP,KAAKw2B,MAAQxnB,EAAKjN,QAA2C,iBAA1BiN,EAAKA,EAAKjN,OAAS,KACtD/B,KAAK22B,YAAc3nB,EAAKA,EAAKjN,OAAS,GAElD,CAMI,GAAAszB,CAAIjpB,GACA,MAAMjM,EAAOH,KACb,IAAIo3B,GAAO,EACX,OAAO,YAAapoB,GAEZooB,IAEGA,GAAA,EACPj3B,EAAKme,OAAO,CACRtF,KAAMwY,GAAWW,IACjB/lB,KACAqH,KAAMzE,IAEb,CACT,CAOI,KAAAgoB,CAAM1Y,GACF,MAAM+W,EAAMr1B,KAAKq0B,KAAK/V,EAAOlS,IACV,mBAARipB,WAGJr1B,KAAKq0B,KAAK/V,EAAOlS,IAEpBipB,EAAIQ,WACGvX,EAAA7K,KAAKggB,QAAQ,MAGpB4B,EAAApmB,MAAMjP,KAAMse,EAAO7K,MAC/B,CAMI,SAAAqjB,CAAU1qB,EAAIqqB,GACVz2B,KAAKoM,GAAKA,EACLpM,KAAAi0B,UAAYwC,GAAOz2B,KAAKw2B,OAASC,EACtCz2B,KAAKw2B,KAAOC,EACZz2B,KAAKg0B,WAAY,EACjBh0B,KAAKq3B,eACLr3B,KAAKsgB,aAAa,WAClBtgB,KAAKq2B,aAAY,EACzB,CAMI,YAAAgB,GACIr3B,KAAKk0B,cAAchgB,SAASlF,GAAShP,KAAKk3B,UAAUloB,KACpDhP,KAAKk0B,cAAgB,GAChBl0B,KAAAm0B,WAAWjgB,SAASoK,IACrBte,KAAK01B,wBAAwBpX,GAC7Bte,KAAKse,OAAOA,EAAM,IAEtBte,KAAKm0B,WAAa,EAC1B,CAMI,YAAA8C,GACIj3B,KAAKgzB,UACLhzB,KAAKmoB,QAAQ,uBACrB,CAQI,OAAA6K,GACQhzB,KAAK20B,OAEL30B,KAAK20B,KAAKzgB,SAASojB,GAAeA,MAClCt3B,KAAK20B,UAAO,GAEX30B,KAAA+zB,GAAa,SAAE/zB,KAC5B,CAiBI,UAAAwG,GAUW,OATHxG,KAAKg0B,WACLh0B,KAAKse,OAAO,CAAEtF,KAAMwY,GAAWsB,aAGnC9yB,KAAKgzB,UACDhzB,KAAKg0B,WAELh0B,KAAKmoB,QAAQ,wBAEVnoB,IACf,CAMI,KAAA2C,GACI,OAAO3C,KAAKwG,YACpB,CAUI,QAAA6oB,CAASA,GAEE,OADPrvB,KAAKs0B,MAAMjF,SAAWA,EACfrvB,IACf,CAUI,YAAIm1B,GAEO,OADPn1B,KAAKs0B,MAAMa,UAAW,EACfn1B,IACf,CAcI,OAAAgN,CAAQA,GAEG,OADPhN,KAAKs0B,MAAMtnB,QAAUA,EACdhN,IACf,CAYI,KAAAu3B,CAAMjpB,GAGK,OAFFtO,KAAAm3B,cAAgBn3B,KAAKm3B,eAAiB,GACtCn3B,KAAAm3B,cAAc9vB,KAAKiH,GACjBtO,IACf,CAYI,UAAAw3B,CAAWlpB,GAGA,OAFFtO,KAAAm3B,cAAgBn3B,KAAKm3B,eAAiB,GACtCn3B,KAAAm3B,cAAc1D,QAAQnlB,GACpBtO,IACf,CAmBI,MAAAy3B,CAAOnpB,GACC,IAACtO,KAAKm3B,cACC,OAAAn3B,KAEX,GAAIsO,EAAU,CACV,MAAMiS,EAAYvgB,KAAKm3B,cACvB,QAASr1B,EAAI,EAAGA,EAAIye,EAAUxe,OAAQD,IAC9B,GAAAwM,IAAaiS,EAAUze,GAEhB,OADGye,EAAApP,OAAOrP,EAAG,GACb9B,IAG3B,MAEYA,KAAKm3B,cAAgB,GAElB,OAAAn3B,IACf,CAKI,YAAA03B,GACW,OAAA13B,KAAKm3B,eAAiB,EACrC,CAcI,aAAAQ,CAAcrpB,GAGH,OAFFtO,KAAA43B,sBAAwB53B,KAAK43B,uBAAyB,GACtD53B,KAAA43B,sBAAsBvwB,KAAKiH,GACzBtO,IACf,CAcI,kBAAA63B,CAAmBvpB,GAGR,OAFFtO,KAAA43B,sBAAwB53B,KAAK43B,uBAAyB,GACtD53B,KAAA43B,sBAAsBnE,QAAQnlB,GAC5BtO,IACf,CAmBI,cAAA83B,CAAexpB,GACP,IAACtO,KAAK43B,sBACC,OAAA53B,KAEX,GAAIsO,EAAU,CACV,MAAMiS,EAAYvgB,KAAK43B,sBACvB,QAAS91B,EAAI,EAAGA,EAAIye,EAAUxe,OAAQD,IAC9B,GAAAwM,IAAaiS,EAAUze,GAEhB,OADGye,EAAApP,OAAOrP,EAAG,GACb9B,IAG3B,MAEYA,KAAK43B,sBAAwB,GAE1B,OAAA53B,IACf,CAKI,oBAAA+3B,GACW,OAAA/3B,KAAK43B,uBAAyB,EAC7C,CAQI,uBAAAlC,CAAwBpX,GACpB,GAAIte,KAAK43B,uBAAyB53B,KAAK43B,sBAAsB71B,OAAQ,CAC3D,MAAAwe,EAAYvgB,KAAK43B,sBAAsB5rB,QAC7C,UAAWsC,KAAYiS,EACVjS,EAAAW,MAAMjP,KAAMse,EAAO7K,KAE5C,CACA,ECr2BO,SAASukB,GAAQ1W,GACpBA,EAAOA,GAAQ,CAAE,EACZthB,KAAAi4B,GAAK3W,EAAKhS,KAAO,IACjBtP,KAAA6M,IAAMyU,EAAKzU,KAAO,IAClB7M,KAAAk4B,OAAS5W,EAAK4W,QAAU,EACxBl4B,KAAAm4B,OAAS7W,EAAK6W,OAAS,GAAK7W,EAAK6W,QAAU,EAAI7W,EAAK6W,OAAS,EAClEn4B,KAAKo4B,SAAW,CACpB,CAOAJ,GAAQ93B,UAAU6M,SAAW,WACrB,IAAAkrB,EAAKj4B,KAAKi4B,GAAKrrB,KAAKmd,IAAI/pB,KAAKk4B,OAAQl4B,KAAKo4B,YAC9C,GAAIp4B,KAAKm4B,OAAQ,CACT,IAAAE,EAAOzrB,KAAK8U,SACZ4W,EAAY1rB,KAAK2rB,MAAMF,EAAOr4B,KAAKm4B,OAASF,GAC1CA,EAAwB,EAAxBrrB,KAAK2rB,MAAa,GAAPF,GAAwCJ,EAAKK,EAAtBL,EAAKK,CACrD,CACI,OAAgC,EAAzB1rB,KAAK0C,IAAI2oB,EAAIj4B,KAAK6M,IAC7B,EAMAmrB,GAAQ93B,UAAUkS,MAAQ,WACtBpS,KAAKo4B,SAAW,CACpB,EAMAJ,GAAQ93B,UAAUs4B,OAAS,SAAUlpB,GACjCtP,KAAKi4B,GAAK3oB,CACd,EAMA0oB,GAAQ93B,UAAUu4B,OAAS,SAAU5rB,GACjC7M,KAAK6M,IAAMA,CACf,EAMAmrB,GAAQ93B,UAAUw4B,UAAY,SAAUP,GACpCn4B,KAAKm4B,OAASA,CAClB,EC3DO,MAAMQ,WAAgB7Y,EACzB,WAAA3G,CAAYuL,EAAKpD,GACT,IAAA0E,EACGhE,QACPhiB,KAAK44B,KAAO,CAAE,EACd54B,KAAK20B,KAAO,GACRjQ,GAAO,iBAAoBA,IACpBpD,EAAAoD,EACDA,OAAA,IAEVpD,EAAOA,GAAQ,CAAE,GACZ+B,KAAO/B,EAAK+B,MAAQ,aACzBrjB,KAAKshB,KAAOA,EACZD,EAAsBrhB,KAAMshB,GACvBthB,KAAA64B,cAAmC,IAAtBvX,EAAKuX,cAClB74B,KAAA84B,qBAAqBxX,EAAKwX,sBAAwBnrB,KAClD3N,KAAA+4B,kBAAkBzX,EAAKyX,mBAAqB,KAC5C/4B,KAAAg5B,qBAAqB1X,EAAK0X,sBAAwB,KAClDh5B,KAAAi5B,oBAAwD,QAAnCjT,EAAK1E,EAAK2X,2BAAwC,IAAPjT,EAAgBA,EAAK,IACrFhmB,KAAAk5B,QAAU,IAAIlB,GAAQ,CACvB1oB,IAAKtP,KAAK+4B,oBACVlsB,IAAK7M,KAAKg5B,uBACVb,OAAQn4B,KAAKi5B,wBAEjBj5B,KAAKgN,QAAQ,MAAQsU,EAAKtU,QAAU,IAAQsU,EAAKtU,SACjDhN,KAAK80B,YAAc,SACnB90B,KAAK0kB,IAAMA,EACL,MAAAyU,EAAU7X,EAAK8X,QAAUA,GAC1Bp5B,KAAAq5B,QAAU,IAAIF,EAAQG,QACtBt5B,KAAAu5B,QAAU,IAAIJ,EAAQzH,QACtB1xB,KAAAw0B,cAAoC,IAArBlT,EAAKkY,YACrBx5B,KAAKw0B,cACLx0B,KAAKgU,MACjB,CACI,YAAA6kB,CAAaY,GACT,OAAK5qB,UAAU9M,QAEV/B,KAAA05B,gBAAkBD,EAClBA,IACDz5B,KAAK25B,eAAgB,GAElB35B,MALIA,KAAK05B,aAMxB,CACI,oBAAAZ,CAAqBW,GACjB,YAAU,IAANA,EACOz5B,KAAK45B,uBAChB55B,KAAK45B,sBAAwBH,EACtBz5B,KACf,CACI,iBAAA+4B,CAAkBU,GACV,IAAAzT,EACJ,YAAU,IAANyT,EACOz5B,KAAK65B,oBAChB75B,KAAK65B,mBAAqBJ,EACF,QAAvBzT,EAAKhmB,KAAKk5B,eAA4B,IAAPlT,GAAyBA,EAAGwS,OAAOiB,GAC5Dz5B,KACf,CACI,mBAAAi5B,CAAoBQ,GACZ,IAAAzT,EACJ,YAAU,IAANyT,EACOz5B,KAAK85B,sBAChB95B,KAAK85B,qBAAuBL,EACJ,QAAvBzT,EAAKhmB,KAAKk5B,eAA4B,IAAPlT,GAAyBA,EAAG0S,UAAUe,GAC/Dz5B,KACf,CACI,oBAAAg5B,CAAqBS,GACb,IAAAzT,EACJ,YAAU,IAANyT,EACOz5B,KAAK+5B,uBAChB/5B,KAAK+5B,sBAAwBN,EACL,QAAvBzT,EAAKhmB,KAAKk5B,eAA4B,IAAPlT,GAAyBA,EAAGyS,OAAOgB,GAC5Dz5B,KACf,CACI,OAAAgN,CAAQysB,GACJ,OAAK5qB,UAAU9M,QAEf/B,KAAKg6B,SAAWP,EACTz5B,MAFIA,KAAKg6B,QAGxB,CAOI,oBAAAC,IAESj6B,KAAKk6B,eACNl6B,KAAK05B,eACqB,IAA1B15B,KAAKk5B,QAAQd,UAEbp4B,KAAKm6B,WAEjB,CAQI,IAAAnmB,CAAKlK,GACD,IAAK9J,KAAK80B,YAAY7wB,QAAQ,QACnB,OAAAjE,KACXA,KAAKw1B,OAAS,IAAI4E,GAAOp6B,KAAK0kB,IAAK1kB,KAAKshB,MACxC,MAAMc,EAASpiB,KAAKw1B,OACdr1B,EAAOH,KACbA,KAAK80B,YAAc,UACnB90B,KAAK25B,eAAgB,EAErB,MAAMU,EAAiB/oB,GAAG8Q,EAAQ,QAAQ,WACtCjiB,EAAK4nB,SACLje,GAAMA,GAClB,IACcwY,EAAWhf,IACbtD,KAAK8vB,UACL9vB,KAAK80B,YAAc,SACd90B,KAAAsgB,aAAa,QAAShd,GACvBwG,EACAA,EAAGxG,GAIHtD,KAAKi6B,sBACrB,EAGcK,EAAWhpB,GAAG8Q,EAAQ,QAASE,GACjC,QAAUtiB,KAAKg6B,SAAU,CACzB,MAAMhtB,EAAUhN,KAAKg6B,SAEfpE,EAAQ51B,KAAK2gB,cAAa,KACZ0Z,IACR/X,EAAA,IAAIV,MAAM,YAClBQ,EAAOzf,OAAO,GACfqK,GACChN,KAAKshB,KAAK0G,WACV4N,EAAM1N,QAELloB,KAAA20B,KAAKttB,MAAK,KACXrH,KAAKwhB,eAAeoU,EAAK,GAEzC,CAGe,OAFF51B,KAAA20B,KAAKttB,KAAKgzB,GACVr6B,KAAA20B,KAAKttB,KAAKizB,GACRt6B,IACf,CAOI,OAAAkG,CAAQ4D,GACG,OAAA9J,KAAKgU,KAAKlK,EACzB,CAMI,MAAAie,GAEI/nB,KAAK8vB,UAEL9vB,KAAK80B,YAAc,OACnB90B,KAAKsgB,aAAa,QAElB,MAAM8B,EAASpiB,KAAKw1B,OACpBx1B,KAAK20B,KAAKttB,KAAKiK,GAAG8Q,EAAQ,OAAQpiB,KAAKu6B,OAAO3sB,KAAK5N,OAAQsR,GAAG8Q,EAAQ,OAAQpiB,KAAKw6B,OAAO5sB,KAAK5N,OAAQsR,GAAG8Q,EAAQ,QAASpiB,KAAKuU,QAAQ3G,KAAK5N,OAAQsR,GAAG8Q,EAAQ,QAASpiB,KAAKmoB,QAAQva,KAAK5N,OAE3LsR,GAAGtR,KAAKu5B,QAAS,UAAWv5B,KAAKy6B,UAAU7sB,KAAK5N,OACxD,CAMI,MAAAu6B,GACIv6B,KAAKsgB,aAAa,OAC1B,CAMI,MAAAka,CAAO/mB,GACC,IACKzT,KAAAu5B,QAAQ3H,IAAIne,EAC7B,OACetQ,GACEnD,KAAAmoB,QAAQ,cAAehlB,EACxC,CACA,CAMI,SAAAs3B,CAAUnc,GAENmC,GAAS,KACAzgB,KAAAsgB,aAAa,SAAUhC,EAAM,GACnCte,KAAK2gB,aAChB,CAMI,OAAApM,CAAQjR,GACCtD,KAAAsgB,aAAa,QAAShd,EACnC,CAOI,MAAA8e,CAAOmQ,EAAKjR,GACJ,IAAAc,EAASpiB,KAAK44B,KAAKrG,GAQhB,OAPFnQ,EAIIpiB,KAAKw0B,eAAiBpS,EAAOyS,QAClCzS,EAAOlc,WAJPkc,EAAS,IAAI0R,GAAO9zB,KAAMuyB,EAAKjR,GAC1BthB,KAAA44B,KAAKrG,GAAOnQ,GAKdA,CACf,CAOI,QAAAsY,CAAStY,GACL,MAAMwW,EAAOjnB,OAAOD,KAAK1R,KAAK44B,MAC9B,UAAWrG,KAAOqG,EAAM,CAEpB,GADe54B,KAAK44B,KAAKrG,GACdsC,OACP,MAEhB,CACQ70B,KAAK26B,QACb,CAOI,OAAA9R,CAAQvK,GACJ,MAAM8F,EAAiBpkB,KAAKq5B,QAAQ1a,OAAOL,GAC3C,QAASxc,EAAI,EAAGA,EAAIsiB,EAAeriB,OAAQD,IACvC9B,KAAKw1B,OAAO7S,MAAMyB,EAAetiB,GAAIwc,EAAO8Q,QAExD,CAMI,OAAAU,GACI9vB,KAAK20B,KAAKzgB,SAASojB,GAAeA,MAClCt3B,KAAK20B,KAAK5yB,OAAS,EACnB/B,KAAKu5B,QAAQvG,SACrB,CAMI,MAAA2H,GACI36B,KAAK25B,eAAgB,EACrB35B,KAAKk6B,eAAgB,EACrBl6B,KAAKmoB,QAAQ,eACrB,CAMI,UAAA3hB,GACI,OAAOxG,KAAK26B,QACpB,CAUI,OAAAxS,CAAQtG,EAAQC,GACR,IAAAkE,EACJhmB,KAAK8vB,UACkB,QAAtB9J,EAAKhmB,KAAKw1B,cAA2B,IAAPxP,GAAyBA,EAAGrjB,QAC3D3C,KAAKk5B,QAAQ9mB,QACbpS,KAAK80B,YAAc,SACd90B,KAAAsgB,aAAa,QAASuB,EAAQC,GAC/B9hB,KAAK05B,gBAAkB15B,KAAK25B,eAC5B35B,KAAKm6B,WAEjB,CAMI,SAAAA,GACQ,GAAAn6B,KAAKk6B,eAAiBl6B,KAAK25B,cACpB,OAAA35B,KACX,MAAMG,EAAOH,KACb,GAAIA,KAAKk5B,QAAQd,UAAYp4B,KAAK45B,sBAC9B55B,KAAKk5B,QAAQ9mB,QACbpS,KAAKsgB,aAAa,oBAClBtgB,KAAKk6B,eAAgB,MAEpB,CACK,MAAAtL,EAAQ5uB,KAAKk5B,QAAQnsB,WAC3B/M,KAAKk6B,eAAgB,EACf,MAAAtE,EAAQ51B,KAAK2gB,cAAa,KACxBxgB,EAAKw5B,gBAET35B,KAAKsgB,aAAa,oBAAqBngB,EAAK+4B,QAAQd,UAEhDj4B,EAAKw5B,eAETx5B,EAAK6T,MAAM1Q,IACHA,GACAnD,EAAK+5B,eAAgB,EACrB/5B,EAAKg6B,YACAn6B,KAAAsgB,aAAa,kBAAmBhd,IAGrCnD,EAAKy6B,aAC7B,IACiB,GACFhM,GACC5uB,KAAKshB,KAAK0G,WACV4N,EAAM1N,QAELloB,KAAA20B,KAAKttB,MAAK,KACXrH,KAAKwhB,eAAeoU,EAAK,GAEzC,CACA,CAMI,WAAAgF,GACU,MAAAC,EAAU76B,KAAKk5B,QAAQd,SAC7Bp4B,KAAKk6B,eAAgB,EACrBl6B,KAAKk5B,QAAQ9mB,QACRpS,KAAAsgB,aAAa,YAAaua,EACvC,ECvWA,MAAMxpB,GAAQ,CAAE,EAChB,SAASyL,GAAO4H,EAAKpD,GACE,iBAARoD,IACApD,EAAAoD,EACDA,OAAA,GAGV,MAAMoW,ECHH,SAAapW,EAAKrB,EAAO,GAAI0X,GAChC,IAAIhf,EAAM2I,EAEJqW,KAA4B,oBAAbjvB,UAA4BA,SAC7C,MAAQ4Y,IACFA,EAAAqW,EAAIhvB,SAAW,KAAOgvB,EAAI7P,MAEjB,iBAARxG,IACH,MAAQA,EAAIvH,OAAO,KAEfuH,EADA,MAAQA,EAAIvH,OAAO,GACb4d,EAAIhvB,SAAW2Y,EAGfqW,EAAI7P,KAAOxG,GAGpB,sBAAsBhS,KAAKgS,KAElBA,OADN,IAAuBqW,EACjBA,EAAIhvB,SAAW,KAAO2Y,EAGtB,WAAaA,GAI3B3I,EAAMiP,GAAMtG,IAGX3I,EAAIyH,OACD,cAAc9Q,KAAKqJ,EAAIhQ,UACvBgQ,EAAIyH,KAAO,KAEN,eAAe9Q,KAAKqJ,EAAIhQ,YAC7BgQ,EAAIyH,KAAO,QAGfzH,EAAAsH,KAAOtH,EAAIsH,MAAQ,IACvB,MACM6H,GADiC,IAA1BnP,EAAImP,KAAKjnB,QAAQ,KACV,IAAM8X,EAAImP,KAAO,IAAMnP,EAAImP,KASxC,OAPPnP,EAAI3P,GAAK2P,EAAIhQ,SAAW,MAAQmf,EAAO,IAAMnP,EAAIyH,KAAOH,EAExDtH,EAAIif,KACAjf,EAAIhQ,SACA,MACAmf,GACC6P,GAAOA,EAAIvX,OAASzH,EAAIyH,KAAO,GAAK,IAAMzH,EAAIyH,MAChDzH,CACX,CD7CmBrQ,CAAIgZ,GADnBpD,EAAOA,GAAQ,CAAE,GACY+B,MAAQ,cAC/Btd,EAAS+0B,EAAO/0B,OAChBqG,EAAK0uB,EAAO1uB,GACZiX,EAAOyX,EAAOzX,KACd4X,EAAgB5pB,GAAMjF,IAAOiX,KAAQhS,GAAMjF,GAAU,KAKvD,IAAA2nB,EAaJ,OAjBsBzS,EAAK4Z,UACvB5Z,EAAK,0BACL,IAAUA,EAAK6Z,WACfF,EAGKlH,EAAA,IAAI4E,GAAQ5yB,EAAQub,IAGpBjQ,GAAMjF,KACPiF,GAAMjF,GAAM,IAAIusB,GAAQ5yB,EAAQub,IAEpCyS,EAAK1iB,GAAMjF,IAEX0uB,EAAO3Y,QAAUb,EAAKa,QACtBb,EAAKa,MAAQ2Y,EAAOtP,UAEjBuI,EAAG3R,OAAO0Y,EAAOzX,KAAM/B,EAClC,CAGA3P,OAAOkZ,OAAO/N,GAAQ,CAClB6b,WACA7E,UACAC,GAAIjX,GACJ5W,QAAS4W,KE1Cb,MAAMrD,GAAU,8BCIV2hB,GAAgBC,kBAETC,GAAY,IAAMC,aAAWH,IAE7BI,GAAiB,EAAGpgB,eACzB,MAAAqgB,MAAEA,GAAUC,MACXtZ,EAAQuZ,GAAaC,WAAS,OAC9BnG,EAAaoG,GAAkBD,YAAS,IACxCxoB,EAAO0oB,GAAYF,WAAS,MAEnCG,aAAU,KACJ,GAAkB,oBAAXj7B,OACT,OAEF,IAAK26B,EAOH,YANIrZ,IACFA,EAAO5b,aACPm1B,EAAU,MACVE,GAAe,GACfC,EAAS,QAKP,MAAAE,EAAYjI,GD3BH,8BC2BkB,CAC/BQ,KAAM,CAAEkH,SACR5C,cAAc,EACdC,qBAAsB,EACtBC,kBAAmB,IACnBpQ,WAAY,CAAC,YAAa,WAC1B3b,QAAS,MAGX2uB,EAAUK,GAEAA,EAAA1qB,GAAG,WAAW,KACtBwqB,EAAS,KAAI,IAGLE,EAAA1qB,GAAG,iBAAkB2qB,IAC7BD,EAAUzH,KAAO,CACf2H,OAAQD,EAASC,OACjBC,SAAUF,EAASE,UAGrBN,GAAe,GAEfG,EAAU3b,KAAK,cAAa,IAGpB2b,EAAA1qB,GAAG,iBAAkB8B,IACpB0oB,EAAA,qCAAuC1oB,EAAM2H,SACtD8gB,GAAe,EAAK,IAGZG,EAAA1qB,GAAG,cAAc,KACzBuqB,GAAe,EAAK,IAGZG,EAAA1qB,GAAG,SAAUhO,IACZw4B,EAAAx4B,EAAIyX,SAAW,uBAAsB,IAGhD,MAAMqhB,EAAe,CACnB,UACA,gBACA,aACA,gBACA,QACA,aAGF,MAAO,KACDJ,IACFI,EAAaloB,SAAQ1I,GAASwwB,EAAUxqB,IAAIhG,KAC5CwwB,EAAUx1B,aACVm1B,EAAU,MACVE,GAAe,GACfC,EAAS,MAAI,CAEjB,GAEC,CAACL,IAEJ,MAAM1W,EAAQ,CACZ3C,SACAqT,cACAriB,QACA0oB,YAIC7gB,aAAAmgB,GAAciB,SAAd,CAAuBtX,QACrB3J,YACH,EC9FEkhB,GAAcjB,gBAAc,MAErBkB,GAAe,EAAGnhB,eAC7B,MAAOohB,EAAMC,GAAWb,WAAS,OAC1BH,EAAOiB,GAAYd,WAAS,OAC5Be,EAASC,GAAchB,YAAS,IAChCiB,EAAkBC,GAAuBlB,YAAS,GAGnDmB,EAAazB,KACblZ,EAAqB,MAAZ2a,OAAY,EAAAA,EAAA3a,OAG3B2Z,aAAU,KACR,GAAI3Z,GAAUoa,EAoBZ,OAlBOpa,EAAA9Q,GAAG,kBAAmBmC,IAE3B,GAAIA,GAAgC,iBAAjBA,EAAKupB,QAAsB,CAG5C,MAAMC,EAAc,IACfT,EACHQ,QAASvpB,EAAKupB,SAIhBP,EAAQQ,EAAW,CAE8C,IAK9D,KACL7a,EAAO5Q,IAAI,iBAAgB,CAC7B,GAED,CAAC4Q,EAAQoa,IAGN,MAAAU,EAAgBC,MAAOC,IACvB,IAEF,IAAKA,EACI,YAGT,MAAM9oB,QAAiB+oB,MAAM,GAAG5jB,aAAmB,CACjDtQ,OAAQ,MACRE,QAAS,CACPi0B,cAAiB,UAAUF,IAC3B,eAAgB,sBAIhB,IAAC9oB,EAASipB,GACN,UAAI3b,MAAM,6BAIlB,aADmBtN,EAASkpB,QAChBhB,WACLppB,GAEA,cAKX2oB,aAAU,KACeoB,WACrB,IAAIM,EAAe,KACf,IACaA,EAAAC,aAAaC,QAAQ,SAEhCF,GACFf,EAASe,SAEJrqB,GAEPsqB,aAAaE,WAAW,QAAO,CAIjC,GAAIH,EACE,IACI,MAAAxB,QAAiBiB,EAAcO,GACjCxB,EACFQ,EAAQR,IAIRQ,EAAQ,MACRC,EAAS,MACTgB,aAAaE,WAAW,gBAEnBxqB,GAEPqpB,EAAQ,MACRC,EAAS,MACTgB,aAAaE,WAAW,QAAO,CAC/B,QACAhB,GAAW,EAAK,MAGlBH,EAAQ,MACRC,EAAS,MACTE,GAAW,EAAK,EAILiB,EAAA,GACd,IAEG,MAuCAC,EAASC,eAAY,KAEzBtB,EAAQ,MACRC,EAAS,MACTI,GAAoB,GAGpBY,aAAaE,WAAW,QAAO,GAC9B,IAGGI,EAAkBD,eAAYZ,UAC9B,IAEI,MAAAlB,QAAiBiB,EAAczB,GACjCQ,EACFQ,EAAQR,GAID6B,UAEF1qB,GAEA0qB,GAAA,IAGR,CAACrC,EAAOqC,IAEX,OAAInB,EACK,KAQN3hB,EAAAC,IAAAqhB,GAAYD,SAAZ,CAAqBtX,MAAO,CAAEyX,OAAMf,QAAOwC,MA7EhCd,MAAOlB,EAAUiC,KACzB,IAACjC,IAAaA,EAASE,WAAaF,EAAS7vB,IAAkC,iBAArB6vB,EAASe,QAE/D,UAAIpb,MAAM,8BAGlB,IAAKsc,EAEG,UAAItc,MAAM,oCAGd,IAEF,MAAMuc,EAAkB,CACtBhC,SAAUF,EAASE,SACnB/vB,GAAI6vB,EAAS7vB,GACb4wB,QAASf,EAASe,SAIpBP,EAAQ0B,GACRzB,EAASwB,GACIR,aAAAU,QAAQ,QAASF,GAG9BpB,GAAoB,GAGd,MAAAuB,QAAyBnB,EAAcgB,GACzCG,GACF5B,EAAQ4B,SAGHjrB,GAED,MAAAA,CAAA,GA0C2C0qB,SAAQE,kBAAiBrB,WACzEvhB,YAQH,EAISsgB,GAAU,KACf,MAAA3Z,EAAUwZ,aAAWe,IAC3B,IAAKva,EACG,UAAIH,MAAM,+CAEX,OAAAG,CAAA,ECnNHuc,GAAejD,kBAERkD,GAAW,IAAMhD,aAAW+C,IAE5BE,GAAgB,EAAGpjB,eAC9B,MAAMgH,OAAEA,EAAAqT,YAAQA,GAAgB6F,MAEzBmD,EAAUC,GAAe9C,WAAS,KAClCe,EAASC,GAAchB,YAAS,IAChCxoB,EAAO0oB,GAAYF,WAAS,MAEnCG,aAAU,KACJ,IAAC3Z,IAAWqT,EAAa,OAEvB,MAAAkJ,EAAkBC,IACtBF,EAAYE,GACZhC,GAAW,EAAK,EAGZiC,EAAev7B,IAEVw4B,EAAAx4B,EAAIyX,SAAW,qBACxB6hB,GAAW,EAAK,EAQlB,OALOxa,EAAA9Q,GAAG,WAAYqtB,GACfvc,EAAA9Q,GAAG,QAASutB,GAEnBzc,EAAO/B,KAAK,eAEL,KACE+B,EAAA5Q,IAAI,WAAYmtB,GAChBvc,EAAA5Q,IAAI,QAASqtB,EAAW,CACjC,GACC,CAACzc,EAAQqT,IAEZ,MAAMqJ,EAAe,CACnBL,WACA9B,UACAvpB,sBAICkrB,GAAajC,SAAb,CAAsBtX,MAAO+Z,EAC3B1jB,YACH,ECzCE2jB,GAAWC,QAAK,IAAMC,GAAA,IAAAC,OAAO,2BAA6BC,oCAC1DC,GAAQJ,QAAK,WAAME,OAAO,wBAAqBC,yCAC/CE,GAAWL,QAAK,WAAME,OAAO,2BAAwBC,sCAGrDG,GAAiB,EAAGlkB,eACxB,MAAMohB,KAAEA,EAAAG,QAAMA,GAAYjB,KAE1B,OAAIiB,IACK1hB,IAACH,EAAc,CAAAC,QAAQ,+BAG3ByhB,EAIEphB,EAHGH,MAAAskB,EAAA,CAASnwB,GAAG,QAAQtM,SAAO,GAG9B,EAII08B,GAASC,EAAoB,CACxC,CACEpc,KAAM,IACNqc,QACG1kB,EAAAC,IAAAqkB,GAAA,CACClkB,SAACH,MAAAujB,GAAA,CACCpjB,eAACukB,WAAS,CAAAC,SAAW3kB,MAAAH,EAAA,CAAcC,QAAQ,eACzCK,eAACgkB,GAAM,WAMjB,CACE/b,KAAM,QACNqc,UACGzkB,IAAA0kB,WAAA,CAASC,SAAU3kB,MAACH,EAAc,CAAAC,QAAQ,eACzCK,SAACH,MAAA8jB,GAAA,CAAS,MAIhB,CACE1b,KAAM,WACNqc,QACEzkB,MAACqkB,GACC,CAAAlkB,SAAAH,MAAC0kB,YAASC,SAAU5kB,EAAAC,IAACH,EAAc,CAAAC,QAAQ,eACzCK,SAACH,MAAAokB,GAAA,SAKT,CACEhc,KAAM,IACNqc,UAAUzkB,IAAAskB,EAAA,CAASnwB,GAAG,IAAItM,SAAO,qfCvDrC,IAAI+8B,GAAiB,EAGrB,SAAwBC,IAAYC,gBAAOtd,WAASrH,EAAU4kB,SAAQC,gBAAA/kB,UAAeA,EAAY,GAAAglB,aAAIA,KAAiBC,IAEpHpE,aAAU,KACiB,KAAnB8D,aAA+BjlB,KAAKwlB,UAAUxO,IAAI,cACjD,KAAiC,KAAnBiO,aAA+BjlB,KAAKwlB,UAAUC,OAAO,aAAY,IACrF,IAEG,MAAAC,QACH,MAAI,CAAAplB,UAAWC,GAAOolB,QAASC,MAAON,EAAcO,QAAShe,EAC5DrH,SAAAJ,EAAAK,KAAC,OACCH,UAAW,GAAGC,GAAOulB,SAASxlB,IAC9BulB,QAAct9B,KAAEw9B,qBACZR,EAEH/kB,SAAA,CAAA2kB,KACE1kB,KAAA,OAAIH,UAAWC,GAAO2D,OACrB1D,SAAA,GAAAH,IAAC,MAAIG,SAAM2kB,IACX1kB,OAAC,MAAI,CAAAmlB,MAAO,CAAEI,QAAS,OAAQC,IAAK,SAAUC,WAAY,UACvD1lB,SAAA,CAAA6kB,EACDjlB,EAAAC,IAAC,UACCC,UAAWC,GAAO4lB,YAClBN,QAAShe,EACT,aAAW,QACXzJ,KAAK,SACL,yBAAuB,OACxBoC,SAAA,YAMNH,MAAA,OAAIC,UAAWC,GAAOmB,QAAUlB,aAChC4kB,GAAW/kB,MAAA,OAAIC,UAAWC,GAAO6kB,OAAS5kB,SAAO4kB,SAMjD,OAAAgB,eAAaV,EAAc75B,SAASmU,KAC7C,wOC1CMqmB,GAAkB,EACtBC,YACAze,UACA0e,UACAC,YAAY,OACZC,eAAe,OAET,MAAAC,cAAEA,GAAkBC,MACnBC,EAAeC,GAAoB7F,WAAS,cAC5C8F,EAAWC,GAAgB/F,WAAS,IAG3CG,aAAU,KAIJ4F,EAHAT,EAEgB,WAAdE,EACWC,GAAiC,MAAjBA,EAAuBA,EAAe,GAEtDA,GAAgB,GAGlB,GAAE,GAEhB,CAACH,EAAWG,EAAcD,IAG7B,MA0BM1vB,EA1BU,CACdkwB,UAAW,CACT,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9C,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9C,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzC,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,aAC7C,CAAC,QAAS,UAEZC,UAAW,CACT,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9C,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9C,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzC,CAAC,QAAS,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,aAC7C,CAAC,QAAS,UAEZC,QAAS,CACP,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,aACN,CAAC,WAK8B,WAAdV,EAAyB,UAAYI,GAGpDO,EAAiBhE,eAAa5pB,IAClC,OAAQA,GACN,IAAK,QACHstB,GAAyBO,GAAS,cAATA,EAAuB,YAAc,cAC9D,MACF,IAAK,YACHL,GAAqBK,KAAKh2B,MAAM,QAChC,MACF,IAAK,QACO01B,cACV,MACF,IAAK,QACUC,GAAAK,GAAQA,EAAO,MAC5B,MACF,QACeL,GAAAK,GAAQA,EAAO7tB,IAC5B,GAEH,CAACgtB,EAASO,IAEPO,EAAqB9tB,IACzB,OAAQA,GACN,IAAK,QACI,MAAgC,IACzC,IAAK,YACI,UACT,IAAK,QACI,cACT,IAAK,QACI,UACT,QACSA,SAAA,EAIP+tB,EAAe/tB,IACnB,IAAI+G,EAAYC,GAcT,MAZH,CAAC,QAAS,YAAa,QAAS,SAASf,SAASjG,KACvC+G,GAAA,IAAIC,MAGP,UAARhH,IACW+G,GAAA,IAAIC,MAGP,UAARhH,GAAqC,cAAlBqtB,IACRtmB,GAAA,IAAIC,MAGZD,CAAA,EAoBL,OAhBJ6gB,aAAU,KACR,GAAImF,EAAW,CACP,MAAAiB,EAAiBh/B,IACP,WAAVA,EAAEgR,MACJhR,EAAEi/B,iBACQ,MAAA3f,OAAA,EAKd,OADShc,SAAAG,iBAAiB,UAAWu7B,GAC9B,KACI17B,SAAAC,oBAAoB,UAAWy7B,EAAa,CACvD,IAED,CAACjB,EAAWze,IAEVye,EAGHlmB,EAAAK,KAACykB,GAAA,CACCC,MAAOuB,IAAgC,WAAdF,EAAyB,aAAe,oBACjE3e,UACAvH,UAAWC,GACX+kB,aAAc,CAAEmC,OAAQ,MAExBjnB,SAAA,CAACH,MAAA,OAAIC,UAAWC,GACdC,SAAAJ,EAAAC,IAAC,SACCjC,KAAoB,aAAdooB,EAA2B,WAAa,OAC9Crc,MAAO2c,EACPxmB,UAAWC,GACXmnB,UAAQ,EACRpR,YAAY,0BAGf,MAAI,CAAAhW,UAAWC,GACbC,SAAA1J,EAAK2e,KAAI,CAACkS,EAAKC,UACb,OAAmBtnB,UAAWC,GAC5BC,WAAIiV,KAAI,CAAClc,EAAKsuB,IACbznB,EAAAC,IAAC,UAECC,UAAWgnB,EAAY/tB,GACvBssB,QAAS,IAAMsB,EAAe5tB,GAC9B,yBAAuB,OACvB,aAAoB,cAARA,EAAsB,YACf,UAARA,EAAkB,QACV,UAARA,EAAkB,QACV,UAARA,EAAkB,QAAUA,EAEtCiH,WAAkBjH,IATd,GAAGquB,KAAYC,QAHhBD,UApBK,IAsCrB,ECnKEE,GAAyBrH,kBAElBkG,GAA4B,KACjC,MAAAxf,EAAUwZ,aAAWmH,IAC3B,IAAK3gB,EACG,UAAIH,MAAM,2EAEX,OAAAG,CAAA,EAGI4gB,GAA0B,EAAGvnB,eACxC,MAAMwnB,ECT0B,MAChC,MAAO1B,EAAW2B,GAAgBjH,YAAS,IACpCkH,EAAcC,GAAmBnH,WAAS,OAC1CwF,EAAW4B,GAAgBpH,WAAS,SACpC0F,EAAe2B,GAAoBrH,WAAS,KAC5CsH,EAAiBC,GAAsBvH,YAAS,GAGvDG,aAAU,KACR,MAAMqH,EAAyB,KAC7B,MAAMpP,EAAYvtB,SAASmU,KAAKwlB,UAAUiD,SAAS,6BACnDF,EAAmBnP,EAAS,EAINoP,IAGlB,MAAAE,EAAW,IAAIC,iBAAiBH,GAM/B,OALEE,EAAAE,QAAQ/8B,SAASmU,KAAM,CAC9B6oB,YAAY,EACZC,gBAAiB,CAAC,WAGb,IAAMJ,EAAS98B,YAAY,GACjC,IAEG,MAAAm9B,EAAe5F,eAAY,CAAC6F,EAAc5qB,EAAO,OAAQ+mB,EAAQ,MAChE6D,IAELb,EAAgBa,GAChBZ,EAAahqB,GACbiqB,EAAiBlD,GACjB8C,GAAa,GAGbe,EAAaC,OAAM,GAClB,IAEGC,EAAe/F,eAAY,KAC/B8E,GAAa,GACbE,EAAgB,MAChBC,EAAa,QACbC,EAAiB,GAAE,GAClB,IAGGc,EAAchG,eAAaiG,IAC/B,IAAKlB,EAAc,OAGYnxB,OAAOsyB,yBAAyBnjC,OAAOojC,iBAAiBhkC,UAAW,SAASikC,IACpFpyB,KAAK+wB,EAAckB,GAAc,IAGxD,MAAMI,EAAa,IAAIC,MAAM,QAAS,CAAEC,SAAS,IACjDxB,EAAayB,cAAcH,GAG3B,MAAMI,EAAc,IAAIH,MAAM,SAAU,CAAEC,SAAS,IACnDxB,EAAayB,cAAcC,GAGbV,GAAA,GACb,CAAChB,EAAcgB,IAGZW,EAAe1G,eAAY,CAAC6F,EAAc5qB,EAAO,OAAQ+mB,EAAQ,MACrE,IAAK6D,EAAc,OAGnB,IAAIc,EAAcd,EACdA,EAAae,eAAiBf,EAAae,cAAc,WAC7CD,EAAAd,EAAae,cAAc,UAGrC,MAAAC,EAAezhC,IAIf+/B,GAAmBz8B,SAASmU,KAAKwlB,UAAUiD,SAAS,+BACtDlgC,EAAEi/B,iBACWuB,EAAAe,EAAa1rB,EAAM+mB,GACxC,EAOI,OAHY2E,EAAA99B,iBAAiB,QAASg+B,GAG/B,KACOF,EAAAh+B,oBAAoB,QAASk+B,EAAW,CACrD,GACA,CAAC1B,EAAiBS,IAGfkB,EAAuB9G,eAAY,WAChC+E,WAAc/d,QAAS,IAC7B,CAAC+d,IAEG,OACL5B,YACAE,YACAE,gBACAwB,eACAI,kBACAS,eACAG,eACAC,cACAU,eACAI,uBACD,EDtGqBC,IAChB5D,UAAEA,EAAWE,YAAA0C,aAAWA,EAAcC,cAAAc,qBAAaA,GAAyBjC,EAElF,SACGvnB,KAAAqnB,GAAuBrG,SAAvB,CAAgCtX,MAAO6d,EACrCxnB,SAAA,CAAAA,EACA8lB,GACClmB,EAAAC,IAACgmB,GAAA,CACCC,YACAE,YACAC,aAAcwD,IACdpiB,QAASqhB,EACT3C,QAAS4C,MAGf,uUE3BEgB,GAAQ,EACZhF,QACAhlB,UACAiqB,QAAQ,IACRC,QAAQ,UACRl4B,WAAW,IACX0V,UACAyiB,eAEA,MAAOhE,EAAW2B,GAAgBjH,YAAS,GAE3CG,aAAU,KACR,GAAIhvB,EAAW,EAAG,CACV,MAAA6oB,EAAQjuB,YAAW,KACvBk7B,GAAa,GAEbl7B,WAAW8a,EAAS,IAAG,GACtB1V,GAEI,UAAMrF,aAAakuB,EAAK,IAEhC,CAAC7oB,EAAU0V,IAGR,MAAA0iB,GAAmBpF,GAAmB,MAAViF,EAGhC,OAAAhqB,EAAAK,KAAC,OACCH,UAAW,GAAGC,MAAgBgqB,GAAmBjE,EAAY/lB,GAAuB,MAAO+lB,EAA8B,GAAlB/lB,KACvGqlB,MAAO,CACL4E,IAAK,OACL/C,OAAQ,IAAQ6C,EAChBG,YAAaJ,EACbK,WAAY,qDAGdlqB,SAAA,CAAAJ,EAAAC,IAAC,OACCC,UAAWC,GAEXC,SAAAJ,EAAAC,IAAC,QACCC,UAAW,GAAGC,MAAegqB,EAAkBhqB,GAAmB,KAClEqlB,MAAO,CACLyE,QACAM,WAAYJ,EACR,YAAYF,eAAmBA,MAC/B,WAAWA,OAGhB7pB,SAAA4pB,QAGJ3pB,KAAA,OAAIH,UAAWC,GACbC,SAAA,CAAA2kB,GAAU9kB,MAAA,OAAIC,UAAWC,GAAeC,SAAM2kB,IAC9C9kB,MAAA,OAAIC,UAAW,GAAGC,MAAkBgqB,EAAkBhqB,GAAsB,KAC1EC,kBAEGoqB,WAAA,CAAApqB,SAAA,CAAAH,MAAC,OAAK,CAAAC,UAAWC,GAAoBC,SAAQL,IAC5CE,MAAA,QAAKC,UAAWC,GAAqBC,SAAQ,gBAGhDL,OAINC,EAAAC,IAAC,UACCC,UAAWC,GACXslB,QAAShe,EACT,aAAW,qBACZrH,SAAA,QAGH,ECtEEqqB,GAAepK,kBAURqK,GAAgB,EAAGtqB,eAC9B,MAAOuqB,EAAQC,GAAahK,WAAS,KAC9BiK,EAAYC,GAAiBlK,WAAS,KACtCmK,EAAeC,GAAoBpK,WAAS,IAC7CxZ,OAAEA,GAAWkZ,KAEb2K,EAAWlI,eAAY,CAACgC,EAAOhlB,EAASiqB,EAAQ,IAAKC,EAAQ,UAAWl4B,EAAW,OACvF,MAAMX,EAAK2D,KAAKC,MAAQpD,KAAK8U,SACvBwkB,EAAW,CAAE95B,KAAI2zB,QAAOhlB,UAASiqB,QAAOC,QAAOl4B,YAE/CiD,EAAMD,KAAKC,MAYV,OAXoBA,EAAM+1B,GAEP,KAExBH,GAAkB5D,GAAA,IAAIA,EAAMkE,KAC5BF,EAAiBh2B,IAGjB81B,GAAsB9D,GAAA,IAAIA,EAAMkE,KAG3B95B,CAAA,GACN,CAAC25B,IAEEI,EAAcpI,eAAa3xB,IACrBw5B,MAAQ5D,EAAKzR,WAAgB6V,EAAMh6B,KAAOA,KAAG,GACtD,IAGGi6B,EAActI,eAAY,CAACgC,EAAOhlB,EAAShO,IACxCk5B,EAASlG,EAAOhlB,EAAS,IAAK,UAAWhO,IAC/C,CAACk5B,IAEEK,EAAYvI,eAAY,CAACgC,EAAOhlB,EAAShO,IACtCk5B,EAASlG,EAAOhlB,EAAS,IAAK,UAAWhO,IAC/C,CAACk5B,IAEEM,EAAcxI,eAAY,CAACgC,EAAOhlB,EAAShO,IACxCk5B,EAASlG,EAAOhlB,EAAS,IAAK,UAAWhO,IAC/C,CAACk5B,IAEEO,EAAWzI,eAAY,CAACgC,EAAOhlB,EAAShO,IACrCk5B,EAASlG,EAAOhlB,EAAS,IAAK,UAAWhO,IAC/C,CAACk5B,IAEEQ,EAAgB1I,eAAY,CAACgC,EAAOhlB,EAAShO,IAC1Ck5B,EAASlG,EAAOhlB,EAAS,KAAM,UAAWhO,IAChD,CAACk5B,IAEES,EAAiB3I,eAAY,CAACgC,EAAOhlB,EAAShO,IAC3Ck5B,EAASlG,EAAOhlB,EAAS,KAAM,UAAWhO,IAChD,CAACk5B,IAGJlK,aAAU,KACJ,GAAsB,IAAtB8J,EAAW9jC,OAAc,OAEvB,MAAA6zB,EAAQjuB,YAAW,KACjB,MAAAg/B,EAAYd,EAAW,GAC7BC,GAAsB9D,KAAKh2B,MAAM,KACjC45B,GAAkB5D,GAAA,IAAIA,EAAM2E,KACXX,EAAAj2B,KAAKC,MAAK,GAC1B,KAEI,UAAMtI,aAAakuB,EAAK,GAC9B,CAACiQ,EAAYF,IAGhB5J,aAAU,KACR,IAAK3Z,EAAQ,OAGP,MAAAwkB,EAAenzB,IACnBwyB,EAASxyB,EAAKssB,OAAS,GAAItsB,EAAKsH,QAAStH,EAAKuxB,OAAS,IAAKvxB,EAAKwxB,OAAS,UAAWxxB,EAAK1G,SAAQ,EAOpG,OAHOqV,EAAA9Q,GAAG,QAASs1B,GAGZ,KACExkB,EAAA5Q,IAAI,QAASo1B,EAAW,CACjC,GACC,CAACxkB,EAAQ6jB,IAEZ,MAAMlhB,EAAQ,CACZkhB,WACAE,cACAE,cACAC,YACAC,cACAC,WACAC,gBACAC,iBACAf,UAGF,SACGtqB,KAAAoqB,GAAapJ,SAAb,CAAsBtX,QACpB3J,SAAA,CAAAA,QACA,MAAI,CAAAF,UAAU,kBAAkBslB,MAAO,CAAE0E,SAAU,QAASE,IAAK,EAAGyB,MAAO,EAAGxE,OAAQ,KACpFjnB,WAAOiV,KAAI,CAAC+V,EAAOl1B,IAClB8J,EAAAC,IAAC8pB,GAAA,CAEChF,MAAOqG,EAAMrG,MACbhlB,QAASqrB,EAAMrrB,QACfiqB,MAAOoB,EAAMpB,MACbC,MAAOmB,EAAMnB,MACbl4B,SAAUq5B,EAAMr5B,SAChBm4B,SAAUh0B,EACVuR,QAAS,IAAM0jB,EAAYC,EAAMh6B,KAP5Bg6B,EAAMh6B,UAWnB,ECzHJ,SAAS06B,KAOL,OALF/K,aAAU,KACR7iB,EAAaQ,YAAW,GACvB,MAGDuB,IAACyqB,IACCtqB,SAACH,MAAA0nB,GAAA,CACCvnB,eAAC2rB,EAAe,CAAAvH,eAIxB,CCjBA,MAAMwH,GAAqB3L,gBAAc,MAGnC4L,GAAkBv7B,IAClB,IAACA,EAAY,YAGX,MAAA+N,EAAU,8BAGZ/N,KAAIw7B,WAAW,QACVx7B,SAGAA,KAAIw7B,WAAW,WACf,SAAGztB,IAAU/N,IAGbA,KAAI0O,SAAS,aAAc,CAE5B2Q,QAAQrf,EAAI3H,MAAM,KAClBojC,EAAWpc,EAAMjkB,MAEvB,MAAO,GAAG2S,WADGsR,EAAMA,EAAMhpB,OAAS,MACColC,GAAQ,CAIpC,SAAG1tB,IAAU/N,GAAG,EAKrB07B,GAAyB3zB,GACxBA,EAEE,IACFA,EACH4zB,WAAYJ,GAAexzB,EAAK4zB,YAChCC,gBAAiBL,GAAexzB,EAAK6zB,iBACrCC,gBAAiB9zB,EAAK8zB,iBANN,CAAC,EAURC,GAAsB,EAAGpsB,eACpC,MAAOX,EAAagtB,GAAkB7L,WAAS,CAC7CyL,WAAY,KACZK,UAAU,EACVllC,OAAO,EACP8kC,gBAAiB,KACjBC,gBAAiB,KACjBI,cAAe,QAEVhL,EAASC,GAAchB,YAAS,IACjCY,KAAEA,GAASd,KAGXkM,EAAkBC,EAAM9J,aAAYZ,UACxC,IAAKX,EAGH,OAFeiL,EAAA,CAAEC,UAAU,SAC3B9K,GAAW,GAKT,IACFA,GAAW,GAEL,MAAAnjB,EAAU,8BACVgiB,EAAQiC,aAAaC,QAAQ,SAEnC,IAAKlC,EAGH,YADAmB,GAAW,GAIb,MAAMtoB,QAAiB+oB,MAAM,GAAG5jB,gBAAuB,CACrDtQ,OAAQ,MACRE,QAAS,CACP,eAAgB,mBAChBi0B,cAAiB,UAAU7B,OAI3B,IAACnnB,EAASipB,GACN,UAAI3b,MAAM,8BAGZ,MAAAnO,QAAaa,EAASkpB,OAKtBsK,EAFgBV,GAAsB3zB,IAEF,CAAEi0B,UAAU,EAAOllC,OAAO,GACpEilC,EAAeK,QAGuB,IAA3BA,EAAiBtlC,OACb0W,EAAAoB,SAASwtB,EAAiBtlC,aAElC4Q,GAGQq0B,EAAA,CAAEC,UAAU,GAAO,CAClC,QACA9K,GAAW,EAAK,IAEjB,CAACJ,IAGJT,aAAU,KACJS,GACcoL,GAAA,GAEjB,CAACpL,EAAMoL,IAGJ,MAAAG,EAAmB5K,MAAOhpB,EAAK4Q,KACnC,IAAKyX,EAEI,SAGL,IAEI,MAAA/iB,EAAU,8BACVgiB,EAAQiC,aAAaC,QAAQ,SAEnC,IAAKlC,EAEI,SAITgM,GAAwBzF,IAAA,IACnBA,EACHgG,CAAC7zB,GAAM4Q,MAIG,UAAR5Q,GACF+E,EAAaoB,SAASyK,GAIxB,MAAMzQ,QAAiB+oB,MAAM,GAAG5jB,iBAAuBtF,IAAO,CAC5DhL,OAAQ,OACRE,QAAS,CACP,eAAgB,mBAChBi0B,cAAiB,UAAU7B,KAE7B7gB,KAAM0T,KAAKiF,UAAU,CAAExO,YAGrB,IAACzQ,EAASipB,GACZ,MAAM,IAAI3b,MAAM,oBAAoBzN,gBAGhC,MAAAV,QAAaa,EAASkpB,OAGtByK,EAAgBb,GAAsB3zB,GAIrC,OADPg0B,EAAeQ,IACR,QACA70B,GAKA,aADDw0B,KACC,IA0LT,OAAA5sB,EAAAC,IAAC+rB,GAAmB3K,SAAnB,CACCtX,MAAO,CACLtK,cACAstB,mBACAG,eAzLiB/K,UACf,MAAAgL,GAAY1tB,EAAYitB,SACvB,aAAMK,EAAiB,WAAYI,EAAQ,EAwL9CC,WApLajL,UACX,MAAAgL,GAAY1tB,EAAYjY,MACvB,aAAMulC,EAAiB,QAASI,EAAQ,EAmL3CE,oBA/KsBlL,MAAOmL,SACpBP,EAAiB,gBAAiBO,GA+K3CC,sBA3KwBpL,MAAOqL,IACnC,IAAKA,EAEI,SAIL,IACI,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQH,GAGlB,MAAA/uB,EAAU,8BACVgiB,EAAQiC,aAAaC,QAAQ,SAEnC,IAAKlC,EAEI,SAIT,MAAMnnB,QAAiB+oB,MAAM,GAAG5jB,gCAAuC,CACrEtQ,OAAQ,OACRE,QAAS,CACPi0B,cAAiB,UAAU7B,KAE7B7gB,KAAM6tB,IAGFvhB,QAAqB5S,EAASs0B,OAEhC,IAACt0B,EAASipB,GACZ,MAAM,IAAI3b,MAAM,8BAA8BsF,KAIhD,MAAMzT,EAAOyT,EAAeoH,KAAKtD,MAAM9D,GAAgB,CAAC,EAGlD2hB,EAAe5B,GAAexzB,EAAKq1B,SAQlC,OALPrB,GAAwBzF,IAAA,IACnBA,EACHsF,gBAAiBuB,OAGZ,QACAz1B,GAEA,WA0HL21B,sBArHwB5L,MAAOqL,IACnC,IAAKA,EAEI,SAIL,IACI,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQH,GAGlB,MAAA/uB,EAAU,8BACVgiB,EAAQiC,aAAaC,QAAQ,SAEnC,IAAKlC,EAEI,SAIT,MAAMnnB,QAAiB+oB,MAAM,GAAG5jB,gCAAuC,CACrEtQ,OAAQ,OACRE,QAAS,CACPi0B,cAAiB,UAAU7B,KAE7B7gB,KAAM6tB,IAGFvhB,QAAqB5S,EAASs0B,OAEhC,IAACt0B,EAASipB,GACZ,MAAM,IAAI3b,MAAM,8BAA8BsF,KAIhD,MAAMzT,EAAOyT,EAAeoH,KAAKtD,MAAM9D,GAAgB,CAAC,EAQjD,OALPugB,GAAwBzF,IAAA,IACnBA,EACHuF,gBAAiB9zB,EAAKq1B,aAGjB,QACA11B,GAEA,WAuEL41B,iBAlEmB7L,MAAOqL,IAC9B,IAAKA,EAEI,SAIL,IACI,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQH,GAGlB,MAAA/uB,EAAU,8BACVgiB,EAAQiC,aAAaC,QAAQ,SAEnC,IAAKlC,EAEI,SAIT,MAAMnnB,QAAiB+oB,MAAM,GAAG5jB,2BAAkC,CAChEtQ,OAAQ,OACRE,QAAS,CACPi0B,cAAiB,UAAU7B,KAE7B7gB,KAAM6tB,IAGFvhB,QAAqB5S,EAASs0B,OAEhC,IAACt0B,EAASipB,GACZ,MAAM,IAAI3b,MAAM,mCAAmCsF,KAIrD,MAAMzT,EAAOyT,EAAeoH,KAAKtD,MAAM9D,GAAgB,CAAC,EAGlD2hB,EAAe5B,GAAexzB,EAAKq1B,SAQlC,OALPrB,GAAwBzF,IAAA,IACnBA,EACHqF,WAAYwB,OAGP,QACAz1B,GAEA,WAiBLupB,WAGDvhB,YACH,EAIS6tB,GAAiB,KACtB,MAAAlnB,EAAUwZ,aAAWyL,IAC3B,IAAKjlB,EACG,UAAIH,MAAM,4DAEX,OAAAG,CAAA,EC3XHmnB,GAAkB7N,gBAAc,MAEzB8N,GAAmB,EAAG/tB,eAC3B,MAAAgH,OAAEA,GAAWkZ,MACbG,MAAEA,GAAUC,MACX0N,EAAWC,GAAgBzN,WAAS,IAAI0N,KACzCC,EAAiBC,SAAW,IAAAC,KAC5BC,EAAaF,SAAO,MAG1BzN,aAAU,KACR,IAAK3Z,EAAQ,OAEb,MAAMunB,EAAuB,EAAGzN,SAAQzoB,WAEtC41B,GAAqBrH,IACb,MAAA4H,EAAW,IAAIN,IAAItH,GAElB,OADE4H,EAAAzF,IAAIjI,EAAQzoB,GACdm2B,CAAA,GACR,EAIH,OADOxnB,EAAA9Q,GAAG,kBAAmBq4B,GACtB,KACEvnB,EAAA5Q,IAAI,kBAAmBm4B,EAAoB,CACpD,GACC,CAACvnB,IAGJ2Z,aAAU,IACD,KACD2N,EAAWG,SACbniC,aAAagiC,EAAWG,QAAO,GAGlC,IAEG,MAAAC,EAAiB/L,eAAYZ,MAAO4M,IACpC,IAACA,GAA8B,IAAnBA,EAAQhoC,SAAiB05B,QAAc,CAAC,EAEpD,IACF,MAAMnnB,QAAiB+oB,MAAM,GAAG5jB,WAAiB,CAC/CtQ,OAAQ,OACRE,QAAS,CACP,eAAgB,mBAChBi0B,cAAiB,UAAU7B,KAE7B7gB,KAAM0T,KAAKiF,UAAU,CAAEwW,cAGrB,IAACz1B,EAASipB,GACN,UAAI3b,MAAM,8BAGZ,MAAAqa,QAAiB3nB,EAASkpB,OAUzB,OARP6L,GAAqBrH,IACb,MAAA4H,EAAW,IAAIN,IAAItH,GAIlB,OAHArwB,OAAAq4B,QAAQ/N,GAAU/nB,SAAQ,EAAEgoB,EAAQzoB,MAChCm2B,EAAAzF,IAAIjI,EAAQzoB,EAAI,IAEpBm2B,CAAA,IAGF3N,QACA7oB,GACP,MAAO,CAAC,KAET,CAACqoB,IAEEwO,EAAoBlM,eAAY,KAChC,GAAgC,IAAhCwL,EAAeM,QAAQhqB,KAAY,OAEvC,MAAMkqB,EAAUn4B,MAAMzC,KAAKo6B,EAAeM,SAC1CN,EAAeM,QAAQK,QAEvBJ,EAAeC,EAAO,GACrB,CAACD,IA6BE/kB,EAAQ,CACZolB,YA5BkBpM,eAAa7B,IAC3B,IAACA,EAAe,YAEd,MAAAkO,EAAShB,EAAUiB,IAAInO,GAC7B,OAAIkO,IAGWb,EAAAM,QAAQjY,IAAIsK,GAEvBwN,EAAWG,SACbniC,aAAagiC,EAAWG,SAGfH,EAAAG,QAAUliC,YAAW,KACZsiC,GAAA,GACjB,IAEI,QACN,CAACb,EAAWa,IAWbK,cAToBvM,eAAagM,IAC3B,MAAAQ,EAAcR,EAAQxZ,QAAOnkB,IAAOg9B,EAAUoB,IAAIp+B,KACpDm+B,EAAYxoC,OAAS,GACvB+nC,EAAeS,EAAW,GAE3B,CAACnB,EAAWU,KAQZ7uB,aAAAiuB,GAAgB7M,SAAhB,CAAyBtX,QACvB3J,YACH,EAISqvB,GAAevO,IACpB,MAAAna,EAAUwZ,aAAW2N,IAE3B,IAAKnnB,EACG,UAAIH,MAAM,oDAGX,OAAAG,EAAQooB,YAAYjO,EAAM,ECpHnCwO,EAAS7qC,WAAW4G,SAASkkC,eAAe,SAASC,aAClD/C,EAAMgD,WAAN,CACCzvB,WAACH,IAAAshB,GAAA,CACCnhB,eAACogB,GACC,CAAApgB,SAAAH,MAACkuB,GACC,CAAA/tB,SAAAH,MAACusB,IACCpsB,SAACJ,EAAAC,IAAA6rB,GAAA","names":["m","require$$0","createRoot","hydrateRoot","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","i","length","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","oncanplaythrough","e","_setupCodecs","audioTest","err","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","split","checkSafari","indexOf","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","document","removeEventListener","_emit","addEventListener","_obtainHtml5Audio","pop","testPlay","play","Promise","then","catch","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","handleSuspension","_resumeAfterSuspend","Howl","o","src","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_xhr","method","xhr","headers","withCredentials","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","url","str","exec","toLowerCase","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","apply","fade","from","to","len","min","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","call","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","test","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","_endListener","error","code","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","XMLHttpRequest","open","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","type","createPanner","soundService","constructor","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","API_URL","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","join","leave","alert","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","body","maxTouchPoints","LoadingScreen","message","jsxRuntimeExports","jsx","className","styles","children","jsxs","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","Blob","toString","withNativeArrayBuffer","ArrayBuffer","isView","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","content","result","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","bytes","decode","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","transform","packet","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","size","Emitter","mixin","_callbacks","removeListener","removeAllListeners","cb","callbacks","emit","emitReserved","listeners","hasListeners","nextTick","resolve","setTimeoutFn","globalThisShim","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","randomString","random","TransportError","Error","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","doOpen","doClose","onClose","packets","write","onOpen","onData","onPacket","details","onPause","createUri","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","value","hasCORS","empty","BaseXHR","isSSL","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","extraHeaders","setDisableHeaderCheck","cookieJar","addCookies","requestTimeout","onreadystatechange","parseCookies","getResponseHeader","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","attachEvent","unloadHandler","hasXHR2","newRequest","concat","isReactNative","product","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","b","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","_hasPingExpired","hasExpired","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect_error","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queueSeq","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","factor","jitter","attempts","rand","deviation","floor","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","parsed","loc","href","sameNamespace","forceNew","multiplex","SocketContext","createContext","useSocket","useContext","SocketProvider","token","useAuth","setSocket","useState","setIsConnected","setError","useEffect","newSocket","userData","userId","username","socketEvents","Provider","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","balance","updatedUser","fetchUserData","async","authToken","fetch","Authorization","ok","json","currentToken","localStorage","getItem","removeItem","initializeAuth","logout","useCallback","refreshUserData","login","newToken","initialUserData","setItem","completeUserData","LobbyContext","useLobby","LobbyProvider","gameList","setGameList","handleGameList","games","handleError","contextValue","AuthPage","lazy","__vitePreload","import","__VITE_PRELOAD__","Lobby","GameRoom","ProtectedRoute","Navigate","router","createBrowserRouter","element","Suspense","fallback","openModalCount","BaseModal","title","footer","headerButtons","overlayStyle","props","classList","remove","modalContent","overlay","style","onClick","modal","stopPropagation","display","gap","alignItems","closeButton","createPortal","VirtualKeyboard","isVisible","onEnter","inputType","initialValue","keyboardTitle","useVirtualKeyboardContext","currentLayout","setCurrentLayout","tempInput","setTempInput","lowercase","uppercase","numbers","handleKeyPress","prev","getKeyDisplayText","getKeyClass","handleKeyDown","preventDefault","zIndex","readOnly","row","rowIndex","keyIndex","VirtualKeyboardContext","VirtualKeyboardProvider","keyboardState","setIsVisible","currentInput","setCurrentInput","setInputType","setKeyboardTitle","isGamepadActive","setIsGamepadActive","checkGamepadNavigation","contains","observer","MutationObserver","observe","attributes","attributeFilter","showKeyboard","inputElement","blur","hideKeyboard","handleEnter","finalValue","getOwnPropertyDescriptor","HTMLInputElement","set","inputEvent","Event","bubbles","dispatchEvent","changeEvent","enhanceInput","actualInput","querySelector","handleClick","getCurrentInputValue","useVirtualKeyboard","Toast","emoji","color","position","isEmojiReaction","top","borderColor","background","textShadow","Fragment","ToastContext","ToastProvider","toasts","setToasts","toastQueue","setToastQueue","lastToastTime","setLastToastTime","addToast","newToast","removeToast","toast","showSuccess","showError","showWarning","showInfo","showGameEvent","showMoneyEvent","nextToast","handleToast","right","App","RouterProvider","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","selectedTitle","loadPreferences","React","finalPreferences","updatePreference","key2","formattedData","toggleAutoAnte","newValue","toggleMute","updateSelectedTitle","titleString","uploadTwoSecondPotGif","file","formData","FormData","append","text","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","UserDataContext","UserDataProvider","userCache","setUserCache","Map","pendingFetches","useRef","Set","fetchTimer","handleUserDataUpdate","newCache","current","fetchUsersData","userIds","entries","executeBatchFetch","clear","getUserData","cached","get","prefetchUsers","uncachedIds","has","useUserData","ReactDOM","getElementById","render","StrictMode"],"ignoreList":[0,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"sources":["../../node_modules/react-dom/client.js","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/components/common/LoadingScreen.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/contexts/AuthContext.jsx","../../src/contexts/LobbyContext.jsx","../../src/router.jsx","../../src/components/common/BaseModal.jsx","../../src/components/VirtualKeyboard.jsx","../../src/contexts/VirtualKeyboardContext.jsx","../../src/hooks/useVirtualKeyboard.js","../../src/components/Toast.jsx","../../src/contexts/ToastContext.jsx","../../src/App.jsx","../../src/contexts/PreferencesContext.jsx","../../src/contexts/UserDataContext.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 500]; \n      sprites.leave = [500, 1000];\n      sprites.alert = [1500, 1500]; \n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React from 'react';\nimport styles from './LoadingScreen.module.css';\n\n/**\n * A reusable loading screen component\n * @param {Object} props\n * @param {string} props.message - The message to display while loading\n */\nexport const LoadingScreen = ({ message = 'Loading...' }) => {\n  return (\n    <div className={styles.loadingScreen}>\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\nimport { useAuth } from './AuthContext';\n\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\nexport const SocketProvider = ({ children }) => {\n  const { token } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (!token) {\n      if (socket) {\n        socket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n      return;\n    }\n\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      setError(null);\n    });\n    \n    newSocket.on('authenticated', (userData) => {\n      newSocket.auth = {\n        userId: userData.userId,\n        username: userData.username\n      };\n      \n      setIsConnected(true);\n      \n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      setError(err.message || 'Unknown socket error');\n    });\n\n    const socketEvents = [\n      'connect',\n      'authenticated',\n      'disconnect',\n      'connect_error',\n      'error',\n      'transport'\n    ];\n\n    return () => {\n      if (newSocket) {\n        socketEvents.forEach(event => newSocket.off(event));\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n\n  }, [token]);\n\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdated', (data) => { \n        console.log('[AuthContext] Received balanceUpdated event:', data); \n        if (data && typeof data.balance === 'number') {\n          console.log(`[AuthContext] Updating user balance from ${user?.balance} to ${data.balance}`); \n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state\n          setUser(updatedUser);\n        } else {\n          console.warn('[AuthContext] Received invalid balance data:', data);\n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdated');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async (authToken) => {\n    try {\n      // Use the passed token directly\n      if (!authToken) {\n        return null;\n      }\n\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${authToken}`, // Use authToken\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Single Effect for Initial Authentication Check\n  useEffect(() => {\n    const initializeAuth = async () => {\n      let currentToken = null;\n      try {\n        currentToken = localStorage.getItem('token');\n        \n        if (currentToken) {\n          setToken(currentToken); \n        }\n      } catch (error) {\n        console.error('[Auth] Error reading token from localStorage:', error);\n        localStorage.removeItem('token'); // Clear potentially corrupted token\n      }\n\n      // Now, decide whether to fetch user data based on the token found\n      if (currentToken) {\n        try {\n          const userData = await fetchUserData(currentToken); \n          if (userData) {\n            setUser(userData); \n          } else {\n            // Fetch failed or returned no data for a valid token\n            console.error('[Auth] Token valid but failed to fetch user data. Logging out.');\n            setUser(null);\n            setToken(null);\n            localStorage.removeItem('token');\n          }\n        } catch (error) {\n          console.error('[Auth] Error during user data fetch. Logging out.', error);\n          setUser(null);\n          setToken(null);\n          localStorage.removeItem('token');\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        setUser(null);\n        setToken(null);\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []); // Empty dependency array ensures it runs only once on mount\n\n  const login = async (userData, newToken) => {\n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      const completeUserData = await fetchUserData(newToken);\n      if (completeUserData) {\n        setUser(completeUserData);\n      }\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = useCallback(() => {\n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage\n    localStorage.removeItem('token');\n  }, []); // Empty dependency array means this function never changes\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = useCallback(async () => {\n    try {\n      // fetchUserData depends on the 'token' state variable\n      const userData = await fetchUserData(token);\n      if (userData) {\n        setUser(userData);\n      } else {\n        console.error('[Auth] Failed to refresh user data. Logging out.');\n        // logout is now stable thanks to useCallback above\n        logout();\n      }\n    } catch (error) { \n      console.error('[Auth] Error during manual refresh. Logging out.', error);\n      logout();\n    }\n  // Add dependencies: token and logout\n  }, [token, logout]);\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {/* {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )} */}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\n\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\nexport const LobbyProvider = ({ children }) => {\n  const { socket, isConnected } = useSocket();\n  \n  const [gameList, setGameList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    \n    const handleGameList = (games) => {\n      setGameList(games);\n      setLoading(false);\n    };\n    \n    const handleError = (err) => {\n      console.error('[LobbyContext] Socket error:', err.message || err);\n      setError(err.message || 'An error occurred');\n      setLoading(false);\n    };\n    \n    socket.on('gameList', handleGameList);\n    socket.on('error', handleError);\n    \n    socket.emit('getGameList');\n    \n    return () => {\n      socket.off('gameList', handleGameList);\n      socket.off('error', handleError);\n    };\n  }, [socket, isConnected]);\n  \n  const contextValue = {\n    gameList,\n    loading,\n    error,\n  };\n  \n  return (\n    <LobbyContext.Provider value={contextValue}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import { lazy, Suspense } from 'react';\nimport { createBrowserRouter, Navigate } from 'react-router-dom';\nimport { LoadingScreen } from './components/common/LoadingScreen';\nimport { useAuth } from './contexts/AuthContext';\nimport { LobbyProvider } from './contexts/LobbyContext';\n\n// Lazy load routes for code splitting\nconst AuthPage = lazy(() => import('./components/auth/AuthPage'));\nconst Lobby = lazy(() => import('./components/Lobby'));\nconst GameRoom = lazy(() => import('./components/GameRoom'));\n\n// Auth protection wrapper component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingScreen message=\"Checking authentication...\" />;\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n  \n  return children;\n};\n\n// Define the router configuration\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: (\n      <ProtectedRoute>\n        <LobbyProvider>\n          <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n            <Lobby />\n          </Suspense>\n        </LobbyProvider>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '/auth',\n    element: (\n      <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n        <AuthPage />\n      </Suspense>\n    ),\n  },\n  {\n    path: '/:gameId',\n    element: (\n      <ProtectedRoute>\n        <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n          <GameRoom />\n        </Suspense>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"/\" replace />,\n  },\n]);\n","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './BaseModal.module.css';\n\n// Track number of open modals globally\nlet openModalCount = 0;\n\n// BaseModal: Shared modal structure for all app modals\nexport default function BaseModal({ title, onClose, children, footer, headerButtons, className = '', overlayStyle, ...props }) {\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (++openModalCount === 1) document.body.classList.add('modal-open');\n    return () => { if (--openModalCount === 0) document.body.classList.remove('modal-open'); };\n  }, []);\n  \n  const modalContent = (\n    <div className={styles.overlay} style={overlayStyle} onClick={onClose}>\n      <div\n        className={`${styles.modal} ${className}`}\n        onClick={e => e.stopPropagation()}\n        {...props}\n      >\n        {title && (\n          <div className={styles.header}>\n            <h2>{title}</h2>\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              {headerButtons}\n              <button\n                className={styles.closeButton}\n                onClick={onClose}\n                aria-label=\"Close\"\n                type=\"button\"\n                data-gamepad-focusable=\"true\"\n              >\n                ×\n              </button>\n            </div>\n          </div>\n        )}\n        <div className={styles.content}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>\n  );\n\n  // Render modal using portal to document.body to avoid transform context issues\n  return createPortal(modalContent, document.body);\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport BaseModal from './common/BaseModal';\nimport { useVirtualKeyboardContext } from '../contexts/VirtualKeyboardContext';\nimport styles from './VirtualKeyboard.module.css';\n\nconst VirtualKeyboard = ({ \n  isVisible, \n  onClose, \n  onEnter,\n  inputType = 'text',\n  initialValue = ''\n}) => {\n  const { keyboardTitle } = useVirtualKeyboardContext();\n  const [currentLayout, setCurrentLayout] = useState('lowercase');\n  const [tempInput, setTempInput] = useState('');\n\n  // Initialize temp input with current value when keyboard opens\n  useEffect(() => {\n    if (isVisible) {\n      // For number inputs, don't use initial value if it's \"0\"\n      if (inputType === 'number') {\n        setTempInput(initialValue && initialValue !== '0' ? initialValue : '');\n      } else {\n        setTempInput(initialValue || '');\n      }\n    } else {\n      setTempInput('');\n    }\n  }, [isVisible, initialValue, inputType]);\n  \n  // Define keyboard layouts\n  const layouts = {\n    lowercase: [\n      ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],\n      ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],\n      ['shift', 'z', 'x', 'c', 'v', 'b', 'n', 'm', 'backspace'],\n      ['space', 'enter']\n    ],\n    uppercase: [\n      ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n      ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n      ['shift', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'backspace'],\n      ['space', 'enter']\n    ],\n    numbers: [\n      ['1', '2', '3'],\n      ['4', '5', '6'],\n      ['7', '8', '9'],\n      ['0', 'backspace'],\n      ['enter']\n    ]\n  };\n\n  // Use number layout for number inputs\n  const activeLayout = inputType === 'number' ? 'numbers' : currentLayout;\n  const keys = layouts[activeLayout];\n\n  const handleKeyPress = useCallback((key) => {\n    switch (key) {\n      case 'shift':\n        setCurrentLayout(prev => prev === 'lowercase' ? 'uppercase' : 'lowercase');\n        break;\n      case 'backspace':\n        setTempInput(prev => prev.slice(0, -1));\n        break;\n      case 'enter':\n        onEnter?.(tempInput);\n        break;\n      case 'space':\n        setTempInput(prev => prev + ' ');\n        break;\n      default:\n        setTempInput(prev => prev + key);\n        break;\n    }\n  }, [onEnter, tempInput]);\n\n  const getKeyDisplayText = (key) => {\n    switch (key) {\n      case 'shift':\n        return currentLayout === 'lowercase' ? '⇧' : '⇧';\n      case 'backspace':\n        return '⌫';\n      case 'space':\n        return 'Space';\n      case 'enter':\n        return '↵';\n      default:\n        return key;\n    }\n  };\n\n  const getKeyClass = (key) => {\n    let className = styles.key;\n    \n    if (['shift', 'backspace', 'space', 'enter'].includes(key)) {\n      className += ` ${styles.specialKey}`;\n    }\n    \n    if (key === 'space') {\n      className += ` ${styles.spaceKey}`;\n    }\n    \n    if (key === 'shift' && currentLayout === 'uppercase') {\n      className += ` ${styles.activeShift}`;\n    }\n    \n    return className;\n  };\n\n  // Handle ESC key to close keyboard (BaseModal handles body scroll)\n  useEffect(() => {\n    if (isVisible) {\n      const handleKeyDown = (e) => {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          onClose?.();\n        }\n      };\n      \n      document.addEventListener('keydown', handleKeyDown);\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [isVisible, onClose]);\n\n  if (!isVisible) return null;\n\n  return (\n    <BaseModal\n      title={keyboardTitle || (inputType === 'number' ? 'Number Pad' : 'Virtual Keyboard')}\n      onClose={onClose}\n      className={styles.keyboardModal}\n      overlayStyle={{ zIndex: 1300 }}\n    >\n      <div className={styles.inputDisplay}>\n        <input\n          type={inputType === 'password' ? 'password' : 'text'}\n          value={tempInput}\n          className={styles.tempInput}\n          readOnly\n          placeholder=\"Type below...\"\n        />\n      </div>\n      <div className={styles.keyboardGrid}>\n        {keys.map((row, rowIndex) => (\n          <div key={rowIndex} className={styles.keyRow}>\n            {row.map((key, keyIndex) => (\n              <button\n                key={`${rowIndex}-${keyIndex}`}\n                className={getKeyClass(key)}\n                onClick={() => handleKeyPress(key)}\n                data-gamepad-focusable=\"true\"\n                aria-label={key === 'backspace' ? 'Backspace' : \n                           key === 'enter' ? 'Enter' : \n                           key === 'space' ? 'Space' : \n                           key === 'shift' ? 'Shift' : key}\n              >\n                {getKeyDisplayText(key)}\n              </button>\n            ))}\n          </div>\n        ))}\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default VirtualKeyboard;","import React, { createContext, useContext } from 'react';\nimport { useVirtualKeyboard } from '../hooks/useVirtualKeyboard';\nimport VirtualKeyboard from '../components/VirtualKeyboard';\n\nconst VirtualKeyboardContext = createContext();\n\nexport const useVirtualKeyboardContext = () => {\n  const context = useContext(VirtualKeyboardContext);\n  if (!context) {\n    throw new Error('useVirtualKeyboardContext must be used within a VirtualKeyboardProvider');\n  }\n  return context;\n};\n\nexport const VirtualKeyboardProvider = ({ children }) => {\n  const keyboardState = useVirtualKeyboard();\n  const { isVisible, inputType, hideKeyboard, handleEnter, getCurrentInputValue } = keyboardState;\n\n  return (\n    <VirtualKeyboardContext.Provider value={keyboardState}>\n      {children}\n      {isVisible && (\n        <VirtualKeyboard\n          isVisible={isVisible}\n          inputType={inputType}\n          initialValue={getCurrentInputValue()}\n          onClose={hideKeyboard}\n          onEnter={handleEnter}\n        />\n      )}\n    </VirtualKeyboardContext.Provider>\n  );\n};","import { useState, useCallback, useEffect } from 'react';\n\n/**\n * Hook to manage virtual keyboard state and integration with input elements\n * Automatically detects gamepad usage and shows virtual keyboard for controller users\n */\nexport const useVirtualKeyboard = () => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [currentInput, setCurrentInput] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const [keyboardTitle, setKeyboardTitle] = useState('');\n  const [isGamepadActive, setIsGamepadActive] = useState(false);\n\n  // Detect if gamepad navigation is active (integrate with existing system)\n  useEffect(() => {\n    const checkGamepadNavigation = () => {\n      const connected = document.body.classList.contains('gamepad-navigation-active');\n      setIsGamepadActive(connected);\n    };\n    \n    // Check initially\n    checkGamepadNavigation();\n    \n    // Create observer to watch for gamepad navigation class changes\n    const observer = new MutationObserver(checkGamepadNavigation);\n    observer.observe(document.body, {\n      attributes: true,\n      attributeFilter: ['class']\n    });\n    \n    return () => observer.disconnect();\n  }, []);\n\n  const showKeyboard = useCallback((inputElement, type = 'text', title = '') => {\n    if (!inputElement) return;\n    \n    setCurrentInput(inputElement);\n    setInputType(type);\n    setKeyboardTitle(title);\n    setIsVisible(true);\n    \n    // Blur the input to prevent mobile keyboard from appearing\n    inputElement.blur();\n  }, []);\n\n  const hideKeyboard = useCallback(() => {\n    setIsVisible(false);\n    setCurrentInput(null);\n    setInputType('text');\n    setKeyboardTitle('');\n  }, []);\n\n\n  const handleEnter = useCallback((finalValue) => {\n    if (!currentInput) return;\n    \n    // For React/MUI compatibility, we need to set the value and trigger events in a specific way\n    const nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(currentInput, finalValue || '');\n    \n    // Create and dispatch input event that React will recognize\n    const inputEvent = new Event('input', { bubbles: true });\n    currentInput.dispatchEvent(inputEvent);\n    \n    // Also dispatch change event\n    const changeEvent = new Event('change', { bubbles: true });\n    currentInput.dispatchEvent(changeEvent);\n    \n    // Just close the keyboard - don't submit forms or trigger enter behavior\n    hideKeyboard();\n  }, [currentInput, hideKeyboard]);\n\n  // Enhanced input wrapper that automatically shows keyboard for gamepad users\n  const enhanceInput = useCallback((inputElement, type = 'text', title = '') => {\n    if (!inputElement) return;\n    \n    // For Material-UI TextField, find the actual input element\n    let actualInput = inputElement;\n    if (inputElement.querySelector && inputElement.querySelector('input')) {\n      actualInput = inputElement.querySelector('input');\n    }\n    \n    const handleClick = (e) => {\n      // Show virtual keyboard on click if gamepad is connected\n      // AND if the gamepad navigation is currently active (showing focus indicators)\n      // This prevents autoFocus from opening the keyboard\n      if (isGamepadActive && document.body.classList.contains('gamepad-navigation-active')) {\n        e.preventDefault();\n        showKeyboard(actualInput, type, title);\n      }\n    };\n    \n    // Add event listeners to the actual input element\n    actualInput.addEventListener('click', handleClick);\n    \n    // Return cleanup function\n    return () => {\n      actualInput.removeEventListener('click', handleClick);\n    };\n  }, [isGamepadActive, showKeyboard]);\n\n  // Get current input value for initializing the virtual keyboard\n  const getCurrentInputValue = useCallback(() => {\n    return currentInput?.value || '';\n  }, [currentInput]);\n\n  return {\n    isVisible,\n    inputType,\n    keyboardTitle,\n    currentInput,\n    isGamepadActive,\n    showKeyboard,\n    hideKeyboard,\n    handleEnter,\n    enhanceInput,\n    getCurrentInputValue\n  };\n};","import React, { useEffect, useState } from 'react';\nimport styles from './styles/Toast.module.css';\n\nconst Toast = ({ \n  title, \n  message, \n  emoji = 'ℹ', \n  color = '#3498db', \n  duration = 4000, \n  onClose, \n  position \n}) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n        // Wait for fade animation to complete before removing\n        setTimeout(onClose, 300);\n      }, duration);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [duration, onClose]);\n\n  // Determine if this is an emoji reaction (no title and emoji is not default)\n  const isEmojiReaction = !title && emoji !== 'ℹ';\n\n  return (\n    <div \n      className={`${styles.toast} ${isEmojiReaction && isVisible ? styles.emojiReaction : ''} ${!isVisible ? styles.slideOut : ''}`}\n      style={{ \n        top: '20px', \n        zIndex: 10000 + position,\n        borderColor: color,\n        background: `linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)`\n      }}\n    >\n      <div \n        className={styles.iconWrapper}\n      >\n        <span \n          className={`${styles.icon} ${isEmojiReaction ? styles.emojiIcon : ''}`} \n          style={{ \n            color: color,\n            textShadow: isEmojiReaction \n              ? `0 0 20px ${color}, 0 0 40px ${color}60` \n              : `0 0 8px ${color}80`\n          }}\n        >\n          {emoji}\n        </span>\n      </div>\n      <div className={styles.content}>\n        {title && <div className={styles.title}>{title}</div>}\n        <div className={`${styles.message} ${isEmojiReaction ? styles.emojiMessage : ''}`}>\n          {isEmojiReaction ? (\n            <>\n              <span className={styles.playerName}>{message}</span>\n              <span className={styles.reactionText}>reacted!</span>\n            </>\n          ) : (\n            message\n          )}\n        </div>\n      </div>\n      <button \n        className={styles.closeButton} \n        onClick={onClose}\n        aria-label=\"Close notification\"\n      >\n        ×\n      </button>\n    </div>\n  );\n};\n\nexport default Toast;","import React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { useSocket } from './SocketContext';\nimport Toast from '../components/Toast';\n\nconst ToastContext = createContext();\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, setToasts] = useState([]);\n  const [toastQueue, setToastQueue] = useState([]);\n  const [lastToastTime, setLastToastTime] = useState(0);\n  const { socket } = useSocket();\n\n  const addToast = useCallback((title, message, emoji = 'ℹ', color = '#3498db', duration = 4000) => {\n    const id = Date.now() + Math.random();\n    const newToast = { id, title, message, emoji, color, duration };\n    \n    const now = Date.now();\n    const timeSinceLastToast = now - lastToastTime;\n    \n    if (timeSinceLastToast >= 600) {\n      // Show immediately if enough time has passed\n      setToasts(prev => [...prev, newToast]);\n      setLastToastTime(now);\n    } else {\n      // Queue the toast for later\n      setToastQueue(prev => [...prev, newToast]);\n    }\n    \n    return id;\n  }, [lastToastTime]);\n\n  const removeToast = useCallback((id) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n  }, []);\n\n  // Convenience methods for common notification patterns\n  const showSuccess = useCallback((title, message, duration) => {\n    return addToast(title, message, '✓', '#27ae60', duration);\n  }, [addToast]);\n\n  const showError = useCallback((title, message, duration) => {\n    return addToast(title, message, '✕', '#e74c3c', duration);\n  }, [addToast]);\n\n  const showWarning = useCallback((title, message, duration) => {\n    return addToast(title, message, '⚠', '#f39c12', duration);\n  }, [addToast]);\n\n  const showInfo = useCallback((title, message, duration) => {\n    return addToast(title, message, 'ℹ', '#3498db', duration);\n  }, [addToast]);\n\n  const showGameEvent = useCallback((title, message, duration) => {\n    return addToast(title, message, '🎮', '#9b59b6', duration);\n  }, [addToast]);\n\n  const showMoneyEvent = useCallback((title, message, duration) => {\n    return addToast(title, message, '💰', '#16a085', duration);\n  }, [addToast]);\n\n  // Process queued toasts with debouncing\n  useEffect(() => {\n    if (toastQueue.length === 0) return;\n\n    const timer = setTimeout(() => {\n      const nextToast = toastQueue[0];\n      setToastQueue(prev => prev.slice(1));\n      setToasts(prev => [...prev, nextToast]);\n      setLastToastTime(Date.now());\n    }, 600);\n\n    return () => clearTimeout(timer);\n  }, [toastQueue, toasts]); // Trigger when queue changes or when toasts change\n\n  // Socket event listeners for toast notifications\n  useEffect(() => {\n    if (!socket) return;\n\n    // Generic toast handler\n    const handleToast = (data) => {\n      addToast(data.title || '', data.message, data.emoji || 'ℹ', data.color || '#3498db', data.duration);\n    };\n\n    // Register socket event listener\n    socket.on('toast', handleToast);\n\n    // Cleanup\n    return () => {\n      socket.off('toast', handleToast);\n    };\n  }, [socket, addToast]);\n\n  const value = {\n    addToast,\n    removeToast,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo,\n    showGameEvent,\n    showMoneyEvent,\n    toasts\n  };\n\n  return (\n    <ToastContext.Provider value={value}>\n      {children}\n      <div className=\"toast-container\" style={{ position: 'fixed', top: 0, right: 0, zIndex: 10000 }}>\n        {toasts.map((toast, index) => (\n          <Toast\n            key={toast.id}\n            title={toast.title}\n            message={toast.message}\n            emoji={toast.emoji}\n            color={toast.color}\n            duration={toast.duration}\n            position={index}\n            onClose={() => removeToast(toast.id)}\n          />\n        ))}\n      </div>\n    </ToastContext.Provider>\n  );\n};","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport soundService from './services/SoundService';\nimport { router } from './router';\nimport { VirtualKeyboardProvider } from './contexts/VirtualKeyboardContext';\nimport { ToastProvider } from './contexts/ToastContext';\nimport './styles/global.css';\n\nfunction App() {\n  // Initialize Sound Service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n\n  return (\n    <ToastProvider>\n      <VirtualKeyboardProvider>\n        <RouterProvider router={router} />\n      </VirtualKeyboardProvider>\n    </ToastProvider>\n  );\n}\n\nexport default App;\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null,\n    selectedTitle: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Update selected title (expects title string, not ID)\n  const updateSelectedTitle = async (titleString) => {\n    return await updatePreference('selectedTitle', titleString);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        updateSelectedTitle,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import React, { createContext, useContext, useState, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext';\nimport { useAuth } from './AuthContext';\nimport { API_URL } from '../config';\n\nconst UserDataContext = createContext(null);\n\nexport const UserDataProvider = ({ children }) => {\n  const { socket } = useSocket();\n  const { token } = useAuth();\n  const [userCache, setUserCache] = useState(new Map());\n  const pendingFetches = useRef(new Set());\n  const fetchTimer = useRef(null);\n\n  // Subscribe to user data updates via socket\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleUserDataUpdate = ({ userId, data }) => {\n      console.log('[UserDataContext] Received user data update:', userId, data);\n      setUserCache(prev => {\n        const newCache = new Map(prev);\n        newCache.set(userId, data);\n        return newCache;\n      });\n    };\n\n    socket.on('userDataUpdated', handleUserDataUpdate);\n    return () => {\n      socket.off('userDataUpdated', handleUserDataUpdate);\n    };\n  }, [socket]);\n\n  // Clean up timer on unmount\n  useEffect(() => {\n    return () => {\n      if (fetchTimer.current) {\n        clearTimeout(fetchTimer.current);\n      }\n    };\n  }, []);\n\n  const fetchUsersData = useCallback(async (userIds) => {\n    if (!userIds || userIds.length === 0 || !token) return {};\n\n    try {\n      const response = await fetch(`${API_URL}/users`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ userIds })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch users data');\n      }\n      \n      const userData = await response.json();\n      \n      setUserCache(prev => {\n        const newCache = new Map(prev);\n        Object.entries(userData).forEach(([userId, data]) => {\n          newCache.set(userId, data);\n        });\n        return newCache;\n      });\n      \n      return userData;\n    } catch (error) {\n      return {};\n    }\n  }, [token]);\n\n  const executeBatchFetch = useCallback(() => {\n    if (pendingFetches.current.size === 0) return;\n    \n    const userIds = Array.from(pendingFetches.current);\n    pendingFetches.current.clear();\n    \n    fetchUsersData(userIds);\n  }, [fetchUsersData]);\n\n  const getUserData = useCallback((userId) => {\n    if (!userId) return null;\n    \n    const cached = userCache.get(userId);\n    if (cached) return cached;\n    \n    // Add to pending fetches and debounce\n    pendingFetches.current.add(userId);\n    \n    if (fetchTimer.current) {\n      clearTimeout(fetchTimer.current);\n    }\n    \n    fetchTimer.current = setTimeout(() => {\n      executeBatchFetch();\n    }, 10);\n    \n    return null;\n  }, [userCache, executeBatchFetch]);\n\n  const prefetchUsers = useCallback((userIds) => {\n    const uncachedIds = userIds.filter(id => !userCache.has(id));\n    if (uncachedIds.length > 0) {\n      fetchUsersData(uncachedIds);\n    }\n  }, [userCache, fetchUsersData]);\n\n  const value = {\n    getUserData,\n    prefetchUsers\n  };\n\n  return (\n    <UserDataContext.Provider value={value}>\n      {children}\n    </UserDataContext.Provider>\n  );\n};\n\nexport const useUserData = (userId) => {\n  const context = useContext(UserDataContext);\n  \n  if (!context) {\n    throw new Error('useUserData must be used within UserDataProvider');\n  }\n  \n  return context.getUserData(userId);\n};\n\nexport default UserDataContext;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\nimport './styles/global.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\nimport { UserDataProvider } from './contexts/UserDataContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <AuthProvider>\n      <SocketProvider>\n        <UserDataProvider>\n          <PreferencesProvider>\n            <App />\n          </PreferencesProvider>\n        </UserDataProvider>\n      </SocketProvider>\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"file":"assets/index-eaGedByF.js"}