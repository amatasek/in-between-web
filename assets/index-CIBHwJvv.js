import{j as e,r as t,a,e as s,g as n}from"./react-B_t5Ggzd.js";import{F as r,G as i,H as o,I as l,N as c,J as d}from"./vendor-BsjDjoCY.js";import{l as u}from"./socket-CT_upO96.js";import{T as m,b as h,P as p,d as _,A as g,B as x,e as f,I as j}from"./mui-Drdjg9G8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const v=new class{constructor(){this.sounds={},this.muted=!1,this.initialized=!1,this.categories=["ui"],this.lastPlayedTime={},this.debounceTime=500,this.audioUnlocked=!1,this.API_URL="https://api.in-between.live","undefined"!=typeof window&&setTimeout((()=>{this.initialize(),this._setupMobileAudioUnlock()}),0)}initialize(){this.initialized||(this.loadCategory("ui"),this.initialized=!0)}loadCategory(e){if(this.sounds[e])return;const t={};"ui"===e&&(t.join=[0,500],t.leave=[500,1e3],t.alert=[1500,1500]),this.sounds[e]=new r.Howl({src:[`${this.API_URL}/assets/audio/${e}-sounds.mp3`,`${this.API_URL}/assets/audio/${e}-sounds.webm`],sprite:t,preload:!0,html5:this._isMobileDevice(),format:["mp3","webm"],pool:10})}play(e,t=1){if(this.muted)return;let a,s;if(this.initialized||this.initialize(),e.includes(".")?[a,s]=e.split("."):(a="ui",s=e),!this.sounds[a])return void this.loadCategory(a);const n=`${a}.${s}`,r=Date.now();return r-(this.lastPlayedTime[n]||0)<this.debounceTime?void 0:(this.lastPlayedTime[n]=r,this.sounds[a].volume(t),this.sounds[a].play(s))}setMuted(e){this.muted=e,Object.values(this.sounds).forEach((t=>{t&&t.mute&&t.mute(e)}))}syncWithPreferences(e){e&&void 0!==e.muted&&this.setMuted(e.muted)}_setupMobileAudioUnlock(){if("undefined"==typeof window||!this._isMobileDevice())return;const e=()=>{if(this.audioUnlocked)return;const t=new Audio;t.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////",t.load(),t.play().then((()=>{this.audioUnlocked=!0,document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("click",e)})).catch((e=>{}))};document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)}_isMobileDevice(){return"undefined"!=typeof navigator&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)}},y="_loadingScreen_16l5s_1",b="_loadingContainer_16l5s_10",N="_spinner_16l5s_21",w="_message_16l5s_31",C=({message:t="Loading..."})=>e.jsx("div",{className:y,children:e.jsxs("div",{className:b,children:[e.jsx("div",{className:N}),e.jsx("p",{className:w,children:t})]})}),k="https://api.in-between.live",A=t.createContext(),I=()=>t.useContext(A),S=({children:a})=>{const{token:s}=E(),[n,r]=t.useState(null),[i,o]=t.useState(!1),[l,c]=t.useState(null);t.useEffect((()=>{if("undefined"==typeof window)return;if(!s)return void(n&&(n.disconnect(),r(null),o(!1),c(null)));const e=u("https://api.in-between.live",{auth:{token:s},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,transports:["websocket","polling"],timeout:1e4});r(e),e.on("connect",(()=>{c(null)})),e.on("authenticated",(t=>{e.auth={userId:t.userId,username:t.username},o(!0),e.emit("getGameList")})),e.on("connect_error",(e=>{c("Failed to connect to game server: "+e.message),o(!1)})),e.on("disconnect",(()=>{o(!1)})),e.on("error",(e=>{c(e.message||"Unknown socket error")}));const t=["connect","authenticated","disconnect","connect_error","error","transport"];return()=>{e&&(t.forEach((t=>e.off(t))),e.disconnect(),r(null),o(!1),c(null))}}),[s]);const d={socket:n,isConnected:i,error:l,setError:c};return e.jsx(A.Provider,{value:d,children:a})},T={coinIcon:"_coinIcon_1htv9_1",small:"_small_1htv9_15",medium:"_medium_1htv9_19",large:"_large_1htv9_23"},P=({size:a="small",className:s=""})=>{const n={small:15,medium:19,large:24},r=n[a]||n.small,i=t.useMemo((()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`),[]),o=t.useMemo((()=>`goldShine-${Math.random().toString(36).substr(2,9)}`),[]);return e.jsx("span",{className:`${T.coinIcon} ${T[a]} ${s}`,children:e.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:i,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:o,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${i})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${o})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},$=t.createContext(null),B=({children:a})=>{const[s,n]=t.useState(null),[r,i]=t.useState(null),[o,l]=t.useState(!0),[c,d]=t.useState(!1),u=I(),m=u?.socket;t.useEffect((()=>{if(m&&s)return m.on("balanceUpdated",(e=>{if(e&&"number"==typeof e.balance){const t={...s,balance:e.balance};n(t)}})),()=>{m.off("balanceUpdated")}}),[m,s]);const h=async e=>{try{if(!e)return null;const t=await fetch(`${k}/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch user data");return(await t.json()).user}catch(t){return null}};t.useEffect((()=>{(async()=>{let e=null;try{e=localStorage.getItem("token"),e&&i(e)}catch(t){localStorage.removeItem("token")}if(e)try{const t=await h(e);t?n(t):(n(null),i(null),localStorage.removeItem("token"))}catch(t){n(null),i(null),localStorage.removeItem("token")}finally{l(!1)}else n(null),i(null),l(!1)})()}),[]);const p=t.useCallback((()=>{n(null),i(null),d(!1),localStorage.removeItem("token")}),[]),_=t.useCallback((async()=>{try{const e=await h(r);e?n(e):p()}catch(e){p()}}),[r,p]);return o?null:e.jsx($.Provider,{value:{user:s,token:r,login:async(e,t)=>{if(!e||!e.username||!e.id||"number"!=typeof e.balance)throw new Error("Invalid user data provided");if(!t)throw new Error("No authentication token provided");try{const a={username:e.username,id:e.id,balance:e.balance};n(a),i(t),localStorage.setItem("token",t),d(!0);const s=await h(t);s&&n(s)}catch(a){throw a}},logout:p,refreshUserData:_,loading:o},children:a})},E=()=>{const e=t.useContext($);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},L=t.createContext(),M=({children:a})=>{const{socket:s,isConnected:n}=I(),[r,i]=t.useState([]),[o,l]=t.useState(!0),[c,d]=t.useState(null);t.useEffect((()=>{if(!s||!n)return;const e=e=>{i(e),l(!1)},t=e=>{d(e.message||"An error occurred"),l(!1)};return s.on("gameList",e),s.on("error",t),s.emit("getGameList"),()=>{s.off("gameList",e),s.off("error",t)}}),[s,n]);const u={gameList:r,loading:o,error:c};return e.jsx(L.Provider,{value:u,children:a})},D={overlay:"_overlay_j8a1u_1",modal:"_modal_j8a1u_17",header:"_header_j8a1u_38",closeButton:"_closeButton_j8a1u_55",sectionHeader:"_sectionHeader_j8a1u_74",settingItem:"_settingItem_j8a1u_90",settingControls:"_settingControls_j8a1u_106",primaryButton:"_primaryButton_j8a1u_113",settingDescription:"_settingDescription_j8a1u_135",textInput:"_textInput_j8a1u_157",inputError:"_inputError_j8a1u_175",errorMessage:"_errorMessage_j8a1u_180",content:"_content_j8a1u_190",footer:"_footer_j8a1u_233"},R=(()=>{let e=0;return{increment:()=>++e,decrement:()=>--e,get:()=>e}})();function O({title:s,onClose:n,children:r,footer:i,headerButtons:o,className:l="",overlayStyle:c,...d}){t.useEffect((()=>(1===R.increment()&&document.body.classList.add("modal-open"),()=>{0===R.decrement()&&document.body.classList.remove("modal-open")})),[]);const u=e.jsx("div",{className:D.overlay,style:c,onClick:n,children:e.jsxs("div",{className:`${D.modal} ${l}`,onClick:e=>e.stopPropagation(),...d,children:[s&&e.jsxs("div",{className:D.header,children:[e.jsx("h2",{children:s}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o,e.jsx("button",{className:D.closeButton,onClick:n,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"×"})]})]}),e.jsx("div",{className:D.content,children:r}),i&&e.jsx("div",{className:D.footer,children:i})]})});return a.createPortal(u,document.body)}const F="_keyboardModal_7mp5j_2",U="_inputDisplay_7mp5j_7",z="_tempInput_7mp5j_13",G="_keyboardGrid_7mp5j_31",W="_keyRow_7mp5j_35",q="_key_7mp5j_2",H="_specialKey_7mp5j_77",V="_spaceKey_7mp5j_86",J="_activeShift_7mp5j_91",K=({isVisible:a,onClose:s,onEnter:n,inputType:r="text",initialValue:i=""})=>{const{keyboardTitle:o}=X(),[l,c]=t.useState("lowercase"),[d,u]=t.useState("");t.useEffect((()=>{u(a?"number"===r?i&&"0"!==i?i:"":i||"":"")}),[a,i,r]);const m={lowercase:[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["space","enter"]],uppercase:[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["space","enter"]],numbers:[["1","2","3"],["4","5","6"],["7","8","9"],["0","backspace"],["enter"]]}["number"===r?"numbers":l],h=t.useCallback((e=>{switch(e){case"shift":c((e=>"lowercase"===e?"uppercase":"lowercase"));break;case"backspace":u((e=>e.slice(0,-1)));break;case"enter":n?.(d);break;case"space":u((e=>e+" "));break;default:u((t=>t+e))}}),[n,d]),p=e=>{switch(e){case"shift":return"⇧";case"backspace":return"⌫";case"space":return"Space";case"enter":return"↵";default:return e}},_=e=>{let t=q;return["shift","backspace","space","enter"].includes(e)&&(t+=` ${H}`),"space"===e&&(t+=` ${V}`),"shift"===e&&"uppercase"===l&&(t+=` ${J}`),t};return t.useEffect((()=>{if(a){const e=e=>{"Escape"===e.key&&(e.preventDefault(),s?.())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[a,s]),a?e.jsxs(O,{title:o||("number"===r?"Number Pad":"Virtual Keyboard"),onClose:s,className:F,overlayStyle:{zIndex:1300},children:[e.jsx("div",{className:U,children:e.jsx("input",{type:"password"===r?"password":"text",value:d,className:z,readOnly:!0,placeholder:"Type below..."})}),e.jsx("div",{className:G,children:m.map(((t,a)=>e.jsx("div",{className:W,children:t.map(((t,s)=>e.jsx("button",{className:_(t),onClick:()=>h(t),"data-gamepad-focusable":"true","aria-label":"backspace"===t?"Backspace":"enter"===t?"Enter":"space"===t?"Space":"shift"===t?"Shift":t,children:p(t)},`${a}-${s}`)))},a)))})]}):null},Y=t.createContext(),X=()=>{const e=t.useContext(Y);if(!e)throw new Error("useVirtualKeyboardContext must be used within a VirtualKeyboardProvider");return e},Q=({children:a})=>{const s=(()=>{const[e,a]=t.useState(!1),[s,n]=t.useState(null),[r,i]=t.useState("text"),[o,l]=t.useState(""),[c,d]=t.useState(!1);t.useEffect((()=>{const e=()=>{const e=document.body.classList.contains("gamepad-navigation-active");d(e)};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()}),[]);const u=t.useCallback(((e,t="text",s="")=>{e&&(n(e),i(t),l(s),a(!0),e.blur())}),[]),m=t.useCallback((()=>{a(!1),n(null),i("text"),l("")}),[]),h=t.useCallback((e=>{if(!s)return;Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(s,e||"");const t=new Event("input",{bubbles:!0});s.dispatchEvent(t);const a=new Event("change",{bubbles:!0});s.dispatchEvent(a),m()}),[s,m]),p=t.useCallback(((e,t="text",a="")=>{if(!e)return;let s=e;e.querySelector&&e.querySelector("input")&&(s=e.querySelector("input"));const n=e=>{c&&document.body.classList.contains("gamepad-navigation-active")&&(e.preventDefault(),u(s,t,a))};return s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}}),[c,u]),_=t.useCallback((()=>s?.value||""),[s]);return{isVisible:e,inputType:r,keyboardTitle:o,currentInput:s,isGamepadActive:c,showKeyboard:u,hideKeyboard:m,handleEnter:h,enhanceInput:p,getCurrentInputValue:_}})(),{isVisible:n,inputType:r,hideKeyboard:i,handleEnter:o,getCurrentInputValue:l}=s;return e.jsxs(Y.Provider,{value:s,children:[a,n&&e.jsx(K,{isVisible:n,inputType:r,initialValue:l(),onClose:i,onEnter:o})]})},Z=({type:a="text",title:s="",inputProps:n={},...r})=>{const i=t.useRef(null),{enhanceInput:o}=X();return t.useEffect((()=>{if(i.current){return o(i.current,a,s)}}),[o,a,s]),e.jsx(m,{ref:i,type:a,inputProps:{...n,"data-gamepad-focusable":"true"},...r})},ee="_authForm_121ec_1",te="_submitButton_121ec_99",ae=({onSubmit:a,mode:s})=>{const[n,r]=t.useState(""),[i,o]=t.useState(""),[l,c]=t.useState("");h("(max-width:600px)");const d=h("(max-width:400px)");return e.jsxs(p,{className:ee,elevation:0,children:[e.jsx(_,{variant:"h5",component:"h2",gutterBottom:!0,sx:{color:"var(--info)",fontWeight:600},children:"login"===s?"Welcome Back":"Create Account"}),l&&e.jsx(g,{severity:"error",sx:{mb:2,backgroundColor:"rgba(231, 76, 60, 0.2)",color:"var(--text-primary)"},children:l}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c("");try{await a(n,i)}catch(t){c(t.message)}},children:[e.jsx(Z,{title:"Enter Username",label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:n,onChange:e=>r(e.target.value),required:!0,size:d?"small":"medium",inputProps:{minLength:3},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--info-light)"},"&:hover fieldset":{borderColor:"var(--info)"},"&.Mui-focused fieldset":{borderColor:"var(--info)"},backgroundColor:"rgba(255, 255, 255, 0.1)"},"& .MuiInputLabel-root":{color:"var(--info-light)",fontSize:d?"0.9rem":"1rem"},"& .MuiOutlinedInput-input":{color:"var(--text-dark)",fontWeight:500,backgroundColor:"rgba(255, 255, 255, 0.85)",padding:d?"12px 14px":"16.5px 14px"},"& .MuiInputLabel-root.Mui-focused":{color:"var(--info)"},marginBottom:d?"0.5rem":"1rem"}}),e.jsx(Z,{title:"Enter Password",label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:i,onChange:e=>o(e.target.value),required:!0,size:d?"small":"medium",inputProps:{minLength:6},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--info-light)"},"&:hover fieldset":{borderColor:"var(--info)"},"&.Mui-focused fieldset":{borderColor:"var(--info)"},backgroundColor:"rgba(255, 255, 255, 0.1)"},"& .MuiInputLabel-root":{color:"var(--info-light)",fontSize:d?"0.9rem":"1rem"},"& .MuiOutlinedInput-input":{color:"var(--text-dark)",fontWeight:500,backgroundColor:"rgba(255, 255, 255, 0.85)",padding:d?"12px 14px":"16.5px 14px"},"& .MuiInputLabel-root.Mui-focused":{color:"var(--info)"},marginBottom:d?"0.5rem":"1rem"}}),e.jsx(x,{type:"submit",variant:"contained",fullWidth:!0,size:"large",className:te,"data-gamepad-focusable":"true",sx:{mt:d?2:3,background:"linear-gradient(to right, var(--info), var(--success))",textTransform:"none",fontWeight:"bold",letterSpacing:"0.5px",padding:d?"10px":"12px",fontSize:d?"0.9rem":"1rem","&:hover":{background:"linear-gradient(to right, var(--info-dark), var(--success-dark))",boxShadow:"var(--shadow-lg)",transform:"translateY(-2px)"}},children:"login"===s?"Sign In":"Create Account"})]})]})},se=(e=!0)=>{const[a,s]=t.useState(null),[n,r]=t.useState([]),[i,o]=t.useState(!1),[l,c]=t.useState(!1),d=t.useRef(0),u=t.useRef({}),m=t.useCallback((()=>{if(!e)return;const t=Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).filter((e=>{const t=e.getBoundingClientRect();if(0===t.width&&0===t.height){const t=e.closest("label")||e.closest('[class*="toggle"]')||e.parentElement;if(!t)return!1;{const e=t.getBoundingClientRect();if(0===e.width||0===e.height)return!1}}const a=document.querySelectorAll('[class*="modal"], [class*="Modal"], [role="dialog"], [class*="overlay"]');if(a.length>0){const t=Array.from(a).filter((e=>{const t=e.className;return t.includes("modal")||t.includes("Modal")||"dialog"===e.getAttribute("role")}));if(t.length>0){const a=t.sort(((e,t)=>{let a=parseInt(window.getComputedStyle(e).zIndex)||0,s=parseInt(window.getComputedStyle(t).zIndex)||0;if(0===a){const t=e.parentElement;t&&t.classList.toString().includes("overlay")&&(a=parseInt(window.getComputedStyle(t).zIndex)||0)}if(0===s){const e=t.parentElement;e&&e.classList.toString().includes("overlay")&&(s=parseInt(window.getComputedStyle(e).zIndex)||0)}return s-a}))[0];return a&&a.contains(e)}}return!0}));r((e=>e.length===t.length&&e.every(((e,a)=>e===t[a]))?e:t))}),[e]),h=t.useCallback((e=>{const t=Date.now();if(t-d.current<150)return;if(d.current=t,!n.length)return;c(!0);const r=document.activeElement;let i=a;r&&"true"===r.getAttribute("data-gamepad-focusable")&&n.includes(r)&&(i=r,s(r));const o=n.findIndex((e=>e===i));if(-1===o||!i){const e=n[0];return s(e),void e.focus()}const l=n[o];if("true"===l?.getAttribute("data-gamepad-scrollable")&&("up"===e||"down"===e)){const t=50,a=l.scrollTop<=0,s=l.scrollTop>=l.scrollHeight-l.clientHeight;if("up"===e&&!a)return void(l.scrollTop=Math.max(0,l.scrollTop-t));if("down"===e&&!s)return void(l.scrollTop=Math.min(l.scrollHeight-l.clientHeight,l.scrollTop+t))}let u=null;if("up"===e||"down"===e){let t=l?.getBoundingClientRect();if(!t)return;if(0===t.width&&0===t.height){const e=l.closest("label"),a=l.closest('[class*="toggle"]')||l.closest('[class*="Toggle"]'),s=e||a||l.parentElement;s&&(t=s.getBoundingClientRect())}const a=t.left+t.width/2,s=n.map(((e,t)=>({el:e,index:t,rect:e.getBoundingClientRect()}))).filter((({el:a,rect:s,index:n})=>n!==o&&("up"===e?s.bottom<=t.top+20:s.top>=t.bottom-20)));if(s.length>0){u=s.map((s=>({...s,horizontalDistance:Math.abs(s.rect.left+s.rect.width/2-a),verticalDistance:"up"===e?t.top-s.rect.bottom:s.rect.top-t.bottom}))).sort(((e,t)=>{const a=e.horizontalDistance-t.horizontalDistance;if(Math.abs(a)>100)return a;const s=e.verticalDistance-t.verticalDistance;return Math.abs(s)>10?s:a}))[0].el}else{const t=n.filter(((e,t)=>t!==o)).map(((e,t)=>({el:e,rect:e.getBoundingClientRect()})));if(t.length>0){const a="up"===e?0:window.innerHeight;u=t.reduce(((e,t)=>Math.abs(t.rect.top-a)<Math.abs(e.rect.top-a)?t:e)).el}else u="up"===e?n[n.length-1]:n[0]}}else{const t=l?.getBoundingClientRect();if(t){const a=t.top+t.height/2,s=Math.max(t.height/2,20),r=n.map(((e,t)=>({el:e,index:t,rect:e.getBoundingClientRect()}))).filter((({rect:e,index:t})=>{const n=e.top+e.height/2;return Math.abs(n-a)<=s})).sort(((e,t)=>e.rect.left-t.rect.left)),i=r.findIndex((({el:e})=>e===l));u=-1!==i&&r.length>1?"left"===e?i>0?r[i-1].el:null:i<r.length-1?r[i+1].el:null:null}else u="left"===e?o>0?n[o-1]:n[n.length-1]:o<n.length-1?n[o+1]:n[0]}u&&(s(u),u.focus())}),[n,a]),p=t.useCallback((()=>{const e="true"===document.activeElement?.getAttribute("data-gamepad-focusable")?document.activeElement:a;e&&(c(!0),e.click())}),[a]);return t.useEffect((()=>{if(!e)return;const t=e=>{if(!(document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName))||"Enter"!==e.key)switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"," "].includes(e.key)&&e.preventDefault(),e.key){case"ArrowUp":h("up");break;case"ArrowDown":h("down");break;case"ArrowLeft":h("left");break;case"ArrowRight":h("right");break;case"Enter":case" ":p()}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[h,p,e]),t.useEffect((()=>{if(!e)return;let t;const a=()=>{const e=navigator.getGamepads();let s=!1;for(let t=0;t<e.length;t++){const a=e[t];if(a&&a.connected){s=!0,u.current[t]||(u.current[t]={});const e=u.current[t],n=a.buttons[12]?.pressed,r=a.buttons[13]?.pressed,i=a.buttons[14]?.pressed,o=a.buttons[15]?.pressed,l=a.buttons[0]?.pressed;n&&!e.up&&h("up"),r&&!e.down&&h("down"),i&&!e.left&&h("left"),o&&!e.right&&h("right"),l&&!e.a&&p(),e.up=n,e.down=r,e.left=i,e.right=o,e.a=l;const c=a.axes[0]||0,d=a.axes[1]||0,m=.3;!e.stickMoved&&(Math.abs(c)>m||Math.abs(d)>m)?(Math.abs(c)>Math.abs(d)?c>m?h("right"):c<-.3&&h("left"):d>m?h("down"):d<-.3&&h("up"),e.stickMoved=!0):Math.abs(c)<=m&&Math.abs(d)<=m&&(e.stickMoved=!1);const _=a.axes[2]||0,g=a.axes[3]||0,x=.2,f=8;if(Math.abs(g)>x){const e=g*f;window.scrollBy(0,e)}if(Math.abs(_)>x){const e=_*f;window.scrollBy(e,0)}}}o(s),t=requestAnimationFrame(a)};return a(),()=>{t&&cancelAnimationFrame(t)}}),[h,p,e]),t.useEffect((()=>{if(!e)return;const t=()=>{c(!1)};return document.addEventListener("mousemove",t),()=>document.removeEventListener("mousemove",t)}),[e]),t.useEffect((()=>(l?document.body.classList.add("gamepad-navigation-active"):document.body.classList.remove("gamepad-navigation-active"),()=>{document.body.classList.remove("gamepad-navigation-active")})),[l]),t.useEffect((()=>{if(n.length>0&&!a){const e=n[0];s(e)}}),[n.length]),t.useEffect((()=>{if(!e)return;const t=e=>{const t=e.target;t&&"true"===t.getAttribute("data-gamepad-focusable")&&(m(),setTimeout((()=>{Array.from(document.querySelectorAll('[data-gamepad-focusable="true"]:not([disabled]), [data-gamepad-scrollable="true"]')).includes(t)&&s(t)}),0))};return document.addEventListener("focus",t,!0),()=>{document.removeEventListener("focus",t,!0)}}),[e,m]),t.useEffect((()=>{if(!e)return;const t=new MutationObserver(m);return t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-gamepad-focusable","disabled"]}),m(),()=>t.disconnect()}),[m,e]),{focusedElement:a,isGamepadConnected:i,showFocusIndicator:l,registerNavigableElements:m}},ne="_authPage_1fizs_1",re="_error_1fizs_40",ie="_formContainer_1fizs_53",oe="_headerContainer_7pggh_1",le="_gameTitle_7pggh_12",ce="_liveTag_7pggh_25",de=()=>e.jsx("div",{className:oe,children:e.jsxs("h1",{className:le,children:["In Between ",e.jsx("span",{className:ce,children:"LIVE"})]})}),ue=()=>{const[a,s]=t.useState("login"),{login:n}=E(),r=i();se(!0);const[o,l]=t.useState(null);return e.jsxs(f,{className:ne,children:[e.jsx(de,{}),e.jsxs(f,{className:ie,children:[o&&e.jsx(_,{className:re,children:o}),e.jsx(ae,{mode:a,onSubmit:async(e,t)=>{if(!e||!t)return void l("Username and password are required");l(null);const s=`${k}/auth/${a}`;try{const a={username:e,password:t},o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});let l;try{l=await o.json()}catch(i){throw new Error("Invalid response from server")}if(!o.ok)throw new Error(l.message||"Authentication failed");if(!l.user?.username||!l.user?.id||!l.token)throw new Error("Invalid server response format");try{n(l.user,l.token),r("/")}catch(i){throw new Error("Failed to initialize user session")}}catch(i){l(i.message||"Failed to connect to server")}}}),e.jsx(f,{textAlign:"center",mt:3,children:e.jsx(x,{color:"primary",onClick:()=>s("login"===a?"register":"login"),"data-gamepad-focusable":"true",sx:{color:"#ecf0f1",textTransform:"none",fontSize:"1rem","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"login"===a?"Don't have an account? Register":"Already have an account? Login"})})]})]})},me="_lobbyContainer_1v9ur_1",he="_gameListContainer_1v9ur_90",pe="_gameListTitle_1v9ur_115",_e="_searchContainer_1v9ur_128",ge="_searchIcon_1v9ur_170",xe="_gameListWrapper_1v9ur_175",fe="_gameListItem_1v9ur_181",je="_userDisconnectedGame_1v9ur_194",ve="_userInGame_1v9ur_201",ye="_gameListInfo_1v9ur_224",be="_gameListId_1v9ur_229",Ne="_disconnectedBadge_1v9ur_238",we="_inGameBadge_1v9ur_250",Ce="_gameListPlayers_1v9ur_262",ke="_joinGameButton_1v9ur_268",Ae="_reconnectButton_1v9ur_279",Ie="_continueButton_1v9ur_290",Se="_emptyGameList_1v9ur_316",Te="_emptyStateIcon_1v9ur_329",Pe="_emptyStateMessage_1v9ur_335",$e="_emptyStateHint_1v9ur_342",Be="_privatePill_1v9ur_348",Ee="_pill_1hv5h_1",Le="_pulse_1hv5h_22",Me="_text_1hv5h_48",De=()=>{const{socket:a,isConnected:s}=I(),[n,r]=t.useState(null);return t.useEffect((()=>{if(!a||!s)return;a.emit("getOnlinePlayerCount",(e=>{r(e)}));const e=e=>r(e);return a.on("onlinePlayerCountUpdate",e),()=>{a.off("onlinePlayerCountUpdate",e)}}),[a,s]),null===n?null:e.jsxs("div",{className:Ee,children:[e.jsx("span",{className:Le}),e.jsxs("span",{className:Me,children:[n," online"]})]})},Re={userAvatarContainer:"_userAvatarContainer_1spmo_1",containerRight:"_containerRight_1spmo_6",containerBelow:"_containerBelow_1spmo_11",avatar:"_avatar_1spmo_16",small:"_small_1spmo_33",medium:"_medium_1spmo_39",large:"_large_1spmo_45",avatarImageContainer:"_avatarImageContainer_1spmo_51",avatarImage:"_avatarImage_1spmo_51",initialsPlaceholder:"_initialsPlaceholder_1spmo_69",userInfo:"_userInfo_1spmo_83",username:"_username_1spmo_89",userTitle:"_userTitle_1spmo_95",playerCard:"_playerCard_1spmo_114",cardAppear:"_cardAppear_1spmo_1",playerCardAvatar:"_playerCardAvatar_1spmo_142",playerCardImage:"_playerCardImage_1spmo_151",playerCardInitials:"_playerCardInitials_1spmo_159",playerCardInfo:"_playerCardInfo_1spmo_173",playerCardUsername:"_playerCardUsername_1spmo_182",playerCardTitle:"_playerCardTitle_1spmo_190",playerCardXP:"_playerCardXP_1spmo_198",playerCardLevelXP:"_playerCardLevelXP_1spmo_206",separator:"_separator_1spmo_214",xpValue:"_xpValue_1spmo_218",loading:"_loading_1spmo_223",shimmerBg:"_shimmerBg_1spmo_1",avatarLoader:"_avatarLoader_1spmo_229",shimmerOverlay:"_shimmerOverlay_1spmo_1",skeletonUsername:"_skeletonUsername_1spmo_238",skeletonTitle:"_skeletonTitle_1spmo_248",shimmerText:"_shimmerText_1spmo_1"},Oe=t.createContext(null),Fe=({children:a})=>{const{socket:s}=I(),{token:n}=E(),[r,i]=t.useState(new Map),o=t.useRef(new Set),l=t.useRef(null);t.useEffect((()=>{if(!s)return;const e=({userId:e,data:t})=>{i((a=>{const s=new Map(a);return s.set(e,t),s}))};return s.on("userDataUpdated",e),()=>{s.off("userDataUpdated",e)}}),[s]),t.useEffect((()=>()=>{l.current&&clearTimeout(l.current)}),[]);const c=t.useCallback((async e=>{if(!e||0===e.length||!n)return{};try{const t=await fetch(`${k}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({userIds:e})});if(!t.ok)throw new Error("Failed to fetch users data");const a=await t.json();return i((e=>{const t=new Map(e);return Object.entries(a).forEach((([e,a])=>{t.set(e,a)})),t})),a}catch(t){return{}}}),[n]),d=t.useCallback((()=>{if(0===o.current.size)return;const e=Array.from(o.current);o.current.clear(),c(e)}),[c]),u={getUserData:t.useCallback((e=>{if(!e)return null;const t=r.get(e);return t||(o.current.add(e),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{d()}),10),null)}),[r,d]),prefetchUsers:t.useCallback((e=>{const t=e.filter((e=>!r.has(e)));t.length>0&&c(t)}),[r,c])};return e.jsx(Oe.Provider,{value:u,children:a})},Ue=e=>{const a=t.useContext(Oe);if(!a)throw new Error("useUserData must be used within UserDataProvider");return a.getUserData(e)},ze=({userId:a,size:s="medium",showName:n=!0,namePosition:r="right",className:i="",showTitle:o=!0})=>{const[l,c]=t.useState(!1),d=Ue(a);if(!a)return null;if(!d){const t=Re[s]||Re.medium,a=n?Re[`container${r.charAt(0).toUpperCase()+r.slice(1)}`]:"";return e.jsxs("div",{className:`${Re.userAvatarContainer} ${a} ${i}`,children:[e.jsx("div",{className:`${Re.avatar} ${t} ${Re.loading}`,children:e.jsx("div",{className:Re.avatarLoader})}),n&&e.jsxs("div",{className:Re.userInfo,children:[e.jsx("div",{className:Re.skeletonUsername}),o&&e.jsx("div",{className:Re.skeletonTitle})]})]})}const{username:u,profileImg:m,title:h,xp:p,level:_}=d,g=Ge(u||"Unknown"),x=Re[s]||Re.medium,f=n?Re[`container${r.charAt(0).toUpperCase()+r.slice(1)}`]:"",j="https://api.in-between.live";let v=null;if(m)if(m.startsWith("http"))v=m;else if(m.includes("/uploads/")){v=`${j}/files/images/${m.split("/").pop()}`}else v=`${j}${m}`;return e.jsxs("div",{className:`${Re.userAvatarContainer} ${f} ${i}`,children:[e.jsxs("div",{className:`${Re.avatar} ${x}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsxs("div",{className:Re.avatarImageContainer,children:[v?e.jsx("img",{src:v,alt:`${u}'s avatar`,className:Re.avatarImage,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:Re.initialsPlaceholder,style:{display:v?"none":"flex"},children:g})]}),l&&e.jsxs("div",{className:Re.playerCard,children:[e.jsx("div",{className:Re.playerCardAvatar,children:v?e.jsx("img",{src:v,alt:`${u}'s avatar`,className:Re.playerCardImage}):e.jsx("div",{className:Re.playerCardInitials,children:g})}),e.jsxs("div",{className:Re.playerCardInfo,children:[e.jsx("div",{className:Re.playerCardUsername,children:u||"Unknown"}),h&&e.jsx("div",{className:Re.playerCardTitle,children:h}),void 0!==_&&void 0!==p&&e.jsxs("div",{className:Re.playerCardLevelXP,children:["Level ",_," ",e.jsx("span",{className:Re.separator,children:"•"})," ",e.jsxs("span",{className:Re.xpValue,children:[We(p)," XP"]})]})]})]})]}),n&&e.jsxs("div",{className:Re.userInfo,children:[e.jsx("div",{className:Re.username,children:u||"Unknown"}),o&&h&&e.jsx("div",{className:Re.userTitle,children:h})]})]})},Ge=e=>e.split(" ").map((e=>e.charAt(0))).join("").toUpperCase().substring(0,2),We=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),qe="_progressInfoContainer_nucsq_1",He="_balanceSection_nucsq_13",Ve="_balanceLabel_nucsq_22",Je="_xpSection_nucsq_29",Ke="_xpBarContainer_nucsq_33",Ye="_xpOverlay_nucsq_43",Xe="_xpLevel_nucsq_57",Qe="_xpNext_nucsq_64",Ze="_xpBar_nucsq_33",et={currencyAmount:"_currencyAmount_18625_1",pillBackground:"_pillBackground_18625_18",darkBackground:"_darkBackground_18625_29"},tt=({amount:t,size:a,background:s,customClass:n})=>{const r=[et.currencyAmount,"dark"===s?et.darkBackground:"","pill"===s?et.pillBackground:"",n||""].filter(Boolean).join(" ");return e.jsxs("span",{className:r,children:[e.jsx(P,{size:a}),e.jsx("span",{children:t.toLocaleString()})]})},at=({userId:t,balance:a})=>{const s=Ue(t);return e.jsxs("div",{className:qe,children:[e.jsxs("div",{className:He,children:[e.jsx("span",{className:Ve,children:"Balance:"}),e.jsx(tt,{amount:Number(a)||0,size:"medium"})]}),s&&e.jsx("div",{className:Je,children:e.jsxs("div",{className:Ke,children:[e.jsx("div",{className:Ze,style:{width:s.level>=100?"100%":`${s.percentToNextLevel||0}%`}}),e.jsxs("div",{className:Ye,children:[e.jsxs("div",{className:Xe,children:["Level ",s.level]}),e.jsx("div",{className:Qe,children:s.level<100?`${s.xpToNextLevel.toLocaleString()} XP`:"MAX"})]})]})})]})},st=({className:t="h-6 w-6",...a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,...a,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),nt=t.createContext(null),rt=e=>{if(!e)return null;const t="https://api.in-between.live";if(e.startsWith("http"))return e;if(e.startsWith("/files/"))return`${t}${e}`;if(e.includes("/uploads/")){const a=e.split("/"),s=a.pop();return`${t}/files/${a[a.length-1]}/${s}`}return`${t}${e}`},it=e=>e?{...e,profileImg:rt(e.profileImg),twoSecondPotGif:rt(e.twoSecondPotGif),twoSecondPotMp3:e.twoSecondPotMp3}:{},ot=({children:a})=>{const[n,r]=t.useState({profileImg:null,autoAnte:!1,muted:!1,twoSecondPotGif:null,twoSecondPotMp3:null,selectedTitle:null}),[i,o]=t.useState(!0),{user:l}=E(),c=s.useCallback((async()=>{if(!l)return r({autoAnte:!1}),void o(!1);try{o(!0);const e="https://api.in-between.live",t=localStorage.getItem("token");if(!t)return void o(!1);const a=await fetch(`${e}/preferences`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to load preferences");const s=await a.json(),n=it(s)||{autoAnte:!1,muted:!1};r(n),void 0!==n.muted&&v.setMuted(n.muted)}catch(e){r({autoAnte:!1})}finally{o(!1)}}),[l]);t.useEffect((()=>{l&&c()}),[l,c]);const d=async(e,t)=>{if(!l)return!1;try{const a="https://api.in-between.live",s=localStorage.getItem("token");if(!s)return!1;r((a=>({...a,[e]:t}))),"muted"===e&&v.setMuted(t);const n=await fetch(`${a}/preferences/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({value:t})});if(!n.ok)throw new Error(`Failed to update ${e} preference`);const i=await n.json(),o=it(i);return r(o),!0}catch(a){return await c(),!1}};return e.jsx(nt.Provider,{value:{preferences:n,updatePreference:d,toggleAutoAnte:async()=>{const e=!n.autoAnte;return await d("autoAnte",e)},toggleMute:async()=>{const e=!n.muted;return await d("muted",e)},updateSelectedTitle:async e=>await d("selectedTitle",e),uploadTwoSecondPotGif:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const a="https://api.in-between.live",s=localStorage.getItem("token");if(!s)return!1;const n=await fetch(`${a}/preferences/twoSecondPotGif`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:t}),i=await n.text();if(!n.ok)throw new Error(`Failed to upload GIF file: ${i}`);const o=i?JSON.parse(i):{},l=rt(o.fileUrl);return r((e=>({...e,twoSecondPotGif:l}))),!0}catch(t){return!1}},uploadTwoSecondPotMp3:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const a="https://api.in-between.live",s=localStorage.getItem("token");if(!s)return!1;const n=await fetch(`${a}/preferences/twoSecondPotMp3`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:t}),i=await n.text();if(!n.ok)throw new Error(`Failed to upload MP3 file: ${i}`);const o=i?JSON.parse(i):{};return r((e=>({...e,twoSecondPotMp3:o.fileUrl}))),!0}catch(t){return!1}},uploadProfileImg:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const a="https://api.in-between.live",s=localStorage.getItem("token");if(!s)return!1;const n=await fetch(`${a}/preferences/profileImg`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:t}),i=await n.text();if(!n.ok)throw new Error(`Failed to upload profile image: ${i}`);const o=i?JSON.parse(i):{},l=rt(o.fileUrl);return r((e=>({...e,profileImg:l}))),!0}catch(t){return!1}},loading:i},children:a})},lt=()=>{const e=t.useContext(nt);if(!e)throw new Error("usePreferences must be used within a PreferencesProvider");return e},ct="_toggleContainer_19p7v_1",dt="_toggleInput_19p7v_8",ut="_toggleLabel_19p7v_14",mt="_toggleSlider_19p7v_21",ht="_toggleText_19p7v_70",pt=({isChecked:t,onChange:a,label:s})=>e.jsx("div",{className:ct,children:e.jsxs("label",{className:ut,children:[e.jsx("input",{type:"checkbox",checked:t,onChange:a,className:dt,"data-gamepad-focusable":"true"}),e.jsx("span",{className:mt}),s&&e.jsx("span",{className:ht,children:s})]})}),_t="_fileUploadContainer_1ak4l_1",gt="_fileInput_1ak4l_8",xt="_uploadButton_1ak4l_12",ft="_changeButton_1ak4l_37",jt="_previewContainer_1ak4l_53",vt="_imagePreview_1ak4l_61",yt="_audioPreview_1ak4l_70",bt="_errorMessage_1ak4l_76",Nt=({onUpload:a,currentFileUrl:s,acceptedFileTypes:n,label:r,previewType:i="image"})=>{const[o,l]=t.useState(!1),[c,d]=t.useState(null),u=t.useRef(null);return e.jsxs("div",{className:_t,children:[e.jsx("input",{type:"file",ref:u,onChange:async e=>{const t=e.target.files[0];if(t){d(null),l(!0);try{await a(t)||d("Failed to upload file. Please try again.")}catch(s){d("An error occurred during upload.")}finally{l(!1)}}},accept:n,className:gt}),s&&(s?"image"===i?e.jsx("div",{className:jt,children:e.jsx("img",{src:s,alt:"Preview",className:vt})}):"audio"===i?e.jsx("div",{className:jt,children:e.jsx("audio",{controls:!0,src:s,className:yt,children:"Your browser does not support the audio element."})}):null:null),e.jsx("button",{type:"button",onClick:()=>{u.current.click()},className:`${xt} ${s?ft:""}`,disabled:o,"data-gamepad-focusable":"true",children:o?"Uploading...":s?`Change ${r}`:`Upload ${r}`}),c&&e.jsx("div",{className:bt,children:c})]})},wt=()=>{const{token:a}=E(),{preferences:s,updateSelectedTitle:n}=lt(),[r,i]=t.useState([]),[o,l]=t.useState(!0),[c,d]=t.useState(null);t.useEffect((()=>{u()}),[]);const u=async()=>{try{l(!0);const e=await fetch(`${k}/me/titles`,{headers:{Authorization:`Bearer ${a}`}});if(!e.ok)throw new Error("Failed to load titles");const t=await e.json();i(t)}catch(e){d(e.message)}finally{l(!1)}},m=async e=>{try{await n(e)}catch(t){d("Failed to update title")}};return o?e.jsx("div",{className:D.loadingMessage,children:"Loading titles..."}):c?e.jsx("div",{className:D.errorMessage,children:c}):0===r.length?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#a0b9d6"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px"},children:[e.jsxs("div",{onClick:()=>m(""),style:{display:"inline-block",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:s.selectedTitle?"rgba(255, 255, 255, 0.08)":"rgba(100, 169, 255, 0.3)",border:s.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid #64a9ff",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"#bcdcff",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"#a0b9d6",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),r.map((t=>e.jsxs("div",{onClick:()=>m(t.title),style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:s.selectedTitle===t.title?"rgba(100, 169, 255, 0.3)":"rgba(255, 255, 255, 0.08)",border:s.selectedTitle===t.title?"2px solid #64a9ff":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"#bcdcff",fontSize:"13px"},children:t.title}),e.jsx("div",{style:{color:"#a0b9d6",fontSize:"10px",marginTop:"2px"},children:t.description})]},t.title))),0===r.length&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"#a0b9d6",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},Ct=({onClose:t})=>{const{preferences:a,toggleAutoAnte:s,toggleMute:n,uploadTwoSecondPotGif:r,uploadTwoSecondPotMp3:i,uploadProfileImg:o,loading:l}=lt();return l?e.jsx(O,{title:"Preferences",onClose:t,style:{maxWidth:600,maxHeight:"25vh"},children:e.jsx("div",{className:D.loadingMessage,children:"Loading preferences..."})}):e.jsx(O,{title:"Preferences",onClose:t,style:{maxWidth:600,maxHeight:"80vh"},children:e.jsxs("div",{className:D.settingsContainer,children:[e.jsx("div",{className:D.sectionHeader,children:"Game Options"}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Mute Sound"}),e.jsx("p",{children:"Mute all game sound effects"})]}),e.jsx(pt,{isChecked:a.muted,onChange:n})]}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Auto-Ante"}),e.jsx("p",{children:"Automatically ante up when a new round begins"})]}),e.jsx(pt,{isChecked:a.autoAnte,onChange:s})]}),e.jsx("div",{className:D.sectionHeader,children:"Customization Options"}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Profile Image"}),e.jsx("p",{children:"Upload a profile image to personalize your account"})]}),e.jsx(Nt,{onUpload:o,currentFileUrl:a.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:D.settingItem,style:{flexDirection:"column",alignItems:"stretch"},children:[e.jsxs("div",{className:D.settingDescription,style:{marginRight:0,marginBottom:"12px"},children:[e.jsx("h4",{children:"Title"}),e.jsx("p",{children:"Choose a title to display with your name. Unlock more by playing games!"})]}),e.jsx(wt,{})]})]})})},kt={iconButton:"_iconButton_3xp6j_1",default:"_default_3xp6j_18",danger:"_danger_3xp6j_31",preferences:"_preferences_3xp6j_44",stats:"_stats_3xp6j_57",store:"_store_3xp6j_70"},At=({icon:t,title:a,onClick:s,variant:n="default",compact:r=!0,className:i="",...o})=>e.jsx("button",{className:`${kt.iconButton} ${kt[n]} ${i}`,onClick:s,title:a,type:"button",...o,children:t}),It=({onModalStateChange:a})=>{const[s,n]=t.useState(!1);return t.useEffect((()=>{a&&a(s)}),[s,a]),e.jsxs(e.Fragment,{children:[e.jsx(At,{onClick:()=>{n(!0)},icon:e.jsx(st,{style:{color:"white",width:20,height:20}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),s&&e.jsx(Ct,{isOpen:s,onClose:()=>{n(!1)}})]})},St=({color:t="currentColor",size:a=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"}),e.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"})]}),Tt="_settingsContainer_22a3p_1",Pt="_tabsContainer_22a3p_6",$t="_tabButton_22a3p_13",Bt="_activeTab_22a3p_30",Et="_tabContent_22a3p_45",Lt="_totalsTable_22a3p_51",Mt="_settleUpTable_22a3p_51",Dt="_totalRow_22a3p_57",Rt="_paymentRow_22a3p_57",Ot="_playerName_22a3p_66",Ft="_totalAmount_22a3p_77",Ut="_paymentAmount_22a3p_77",zt="_positive_22a3p_83",Gt="_negative_22a3p_87",Wt="_paymentText_22a3p_91",qt="_noDataMessage_22a3p_102",Ht="_loadingMessage_22a3p_109",Vt=({color:t="currentColor",size:a=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 15 L12 18"}),e.jsx("path",{d:"M9.5 16.5 L12 19 L14.5 16.5"}),e.jsx("path",{d:"M8 10 L10 10"}),e.jsx("path",{d:"M12 10 L14 10"}),e.jsx("path",{d:"M16 10 L16 10"})]}),Jt=t.createContext(),Kt=()=>{const e=t.useContext(Jt);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},Yt=({children:a,gameId:s,initialGameState:n=null})=>{const{socket:r,error:i}=I(),{user:o}=E(),[l,c]=t.useState(n);t.useRef({});const d=t.useRef(null),[u,m]=t.useState(null),h=t.useCallback((()=>{m(null)}),[]);t.useEffect((()=>{i&&m(i)}),[i]),t.useEffect((()=>{if(r)return r.on("gameReconnected",(e=>{c(e.game),m(null),e.game&&e.game.id&&setTimeout((()=>{r.emit("getGameState",{gameId:e.game.id})}),500)})),r.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(l)!==JSON.stringify(e)){if(e.currentPlayerId&&o?.id){const t=e.currentPlayerId===o.id,a=d.current===o.id;t&&!a&&v.play("ui.alert"),d.current=e.currentPlayerId}c(e),h()}})),r.on("gameError",(e=>{m(e)})),()=>{r.off("gameReconnected"),r.off("gameState"),r.off("gameError")}}),[r]);const p=t.useCallback((e=>{if(r&&s)try{r.emit("placeBet",{bet:e,gameId:s})}catch(t){m("Failed to place bet. Please try again.")}}),[r,s]),_=t.useCallback((()=>{if(r&&s)try{r.emit("payAnte",{gameId:s})}catch(e){m("Failed to pay ante. Please try again.")}}),[r,s]),g=t.useCallback((()=>{if(r&&s)try{r.emit("dealCards",{gameId:s})}catch(e){m("Failed to deal cards. Please try again.")}}),[r,s]),x=t.useCallback((()=>{if(r&&s)try{r.emit("revealMiddleCard",{gameId:s})}catch(e){m("Failed to reveal middle card. Please try again.")}}),[r,s]),f=t.useCallback((()=>{if(r&&s)try{r.emit("nextRound",{gameId:s})}catch(e){m("Failed to move to next round. Please try again.")}}),[r,s]),j=t.useCallback((()=>{if(r&&s)try{r.emit("ready")}catch(e){m("Failed to set player ready. Please try again.")}}),[r,s]),y=t.useCallback((()=>{if(r&&s)try{r.emit("unready")}catch(e){m("Failed to set player unready. Please try again.")}}),[r,s]),b={gameState:l,error:u,gameId:s,placeBet:p,payAnte:_,playerReady:j,playerUnready:y,dealCards:g,revealMiddleCard:x,nextRound:f,clearError:h};return e.jsx(Jt.Provider,{value:b,children:a})},Xt=({title:t="Download Transaction Log as CSV",gameState:a,...s})=>{const n=Kt(),r=a||n?.gameState,i=r?.gameTransactions||r?.gameData?.gameTransactions||[],o=r?._id||r?.id||"unknown";return e.jsx(At,{icon:e.jsx(Vt,{color:"white",size:20}),title:t,onClick:()=>{const e=Array.isArray(i)?i:[];if(0===e.length)return;let t="Player,Transaction Type,Amount,Round,Timestamp\n";const a=[...e].map((e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})));a.sort(((e,t)=>e.timestamp-t.timestamp)),a.forEach((e=>{const a=e.timestamp?new Date(e.timestamp).toLocaleString():"N/A",s=e.playerName||e.player||"Unknown Player",n=s.includes(",")?`"${s}"`:s;let r=e.transactionType||"Transaction";if(!e.transactionType&&e.reason){const t=e.reason.split(" ");r=t[0],"Won"===t[0]?r="Win":e.reason.includes("penalty")&&(r="Penalty")}t+=`${n},${r},${e.amount},${e.round||"N/A"},${a}\n`}));const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(s),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",`game-${o}-transactions.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},variant:"default",...s})},Qt="_noDataMessage_qnwhh_2",Zt="_tabContent_qnwhh_9",ea="_statsGrid_qnwhh_15",ta="_statItem_qnwhh_24",aa="_statLabel_qnwhh_40",sa="_statValue_qnwhh_47",na="_statSuffix_qnwhh_55",ra=({gameData:a})=>{const s=a.gameTransactions,n=a.players,r={};Object.entries(n).forEach((([e,t])=>{r[e]=t.name})),s.forEach((e=>{e.playerId&&!r[e.playerId]&&(r[e.playerId]=e.playerName||"Unknown Player")}));const i=t.useMemo((()=>{if(0===s.length)return[];const e=e=>e.toLocaleString(),t={};s.forEach((e=>{t[e.playerId]||(t[e.playerId]=[]),t[e.playerId].push(e)}));const n=a.round||1,i=a.deckCount||1,o=s.filter((e=>"Ante"===e.transactionType)).reduce(((e,t)=>e+Math.abs(t.amount)),0),l=s.filter((e=>"Bet"===e.transactionType)).reduce(((e,t)=>e+Math.abs(t.amount)),0),c=s.filter((e=>"Bet"===e.transactionType)),d=c.length>0?c.reduce(((e,t)=>Math.abs(t.amount)>Math.abs(e.amount)?t:e),c[0]):null,u=s.reduce(((e,t)=>t.potAmount>e?t.potAmount:e),0),m=s.filter((e=>"2x"===e.transactionType||"3x"===e.transactionType)),h=m.reduce(((e,t)=>e+Math.abs(t.amount)),0),p={};c.forEach((e=>{p[e.playerId]=(p[e.playerId]||0)+1}));let _=null,g=0;Object.entries(p).forEach((([e,t])=>{t>g&&(g=t,_=e)}));const x={};c.forEach((e=>{x[e.playerId]||(x[e.playerId]={total:0,count:0}),x[e.playerId].total+=Math.abs(e.amount),x[e.playerId].count+=1}));let f=null,j=0;Object.entries(x).forEach((([e,t])=>{const a=t.total/t.count;a>j&&(j=a,f=e)}));const v={};s.filter((e=>"Win"===e.transactionType)).forEach((e=>{v[e.playerId]=(v[e.playerId]||0)+1}));let y=null,b=0;Object.entries(v).forEach((([e,t])=>{t>b&&(b=t,y=e)}));const N={};m.forEach((e=>{N[e.playerId]=(N[e.playerId]||0)+1}));let w=null,C=0;Object.entries(N).forEach((([e,t])=>{t>C&&(C=t,w=e)}));const k=a.totals||{};let A=null,I=0,S=null,T=0;return Object.entries(k).forEach((([e,t])=>{t>I&&(I=t,A=e),t<T&&(T=t,S=e)})),[{key:"totalDecks",label:"Total Decks",value:i,type:"number"},{key:"totalRounds",label:"Total Rounds",value:n,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:c.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:o,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:l,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:u,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:d?Math.abs(d.amount):0,type:"currency",suffix:d?` by ${d.playerName}`:""},{key:"biggestWinner",label:"Biggest Winner",value:A?r[A]||"Unknown Player":"N/A",type:"text",suffix:A?` (+${e(I)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:S?r[S]||"Unknown Player":"N/A",type:"text",suffix:S?` (${e(T)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:_?r[_]||"Unknown Player":"N/A",type:"text",suffix:_?` (${e(g)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:f?r[f]||"Unknown Player":"N/A",type:"text",suffix:f?` (avg: ${e(Math.round(j))})`:""},{key:"mostWinning",label:"Most Winning Player",value:y?r[y]||"Unknown Player":"N/A",type:"text",suffix:y?` (${e(b)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:m.length,type:"number",suffix:m.length>0?` (${e(h)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:w?r[w]||"Unknown Player":"N/A",type:"text",suffix:w?` (${e(C)} penalties)`:""}]}),[s,r]);return e.jsx("div",{className:Zt,children:0===i.length?e.jsx("p",{className:Qt,children:"No statistics available for this game."}):e.jsx("div",{className:ea,children:i.map((t=>{return e.jsxs("div",{className:ta,children:[e.jsx("div",{className:aa,children:t.label}),e.jsxs("div",{className:sa,children:[(a=t.type,s=t.value,"currency"===a?e.jsx(tt,{amount:s,size:"small"}):"percentage"===a?`${(100*s).toFixed(1)}%`:"number"===a?s.toLocaleString():s),t.suffix&&e.jsx("span",{className:na,children:t.suffix})]})]},t.key);var a,s}))})})},ia=({onClose:a,gameData:s})=>{if(!s)return e.jsx(O,{title:"Game Summary",onClose:a,style:{maxWidth:800},children:e.jsx("div",{className:Ht,children:"Loading game data..."})});const n=s.gameTransactions||[],r=s.players||{},i=s.id||"unknown",o=s.settings?.isPrivate||!1,l=Array.isArray(n)?n:[],c={};Object.entries(r).forEach((([e,t])=>{c[e]=t.name})),l.forEach((e=>{e.playerId&&!c[e.playerId]&&(c[e.playerId]=e.playerName||"Unknown Player")}));const d=s.totals||{},u=t.useMemo((()=>{if(2===Object.keys(d).length){const e=Object.entries(d),[t,a]=e[0],[s,n]=e[1];if(Math.abs(a+n)<.1){if(a>0)return[{from:s,fromName:c[s],to:t,toName:c[t],amount:Math.abs(a)}];if(n>0)return[{from:t,fromName:c[t],to:s,toName:c[s],amount:Math.abs(n)}]}}const e=[],t=Object.entries(d).filter((([e,t])=>t<0)).map((([e,t])=>({playerId:e,playerName:c[e]||"Unknown Player",amount:Math.abs(t)}))),a=Object.entries(d).filter((([e,t])=>t>0)).map((([e,t])=>({playerId:e,playerName:c[e]||"Unknown Player",amount:t})));for(t.sort(((e,t)=>t.amount-e.amount)),a.sort(((e,t)=>t.amount-e.amount));a.length>0&&t.length>0;){const s=a[0],n=t[0],r=Math.min(s.amount,n.amount);if(!(r>.01))break;e.push({from:n.playerId,fromName:n.playerName,to:s.playerId,toName:s.playerName,amount:r}),s.amount-=r,n.amount-=r,s.amount<.01&&a.shift(),n.amount<.01&&t.shift()}return e}),[d,c]),[m,h]=t.useState("totals");return e.jsx(O,{title:`Game Summary (${i})`,onClose:a,headerButtons:e.jsx(Xt,{gameState:s}),style:{maxWidth:800},children:e.jsxs("div",{className:Tt,children:[e.jsxs("div",{className:Pt,children:[e.jsx("button",{className:`${$t} ${"totals"===m?Bt:""}`,onClick:()=>h("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{className:`${$t} ${"stats"===m?Bt:""}`,onClick:()=>h("stats"),"data-gamepad-focusable":"true",children:"Stats"}),o&&e.jsx("button",{className:`${$t} ${"payouts"===m?Bt:""}`,onClick:()=>h("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),"totals"===m&&e.jsx("div",{className:Et,children:0===Object.keys(d).length?e.jsx("p",{className:qt,children:"No transactions recorded yet."}):e.jsx("div",{className:Lt,children:Object.entries(d).map((([t,a])=>e.jsxs("div",{className:Dt,children:[e.jsx("span",{className:Ot,children:c[t]||"Unknown Player"}),e.jsx("span",{className:`${Ft} ${a>=0?zt:Gt}`,children:e.jsx(tt,{amount:a,size:"small"})})]},t)))})}),"stats"===m&&e.jsx(ra,{gameData:s}),"payouts"===m&&o&&e.jsx("div",{className:Et,children:0===u.length?e.jsx("p",{className:qt,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:Mt,children:u.map(((t,a)=>e.jsxs("div",{className:Rt,children:[e.jsxs("span",{className:Wt,children:[e.jsx("span",{className:Ot,children:t.fromName})," pays"," ",e.jsx("span",{className:Ot,children:t.toName})]}),e.jsx("span",{className:Ut,children:e.jsx(tt,{amount:t.amount,size:"small"})})]},a)))})})]})})},oa="_leaderboardContainer_1gsc7_1",la="_leaderboardHeader_1gsc7_9",ca="_durationSelector_1gsc7_15",da="_durationButton_1gsc7_23",ua="_active_1gsc7_38",ma="_loadingMessage_1gsc7_43",ha="_errorMessage_1gsc7_43",pa="_emptyMessage_1gsc7_43",_a="_loadingSpinner_1gsc7_55",ga="_leaderboardList_1gsc7_73",xa="_leaderboardRow_1gsc7_82",fa="_rankCell_1gsc7_97",ja="_rank_1gsc7_97",va="_playerCell_1gsc7_108",ya="_statsCell_1gsc7_113",ba=()=>{const[a,s]=t.useState([]),[n,r]=t.useState(!0),[i,o]=t.useState(null),[l,c]=t.useState("all"),d=t.useContext(Oe);t.useEffect((()=>{u()}),[l]);const u=async()=>{r(!0),o(null);try{const e=await fetch(`${k}/leaderboard?duration=${l}`);if(!e.ok)throw new Error("Failed to fetch leaderboard");const t=await e.json();if(s(t.leaderboard||[]),d&&t.leaderboard){const e=t.leaderboard.map((e=>e.userId));d.prefetchUsers(e)}}catch(e){o(e.message)}finally{r(!1)}},m=e=>1===e?"🥇":2===e?"🥈":3===e?"🥉":`#${e}`;return e.jsxs("div",{className:oa,children:[e.jsx("div",{className:la,children:e.jsxs("div",{className:ca,children:[e.jsx("button",{className:`${da} ${"all"===l?ua:""}`,onClick:()=>c("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{className:`${da} ${"30days"===l?ua:""}`,onClick:()=>c("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),n?e.jsxs("div",{className:ma,children:[e.jsx("div",{className:_a}),"Loading leaderboard..."]}):i?e.jsxs("div",{className:ha,children:["Error: ",i]}):0===a.length?e.jsx("div",{className:pa,children:"No players found for this time period."}):e.jsx("div",{className:ga,"data-gamepad-scrollable":"true",tabIndex:"0",children:a.map((t=>e.jsxs("div",{className:xa,children:[e.jsx("div",{className:fa,children:e.jsx("span",{className:ja,children:m(t.rank)})}),e.jsx("div",{className:va,children:e.jsx(ze,{userId:t.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:ya,children:e.jsx(tt,{amount:t.totalProfit,size:"small"})})]},t.userId)))})]})},Na="_statsPlaceholder_t0x7w_1",wa="_tabsContainer_t0x7w_12",Ca="_tabButton_t0x7w_19",ka="_activeTab_t0x7w_36",Aa="_tabContent_t0x7w_51",Ia="_statsGrid_t0x7w_62",Sa="_statItem_t0x7w_92",Ta="_statLabel_t0x7w_108",Pa="_statValue_t0x7w_115",$a="_statSuffix_t0x7w_123",Ba="_historyTable_t0x7w_137",Ea="_tableHeader_t0x7w_169",La="_gameNameHeader_t0x7w_180",Ma="_playerCountHeader_t0x7w_180",Da="_roundsHeader_t0x7w_180",Ra="_endDateHeader_t0x7w_180",Oa="_historyRow_t0x7w_196",Fa="_gameNameCell_t0x7w_203",Ua="_playerCountCell_t0x7w_211",za="_roundsCell_t0x7w_211",Ga="_endDateCell_t0x7w_219",Wa="_gameNameLink_t0x7w_227",qa="_pageButton_t0x7w_313",Ha="_pageInfo_t0x7w_339",Va="_errorMessage_t0x7w_351",Ja="_loadingMessage_t0x7w_372",Ka="_loadingSpinner_t0x7w_383",Ya=({onClose:a})=>{const{token:s}=E(),[n,r]=t.useState("leaderboard"),[i,o]=t.useState(!0),[l,c]=t.useState(null),[d,u]=t.useState({games:[],pagination:{}}),[m,h]=t.useState(0),[p,_]=t.useState(!1),[g,x]=t.useState(null),[f,j]=t.useState(null),[v,y]=t.useState(!0),[b,N]=t.useState(null);t.useEffect((()=>{(async()=>{o(!0),c(null);try{const e=await fetch(`${k}/games/history?pageSize=5&pageNumber=${m}`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error("Failed to fetch game history");const t=await e.json();u(t)}catch(e){c(e.message)}finally{o(!1)}})()}),[s,m]),t.useEffect((()=>{(async()=>{y(!0),N(null);try{const e=await fetch(`${k}/me/stats`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error("Failed to fetch lifetime stats");const t=await e.json();j(t.stats)}catch(e){N(e.message)}finally{y(!1)}})()}),[s]);const w=e=>{if(!e)return"Unknown";const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},C=e=>e.roundCount||0;return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Player Stats",onClose:a,style:{maxWidth:800,height:"90ßvh"},children:e.jsxs("div",{className:D.settingsContainer,children:[e.jsxs("div",{className:wa,children:[e.jsx("button",{className:`${Ca} ${"leaderboard"===n?ka:""}`,onClick:()=>r("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{className:`${Ca} ${"stats"===n?ka:""}`,onClick:()=>r("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{className:`${Ca} ${"history"===n?ka:""}`,onClick:()=>r("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),"leaderboard"===n&&e.jsx("div",{className:Aa,children:e.jsx(ba,{})}),"stats"===n&&e.jsx("div",{className:Aa,children:v?e.jsxs("div",{className:Ja,children:[e.jsx("div",{className:Ka}),"Loading your lifetime stats..."]}):b?e.jsxs("div",{className:Va,children:["Error: ",b]}):f&&0!==f.length?e.jsx("div",{className:Ia,"data-gamepad-scrollable":"true",tabIndex:"0",children:f.map(((t,a)=>{return e.jsxs("div",{className:Sa,children:[e.jsx("div",{className:Ta,children:t.label}),e.jsxs("div",{className:Pa,children:[(s=t.type,n=t.value,"number"==typeof n?"currency"===s?e.jsx(tt,{amount:n.toFixed(2),size:"small"}):"percentage"===s?`${(100*n).toFixed(1)}%`:n.toLocaleString():"boolean"==typeof n?n?"Yes":"No":"date"===s||n instanceof Date?w(n):"number"===s?Number(n).toLocaleString():String(n)),t.suffix&&e.jsx("span",{className:$a,children:t.suffix})]})]},t.key||`stat-${a}`);var s,n}))}):e.jsx("div",{className:Na,children:e.jsx("p",{children:"No lifetime statistics available."})})}),"history"===n&&e.jsx("div",{className:Aa,children:i?e.jsxs("div",{className:Ja,children:[e.jsx("div",{className:Ka}),"Loading your game history..."]}):l?e.jsxs("div",{className:Va,children:["Error: ",l]}):0===d.games.length?e.jsx("div",{className:Na,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Ba,"data-gamepad-scrollable":"true",tabIndex:"0",children:[e.jsxs("div",{className:Ea,children:[e.jsx("div",{className:La,children:"Game"}),e.jsx("div",{className:Ma,children:"Players"}),e.jsx("div",{className:Da,children:"Rounds"}),e.jsx("div",{className:Ra,children:"Ended"})]}),d.games.map((t=>e.jsxs("div",{className:Oa,children:[e.jsx("div",{className:Fa,children:e.jsxs("span",{className:Wa,onClick:()=>(e=>{const t=d.games.find((t=>t.id===e));t&&(x(t),_(!0))})(t.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",t.id]})}),e.jsx("div",{className:Ua,children:t.totalPlayerCount}),e.jsx("div",{className:za,children:C(t)}),e.jsx("div",{className:Ga,children:w(t.endedAt)})]},t.id)))]}),e.jsxs("div",{className:Ha,children:[e.jsx("button",{onClick:()=>{m>0&&h(m-1)},disabled:0===m,className:qa,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"←"}),"Page ",m+1,d.pagination&&d.pagination.total?` of ${Math.ceil(d.pagination.total/5)}`:"",e.jsx("button",{onClick:()=>{d.pagination&&5===d.games.length&&h(m+1)},disabled:!d.pagination||d.games.length<5,className:qa,"aria-label":"Next page","data-gamepad-focusable":"true",children:"→"})]})]})})]})}),p&&g&&e.jsx(ia,{gameData:g,onClose:()=>{_(!1),x(null)}})]})},Xa=({onModalStateChange:a,...s})=>{const[n,r]=t.useState(!1);return t.useEffect((()=>{a&&a(n)}),[n,a]),e.jsxs(e.Fragment,{children:[e.jsx(At,{onClick:()=>{r(!0)},icon:e.jsx(St,{color:"white",size:20}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...s}),n&&e.jsx(Ya,{isOpen:n,onClose:()=>{r(!1)}})]})},Qa=({className:t="h-6 w-6",...a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:t,...a,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z"})}),Za=({onClick:t,...a})=>e.jsx(At,{onClick:t,icon:e.jsx(Qa,{style:{color:"white",width:20,height:20}}),"aria-label":"Store",variant:"store",title:"Store",...a}),es=({color:t="currentColor",size:a=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"})]}),ts="🍯",as="🃏",ss="✓",ns="🃏",{TIMERS:rs}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},is=({onClose:t})=>e.jsxs(O,{title:"Game Rules",onClose:t,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:D.sectionHeader,children:"Objective"}),e.jsx("div",{className:D.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:D.sectionHeader,children:"Card Values"}),e.jsx("div",{className:D.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:D.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:D.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"The player to the right of the dealer goes first."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:D.sectionHeader,children:"Betting"}),e.jsxs("div",{className:D.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:D.sectionHeader,children:"POT Button"}),e.jsx("div",{className:D.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:D.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:D.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),os=({title:a="View Game Rules",onModalStateChange:s,...n})=>{const[r,i]=t.useState(!1);return t.useEffect((()=>{s&&s(r)}),[r,s]),e.jsxs(e.Fragment,{children:[e.jsx(At,{icon:e.jsx(es,{color:"white",size:20}),title:a,onClick:()=>{i(!0)},variant:"default",...n}),r&&e.jsx(is,{onClose:()=>{i(!1)}})]})},ls={playerPanel:"_playerPanel_1e2ac_1",userSection:"_userSection_1e2ac_28",avatarContainer:"_avatarContainer_1e2ac_43",headerButtons:"_headerButtons_1e2ac_47",logoutButton:"_logoutButton_1e2ac_77",divider:"_divider_1e2ac_116",actionSection:"_actionSection_1e2ac_124",actionButton:"_actionButton_1e2ac_131",createButton:"_createButton_1e2ac_156",cancelButton:"_cancelButton_1e2ac_173"},cs=({type:a="text",title:s="",...n})=>{const r=t.useRef(null),{enhanceInput:i}=X();return t.useEffect((()=>{if(r.current){return i(r.current,a,s)}}),[i,a,s]),e.jsx("input",{ref:r,type:a,"data-gamepad-focusable":"true",...n})},ds={useCustomName:!1,customName:"",isPrivate:!1,password:"",enableAceChoice:!0,enableSecondChance:!0,numberOfBots:0},us=({initialSettings:a=ds,onSubmit:s,onClose:n})=>{const[r,i]=t.useState({...ds,...a}),[o,l]=t.useState({}),c=(e,t)=>{i((a=>{const s={...a,[e]:t};return"useCustomName"!==e||t||(s.customName="",o.customName&&l((e=>{const t={...e};return delete t.customName,t}))),"isPrivate"!==e||t||(s.password="",o.password&&l((e=>{const t={...e};return delete t.password,t}))),s})),"customName"!==e&&"useCustomName"!==e||!o.customName||l((e=>{const t={...e};return delete t.customName,t})),"password"!==e&&"isPrivate"!==e||!o.password||l((e=>{const t={...e};return delete t.password,t})),"numberOfBots"===e&&o.numberOfBots&&l((e=>{const t={...e};return delete t.numberOfBots,t}))};return e.jsx(O,{title:"Game Options",onClose:n,style:{maxWidth:600},footer:e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"button",onClick:n,className:`${ls.actionButton} ${ls.cancelButton}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",form:"gameSettingsForm",className:`${ls.actionButton} ${ls.createButton}`,disabled:Object.keys(o).length>0,"data-gamepad-focusable":"true",children:"Create Game"})]}),children:e.jsx("form",{id:"gameSettingsForm",onSubmit:e=>{e.preventDefault();const t=(e=>{const t={};if(e.useCustomName){const a=e.customName||"";a?a.length<4||a.length>26?t.customName="Name must be 4-26 characters.":/^[a-zA-Z0-9_-]+$/.test(a)||(t.customName="Use letters, numbers, -, or _."):t.customName="Custom name is required."}if(e.isPrivate){const a=e.password||"";a?(a.length<3||a.length>36)&&(t.password="Password must be 3-36 characters."):t.password="Password is required."}const a=e.numberOfBots;return(a<0||a>16)&&(t.numberOfBots="Number of bots must be between 0 and 16."),t})(r);if(Object.keys(t).length>0)l(t);else{l({});const e={...r,customName:r.useCustomName?r.customName:null};delete e.useCustomName,s(e)}},children:e.jsxs("div",{className:D.settingsContainer,children:[e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Custom Game Name"}),e.jsx("p",{children:"Set a custom name for your game lobby"})]}),e.jsxs("div",{className:D.settingControls,children:[e.jsx(pt,{isChecked:r.useCustomName,onChange:e=>c("useCustomName",e.target.checked)}),r.useCustomName&&e.jsx(cs,{title:"Enter Game Name",type:"text",value:r.customName||"",onChange:e=>c("customName",e.target.value),className:`${D.textInput}${o.customName?" "+D.inputError:""}`,placeholder:"Game Name",maxLength:26,autoFocus:!0,style:{marginTop:8}}),o.customName&&e.jsx("span",{className:"errorMessage",children:o.customName})]})]}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Private Game"}),e.jsx("p",{children:"Only players with the password can join"})]}),e.jsxs("div",{className:D.settingControls,children:[e.jsx(pt,{isChecked:r.isPrivate,onChange:e=>c("isPrivate",e.target.checked)}),r.isPrivate&&e.jsx(cs,{title:"Enter Game Password",type:"password",value:r.password||"",onChange:e=>c("password",e.target.value),className:`${D.textInput}${o.password?" "+D.inputError:""}`,placeholder:"Password",maxLength:36,autoFocus:r.isPrivate&&!r.useCustomName,style:{marginTop:8}}),o.password&&e.jsx("span",{className:"errorMessage",children:o.password})]})]}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Number of Bots"}),e.jsx("p",{children:"Add AI players to your game (0-16)"})]}),e.jsxs("div",{className:D.settingControls,children:[e.jsx(cs,{title:"Number of AI Players",type:"number",min:"0",max:"16",value:r.numberOfBots,onChange:e=>c("numberOfBots",parseInt(e.target.value)||0),className:`${D.textInput}${o.numberOfBots?" "+D.inputError:""}`}),o.numberOfBots&&e.jsx("span",{className:"errorMessage",children:o.numberOfBots})]})]}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Enable Ace Choice"}),e.jsx("p",{children:"Allow players to choose high/low on Ace"})]}),e.jsx("div",{className:D.settingControls,children:e.jsx(pt,{isChecked:r.enableAceChoice,onChange:e=>c("enableAceChoice",e.target.checked)})})]}),e.jsxs("div",{className:D.settingItem,children:[e.jsxs("div",{className:D.settingDescription,children:[e.jsx("h4",{children:"Enable Second Chance"}),e.jsx("p",{children:"Allow players to ante up for a second chance"})]}),e.jsx("div",{className:D.settingControls,children:e.jsx(pt,{isChecked:r.enableSecondChance,onChange:e=>c("enableSecondChance",e.target.checked)})})]})]})})})},ms="_tabsContainer_191ec_2",hs="_tabButton_191ec_8",ps="_activeTab_191ec_27",_s="_loadingSpinner_191ec_41";const gs=new class{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`}getAuthHeaders(){const e=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}}async getOfferingsByType(e){try{const t=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(e)}`,a=await fetch(t,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||`HTTP ${a.status}: Failed to fetch offerings`)}return(await a.json()).offerings||[]}catch(t){throw new Error(`Failed to fetch product offerings: ${t.message}`)}}async getAllOfferings(){try{const e=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!e.ok){const t=await e.json().catch((()=>({})));throw new Error(t.error||`HTTP ${e.status}: Failed to fetch offerings`)}return(await e.json()).offerings||[]}catch(e){throw new Error(`Failed to fetch product offerings: ${e.message}`)}}async processPurchase(e){try{if(!e)throw new Error("Product ID is required");const t=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(),credentials:"include",body:JSON.stringify({productId:e})});if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.error||`HTTP ${t.status}: Purchase failed`)}return await t.json()}catch(t){throw new Error(`Purchase failed: ${t.message}`)}}async getCoinOfferings(){return this.getOfferingsByType("coin")}},xs=({onClose:a})=>{const[s,n]=t.useState("coins"),[r,i]=t.useState([]),[o,l]=t.useState(!0),[c,d]=t.useState(null),[u,m]=t.useState(null);t.useEffect((()=>{h()}),[]);const h=async()=>{try{l(!0),m(null);const e=await gs.getCoinOfferings();i(e)}catch(e){m("Failed to load products. Please try again.")}finally{l(!1)}};return o?e.jsx(O,{title:"Store",onClose:a,style:{maxWidth:800,maxHeight:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(O,{title:"Store",onClose:a,style:{maxWidth:800,maxHeight:"80vh"},children:[e.jsx("div",{className:ms,children:e.jsx("button",{className:`${hs} ${"coins"===s?ps:""}`,onClick:()=>n("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"})}),u&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:u}),"coins"===s&&e.jsxs("div",{children:[e.jsx("div",{className:D.sectionHeader,children:"Available Coin Packs"}),0===r.length?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:r.map((t=>{return e.jsxs("div",{className:D.settingItem,style:{flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center",padding:"1.5rem",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",minHeight:"280px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80px",marginBottom:"1rem"},children:t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:t.name,style:{width:"64px",height:"64px",objectFit:"contain"},onError:e=>{e.target.style.display="none"}})}),e.jsxs("div",{style:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",marginBottom:"1rem"},children:[e.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#FFD700",margin:"0 0 0.5rem 0",textAlign:"center"},children:[(n=t.coinAmount,new Intl.NumberFormat("en-US").format(n))," Coins"]}),e.jsx("p",{style:{color:"#a0b9d6",fontSize:"0.875rem",margin:"0 0 0.75rem 0",textAlign:"center",lineHeight:"1.4"},children:t.description}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#bcdcff",textAlign:"center"},children:(s=t.priceUSD,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s))})]}),e.jsx("button",{onClick:()=>(async e=>{try{d(e),m(null),await gs.processPurchase(e),a()}catch(t){m(t.message||"Purchase failed. Please try again.")}finally{d(null)}})(t.id),disabled:c===t.id,className:D.primaryButton,style:{width:"100%",opacity:c===t.id?.6:1,cursor:c===t.id?"not-allowed":"pointer"},"data-gamepad-focusable":"true",children:c===t.id?e.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{className:_s,style:{marginRight:"0.5rem"}}),"Processing..."]}):"Purchase"})]},t.id);var s,n}))})]})]})},fs=()=>{const{user:a,logout:s,refreshUserData:n}=E(),{socket:r,isConnected:o}=I(),l=i(),[c,d]=t.useState(!1),[u,m]=t.useState(!1),h=e=>{if(!a?.id||!o)return;const t=e=>{r.off("gameCreated",t),e?.game?.id&&l(`/${e.game.id}`)};r.on("gameCreated",t),e?r.emit("createGame",{settings:e}):r.emit("createGame")};return e.jsxs("div",{className:ls.playerPanel,children:[e.jsxs("div",{className:ls.userSection,children:[e.jsx("div",{className:ls.avatarContainer,children:e.jsx(ze,{userId:a?.id,size:"medium",showName:!0,namePosition:"right"})}),e.jsx(at,{userId:a?.id,balance:a?.balance}),e.jsxs("div",{className:ls.headerButtons,children:[e.jsx("button",{className:ls.logoutButton,onClick:s,"data-gamepad-focusable":"true",children:e.jsx("span",{className:ls.buttonText,children:"Logout"})}),e.jsx(os,{"data-gamepad-focusable":"true"}),e.jsx(Xa,{"data-gamepad-focusable":"true"}),e.jsx(Za,{onClick:()=>m(!0),"data-gamepad-focusable":"true"}),e.jsx(It,{"data-gamepad-focusable":"true"})]})]}),e.jsx("div",{className:ls.divider}),e.jsxs("div",{className:ls.actionSection,children:[e.jsx("button",{className:`${ls.actionButton} ${ls.createButton}`,onClick:()=>h({numberOfBots:5}),disabled:!a?.username,"data-gamepad-focusable":"true",children:"Create Quick Game"}),e.jsx("button",{className:`${ls.actionButton} ${ls.createButton}`,onClick:()=>{d(!0)},disabled:!a?.username,"data-gamepad-focusable":"true",children:"Create Custom Game"})]}),c&&e.jsx(us,{onSubmit:e=>{d(!1),h(e)},onClose:()=>d(!1)}),u&&e.jsx(xs,{onClose:()=>{m(!1),n&&n()}})]})},js=({className:t="",width:a="1em",height:s="1em",...n})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`feather feather-lock ${t}`,width:a,height:s,...n,children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]});function vs({game:t,onJoin:a,userId:s}){const n=t.settings?.customName||`Game ${t.id}`,r=t.disconnectedPlayers?.some((e=>e.userId===s)),i=t.allPlayers?.some((e=>e.userId===s&&!e.disconnected));let o="Join",l=ke;r?(o="Reconnect",l+=` ${Ae}`):i&&(o="Continue",l+=` ${Ie}`);let c=fe;return r?c+=` ${je}`:i&&(c+=` ${ve}`),e.jsxs("div",{className:c,children:[" ",e.jsxs("div",{className:ye,children:[e.jsxs("div",{className:be,children:[" ",n,t.settings?.isPrivate&&e.jsxs("span",{className:Be,title:"Private Game",children:[e.jsx(js,{width:"0.9em",height:"0.9em",style:{marginRight:"4px",verticalAlign:"middle"}}),"Private"]}),r&&e.jsx("span",{className:Ne,title:"You're disconnected from this game",children:"⚠️ Reconnect"}),i&&e.jsx("span",{className:we,title:"You're in this game",children:"You're In"})]}),e.jsxs("div",{className:Ce,children:[" ",t.playerCount," ",1===t.playerCount?"player":"players"]})]}),e.jsx("button",{className:l,onClick:()=>a(t.id),disabled:!s,"data-gamepad-focusable":"true",children:o})]})}const ys=()=>{const{gameList:a,loading:s}=t.useContext(L),{user:n,logout:r}=E();Ue(n?.id);const{isConnected:o}=I();se(!0);const l=i(),[c,d]=t.useState("");h("(max-width:600px)");const u=h("(max-width:400px)"),m=n?.username?`user_${n.username}`:null;t.useEffect((()=>{n&&(n.username&&n.id||r())}),[n,r]);const p=e=>{o&&n&&(v.play("ui.click"),l(`/${e}`))},_=t.useMemo((()=>{if(!a)return[];let e=a;if(c.trim()){const t=c.trim().toLowerCase();e=a.filter((e=>e.id.toLowerCase().includes(t)))}return e.sort(((e,t)=>{const a=e.allPlayers?.some((e=>e.userId===m)),s=t.allPlayers?.some((e=>e.userId===m)),n=e.disconnectedPlayers?.some((e=>e.userId===m)),r=t.disconnectedPlayers?.some((e=>e.userId===m));return n&&!r?-1:!n&&r?1:a&&!s?-1:!a&&s?1:e.id.localeCompare(t.id)}))}),[a,c,m]);return e.jsxs("div",{className:me,children:[e.jsx(de,{}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"1.1em",marginBottom:"-0.6em"},children:e.jsx(De,{})}),e.jsx(fs,{}),e.jsxs("div",{className:he,children:[e.jsx("h2",{className:pe,children:"Available Games"}),e.jsx("div",{className:_e,children:e.jsx(Z,{title:"Search Games",placeholder:"Search games by ID",variant:"outlined",fullWidth:!0,value:c,onChange:e=>{d(e.target.value)},size:u?"small":"medium",type:"text",InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx("span",{className:ge,children:"🔍"})})}})}),_&&_.length>0?e.jsx("div",{className:xe,children:_.map((t=>e.jsx(vs,{game:t,onJoin:p,userId:m},t.id)))}):e.jsxs("div",{className:Se,children:[e.jsx("div",{className:Te,children:"🃏"}),e.jsx("p",{className:Pe,children:c.trim()?"No matching games found":"No games in progress"}),e.jsx("p",{className:$e,children:c.trim()?"Try a different search or create a new game":"Create a new game to get started!"})]})]})]})},bs="_gameContainer_e1zrv_1",Ns="_gameScreen_e1zrv_16",ws="_loadingContainer_e1zrv_52",Cs="_errorContainer_e1zrv_61",ks="_errorText_e1zrv_71",As="_gameInfoWrapper_e1zrv_76",Is="_gameBottomSection_e1zrv_91",Ss="_playerListContainer_e1zrv_98",Ts="_gameLogContainer_e1zrv_103",Ps="_imBackButton_e1zrv_141",$s={headerContainer:"_headerContainer_bsfrc_1",desktopLayout:"_desktopLayout_bsfrc_14",mobileLayout:"_mobileLayout_bsfrc_22",mobileTopRow:"_mobileTopRow_bsfrc_28",mobileRight:"_mobileRight_bsfrc_40",mobileActions:"_mobileActions_bsfrc_47",mobileBottomRow:"_mobileBottomRow_bsfrc_54",headerLeft:"_headerLeft_bsfrc_63",headerRight:"_headerRight_bsfrc_69",controlsGroup:"_controlsGroup_bsfrc_75",controlsStack:"_controlsStack_bsfrc_82",mobileControlsStack:"_mobileControlsStack_bsfrc_89",gameTitle:"_gameTitle_bsfrc_98",liveTag:"_liveTag_bsfrc_108",pulse:"_pulse_bsfrc_1",gameIdText:"_gameIdText_bsfrc_160",gameIdLink:"_gameIdLink_bsfrc_167",balanceDisplay:"_balanceDisplay_bsfrc_184",headerCenter:"_headerCenter_bsfrc_217",gamePhase:"_gamePhase_bsfrc_245",phaseIcon:"_phaseIcon_bsfrc_307",phaseText:"_phaseText_bsfrc_312",timerBar:"_timerBar_bsfrc_316",timerProgress:"_timerProgress_bsfrc_326",dealPulse:"_dealPulse_bsfrc_1",betPulse:"_betPulse_bsfrc_1",revealFade:"_revealFade_bsfrc_1",resultPulse:"_resultPulse_bsfrc_1",phaseBettingYourTurn:"_phaseBettingYourTurn_bsfrc_480",phaseBettingWaiting:"_phaseBettingWaiting_bsfrc_487",reveal:"_reveal_bsfrc_1",sparkle:"_sparkle_bsfrc_1",timerDrain:"_timerDrain_bsfrc_1"},Bs=({color:t="currentColor",size:a=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Es=({onClick:t,title:a="Leave Game",...s})=>e.jsx(At,{icon:e.jsx(Bs,{color:"white",size:20}),title:a,onClick:t,variant:"danger",...s}),Ls={waiting:{text:"Waiting for Players",icon:"👥"},dealing:{text:"Dealing Cards",icon:as},revealing:{text:"Revealing Cards",icon:"🥁"},results:{text:"Round Results",icon:"🏆"}},Ms=({handleLeaveGame:a,onModalStateChange:s})=>{const{gameState:n,gameId:r}=Kt(),{socket:i}=I(),{user:o}=E(),l=i?.auth?.userId,c=l&&n?.players?n.players[l]:null,d=c?.balance??o?.balance??0,u=n?.phase||"waiting",m=c?.isReady||!1,[h,p]=t.useState(null),[_,g]=t.useState(!1),[x,f]=t.useState(!1),[j,v]=t.useState(!1),[y,b]=t.useState(!1),[N,w]=t.useState(!1);t.useEffect((()=>{let e;return"dealing"===u?(p(rs.DEALING_DURATION),e=setInterval((()=>{p((e=>Math.max(0,e-100)))}),100)):"betting"===u?(p(rs.BETTING_DURATION),e=setInterval((()=>{p((e=>Math.max(0,e-100)))}),100)):"revealing"===u?(p(rs.REVEALING_DURATION),e=setInterval((()=>{p((e=>Math.max(0,e-100)))}),100)):"results"===u?(p(rs.RESULTS_DURATION),e=setInterval((()=>{p((e=>Math.max(0,e-100)))}),100)):p(null),()=>{e&&clearInterval(e)}}),[u,n?.waitingForAceDecision]),t.useEffect((()=>{s&&s(_||x||j||y||N)}),[_,x,j,y,N,s]);let C=Ls[u]||{text:"Unknown Phase",icon:"❓"};n?.waitingForAceDecision&&"dealing"===u&&(C={text:"Choosing Ace Value",icon:"🤔"}),n?.waitingForSecondChance&&(C={text:"Second Chance Decision",icon:"🤔"});const k=i&&i.auth?.userId&&n?.currentPlayerId===i.auth.userId;if("betting"===u&&n?.currentPlayerId&&n?.players){const e=n.players[n.currentPlayerId];C=e?k?{text:"Pass or Bet",icon:"🤔"}:{text:`${e.name} is Betting`,icon:"🤔"}:{text:"Betting Round",icon:"🤔"}}return e.jsxs("div",{className:$s.headerContainer,children:[e.jsxs("div",{className:$s.desktopLayout,children:[e.jsxs("div",{className:$s.headerLeft,children:[e.jsxs("h1",{className:$s.gameTitle,children:["In Between ",e.jsx("span",{className:$s.liveTag,children:"LIVE"})]}),e.jsx("p",{className:$s.gameIdText,children:e.jsxs("span",{className:$s.gameIdLink,onClick:()=>g(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",r]})})]}),e.jsx("div",{className:$s.headerCenter,children:e.jsxs("div",{className:`${$s.gamePhase} ${"betting"===u?k?$s.phaseBettingYourTurn:$s.phaseBettingWaiting:$s[`phase${u.charAt(0).toUpperCase()+u.slice(1)}`]}`,"data-phase":u,children:[e.jsx("span",{className:$s.phaseIcon,children:C.icon}),e.jsx("span",{className:$s.phaseText,children:C.text}),null!==h&&e.jsx("div",{className:$s.timerBar,children:e.jsx("div",{className:$s.timerProgress,style:{width:h/("dealing"===u?rs.DEALING_DURATION:"betting"===u?rs.BETTING_DURATION:"revealing"===u?rs.REVEALING_DURATION:rs.RESULTS_DURATION)*100+"%"}})})]})}),e.jsx("div",{className:$s.headerRight,children:e.jsxs("div",{className:$s.controlsStack,children:[e.jsxs("div",{className:$s.balanceDisplay,children:["Balance: ",e.jsx(tt,{amount:Number(d),size:"small"})]}),e.jsxs("div",{className:$s.controlsGroup,children:[e.jsx(It,{onModalStateChange:v,"data-gamepad-focusable":"true"}),e.jsx(os,{onModalStateChange:b,"data-gamepad-focusable":"true"}),e.jsx(Xa,{onModalStateChange:w,"data-gamepad-focusable":"true"}),e.jsx(Za,{onClick:()=>f(!0),"data-gamepad-focusable":"true"}),e.jsx(Es,{onClick:a,disabled:m,"data-gamepad-focusable":"true"})]})]})})]}),e.jsxs("div",{className:$s.mobileLayout,children:[e.jsxs("div",{className:$s.mobileTopRow,children:[e.jsxs("div",{className:$s.headerLeft,children:[e.jsxs("h1",{className:$s.gameTitle,children:["In Between ",e.jsx("span",{className:$s.liveTag,children:"LIVE"})]}),e.jsx("p",{className:$s.gameIdText,children:e.jsxs("span",{className:$s.gameIdLink,onClick:()=>g(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",r]})})]}),e.jsx("div",{className:$s.mobileRight,children:e.jsxs("div",{className:$s.mobileControlsStack,children:[e.jsxs("div",{className:$s.balanceDisplay,children:["Balance: ",e.jsx(tt,{amount:Number(d),size:"small"})]}),e.jsxs("div",{className:$s.mobileActions,children:[e.jsx(It,{onModalStateChange:v,"data-gamepad-focusable":"true"}),e.jsx(os,{onModalStateChange:b,"data-gamepad-focusable":"true"}),e.jsx(Xa,{onModalStateChange:w,"data-gamepad-focusable":"true"}),e.jsx(Za,{onClick:()=>f(!0),"data-gamepad-focusable":"true"}),e.jsx(Es,{onClick:a,disabled:m,"data-gamepad-focusable":"true"})]})]})})]}),e.jsx("div",{className:$s.mobileBottomRow,children:e.jsxs("div",{className:`${$s.gamePhase} ${"betting"===u?k?$s.phaseBettingYourTurn:$s.phaseBettingWaiting:$s[`phase${u.charAt(0).toUpperCase()+u.slice(1)}`]}`,"data-phase":u,children:[e.jsx("span",{className:$s.phaseIcon,children:C.icon}),e.jsx("span",{className:$s.phaseText,children:C.text}),null!==h&&e.jsx("div",{className:$s.timerBar,children:e.jsx("div",{className:$s.timerProgress,style:{width:h/("dealing"===u?rs.DEALING_DURATION:"betting"===u?rs.BETTING_DURATION:"revealing"===u?rs.REVEALING_DURATION:rs.RESULTS_DURATION)*100+"%"}})})]})})]}),_&&e.jsx(ia,{onClose:()=>g(!1),gameData:n}),x&&e.jsx(xs,{onClose:()=>f(!1)})]})},Ds={cardDisplayContainer:"_cardDisplayContainer_h5xgf_1",cardsRow:"_cardsRow_h5xgf_9",card:"_card_h5xgf_1",dealingPhase:"_dealingPhase_h5xgf_53",revealingPhase:"_revealingPhase_h5xgf_62",cardBack:"_cardBack_h5xgf_88",redCard:"_redCard_h5xgf_97",blackCard:"_blackCard_h5xgf_101",cardCorner:"_cardCorner_h5xgf_105",bottomRight:"_bottomRight_h5xgf_114",cardValue:"_cardValue_h5xgf_122",cardSuit:"_cardSuit_h5xgf_128",cardCenter:"_cardCenter_h5xgf_133",aceCard:"_aceCard_h5xgf_166",aceIndicator:"_aceIndicator_h5xgf_170",aceHigh:"_aceHigh_h5xgf_190",aceLow:"_aceLow_h5xgf_196",indicatorContent:"_indicatorContent_h5xgf_202"},Rs=({direction:t="up",color:a="currentColor",size:s=24})=>{const n="down"===t?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},Os=()=>{const{gameState:t}=Kt();if(!t)return e.jsx("div",{className:Ds.loading,children:"Loading game state..."});const{firstCard:a,secondCard:s,thirdCard:n,phase:r,dealer:i}=t,o={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},l={hearts:"♥",diamonds:"♦",clubs:"♣",spades:"♠","♥":"♥","♦":"♦","♣":"♣","♠":"♠"},c=(t,a)=>{if(!t)return e.jsx("div",{className:Ds.card,children:e.jsx("div",{className:Ds.cardBack})},`empty-${a}`);const s="♥"===(n=t.suit)||"♦"===n||"hearts"===n||"diamonds"===n;var n;const r="A"===t.value,i=t.isAceLow,c=1===a;return e.jsxs("div",{className:`${Ds.card} ${s?Ds.redCard:Ds.blackCard} ${r?Ds.aceCard:""}`,children:[r&&!c&&e.jsx("div",{className:`${Ds.aceIndicator} ${i?Ds.aceLow:Ds.aceHigh} ${s?Ds.redCard:Ds.blackCard}`,children:i?e.jsxs("span",{className:Ds.indicatorContent,children:["LOW ",e.jsx(Rs,{direction:"down",color:s?"#e74c3c":"#2c3e50",size:16})]}):e.jsxs("span",{className:Ds.indicatorContent,children:["HIGH ",e.jsx(Rs,{direction:"up",color:s?"#e74c3c":"#2c3e50",size:16})]})}),e.jsxs("div",{className:Ds.cardCorner,children:[e.jsx("div",{className:Ds.cardValue,children:o[t.value]}),e.jsx("div",{className:Ds.cardSuit,children:l[t.suit]})]}),e.jsx("div",{className:Ds.cardCenter,children:l[t.suit]}),e.jsxs("div",{className:`${Ds.cardCorner} ${Ds.bottomRight}`,children:[e.jsx("div",{className:Ds.cardValue,children:o[t.value]}),e.jsx("div",{className:Ds.cardSuit,children:l[t.suit]})]})]},`${t.value}-${t.suit}-${a}`)};return e.jsx("div",{className:Ds.cardDisplayContainer,children:e.jsx("div",{className:`${Ds.cardsRow} ${"dealing"===r?Ds.dealingPhase:""} ${"revealing"===r?Ds.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return a||s||n?(a&&(e[0]={...a}),s&&(e[2]={...s}),n&&(e[1]={...n}),e.map(((e,t)=>c(e,t)))):e.map(((e,t)=>c(e,t)))})()})})},Fs="_bettingPanel_1uxgg_1",Us="_betContainer_1uxgg_19",zs="_betText_1uxgg_28",Gs="_extremeOptionsRow_1uxgg_45",Ws="_betButtons_1uxgg_60",qs="_betButton_1uxgg_60",Hs="_disabledButton_1uxgg_110",Vs="_extremeButton_1uxgg_117",Js="_passButton_1uxgg_131",Ks="_customBetContainer_1uxgg_141",Ys="_customBetInput_1uxgg_155",Xs="_customBetButton_1uxgg_166",Qs="_potButton_146vb_5",Zs="_shimmerBorder_146vb_47",en="_buttonBackground_146vb_81",tn="_reflectionEffect_146vb_101",an="_buttonContent_146vb_148",sn="_potText_146vb_164",nn="_potAmount_146vb_185",rn="_disabled_146vb_258",on=({amount:t,disabled:a,onClick:s,...n})=>e.jsxs("button",{className:`${Qs} ${a?rn:""}`,onClick:s,disabled:a,"aria-label":`Bet the pot: ${t} chips`,...n,children:[e.jsx("div",{className:Zs}),e.jsx("div",{className:en}),e.jsx("div",{className:tn}),e.jsxs("div",{className:an,children:[e.jsx("span",{className:sn,children:"POT"}),e.jsx("span",{className:nn,children:e.jsx(tt,{amount:t,background:"pill"})})]})]}),ln=()=>{const{gameState:a,placeBet:s}=Kt(),{socket:n}=I(),[r,i]=t.useState("");if(!a)return null;const{players:o,currentPlayerId:l,pot:c,phase:d,firstCard:u,secondCard:m}=a;if("betting"!==d)return null;const h=n&&l===n.auth?.userId,p=n&&o&&n.auth?.userId?o[n.auth.userId]:null,_=Number(p?.balance||0),g=e=>{const t=e.target.value.replace(/[^0-9]/g,""),a=Math.min(c,_);t&&parseInt(t)>a?i(a.toString()):i(t)},x=()=>{if(r&&!isNaN(r)){const e=parseInt(r,10);e>=1&&e<=Math.min(c,_)&&(s(e),i(""))}},f=e=>{"Enter"===e.key&&x()};return h?e.jsx("div",{className:Fs,children:h?e.jsxs("div",{className:Us,children:[e.jsxs("p",{className:zs,children:["Place your bet (Min: ",e.jsx(tt,{amount:1}),", Max: ",e.jsx(tt,{amount:Math.min(c,_)}),")"]}),e.jsxs("div",{className:Gs,children:[e.jsx("button",{className:`${qs} ${Vs} ${Js}`,onClick:()=>s(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),e.jsx(on,{amount:c,onClick:()=>s(c),disabled:c>_,"data-gamepad-focusable":"true"})]}),e.jsxs("div",{className:Ws,children:[[1,2,5].map((t=>{const a=Math.min(c,_),n=t>a;return e.jsx("button",{className:`${qs} ${n?Hs:""}`,onClick:()=>s(t),disabled:n,"data-gamepad-focusable":"true",children:e.jsx(tt,{amount:t})},t)})),e.jsxs("div",{className:Ks,children:[e.jsx(cs,{title:"Enter Bet Amount",type:"number",className:Ys,placeholder:"Custom",value:r,onChange:g,onKeyPress:f}),e.jsx("button",{className:Xs,onClick:x,disabled:!r,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},cn="_playersContainer_1etil_1",dn="_playersTitle_1etil_15",un="_playersList_1etil_38",mn="_playerItem_1etil_44",hn="_currentPlayer_1etil_72",pn="_currentUser_1etil_78",_n="_playerInfo_1etil_82",gn="_playerName_1etil_89",xn="_playerStatus_1etil_94",fn="_disconnectedIndicator_1etil_101",jn="_playerBalanceContainer_1etil_108",vn="_playerBalance_1etil_108",yn="_balanceIncrease_1etil_127",bn="_balanceDecrease_1etil_131",Nn="_readyIndicator_1etil_161",wn="_ready_1etil_161",Cn="_notReady_1etil_172",kn="_sittingOut_1etil_176",An="_emptyPlayerList_1etil_191",In=()=>{const{gameState:a}=Kt(),{socket:s}=I(),n=t.useContext(Oe);if(t.useEffect((()=>{if(a?.players&&n){const e=Object.values(a.players).map((e=>e.userId)).filter(Boolean);e.length>0&&n.prefetchUsers(e)}}),[a?.players,n]),!a||!a.players)return e.jsx("div",{className:An,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:r,currentPlayerId:i,dealerId:o,gameTransactions:l=[]}=a,c=s?.auth?.userId,d=a.totals||{};return r&&0!==Object.keys(r).length?e.jsxs("div",{className:cn,children:[e.jsx("h3",{className:dn,children:"Scoreboard"}),e.jsx("div",{className:un,children:a.seats.filter((e=>null!==e&&r[e])).map((t=>{const a=r[t],s=t===i,n=a.userId===c,l=t===o;return a.disconnected,e.jsxs("div",{className:`\n                  ${mn}\n                  ${s?hn:""}\n                  ${n?pn:""}\n                `,children:[e.jsxs("div",{className:_n,children:[e.jsx(ze,{userId:a.userId,size:"small",showName:!1}),e.jsxs("span",{className:gn,children:[a.name,e.jsxs("span",{className:xn,children:[l&&` ${as}`,a.disconnected&&e.jsx("span",{className:fn,title:"Player disconnected",children:"⚠️ Disconnected"})]})]})]}),e.jsxs("div",{className:jn,children:[e.jsx(Sn,{balance:d[t]||0}),e.jsx("div",{className:`\n                    ${Nn} \n                    ${a.isSittingOut?kn:a.isReady?wn:Cn}\n                  `,title:a.isSittingOut?"Sitting Out":a.isReady?"Ready":"Not Ready"})]})]},t)}))})]}):e.jsx("div",{className:An,children:e.jsx("p",{children:"Waiting for players to join..."})})},Sn=({balance:a})=>{const[s,n]=t.useState(a),[r,i]=t.useState(""),o=t.useRef(null);return t.useEffect((()=>{if(a!==s){i(a>s?yn:bn),o.current&&clearTimeout(o.current),o.current=setTimeout((()=>{i("")}),1e3),n(a)}return()=>{o.current&&clearTimeout(o.current)}}),[a]),e.jsx("span",{className:`${vn} ${r}`,children:e.jsx(tt,{amount:a})})},Tn="_potDisplayContainer_1seua_1",Pn="_potIconWrapper_1seua_29",$n="_potIcon_1seua_29",Bn="_potInfo_1seua_55",En="_potLabel_1seua_61",Ln="_potAmount_1seua_73",Mn="_potCounter_1seua_80",Dn=()=>{const{gameState:t}=Kt();if(!t)return null;const{pot:a,round:s=1}=t;return e.jsxs("div",{className:Tn,children:[e.jsx("div",{className:Pn,children:e.jsx("span",{className:$n,children:ts})}),e.jsxs("div",{className:Bn,children:[e.jsxs("h3",{className:En,children:["POT ",e.jsxs("span",{className:Mn,children:["(",s,")"]})]}),e.jsx("span",{className:Ln,children:e.jsx(tt,{amount:a,size:"medium"})})]})]})},Rn="_deckDisplayContainer_1nuck_1",On="_deckVisual_1nuck_29",Fn="_deckIcon_1nuck_37",Un="_deckThick_1nuck_45",zn="_deckMedium_1nuck_46",Gn="_deckThin_1nuck_47",Wn="_deckVeryThin_1nuck_48",qn="_deckInfo_1nuck_95",Hn="_deckLabel_1nuck_101",Vn="_deckCount_1nuck_113",Jn="_deckCounter_1nuck_120",Kn=()=>{const{gameState:t}=Kt();if(!t)return null;const{deckSize:a=0,deckCount:s=1}=t;return e.jsxs("div",{className:Rn,children:[e.jsx("div",{className:`${On} ${a>=40?Un:a>=25?zn:a>=10?Gn:Wn}`,children:e.jsx("div",{className:Fn,children:ns})}),e.jsxs("div",{className:qn,children:[e.jsxs("h3",{className:Hn,children:["DECK ",e.jsxs("span",{className:Jn,children:["(",s,")"]})]}),e.jsx("span",{className:Vn,children:a})]})]})},Yn="_anteControlsWrapper_kosev_1",Xn="_controlsContainer_kosev_8",Qn="_autoAnteContainer_kosev_25",Zn="_anteButton_kosev_32",er="_backOutButton_kosev_32",tr="_shimmerBorder_kosev_107",ar="_anteIcon_kosev_225",sr="_backOutIcon_kosev_225",nr="_buttonInfo_kosev_244",rr="_buttonLabel_kosev_250",ir="_buttonAmount_kosev_267",or="_notEnoughChipsText_kosev_282",lr="_buttonContainerRow_kosev_294",cr="_sitOutHalfWidth_kosev_304",dr="_toggleContainer_11qbc_1",ur="_toggleLabel_11qbc_12",mr="_toggleInput_11qbc_19",hr="_toggleSlider_11qbc_25",pr="_toggleText_11qbc_74",_r="_loading_11qbc_82",gr=()=>{const{preferences:t,toggleAutoAnte:a,loading:s}=lt(),{gameState:n,playerReady:r}=Kt(),{socket:i}=I();return s?e.jsx("div",{className:_r,children:"Loading preferences..."}):e.jsx("div",{className:dr,children:e.jsxs("label",{className:ur,children:[e.jsx("input",{type:"checkbox",checked:t.autoAnte,onChange:async()=>{const e=!t.autoAnte,s=await a();if(e&&s&&r){let e=null;if(i&&i.auth?.userId&&n?.players){const t=Object.keys(n.players);for(const a of t)if(n.players[a].userId===i.auth.userId){e=n.players[a];break}}const t=e?.isReady;t||r()}},className:mr,"data-gamepad-focusable":"true"}),e.jsx("span",{className:hr}),e.jsx("span",{className:pr,children:"Auto-Ante"})]})})},xr=()=>{const{gameState:t,playerReady:a,playerUnready:s}=Kt(),{socket:n}=I(),{user:r}=E();if(!t)return null;const{players:i,anteAmount:o,phase:l}=t;if("waiting"!==l)return null;let c=null;if(n&&n.auth?.userId&&i){const e=Object.keys(i);for(const t of e)if(i[t].userId===n.auth.userId){c=i[t];break}}else if(r&&i){const e=Object.keys(i);for(const t of e)if(i[t].userId===r.id){c=i[t];break}}const d=Number(c?.balance||0),u=c?.isReady,m=d>=o;return e.jsx("div",{className:Yn,children:e.jsxs("div",{className:Xn,children:[e.jsx("div",{className:lr,children:u?e.jsx("div",{className:lr,children:e.jsxs("button",{className:er,onClick:()=>{"function"==typeof s&&s()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:tr}),e.jsx("span",{className:sr,children:"✕"}),e.jsx("div",{className:nr,children:e.jsx("h3",{className:rr,children:"BACK OUT"})})]})}):e.jsxs("div",{className:lr,children:[e.jsxs("button",{className:Zn,onClick:a,disabled:!m,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:tr}),e.jsx("span",{className:ar,children:ss}),e.jsxs("div",{className:nr,children:[e.jsx("h3",{className:rr,children:"ANTE"}),e.jsx("span",{className:ir,children:e.jsx(tt,{amount:o})})]})]}),e.jsxs("button",{className:`${er} ${cr}`,onClick:()=>{n&&t&&r&&n.emit("sitOut",{gameId:t.id,userId:n.auth?.userId||r.id})},disabled:c?.isSittingOut,title:c?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:tr}),e.jsx("div",{className:nr,children:e.jsx("h3",{className:rr,children:"SIT OUT"})})]}),!m&&e.jsxs("p",{className:or,children:["Not enough coins (",e.jsx(tt,{amount:o})," required)"]})]})}),e.jsx("div",{className:Qn,children:e.jsx(gr,{})})]})})},fr={resultsPanel:"_resultsPanel_ayp0x_1",resultContent:"_resultContent_ayp0x_19",resultText:"_resultText_ayp0x_27",winText:"_winText_ayp0x_34",tieText:"_tieText_ayp0x_39",loseText:"_loseText_ayp0x_50",winningsText:"_winningsText_ayp0x_55",countdownContainer:"_countdownContainer_ayp0x_62",countdownText:"_countdownText_ayp0x_67",countdownProgress:"_countdownProgress_ayp0x_74",countdownBar:"_countdownBar_ayp0x_82",penaltyWarning:"_penaltyWarning_ayp0x_95"},jr=()=>{const{gameState:t}=Kt();if(!t.result)return null;const{result:a,players:s,resultCountdown:n}=t,r=s[a.playerId]?.name;return e.jsx("div",{className:fr.resultsPanel,children:e.jsxs("div",{className:fr.resultContent,children:[(()=>{switch(a.outcome){case"win":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${fr.resultText} ${fr.winText}`,children:[r," WON!"]}),a.winnings>0&&e.jsxs("p",{className:fr.winningsText,children:["Winnings: ",e.jsx(tt,{amount:a.winnings/2,size:"medium"})]})]});case"lose":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${fr.resultText} ${fr.loseText}`,children:[r," LOST!"]}),a.betAmount>0&&e.jsxs("p",{className:fr.winningsText,children:["Loss: ",e.jsx(tt,{amount:a.betAmount,size:"medium"})]})]});case"tie":return(()=>{const t=a.betAmount*(a.isTripleAceTie?3:2);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:fr.penaltyWarning,children:e.jsx("div",{className:fr.cautionTape})}),e.jsxs("h2",{className:`${fr.resultText} ${fr.tieText}`,children:[r," ",a.isTripleAceTie?"3X":"2X"," PENALTY!"]}),a.betAmount>0&&e.jsxs("p",{className:fr.winningsText,children:["Penalty: ",e.jsx(tt,{amount:t,size:"medium"})]})]})})();default:return null}})(),n&&e.jsxs("div",{className:fr.countdownContainer,children:[e.jsxs("p",{className:fr.countdownText,children:["Next hand in: ",n.countdownSeconds,"s"]}),e.jsx("div",{className:fr.countdownProgress,children:e.jsx("div",{className:fr.countdownBar,style:{width:n.countdownSeconds/5*100+"%"}})})]})]})})},vr="_aceChoicePanel_1y6rg_1",yr="_aceChoiceControls_1y6rg_18",br="_aceChoiceText_1y6rg_31",Nr="_waitingMessage_1y6rg_39",wr="_waitingText_1y6rg_53",Cr="_countdown_1y6rg_60",kr="_aceChoiceButtons_1y6rg_66",Ar="_aceChoiceButton_1y6rg_66",Ir="_aceHighButton_1y6rg_100",Sr="_aceLowButton_1y6rg_111",Tr="_buttonContent_1y6rg_122",Pr=()=>{const{socket:a}=I(),{gameState:s}=Kt(),{user:n}=E(),[r,i]=t.useState(15);t.useEffect((()=>{if(s?.waitingForAceDecision&&a?.auth?.userId===s.currentPlayerId){i(15);const e=setInterval((()=>{i((t=>t<=1?(clearInterval(e),0):t-1))}),1e3);return()=>clearInterval(e)}}),[s?.waitingForAceDecision,s?.currentPlayerId,a?.auth?.userId]);const o=e=>{a.emit("chooseAceValue",{isAceLow:e})},l=a?.auth?.userId===s.currentPlayerId,c=s.players[s.currentPlayerId]?.name||"Current player";return e.jsxs("div",{className:vr,children:[l?e.jsxs("div",{className:yr,children:[e.jsxs("p",{className:br,children:["You've been dealt an Ace! Choose whether it should be high or low.",e.jsxs("span",{className:Cr,children:[" (",r,"s)"]})]}),e.jsxs("div",{className:kr,children:[e.jsx("button",{className:`${Ar} ${Ir}`,onClick:()=>o(!1),"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsxs("span",{className:Tr,children:["ACE HIGH ",e.jsx(Rs,{direction:"up",color:"white",size:20})]})}),e.jsx("button",{className:`${Ar} ${Sr}`,onClick:()=>o(!0),"data-gamepad-focusable":"true",children:e.jsxs("span",{className:Tr,children:["ACE LOW ",e.jsx(Rs,{direction:"down",color:"white",size:20})]})})]})]}):null,l?null:e.jsx("div",{className:Nr,children:e.jsxs("p",{className:wr,children:[c," is choosing whether their Ace is high or low..."]})})]})},$r="_secondChancePanel_mgk8a_1",Br="_secondChanceControls_mgk8a_18",Er="_secondChanceText_mgk8a_31",Lr="_waitingMessage_mgk8a_40",Mr="_waitingText_mgk8a_54",Dr="_countdown_mgk8a_61",Rr="_secondChanceButtons_mgk8a_68",Or="_secondChanceButton_mgk8a_68",Fr="_anteAgainButton_mgk8a_94",Ur="_passButton_mgk8a_107",zr="_currencyWrapper_mgk8a_120",Gr=()=>{const{gameState:a}=Kt(),{socket:s}=I(),[n,r]=t.useState(!1),[i,o]=t.useState(null),[l,c]=t.useState(15);t.useEffect((()=>{if(a?.waitingForSecondChance&&s?.auth?.userId===a.currentPlayerId){c(15);const e=setInterval((()=>{c((t=>t<=1?(clearInterval(e),0):t-1))}),1e3);return()=>clearInterval(e)}}),[a?.waitingForSecondChance,a?.currentPlayerId,s?.auth?.userId]);const{players:d,currentPlayerId:u,anteAmount:m=1}=a,h=s&&u===s.auth?.userId,p=d[u],_=e=>{s&&(r(!0),o(e?"ante":"pass"),s.emit("secondChance",{anteAgain:e}))};return e.jsxs("div",{className:$r,children:[h?e.jsxs("div",{className:Br,children:[e.jsxs("p",{className:Er,children:["Would you like to ante up again for a second chance?",e.jsxs("span",{className:Dr,children:[" (",l,"s)"]})]}),e.jsxs("div",{className:Rr,children:[e.jsx("button",{className:`${Or} ${Fr}`,onClick:()=>_(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:n&&"ante"===i?"Processing...":e.jsxs(e.Fragment,{children:["Ante Up ",e.jsx("span",{className:zr,children:e.jsx(tt,{amount:m,size:"small"})})]})}),e.jsx("button",{className:`${Or} ${Ur}`,onClick:()=>_(!1),"data-gamepad-focusable":"true",children:n&&"pass"===i?"Processing...":"Pass"})]})]}):null,h?null:e.jsx("div",{className:Lr,children:e.jsxs("p",{className:Mr,children:[p?.name," is deciding whether to take a second chance."]})})]})},Wr="_gameLogContainer_1c2o8_1",qr="_gameLogHeader_1c2o8_10",Hr="_expandIcon_1c2o8_28",Vr="_gameLogEntries_1c2o8_51",Jr="_expanded_1c2o8_61",Kr="_logEntry_1c2o8_65",Yr="_logTime_1c2o8_90",Xr="_logMessage_1c2o8_97",Qr="_emptyLog_1c2o8_102",Zr="_showMoreButton_1c2o8_110",ei=()=>{const{gameState:a}=Kt(),[s,n]=t.useState(!1);if(!a||!a.gameLog)return null;const r=a.gameLog||[],i=()=>{n(!s)},o=s?r:r.slice(0,5);return e.jsxs("div",{className:Wr,children:[e.jsxs("div",{className:qr,onClick:i,children:[e.jsx("h3",{children:"Game Log"}),e.jsx("span",{className:Hr,children:s?"▲":"▼"})]}),e.jsx("div",{className:`${Vr} ${s?Jr:""}`,children:0===o.length?e.jsx("div",{className:Qr,children:"No game events yet"}):o.map(((t,a)=>{return e.jsxs("div",{className:Kr,children:[e.jsx("span",{className:Yr,children:(s=t.timestamp,new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),e.jsx("span",{className:Xr,children:t.message})]},a);var s}))}),!s&&r.length>5&&e.jsxs("div",{className:Zr,onClick:i,children:["Show ",r.length-5," more entries"]})]})},ti="_emojiReactions_19n7s_1",ai="_toggleButton_19n7s_8",si="_emojiPanel_19n7s_34",ni="_emojiGrid_19n7s_59",ri="_emojiButton_19n7s_65",ii=()=>{const[a,s]=t.useState(!1),{socket:n}=I(),{gameState:r}=Kt(),{user:i}=E();return e.jsxs("div",{className:ti,children:[e.jsx("button",{className:ai,onClick:()=>{s(!a)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"😊"}),a&&e.jsx("div",{className:si,children:e.jsx("div",{className:ni,children:[{emoji:"🔥",name:"Fire",color:"#FF6B35"},{emoji:"😄",name:"Happy",color:"#FFD93D"},{emoji:"💩",name:"Poop",color:"#8B4513"},{emoji:"😎",name:"Cool",color:"#4A5568"},{emoji:"🤯",name:"Mind Blown",color:"#FFA500"},{emoji:"😈",name:"Devilish",color:"#9333EA"},{emoji:"😬",name:"Worried",color:"#FCD34D"},{emoji:"👏",name:"Applause",color:"#FBBF24"},{emoji:"😭",name:"Crying",color:"#3B82F6"},{emoji:"🤡",name:"Clown",color:"#EF4444"},{emoji:"💪",name:"Strong",color:"#F59E0B"},{emoji:"😅",name:"Nervous",color:"#60A5FA"},{emoji:"🎉",name:"Celebration",color:"#A855F7"},{emoji:"🤔",name:"Thinking",color:"#6B7280"},{emoji:"🙈",name:"See No Evil",color:"#A0522D"},{emoji:"😤",name:"Confident",color:"#DC2626"}].map(((t,a)=>e.jsx("button",{className:ri,onClick:()=>(e=>{n&&r&&i&&(n.emit("emojiReaction",{gameId:r.id,emoji:e.emoji,color:e.color,playerName:i.username}),s(!1))})(t),"data-gamepad-focusable":"true",title:t.name,style:{"--emoji-color":t.color},children:t.emoji},a)))})})]})},oi=({onReturnToLobby:a})=>{const[s,n]=t.useState(!1),{gameState:r,error:i,clearError:o}=Kt();se(!0),t.useEffect((()=>{if(i){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[i,o]);const{socket:l}=I(),{user:c}=E();if(!r)return e.jsx("div",{className:ws,children:e.jsx("p",{children:"Loading game state..."})});const d=r.phase||"waiting",u=c?.id,m=r.players&&u?r.players[u]:null;return e.jsxs("div",{className:bs,children:[e.jsxs("div",{className:`${Ns} mobile-scale-content`,children:[e.jsx(Ms,{handleLeaveGame:()=>{a&&a()},onModalStateChange:n}),i&&e.jsx("div",{className:Cs,children:e.jsx("p",{className:ks,children:i})}),e.jsxs("div",{className:As,children:[e.jsx(Kn,{}),e.jsx(Dn,{})]}),e.jsx(Os,{}),m?.isSittingOut?e.jsx("button",{onClick:()=>{l&&r.id&&l.emit("imBack",{gameId:r.id})},className:Ps,"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===d?e.jsx(xr,{}):"results"===d?e.jsx(jr,{}):r.waitingForAceDecision?e.jsx(Pr,{}):r.waitingForSecondChance?e.jsx(Gr,{}):"betting"===d?e.jsx(ln,{}):null,e.jsxs("div",{className:Is,children:[e.jsx("div",{className:Ss,children:e.jsx(In,{})}),e.jsx("div",{className:Ts,children:e.jsx(ei,{})})]})]}),!s&&e.jsx(ii,{})]})},li="_modalOverlay_quw6f_1",ci="_modalContent_quw6f_14",di="_passwordInput_quw6f_34",ui="_modalActions_quw6f_52",mi="_modalButton_quw6f_58",hi="_cancelButton_quw6f_69",pi="_submitButton_quw6f_78";function _i({isOpen:a,onClose:s,onSubmit:n,gameId:r}){const[i,o]=t.useState("");if(!a)return null;return e.jsx("div",{className:li,children:e.jsxs("div",{className:ci,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:r||""}),":"]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(i),o("")},children:[e.jsx(cs,{title:"Enter Game Password",type:"password",value:i,onChange:e=>o(e.target.value),className:di,autoFocus:!0,required:!0}),e.jsxs("div",{className:ui,children:[e.jsx("button",{type:"button",onClick:()=>{o(""),s()},className:`${mi} ${hi}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${mi} ${pi}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const gi=()=>{const{gameId:a}=o(),s=i(),{socket:n,isConnected:r}=I(),[l,c]=t.useState(!0),[d,u]=t.useState(null),[m,h]=t.useState(!1),p=t.useRef(!1),_=t.useCallback((()=>{n&&r&&a&&(v.play("ui.leave"),n.emit("leaveGame",{gameId:a}),s("/"))}),[n,r,a,s]),g=t.useCallback((e=>{h(!1),n&&a&&e&&(u(null),n.emit("joinGame",{gameId:a,password:e}),c(!0))}),[n,a]),x=t.useCallback((()=>{h(!1),s("/")}),[s]);t.useEffect((()=>{u(null),h(!1),c(!0)}),[a]),t.useEffect((()=>{if(!n)return;const e=e=>{e&&e.game&&e.game.id===a&&(v.play("ui.join"),c(!1),u(null),h(!1))},t=e=>{const t=e.message||"An unknown error occurred";"Password required"===t?(h(!0),c(!1),u(null)):"Invalid password"===t?(u("Invalid password."),h(!0),c(!1)):"Game not found"===t?s("/"):"Game is full"===t?(u(t),c(!1),h(!1),setTimeout((()=>s("/")),3e3)):(u(t),c(!1),h(!1))};return n.on("gameJoined",e),n.on("error",t),()=>{n.off("gameJoined",e),n.off("error",t)}}),[n,a,s]),t.useEffect((()=>{n&&a&&!p.current&&(p.current=!0,c(!0),u(null),h(!1),n.emit("joinGame",{gameId:a}))}),[n,a]);const f=()=>{const{gameState:s}=Kt(),{socket:n}=I();return t.useEffect((()=>{const e=e=>{const t=n?.auth?.userId,a=t&&s?.players?s.players[t]:null;if(a?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(_i,{isOpen:m,onClose:x,onSubmit:g,gameId:a}),l&&e.jsx(C,{message:`Joining game ${a}...`}),d&&!l&&!m&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:d}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!l&&!d&&s&&e.jsx(oi,{onReturnToLobby:_})]})};return e.jsx(Yt,{gameId:a,children:e.jsx(f,{})})},xi=({children:t})=>{const{user:a,loading:s}=E();return s?e.jsx(C,{message:"Checking authentication..."}):a?t:e.jsx(c,{to:"/auth",replace:!0})},fi="_toast_1yqi6_1",ji="_slideOut_1yqi6_31",vi="_iconWrapper_1yqi6_46",yi="_icon_1yqi6_46",bi="_emojiIcon_1yqi6_61",Ni="_content_1yqi6_75",wi="_title_1yqi6_82",Ci="_message_1yqi6_89",ki="_emojiMessage_1yqi6_97",Ai="_playerName_1yqi6_104",Ii="_reactionText_1yqi6_110",Si="_emojiReaction_1yqi6_116",Ti="_closeButton_1yqi6_134",Pi=({title:a,message:s,emoji:n="ℹ",color:r="#3498db",duration:i=4e3,onClose:o,position:l})=>{const[c,d]=t.useState(!0);t.useEffect((()=>{if(i>0){const e=setTimeout((()=>{d(!1),setTimeout(o,300)}),i);return()=>clearTimeout(e)}}),[i,o]);const u=!a&&"ℹ"!==n;return e.jsxs("div",{className:`${fi} ${u&&c?Si:""} ${c?"":ji}`,style:{top:"20px",zIndex:1e4+l,borderColor:r,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:[e.jsx("div",{className:vi,children:e.jsx("span",{className:`${yi} ${u?bi:""}`,style:{color:r,textShadow:u?`0 0 20px ${r}, 0 0 40px ${r}60`:`0 0 8px ${r}80`},children:n})}),e.jsxs("div",{className:Ni,children:[a&&e.jsx("div",{className:wi,children:a}),e.jsx("div",{className:`${Ci} ${u?ki:""}`,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Ai,children:s}),e.jsx("span",{className:Ii,children:"reacted!"})]}):s})]}),e.jsx("button",{className:Ti,onClick:o,"aria-label":"Close notification",children:"×"})]})},$i=t.createContext(),Bi=({children:a})=>{const[s,n]=t.useState([]),[r,i]=t.useState([]),[o,l]=t.useState(0),{socket:c}=I(),d=t.useCallback(((e,t,a="ℹ",s="#3498db",r=4e3)=>{const c=Date.now()+Math.random(),d={id:c,title:e,message:t,emoji:a,color:s,duration:r},u=Date.now();return u-o>=600?(n((e=>[...e,d])),l(u)):i((e=>[...e,d])),c}),[o]),u=t.useCallback((e=>{n((t=>t.filter((t=>t.id!==e))))}),[]),m=t.useCallback(((e,t,a)=>d(e,t,"✓","#27ae60",a)),[d]),h=t.useCallback(((e,t,a)=>d(e,t,"✕","#e74c3c",a)),[d]),p=t.useCallback(((e,t,a)=>d(e,t,"⚠","#f39c12",a)),[d]),_=t.useCallback(((e,t,a)=>d(e,t,"ℹ","#3498db",a)),[d]),g=t.useCallback(((e,t,a)=>d(e,t,"🎮","#9b59b6",a)),[d]),x=t.useCallback(((e,t,a)=>d(e,t,"💰","#16a085",a)),[d]);t.useEffect((()=>{if(0===r.length)return;const e=setTimeout((()=>{const e=r[0];i((e=>e.slice(1))),n((t=>[...t,e])),l(Date.now())}),600);return()=>clearTimeout(e)}),[r,s]),t.useEffect((()=>{if(!c)return;const e=e=>{d(e.title||"",e.message,e.emoji||"ℹ",e.color||"#3498db",e.duration)};return c.on("toast",e),()=>{c.off("toast",e)}}),[c,d]);const f={addToast:d,removeToast:u,showSuccess:m,showError:h,showWarning:p,showInfo:_,showGameEvent:g,showMoneyEvent:x,toasts:s};return e.jsxs($i.Provider,{value:f,children:[a,e.jsx("div",{className:"toast-container",style:{position:"fixed",top:0,right:0,zIndex:1e4},children:s.map(((t,a)=>e.jsx(Pi,{title:t.title,message:t.message,emoji:t.emoji,color:t.color,duration:t.duration,position:a,onClose:()=>u(t.id)},t.id)))})]})};function Ei(){t.useEffect((()=>{v.initialize()}),[]);const a=t.useMemo((()=>l([{path:"/",element:e.jsx(xi,{children:e.jsx(M,{children:e.jsx(ys,{})})})},{path:"/auth",element:e.jsx(ue,{})},{path:"/:gameId",element:e.jsx(xi,{children:e.jsx(gi,{})})},{path:"*",element:e.jsx(c,{to:"/",replace:!0})}])),[]);return e.jsx(Bi,{children:e.jsx(Q,{children:e.jsx(d,{router:a})})})}n.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(B,{children:e.jsx(S,{children:e.jsx(Fe,{children:e.jsx(ot,{children:e.jsx(Ei,{})})})})})}));
