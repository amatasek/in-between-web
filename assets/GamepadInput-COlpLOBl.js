import{j as e,c as a,a as t,e as s,A as r,f as n,g as l,h as i,B as o,U as c,u as d}from"./index-BGl51GMi.js";import{r as m}from"./vendor-D3vErxIQ.js";const h={coinIcon:"_coinIcon_isycs_1",small:"_small_isycs_13",medium:"_medium_isycs_17",large:"_large_isycs_21"},u=({size:a="small",className:t=""})=>{const s={small:15,medium:19,large:24},r=s[a]||s.small,n=m.useMemo((()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`),[]),l=m.useMemo((()=>`goldShine-${Math.random().toString(36).substr(2,9)}`),[]);return e.jsx("span",{className:`${h.coinIcon} ${h[a]} ${t}`,children:e.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:l,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${n})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${l})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},p={userAvatarContainer:"_userAvatarContainer_cjwhj_1",containerRight:"_containerRight_cjwhj_6",containerBelow:"_containerBelow_cjwhj_11",avatar:"_avatar_cjwhj_16",small:"_small_cjwhj_33",medium:"_medium_cjwhj_39",large:"_large_cjwhj_45",avatarImageContainer:"_avatarImageContainer_cjwhj_51",avatarImage:"_avatarImage_cjwhj_51",initialsPlaceholder:"_initialsPlaceholder_cjwhj_69",userInfo:"_userInfo_cjwhj_83",username:"_username_cjwhj_89",userTitle:"_userTitle_cjwhj_95",playerCard:"_playerCard_cjwhj_114",cardAppear:"_cardAppear_cjwhj_1",playerCardAvatar:"_playerCardAvatar_cjwhj_143",playerCardImage:"_playerCardImage_cjwhj_152",playerCardInitials:"_playerCardInitials_cjwhj_160",playerCardInfo:"_playerCardInfo_cjwhj_174",playerCardUsername:"_playerCardUsername_cjwhj_183",playerCardTitle:"_playerCardTitle_cjwhj_191",playerCardXP:"_playerCardXP_cjwhj_199",playerCardLevelXP:"_playerCardLevelXP_cjwhj_207",separator:"_separator_cjwhj_215",xpValue:"_xpValue_cjwhj_219",loading:"_loading_cjwhj_224",shimmerBg:"_shimmerBg_cjwhj_1",avatarLoader:"_avatarLoader_cjwhj_230",shimmerOverlay:"_shimmerOverlay_cjwhj_1",skeletonUsername:"_skeletonUsername_cjwhj_239",skeletonTitle:"_skeletonTitle_cjwhj_249",shimmerText:"_shimmerText_cjwhj_1"},g=({userId:t,size:s="medium",showName:r=!0,namePosition:n="right",className:l="",showTitle:i=!0,fontWeight:o="normal"})=>{const[c,d]=m.useState(!1),h=a(t);if(!t)return null;if(!h){const a=p[s]||p.medium,t=r?p[`container${n.charAt(0).toUpperCase()+n.slice(1)}`]:"";return e.jsxs("div",{className:`${p.userAvatarContainer} ${t} ${l}`,children:[e.jsx("div",{className:`${p.avatar} ${a} ${p.loading}`,children:e.jsx("div",{className:p.avatarLoader})}),r&&e.jsxs("div",{className:p.userInfo,children:[e.jsx("div",{className:p.skeletonUsername}),i&&e.jsx("div",{className:p.skeletonTitle})]})]})}const{username:u,profileImg:g,title:j,xp:f,level:_}=h,b=x(u||"Unknown"),v=p[s]||p.medium,w=r?p[`container${n.charAt(0).toUpperCase()+n.slice(1)}`]:"",k="https://api.in-between.live";let N=null;if(g)if(g.startsWith("http"))N=g;else if(g.includes("/uploads/")){N=`${k}/files/images/${g.split("/").pop()}`}else N=`${k}${g}`;return e.jsxs("div",{className:`${p.userAvatarContainer} ${w} ${l}`,children:[e.jsxs("div",{className:`${p.avatar} ${v}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsxs("div",{className:p.avatarImageContainer,children:[N?e.jsx("img",{src:N,alt:`${u}'s avatar`,className:p.avatarImage,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:p.initialsPlaceholder,style:{display:N?"none":"flex"},children:b})]}),c&&e.jsxs("div",{className:p.playerCard,children:[e.jsx("div",{className:p.playerCardAvatar,children:N?e.jsx("img",{src:N,alt:`${u}'s avatar`,className:p.playerCardImage}):e.jsx("div",{className:p.playerCardInitials,children:b})}),e.jsxs("div",{className:p.playerCardInfo,children:[e.jsx("div",{className:p.playerCardUsername,children:u||"Unknown"}),j&&e.jsx("div",{className:p.playerCardTitle,children:j}),void 0!==_&&void 0!==f&&e.jsxs("div",{className:p.playerCardLevelXP,children:["Level ",_," ",e.jsx("span",{className:p.separator,children:"•"})," ",e.jsxs("span",{className:p.xpValue,children:[y(f)," XP"]})]})]})]})]}),r&&e.jsxs("div",{className:p.userInfo,children:[e.jsx("div",{className:p.username,style:{fontWeight:o},children:u||"Unknown"}),i&&j&&e.jsx("div",{className:p.userTitle,children:j})]})]})},x=e=>e.split(" ").map((e=>e.charAt(0))).join("").toUpperCase().substring(0,2),y=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),j={currencyAmount:"_currencyAmount_rl73n_1",pillBackground:"_pillBackground_rl73n_17",darkBackground:"_darkBackground_rl73n_28"},f=({amount:a=0,size:t,background:s,customClass:r})=>{const n=[j.currencyAmount,"dark"===s?j.darkBackground:"","pill"===s?j.pillBackground:"",r||""].filter(Boolean).join(" "),l="number"==typeof a?a:0;return e.jsxs("span",{className:n,children:[e.jsx(u,{size:t}),e.jsx("span",{children:l.toLocaleString()})]})},_=({className:a="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),b="_toggleContainer_1gama_1",v="_toggleInput_1gama_5",w="_toggleLabel_1gama_11",k="_toggleSlider_1gama_17",N="_toggleText_1gama_65",C=({isChecked:a,onChange:t,label:s})=>e.jsx("div",{className:b,children:e.jsxs("label",{className:w,children:[e.jsx("input",{type:"checkbox",checked:a,onChange:t,className:v,"data-gamepad-focusable":"true"}),e.jsx("span",{className:k}),s&&e.jsx("span",{className:N,children:s})]})}),S="_fileUploadContainer_z5fvc_1",I="_fileInput_z5fvc_8",$="_uploadButton_z5fvc_12",P="_changeButton_z5fvc_37",A="_previewContainer_z5fvc_53",T="_imagePreview_z5fvc_61",B="_audioPreview_z5fvc_70",L="_errorMessage_z5fvc_76",M=({onUpload:a,currentFileUrl:t,acceptedFileTypes:s,label:r,previewType:n="image"})=>{const[l,i]=m.useState(!1),[o,c]=m.useState(null),d=m.useRef(null);return e.jsxs("div",{className:S,children:[e.jsx("input",{type:"file",ref:d,onChange:async e=>{const t=e.target.files[0];if(t){c(null),i(!0);try{await a(t)||c("Failed to upload file. Please try again.")}catch(s){c("An error occurred during upload.")}finally{i(!1)}}},accept:s,className:I}),t&&(t?"image"===n?e.jsx("div",{className:A,children:e.jsx("img",{src:t,alt:"Preview",className:T})}):"audio"===n?e.jsx("div",{className:A,children:e.jsx("audio",{controls:!0,src:t,className:B,children:"Your browser does not support the audio element."})}):null:null),e.jsx("button",{type:"button",onClick:()=>{d.current.click()},className:`${$} ${t?P:""}`,disabled:l,"data-gamepad-focusable":"true",children:l?"Uploading...":t?`Change ${r}`:`Upload ${r}`}),o&&e.jsx("div",{className:L,children:o})]})},E=()=>{const{token:a}=t(),{preferences:l,updateSelectedTitle:i}=s(),[o,c]=m.useState([]),[d,h]=m.useState(!0),[u,p]=m.useState(null);m.useEffect((()=>{g()}),[]);const g=async()=>{try{h(!0);const e=await fetch(`${r}/me/titles`,{headers:{Authorization:`Bearer ${a}`}});if(!e.ok)throw new Error("Failed to load titles");const t=await e.json();c(t)}catch(e){p(e.message)}finally{h(!1)}},x=async e=>{try{await i(e)}catch(a){p("Failed to update title")}};return d?e.jsx("div",{className:n.loadingMessage,children:"Loading titles..."}):u?e.jsx("div",{className:n.errorMessage,children:u}):0===o.length?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:[e.jsxs("div",{onClick:()=>x(""),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(""))},style:{display:"inline-flex",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:l.selectedTitle?"rgba(255, 255, 255, 0.08)":"var(--btn-tertiary-shadow)",border:l.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid var(--btn-tertiary-start)",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),o.map((a=>e.jsxs("div",{onClick:()=>x(a.title),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(a.title))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:l.selectedTitle===a.title?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:l.selectedTitle===a.title?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:a.title}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:a.description})]},a.title))),0===o.length&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"var(--text-muted)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},D=[{id:"default",name:"Default",description:"Classic blue theme",primary:"#1a2a3a",accent:"#3498db"},{id:"light",name:"Light Mode",description:"Professional theme",primary:"#f8f9fa",accent:"#ffc107"},{id:"dark",name:"Dark Mode",description:"Deep dark theme",primary:"#0d0d0d",accent:"#2980b9"},{id:"packers",name:"Packers",description:"Go Pack Go!",primary:"#203731",accent:"#FFB612"},{id:"sunset",name:"Sunset",description:"Romantic twilight",primary:"#0c1929",accent:"#ff6b6b"},{id:"miami-vice",name:"Miami Vice",description:"Neon pink & cyan",primary:"#1a0f2e",accent:"#00d2d3"},{id:"purple",name:"Royal Purple",description:"Elegant purple theme",primary:"#1a1a2e",accent:"#8e44ad"}],U=()=>{const[a,t]=m.useState("default");m.useEffect((()=>{const e=l();t(e)}),[]);const s=e=>{t(e),i(e)};return e.jsx("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:D.map((t=>e.jsxs("div",{onClick:()=>s(t.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s(t.id))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"50px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:a===t.id?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:a===t.id?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"3px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t.primary,border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t.accent,border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:t.name}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:t.description})]},t.id)))})},F={back01:"/cards/back01.png",back02:"/cards/back02.png",back03:"/cards/back03.png",back04:"/cards/back04.png",back05:"/cards/back05.png",back06:"/cards/back06.png",back07:"/cards/back07.png",back08:"/cards/back08.png"},z=()=>localStorage.getItem("selectedCardBack")||"back01",R=()=>{const e=z();return F[e]||F.back01},O=[{id:"back01",image:"/cards/back01.png"},{id:"back02",image:"/cards/back02.png"},{id:"back03",image:"/cards/back03.png"},{id:"back04",image:"/cards/back04.png"},{id:"back05",image:"/cards/back05.png"},{id:"back06",image:"/cards/back06.png"},{id:"back07",image:"/cards/back07.png"},{id:"back08",image:"/cards/back08.png"}],W=()=>{const[a,t]=m.useState("back01");m.useEffect((()=>{const e=z();t(e)}),[]);const s=e=>{t(e),(e=>{F[e]&&(localStorage.setItem("selectedCardBack",e),window.dispatchEvent(new CustomEvent("cardbackchange",{detail:e})))})(e)};return e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",overflowY:"visible",paddingTop:"8px",paddingBottom:"8px",alignItems:"center",minHeight:"100px"},children:O.map(((t,r)=>e.jsx("div",{onClick:()=>s(t.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s(t.id))},style:{position:"relative",cursor:"pointer",flexShrink:0,transition:"transform 0.2s ease",transform:a===t.id?"scale(1.1)":"scale(1)",marginLeft:0===r?"8px":0,marginRight:r===O.length-1?"8px":0},children:e.jsx("div",{style:{width:"60px",height:"84px",backgroundImage:`url(${t.image})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",boxShadow:a===t.id?"0 0 0 3px var(--btn-tertiary-start), 0 4px 12px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"}})},t.id)))})},H=({onClose:a})=>{const{preferences:t,toggleAutoAnte:r,toggleMute:l,uploadProfileImg:i,loading:c}=s();return c?e.jsx(o,{title:"Preferences",onClose:a,style:{maxWidth:600,maxHeight:"25vh"},children:e.jsx("div",{className:n.loadingMessage,children:"Loading preferences..."})}):e.jsxs(o,{title:"Preferences",onClose:a,style:{maxWidth:600},children:[e.jsx("div",{className:n.sectionHeader,children:"Game Options"}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Mute Sound"}),e.jsx(C,{isChecked:t.muted,onChange:l})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Auto-Ante"}),e.jsx(C,{isChecked:t.autoAnte,onChange:r})]}),e.jsx("div",{className:n.sectionHeader,children:"Customization Options"}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Profile Image"}),e.jsx(M,{onUpload:i,currentFileUrl:t.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Title"}),e.jsx(E,{})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Theme"}),e.jsx(U,{})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Card Back"}),e.jsx(W,{})]})]})},G={iconButton:"_iconButton_3xp6j_1",default:"_default_3xp6j_18",danger:"_danger_3xp6j_31",preferences:"_preferences_3xp6j_44",stats:"_stats_3xp6j_57",store:"_store_3xp6j_70"},V=({icon:a,title:t,onClick:s,variant:r="default",compact:n=!0,className:l="",...i})=>e.jsx("button",{className:`${G.iconButton} ${G[r]} ${l}`,onClick:s,title:t,type:"button",...i,children:a}),X=({onModalStateChange:a})=>{const[t,s]=m.useState(!1);return m.useEffect((()=>{a&&a(t)}),[t,a]),e.jsxs(e.Fragment,{children:[e.jsx(V,{onClick:()=>{s(!0)},icon:e.jsx(_,{style:{color:"white",width:20,height:20}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),t&&e.jsx(H,{isOpen:t,onClose:()=>{s(!1)}})]})},K=({color:a="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"}),e.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"})]}),Y="_totalsTable_ugw0i_3",Z="_settleUpTable_ugw0i_3",q="_totalRow_ugw0i_9",J="_paymentRow_ugw0i_9",Q="_playerName_ugw0i_18",ee="_totalAmount_ugw0i_29",ae="_paymentAmount_ugw0i_29",te="_positive_ugw0i_35",se="_negative_ugw0i_39",re="_paymentText_ugw0i_43",ne="_noDataMessage_ugw0i_54",le="_loadingMessage_ugw0i_61",ie=({color:a="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 15 L12 18"}),e.jsx("path",{d:"M9.5 16.5 L12 19 L14.5 16.5"}),e.jsx("path",{d:"M8 10 L10 10"}),e.jsx("path",{d:"M12 10 L14 10"}),e.jsx("path",{d:"M16 10 L16 10"})]});let oe;try{oe=require("../../contexts/GameContext").useGameContext}catch(pa){oe=()=>({gameState:null})}const ce=({title:a="Download Transaction Log as CSV",gameState:t,...s})=>{let r;try{r=oe?oe():{gameState:null}}catch(pa){r={gameState:null}}const n=t||r?.gameState,l=n?.gameTransactions||n?.gameData?.gameTransactions||[],i=n?._id||n?.id||"unknown";return e.jsx(V,{icon:e.jsx(ie,{color:"white",size:20}),title:a,onClick:()=>{const e=Array.isArray(l)?l:[];if(0===e.length)return;let a="Player,Transaction Type,Amount,Round,Timestamp\n";const t=[...e].map((e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})));t.sort(((e,a)=>e.timestamp-a.timestamp)),t.forEach((e=>{const t=e.timestamp?new Date(e.timestamp).toLocaleString():"N/A",s=e.playerName||e.player||"Unknown Player",r=s.includes(",")?`"${s}"`:s;let n=e.transactionType||"Transaction";if(!e.transactionType&&e.reason){const a=e.reason.split(" ");n=a[0],"Won"===a[0]?n="Win":e.reason.includes("penalty")&&(n="Penalty")}a+=`${r},${n},${e.amount},${e.round||"N/A"},${t}\n`}));const s=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`game-${i}-transactions.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},variant:"default",...s})},de="_noDataMessage_1mupo_2",me="_statsGrid_1mupo_9",he="_statItem_1mupo_42",ue="_statLabel_1mupo_48",pe="_statValue_1mupo_55",ge="_statSuffix_1mupo_63",xe=({gameData:a})=>{const t=a.gameTransactions,s=a.players,r={};Object.entries(s).forEach((([e,a])=>{r[e]=a.name})),t.forEach((e=>{e.playerId&&!r[e.playerId]&&(r[e.playerId]=e.playerName||"Unknown Player")}));const n=m.useMemo((()=>{if(0===t.length)return[];const e=e=>e.toLocaleString(),s={};t.forEach((e=>{s[e.playerId]||(s[e.playerId]=[]),s[e.playerId].push(e)}));const n=a.round||1,l=a.deckCount||1,i=t.filter((e=>"Ante"===e.transactionType)).reduce(((e,a)=>e+Math.abs(a.amount)),0),o=t.filter((e=>"Bet"===e.transactionType)).reduce(((e,a)=>e+Math.abs(a.amount)),0),c=t.filter((e=>"Bet"===e.transactionType)),d=c.length>0?c.reduce(((e,a)=>Math.abs(a.amount)>Math.abs(e.amount)?a:e),c[0]):null,m=t.reduce(((e,a)=>a.potAmount>e?a.potAmount:e),0),h=t.filter((e=>"2x"===e.transactionType||"3x"===e.transactionType)),u=h.reduce(((e,a)=>e+Math.abs(a.amount)),0),p={};c.forEach((e=>{p[e.playerId]=(p[e.playerId]||0)+1}));let g=null,x=0;Object.entries(p).forEach((([e,a])=>{a>x&&(x=a,g=e)}));const y={};c.forEach((e=>{y[e.playerId]||(y[e.playerId]={total:0,count:0}),y[e.playerId].total+=Math.abs(e.amount),y[e.playerId].count+=1}));let j=null,f=0;Object.entries(y).forEach((([e,a])=>{const t=a.total/a.count;t>f&&(f=t,j=e)}));const _={};t.filter((e=>"Win"===e.transactionType)).forEach((e=>{_[e.playerId]=(_[e.playerId]||0)+1}));let b=null,v=0;Object.entries(_).forEach((([e,a])=>{a>v&&(v=a,b=e)}));const w={};h.forEach((e=>{w[e.playerId]=(w[e.playerId]||0)+1}));let k=null,N=0;Object.entries(w).forEach((([e,a])=>{a>N&&(N=a,k=e)}));const C=a.totals||{};let S=null,I=0,$=null,P=0;return Object.entries(C).forEach((([e,a])=>{a>I&&(I=a,S=e),a<P&&(P=a,$=e)})),[{key:"totalDecks",label:"Total Decks",value:l,type:"number"},{key:"totalRounds",label:"Total Rounds",value:n,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:c.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:i,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:o,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:m,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:d?Math.abs(d.amount):0,type:"currency",suffix:d?` by ${d.playerName}`:""},{key:"biggestWinner",label:"Biggest Winner",value:S?r[S]||"Unknown Player":"N/A",type:"text",suffix:S?` (+${e(I)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:$?r[$]||"Unknown Player":"N/A",type:"text",suffix:$?` (${e(P)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:g?r[g]||"Unknown Player":"N/A",type:"text",suffix:g?` (${e(x)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:j?r[j]||"Unknown Player":"N/A",type:"text",suffix:j?` (avg: ${e(Math.round(f))})`:""},{key:"mostWinning",label:"Most Winning Player",value:b?r[b]||"Unknown Player":"N/A",type:"text",suffix:b?` (${e(v)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:h.length,type:"number",suffix:h.length>0?` (${e(u)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:k?r[k]||"Unknown Player":"N/A",type:"text",suffix:k?` (${e(N)} penalties)`:""}]}),[t,r]);return e.jsx(e.Fragment,{children:0===n.length?e.jsx("p",{className:de,children:"No statistics available for this game."}):e.jsx("div",{className:me,"data-gamepad-scrollable":"true",tabIndex:"0",children:n.map((a=>{return e.jsxs("div",{className:`panel-alt ${he}`,children:[e.jsx("div",{className:ue,children:a.label}),e.jsxs("div",{className:pe,children:[(t=a.type,s=a.value,"currency"===t?e.jsx(f,{amount:s,size:"small"}):"percentage"===t?`${(100*s).toFixed(1)}%`:"number"===t?s.toLocaleString():s),a.suffix&&e.jsx("span",{className:ge,children:a.suffix})]})]},a.key);var t,s}))})})},ye=({onClose:a,gameData:t})=>{if(!t)return e.jsx(o,{title:"Game Summary",onClose:a,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{className:le,children:"Loading game data..."})});const s=t.gameTransactions||[],r=t.players||{},n=t.id||"unknown",l=t.settings?.isPrivate||!1,i=Array.isArray(s)?s:[],c={};Object.entries(r).forEach((([e,a])=>{c[e]=a.name})),i.forEach((e=>{e.playerId&&!c[e.playerId]&&(c[e.playerId]=e.playerName||"Unknown Player")}));const d=t.totals||{},h=m.useMemo((()=>{if(2===Object.keys(d).length){const e=Object.entries(d),[a,t]=e[0],[s,r]=e[1];if(Math.abs(t+r)<.1){if(t>0)return[{from:s,fromName:c[s],to:a,toName:c[a],amount:Math.abs(t)}];if(r>0)return[{from:a,fromName:c[a],to:s,toName:c[s],amount:Math.abs(r)}]}}const e=[],a=Object.entries(d).filter((([e,a])=>a<0)).map((([e,a])=>({playerId:e,playerName:c[e]||"Unknown Player",amount:Math.abs(a)}))),t=Object.entries(d).filter((([e,a])=>a>0)).map((([e,a])=>({playerId:e,playerName:c[e]||"Unknown Player",amount:a})));for(a.sort(((e,a)=>a.amount-e.amount)),t.sort(((e,a)=>a.amount-e.amount));t.length>0&&a.length>0;){const s=t[0],r=a[0],n=Math.min(s.amount,r.amount);if(!(n>.01))break;e.push({from:r.playerId,fromName:r.playerName,to:s.playerId,toName:s.playerName,amount:n}),s.amount-=n,r.amount-=n,s.amount<.01&&t.shift(),r.amount<.01&&a.shift()}return e}),[d,c]),[u,p]=m.useState("totals");return e.jsxs(o,{title:`Game Summary (${n})`,onClose:a,headerButtons:e.jsx(ce,{gameState:t}),style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:"tab-button "+("totals"===u?"active":""),onClick:()=>p("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{className:"tab-button "+("stats"===u?"active":""),onClick:()=>p("stats"),"data-gamepad-focusable":"true",children:"Stats"}),l&&e.jsx("button",{className:"tab-button "+("payouts"===u?"active":""),onClick:()=>p("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),"totals"===u&&e.jsx("div",{className:"tab-content",children:0===Object.keys(d).length?e.jsx("p",{className:ne,children:"No transactions recorded yet."}):e.jsx("div",{className:Y,children:Object.entries(d).map((([a,t])=>e.jsxs("div",{className:q,children:[e.jsx("span",{className:Q,children:c[a]||"Unknown Player"}),e.jsx("span",{className:`${ee} ${t>=0?te:se}`,children:e.jsx(f,{amount:t,size:"small"})})]},a)))})}),"stats"===u&&e.jsx(xe,{gameData:t}),"payouts"===u&&l&&e.jsx("div",{className:"tab-content",children:0===h.length?e.jsx("p",{className:ne,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:Z,children:h.map(((a,t)=>e.jsxs("div",{className:J,children:[e.jsxs("span",{className:re,children:[e.jsx("span",{className:Q,children:a.fromName})," pays"," ",e.jsx("span",{className:Q,children:a.toName})]}),e.jsx("span",{className:ae,children:e.jsx(f,{amount:a.amount,size:"small"})})]},t)))})})]})},je="_leaderboardContainer_1f0dl_1",fe="_leaderboardHeader_1f0dl_9",_e="_durationSelector_1f0dl_15",be="_durationButton_1f0dl_24",ve="_active_1f0dl_41",we="_loadingMessage_1f0dl_48",ke="_errorMessage_1f0dl_48",Ne="_emptyMessage_1f0dl_48",Ce="_loadingSpinner_1f0dl_60",Se="_leaderboardList_1f0dl_78",Ie="_leaderboardRow_1f0dl_88",$e="_rankCell_1f0dl_102",Pe="_rank_1f0dl_102",Ae="_playerCell_1f0dl_113",Te="_statsCell_1f0dl_118",Be=()=>{const[a,t]=m.useState([]),[s,n]=m.useState(!0),[l,i]=m.useState(null),[o,d]=m.useState("all"),h=m.useContext(c);m.useEffect((()=>{u()}),[o]);const u=async()=>{n(!0),i(null);try{const e=await fetch(`${r}/leaderboard?duration=${o}`);if(!e.ok)throw new Error("Failed to fetch leaderboard");const a=await e.json();if(t(a.leaderboard||[]),h&&a.leaderboard){const e=a.leaderboard.map((e=>e.userId));h.prefetchUsers(e)}}catch(e){i(e.message)}finally{n(!1)}},p=e=>1===e?"🥇":2===e?"🥈":3===e?"🥉":`#${e}`;return e.jsxs("div",{className:je,children:[e.jsx("div",{className:fe,children:e.jsxs("div",{className:_e,children:[e.jsx("button",{className:`${be} ${"all"===o?ve:""}`,onClick:()=>d("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{className:`${be} ${"30days"===o?ve:""}`,onClick:()=>d("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),s?e.jsxs("div",{className:we,children:[e.jsx("div",{className:Ce}),"Loading leaderboard..."]}):l?e.jsxs("div",{className:ke,children:["Error: ",l]}):0===a.length?e.jsx("div",{className:Ne,children:"No players found for this time period."}):e.jsx("div",{className:Se,"data-gamepad-scrollable":"true",tabIndex:"0",children:a.map((a=>e.jsxs("div",{className:`panel-alt ${Ie}`,children:[e.jsx("div",{className:$e,children:e.jsx("span",{className:Pe,children:p(a.rank)})}),e.jsx("div",{className:Ae,children:e.jsx(g,{userId:a.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:Te,children:e.jsx(f,{amount:a.totalProfit,size:"small"})})]},a.userId)))})]})},Le="_statsPlaceholder_t48sr_1",Me="_statsGrid_t48sr_14",Ee="_statItem_t48sr_47",De="_statLabel_t48sr_53",Ue="_statValue_t48sr_60",Fe="_statSuffix_t48sr_68",ze="_historyTable_t48sr_82",Re="_tableHeader_t48sr_115",Oe="_gameNameHeader_t48sr_128",We="_playerCountHeader_t48sr_128",He="_roundsHeader_t48sr_128",Ge="_endDateHeader_t48sr_128",Ve="_historyRow_t48sr_144",Xe="_gameNameCell_t48sr_155",Ke="_playerCountCell_t48sr_163",Ye="_roundsCell_t48sr_163",Ze="_endDateCell_t48sr_171",qe="_gameNameLink_t48sr_179",Je="_pageButton_t48sr_258",Qe="_pageInfo_t48sr_289",ea="_errorMessage_t48sr_300",aa="_loadingMessage_t48sr_321",ta="_loadingSpinner_t48sr_332",sa=({onClose:a})=>{const{token:s}=t(),[n,l]=m.useState("leaderboard"),[i,c]=m.useState(!0),[d,h]=m.useState(null),[u,p]=m.useState({games:[],pagination:{}}),[g,x]=m.useState(0),[y,j]=m.useState(!1),[_,b]=m.useState(null),[v,w]=m.useState(null),[k,N]=m.useState(!0),[C,S]=m.useState(null);m.useEffect((()=>{(async()=>{c(!0),h(null);try{const e=await fetch(`${r}/games/history?pageSize=5&pageNumber=${g}`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error("Failed to fetch game history");const a=await e.json();p(a)}catch(e){h(e.message)}finally{c(!1)}})()}),[s,g]),m.useEffect((()=>{(async()=>{N(!0),S(null);try{const e=await fetch(`${r}/me/stats`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok)throw new Error("Failed to fetch lifetime stats");const a=await e.json();w(a.stats)}catch(e){S(e.message)}finally{N(!1)}})()}),[s]);const I=e=>{if(!e)return"Unknown";const a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},$=e=>e.roundCount||0;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{title:"Player Stats",onClose:a,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:"tab-button "+("leaderboard"===n?"active":""),onClick:()=>l("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{className:"tab-button "+("stats"===n?"active":""),onClick:()=>l("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{className:"tab-button "+("history"===n?"active":""),onClick:()=>l("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),"leaderboard"===n&&e.jsx("div",{className:"tab-content",children:e.jsx(Be,{})}),"stats"===n&&e.jsx("div",{className:"tab-content",children:k?e.jsxs("div",{className:aa,children:[e.jsx("div",{className:ta}),"Loading your lifetime stats..."]}):C?e.jsxs("div",{className:ea,children:["Error: ",C]}):v&&0!==v.length?e.jsx("div",{className:Me,"data-gamepad-scrollable":"true",tabIndex:"0",children:v.map(((a,t)=>{return e.jsxs("div",{className:`panel-alt ${Ee}`,children:[e.jsx("div",{className:De,children:a.label}),e.jsxs("div",{className:Ue,children:[(s=a.type,r=a.value,"number"==typeof r?"currency"===s?e.jsx(f,{amount:r,size:"small"}):"percentage"===s?`${(100*r).toFixed(1)}%`:r.toLocaleString():"boolean"==typeof r?r?"Yes":"No":"date"===s||r instanceof Date?I(r):"number"===s?Number(r).toLocaleString():String(r)),a.suffix&&e.jsx("span",{className:Fe,children:a.suffix})]})]},a.key||`stat-${t}`);var s,r}))}):e.jsx("div",{className:Le,children:e.jsx("p",{children:"No lifetime statistics available."})})}),"history"===n&&e.jsx("div",{className:"tab-content",children:i?e.jsxs("div",{className:aa,children:[e.jsx("div",{className:ta}),"Loading your game history..."]}):d?e.jsxs("div",{className:ea,children:["Error: ",d]}):0===u.games.length?e.jsx("div",{className:Le,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`panel-alt ${ze}`,"data-gamepad-scrollable":"true",tabIndex:"0",children:[e.jsxs("div",{className:Re,children:[e.jsx("div",{className:Oe,children:"Game"}),e.jsx("div",{className:We,children:"Players"}),e.jsx("div",{className:He,children:"Rounds"}),e.jsx("div",{className:Ge,children:"Ended"})]}),u.games.map((a=>e.jsxs("div",{className:Ve,children:[e.jsx("div",{className:Xe,children:e.jsxs("span",{className:qe,onClick:()=>(e=>{const a=u.games.find((a=>a.id===e));a&&(b(a),j(!0))})(a.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",a.id]})}),e.jsx("div",{className:Ke,children:a.totalPlayerCount}),e.jsx("div",{className:Ye,children:$(a)}),e.jsx("div",{className:Ze,children:I(a.endedAt)})]},a.id)))]}),e.jsxs("div",{className:Qe,children:[e.jsx("button",{onClick:()=>{g>0&&x(g-1)},disabled:0===g,className:Je,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"←"}),"Page ",g+1,u.pagination&&u.pagination.total?` of ${Math.ceil(u.pagination.total/5)}`:"",e.jsx("button",{onClick:()=>{u.pagination&&5===u.games.length&&x(g+1)},disabled:!u.pagination||u.games.length<5,className:Je,"aria-label":"Next page","data-gamepad-focusable":"true",children:"→"})]})]})})]}),y&&_&&e.jsx(ye,{gameData:_,onClose:()=>{j(!1),b(null)}})]})},ra=({onModalStateChange:a,...t})=>{const[s,r]=m.useState(!1);return m.useEffect((()=>{a&&a(s)}),[s,a]),e.jsxs(e.Fragment,{children:[e.jsx(V,{onClick:()=>{r(!0)},icon:e.jsx(K,{color:"white",size:20}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...t}),s&&e.jsx(sa,{isOpen:s,onClose:()=>{r(!1)}})]})},na=({className:a="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:a,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z"})}),la=({onClick:a,...t})=>e.jsx(V,{onClick:a,icon:e.jsx(na,{style:{color:"white",width:20,height:20}}),"aria-label":"Store",variant:"store",title:"Store",...t}),ia=({color:a="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"})]}),oa=({onClose:a})=>e.jsxs(o,{title:"Game Rules",onClose:a,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:n.sectionHeader,children:"Objective"}),e.jsx("div",{className:n.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:n.sectionHeader,children:"Card Values"}),e.jsx("div",{className:n.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:n.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:n.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"The player to the right of the dealer goes first."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:n.sectionHeader,children:"Betting"}),e.jsxs("div",{className:n.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:n.sectionHeader,children:"POT Button"}),e.jsx("div",{className:n.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:n.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:n.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),ca=({title:a="View Game Rules",onModalStateChange:t,...s})=>{const[r,n]=m.useState(!1);return m.useEffect((()=>{t&&t(r)}),[r,t]),e.jsxs(e.Fragment,{children:[e.jsx(V,{icon:e.jsx(ia,{color:"white",size:20}),title:a,onClick:()=>{n(!0)},variant:"default",...s}),r&&e.jsx(oa,{onClose:()=>{n(!1)}})]})},da="_coinPacksGrid_n27te_3";const ma=new class{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`}getAuthHeaders(){const e=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}}async getOfferingsByType(e){try{const a=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(e)}`,t=await fetch(a,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.error||`HTTP ${t.status}: Failed to fetch offerings`)}return(await t.json()).offerings||[]}catch(pa){throw new Error(`Failed to fetch product offerings: ${pa.message}`)}}async getAllOfferings(){try{const e=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!e.ok){const a=await e.json().catch((()=>({})));throw new Error(a.error||`HTTP ${e.status}: Failed to fetch offerings`)}return(await e.json()).offerings||[]}catch(pa){throw new Error(`Failed to fetch product offerings: ${pa.message}`)}}async processPurchase(e){try{if(!e)throw new Error("Product ID is required");const a=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(),credentials:"include",body:JSON.stringify({productId:e})});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||`HTTP ${a.status}: Purchase failed`)}return await a.json()}catch(pa){throw new Error(`Purchase failed: ${pa.message}`)}}async getCoinOfferings(){return this.getOfferingsByType("coin")}},ha=({onClose:a})=>{const[t,s]=m.useState("coins"),[r,n]=m.useState([]),[l,i]=m.useState(!0),[c,d]=m.useState(null),[h,u]=m.useState(null);m.useEffect((()=>{p()}),[]);const p=async()=>{try{i(!0),u(null);const e=await ma.getCoinOfferings();n(e)}catch(e){u("Failed to load products. Please try again.")}finally{i(!1)}};return l?e.jsx(o,{title:"Store",onClose:a,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(o,{title:"Store",onClose:a,style:{maxWidth:800,height:"80vh"},children:[e.jsx("div",{className:"tabs-container",children:e.jsx("button",{className:"tab-button "+("coins"===t?"active":""),onClick:()=>s("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"})}),h&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:h}),"coins"===t&&e.jsx("div",{className:"tab-content",children:0===r.length?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{className:da,"data-gamepad-scrollable":"true",tabIndex:"0",children:r.map((t=>{return e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"column",padding:"10px",minHeight:"280px"},children:[e.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FFD700",margin:"0 0 1rem 0",textAlign:"center"},children:[(r=t.coinAmount,new Intl.NumberFormat("en-US").format(r))," Coins"]}),t.imageUrl&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"1rem"},children:e.jsx("img",{src:t.imageUrl,alt:t.name,style:{width:"64px",height:"64px",objectFit:"contain"},onError:e=>{e.target.style.display="none"}})}),e.jsx("p",{style:{color:"#a0b9d6",fontSize:"0.875rem",margin:"0 0 1rem 0",textAlign:"center",lineHeight:"1.4",flex:"1"},children:t.description}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"bold",color:"#bcdcff",textAlign:"center",marginBottom:"1rem"},children:(s=t.priceUSD,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s))}),e.jsx("button",{onClick:()=>(async e=>{try{d(e),u(null),await ma.processPurchase(e),a()}catch(t){u(t.message||"Purchase failed. Please try again.")}finally{d(null)}})(t.id),disabled:c===t.id,className:"btn btn-primary","data-gamepad-focusable":"true",children:c===t.id?"Processing...":"Purchase"})]},t.id);var s,r}))})})]})},ua=({type:a="text",title:t="",...s})=>{const r=m.useRef(null);let n=null;try{const e=d();n=e?.enhanceInput}catch(pa){}return m.useEffect((()=>{if(r.current&&n){return n(r.current,a,t)}}),[n,a,t]),e.jsx("input",{ref:r,type:a,"data-gamepad-focusable":"true",...s})};export{f as C,ua as G,V as I,ra as P,ca as R,la as S,C as T,g as U,X as a,ha as b,ye as c,u as d,R as g};
