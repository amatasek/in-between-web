const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-BoGqJyVU.js","assets/vendor-D3vErxIQ.js","assets/useGamepadNavigation-Tj-O-nX_.js","assets/AppHeader-pS5vJzBt.js","assets/AppHeader-nJsTMoBm.css","assets/audio-D4HOgbU8.js","assets/socket-DfKCw8Ob.js","assets/AuthPage-CtFtJF7G.css","assets/Lobby-DgbPjefQ.js","assets/GamepadInput-DBNcgayx.js","assets/GamepadInput-Ck9asK0e.css","assets/Lobby-MugqXn5Y.css","assets/GameRoom-BFjnHP1V.js","assets/GameRoom-ohGyJMjK.css"])))=>i.map(i=>d[i]);
import{r as e,a as t,b as r,N as a,R as n,d as o}from"./vendor-D3vErxIQ.js";import{h as s}from"./audio-D4HOgbU8.js";import{l as c}from"./socket-DfKCw8Ob.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},d={},l=e,u=Symbol.for("react.element"),b=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,g=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,r){var a,n={},o=null,s=null;for(a in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(s=t.ref),t)f.call(t,a)&&!h.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:u,type:e,key:o,ref:s,props:n,_owner:g.current}}d.Fragment=b,d.jsx=p,d.jsxs=p,i.exports=d;var m=i.exports,y={},v=t;y.createRoot=v.createRoot,y.hydrateRoot=v.hydrateRoot;const x=new class{constructor(){this.sounds={},this.muted=!1,this.initialized=!1,this.categories=["ui"],this.lastPlayedTime={},this.debounceTime=500,this.audioUnlocked=!1,this.API_URL="https://api.in-between.live","undefined"!=typeof window&&setTimeout((()=>{this.initialize(),this._setupMobileAudioUnlock()}),0)}initialize(){this.initialized||(this.loadCategory("ui"),this.initialized=!0)}loadCategory(e){if(this.sounds[e])return;const t={};"ui"===e&&(t.join=[0,500],t.leave=[500,1e3],t.alert=[1500,1500]),this.sounds[e]=new s.Howl({src:[`${this.API_URL}/assets/audio/${e}-sounds.mp3`,`${this.API_URL}/assets/audio/${e}-sounds.webm`],sprite:t,preload:!0,html5:this._isMobileDevice(),format:["mp3","webm"],pool:10})}play(e,t=1){if(this.muted)return;let r,a;if(this.initialized||this.initialize(),e.includes(".")?[r,a]=e.split("."):(r="ui",a=e),!this.sounds[r])return void this.loadCategory(r);const n=`${r}.${a}`,o=Date.now();return o-(this.lastPlayedTime[n]||0)<this.debounceTime?void 0:(this.lastPlayedTime[n]=o,this.sounds[r].volume(t),this.sounds[r].play(a))}setMuted(e){this.muted=e,Object.values(this.sounds).forEach((t=>{t&&t.mute&&t.mute(e)}))}syncWithPreferences(e){e&&void 0!==e.muted&&this.setMuted(e.muted)}_setupMobileAudioUnlock(){if("undefined"==typeof window||!this._isMobileDevice())return;const e=()=>{if(this.audioUnlocked)return;const t=new Audio;t.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////",t.load(),t.play().then((()=>{this.audioUnlocked=!0,document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("click",e)})).catch((e=>{}))};document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)}_isMobileDevice(){return"undefined"!=typeof navigator&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)}},_={},A=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");a=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in _)return;_[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise(((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},w="_loadingScreen_16l5s_1",k="_loadingContainer_16l5s_10",j="_spinner_16l5s_21",E="_message_16l5s_31",F=({message:e="Loading..."})=>m.jsx("div",{className:w,children:m.jsxs("div",{className:k,children:[m.jsx("div",{className:j}),m.jsx("p",{className:E,children:e})]})}),C="https://api.in-between.live",S=e.createContext(),I=()=>e.useContext(S),T=({children:t})=>{const{token:r}=L(),[a,n]=e.useState(null),[o,s]=e.useState(!1),[i,d]=e.useState(null);e.useEffect((()=>{if("undefined"==typeof window)return;if(!r)return void(a&&(a.disconnect(),n(null),s(!1),d(null)));const e=c("https://api.in-between.live",{auth:{token:r},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,transports:["websocket","polling"],timeout:1e4});n(e),e.on("connect",(()=>{d(null)})),e.on("authenticated",(t=>{e.auth={userId:t.userId,username:t.username},s(!0),e.emit("getGameList")})),e.on("connect_error",(e=>{d("Failed to connect to game server: "+e.message),s(!1)})),e.on("disconnect",(()=>{s(!1)})),e.on("error",(e=>{d(e.message||"Unknown socket error")}));const t=["connect","authenticated","disconnect","connect_error","error","transport"];return()=>{e&&(t.forEach((t=>e.off(t))),e.disconnect(),n(null),s(!1),d(null))}}),[r]);const l={socket:a,isConnected:o,error:i,setError:d};return m.jsx(S.Provider,{value:l,children:t})},P=e.createContext(null),$=({children:t})=>{const[r,a]=e.useState(null),[n,o]=e.useState(null),[s,c]=e.useState(!0),[i,d]=e.useState(!1),l=I(),u=l?.socket;e.useEffect((()=>{if(u&&r)return u.on("balanceUpdated",(e=>{if(e&&"number"==typeof e.balance){const t={...r,balance:e.balance};a(t)}})),()=>{u.off("balanceUpdated")}}),[u,r]);const b=async e=>{try{if(!e)return null;const t=await fetch(`${C}/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch user data");return(await t.json()).user}catch(t){return null}};e.useEffect((()=>{(async()=>{let e=null;try{e=localStorage.getItem("token"),e&&o(e)}catch(t){localStorage.removeItem("token")}if(e)try{const t=await b(e);t?a(t):(a(null),o(null),localStorage.removeItem("token"))}catch(t){a(null),o(null),localStorage.removeItem("token")}finally{c(!1)}else a(null),o(null),c(!1)})()}),[]);const f=e.useCallback((()=>{a(null),o(null),d(!1),localStorage.removeItem("token")}),[]),g=e.useCallback((async()=>{try{const e=await b(n);e?a(e):f()}catch(e){f()}}),[n,f]);return s?null:m.jsx(P.Provider,{value:{user:r,token:n,login:async(e,t)=>{if(!e||!e.username||!e.id||"number"!=typeof e.balance)throw new Error("Invalid user data provided");if(!t)throw new Error("No authentication token provided");try{const r={username:e.username,id:e.id,balance:e.balance};a(r),o(t),localStorage.setItem("token",t),d(!0);const n=await b(t);n&&a(n)}catch(r){throw r}},logout:f,refreshUserData:g,loading:s},children:t})},L=()=>{const t=e.useContext(P);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},N=e.createContext(),B=()=>e.useContext(N),z=({children:t})=>{const{socket:r,isConnected:a}=I(),[n,o]=e.useState([]),[s,c]=e.useState(!0),[i,d]=e.useState(null);e.useEffect((()=>{if(!r||!a)return;const e=e=>{o(e),c(!1)},t=e=>{d(e.message||"An error occurred"),c(!1)};return r.on("gameList",e),r.on("error",t),r.emit("getGameList"),()=>{r.off("gameList",e),r.off("error",t)}}),[r,a]);const l={gameList:n,loading:s,error:i};return m.jsx(N.Provider,{value:l,children:t})},O=e.lazy((()=>A((()=>import("./AuthPage-BoGqJyVU.js")),__vite__mapDeps([0,1,2,3,4,5,6,7])))),D=e.lazy((()=>A((()=>import("./Lobby-DgbPjefQ.js")),__vite__mapDeps([8,1,2,3,4,9,10,5,6,11])))),M=e.lazy((()=>A((()=>import("./GameRoom-BFjnHP1V.js")),__vite__mapDeps([12,1,9,10,2,5,6,13])))),U=({children:e})=>{const{user:t,loading:r}=L();return r?m.jsx(F,{message:"Checking authentication..."}):t?e:m.jsx(a,{to:"/auth",replace:!0})},R=r([{path:"/",element:m.jsx(U,{children:m.jsx(z,{children:m.jsx(e.Suspense,{fallback:m.jsx(F,{message:"Loading..."}),children:m.jsx(D,{})})})})},{path:"/auth",element:m.jsx(e.Suspense,{fallback:m.jsx(F,{message:"Loading..."}),children:m.jsx(O,{})})},{path:"/:gameId",element:m.jsx(U,{children:m.jsx(e.Suspense,{fallback:m.jsx(F,{message:"Loading..."}),children:m.jsx(M,{})})})},{path:"*",element:m.jsx(a,{to:"/",replace:!0})}]),V={overlay:"_overlay_zei4j_1",modal:"_modal_zei4j_17",header:"_header_zei4j_38",closeButton:"_closeButton_zei4j_55",sectionHeader:"_sectionHeader_zei4j_74",settingItem:"_settingItem_zei4j_90",settingControls:"_settingControls_zei4j_102",settingDescription:"_settingDescription_zei4j_110",textInput:"_textInput_zei4j_132",inputError:"_inputError_zei4j_150",errorMessage:"_errorMessage_zei4j_155",content:"_content_zei4j_165",footer:"_footer_zei4j_208"};let G=0;function K({title:r,onClose:a,children:n,footer:o,headerButtons:s,className:c="",overlayStyle:i,...d}){e.useEffect((()=>(1==++G&&document.body.classList.add("modal-open"),()=>{0==--G&&document.body.classList.remove("modal-open")})),[]);const l=m.jsx("div",{className:V.overlay,style:i,onClick:a,children:m.jsxs("div",{className:`${V.modal} ${c}`,onClick:e=>e.stopPropagation(),...d,children:[r&&m.jsxs("div",{className:V.header,children:[m.jsx("h2",{children:r}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s,m.jsx("button",{className:V.closeButton,onClick:a,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"×"})]})]}),m.jsx("div",{className:V.content,children:n}),o&&m.jsx("div",{className:V.footer,children:o})]})});return t.createPortal(l,document.body)}const W="_keyboardModal_nsw4g_2",q="_inputDisplay_nsw4g_7",J="_tempInput_nsw4g_12",H="_keyboardGrid_nsw4g_37",Q="_keyRow_nsw4g_41",Z="_key_nsw4g_2",Y="_specialKey_nsw4g_87",X="_spaceKey_nsw4g_98",ee="_activeShift_nsw4g_103",te=({isVisible:t,onClose:r,onEnter:a,inputType:n="text",initialValue:o=""})=>{const{keyboardTitle:s}=ae(),[c,i]=e.useState("lowercase"),[d,l]=e.useState("");e.useEffect((()=>{l(t?"number"===n?o&&"0"!==o?o:"":o||"":"")}),[t,o,n]);const u={lowercase:[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["space","enter"]],uppercase:[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["space","enter"]],numbers:[["1","2","3"],["4","5","6"],["7","8","9"],["0","backspace"],["enter"]]}["number"===n?"numbers":c],b=e.useCallback((e=>{switch(e){case"shift":i((e=>"lowercase"===e?"uppercase":"lowercase"));break;case"backspace":l((e=>e.slice(0,-1)));break;case"enter":a?.(d);break;case"space":l((e=>e+" "));break;default:l((t=>t+e))}}),[a,d]),f=e=>{switch(e){case"shift":return"⇧";case"backspace":return"⌫";case"space":return"Space";case"enter":return"↵";default:return e}},g=e=>{let t=Z;return["shift","backspace","space","enter"].includes(e)&&(t+=` ${Y}`),"space"===e&&(t+=` ${X}`),"shift"===e&&"uppercase"===c&&(t+=` ${ee}`),t};return e.useEffect((()=>{if(t){const e=e=>{"Escape"===e.key&&(e.preventDefault(),r?.())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[t,r]),t?m.jsxs(K,{title:s||("number"===n?"Number Pad":"Virtual Keyboard"),onClose:r,className:W,overlayStyle:{zIndex:1300},children:[m.jsx("div",{className:q,children:m.jsx("input",{type:"password"===n?"password":"text",value:d,className:J,readOnly:!0,placeholder:"Type below..."})}),m.jsx("div",{className:H,children:u.map(((e,t)=>m.jsx("div",{className:Q,children:e.map(((e,r)=>m.jsx("button",{className:g(e),onClick:()=>b(e),"data-gamepad-focusable":"true","aria-label":"backspace"===e?"Backspace":"enter"===e?"Enter":"space"===e?"Space":"shift"===e?"Shift":e,children:f(e)},`${t}-${r}`)))},t)))})]}):null},re=e.createContext(),ae=()=>{const t=e.useContext(re);if(!t)throw new Error("useVirtualKeyboardContext must be used within a VirtualKeyboardProvider");return t},ne=({children:t})=>{const r=(()=>{const[t,r]=e.useState(!1),[a,n]=e.useState(null),[o,s]=e.useState("text"),[c,i]=e.useState(""),[d,l]=e.useState(!1);e.useEffect((()=>{const e=()=>{const e=document.body.classList.contains("gamepad-navigation-active");l(e)};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()}),[]);const u=e.useCallback(((e,t="text",a="")=>{e&&(n(e),s(t),i(a),r(!0),e.blur())}),[]),b=e.useCallback((()=>{r(!1),n(null),s("text"),i("")}),[]),f=e.useCallback((e=>{if(!a)return;Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(a,e||"");const t=new Event("input",{bubbles:!0});a.dispatchEvent(t);const r=new Event("change",{bubbles:!0});a.dispatchEvent(r),b()}),[a,b]),g=e.useCallback(((e,t="text",r="")=>{if(!e)return;let a=e;e.querySelector&&e.querySelector("input")&&(a=e.querySelector("input"));const n=e=>{d&&document.body.classList.contains("gamepad-navigation-active")&&(e.preventDefault(),u(a,t,r))};return a.addEventListener("click",n),()=>{a.removeEventListener("click",n)}}),[d,u]),h=e.useCallback((()=>a?.value||""),[a]);return{isVisible:t,inputType:o,keyboardTitle:c,currentInput:a,isGamepadActive:d,showKeyboard:u,hideKeyboard:b,handleEnter:f,enhanceInput:g,getCurrentInputValue:h}})(),{isVisible:a,inputType:n,hideKeyboard:o,handleEnter:s,getCurrentInputValue:c}=r;return m.jsxs(re.Provider,{value:r,children:[t,a&&m.jsx(te,{isVisible:a,inputType:n,initialValue:c(),onClose:o,onEnter:s})]})},oe="_toast_7vp16_1",se="_slideOut_7vp16_32",ce="_iconWrapper_7vp16_47",ie="_icon_7vp16_47",de="_emojiIcon_7vp16_62",le="_content_7vp16_76",ue="_title_7vp16_83",be="_message_7vp16_90",fe="_emojiMessage_7vp16_98",ge="_playerName_7vp16_105",he="_reactionText_7vp16_111",pe="_emojiReaction_7vp16_117",me="_closeButton_7vp16_135",ye=({title:t,message:r,emoji:a="ℹ",color:n="#3498db",duration:o=4e3,onClose:s,position:c})=>{const[i,d]=e.useState(!0);e.useEffect((()=>{if(o>0){const e=setTimeout((()=>{d(!1),setTimeout(s,300)}),o);return()=>clearTimeout(e)}}),[o,s]);const l=!t&&"ℹ"!==a;return m.jsxs("div",{className:`${oe} ${l&&i?pe:""} ${i?"":se}`,style:{top:"20px",zIndex:1e4+c,borderColor:n},children:[m.jsx("div",{className:ce,children:m.jsx("span",{className:`${ie} ${l?de:""}`,style:{color:n,textShadow:l?`0 0 20px ${n}, 0 0 40px ${n}60`:`0 0 8px ${n}80`},children:a})}),m.jsxs("div",{className:le,children:[t&&m.jsx("div",{className:ue,children:t}),m.jsx("div",{className:`${be} ${l?fe:""}`,children:l?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:ge,children:r}),m.jsx("span",{className:he,children:"reacted!"})]}):r})]}),m.jsx("button",{className:me,onClick:s,"aria-label":"Close notification",children:"×"})]})},ve=e.createContext(),xe=({children:t})=>{const[r,a]=e.useState([]),[n,o]=e.useState([]),[s,c]=e.useState(0),{socket:i}=I(),d=e.useCallback(((e,t,r="ℹ",n="#3498db",i=4e3)=>{const d=Date.now()+Math.random(),l={id:d,title:e,message:t,emoji:r,color:n,duration:i},u=Date.now();return u-s>=600?(a((e=>[...e,l])),c(u)):o((e=>[...e,l])),d}),[s]),l=e.useCallback((e=>{a((t=>t.filter((t=>t.id!==e))))}),[]),u=e.useCallback(((e,t,r)=>d(e,t,"✓","#27ae60",r)),[d]),b=e.useCallback(((e,t,r)=>d(e,t,"✕","#e74c3c",r)),[d]),f=e.useCallback(((e,t,r)=>d(e,t,"⚠","#f39c12",r)),[d]),g=e.useCallback(((e,t,r)=>d(e,t,"ℹ","#3498db",r)),[d]),h=e.useCallback(((e,t,r)=>d(e,t,"🎮","#9b59b6",r)),[d]),p=e.useCallback(((e,t,r)=>d(e,t,"💰","#16a085",r)),[d]);e.useEffect((()=>{if(0===n.length)return;const e=setTimeout((()=>{const e=n[0];o((e=>e.slice(1))),a((t=>[...t,e])),c(Date.now())}),600);return()=>clearTimeout(e)}),[n,r]),e.useEffect((()=>{if(!i)return;const e=e=>{d(e.title||"",e.message,e.emoji||"ℹ",e.color||"#3498db",e.duration)};return i.on("toast",e),()=>{i.off("toast",e)}}),[i,d]);const y={addToast:d,removeToast:l,showSuccess:u,showError:b,showWarning:f,showInfo:g,showGameEvent:h,showMoneyEvent:p,toasts:r};return m.jsxs(ve.Provider,{value:y,children:[t,m.jsx("div",{className:"toast-container",style:{position:"fixed",top:0,right:0,zIndex:1e4},children:r.map(((e,t)=>m.jsx(ye,{title:e.title,message:e.message,emoji:e.emoji,color:e.color,duration:e.duration,position:t,onClose:()=>l(e.id)},e.id)))})]})};function _e(){return e.useEffect((()=>{x.initialize()}),[]),m.jsx(xe,{children:m.jsx(ne,{children:m.jsx(n,{router:R})})})}const Ae={default:{"--bg-primary":"#1a2a3a","--bg-secondary":"#2c3e50","--bg-card":"#152534","--bg-card-dark":"#1c2a3a","--bg-panel-start":"#1e2a38","--bg-panel-end":"#2980b9","--bg-loading":"#1a1a2e","--text-primary":"#ecf0f1","--text-secondary":"#bdc3c7","--text-dark":"#2c3e50","--text-light":"#ecf0f1","--text-muted":"#7f8c8d","--text-white":"#ffffff","--text-gray":"#666666","--text-error":"#e74c3c","--text-success":"#2ecc71","--text-warning":"#f1c40f","--text-info":"#3498db","--text-faded":"rgba(255, 255, 255, 0.6)","--text-subtle":"rgba(255, 255, 255, 0.7)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#3498db","--info-dark":"#2980b9","--info-light":"#5dade2","--success":"#2ecc71","--success-dark":"#27ae60","--success-light":"#58d68d","--btn-primary-start":"#3498db","--btn-primary-end":"#27ae60","--btn-primary-hover-start":"#3fa9e5","--btn-primary-hover-end":"#2ecc71","--btn-secondary-start":"rgba(52, 73, 94, 0.9)","--btn-secondary-end":"rgba(44, 62, 80, 0.9)","--btn-secondary-hover-start":"rgba(52, 73, 94, 1)","--btn-secondary-hover-end":"rgba(44, 62, 80, 1)","--btn-tertiary-start":"#3498db","--btn-tertiary-end":"#2980b9","--btn-tertiary-hover-start":"#5faee3","--btn-tertiary-hover-end":"#3498db","--btn-tertiary-shadow":"rgba(52, 152, 219, 0.3)","--color-focus":"#00ff88","--color-focus-shadow":"rgba(0, 255, 136, 0.3)","--color-divider-start":"rgba(52, 152, 219, 0.2)","--color-divider-middle":"rgba(52, 152, 219, 0.8)","--color-divider-end":"rgba(52, 152, 219, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--accent2":"#3498db","--accent3":"#00ff88","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(10, 25, 47, 0.95)","--input-bg-hover":"rgba(15, 35, 60, 0.98)","--input-bg-focus":"rgba(20, 40, 70, 1)","--input-text-color":"#ecf0f1","--input-border-color":"rgba(51, 65, 85, 0.7)","--color-glass-dark":"rgba(0, 0, 0, 0.3)","--color-glass-light":"rgba(0, 0, 0, 0.1)"},light:{"--bg-primary":"#f8f9fa","--bg-secondary":"#e9ecef","--bg-card":"#ffffff","--bg-card-dark":"#f1f3f5","--bg-panel-start":"#dee2e6","--bg-panel-end":"#ced4da","--bg-loading":"#e9ecef","--text-primary":"#212529","--text-secondary":"#495057","--text-dark":"#212529","--text-light":"#212529","--text-muted":"#6c757d","--text-white":"#ffffff","--text-gray":"#6c757d","--text-error":"#dc3545","--text-success":"#28a745","--text-warning":"#ffc107","--text-info":"#17a2b8","--text-faded":"rgba(33, 37, 41, 0.6)","--text-subtle":"rgba(33, 37, 41, 0.75)","--text-bright":"rgba(33, 37, 41, 0.9)","--info":"#17a2b8","--info-dark":"#138496","--info-light":"#20c997","--color-glass-dark":"rgba(248, 249, 250, 1)","--color-glass-light":"rgba(233, 236, 239, 0.8)","--success":"#28a745","--success-dark":"#218838","--success-light":"#38c757","--btn-primary-start":"#007bff","--btn-primary-end":"#0056b3","--btn-primary-hover-start":"#0069d9","--btn-primary-hover-end":"#004085","--btn-secondary-start":"rgba(108, 117, 125, 0.2)","--btn-secondary-end":"rgba(73, 80, 87, 0.2)","--btn-secondary-hover-start":"rgba(108, 117, 125, 0.3)","--btn-secondary-hover-end":"rgba(73, 80, 87, 0.3)","--btn-tertiary-start":"#6c757d","--btn-tertiary-end":"#545b62","--btn-tertiary-hover-start":"#5a6268","--btn-tertiary-hover-end":"#454d55","--btn-tertiary-shadow":"rgba(108, 117, 125, 0.3)","--color-focus":"#007bff","--color-focus-shadow":"rgba(0, 123, 255, 0.25)","--color-border-light":"rgba(0, 0, 0, 0.175)","--color-border-lighter":"rgba(0, 0, 0, 0.125)","--color-divider-start":"rgba(0, 123, 255, 0.15)","--color-divider-middle":"rgba(0, 123, 255, 0.5)","--color-divider-end":"rgba(0, 123, 255, 0.15)","--accent":"#ffc107","--accent-dark":"#e0a800","--accent2":"#17a2b8","--accent3":"#28a745","--secondary":"#6c757d","--secondary-dark":"#545b62","--input-bg":"#ffffff","--input-bg-hover":"#f8f9fa","--input-bg-focus":"#ffffff","--input-text-color":"#212529","--input-border-color":"rgba(0, 0, 0, 0.15)"},dark:{"--bg-primary":"#0a0a0a","--bg-secondary":"#161616","--bg-card":"#1a1a1a","--bg-card-dark":"#222222","--bg-panel-start":"#1f1f1f","--bg-panel-end":"#2980b9","--bg-loading":"#0d0d0d","--text-primary":"#e8e8e8","--text-secondary":"#a8a8a8","--text-dark":"#ffffff","--text-light":"#e8e8e8","--text-muted":"#888888","--text-white":"#ffffff","--text-gray":"#999999","--text-error":"#ff6b6b","--text-success":"#51cf66","--text-warning":"#ffd43b","--text-info":"#4dabf7","--text-faded":"rgba(255, 255, 255, 0.45)","--text-subtle":"rgba(255, 255, 255, 0.6)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#2980b9","--info-dark":"#2471a3","--info-light":"#3498db","--success":"#27ae60","--success-dark":"#1e8449","--success-light":"#2ecc71","--btn-primary-start":"#2980b9","--btn-primary-end":"#f39c12","--btn-primary-hover-start":"#3498db","--btn-primary-hover-end":"#f1c40f","--btn-secondary-start":"rgba(33, 37, 41, 0.9)","--btn-secondary-end":"rgba(23, 25, 28, 0.9)","--btn-secondary-hover-start":"rgba(52, 58, 64, 1)","--btn-secondary-hover-end":"rgba(33, 37, 41, 1)","--btn-tertiary-start":"#2980b9","--btn-tertiary-end":"#1f618d","--btn-tertiary-hover-start":"#3498db","--btn-tertiary-hover-end":"#2980b9","--btn-tertiary-shadow":"rgba(41, 128, 185, 0.4)","--color-focus":"#00ccff","--color-focus-shadow":"rgba(0, 204, 255, 0.3)","--color-border-light":"rgba(255, 255, 255, 0.12)","--color-border-lighter":"rgba(255, 255, 255, 0.18)","--color-divider-start":"rgba(41, 128, 185, 0.2)","--color-divider-middle":"rgba(41, 128, 185, 0.8)","--color-divider-end":"rgba(41, 128, 185, 0.2)","--accent":"#f39c12","--accent-dark":"#d68910","--accent2":"#00ccff","--accent3":"#ff6b6b","--secondary":"#c0392b","--secondary-dark":"#a93226","--input-bg":"rgba(255, 255, 255, 0.08)","--input-bg-hover":"rgba(255, 255, 255, 0.1)","--input-bg-focus":"rgba(255, 255, 255, 0.12)","--input-text-color":"var(--text-primary)","--input-border-color":"var(--color-border-light)","--color-glass-dark":"rgba(41, 128, 185, 0.08)","--color-glass-light":"rgba(243, 156, 18, 0.08)"},packers:{"--bg-primary":"#0A1713","--bg-secondary":"#154734","--bg-card":"#0D1F1A","--bg-card-dark":"#122A1F","--bg-panel-start":"#154734","--bg-panel-end":"#203731","--bg-loading":"#061109","--text-primary":"#FFFFFF","--text-secondary":"#FFB612","--text-dark":"#FFB612","--text-light":"#FFFFFF","--text-muted":"#C9B896","--text-white":"#FFFFFF","--text-gray":"#B5A482","--text-error":"#FF6B6B","--text-success":"#FFB612","--text-warning":"#FFC42E","--text-info":"#FFB612","--text-faded":"rgba(255, 255, 255, 0.6)","--text-subtle":"rgba(255, 255, 255, 0.7)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#FFB612","--info-dark":"#FFA300","--info-light":"#FFC42E","--success":"#203731","--success-dark":"#154734","--success-light":"#2F5645","--btn-primary-start":"#203731","--btn-primary-end":"#154734","--btn-primary-hover-start":"#2F5645","--btn-primary-hover-end":"#203731","--btn-secondary-start":"#FFB612","--btn-secondary-end":"#FFA300","--btn-secondary-hover-start":"#FFC42E","--btn-secondary-hover-end":"#FFB612","--btn-tertiary-start":"#FFB612","--btn-tertiary-end":"#FFA300","--btn-tertiary-hover-start":"#FFC42E","--btn-tertiary-hover-end":"#FFB612","--btn-tertiary-shadow":"rgba(255, 182, 18, 0.3)","--color-focus":"#FFB612","--color-focus-shadow":"rgba(255, 182, 18, 0.3)","--color-divider-start":"rgba(32, 55, 49, 0.2)","--color-divider-middle":"rgba(255, 182, 18, 0.8)","--color-divider-end":"rgba(32, 55, 49, 0.2)","--accent":"#FFB612","--accent-dark":"#FFA300","--accent2":"#C9B896","--accent3":"#FFFFFF","--secondary":"#C9B896","--secondary-dark":"#B5A482","--input-bg":"rgba(21, 71, 52, 0.3)","--input-bg-hover":"rgba(21, 71, 52, 0.4)","--input-bg-focus":"rgba(21, 71, 52, 0.5)","--input-text-color":"#FFFFFF","--input-placeholder-color":"rgba(255, 255, 255, 0.5)","--input-border-color":"rgba(255, 182, 18, 0.4)","--input-border-hover":"rgba(255, 182, 18, 0.6)","--input-border-focus":"#FFB612","--input-border-width":"2px","--input-padding":"12px 16px","--input-font-size":"16px","--input-line-height":"1.5","--input-shadow-focus":"0 0 0 3px rgba(255, 182, 18, 0.25)","--color-glass-dark":"rgba(32, 55, 49, 0.08)","--color-glass-light":"rgba(255, 182, 18, 0.05)"},sunset:{"--bg-primary":"#0c1929","--bg-secondary":"#162544","--bg-card":"#0a1520","--bg-card-dark":"#111f35","--bg-panel-start":"#162544","--bg-panel-end":"#ff6b6b","--bg-loading":"#060d17","--text-primary":"#ffd6a5","--text-secondary":"#ffb088","--text-dark":"#8b5a3c","--text-light":"#ffd6a5","--text-muted":"#daa49a","--text-white":"#fff5f0","--text-gray":"#c9a882","--text-error":"#ff6b6b","--text-success":"#ff9a76","--text-warning":"#ffc93c","--text-info":"#ff8e71","--text-faded":"rgba(255, 214, 165, 0.6)","--text-subtle":"rgba(255, 214, 165, 0.7)","--text-bright":"rgba(255, 214, 165, 0.9)","--info":"#ff8e71","--info-dark":"#ff7657","--info-light":"#ffa589","--success":"#ff9a76","--success-dark":"#ff8561","--success-light":"#ffb088","--btn-primary-start":"#c44569","--btn-primary-end":"#f8961e","--btn-primary-hover-start":"#d65577","--btn-primary-hover-end":"#f9a73e","--btn-secondary-start":"rgba(22, 37, 68, 0.9)","--btn-secondary-end":"rgba(12, 25, 41, 0.9)","--btn-secondary-hover-start":"rgba(28, 46, 78, 1)","--btn-secondary-hover-end":"rgba(22, 37, 68, 1)","--btn-tertiary-start":"#ff6b6b","--btn-tertiary-end":"#ee5a52","--btn-tertiary-hover-start":"#ff8080","--btn-tertiary-hover-end":"#ff6b6b","--btn-tertiary-shadow":"rgba(255, 107, 107, 0.3)","--color-focus":"#ff8e71","--color-focus-shadow":"rgba(255, 142, 113, 0.3)","--color-divider-start":"rgba(196, 69, 105, 0.2)","--color-divider-middle":"rgba(248, 150, 30, 0.8)","--color-divider-end":"rgba(196, 69, 105, 0.2)","--accent":"#f8961e","--accent-dark":"#f37121","--accent2":"#ff6b6b","--accent3":"#c44569","--secondary":"#ff6b6b","--secondary-dark":"#ee5a52","--input-bg":"rgba(12, 25, 41, 0.95)","--input-bg-hover":"rgba(18, 35, 51, 0.98)","--input-bg-focus":"rgba(22, 37, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(255, 142, 113, 0.3)","--color-glass-dark":"rgba(196, 69, 105, 0.08)","--color-glass-light":"rgba(248, 150, 30, 0.05)"},"miami-vice":{"--bg-primary":"#1a0f2e","--bg-secondary":"#2d1844","--bg-card":"#160d28","--bg-card-dark":"#231432","--bg-panel-start":"#2d1844","--bg-panel-end":"#ff6b9d","--bg-loading":"#0f0820","--text-primary":"#ffeaa7","--text-secondary":"#fab1a0","--text-dark":"#74526c","--text-light":"#ffeaa7","--text-muted":"#dfe6e9","--text-white":"#fff5f0","--text-gray":"#b2bec3","--text-error":"#ff7675","--text-success":"#fdcb6e","--text-warning":"#ffeb3b","--text-info":"#00d2d3","--text-faded":"rgba(255, 234, 167, 0.6)","--text-subtle":"rgba(255, 234, 167, 0.7)","--text-bright":"rgba(255, 234, 167, 0.9)","--info":"#00d2d3","--info-dark":"#00b8b8","--info-light":"#01e5e5","--success":"#fdcb6e","--success-dark":"#f9b747","--success-light":"#ffeaa7","--btn-primary-start":"#ff6b9d","--btn-primary-end":"#00d2d3","--btn-primary-hover-start":"#ee5a6f","--btn-primary-hover-end":"#01e5e5","--btn-secondary-start":"rgba(45, 24, 68, 0.9)","--btn-secondary-end":"rgba(26, 15, 46, 0.9)","--btn-secondary-hover-start":"rgba(55, 34, 78, 1)","--btn-secondary-hover-end":"rgba(45, 24, 68, 1)","--btn-tertiary-start":"#00d2d3","--btn-tertiary-end":"#00b8b8","--btn-tertiary-hover-start":"#01e5e5","--btn-tertiary-hover-end":"#00d2d3","--btn-tertiary-shadow":"rgba(0, 210, 211, 0.3)","--color-focus":"#00d2d3","--color-focus-shadow":"rgba(0, 210, 211, 0.3)","--color-divider-start":"rgba(255, 107, 157, 0.2)","--color-divider-middle":"rgba(0, 210, 211, 0.8)","--color-divider-end":"rgba(255, 107, 157, 0.2)","--accent":"#feca57","--accent-dark":"#f9b747","--accent2":"#00d2d3","--accent3":"#ff6b9d","--secondary":"#ff7979","--secondary-dark":"#ff6348","--input-bg":"rgba(26, 15, 46, 0.95)","--input-bg-hover":"rgba(35, 20, 56, 0.98)","--input-bg-focus":"rgba(45, 24, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(0, 210, 211, 0.3)","--color-glass-dark":"rgba(255, 107, 157, 0.08)","--color-glass-light":"rgba(0, 210, 211, 0.05)"},purple:{"--bg-primary":"#1a1a2e","--bg-secondary":"#2d2d44","--bg-card":"#16132d","--bg-card-dark":"#1f1b3a","--bg-panel-start":"#1a1a2e","--bg-panel-end":"#8e44ad","--bg-loading":"#0f0f1a","--text-primary":"#f3e5f5","--text-secondary":"#ce93d8","--text-dark":"#4a148c","--text-light":"#f3e5f5","--text-muted":"#ba68c8","--text-white":"#ffffff","--text-gray":"#9c27b0","--text-error":"#f44336","--text-success":"#ab47bc","--text-warning":"#ffc107","--text-info":"#ba68c8","--text-faded":"rgba(243, 229, 245, 0.6)","--text-subtle":"rgba(243, 229, 245, 0.7)","--text-bright":"rgba(243, 229, 245, 0.9)","--info":"#8e44ad","--info-dark":"#7d3c98","--info-light":"#a569bd","--success":"#a569bd","--success-dark":"#8e44ad","--success-light":"#bb8fce","--btn-primary-start":"#8e44ad","--btn-primary-end":"#f1c40f","--btn-primary-hover-start":"#a569bd","--btn-primary-hover-end":"#f39c12","--btn-secondary-start":"rgba(45, 45, 68, 0.9)","--btn-secondary-end":"rgba(26, 26, 46, 0.9)","--btn-secondary-hover-start":"rgba(58, 58, 88, 1)","--btn-secondary-hover-end":"rgba(45, 45, 68, 1)","--btn-tertiary-start":"#8e44ad","--btn-tertiary-end":"#6c3483","--btn-tertiary-hover-start":"#a569bd","--btn-tertiary-hover-end":"#8e44ad","--btn-tertiary-shadow":"rgba(142, 68, 173, 0.3)","--color-focus":"#cc99ff","--color-focus-shadow":"rgba(204, 153, 255, 0.3)","--color-divider-start":"rgba(142, 68, 173, 0.2)","--color-divider-middle":"rgba(142, 68, 173, 0.8)","--color-divider-end":"rgba(142, 68, 173, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--accent2":"#ab47bc","--accent3":"#ba68c8","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(26, 26, 46, 0.95)","--input-bg-hover":"rgba(35, 35, 55, 0.98)","--input-bg-focus":"rgba(45, 45, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(142, 68, 173, 0.3)","--color-glass-dark":"rgba(142, 68, 173, 0.08)","--color-glass-light":"rgba(241, 196, 15, 0.08)"}},we=e=>{const t=Ae[e]||Ae.default,r=document.documentElement;Object.entries(t).forEach((([e,t])=>{r.style.setProperty(e,t)}))},ke=()=>localStorage.getItem("selectedTheme")||"default",je=e=>{localStorage.setItem("selectedTheme",e),we(e)},Ee=e.createContext(null),Fe=e=>{if(!e)return null;const t="https://api.in-between.live";if(e.startsWith("http"))return e;if(e.startsWith("/files/"))return`${t}${e}`;if(e.includes("/uploads/")){const r=e.split("/"),a=r.pop();return`${t}/files/${r[r.length-1]}/${a}`}return`${t}${e}`},Ce=e=>e?{...e,profileImg:Fe(e.profileImg)}:{},Se=({children:t})=>{const[r,a]=e.useState({profileImg:null,autoAnte:!1,muted:!1,selectedTitle:null}),[n,s]=e.useState(!0),{user:c}=L(),i=o.useCallback((async()=>{if(!c)return a({autoAnte:!1}),void s(!1);try{s(!0);const e="https://api.in-between.live",t=localStorage.getItem("token");if(!t)return void s(!1);const r=await fetch(`${e}/preferences`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to load preferences");const n=await r.json(),o=Ce(n)||{autoAnte:!1,muted:!1};a(o),void 0!==o.muted&&x.setMuted(o.muted)}catch(e){a({autoAnte:!1})}finally{s(!1)}}),[c]);e.useEffect((()=>{c&&i()}),[c,i]);const d=async(e,t)=>{if(!c)return!1;try{const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;a((r=>({...r,[e]:t}))),"muted"===e&&x.setMuted(t);const o=await fetch(`${r}/preferences/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({value:t})});if(!o.ok)throw new Error(`Failed to update ${e} preference`);const s=await o.json(),c=Ce(s);return a(c),!0}catch(r){return await i(),!1}};return m.jsx(Ee.Provider,{value:{preferences:r,updatePreference:d,toggleAutoAnte:async()=>{const e=!r.autoAnte;return await d("autoAnte",e)},toggleMute:async()=>{const e=!r.muted;return await d("muted",e)},updateSelectedTitle:async e=>await d("selectedTitle",e),uploadProfileImg:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;const o=await fetch(`${r}/preferences/profileImg`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:t}),s=await o.text();if(!o.ok)throw new Error(`Failed to upload profile image: ${s}`);const c=s?JSON.parse(s):{},i=Fe(c.fileUrl);return a((e=>({...e,profileImg:i}))),!0}catch(t){return!1}},loading:n},children:t})},Ie=()=>{const t=e.useContext(Ee);if(!t)throw new Error("usePreferences must be used within a PreferencesProvider");return t},Te=e.createContext(null),Pe=({children:t})=>{const{socket:r}=I(),{token:a}=L(),[n,o]=e.useState(new Map),s=e.useRef(new Set),c=e.useRef(null);e.useEffect((()=>{if(!r)return;const e=({userId:e,data:t})=>{o((r=>{const a=new Map(r);return a.set(e,t),a}))};return r.on("userDataUpdated",e),()=>{r.off("userDataUpdated",e)}}),[r]),e.useEffect((()=>()=>{c.current&&clearTimeout(c.current)}),[]);const i=e.useCallback((async e=>{if(!e||0===e.length||!a)return{};try{const t=await fetch(`${C}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({userIds:e})});if(!t.ok)throw new Error("Failed to fetch users data");const r=await t.json();return o((e=>{const t=new Map(e);return Object.entries(r).forEach((([e,r])=>{t.set(e,r)})),t})),r}catch(t){return{}}}),[a]),d=e.useCallback((()=>{if(0===s.current.size)return;const e=Array.from(s.current);s.current.clear(),i(e)}),[i]),l={getUserData:e.useCallback((e=>{if(!e)return null;const t=n.get(e);return t||(s.current.add(e),c.current&&clearTimeout(c.current),c.current=setTimeout((()=>{d()}),10),null)}),[n,d]),prefetchUsers:e.useCallback((e=>{const t=e.filter((e=>!n.has(e)));t.length>0&&i(t)}),[n,i])};return m.jsx(Te.Provider,{value:l,children:t})},$e=t=>{const r=e.useContext(Te);if(!r)throw new Error("useUserData must be used within UserDataProvider");return r.getUserData(t)};(()=>{const e=localStorage.getItem("selectedTheme")||"default";we(e)})(),y.createRoot(document.getElementById("root")).render(m.jsx(o.StrictMode,{children:m.jsx($,{children:m.jsx(T,{children:m.jsx(Pe,{children:m.jsx(Se,{children:m.jsx(_e,{})})})})})}));export{C as A,K as B,F as L,Te as U,L as a,I as b,$e as c,V as d,B as e,Ie as f,ke as g,je as h,m as j,x as s,ae as u};
