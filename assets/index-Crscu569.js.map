{"version":3,"mappings":"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","names":["m","require$$0","createRoot","hydrateRoot","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","i","length","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","oncanplaythrough","e","_setupCodecs","audioTest","err","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","split","checkSafari","indexOf","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","document","removeEventListener","_emit","addEventListener","_obtainHtml5Audio","pop","testPlay","play","Promise","then","catch","console","warn","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","handleSuspension","_resumeAfterSuspend","Howl","o","src","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_xhr","method","xhr","headers","withCredentials","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","url","str","exec","toLowerCase","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","apply","fade","from","to","len","min","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","call","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","test","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","_endListener","code","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","XMLHttpRequest","open","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","type","createPanner","soundService","constructor","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","API_URL","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","join","leave","alert","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","body","maxTouchPoints","LoadingScreen","message","jsxRuntimeExports","jsx","className","styles","children","jsxs","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","Blob","toString","withNativeArrayBuffer","ArrayBuffer","isView","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","content","result","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","bytes","decode","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","transform","packet","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","size","Emitter","mixin","_callbacks","removeListener","removeAllListeners","cb","callbacks","emit","emitReserved","listeners","hasListeners","nextTick","resolve","setTimeoutFn","globalThisShim","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","randomString","random","TransportError","Error","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","doOpen","doClose","onClose","packets","write","onOpen","onData","onPacket","details","onPause","createUri","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","value","hasCORS","empty","BaseXHR","isSSL","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","extraHeaders","setDisableHeaderCheck","cookieJar","addCookies","requestTimeout","onreadystatechange","parseCookies","getResponseHeader","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","attachEvent","unloadHandler","hasXHR2","newRequest","concat","isReactNative","product","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","b","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","_hasPingExpired","hasExpired","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect_error","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queueSeq","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","factor","jitter","attempts","rand","deviation","floor","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","parsed","loc","href","sameNamespace","forceNew","multiplex","SocketContext","createContext","useSocket","useContext","SocketProvider","token","useAuth","setSocket","useState","setIsConnected","setError","useEffect","newSocket","userData","userId","username","socketEvents","Provider","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","log","balance","updatedUser","fetchUserData","async","authToken","fetch","Authorization","ok","json","currentToken","localStorage","getItem","removeItem","initializeAuth","logout","useCallback","refreshUserData","login","newToken","initialUserData","setItem","completeUserData","LobbyContext","useLobby","LobbyProvider","gameList","setGameList","handleGameList","games","handleError","contextValue","AuthPage","lazy","__vitePreload","import","__VITE_PRELOAD__","Lobby","GameRoom","ProtectedRoute","Navigate","router","createBrowserRouter","element","Suspense","fallback","openModalCount","BaseModal","title","footer","headerButtons","overlayStyle","props","classList","remove","modalContent","overlay","style","onClick","modal","stopPropagation","display","gap","alignItems","closeButton","createPortal","VirtualKeyboard","isVisible","onEnter","inputType","initialValue","keyboardTitle","useVirtualKeyboardContext","currentLayout","setCurrentLayout","tempInput","setTempInput","lowercase","uppercase","numbers","handleKeyPress","prev","getKeyDisplayText","getKeyClass","handleKeyDown","preventDefault","zIndex","readOnly","row","rowIndex","keyIndex","VirtualKeyboardContext","VirtualKeyboardProvider","keyboardState","setIsVisible","currentInput","setCurrentInput","setInputType","setKeyboardTitle","isGamepadActive","setIsGamepadActive","checkGamepadNavigation","contains","observer","MutationObserver","observe","attributes","attributeFilter","showKeyboard","inputElement","blur","hideKeyboard","handleEnter","finalValue","getOwnPropertyDescriptor","HTMLInputElement","set","inputEvent","Event","bubbles","dispatchEvent","changeEvent","enhanceInput","actualInput","querySelector","handleClick","getCurrentInputValue","useVirtualKeyboard","Toast","emoji","color","position","isEmojiReaction","top","borderColor","background","textShadow","Fragment","ToastContext","ToastProvider","toasts","setToasts","toastQueue","setToastQueue","lastToastTime","setLastToastTime","addToast","newToast","removeToast","toast","showSuccess","showError","showWarning","showInfo","showGameEvent","showMoneyEvent","nextToast","handleToast","right","App","RouterProvider","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","selectedTitle","loadPreferences","React","finalPreferences","updatePreference","key2","formattedData","toggleAutoAnte","newValue","toggleMute","updateSelectedTitle","titleString","uploadTwoSecondPotGif","file","formData","FormData","append","text","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","UserDataContext","UserDataProvider","userCache","setUserCache","Map","pendingFetches","useRef","Set","fetchTimer","handleUserDataUpdate","newCache","current","fetchUsersData","userIds","entries","executeBatchFetch","clear","getUserData","cached","get","prefetchUsers","uncachedIds","has","useUserData","ReactDOM","getElementById","render","StrictMode"],"ignoreList":[0,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"sources":["../../node_modules/react-dom/client.js","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/components/common/LoadingScreen.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/contexts/AuthContext.jsx","../../src/contexts/LobbyContext.jsx","../../src/router.jsx","../../src/components/common/BaseModal.jsx","../../src/components/VirtualKeyboard.jsx","../../src/contexts/VirtualKeyboardContext.jsx","../../src/hooks/useVirtualKeyboard.js","../../src/components/Toast.jsx","../../src/contexts/ToastContext.jsx","../../src/App.jsx","../../src/contexts/PreferencesContext.jsx","../../src/contexts/UserDataContext.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 500]; \n      sprites.leave = [500, 1000];\n      sprites.alert = [1500, 1500]; \n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React from 'react';\nimport styles from './LoadingScreen.module.css';\n\n/**\n * A reusable loading screen component\n * @param {Object} props\n * @param {string} props.message - The message to display while loading\n */\nexport const LoadingScreen = ({ message = 'Loading...' }) => {\n  return (\n    <div className={styles.loadingScreen}>\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\nimport { useAuth } from './AuthContext';\n\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\nexport const SocketProvider = ({ children }) => {\n  const { token } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (!token) {\n      if (socket) {\n        socket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n      return;\n    }\n\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      setError(null);\n    });\n    \n    newSocket.on('authenticated', (userData) => {\n      newSocket.auth = {\n        userId: userData.userId,\n        username: userData.username\n      };\n      \n      setIsConnected(true);\n      \n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      setError(err.message || 'Unknown socket error');\n    });\n\n    const socketEvents = [\n      'connect',\n      'authenticated',\n      'disconnect',\n      'connect_error',\n      'error',\n      'transport'\n    ];\n\n    return () => {\n      if (newSocket) {\n        socketEvents.forEach(event => newSocket.off(event));\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n\n  }, [token]);\n\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdated', (data) => { \n        console.log('[AuthContext] Received balanceUpdated event:', data); \n        if (data && typeof data.balance === 'number') {\n          console.log(`[AuthContext] Updating user balance from ${user?.balance} to ${data.balance}`); \n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state\n          setUser(updatedUser);\n        } else {\n          console.warn('[AuthContext] Received invalid balance data:', data);\n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdated');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async (authToken) => {\n    try {\n      // Use the passed token directly\n      if (!authToken) {\n        return null;\n      }\n\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${authToken}`, // Use authToken\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Single Effect for Initial Authentication Check\n  useEffect(() => {\n    const initializeAuth = async () => {\n      let currentToken = null;\n      try {\n        currentToken = localStorage.getItem('token');\n        \n        if (currentToken) {\n          setToken(currentToken); \n        }\n      } catch (error) {\n        console.error('[Auth] Error reading token from localStorage:', error);\n        localStorage.removeItem('token'); // Clear potentially corrupted token\n      }\n\n      // Now, decide whether to fetch user data based on the token found\n      if (currentToken) {\n        try {\n          const userData = await fetchUserData(currentToken); \n          if (userData) {\n            setUser(userData); \n          } else {\n            // Fetch failed or returned no data for a valid token\n            console.error('[Auth] Token valid but failed to fetch user data. Logging out.');\n            setUser(null);\n            setToken(null);\n            localStorage.removeItem('token');\n          }\n        } catch (error) {\n          console.error('[Auth] Error during user data fetch. Logging out.', error);\n          setUser(null);\n          setToken(null);\n          localStorage.removeItem('token');\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        setUser(null);\n        setToken(null);\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []); // Empty dependency array ensures it runs only once on mount\n\n  const login = async (userData, newToken) => {\n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      const completeUserData = await fetchUserData(newToken);\n      if (completeUserData) {\n        setUser(completeUserData);\n      }\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = useCallback(() => {\n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage\n    localStorage.removeItem('token');\n  }, []); // Empty dependency array means this function never changes\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = useCallback(async () => {\n    try {\n      // fetchUserData depends on the 'token' state variable\n      const userData = await fetchUserData(token);\n      if (userData) {\n        setUser(userData);\n      } else {\n        console.error('[Auth] Failed to refresh user data. Logging out.');\n        // logout is now stable thanks to useCallback above\n        logout();\n      }\n    } catch (error) { \n      console.error('[Auth] Error during manual refresh. Logging out.', error);\n      logout();\n    }\n  // Add dependencies: token and logout\n  }, [token, logout]);\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {/* {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )} */}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\n\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\nexport const LobbyProvider = ({ children }) => {\n  const { socket, isConnected } = useSocket();\n  \n  const [gameList, setGameList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    \n    const handleGameList = (games) => {\n      setGameList(games);\n      setLoading(false);\n    };\n    \n    const handleError = (err) => {\n      console.error('[LobbyContext] Socket error:', err.message || err);\n      setError(err.message || 'An error occurred');\n      setLoading(false);\n    };\n    \n    socket.on('gameList', handleGameList);\n    socket.on('error', handleError);\n    \n    socket.emit('getGameList');\n    \n    return () => {\n      socket.off('gameList', handleGameList);\n      socket.off('error', handleError);\n    };\n  }, [socket, isConnected]);\n  \n  const contextValue = {\n    gameList,\n    loading,\n    error,\n  };\n  \n  return (\n    <LobbyContext.Provider value={contextValue}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import { lazy, Suspense } from 'react';\nimport { createBrowserRouter, Navigate } from 'react-router-dom';\nimport { LoadingScreen } from './components/common/LoadingScreen';\nimport { useAuth } from './contexts/AuthContext';\nimport { LobbyProvider } from './contexts/LobbyContext';\n\n// Lazy load routes for code splitting\nconst AuthPage = lazy(() => import('./components/auth/AuthPage'));\nconst Lobby = lazy(() => import('./components/Lobby'));\nconst GameRoom = lazy(() => import('./components/GameRoom'));\n\n// Auth protection wrapper component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingScreen message=\"Checking authentication...\" />;\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n  \n  return children;\n};\n\n// Define the router configuration\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: (\n      <ProtectedRoute>\n        <LobbyProvider>\n          <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n            <Lobby />\n          </Suspense>\n        </LobbyProvider>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '/auth',\n    element: (\n      <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n        <AuthPage />\n      </Suspense>\n    ),\n  },\n  {\n    path: '/:gameId',\n    element: (\n      <ProtectedRoute>\n        <Suspense fallback={<LoadingScreen message=\"Loading...\" />}>\n          <GameRoom />\n        </Suspense>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"/\" replace />,\n  },\n]);\n","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './BaseModal.module.css';\n\n// Track number of open modals globally\nlet openModalCount = 0;\n\n// BaseModal: Shared modal structure for all app modals\nexport default function BaseModal({ title, onClose, children, footer, headerButtons, className = '', overlayStyle, ...props }) {\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (++openModalCount === 1) document.body.classList.add('modal-open');\n    return () => { if (--openModalCount === 0) document.body.classList.remove('modal-open'); };\n  }, []);\n  \n  const modalContent = (\n    <div className={styles.overlay} style={overlayStyle} onClick={onClose}>\n      <div\n        className={`${styles.modal} ${className}`}\n        onClick={e => e.stopPropagation()}\n        {...props}\n      >\n        {title && (\n          <div className={styles.header}>\n            <h2>{title}</h2>\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              {headerButtons}\n              <button\n                className={styles.closeButton}\n                onClick={onClose}\n                aria-label=\"Close\"\n                type=\"button\"\n                data-gamepad-focusable=\"true\"\n              >\n                ×\n              </button>\n            </div>\n          </div>\n        )}\n        <div className={styles.content}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>\n  );\n\n  // Render modal using portal to document.body to avoid transform context issues\n  return createPortal(modalContent, document.body);\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport BaseModal from './common/BaseModal';\nimport { useVirtualKeyboardContext } from '../contexts/VirtualKeyboardContext';\nimport styles from './VirtualKeyboard.module.css';\n\nconst VirtualKeyboard = ({ \n  isVisible, \n  onClose, \n  onEnter,\n  inputType = 'text',\n  initialValue = ''\n}) => {\n  const { keyboardTitle } = useVirtualKeyboardContext();\n  const [currentLayout, setCurrentLayout] = useState('lowercase');\n  const [tempInput, setTempInput] = useState('');\n\n  // Initialize temp input with current value when keyboard opens\n  useEffect(() => {\n    if (isVisible) {\n      // For number inputs, don't use initial value if it's \"0\"\n      if (inputType === 'number') {\n        setTempInput(initialValue && initialValue !== '0' ? initialValue : '');\n      } else {\n        setTempInput(initialValue || '');\n      }\n    } else {\n      setTempInput('');\n    }\n  }, [isVisible, initialValue, inputType]);\n  \n  // Define keyboard layouts\n  const layouts = {\n    lowercase: [\n      ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],\n      ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],\n      ['shift', 'z', 'x', 'c', 'v', 'b', 'n', 'm', 'backspace'],\n      ['space', 'enter']\n    ],\n    uppercase: [\n      ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n      ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n      ['shift', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'backspace'],\n      ['space', 'enter']\n    ],\n    numbers: [\n      ['1', '2', '3'],\n      ['4', '5', '6'],\n      ['7', '8', '9'],\n      ['0', 'backspace'],\n      ['enter']\n    ]\n  };\n\n  // Use number layout for number inputs\n  const activeLayout = inputType === 'number' ? 'numbers' : currentLayout;\n  const keys = layouts[activeLayout];\n\n  const handleKeyPress = useCallback((key) => {\n    switch (key) {\n      case 'shift':\n        setCurrentLayout(prev => prev === 'lowercase' ? 'uppercase' : 'lowercase');\n        break;\n      case 'backspace':\n        setTempInput(prev => prev.slice(0, -1));\n        break;\n      case 'enter':\n        onEnter?.(tempInput);\n        break;\n      case 'space':\n        setTempInput(prev => prev + ' ');\n        break;\n      default:\n        setTempInput(prev => prev + key);\n        break;\n    }\n  }, [onEnter, tempInput]);\n\n  const getKeyDisplayText = (key) => {\n    switch (key) {\n      case 'shift':\n        return currentLayout === 'lowercase' ? '⇧' : '⇧';\n      case 'backspace':\n        return '⌫';\n      case 'space':\n        return 'Space';\n      case 'enter':\n        return '↵';\n      default:\n        return key;\n    }\n  };\n\n  const getKeyClass = (key) => {\n    let className = styles.key;\n    \n    if (['shift', 'backspace', 'space', 'enter'].includes(key)) {\n      className += ` ${styles.specialKey}`;\n    }\n    \n    if (key === 'space') {\n      className += ` ${styles.spaceKey}`;\n    }\n    \n    if (key === 'shift' && currentLayout === 'uppercase') {\n      className += ` ${styles.activeShift}`;\n    }\n    \n    return className;\n  };\n\n  // Handle ESC key to close keyboard (BaseModal handles body scroll)\n  useEffect(() => {\n    if (isVisible) {\n      const handleKeyDown = (e) => {\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          onClose?.();\n        }\n      };\n      \n      document.addEventListener('keydown', handleKeyDown);\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [isVisible, onClose]);\n\n  if (!isVisible) return null;\n\n  return (\n    <BaseModal\n      title={keyboardTitle || (inputType === 'number' ? 'Number Pad' : 'Virtual Keyboard')}\n      onClose={onClose}\n      className={styles.keyboardModal}\n      overlayStyle={{ zIndex: 1300 }}\n    >\n      <div className={styles.inputDisplay}>\n        <input\n          type={inputType === 'password' ? 'password' : 'text'}\n          value={tempInput}\n          className={styles.tempInput}\n          readOnly\n          placeholder=\"Type below...\"\n        />\n      </div>\n      <div className={styles.keyboardGrid}>\n        {keys.map((row, rowIndex) => (\n          <div key={rowIndex} className={styles.keyRow}>\n            {row.map((key, keyIndex) => (\n              <button\n                key={`${rowIndex}-${keyIndex}`}\n                className={getKeyClass(key)}\n                onClick={() => handleKeyPress(key)}\n                data-gamepad-focusable=\"true\"\n                aria-label={key === 'backspace' ? 'Backspace' : \n                           key === 'enter' ? 'Enter' : \n                           key === 'space' ? 'Space' : \n                           key === 'shift' ? 'Shift' : key}\n              >\n                {getKeyDisplayText(key)}\n              </button>\n            ))}\n          </div>\n        ))}\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default VirtualKeyboard;","import React, { createContext, useContext } from 'react';\nimport { useVirtualKeyboard } from '../hooks/useVirtualKeyboard';\nimport VirtualKeyboard from '../components/VirtualKeyboard';\n\nconst VirtualKeyboardContext = createContext();\n\nexport const useVirtualKeyboardContext = () => {\n  const context = useContext(VirtualKeyboardContext);\n  if (!context) {\n    throw new Error('useVirtualKeyboardContext must be used within a VirtualKeyboardProvider');\n  }\n  return context;\n};\n\nexport const VirtualKeyboardProvider = ({ children }) => {\n  const keyboardState = useVirtualKeyboard();\n  const { isVisible, inputType, hideKeyboard, handleEnter, getCurrentInputValue } = keyboardState;\n\n  return (\n    <VirtualKeyboardContext.Provider value={keyboardState}>\n      {children}\n      {isVisible && (\n        <VirtualKeyboard\n          isVisible={isVisible}\n          inputType={inputType}\n          initialValue={getCurrentInputValue()}\n          onClose={hideKeyboard}\n          onEnter={handleEnter}\n        />\n      )}\n    </VirtualKeyboardContext.Provider>\n  );\n};","import { useState, useCallback, useEffect } from 'react';\n\n/**\n * Hook to manage virtual keyboard state and integration with input elements\n * Automatically detects gamepad usage and shows virtual keyboard for controller users\n */\nexport const useVirtualKeyboard = () => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [currentInput, setCurrentInput] = useState(null);\n  const [inputType, setInputType] = useState('text');\n  const [keyboardTitle, setKeyboardTitle] = useState('');\n  const [isGamepadActive, setIsGamepadActive] = useState(false);\n\n  // Detect if gamepad navigation is active (integrate with existing system)\n  useEffect(() => {\n    const checkGamepadNavigation = () => {\n      const connected = document.body.classList.contains('gamepad-navigation-active');\n      setIsGamepadActive(connected);\n    };\n    \n    // Check initially\n    checkGamepadNavigation();\n    \n    // Create observer to watch for gamepad navigation class changes\n    const observer = new MutationObserver(checkGamepadNavigation);\n    observer.observe(document.body, {\n      attributes: true,\n      attributeFilter: ['class']\n    });\n    \n    return () => observer.disconnect();\n  }, []);\n\n  const showKeyboard = useCallback((inputElement, type = 'text', title = '') => {\n    if (!inputElement) return;\n    \n    setCurrentInput(inputElement);\n    setInputType(type);\n    setKeyboardTitle(title);\n    setIsVisible(true);\n    \n    // Blur the input to prevent mobile keyboard from appearing\n    inputElement.blur();\n  }, []);\n\n  const hideKeyboard = useCallback(() => {\n    setIsVisible(false);\n    setCurrentInput(null);\n    setInputType('text');\n    setKeyboardTitle('');\n  }, []);\n\n\n  const handleEnter = useCallback((finalValue) => {\n    if (!currentInput) return;\n    \n    // For React/MUI compatibility, we need to set the value and trigger events in a specific way\n    const nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(currentInput, finalValue || '');\n    \n    // Create and dispatch input event that React will recognize\n    const inputEvent = new Event('input', { bubbles: true });\n    currentInput.dispatchEvent(inputEvent);\n    \n    // Also dispatch change event\n    const changeEvent = new Event('change', { bubbles: true });\n    currentInput.dispatchEvent(changeEvent);\n    \n    // Just close the keyboard - don't submit forms or trigger enter behavior\n    hideKeyboard();\n  }, [currentInput, hideKeyboard]);\n\n  // Enhanced input wrapper that automatically shows keyboard for gamepad users\n  const enhanceInput = useCallback((inputElement, type = 'text', title = '') => {\n    if (!inputElement) return;\n    \n    // For Material-UI TextField, find the actual input element\n    let actualInput = inputElement;\n    if (inputElement.querySelector && inputElement.querySelector('input')) {\n      actualInput = inputElement.querySelector('input');\n    }\n    \n    const handleClick = (e) => {\n      // Show virtual keyboard on click if gamepad is connected\n      // AND if the gamepad navigation is currently active (showing focus indicators)\n      // This prevents autoFocus from opening the keyboard\n      if (isGamepadActive && document.body.classList.contains('gamepad-navigation-active')) {\n        e.preventDefault();\n        showKeyboard(actualInput, type, title);\n      }\n    };\n    \n    // Add event listeners to the actual input element\n    actualInput.addEventListener('click', handleClick);\n    \n    // Return cleanup function\n    return () => {\n      actualInput.removeEventListener('click', handleClick);\n    };\n  }, [isGamepadActive, showKeyboard]);\n\n  // Get current input value for initializing the virtual keyboard\n  const getCurrentInputValue = useCallback(() => {\n    return currentInput?.value || '';\n  }, [currentInput]);\n\n  return {\n    isVisible,\n    inputType,\n    keyboardTitle,\n    currentInput,\n    isGamepadActive,\n    showKeyboard,\n    hideKeyboard,\n    handleEnter,\n    enhanceInput,\n    getCurrentInputValue\n  };\n};","import React, { useEffect, useState } from 'react';\nimport styles from './styles/Toast.module.css';\n\nconst Toast = ({ \n  title, \n  message, \n  emoji = 'ℹ', \n  color = '#3498db', \n  duration = 4000, \n  onClose, \n  position \n}) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n        // Wait for fade animation to complete before removing\n        setTimeout(onClose, 300);\n      }, duration);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [duration, onClose]);\n\n  // Determine if this is an emoji reaction (no title and emoji is not default)\n  const isEmojiReaction = !title && emoji !== 'ℹ';\n\n  return (\n    <div \n      className={`${styles.toast} ${isEmojiReaction && isVisible ? styles.emojiReaction : ''} ${!isVisible ? styles.slideOut : ''}`}\n      style={{ \n        top: '20px', \n        zIndex: 10000 + position,\n        borderColor: color,\n        background: `linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)`\n      }}\n    >\n      <div \n        className={styles.iconWrapper}\n      >\n        <span \n          className={`${styles.icon} ${isEmojiReaction ? styles.emojiIcon : ''}`} \n          style={{ \n            color: color,\n            textShadow: isEmojiReaction \n              ? `0 0 20px ${color}, 0 0 40px ${color}60` \n              : `0 0 8px ${color}80`\n          }}\n        >\n          {emoji}\n        </span>\n      </div>\n      <div className={styles.content}>\n        {title && <div className={styles.title}>{title}</div>}\n        <div className={`${styles.message} ${isEmojiReaction ? styles.emojiMessage : ''}`}>\n          {isEmojiReaction ? (\n            <>\n              <span className={styles.playerName}>{message}</span>\n              <span className={styles.reactionText}>reacted!</span>\n            </>\n          ) : (\n            message\n          )}\n        </div>\n      </div>\n      <button \n        className={styles.closeButton} \n        onClick={onClose}\n        aria-label=\"Close notification\"\n      >\n        ×\n      </button>\n    </div>\n  );\n};\n\nexport default Toast;","import React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { useSocket } from './SocketContext';\nimport Toast from '../components/Toast';\n\nconst ToastContext = createContext();\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, setToasts] = useState([]);\n  const [toastQueue, setToastQueue] = useState([]);\n  const [lastToastTime, setLastToastTime] = useState(0);\n  const { socket } = useSocket();\n\n  const addToast = useCallback((title, message, emoji = 'ℹ', color = '#3498db', duration = 4000) => {\n    const id = Date.now() + Math.random();\n    const newToast = { id, title, message, emoji, color, duration };\n    \n    const now = Date.now();\n    const timeSinceLastToast = now - lastToastTime;\n    \n    if (timeSinceLastToast >= 600) {\n      // Show immediately if enough time has passed\n      setToasts(prev => [...prev, newToast]);\n      setLastToastTime(now);\n    } else {\n      // Queue the toast for later\n      setToastQueue(prev => [...prev, newToast]);\n    }\n    \n    return id;\n  }, [lastToastTime]);\n\n  const removeToast = useCallback((id) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n  }, []);\n\n  // Convenience methods for common notification patterns\n  const showSuccess = useCallback((title, message, duration) => {\n    return addToast(title, message, '✓', '#27ae60', duration);\n  }, [addToast]);\n\n  const showError = useCallback((title, message, duration) => {\n    return addToast(title, message, '✕', '#e74c3c', duration);\n  }, [addToast]);\n\n  const showWarning = useCallback((title, message, duration) => {\n    return addToast(title, message, '⚠', '#f39c12', duration);\n  }, [addToast]);\n\n  const showInfo = useCallback((title, message, duration) => {\n    return addToast(title, message, 'ℹ', '#3498db', duration);\n  }, [addToast]);\n\n  const showGameEvent = useCallback((title, message, duration) => {\n    return addToast(title, message, '🎮', '#9b59b6', duration);\n  }, [addToast]);\n\n  const showMoneyEvent = useCallback((title, message, duration) => {\n    return addToast(title, message, '💰', '#16a085', duration);\n  }, [addToast]);\n\n  // Process queued toasts with debouncing\n  useEffect(() => {\n    if (toastQueue.length === 0) return;\n\n    const timer = setTimeout(() => {\n      const nextToast = toastQueue[0];\n      setToastQueue(prev => prev.slice(1));\n      setToasts(prev => [...prev, nextToast]);\n      setLastToastTime(Date.now());\n    }, 600);\n\n    return () => clearTimeout(timer);\n  }, [toastQueue, toasts]); // Trigger when queue changes or when toasts change\n\n  // Socket event listeners for toast notifications\n  useEffect(() => {\n    if (!socket) return;\n\n    // Generic toast handler\n    const handleToast = (data) => {\n      addToast(data.title || '', data.message, data.emoji || 'ℹ', data.color || '#3498db', data.duration);\n    };\n\n    // Register socket event listener\n    socket.on('toast', handleToast);\n\n    // Cleanup\n    return () => {\n      socket.off('toast', handleToast);\n    };\n  }, [socket, addToast]);\n\n  const value = {\n    addToast,\n    removeToast,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo,\n    showGameEvent,\n    showMoneyEvent,\n    toasts\n  };\n\n  return (\n    <ToastContext.Provider value={value}>\n      {children}\n      <div className=\"toast-container\" style={{ position: 'fixed', top: 0, right: 0, zIndex: 10000 }}>\n        {toasts.map((toast, index) => (\n          <Toast\n            key={toast.id}\n            title={toast.title}\n            message={toast.message}\n            emoji={toast.emoji}\n            color={toast.color}\n            duration={toast.duration}\n            position={index}\n            onClose={() => removeToast(toast.id)}\n          />\n        ))}\n      </div>\n    </ToastContext.Provider>\n  );\n};","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport soundService from './services/SoundService';\nimport { router } from './router';\nimport { VirtualKeyboardProvider } from './contexts/VirtualKeyboardContext';\nimport { ToastProvider } from './contexts/ToastContext';\nimport './styles/global.css';\n\nfunction App() {\n  // Initialize Sound Service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n\n  return (\n    <ToastProvider>\n      <VirtualKeyboardProvider>\n        <RouterProvider router={router} />\n      </VirtualKeyboardProvider>\n    </ToastProvider>\n  );\n}\n\nexport default App;\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null,\n    selectedTitle: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Update selected title (expects title string, not ID)\n  const updateSelectedTitle = async (titleString) => {\n    return await updatePreference('selectedTitle', titleString);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        updateSelectedTitle,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import React, { createContext, useContext, useState, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext';\nimport { useAuth } from './AuthContext';\nimport { API_URL } from '../config';\n\nconst UserDataContext = createContext(null);\n\nexport const UserDataProvider = ({ children }) => {\n  const { socket } = useSocket();\n  const { token } = useAuth();\n  const [userCache, setUserCache] = useState(new Map());\n  const pendingFetches = useRef(new Set());\n  const fetchTimer = useRef(null);\n\n  // Subscribe to user data updates via socket\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleUserDataUpdate = ({ userId, data }) => {\n      console.log('[UserDataContext] Received user data update:', userId, data);\n      setUserCache(prev => {\n        const newCache = new Map(prev);\n        newCache.set(userId, data);\n        return newCache;\n      });\n    };\n\n    socket.on('userDataUpdated', handleUserDataUpdate);\n    return () => {\n      socket.off('userDataUpdated', handleUserDataUpdate);\n    };\n  }, [socket]);\n\n  // Clean up timer on unmount\n  useEffect(() => {\n    return () => {\n      if (fetchTimer.current) {\n        clearTimeout(fetchTimer.current);\n      }\n    };\n  }, []);\n\n  const fetchUsersData = useCallback(async (userIds) => {\n    if (!userIds || userIds.length === 0 || !token) return {};\n\n    try {\n      const response = await fetch(`${API_URL}/users`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ userIds })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch users data');\n      }\n      \n      const userData = await response.json();\n      \n      setUserCache(prev => {\n        const newCache = new Map(prev);\n        Object.entries(userData).forEach(([userId, data]) => {\n          newCache.set(userId, data);\n        });\n        return newCache;\n      });\n      \n      return userData;\n    } catch (error) {\n      return {};\n    }\n  }, [token]);\n\n  const executeBatchFetch = useCallback(() => {\n    if (pendingFetches.current.size === 0) return;\n    \n    const userIds = Array.from(pendingFetches.current);\n    pendingFetches.current.clear();\n    \n    fetchUsersData(userIds);\n  }, [fetchUsersData]);\n\n  const getUserData = useCallback((userId) => {\n    if (!userId) return null;\n    \n    const cached = userCache.get(userId);\n    if (cached) return cached;\n    \n    // Add to pending fetches and debounce\n    pendingFetches.current.add(userId);\n    \n    if (fetchTimer.current) {\n      clearTimeout(fetchTimer.current);\n    }\n    \n    fetchTimer.current = setTimeout(() => {\n      executeBatchFetch();\n    }, 10);\n    \n    return null;\n  }, [userCache, executeBatchFetch]);\n\n  const prefetchUsers = useCallback((userIds) => {\n    const uncachedIds = userIds.filter(id => !userCache.has(id));\n    if (uncachedIds.length > 0) {\n      fetchUsersData(uncachedIds);\n    }\n  }, [userCache, fetchUsersData]);\n\n  const value = {\n    getUserData,\n    prefetchUsers\n  };\n\n  return (\n    <UserDataContext.Provider value={value}>\n      {children}\n    </UserDataContext.Provider>\n  );\n};\n\nexport const useUserData = (userId) => {\n  const context = useContext(UserDataContext);\n  \n  if (!context) {\n    throw new Error('useUserData must be used within UserDataProvider');\n  }\n  \n  return context.getUserData(userId);\n};\n\nexport default UserDataContext;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\nimport './styles/global.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\nimport { UserDataProvider } from './contexts/UserDataContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <AuthProvider>\n      <SocketProvider>\n        <UserDataProvider>\n          <PreferencesProvider>\n            <App />\n          </PreferencesProvider>\n        </UserDataProvider>\n      </SocketProvider>\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"file":"assets/index-Crscu569.js"}