{"version":3,"file":"index-CmxDYRx_.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/components/auth/AuthForm.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/constants/UIConstants.js","../../src/components/common/WelcomePopup.jsx","../../src/contexts/AuthContext.jsx","../../src/components/common/AppHeader.jsx","../../src/components/auth/AuthPage.jsx","../../src/contexts/LobbyContext.jsx","../../src/contexts/PreferencesContext.jsx","../../src/hooks/useGamepadNavigation.js","../../src/components/common/OnlinePlayerCount.jsx","../../src/components/common/CoinIcon.jsx","../../src/components/common/CurrencyAmount.jsx","../../src/components/icons/GearIcon.jsx","../../src/components/common/BaseModal.jsx","../../src/components/ToggleSwitch.jsx","../../src/components/FileUpload.jsx","../../src/components/PreferencesModal.jsx","../../src/components/common/IconButton.jsx","../../src/components/common/PreferencesButton.jsx","../../src/components/icons/BarChartIcon.jsx","../../src/components/icons/DownloadIcon.jsx","../../src/components/common/TransactionDownloadButton.jsx","../../src/components/GameStats.jsx","../../src/components/GameSummaryModal.jsx","../../src/components/PlayerStatsModal.jsx","../../src/components/common/PlayerStatsButton.jsx","../../src/components/icons/StoreIcon.jsx","../../src/components/StoreButton.jsx","../../src/components/UserAvatar.jsx","../../src/components/GameSettingsModal.jsx","../../src/services/StoreService.js","../../src/components/StoreModal.jsx","../../src/components/icons/LockIcon.jsx","../../src/components/GameCard.jsx","../../src/components/icons/QuestionIcon.jsx","../../src/components/GameRulesModal.jsx","../../src/components/common/RulesButton.jsx","../../src/components/Lobby.jsx","../../src/contexts/GameContext.jsx","../../../shared/constants/GameConstants.js","../../src/components/icons/ExitIcon.jsx","../../src/components/common/LeaveButton.jsx","../../src/components/GameHeader.jsx","../../src/components/icons/ArrowIcon.jsx","../../src/components/CardDisplay.jsx","../../src/components/PotButton.jsx","../../src/components/BettingPanel.jsx","../../src/components/PlayerList.jsx","../../src/components/PotDisplay.jsx","../../src/components/DeckDisplay.jsx","../../src/components/AutoAnteToggle.jsx","../../src/components/AnteControls.jsx","../../src/components/ResultsPanel.jsx","../../src/components/AceChoicePanel.jsx","../../src/components/SecondChancePanel.jsx","../../src/components/GameLog.jsx","../../src/components/GameScreen.jsx","../../src/components/common/LoadingScreen.jsx","../../src/components/common/PasswordPromptModal.jsx","../../src/components/GameRoom.jsx","../../src/router.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 500]; \n      sprites.leave = [500, 1000];\n      sprites.alert = [1500, 1500]; \n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React, { useState } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Alert,\n  useMediaQuery,\n} from '@mui/material';\nimport styles from './AuthForm.module.css';\n\nconst AuthForm = ({ onSubmit, mode }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      await onSubmit(username, password);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <Paper className={styles.authForm} elevation={0}>\n      <Typography variant=\"h5\" component=\"h2\" gutterBottom sx={{ color: 'var(--info)', fontWeight: 600 }}>\n        {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2, backgroundColor: 'rgba(231, 76, 60, 0.2)', color: 'var(--text-primary)' }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Username\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 3 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n        \n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 6 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          size=\"large\"\n          className={styles.submitButton}\n          sx={{\n            mt: isSmallMobile ? 2 : 3,\n            background: 'linear-gradient(to right, var(--info), var(--success))',\n            textTransform: 'none',\n            fontWeight: 'bold',\n            letterSpacing: '0.5px',\n            padding: isSmallMobile ? '10px' : '12px',\n            fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            '&:hover': {\n              background: 'linear-gradient(to right, var(--info-dark), var(--success-dark))',\n              boxShadow: 'var(--shadow-lg)',\n              transform: 'translateY(-2px)'\n            }\n          }}\n        >\n          {mode === 'login' ? 'Sign In' : 'Create Account'}\n        </Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default AuthForm;\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\nimport { useAuth } from './AuthContext';\n\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\nexport const SocketProvider = ({ children }) => {\n  const { token } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (!token) {\n      if (socket) {\n        socket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n      return;\n    }\n\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      setError(null);\n    });\n    \n    newSocket.on('authenticated', (userData) => {\n      newSocket.auth = {\n        userId: userData.userId,\n        username: userData.username\n      };\n      \n      setIsConnected(true);\n      \n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      setError(err.message || 'Unknown socket error');\n    });\n\n    const socketEvents = [\n      'connect',\n      'authenticated',\n      'disconnect',\n      'connect_error',\n      'error',\n      'transport'\n    ];\n\n    return () => {\n      if (newSocket) {\n        socketEvents.forEach(event => newSocket.off(event));\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n\n  }, [token]);\n\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","/**\n * UI Constants for the In-Between game\n * Centralizing UI elements like icons makes them easier to update across the application\n */\n\n// Game Icons\nexport const ICONS = {\n  COIN: '🔶', // Yellow/gold diamond icon for currency\n  POT: '🍯',\n  DEALER: '🃏',\n  CHECK: '✓',\n  DECK: '🃏' // Card deck icon\n};\n","import React from 'react';\nimport styles from './WelcomePopup.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A popup component that displays a welcome message and balance reset notification\n * @param {Object} props - Component props\n * @param {string} props.username - The username to display in the welcome message\n * @param {number} props.balance - The user's reset balance\n * @param {function} props.onClose - Function to call when the popup is closed\n */\nconst WelcomePopup = ({ username, balance, onClose }) => {\n  return (\n    <div className={styles.overlay}>\n      <div className={styles.popup}>\n        <div className={styles.header}>\n          <h2>Welcome, {username}!</h2>\n          <button className={styles.closeButton} onClick={onClose}>×</button>\n        </div>\n        <div className={styles.content}>\n          <p className={styles.message}>\n            Your balance has been reset to:\n          </p>\n          <p className={styles.balance}>\n            <span className={styles.coinIcon}>{ICONS.COIN}</span>\n            <span className={styles.balanceAmount}>{balance}</span>\n          </p>\n          <p className={styles.subtext}>\n            Thank you for participating in the <span className={styles.inlineGameName}>In Between <span className={styles.inlineLiveTag}>LIVE</span></span> beta program. Your feedback is valuable as we continue to enhance the gaming experience.\n          </p>\n        </div>\n        <div className={styles.footer}>\n          <button className={styles.actionButton} onClick={onClose}>\n            Let's Play!\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomePopup;\n","import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdated', (data) => { \n        console.log('[AuthContext] Received balanceUpdated event:', data); \n        if (data && typeof data.balance === 'number') {\n          console.log(`[AuthContext] Updating user balance from ${user?.balance} to ${data.balance}`); \n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state\n          setUser(updatedUser);\n        } else {\n          console.warn('[AuthContext] Received invalid balance data:', data);\n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdated');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async (authToken) => {\n    try {\n      // Use the passed token directly\n      if (!authToken) {\n        return null;\n      }\n\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${authToken}`, // Use authToken\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Single Effect for Initial Authentication Check\n  useEffect(() => {\n    const initializeAuth = async () => {\n      let currentToken = null;\n      try {\n        currentToken = localStorage.getItem('token');\n        \n        if (currentToken) {\n          setToken(currentToken); \n        }\n      } catch (error) {\n        console.error('[Auth] Error reading token from localStorage:', error);\n        localStorage.removeItem('token'); // Clear potentially corrupted token\n      }\n\n      // Now, decide whether to fetch user data based on the token found\n      if (currentToken) {\n        try {\n          const userData = await fetchUserData(currentToken); \n          if (userData) {\n            setUser(userData); \n          } else {\n            // Fetch failed or returned no data for a valid token\n            console.error('[Auth] Token valid but failed to fetch user data. Logging out.');\n            setUser(null);\n            setToken(null);\n            localStorage.removeItem('token');\n          }\n        } catch (error) {\n          console.error('[Auth] Error during user data fetch. Logging out.', error);\n          setUser(null);\n          setToken(null);\n          localStorage.removeItem('token');\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        setUser(null);\n        setToken(null);\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []); // Empty dependency array ensures it runs only once on mount\n\n  const login = async (userData, newToken) => {\n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      const completeUserData = await fetchUserData(newToken);\n      if (completeUserData) {\n        setUser(completeUserData);\n      }\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = useCallback(() => {\n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage\n    localStorage.removeItem('token');\n  }, []); // Empty dependency array means this function never changes\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = useCallback(async () => {\n    try {\n      // fetchUserData depends on the 'token' state variable\n      const userData = await fetchUserData(token);\n      if (userData) {\n        setUser(userData);\n      } else {\n        console.error('[Auth] Failed to refresh user data. Logging out.');\n        // logout is now stable thanks to useCallback above\n        logout();\n      }\n    } catch (error) { \n      console.error('[Auth] Error during manual refresh. Logging out.', error);\n      logout();\n    }\n  // Add dependencies: token and logout\n  }, [token, logout]);\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","import React from 'react';\nimport styles from './AppHeader.module.css';\n\n/**\n * A shared header component for the In-Between game\n * Used across auth and lobby screens for consistent branding\n */\nconst AppHeader = () => {\n  return (\n    <div className={styles.headerContainer}>\n      <h1 className={styles.gameTitle}>\n        In Between <span className={styles.liveTag}>LIVE</span>\n      </h1>\n    </div>\n  );\n};\n\nexport default AppHeader;\n","import React, { useState } from 'react';\nimport { Box, Button, Typography } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport AuthForm from './AuthForm.jsx';\nimport { useAuth } from '../../contexts/AuthContext';\nimport styles from './AuthPage.module.css';\nimport AppHeader from '../common/AppHeader';\n\nconst AuthPage = () => {\n  const [mode, setMode] = useState('login');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const [error, setError] = useState(null);\n\n  const handleAuth = async (username, password) => {\n    if (!username || !password) {\n      setError('Username and password are required');\n      return;\n    }\n\n    setError(null);\n    // Get API URL from environment or use localhost as fallback\n    const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    const endpoint = `${API_URL}/auth/${mode}`;\n    \n    console.log(`[Auth] ${mode.toUpperCase()} attempt: ${username}`);\n\n    try {\n      const requestBody = { username, password };\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(requestBody),\n      });\n\n      let data;\n      try {\n        data = await response.json();\n      } catch (error) {\n        console.error('[Client] Error parsing response:', error);\n        throw new Error('Invalid response from server');\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Authentication failed');\n      }\n\n      if (!data.user?.username || !data.user?.id || !data.token) {\n        console.error('[Client] Invalid response format:', {\n          hasUser: !!data.user,\n          hasUsername: !!data.user?.username,\n          hasId: !!data.user?.id,\n          hasToken: !!data.token\n        });\n        throw new Error('Invalid server response format');\n      }\n\n      console.log(`[Auth] ${mode.toUpperCase()} successful: ${data.user.username}`);\n      try {\n        login(data.user, data.token);\n        // Navigate to the lobby after successful login\n        navigate('/');\n      } catch (error) {\n        console.error('[Client] Error in login callback:', error);\n        throw new Error('Failed to initialize user session');\n      }\n    } catch (error) {\n      console.error('[Client] Auth error:', {\n        message: error.message,\n        endpoint,\n        mode\n      });\n      setError(error.message || 'Failed to connect to server');\n    }\n\n\n  };\n\n  return (\n    <Box className={styles.authPage}>\n      <AppHeader />\n      \n      <Box className={styles.formContainer}>\n        {error && (\n          <Typography className={styles.error}>\n            {error}\n          </Typography>\n        )}\n        \n        <AuthForm mode={mode} onSubmit={handleAuth} />\n        \n        <Box textAlign=\"center\" mt={3}>\n          <Button\n            color=\"primary\"\n            onClick={() => setMode(mode === 'login' ? 'register' : 'login')}\n            sx={{\n              color: '#ecf0f1',\n              textTransform: 'none',\n              fontSize: '1rem',\n              '&:hover': {\n                backgroundColor: 'rgba(255, 255, 255, 0.1)'\n              }\n            }}\n          >\n            {mode === 'login' \n              ? \"Don't have an account? Register\" \n              : \"Already have an account? Login\"}\n          </Button>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AuthPage;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\n\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\nexport const LobbyProvider = ({ children }) => {\n  const { socket, isConnected } = useSocket();\n  \n  const [gameList, setGameList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    \n    const handleGameList = (games) => {\n      setGameList(games);\n      setLoading(false);\n    };\n    \n    const handleError = (err) => {\n      console.error('[LobbyContext] Socket error:', err.message || err);\n      setError(err.message || 'An error occurred');\n      setLoading(false);\n    };\n    \n    socket.on('gameList', handleGameList);\n    socket.on('error', handleError);\n    \n    socket.emit('getGameList');\n    \n    return () => {\n      socket.off('gameList', handleGameList);\n      socket.off('error', handleError);\n    };\n  }, [socket, isConnected]);\n  \n  const contextValue = {\n    gameList,\n    loading,\n    error,\n  };\n  \n  return (\n    <LobbyContext.Provider value={contextValue}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n    console.log('[Preferences] Loading preferences for user:', user.username);\n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        console.log(`[Preferences] Updating sound muted state to: ${value}`);\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      console.log(`[Preferences] Updated ${key}:`, data);\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      console.log(`[Preferences] Formatted ${key} response:`, formattedData);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting GIF upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending GIF upload request to: ${API_URL}/preferences/twoSecondPotGif`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] GIF upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded GIF:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted GIF URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting MP3 upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending MP3 upload request to: ${API_URL}/preferences/twoSecondPotMp3`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] MP3 upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded MP3:', data);\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting profile image upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending profile image upload request to: ${API_URL}/preferences/profileImg`);\n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] Profile image upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded profile image:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted profile image URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import { useEffect, useState, useCallback, useRef } from 'react';\n\n/**\n * Custom hook for comprehensive gamepad navigation support\n * Provides 2D spatial navigation, scrollable content support, and modal awareness\n * \n * @param {boolean} isEnabled - Whether gamepad navigation is active\n * @returns {Object} Navigation state and utilities\n */\nexport const useGamepadNavigation = (isEnabled = true) => {\n  const [focusedElement, setFocusedElement] = useState(null);\n  const [navigableElements, setNavigableElements] = useState([]);\n  const [isGamepadConnected, setIsGamepadConnected] = useState(false);\n  const [showFocusIndicator, setShowFocusIndicator] = useState(false);\n  const lastNavigationTime = useRef(0);\n  const buttonStates = useRef({});\n  \n  const registerNavigableElements = useCallback(() => {\n    if (!isEnabled) return;\n    \n    // Find all focusable elements with data-gamepad-focusable attribute AND scrollable containers\n    const allElements = Array.from(\n      document.querySelectorAll('[data-gamepad-focusable=\"true\"]:not([disabled]), [data-gamepad-scrollable=\"true\"]')\n    );\n    \n    // Filter out elements that are hidden or behind modals\n    const visibleElements = allElements.filter(element => {\n      // Check if element is visible\n      const rect = element.getBoundingClientRect();\n      if (rect.width === 0 && rect.height === 0) {\n        // For hidden inputs (like auto-ante toggle), check the parent\n        const parent = element.closest('label') || element.closest('[class*=\"toggle\"]') || element.parentElement;\n        if (parent) {\n          const parentRect = parent.getBoundingClientRect();\n          if (parentRect.width === 0 || parentRect.height === 0) return false;\n        } else {\n          return false;\n        }\n      }\n      \n      // Check if element is behind a modal\n      const modals = document.querySelectorAll('[class*=\"modal\"], [class*=\"Modal\"], [role=\"dialog\"]');\n      if (modals.length > 0) {\n        // Sort modals by z-index to find the topmost one\n        const sortedModals = Array.from(modals).sort((a, b) => {\n          const aZIndex = parseInt(window.getComputedStyle(a).zIndex) || 0;\n          const bZIndex = parseInt(window.getComputedStyle(b).zIndex) || 0;\n          return bZIndex - aZIndex; // Highest z-index first\n        });\n        \n        // Only include elements that are inside the topmost modal\n        const topmostModal = sortedModals[0];\n        return topmostModal && topmostModal.contains(element);\n      }\n      \n      return true;\n    });\n    \n    setNavigableElements(prevElements => {\n      // Only update if the elements actually changed\n      if (prevElements.length !== visibleElements.length || \n          !prevElements.every((el, i) => el === visibleElements[i])) {\n        return visibleElements;\n      }\n      return prevElements;\n    });\n  }, [isEnabled]);\n\n  const navigateDirection = useCallback((direction) => {\n    const now = Date.now();\n    if (now - lastNavigationTime.current < 150) {\n      return; // Debounce navigation calls\n    }\n    lastNavigationTime.current = now;\n    \n    if (!navigableElements.length) return;\n    \n    // Show focus indicator when navigating\n    setShowFocusIndicator(true);\n    \n    const currentIndex = navigableElements.findIndex(el => el === focusedElement);\n    \n    // If no element is currently focused or element not found, start with first element\n    if (currentIndex === -1 || !focusedElement) {\n      const firstElement = navigableElements[0];\n      setFocusedElement(firstElement);\n      firstElement.focus();\n      return;\n    }\n    \n    // Handle scrollable content before spatial navigation\n    const currentElement = navigableElements[currentIndex];\n    const isScrollable = currentElement?.getAttribute('data-gamepad-scrollable') === 'true';\n    \n    if (isScrollable && (direction === 'up' || direction === 'down')) {\n      const scrollAmount = 50;\n      const isAtTop = currentElement.scrollTop <= 0;\n      const isAtBottom = currentElement.scrollTop >= currentElement.scrollHeight - currentElement.clientHeight;\n      \n      if (direction === 'up' && !isAtTop) {\n        currentElement.scrollTop = Math.max(0, currentElement.scrollTop - scrollAmount);\n        return;\n      }\n      \n      if (direction === 'down' && !isAtBottom) {\n        currentElement.scrollTop = Math.min(\n          currentElement.scrollHeight - currentElement.clientHeight,\n          currentElement.scrollTop + scrollAmount\n        );\n        return;\n      }\n    }\n    \n    let nextElement = null;\n    \n    if (direction === 'up' || direction === 'down') {\n      // Vertical navigation with intelligent spatial detection\n      let currentRect = currentElement?.getBoundingClientRect();\n      if (!currentRect) return;\n      \n      // Handle zero-dimension elements (hidden inputs, toggles)\n      if (currentRect.width === 0 && currentRect.height === 0) {\n        const label = currentElement.closest('label');\n        const container = currentElement.closest('[class*=\"toggle\"]') || currentElement.closest('[class*=\"Toggle\"]');\n        const parent = label || container || currentElement.parentElement;\n        if (parent) {\n          currentRect = parent.getBoundingClientRect();\n        }\n      }\n      \n      const currentCenterX = currentRect.left + currentRect.width / 2;\n      \n      // Get all candidates in the target direction\n      const candidates = navigableElements\n        .map((el, index) => ({ el, index, rect: el.getBoundingClientRect() }))\n        .filter(({ el, rect, index }) => {\n          // Exclude the current element\n          if (index === currentIndex) return false;\n          \n          if (direction === 'up') {\n            return rect.bottom <= currentRect.top + 20; // More generous tolerance for upward navigation\n          } else {\n            return rect.top >= currentRect.bottom - 20; // More generous tolerance for downward navigation\n          }\n        });\n      \n      \n      if (candidates.length > 0) {\n        // Sort candidates by horizontal distance from current element\n        const sortedCandidates = candidates\n          .map(candidate => ({\n            ...candidate,\n            horizontalDistance: Math.abs(candidate.rect.left + candidate.rect.width / 2 - currentCenterX),\n            verticalDistance: direction === 'up' \n              ? currentRect.top - candidate.rect.bottom \n              : candidate.rect.top - currentRect.bottom\n          }))\n          .sort((a, b) => {\n            const horizontalDiff = a.horizontalDistance - b.horizontalDistance;\n            if (Math.abs(horizontalDiff) > 100) {\n              return horizontalDiff;\n            }\n            const verticalDiff = a.verticalDistance - b.verticalDistance;\n            if (Math.abs(verticalDiff) > 10) {\n              return verticalDiff;\n            }\n            return horizontalDiff;\n          });\n        \n        nextElement = sortedCandidates[0].el;\n      } else {\n        // No elements in target direction - find closest element in ANY direction\n        const allOtherElements = navigableElements\n          .filter((el, index) => index !== currentIndex)\n          .map((el, index) => ({ el, rect: el.getBoundingClientRect() }));\n        \n        if (allOtherElements.length > 0) {\n          // Find the element closest to where we want to go\n          const targetY = direction === 'up' ? 0 : window.innerHeight;\n          const closest = allOtherElements.reduce((best, candidate) => {\n            const candidateDistance = Math.abs(candidate.rect.top - targetY);\n            const bestDistance = Math.abs(best.rect.top - targetY);\n            return candidateDistance < bestDistance ? candidate : best;\n          });\n          nextElement = closest.el;\n        } else {\n          // Ultimate fallback - wrap around\n          if (direction === 'up') {\n            nextElement = navigableElements[navigableElements.length - 1];\n          } else {\n            nextElement = navigableElements[0];\n          }\n        }\n      }\n    } else {\n      // Horizontal navigation within rows\n      const currentRect = currentElement?.getBoundingClientRect();\n      if (!currentRect) {\n        if (direction === 'left') {\n          nextElement = currentIndex > 0 ? navigableElements[currentIndex - 1] : navigableElements[navigableElements.length - 1];\n        } else {\n          nextElement = currentIndex < navigableElements.length - 1 ? navigableElements[currentIndex + 1] : navigableElements[0];\n        }\n      } else {\n        const currentCenterY = currentRect.top + currentRect.height / 2;\n        const rowTolerance = Math.max(currentRect.height / 2, 20);\n        \n        const sameRowElements = navigableElements\n          .map((el, index) => ({ el, index, rect: el.getBoundingClientRect() }))\n          .filter(({ rect, index }) => {\n            const candidateCenterY = rect.top + rect.height / 2;\n            return Math.abs(candidateCenterY - currentCenterY) <= rowTolerance;\n          })\n          .sort((a, b) => a.rect.left - b.rect.left);\n        \n        const currentRowIndex = sameRowElements.findIndex(({ el }) => el === currentElement);\n        \n        if (currentRowIndex !== -1 && sameRowElements.length > 1) {\n          if (direction === 'left') {\n            nextElement = currentRowIndex > 0 ? sameRowElements[currentRowIndex - 1].el : null;\n          } else {\n            nextElement = currentRowIndex < sameRowElements.length - 1 ? sameRowElements[currentRowIndex + 1].el : null;\n          }\n        } else {\n          nextElement = null;\n        }\n      }\n    }\n    \n    if (nextElement) {\n      setFocusedElement(nextElement);\n      nextElement.focus();\n    }\n  }, [navigableElements, focusedElement]);\n\n  const activateElement = useCallback(() => {\n    if (focusedElement) {\n      // Show focus indicator when activating\n      setShowFocusIndicator(true);\n      // Simulate click on the focused element\n      focusedElement.click();\n    }\n  }, [focusedElement]);\n\n  // Handle keyboard input for testing\n  useEffect(() => {\n    if (!isEnabled) return;\n\n    const handleKeyDown = (e) => {\n      // Prevent default behavior for navigation keys\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', ' '].includes(e.key)) {\n        e.preventDefault();\n      }\n\n      switch (e.key) {\n        case 'ArrowUp':\n          navigateDirection('up');\n          break;\n        case 'ArrowDown':\n          navigateDirection('down');\n          break;\n        case 'ArrowLeft':\n          navigateDirection('left');\n          break;\n        case 'ArrowRight':\n          navigateDirection('right');\n          break;\n        case 'Enter':\n        case ' ': // Space bar\n          activateElement();\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [navigateDirection, activateElement, isEnabled]);\n\n  // Handle gamepad detection and input with native Gamepad API\n  useEffect(() => {\n    if (!isEnabled) return;\n\n    let animationFrame;\n\n    const checkGamepads = () => {\n      const gamepads = navigator.getGamepads();\n      let connected = false;\n\n      for (let i = 0; i < gamepads.length; i++) {\n        const gamepad = gamepads[i];\n        if (gamepad && gamepad.connected) {\n          connected = true;\n          \n          // Track button press states to avoid spamming\n          if (!buttonStates.current[i]) {\n            buttonStates.current[i] = {};\n          }\n          \n          const prevStates = buttonStates.current[i];\n          \n          // D-pad buttons (standard mapping: 12=up, 13=down, 14=left, 15=right)\n          const upPressed = gamepad.buttons[12]?.pressed;\n          const downPressed = gamepad.buttons[13]?.pressed;\n          const leftPressed = gamepad.buttons[14]?.pressed;\n          const rightPressed = gamepad.buttons[15]?.pressed;\n          const aPressed = gamepad.buttons[0]?.pressed; // A button\n\n          // Only trigger on button press (not hold)\n          if (upPressed && !prevStates.up) {\n            navigateDirection('up');\n          }\n          if (downPressed && !prevStates.down) {\n            navigateDirection('down');\n          }\n          if (leftPressed && !prevStates.left) {\n            navigateDirection('left');\n          }\n          if (rightPressed && !prevStates.right) {\n            navigateDirection('right');\n          }\n          if (aPressed && !prevStates.a) {\n            activateElement();\n          }\n\n          // Update previous states\n          prevStates.up = upPressed;\n          prevStates.down = downPressed;\n          prevStates.left = leftPressed;\n          prevStates.right = rightPressed;\n          prevStates.a = aPressed;\n\n          // Left analog stick navigation\n          const leftStickX = gamepad.axes[0] || 0;\n          const leftStickY = gamepad.axes[1] || 0;\n          const deadzone = 0.3;\n\n          if (!prevStates.stickMoved && (Math.abs(leftStickX) > deadzone || Math.abs(leftStickY) > deadzone)) {\n            if (Math.abs(leftStickX) > Math.abs(leftStickY)) {\n              if (leftStickX > deadzone) {\n                navigateDirection('right');\n              } else if (leftStickX < -deadzone) {\n                navigateDirection('left');\n              }\n            } else {\n              if (leftStickY > deadzone) {\n                navigateDirection('down');\n              } else if (leftStickY < -deadzone) {\n                navigateDirection('up');\n              }\n            }\n            prevStates.stickMoved = true;\n          } else if (Math.abs(leftStickX) <= deadzone && Math.abs(leftStickY) <= deadzone) {\n            prevStates.stickMoved = false;\n          }\n        }\n      }\n\n      setIsGamepadConnected(connected);\n      animationFrame = requestAnimationFrame(checkGamepads);\n    };\n\n    checkGamepads();\n\n    return () => {\n      if (animationFrame) {\n        cancelAnimationFrame(animationFrame);\n      }\n    };\n  }, [navigateDirection, activateElement, isEnabled]);\n\n  // Hide focus indicator on mouse movement\n  useEffect(() => {\n    if (!isEnabled) return;\n\n    const handleMouseMove = () => {\n      setShowFocusIndicator(false);\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    return () => document.removeEventListener('mousemove', handleMouseMove);\n  }, [isEnabled]);\n\n  // Add/remove CSS class to body to control focus indicator visibility\n  useEffect(() => {\n    if (showFocusIndicator) {\n      document.body.classList.add('gamepad-navigation-active');\n    } else {\n      document.body.classList.remove('gamepad-navigation-active');\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('gamepad-navigation-active');\n    };\n  }, [showFocusIndicator]);\n\n  // Handle initial focus when elements are available  \n  useEffect(() => {\n    if (navigableElements.length > 0 && !focusedElement) {\n      const firstElement = navigableElements[0];\n      setFocusedElement(firstElement);\n      firstElement.focus();\n    }\n  }, [navigableElements.length]); // Only depend on length, not the array itself\n\n  // Re-register elements when DOM changes\n  useEffect(() => {\n    if (!isEnabled) return;\n    \n    const observer = new MutationObserver(registerNavigableElements);\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['data-gamepad-focusable', 'disabled']\n    });\n    \n    // Initial registration\n    registerNavigableElements();\n    \n    return () => observer.disconnect();\n  }, [registerNavigableElements, isEnabled]);\n\n  return {\n    focusedElement,\n    isGamepadConnected,\n    showFocusIndicator,\n    registerNavigableElements\n  };\n};","import React, { useEffect, useState } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\nimport styles from './OnlinePlayerCount.module.css';\n\nconst OnlinePlayerCount = () => {\n  const { socket, isConnected } = useSocket();\n  const [count, setCount] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    // Request the current online player count\n    socket.emit('getOnlinePlayerCount', (n) => {\n      setCount(n);\n    });\n    // Listen for real-time updates\n    const handler = (n) => setCount(n);\n    socket.on('onlinePlayerCountUpdate', handler);\n    return () => {\n      socket.off('onlinePlayerCountUpdate', handler);\n    };\n  }, [socket, isConnected]);\n\n  if (count === null) return null;\n  return (\n    <div className={styles.pill}>\n      <span className={styles.pulse} />\n      <span className={styles.text}>{count} online</span>\n    </div>\n  );\n};\n\nexport default OnlinePlayerCount;\n","import React from 'react';\nimport styles from './CoinIcon.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A reusable coin icon component to replace dollar signs\n * @param {Object} props - Component props\n * @param {string} [props.size='small'] - Size of the coin icon ('small', 'medium', 'large')\n * @param {string} [props.className] - Additional CSS class to apply\n */\nconst CoinIcon = ({ size = 'small', className = '' }) => {\n  return (\n    <span className={`${styles.coinIcon} ${styles[size]} ${className}`}>\n      {ICONS.COIN}\n    </span>\n  );\n};\n\nexport default CoinIcon;\n","import React from 'react';\nimport styles from './CurrencyAmount.module.css';\nimport CoinIcon from './CoinIcon.jsx';\n\n/**\n * A reusable component that displays currency amounts with consistent styling\n * @param {Object} props - Component props\n * @param {number} props.amount - The amount to display\n * @param {string} props.size - The size of the coin icon (small, medium, large)\n * @param {string} props.background - Optional custom background style (e.g. 'dark', 'pill')\n * @param {string} props.customClass - Optional custom CSS class to apply\n */\nconst CurrencyAmount = ({ amount, size, background, customClass }) => {\n  // Determine which CSS classes to apply\n  const containerClasses = [\n    styles.currencyAmount,\n    background === 'dark' ? styles.darkBackground : '',\n    background === 'pill' ? styles.pillBackground : '',\n    customClass || ''\n  ].filter(Boolean).join(' ');\n  \n  return (\n    <span className={containerClasses}>\n      <CoinIcon size={size} />\n      <span>{amount}</span>\n    </span>\n  );\n};\n\nexport default CurrencyAmount;\n","import React from 'react';\n\nconst GearIcon = ({ className = 'h-6 w-6', ...props }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      strokeWidth={1.5}\n      stroke=\"currentColor\"\n      className={className}\n      {...props}\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n      />\n    </svg>\n  );\n};\n\nexport default GearIcon;\n","import React from 'react';\nimport styles from './BaseModal.module.css';\n\n// BaseModal: Shared modal structure for all app modals\nexport default function BaseModal({ title, onClose, children, footer, className = '', ...props }) {\n  return (\n    <div className={styles.overlay} onClick={onClose}>\n      <div\n        className={`${styles.modal} ${className}`}\n        onClick={e => e.stopPropagation()}\n        {...props}\n      >\n        {title && (\n          <div className={styles.header}>\n            <h2>{title}</h2>\n            <button\n              className={styles.closeButton}\n              onClick={onClose}\n              aria-label=\"Close\"\n              type=\"button\"\n              data-gamepad-focusable=\"true\"\n            >\n              ×\n            </button>\n          </div>\n        )}\n        <div className={styles.content}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport styles from './styles/ToggleSwitch.module.css';\n\nconst ToggleSwitch = ({ isChecked, onChange, label }) => {\n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={isChecked}\n          onChange={onChange}\n          className={styles.toggleInput}\n          data-gamepad-focusable=\"true\"\n        />\n        <span className={styles.toggleSlider}></span>\n        {label && <span className={styles.toggleText}>{label}</span>}\n      </label>\n    </div>\n  );\n};\n\nexport default ToggleSwitch;\n","import React, { useState, useRef } from 'react';\nimport styles from './styles/FileUpload.module.css';\n\nconst FileUpload = ({ \n  onUpload, \n  currentFileUrl, \n  acceptedFileTypes, \n  label,\n  previewType = 'image' // 'image', 'audio', or 'none'\n}) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null);\n  \n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.error('[FileUpload] No file selected');\n      return;\n    }\n    \n    console.log('[FileUpload] File selected:', {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n    \n    setError(null);\n    setIsUploading(true);\n    \n    try {\n      console.log('[FileUpload] Calling onUpload function');\n      const success = await onUpload(file);\n      console.log('[FileUpload] Upload result:', success);\n      \n      if (!success) {\n        console.error('[FileUpload] Upload failed');\n        setError('Failed to upload file. Please try again.');\n      } else {\n        console.log('[FileUpload] Upload successful');\n      }\n    } catch (err) {\n      console.error('[FileUpload] Error uploading file:', err);\n      setError('An error occurred during upload.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  const handleButtonClick = () => {\n    fileInputRef.current.click();\n  };\n  \n  const renderPreview = () => {\n    if (!currentFileUrl) return null;\n    \n    if (previewType === 'image') {\n      return (\n        <div className={styles.previewContainer}>\n          <img \n            src={currentFileUrl} \n            alt=\"Preview\" \n            className={styles.imagePreview} \n          />\n        </div>\n      );\n    } else if (previewType === 'audio') {\n      return (\n        <div className={styles.previewContainer}>\n          <audio \n            controls \n            src={currentFileUrl} \n            className={styles.audioPreview}\n          >\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      );\n    }\n    \n    return null;\n  };\n  \n  return (\n    <div className={styles.fileUploadContainer}>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileChange}\n        accept={acceptedFileTypes}\n        className={styles.fileInput}\n      />\n      \n      {currentFileUrl && renderPreview()}\n      \n      <button \n        type=\"button\" \n        onClick={handleButtonClick}\n        className={`${styles.uploadButton} ${currentFileUrl ? styles.changeButton : ''}`}\n        disabled={isUploading}\n        data-gamepad-focusable=\"true\"\n      >\n        {isUploading ? 'Uploading...' : currentFileUrl ? `Change ${label}` : `Upload ${label}`}\n      </button>\n      \n      {error && (\n        <div className={styles.errorMessage}>\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport BaseModal from './common/BaseModal';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport FileUpload from './FileUpload.jsx';\n\nconst PreferencesModal = ({ onClose }) => {\n  const { \n    preferences, \n    toggleAutoAnte,\n    toggleMute,\n    uploadTwoSecondPotGif, \n    uploadTwoSecondPotMp3, \n    uploadProfileImg,\n    loading \n  } = usePreferences();\n\n  if (loading) {\n    return (\n      <BaseModal title=\"Preferences\" onClose={onClose} style={{ maxWidth: 600, maxHeight: '25vh' }}>\n        <div className={baseModalStyles.loadingMessage}>Loading preferences...</div>\n      </BaseModal>\n    );\n  }\n\n  return (\n    <BaseModal title=\"Preferences\" onClose={onClose} style={{ maxWidth: 600, maxHeight: '80vh' }}>\n      <div className={baseModalStyles.settingsContainer}>\n        {/* Game Options Section */}\n        <div className={baseModalStyles.sectionHeader}>Game Options</div>\n\n        {/* Mute Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Mute Sound</h4>\n            <p>Mute all game sound effects</p>\n          </div>\n          <ToggleSwitch \n            isChecked={preferences.muted}\n            onChange={toggleMute}\n          />\n        </div>\n\n        {/* Auto-Ante Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Auto-Ante</h4>\n            <p>Automatically ante up when a new round begins</p>\n          </div>\n          <ToggleSwitch \n            isChecked={preferences.autoAnte}\n            onChange={toggleAutoAnte}\n          />\n        </div>\n\n        {/* Customization Options Section */}\n        <div className={baseModalStyles.sectionHeader}>Customization Options</div>\n\n        {/* Profile Image Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Profile Image</h4>\n            <p>Upload a profile image to personalize your account</p>\n          </div>\n          <FileUpload\n            onUpload={uploadProfileImg}\n            currentFileUrl={preferences.profileImg}\n            acceptedFileTypes=\"image/jpeg,image/png,image/gif\"\n            label=\"Image\"\n            previewType=\"image\"\n          />\n        </div>\n\n        {/* Two Second Pot GIF Setting */}\n        <div style={{ position: 'relative' }}>\n          <div style={{\n            position: 'absolute',\n            top: '-12px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: '#FFD700',\n            color: '#333',\n            padding: '2px 10px',\n            borderRadius: '4px',\n            fontWeight: 'bold',\n            fontSize: '14px',\n            zIndex: 2\n          }}>\n            COMING SOON\n          </div>\n          <div className={baseModalStyles.settingItem} style={{ border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px', marginTop: '12px' }}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Two Second POT GIF</h4>\n              <p>Upload a GIF to play when you slam the POT button</p>\n            </div>\n            <FileUpload\n              onUpload={uploadTwoSecondPotGif}\n              currentFileUrl={preferences.twoSecondPotGif}\n              acceptedFileTypes=\"image/gif\"\n              label=\"GIF\"\n              previewType=\"image\"\n            />\n          </div>\n        </div>\n\n        {/* Two Second Pot Sound Setting */}\n        <div style={{ position: 'relative' }}>\n          <div style={{\n            position: 'absolute',\n            top: '-12px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: '#FFD700',\n            color: '#333',\n            padding: '2px 10px',\n            borderRadius: '4px',\n            fontWeight: 'bold',\n            fontSize: '14px',\n            zIndex: 2\n          }}>\n            COMING SOON\n          </div>\n          <div className={baseModalStyles.settingItem} style={{ border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px', marginTop: '12px' }}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Two Second POT Sound</h4>\n              <p>Upload a sound to play when you slam the POT button</p>\n            </div>\n            <FileUpload\n              onUpload={uploadTwoSecondPotMp3}\n              currentFileUrl={preferences.twoSecondPotMp3}\n              acceptedFileTypes=\"audio/mpeg,audio/wav\"\n              label=\"Sound\"\n              previewType=\"audio\"\n            />\n          </div>\n        </div>\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default PreferencesModal;\n","import React from 'react';\nimport styles from './styles/IconButton.module.css';\n\n/**\n * A reusable icon button component with standardized styling\n * \n * @param {Object} props Component props\n * @param {React.ReactNode} props.icon The icon to display\n * @param {string} props.title Tooltip text for the button\n * @param {function} props.onClick Click handler function\n * @param {string} props.variant Button variant ('default', 'danger', 'success')\n * @param {boolean} props.compact Whether to use compact styling\n * @param {string} props.className Additional class names\n */\nconst IconButton = ({ \n  icon, \n  title, \n  onClick, \n  variant = 'default',\n  compact = true,\n  className = '',\n  ...restProps\n}) => {\n  return (\n    <button\n      className={`${styles.iconButton} ${styles[variant]} ${className}`}\n      onClick={onClick}\n      title={title}\n      type=\"button\"\n      {...restProps}\n    >\n      {icon}\n    </button>\n  );\n};\n\nexport default IconButton;\n","import React, { useState } from 'react';\nimport GearIcon from '../icons/GearIcon';\nimport PreferencesModal from '../PreferencesModal';\nimport IconButton from './IconButton';\n\nconst PreferencesButton = () => {\n  const [isPreferencesOpen, setIsPreferencesOpen] = useState(false);\n\n  const openPreferences = () => {\n    setIsPreferencesOpen(true);\n  };\n\n  const closePreferences = () => {\n    setIsPreferencesOpen(false);\n  };\n\n  return (\n    <>\n      <IconButton\n        onClick={openPreferences}\n        icon={<GearIcon style={{ color: 'white', width: 20, height: 20 }} />}\n        aria-label=\"Open Preferences\"\n        variant=\"preferences\"\n        title=\"Preferences\"\n        data-gamepad-focusable=\"true\"\n      />\n      {/* Render the modal conditionally */}\n      {isPreferencesOpen && <PreferencesModal isOpen={isPreferencesOpen} onClose={closePreferences} />}\n    </>\n  );\n};\n\nexport default PreferencesButton;\n","import React from 'react';\n\nconst BarChartIcon = ({ style }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={style}\n    >\n      <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"></line>\n      <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"></line>\n      <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"></line>\n      <line x1=\"3\" y1=\"20\" x2=\"21\" y2=\"20\"></line>\n    </svg>\n  );\n};\n\nexport default BarChartIcon;\n","import React from 'react';\n\n/**\n * Download CSV icon component for transaction log download button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst DownloadIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Stylized CSV download icon with document and arrow */}\n      <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n      <path d=\"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z\" />\n      <path d=\"M12 15 L12 18\" />\n      <path d=\"M9.5 16.5 L12 19 L14.5 16.5\" />\n      <path d=\"M8 10 L10 10\" />\n      <path d=\"M12 10 L14 10\" />\n      <path d=\"M16 10 L16 10\" />\n    </svg>\n  );\n};\n\nexport default DownloadIcon;\n","import React from 'react';\nimport IconButton from './IconButton';\nimport DownloadIcon from '../icons/DownloadIcon';\n// Optional import - only used if gameState not provided via props\nlet useGameContext;\ntry {\n  useGameContext = require('../../contexts/GameContext').useGameContext;\n} catch (error) {\n  // Context not available - will rely on props\n  useGameContext = () => ({ gameState: null });\n}\n\n/**\n * A specialized button component for downloading game transactions as CSV\n * \n * @param {Object} props Component props\n * @param {string} props.title Custom tooltip text (optional)\n * @param {Object} props.gameState Game state object (optional, will use context if not provided)\n */\nconst TransactionDownloadButton = ({ \n  title = \"Download Transaction Log as CSV\",\n  gameState: propGameState,\n  ...restProps \n}) => {\n  // Use provided gameState or try to get from context if available\n  let contextValue;\n  try {\n    contextValue = useGameContext ? useGameContext() : { gameState: null };\n  } catch (error) {\n    // Context not available\n    contextValue = { gameState: null };\n  }\n  \n  // Handle both the original gameState format and our new gameData format\n  const gameData = propGameState || contextValue?.gameState;\n  \n  // Extract data based on structure\n  // For historical games from the API, the structure might be slightly different\n  const gameTransactions = gameData?.gameTransactions || gameData?.gameData?.gameTransactions || [];\n  const gameId = gameData?._id || gameData?.id || 'unknown';\n\n  const downloadTransactionsCSV = () => {\n    // Ensure we have transactions as an array\n    const transactions = Array.isArray(gameTransactions) ? gameTransactions : [];\n    \n    if (transactions.length === 0) return;\n    \n    // Create CSV header\n    let csvContent = \"Player,Transaction Type,Amount,Round,Timestamp\\n\";\n    \n    // Make a copy of transactions for sorting\n    const sortedTransactions = [...transactions].map(tx => ({\n      ...tx,\n      // Ensure timestamp is a Date object for sorting\n      timestamp: tx.timestamp ? new Date(tx.timestamp) : new Date()\n    }));\n    \n    // Sort all transactions by timestamp in ascending order\n    sortedTransactions.sort((a, b) => a.timestamp - b.timestamp);\n    \n    // Add sorted transaction data to CSV\n    sortedTransactions.forEach(tx => {\n      // Format date for display\n      const timestamp = tx.timestamp ? new Date(tx.timestamp).toLocaleString() : 'N/A';\n      \n      // Escape any commas in the player name\n      const playerName = tx.playerName || tx.player || 'Unknown Player';\n      const escapedName = playerName.includes(',') ? `\"${playerName}\"` : playerName;\n      \n      // Use the transactionType field if available, otherwise derive it from reason\n      let transactionType = tx.transactionType || 'Transaction';\n      \n      // If we need to derive the transaction type from the reason\n      if (!tx.transactionType && tx.reason) {\n        // Extract the action part from the reason (e.g., \"Ante in round 1\" -> \"Ante\")\n        const reasonParts = tx.reason.split(' ');\n        transactionType = reasonParts[0]; // Take the first word as the type\n        \n        // Special case for \"Won bet\" which is two words\n        if (reasonParts[0] === 'Won') {\n          transactionType = 'Win';\n        }\n        // Special case for penalty reasons\n        else if (tx.reason.includes('penalty')) {\n          transactionType = 'Penalty';\n        }\n      }\n      \n      // Add the transaction row\n      csvContent += `${escapedName},${transactionType},${tx.amount},${tx.round || 'N/A'},${timestamp}\\n`;\n    });\n    \n    // Create and trigger download\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', `game-${gameId}-transactions.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <IconButton\n      icon={<DownloadIcon color=\"white\" size={20} />}\n      title={title}\n      onClick={downloadTransactionsCSV}\n      variant=\"default\"\n      {...restProps}\n    />\n  );\n};\n\nexport default TransactionDownloadButton;\n","import { useMemo } from 'react';\nimport styles from './styles/GameStats.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst GameStats = ({ gameData }) => {\n  const transactions = gameData.gameTransactions;\n  const players = gameData.players;\n  \n  // Construct player names from both players and transactions\n  const playerNames = {};\n  \n  // First add current players\n  Object.entries(players).forEach(([playerId, player]) => {\n    playerNames[playerId] = player.name;\n  });\n  \n  // Then add players who left but have transactions\n  transactions.forEach(tx => {\n    if (tx.playerId && !playerNames[tx.playerId]) {\n      playerNames[tx.playerId] = tx.playerName || 'Unknown Player';\n    }\n  });\n\n  // Calculate game statistics from transaction data\n  const gameStats = useMemo(() => {\n    if (transactions.length === 0) {\n      return [];\n    }\n\n    // Helper function to format numbers with commas\n    const formatNumber = (num) => num.toLocaleString();\n\n    // Group transactions by player\n    const playerTransactions = {};\n    transactions.forEach(tx => {\n      if (!playerTransactions[tx.playerId]) {\n        playerTransactions[tx.playerId] = [];\n      }\n      playerTransactions[tx.playerId].push(tx);\n    });\n\n    // Get rounds from game data\n    const rounds = gameData.round || 1;\n    \n    // Calculate total decks - get from game data, not transactions\n    const decks = gameData.deckCount || 1;\n\n    // Calculate total ante amount\n    const totalAnteAmount = transactions\n      .filter(tx => tx.transactionType === 'Ante')\n      .reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    // Calculate total bet amount\n    const totalBetAmount = transactions\n      .filter(tx => tx.transactionType === 'Bet')\n      .reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    // Calculate biggest single bet\n    const bets = transactions.filter(tx => tx.transactionType === 'Bet');\n    const biggestBet = bets.length > 0 ?\n      bets.reduce((max, tx) => Math.abs(tx.amount) > Math.abs(max.amount) ? tx : max, bets[0]) :\n      null;\n\n    // Calculate biggest pot\n    const biggestPot = transactions.reduce((max, tx) => tx.potAmount > max ? tx.potAmount : max, 0);\n\n    // Calculate total penalties\n    const penalties = transactions.filter(tx => tx.transactionType === '2x' || tx.transactionType === '3x');\n    const totalPenaltyAmount = penalties.reduce((sum, tx) => sum + Math.abs(tx.amount), 0);\n\n    // Calculate player with most bets (aggressive player)\n    const playerBetCounts = {};\n    bets.forEach(tx => {\n      playerBetCounts[tx.playerId] = (playerBetCounts[tx.playerId] || 0) + 1;\n    });\n\n    let mostAggressivePlayerId = null;\n    let mostBets = 0;\n    \n    Object.entries(playerBetCounts).forEach(([playerId, count]) => {\n      if (count > mostBets) {\n        mostBets = count;\n        mostAggressivePlayerId = playerId;\n      }\n    });\n\n    // Calculate average bet size by player\n    const playerBetTotals = {};\n    bets.forEach(tx => {\n      if (!playerBetTotals[tx.playerId]) {\n        playerBetTotals[tx.playerId] = { total: 0, count: 0 };\n      }\n      playerBetTotals[tx.playerId].total += Math.abs(tx.amount);\n      playerBetTotals[tx.playerId].count += 1;\n    });\n\n    // Find player with highest average bet\n    let highestAvgBetPlayerId = null;\n    let highestAvgBet = 0;\n    \n    Object.entries(playerBetTotals).forEach(([playerId, data]) => {\n      const avg = data.total / data.count;\n      if (avg > highestAvgBet) {\n        highestAvgBet = avg;\n        highestAvgBetPlayerId = playerId;\n      }\n    });\n\n    // Calculate player wins count\n    const playerWins = {};\n    transactions\n      .filter(tx => tx.transactionType === 'Win')\n      .forEach(tx => {\n        playerWins[tx.playerId] = (playerWins[tx.playerId] || 0) + 1;\n      });\n\n    // Find most winning player\n    let mostWinningPlayerId = null;\n    let mostWins = 0;\n    \n    Object.entries(playerWins).forEach(([playerId, wins]) => {\n      if (wins > mostWins) {\n        mostWins = wins;\n        mostWinningPlayerId = playerId;\n      }\n    });\n\n    // Calculate penalty counts by player\n    const playerPenalties = {};\n    penalties.forEach(tx => {\n      playerPenalties[tx.playerId] = (playerPenalties[tx.playerId] || 0) + 1;\n    });\n\n    // Find player with most penalties\n    let mostPenaltiesPlayerId = null;\n    let mostPenalties = 0;\n    \n    Object.entries(playerPenalties).forEach(([playerId, count]) => {\n      if (count > mostPenalties) {\n        mostPenalties = count;\n        mostPenaltiesPlayerId = playerId;\n      }\n    });\n\n    // Calculate profit/loss by player\n    const playerProfits = {};\n    Object.entries(playerTransactions).forEach(([playerId, txs]) => {\n      playerProfits[playerId] = txs.reduce((sum, tx) => sum + tx.amount, 0);\n    });\n\n    // Find biggest winner and loser\n    let biggestWinnerId = null;\n    let biggestWin = 0;\n    let biggestLoserId = null;\n    let biggestLoss = 0;\n    \n    Object.entries(playerProfits).forEach(([playerId, profit]) => {\n      if (profit > biggestWin) {\n        biggestWin = profit;\n        biggestWinnerId = playerId;\n      }\n      if (profit < biggestLoss) {\n        biggestLoss = profit;\n        biggestLoserId = playerId;\n      }\n    });\n\n    // Build stats array with all the interesting stats we've calculated\n    return [\n      {\n        key: 'totalDecks',\n        label: 'Total Decks',\n        value: decks,\n        type: 'number'\n      },\n      {\n        key: 'totalRounds',\n        label: 'Total Rounds',\n        value: rounds,\n        type: 'number'\n      },\n      {\n        key: 'totalBets',\n        label: 'Total Bets Placed',\n        value: bets.length,\n        type: 'number'\n      },\n      {\n        key: 'totalAnte',\n        label: 'Total Ante Amount',\n        value: totalAnteAmount,\n        type: 'currency'\n      },\n      {\n        key: 'totalBetAmount',\n        label: 'Total Bet Amount',\n        value: totalBetAmount,\n        type: 'currency'\n      },\n      {\n        key: 'biggestPot',\n        label: 'Biggest Pot',\n        value: biggestPot,\n        type: 'currency'\n      },\n      {\n        key: 'biggestBet',\n        label: 'Biggest Single Bet',\n        value: biggestBet ? Math.abs(biggestBet.amount) : 0,\n        type: 'currency',\n        suffix: biggestBet ? ` by ${biggestBet.playerName}` : ''\n      },\n      {\n        key: 'biggestWinner',\n        label: 'Biggest Winner',\n        value: biggestWinnerId ? playerNames[biggestWinnerId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: biggestWinnerId ? ` (+${formatNumber(biggestWin)})` : ''\n      },\n      {\n        key: 'biggestLoser',\n        label: 'Biggest Loser',\n        value: biggestLoserId ? playerNames[biggestLoserId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: biggestLoserId ? ` (${formatNumber(biggestLoss)})` : ''\n      },\n      {\n        key: 'mostAggressive',\n        label: 'Most Aggressive Player',\n        value: mostAggressivePlayerId ? playerNames[mostAggressivePlayerId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: mostAggressivePlayerId ? ` (${formatNumber(mostBets)} bets)` : ''\n      },\n      {\n        key: 'highestAvgBet',\n        label: 'Highest Average Bet',\n        value: highestAvgBetPlayerId ? playerNames[highestAvgBetPlayerId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: highestAvgBetPlayerId ? ` (avg: ${formatNumber(Math.round(highestAvgBet))})` : ''\n      },\n      {\n        key: 'mostWinning',\n        label: 'Most Winning Player',\n        value: mostWinningPlayerId ? playerNames[mostWinningPlayerId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: mostWinningPlayerId ? ` (${formatNumber(mostWins)} wins)` : ''\n      },\n      {\n        key: 'totalPenalties',\n        label: 'Total Penalties',\n        value: penalties.length,\n        type: 'number',\n        suffix: penalties.length > 0 ? ` (${formatNumber(totalPenaltyAmount)} coins)` : ''\n      },\n      {\n        key: 'unluckyPlayer',\n        label: 'Most Penalized Player',\n        value: mostPenaltiesPlayerId ? playerNames[mostPenaltiesPlayerId] || 'Unknown Player' : 'N/A',\n        type: 'text',\n        suffix: mostPenaltiesPlayerId ? ` (${formatNumber(mostPenalties)} penalties)` : ''\n      }\n    ];\n  }, [transactions, playerNames]);\n\n  // Helper function to format stat values based on their type\n  const formatStatValue = (type, value) => {\n    // Handle different types of values appropriately\n    if (type === 'currency') {\n      // Return CurrencyAmount component for currency values\n      return <CurrencyAmount amount={value} size=\"small\" />;\n    }\n    \n    if (type === 'percentage') {\n      return `${(value * 100).toFixed(1)}%`;\n    }\n    \n    if (type === 'number') {\n      return value.toLocaleString();\n    }\n    \n    // Default return for text and other types\n    return value;\n  };\n\n  return (\n    <div className={styles.tabContent}>\n      {gameStats.length === 0 ? (\n        <p className={styles.noDataMessage}>No statistics available for this game.</p>\n      ) : (\n        <div className={styles.statsGrid}>\n          {gameStats.map((stat) => (\n            <div key={stat.key} className={styles.statItem}>\n              <div className={styles.statLabel}>{stat.label}</div>\n              <div className={styles.statValue}>\n                {formatStatValue(stat.type, stat.value)}\n                {stat.suffix && <span className={styles.statSuffix}>{stat.suffix}</span>}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameStats;\n","import React, { useMemo, useState } from 'react';\nimport styles from './styles/GameSummaryModal.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport TransactionDownloadButton from './common/TransactionDownloadButton';\nimport GameStats from './GameStats';\n\n/**\n * Game Summary Modal component that displays running scores and settle-up calculations\n * Can be used with active game data from GameContext or with historical game data passed directly\n */\nconst GameSummaryModal = ({ onClose, gameData }) => {\n  if (!gameData) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.modalHeader}>\n            <h2>Game Summary</h2>\n            <button className={styles.closeButton} onClick={onClose} data-gamepad-focusable=\"true\">×</button>\n          </div>\n          <div className={styles.settingsContainer}>\n            <div className={styles.loadingMessage}>Loading game data...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Extract data from gameData with clean access now that structure is consistent\n  const gameTransactions = gameData.gameTransactions || [];\n  const players = gameData.players || {};\n  const gameId = gameData.id || 'unknown';\n  const showPayoutsTab = gameData.settings?.isPrivate || false;\n  \n  // Ensure gameTransactions is always an array\n  const transactions = Array.isArray(gameTransactions) ? gameTransactions : [];\n  \n  // Get player names (including those who left)\n  const playerNames = {};\n  \n  // First add current players\n  Object.entries(players).forEach(([playerId, player]) => {\n    playerNames[playerId] = player.name;\n  });\n  \n  // Then add players who left but have transactions\n  transactions.forEach(tx => {\n    if (tx.playerId && !playerNames[tx.playerId]) {\n      playerNames[tx.playerId] = tx.playerName || 'Unknown Player';\n    }\n  });\n\n  // Calculate player totals directly from flat transaction array\n  const playerTotals = useMemo(() => {\n    const totals = {};\n    \n    // Group transactions by player ID and sum up amounts\n    transactions.forEach(tx => {\n      if (!tx.playerId) return;\n      \n      if (!totals[tx.playerId]) {\n        totals[tx.playerId] = 0;\n      }\n      \n      totals[tx.playerId] += tx.amount;\n    });\n    \n    return totals;\n  }, [transactions]);\n  \n  // Calculate settle-up payments\n  const settleUpPayments = useMemo(() => {\n    // For simple 2-player games, just have the loser pay the winner directly\n    if (Object.keys(playerTotals).length === 2) {\n      const players = Object.entries(playerTotals);\n      const [player1Id, player1Total] = players[0];\n      const [player2Id, player2Total] = players[1];\n      \n      // If totals sum to zero (or close to it), one player pays the other\n      if (Math.abs(player1Total + player2Total) < 0.1) {\n        if (player1Total > 0) {\n          // Player 2 pays Player 1\n          return [{\n            from: player2Id,\n            fromName: playerNames[player2Id],\n            to: player1Id,\n            toName: playerNames[player1Id],\n            amount: Math.abs(player1Total)\n          }];\n        } else if (player2Total > 0) {\n          // Player 1 pays Player 2\n          return [{\n            from: player1Id,\n            fromName: playerNames[player1Id],\n            to: player2Id,\n            toName: playerNames[player2Id],\n            amount: Math.abs(player2Total)\n          }];\n        }\n      }\n    }\n    \n    // For more complex cases with more players\n    const payments = [];\n    \n    // Split into winners and losers\n    const losers = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount < 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount: Math.abs(amount) // Convert to positive amount for easier calculation\n      }));\n    \n    const winners = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount > 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount\n      }));\n    \n    // Sort by amount (descending)\n    losers.sort((a, b) => b.amount - a.amount);\n    winners.sort((a, b) => b.amount - a.amount);\n    \n    // Process each winner, starting with the biggest winner\n    while (winners.length > 0 && losers.length > 0) {\n      const winner = winners[0];\n      const loser = losers[0];\n      \n      // Calculate payment amount\n      const paymentAmount = Math.min(winner.amount, loser.amount);\n      \n      if (paymentAmount > 0.01) { // Only process meaningful payments\n        // Add payment\n        payments.push({\n          from: loser.playerId,\n          fromName: loser.playerName,\n          to: winner.playerId,\n          toName: winner.playerName,\n          amount: paymentAmount\n        });\n        \n\n        \n        // Update balances\n        winner.amount -= paymentAmount;\n        loser.amount -= paymentAmount;\n        \n        // Remove settled players or re-sort if they still have balance\n        if (winner.amount < 0.01) {\n          winners.shift();\n        }\n        \n        if (loser.amount < 0.01) {\n          losers.shift();\n        }\n      } else {\n        // No meaningful payment possible\n        break;\n      }\n    }\n    \n    return payments;\n  }, [playerTotals, playerNames]);\n\n  // Track the active tab - start with 'totals' tab\n  const [activeTab, setActiveTab] = useState('totals');\n\n  return (\n    <div className={styles.modalOverlay} onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Game Summary ({gameId})</h2>\n          <div className={styles.headerButtons}>\n            <TransactionDownloadButton gameState={gameData} />\n            <button className={styles.closeButton} onClick={onClose} data-gamepad-focusable=\"true\">×</button>\n          </div>\n        </div>\n        \n        <div className={styles.settingsContainer}>\n          {/* Tab Bar Navigation */}\n          <div className={styles.tabsContainer}>\n            <button \n              className={`${styles.tabButton} ${activeTab === 'totals' ? styles.activeTab : ''}`}\n              onClick={() => setActiveTab('totals')}\n              data-gamepad-focusable=\"true\"\n            >\n              Totals\n            </button>\n            \n            <button \n              className={`${styles.tabButton} ${activeTab === 'stats' ? styles.activeTab : ''}`}\n              onClick={() => setActiveTab('stats')}\n              data-gamepad-focusable=\"true\"\n            >\n              Stats\n            </button>\n            \n            {showPayoutsTab && (\n              <button \n                className={`${styles.tabButton} ${activeTab === 'payouts' ? styles.activeTab : ''}`}\n                onClick={() => setActiveTab('payouts')}\n                data-gamepad-focusable=\"true\"\n              >\n                Payouts\n              </button>\n            )}\n          </div>\n\n          {/* Totals Tab Content */}\n          {activeTab === 'totals' && (\n            <div className={styles.tabContent}>\n              {Object.keys(playerTotals).length === 0 ? (\n                <p className={styles.noDataMessage}>No transactions recorded yet.</p>\n              ) : (\n                <div className={styles.totalsTable}>\n                  {Object.entries(playerTotals).map(([playerId, total]) => (\n                    <div key={playerId} className={styles.totalRow}>\n                      <span className={styles.playerName}>{playerNames[playerId] || 'Unknown Player'}</span>\n                      <span className={`${styles.totalAmount} ${total >= 0 ? styles.positive : styles.negative}`}>\n                        <CurrencyAmount amount={total} size=\"small\" />\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Stats Tab Content */}\n          {activeTab === 'stats' && (\n            <GameStats gameData={gameData} />\n          )}\n\n          {/* Payouts Tab Content - Only shown for private games and when selected */}\n          {activeTab === 'payouts' && showPayoutsTab && (\n            <div className={styles.tabContent}>\n              {settleUpPayments.length === 0 ? (\n                <p className={styles.noDataMessage}>No payments needed or no transactions recorded yet.</p>\n              ) : (\n                <div className={styles.settleUpTable}>\n                  {settleUpPayments.map((payment, index) => (\n                    <div key={index} className={styles.paymentRow}>\n                      <span className={styles.paymentText}>\n                        <span className={styles.playerName}>{payment.fromName}</span> pays{' '}\n                        <span className={styles.playerName}>{payment.toName}</span>\n                      </span>\n                      <span className={styles.paymentAmount}>\n                        <CurrencyAmount amount={payment.amount} size=\"small\" />\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameSummaryModal;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport BaseModal from './common/BaseModal';\nimport GameSummaryModal from './GameSummaryModal';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport styles from './styles/PlayerStatsModal.module.css';\nimport { API_URL } from '../config';\n\nconst PlayerStatsModal = ({ onClose }) => {\n  const { token } = useAuth();\n  const [activeTab, setActiveTab] = useState('stats'); // 'stats' or 'history'\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [historyData, setHistoryData] = useState({ games: [], pagination: {} });\n  const [currentPage, setCurrentPage] = useState(0);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n  const [selectedGameData, setSelectedGameData] = useState(null);\n  const [lifetimeStats, setLifetimeStats] = useState(null);\n  const [statsLoading, setStatsLoading] = useState(true);\n  const [statsError, setStatsError] = useState(null);\n  const pageSize = 5;\n\n  useEffect(() => {\n    const fetchGameHistory = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const response = await fetch(`${API_URL}/games/history?pageSize=${pageSize}&pageNumber=${currentPage}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to fetch game history');\n        }\n        \n        const data = await response.json();\n        setHistoryData(data);\n      } catch (err) {\n        console.error('Error fetching game history:', err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchGameHistory();\n  }, [token, currentPage]);\n  \n  // Fetch lifetime stats from the dedicated stats endpoint\n  useEffect(() => {\n    const fetchLifetimeStats = async () => {\n      setStatsLoading(true);\n      setStatsError(null);\n      \n      try {\n        const response = await fetch(`${API_URL}/stats/me`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to fetch lifetime stats');\n        }\n        \n        const data = await response.json();\n        setLifetimeStats(data.stats);\n      } catch (err) {\n        console.error('Error fetching lifetime stats:', err);\n        setStatsError(err.message);\n      } finally {\n        setStatsLoading(false);\n      }\n    };\n    \n    fetchLifetimeStats();\n  }, [token]);\n\n  const handlePreviousPage = () => {\n    if (currentPage > 0) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  const handleNextPage = () => {\n    if (historyData.pagination && \n        historyData.games.length === pageSize) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Unknown';\n    \n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    }).format(date);\n  };\n  \n  // Format stat label from camelCase to Title Case with spaces\n  const formatStatLabel = (key) => {\n    // Insert space before capital letters and uppercase the first letter\n    const formatted = key\n      .replace(/([A-Z])/g, ' $1')\n      .replace(/^./, (str) => str.toUpperCase());\n    \n    return formatted;\n  };\n  \n  // Format stat value based on the explicit type or the value itself\n  const formatStatValue = (type, value) => {\n    // Handle different types of values appropriately\n    if (typeof value === 'number') {\n      // Format based on explicit type if provided\n      if (type === 'currency') {\n        // Return CurrencyAmount component for currency values\n        return <CurrencyAmount amount={value.toFixed(2)} size=\"small\" />;\n      }\n      \n      if (type === 'percentage') {\n        return `${(value * 100).toFixed(1)}%`;\n      }\n      \n      // Just return the number for counts\n      return value.toLocaleString();\n    }\n    \n    // For boolean values\n    if (typeof value === 'boolean') {\n      return value ? 'Yes' : 'No';\n    }\n    \n    // For dates - only format as date if explicitly typed as 'date' or is an actual Date object\n    if (type === 'date' || value instanceof Date) {\n      return formatDate(value);\n    }\n    \n    // Handle numeric types explicitly\n    if (type === 'number') {\n      return Number(value).toLocaleString();\n    }\n    \n    // Default toString for anything else\n    return String(value);\n  };\n  \n  // Get the round count from the game data\n  const getRoundCount = (game) => {\n    return game.roundCount || 0;\n  };\n\n  const handleGameClick = (gameId) => {\n    // Find the selected game in our existing data\n    const selectedGame = historyData.games.find(game => game._id === gameId);\n    if (selectedGame) {\n      // Just pass the gameData object which already has the correct structure\n      setSelectedGameData(selectedGame.gameData);\n      setShowGameSummary(true);\n    }\n  };\n\n  return (\n    <>\n      <BaseModal title=\"Player Stats\" onClose={onClose} style={{ maxWidth: 800, height: '90ßvh' }}>\n        <div className={baseModalStyles.settingsContainer}>\n          {/* Tab Bar Navigation */}\n          <div className={styles.tabsContainer}>\n            <button \n              className={`${styles.tabButton} ${activeTab === 'stats' ? styles.activeTab : ''}`}\n              onClick={() => setActiveTab('stats')}\n              data-gamepad-focusable=\"true\"\n            >\n              Lifetime Stats\n            </button>\n            <button \n              className={`${styles.tabButton} ${activeTab === 'history' ? styles.activeTab : ''}`}\n              onClick={() => setActiveTab('history')}\n              data-gamepad-focusable=\"true\"\n            >\n              Game History\n            </button>\n          </div>\n\n          {/* Lifetime Stats Tab Content */}\n          {activeTab === 'stats' && (\n            <div className={styles.tabContent}>\n              {statsLoading ? (\n                <div className={styles.loadingMessage}>\n                  <div className={styles.loadingSpinner}></div>\n                  Loading your lifetime stats...\n                </div>\n              ) : statsError ? (\n                <div className={styles.errorMessage}>Error: {statsError}</div>\n              ) : !lifetimeStats || lifetimeStats.length === 0 ? (\n                <div className={styles.statsPlaceholder}>\n                  <p>No lifetime statistics available.</p>\n                </div>\n              ) : (\n                <div \n                  className={styles.statsGrid}\n                  data-gamepad-scrollable=\"true\"\n                  tabIndex=\"0\"\n                >\n                  {lifetimeStats.map((stat, index) => (\n                    <div key={stat.key || `stat-${index}`} className={styles.statItem}>\n                      <div className={styles.statLabel}>{stat.label}</div>\n                      <div className={styles.statValue}>\n                        {formatStatValue(stat.type, stat.value)}\n                        {stat.suffix && <span className={styles.statSuffix}>{stat.suffix}</span>}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Game History Tab Content */}\n          {activeTab === 'history' && (\n            <div className={styles.tabContent}>\n              {loading ? (\n                <div className={styles.loadingMessage}>\n                  <div className={styles.loadingSpinner}></div>\n                  Loading your game history...\n                </div>\n              ) : error ? (\n                <div className={styles.errorMessage}>Error: {error}</div>\n              ) : historyData.games.length === 0 ? (\n                <div className={styles.statsPlaceholder}>\n                  <p>No games found in your history.</p>\n                </div>\n              ) : (\n                <>\n                  <div \n                    className={styles.historyTable}\n                    data-gamepad-scrollable=\"true\"\n                    tabIndex=\"0\"\n                  >\n                    <div className={styles.tableHeader}>\n                      <div className={styles.gameNameHeader}>Game</div>\n                      <div className={styles.playerCountHeader}>Players</div>\n                      <div className={styles.roundsHeader}>Rounds</div>\n                      <div className={styles.endDateHeader}>Ended</div>\n                    </div>\n                    \n                    {historyData.games.map((game) => (\n                      <div key={game._id} className={styles.historyRow}>\n                        <div className={styles.gameNameCell}>\n                          <span \n                            className={styles.gameNameLink} \n                            onClick={() => handleGameClick(game._id)}\n                            tabIndex=\"0\"\n                            role=\"button\"\n                            data-gamepad-focusable=\"true\"\n                          >\n                            #{game._id}\n                          </span>\n                        </div>\n                        <div className={styles.playerCountCell}>{game.totalPlayerCount}</div>\n                        <div className={styles.roundsCell}>{getRoundCount(game)}</div>\n                        <div className={styles.endDateCell}>{formatDate(game.endedAt)}</div>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  <div className={styles.pageInfo}>\n                    <button \n                      onClick={handlePreviousPage} \n                      disabled={currentPage === 0}\n                      className={styles.pageButton}\n                      aria-label=\"Previous page\"\n                      data-gamepad-focusable=\"true\"\n                    >\n                      &larr;\n                    </button>\n                    \n                    Page {currentPage + 1}\n                    {historyData.pagination && historyData.pagination.total ? \n                      ` of ${Math.ceil(historyData.pagination.total / pageSize)}` : ''}\n                    \n                    <button \n                      onClick={handleNextPage} \n                      disabled={!historyData.pagination || historyData.games.length < pageSize}\n                      className={styles.pageButton}\n                      aria-label=\"Next page\"\n                      data-gamepad-focusable=\"true\"\n                    >\n                      &rarr;\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </BaseModal>\n      \n      {showGameSummary && selectedGameData && (\n        <GameSummaryModal \n          gameData={selectedGameData}\n          onClose={() => {\n            setShowGameSummary(false);\n            setSelectedGameData(null);\n          }} \n        />\n      )}\n      \n\n    </>\n  );\n};\n\n\n\nexport default PlayerStatsModal;\n","import React, { useState } from 'react';\nimport BarChartIcon from '../icons/BarChartIcon';\nimport PlayerStatsModal from '../PlayerStatsModal';\nimport IconButton from './IconButton';\n\nconst PlayerStatsButton = ({ ...props }) => {\n  const [isStatsOpen, setIsStatsOpen] = useState(false);\n\n  const openStats = () => {\n    setIsStatsOpen(true);\n  };\n\n  const closeStats = () => {\n    setIsStatsOpen(false);\n  };\n\n  return (\n    <>\n      <IconButton\n        onClick={openStats}\n        icon={<BarChartIcon style={{ color: '#fff', width: 20, height: 20 }} />}\n        aria-label=\"Open Player Stats\"\n        variant=\"stats\"\n        title=\"Player Stats\"\n        {...props}\n      />\n      {/* Render the modal conditionally */}\n      {isStatsOpen && <PlayerStatsModal isOpen={isStatsOpen} onClose={closeStats} />}\n    </>\n  );\n};\n\nexport default PlayerStatsButton;\n","import React from 'react';\n\nconst StoreIcon = ({ className = 'h-6 w-6', ...props }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      strokeWidth={1.8}\n      stroke=\"currentColor\"\n      className={className}\n      {...props}\n    >\n      {/* Shopping bag */}\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        d=\"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z\"\n      />\n    </svg>\n  );\n};\n\nexport default StoreIcon;","import React from 'react';\nimport StoreIcon from './icons/StoreIcon';\nimport IconButton from './common/IconButton';\n\nconst StoreButton = ({ onClick, ...props }) => {\n  return (\n    <IconButton\n      onClick={onClick}\n      icon={<StoreIcon style={{ color: 'white', width: 20, height: 20 }} />}\n      aria-label=\"Store\"\n      variant=\"store\"\n      title=\"Store\"\n      {...props}\n    />\n  );\n};\n\nexport default StoreButton;","import React from 'react';\nimport styles from './styles/UserAvatar.module.css';\n\n/**\n * UserAvatar component displays a user's profile image or their initials if no image is available.\n * It can be used in various contexts like the lobby, player list, results screen, etc.\n * \n * @param {Object} props - Component props\n * @param {Object} props.user - User object containing username and profileImg\n * @param {string} props.size - Size of the avatar ('small', 'medium', 'large')\n * @param {boolean} props.showName - Whether to display the username next to the avatar\n * @param {string} props.namePosition - Position of the username ('right', 'below')\n * @param {string} props.className - Additional CSS class for styling\n */\nconst UserAvatar = ({ \n  user, \n  size = 'medium', \n  showName = true, \n  namePosition = 'right',\n  className = ''\n}) => {\n  if (!user) return null;\n  \n  const { username, profileImg } = user;\n  const initials = getInitials(username || 'Unknown');\n  const sizeClass = styles[size] || styles.medium;\n  const containerClass = showName ? styles[`container${namePosition.charAt(0).toUpperCase() + namePosition.slice(1)}`] : '';\n  \n  // Format the image URL to point to the server\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // Handle different URL formats\n  let formattedImageUrl = null;\n  if (profileImg) {\n    // If the URL already starts with http, use it as is\n    if (profileImg.startsWith('http')) {\n      formattedImageUrl = profileImg;\n    } \n    // If the URL contains /uploads/, replace it with /files/\n    else if (profileImg.includes('/uploads/')) {\n      // Extract just the filename from the path\n      const filename = profileImg.split('/').pop();\n      formattedImageUrl = `${API_URL}/files/images/${filename}`;\n    }\n    // Otherwise, just append the URL to the API_URL\n    else {\n      formattedImageUrl = `${API_URL}${profileImg}`;\n    }\n  }\n\n  \n  return (\n    <div className={`${styles.userAvatarContainer} ${containerClass} ${className}`}>\n      <div className={`${styles.avatar} ${sizeClass}`}>\n        {formattedImageUrl ? (\n          <img \n            src={formattedImageUrl} \n            alt={`${username}'s avatar`} \n            className={styles.avatarImage}\n            onError={(e) => {\n              console.error(`Failed to load profile image for ${username}:`, e);\n              e.target.style.display = 'none';\n              e.target.nextSibling.style.display = 'flex';\n            }}\n          />\n        ) : null}\n        <div \n          className={styles.initialsPlaceholder}\n          style={{ display: formattedImageUrl ? 'none' : 'flex' }}\n        >\n          {initials}\n        </div>\n      </div>\n      \n      {showName && (\n        <div className={styles.username}>\n          {username || 'Unknown'}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Helper function to get initials from a name\nconst getInitials = (name) => {\n  if (!name) return '?';\n  \n  return name\n    .split(' ')\n    .map(part => part.charAt(0))\n    .join('')\n    .toUpperCase()\n    .substring(0, 2);\n};\n\nexport default UserAvatar;\n","import React, { useState, useEffect } from 'react';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport lobbyStyles from './styles/Lobby.module.css';\nimport BaseModal from './common/BaseModal';\nimport baseModalStyles from './common/BaseModal.module.css';\n\nconst DEFAULT_SETTINGS = {\n  useCustomName: false,\n  customName: '',\n  isPrivate: false,\n  password: '',\n  enableAceChoice: true,\n  enableSecondChance: true,\n};\n\nconst GameSettingsModal = ({ initialSettings = DEFAULT_SETTINGS, onSubmit, onClose }) => {\n  const [settings, setSettings] = useState({ ...DEFAULT_SETTINGS, ...initialSettings });\n  const [errors, setErrors] = useState({});\n\n  // Validation logic\n  const validateSettings = (currentSettings) => {\n    const newErrors = {};\n\n    // Validate Custom Name\n    if (currentSettings.useCustomName) {\n      const name = currentSettings.customName || '';\n      if (!name) {\n        newErrors.customName = 'Custom name is required.';\n      } else if (name.length < 4 || name.length > 26) {\n        newErrors.customName = 'Name must be 4-26 characters.';\n      } else if (!/^[a-zA-Z0-9_-]+$/.test(name)) {\n        newErrors.customName = 'Use letters, numbers, -, or _.';\n      }\n    }\n\n    // Validate Password\n    if (currentSettings.isPrivate) {\n      const pass = currentSettings.password || '';\n      if (!pass) {\n        newErrors.password = 'Password is required.';\n      } else if (pass.length < 3 || pass.length > 36) {\n        newErrors.password = 'Password must be 3-36 characters.';\n      }\n    }\n    return newErrors;\n  };\n\n  const handleChange = (key, value) => {\n    setSettings(prev => {\n      const updatedSettings = { ...prev, [key]: value };\n\n      // Clear customName and its error if useCustomName is turned off\n      if (key === 'useCustomName' && !value) {\n        updatedSettings.customName = '';\n        if (errors.customName) {\n          setErrors(currentErrors => {\n            const newErrors = { ...currentErrors };\n            delete newErrors.customName;\n            return newErrors;\n          });\n        }\n      }\n\n      // Clear password and its error if private is turned off\n      if (key === 'isPrivate' && !value) {\n        updatedSettings.password = '';\n        if (errors.password) {\n          setErrors(currentErrors => {\n            const newErrors = { ...currentErrors };\n            delete newErrors.password;\n            return newErrors;\n          });\n        }\n      }\n      return updatedSettings;\n    });\n\n    // Clear specific error when user starts typing/toggling again\n    if ((key === 'customName' || key === 'useCustomName') && errors.customName) {\n      setErrors(currentErrors => {\n        const newErrors = { ...currentErrors };\n        delete newErrors.customName;\n        return newErrors;\n      });\n    }\n    if ((key === 'password' || key === 'isPrivate') && errors.password) {\n      setErrors(currentErrors => {\n        const newErrors = { ...currentErrors };\n        delete newErrors.password;\n        return newErrors;\n      });\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const validationErrors = validateSettings(settings);\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n    } else {\n      setErrors({}); // Clear errors on successful submit\n      // Prepare the payload for submission\n      const payload = {\n        ...settings,\n        customName: settings.useCustomName ? settings.customName : null,\n      };\n      delete payload.useCustomName; // Remove the toggle state key\n\n      onSubmit(payload);\n    }\n  };\n\n  return (\n    <BaseModal\n      title=\"Game Options\"\n      onClose={onClose}\n      style={{ maxWidth: 600 }}\n      footer={\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className={`${lobbyStyles.actionButton} ${lobbyStyles.cancelButton || ''}`}\n            data-gamepad-focusable=\"true\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            form=\"gameSettingsForm\"\n            className={`${lobbyStyles.actionButton} ${lobbyStyles.createButton}`}\n            disabled={Object.keys(errors).length > 0}\n            data-gamepad-focusable=\"true\"\n          >\n            Create Game\n          </button>\n        </div>\n      }\n    >\n      <form id=\"gameSettingsForm\" onSubmit={handleSubmit}>\n        <div className={baseModalStyles.settingsContainer}>\n          {/* Custom Game Name Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Custom Game Name</h4>\n              <p>Set a custom name for your game lobby</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.useCustomName}\n                onChange={e => handleChange('useCustomName', e.target.checked)}\n              />\n              {settings.useCustomName && (\n                <input\n                  type=\"text\"\n                  value={settings.customName || ''}\n                  onChange={e => handleChange('customName', e.target.value)}\n                  className={`${baseModalStyles.textInput}${errors.customName ? ' ' + baseModalStyles.inputError : ''}`}\n                  placeholder=\"Game Name\"\n                  maxLength={26}\n                  autoFocus\n                  style={{ marginTop: 8 }}\n                  data-gamepad-focusable=\"true\"\n                />\n              )}\n              {errors.customName && <span className=\"errorMessage\">{errors.customName}</span>}\n            </div>\n          </div>\n\n          {/* Private Game Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Private Game</h4>\n              <p>Only players with the password can join</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.isPrivate}\n                onChange={e => handleChange('isPrivate', e.target.checked)}\n              />\n              {settings.isPrivate && (\n                <input\n                  type=\"text\"\n                  value={settings.password || ''}\n                  onChange={e => handleChange('password', e.target.value)}\n                  className={`${baseModalStyles.textInput}${errors.password ? ' ' + baseModalStyles.inputError : ''}`}\n                  placeholder=\"Password\"\n                  maxLength={36}\n                  autoFocus={settings.isPrivate && !settings.useCustomName}\n                  style={{ marginTop: 8 }}\n                  data-gamepad-focusable=\"true\"\n                />\n              )}\n              {errors.password && <span className=\"errorMessage\">{errors.password}</span>}\n            </div>\n          </div>\n\n          {/* Ace Choice Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Enable Ace Choice</h4>\n              <p>Allow players to choose high/low on Ace</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.enableAceChoice}\n                onChange={e => handleChange('enableAceChoice', e.target.checked)}\n              />\n            </div>\n          </div>\n\n          {/* Second Chance Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Enable Second Chance</h4>\n              <p>Allow players to ante up for a second chance</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.enableSecondChance}\n                onChange={e => handleChange('enableSecondChance', e.target.checked)}\n              />\n            </div>\n          </div>\n        </div>\n      </form>\n    </BaseModal>\n  );\n};\n\nexport default GameSettingsModal;\n","/**\n * Store Service for handling coin purchases and product offerings\n * Manages API calls for purchasing game currency and retrieving available products\n */\nclass StoreService {\n  constructor() {\n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    this.baseURL = `${this.API_URL}/purchases`;\n  }\n\n  /**\n   * Get the authorization header for API requests\n   * @returns {Object} Headers object with authorization\n   */\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': token ? `Bearer ${token}` : ''\n    };\n  }\n\n  /**\n   * Get product offerings by type\n   * @param {string} offeringType - Type of offering (e.g., 'coin')\n   * @returns {Promise<Array>} Array of product offerings\n   */\n  async getOfferingsByType(offeringType) {\n    try {\n      const url = `${this.baseURL}/offerings?offeringType=${encodeURIComponent(offeringType)}`;\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || `HTTP ${response.status}: Failed to fetch offerings`);\n      }\n\n      const data = await response.json();\n      return data.offerings || [];\n    } catch (error) {\n      console.error('[PURCHASE_SERVICE] Error fetching offerings:', error);\n      throw new Error(`Failed to fetch product offerings: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get all available product offerings\n   * @returns {Promise<Array>} Array of all product offerings\n   */\n  async getAllOfferings() {\n    try {\n      const response = await fetch(`${this.baseURL}/offerings`, {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || `HTTP ${response.status}: Failed to fetch offerings`);\n      }\n\n      const data = await response.json();\n      return data.offerings || [];\n    } catch (error) {\n      console.error('[PURCHASE_SERVICE] Error fetching all offerings:', error);\n      throw new Error(`Failed to fetch product offerings: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process a purchase\n   * @param {string} productId - ID of the product to purchase\n   * @returns {Promise<Object>} Purchase result\n   */\n  async processPurchase(productId) {\n    try {\n      if (!productId) {\n        throw new Error('Product ID is required');\n      }\n\n      const response = await fetch(`${this.baseURL}/process`, {\n        method: 'POST',\n        headers: this.getAuthHeaders(),\n        credentials: 'include',\n        body: JSON.stringify({ productId })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || `HTTP ${response.status}: Purchase failed`);\n      }\n\n      const result = await response.json();\n      \n      // Log successful purchase for debugging\n      console.log('[PURCHASE_SERVICE] Purchase completed:', {\n        productId,\n        coinsAdded: result.coinsAdded,\n        newBalance: result.newBalance\n      });\n\n      return result;\n    } catch (error) {\n      console.error('[PURCHASE_SERVICE] Error processing purchase:', error);\n      throw new Error(`Purchase failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get coin offerings specifically\n   * @returns {Promise<Array>} Array of coin product offerings\n   */\n  async getCoinOfferings() {\n    return this.getOfferingsByType('coin');\n  }\n}\n\n// Create a singleton instance\nconst storeService = new StoreService();\n\nexport default storeService;","import React, { useState, useEffect } from 'react';\nimport BaseModal from './common/BaseModal';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport styles from './styles/PlayerStatsModal.module.css';\nimport storeService from '../services/StoreService';\n\nconst StoreModal = ({ onClose }) => {\n  const [activeTab, setActiveTab] = useState('coins');\n  const [coinOfferings, setCoinOfferings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [purchasing, setPurchasing] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadCoinOfferings();\n  }, []);\n\n  const loadCoinOfferings = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const offerings = await storeService.getCoinOfferings();\n      setCoinOfferings(offerings);\n    } catch (err) {\n      console.error('Failed to load coin offerings:', err);\n      setError('Failed to load products. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePurchase = async (productId) => {\n    try {\n      setPurchasing(productId);\n      setError(null);\n      \n      const result = await storeService.processPurchase(productId);\n      \n      // Show success message or handle success\n      console.log('Purchase successful:', result);\n      \n      // Close modal on successful purchase\n      onClose();\n      \n    } catch (err) {\n      console.error('Purchase failed:', err);\n      setError(err.message || 'Purchase failed. Please try again.');\n    } finally {\n      setPurchasing(null);\n    }\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD'\n    }).format(price);\n  };\n\n  const formatCoins = (amount) => {\n    return new Intl.NumberFormat('en-US').format(amount);\n  };\n\n  if (loading) {\n    return (\n      <BaseModal title=\"Store\" onClose={onClose} style={{ maxWidth: 800, maxHeight: '80vh' }}>\n        <div style={{ textAlign: 'center', padding: '2rem', color: '#a0b9d6' }}>Loading products...</div>\n      </BaseModal>\n    );\n  }\n\n  return (\n    <BaseModal title=\"Store\" onClose={onClose} style={{ maxWidth: 800, maxHeight: '80vh' }}>\n      {/* Tab Navigation */}\n      <div className={styles.tabsContainer}>\n        <button\n          className={`${styles.tabButton} ${activeTab === 'coins' ? styles.activeTab : ''}`}\n          onClick={() => setActiveTab('coins')}\n          data-gamepad-focusable=\"true\"\n        >\n          Coin Packs\n        </button>\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div style={{\n          marginBottom: '1rem',\n          padding: '0.75rem',\n          backgroundColor: 'rgba(231, 76, 60, 0.1)',\n          border: '1px solid #e74c3c',\n          borderRadius: '8px',\n          color: '#ffb3b3'\n        }}>\n          {error}\n        </div>\n      )}\n\n      {/* Coin Packs Tab Content */}\n      {activeTab === 'coins' && (\n        <div>\n          <div className={baseModalStyles.sectionHeader}>Available Coin Packs</div>\n          \n          {coinOfferings.length === 0 ? (\n            <div style={{ textAlign: 'center', padding: '2rem', color: '#a0b9d6' }}>\n              No coin packs available at the moment.\n            </div>\n          ) : (\n            <div style={{ \n              display: 'grid', \n              gap: '1rem', \n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))' \n            }}>\n              {coinOfferings.map((offering) => (\n                <div\n                  key={offering.id}\n                  className={baseModalStyles.settingItem}\n                  style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    textAlign: 'center',\n                    padding: '1.5rem',\n                    background: 'rgba(255, 255, 255, 0.08)',\n                    borderRadius: '12px',\n                    minHeight: '280px'\n                  }}\n                >\n                  {/* Product Image */}\n                  <div style={{ \n                    display: 'flex', \n                    justifyContent: 'center', \n                    alignItems: 'center',\n                    height: '80px',\n                    marginBottom: '1rem' \n                  }}>\n                    {offering.imageUrl && (\n                      <img\n                        src={offering.imageUrl}\n                        alt={offering.name}\n                        style={{\n                          width: '64px',\n                          height: '64px',\n                          objectFit: 'contain'\n                        }}\n                        onError={(e) => {\n                          e.target.style.display = 'none';\n                        }}\n                      />\n                    )}\n                  </div>\n                  \n                  {/* Product Info */}\n                  <div style={{ \n                    flex: '1',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    textAlign: 'center',\n                    marginBottom: '1rem' \n                  }}>\n                    <h3 style={{\n                      fontSize: '1.25rem',\n                      fontWeight: 'bold',\n                      color: '#FFD700',\n                      margin: '0 0 0.5rem 0',\n                      textAlign: 'center'\n                    }}>\n                      {formatCoins(offering.coinAmount)} Coins\n                    </h3>\n                    <p style={{\n                      color: '#a0b9d6',\n                      fontSize: '0.875rem',\n                      margin: '0 0 0.75rem 0',\n                      textAlign: 'center',\n                      lineHeight: '1.4'\n                    }}>\n                      {offering.description}\n                    </p>\n                    <div style={{\n                      fontSize: '1.5rem',\n                      fontWeight: 'bold',\n                      color: '#bcdcff',\n                      textAlign: 'center'\n                    }}>\n                      {formatPrice(offering.priceUSD)}\n                    </div>\n                  </div>\n                  \n                  {/* Purchase Button */}\n                  <button\n                    onClick={() => handlePurchase(offering.id)}\n                    disabled={purchasing === offering.id}\n                    className={baseModalStyles.primaryButton}\n                    style={{\n                      width: '100%',\n                      opacity: purchasing === offering.id ? 0.6 : 1,\n                      cursor: purchasing === offering.id ? 'not-allowed' : 'pointer'\n                    }}\n                    data-gamepad-focusable=\"true\"\n                  >\n                    {purchasing === offering.id ? (\n                      <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                        <div className={styles.loadingSpinner} style={{\n                          marginRight: '0.5rem'\n                        }}></div>\n                        Processing...\n                      </span>\n                    ) : (\n                      'Purchase'\n                    )}\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </BaseModal>\n  );\n};\n\nexport default StoreModal;","import React from 'react';\n\nconst LockIcon = ({ className = '', width = '1em', height = '1em', ...props }) => (\n  <svg \n    xmlns=\"http://www.w3.org/2000/svg\" \n    viewBox=\"0 0 24 24\" \n    fill=\"none\" \n    stroke=\"currentColor\" \n    strokeWidth=\"2\" \n    strokeLinecap=\"round\" \n    strokeLinejoin=\"round\" \n    className={`feather feather-lock ${className}`} \n    width={width} \n    height={height}\n    {...props}\n  >\n    <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n    <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n  </svg>\n);\n\nexport default LockIcon;\n","import React from 'react';\nimport styles from './styles/Lobby.module.css'; // Use the new CSS module\nimport LockIcon from './icons/LockIcon'; // Import the new icon\n\nfunction GameCard({ game, onJoin, userId }) { \n  // Determine display name: Use custom name if available, otherwise fallback to ID\n  const gameDisplayName = game.settings?.customName || `Game ${game.id}`;\n\n  // Determine user's status in this game\n  const isUserDisconnected = game.disconnectedPlayers?.some(player => player.userId === userId);\n  const isUserInGame = game.allPlayers?.some(player => player.userId === userId && !player.disconnected);\n\n  // Determine button text and class\n  let buttonText = 'Join';\n  let buttonClass = styles.joinGameButton; // Base class from original\n  if (isUserDisconnected) {\n    buttonText = 'Reconnect';\n    buttonClass += ` ${styles.reconnectButton}`;\n  } else if (isUserInGame) {\n    buttonText = 'Continue';\n    buttonClass += ` ${styles.continueButton}`;\n  }\n\n  // Determine card container class\n  let cardClass = styles.gameListItem; // Use original outer class\n  if (isUserDisconnected) {\n    cardClass += ` ${styles.userDisconnectedGame}`;\n  } else if (isUserInGame) {\n    cardClass += ` ${styles.userInGame}`;\n  }\n\n  return (\n    <div className={cardClass}> {/* Use gameListItem + conditional */}\n      {/* Replicate original info structure */}\n      <div className={styles.gameListInfo}>\n        <div className={styles.gameListId}> {/* Div for ID/Name + Badges */}\n          {gameDisplayName}\n          {game.settings?.isPrivate && (\n            <span className={styles.privatePill} title=\"Private Game\">\n              <LockIcon width=\"0.9em\" height=\"0.9em\" style={{ marginRight: '4px', verticalAlign: 'middle' }} />\n              Private\n            </span>\n          )}\n          {isUserDisconnected && (\n            <span className={styles.disconnectedBadge} title=\"You're disconnected from this game\">⚠️ Reconnect</span>\n          )}\n          {isUserInGame && (\n            <span className={styles.inGameBadge} title=\"You're in this game\">You're In</span>\n          )}\n        </div>\n        <div className={styles.gameListPlayers}> {/* Div for Player Count */}\n          {game.playerCount} {game.playerCount === 1 ? 'player' : 'players'}\n        </div>\n      </div>\n      {/* Button as sibling to gameListInfo */}\n      <button \n        className={buttonClass} // Use joinGameButton + conditional\n        onClick={() => onJoin(game.id)}\n        disabled={!userId}\n        data-gamepad-focusable=\"true\"\n      >\n        {buttonText} \n      </button>\n    </div>\n  );\n}\n\nexport default GameCard;\n","import React from 'react';\n\n/**\n * Question mark icon component for rules button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst QuestionIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Material Design style question mark icon */}\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\" />\n      <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"17.01\" />\n    </svg>\n  );\n};\n\nexport default QuestionIcon;\n","import React from 'react';\nimport BaseModal from './common/BaseModal';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport { ICONS } from '../constants/UIConstants';\n\n/**\n * Game Rules Modal that displays the rules of the game\n * @param {Object} props - Component props\n * @param {function} props.onClose - Function to call when the modal is closed\n */\nconst GameRulesModal = ({ onClose }) => {\n  return (\n    <BaseModal\n      title=\"Game Rules\"\n      onClose={onClose}\n      style={{ maxWidth: 600 }}\n    >\n      <div \n        className={`${baseModalStyles.content} ${baseModalStyles.scrollableContent}`} \n        style={{ maxHeight: '60vh', padding: '0' }}\n        data-gamepad-scrollable=\"true\"\n        tabIndex=\"0\"\n      >\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Objective</div>\n          <div className={baseModalStyles.settingDescription}>\n            The goal is to bet on whether the third card will have a value that falls \"in between\" the first two cards.\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Card Values</div>\n          <div className={baseModalStyles.settingDescription}>\n            Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice).\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Game Flow</div>\n          <div className={baseModalStyles.settingDescription}>\n            <ol style={{ paddingLeft: 20, margin: 0 }}>\n              <li>Each player antes up to join the round.</li>\n              <li>The player to the right of the dealer goes first.</li>\n              <li>Two cards are dealt face up.</li>\n              <li>Player decides whether to bet or pass.</li>\n              <li>If a bet is placed, the third card is revealed.</li>\n              <li>Bets are settled.</li>\n              <li>Next player goes.</li>\n              <li>If the pot is empty, players ante up again to start a new round.</li>\n            </ol>\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Betting</div>\n          <div className={baseModalStyles.settingDescription}>\n            If you think the third card will fall between the first two cards, you can bet up to the pot amount.<br/>\n            If you win, you receive the amount of your bet from the pot.<br/>\n            If you lose, your bet is added to the pot.\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>POT Button</div>\n          <div className={baseModalStyles.settingDescription}>\n            The POT button allows you to bet the entire pot amount at once for maximum winnings.\n          </div>\n        </div>\n        <div style={{ marginBottom: 6 }}>\n          <div className={baseModalStyles.sectionHeader}>Special Rules</div>\n          <div className={baseModalStyles.settingDescription}>\n            <ul style={{ paddingLeft: 20, margin: 0 }}>\n              <li><strong>Ace Choice:</strong> If the first card is an Ace, you can choose to play it as low (1) or high (14).</li>\n              <li><strong>Second Chance:</strong> If the first two cards are the same, you can chose to ante again to see another hand.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default GameRulesModal;","import React, { useState } from 'react';\nimport IconButton from './IconButton';\nimport QuestionIcon from '../icons/QuestionIcon';\nimport GameRulesModal from '../GameRulesModal';\n\n/**\n * A standardized rules button component that opens the game rules modal\n * \n * @param {Object} props Component props\n * @param {string} props.title Custom tooltip text (optional)\n */\nconst RulesButton = ({ \n  title = \"View Game Rules\",\n  ...restProps \n}) => {\n  const [showRules, setShowRules] = useState(false);\n\n  const openRules = () => {\n    setShowRules(true);\n  };\n\n  const closeRules = () => {\n    setShowRules(false);\n  };\n\n  return (\n    <>\n      <IconButton\n        icon={<QuestionIcon color=\"white\" size={20} />}\n        title={title}\n        onClick={openRules}\n        variant=\"default\"\n        {...restProps}\n      />\n      \n      {showRules && <GameRulesModal onClose={closeRules} />}\n    </>\n  );\n};\n\nexport default RulesButton;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\nimport styles from './styles/Lobby.module.css';\nimport { useLobby } from '../contexts/LobbyContext.jsx';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGamepadNavigation } from '../hooks/useGamepadNavigation';\nimport { TextField, useMediaQuery, InputAdornment } from '@mui/material';\nimport AppHeader from './common/AppHeader';\nimport OnlinePlayerCount from './common/OnlinePlayerCount';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PreferencesButton from './common/PreferencesButton.jsx';\nimport PlayerStatsButton from './common/PlayerStatsButton.jsx';\nimport StoreButton from './StoreButton.jsx';\nimport UserAvatar from './UserAvatar.jsx';\nimport soundService from '../services/SoundService';\nimport GameSettingsModal from './GameSettingsModal.jsx';\nimport StoreModal from './StoreModal.jsx';\nimport GameCard from './GameCard'; // Import the new GameCard component\nimport RulesButton from './common/RulesButton';\n\nconst Lobby = () => {\n  const { gameList, loading: lobbyLoading, error: lobbyError } = useLobby(); // Assuming lobby context handles its own loading\n  const { user, logout, loading: authLoading, refreshUserData } = useAuth();\n  const { socket, isConnected, loading: socketLoading } = useSocket();\n  const { preferences } = usePreferences();\n  \n  // Initialize gamepad navigation\n  const { isGamepadConnected } = useGamepadNavigation(true);\n  const navigate = useNavigate(); // Get navigate function\n  const [searchQuery, setSearchQuery] = useState('');\n  const [error, setError] = useState(null); // Local error state for lobby actions\n\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n  \n  const userId = user?.username ? `user_${user.username}` : null;\n\n  // Modal state for custom game creation and store\n  const [showGameSettingsModal, setShowGameSettingsModal] = useState(false);\n  const [showStoreModal, setShowStoreModal] = useState(false);\n\n  // Refresh user data (including balance) on lobby mount/reconnect\n  useEffect(() => {\n    // Effect runs on mount and when isConnected changes.\n    // We just need to ensure refreshUserData is available from the context.\n    if (refreshUserData) {\n      refreshUserData();\n    }\n  }, [isConnected, refreshUserData]);\n\n  useEffect(() => {\n    if (!user) {\n      setError('Please log in to continue');\n      return;\n    }\n\n    if (!user.username || !user.id) {\n      console.error('[Lobby] Invalid user data received:', user);\n      setError('Invalid user data');\n      logout(); // Clear invalid session\n      return;\n    }\n\n    if (!isConnected) {\n      setError('Not connected to server. Attempting to reconnect...');\n    } else {\n      setError(null);\n    }\n  }, [user, logout, isConnected]);\n  \n  // Shared game creation logic\n  const createGameWithSettings = (settings) => {\n    if (!user?.id) {\n      setError('Please log in to create a game');\n      return;\n    }\n    if (!isConnected) {\n      setError('Not connected to server');\n      return;\n    }\n    setError(null);\n\n    const creationTimeout = setTimeout(() => {\n      setError('Game creation timed out. Please try again.');\n    }, 5000);\n\n    const handleGameCreated = (data) => {\n      clearTimeout(creationTimeout);\n      socket.off('gameCreated', handleGameCreated);\n      if (data?.game?.id) {\n        navigate(`/${data.game.id}`);\n      } else {\n        setError('Failed to create or join game. Invalid response.');\n      }\n    };\n\n    socket.on('gameCreated', handleGameCreated);\n    \n    if (settings) {\n      socket.emit('createGame', { settings });\n    } else {\n      socket.emit('createGame');\n    }\n  };\n\n  const handleCreateGame = () => createGameWithSettings();\n\n  // Handler for custom game creation\n  const handleCreateCustomGame = () => {\n    setShowGameSettingsModal(true);\n  };\n\n  // Handler for submitting custom settings modal\n  const handleSubmitCustomSettings = (settings) => {\n    setShowGameSettingsModal(false);\n    createGameWithSettings(settings);\n  };\n  \n  const handleJoinGame = (gameId) => {\n    if (!isConnected) {\n      setError('Not connected to server.');\n      return;\n    }\n    if (!user) {\n      setError('Please log in to join a game.');\n      return;\n    }\n\n    setError(null);\n    soundService.play('ui.click'); // Play join sound\n\n    navigate(`/${gameId}`);\n  };\n  \n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  const filteredGameList = useMemo(() => {\n    if (!gameList) return [];\n    \n    let filtered = gameList;\n    if (searchQuery.trim()) {\n      const query = searchQuery.trim().toLowerCase();\n      filtered = gameList.filter(game => \n        game.id.toLowerCase().includes(query)\n      );\n    }\n    \n    return filtered.sort((a, b) => {\n      const userInGameA = a.allPlayers?.some(player => player.userId === userId);\n      const userInGameB = b.allPlayers?.some(player => player.userId === userId);\n      \n      const userDisconnectedInA = a.disconnectedPlayers?.some(player => player.userId === userId);\n      const userDisconnectedInB = b.disconnectedPlayers?.some(player => player.userId === userId);\n      \n      if (userDisconnectedInA && !userDisconnectedInB) return -1;\n      if (!userDisconnectedInA && userDisconnectedInB) return 1;\n      if (userInGameA && !userInGameB) return -1;\n      if (!userInGameA && userInGameB) return 1;\n      return a.id.localeCompare(b.id); // Alphabetical by ID if tie\n    });\n  }, [gameList, searchQuery, userId]); // Dependency on userId ensures resorting if user changes\n  \n   return (\n     <div className={styles.lobbyContainer}>\n       <AppHeader />\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: '1.1em', marginBottom: '-0.6em' }}>\n        <OnlinePlayerCount />\n      </div>       \n       <div className={styles.formContainer}>\n         <div className={styles.formSection}>\n           <div className={styles.welcomeMessage}>\n             <div className={styles.welcomeHeader}>\n               {error ? (\n                 <div className={styles.error}>{error}</div>\n               ) : (\n                 <div className={styles.welcomeText}>\n                   <UserAvatar \n                     user={{ \n                       username: user?.username || 'Player', \n                       profileImg: preferences?.profileImg \n                     }} \n                     size=\"medium\" \n                     showName={true} \n                     namePosition=\"right\"\n                   />\n                 </div>\n               )}\n               <div className={styles.balanceDisplay}>\n                 Balance: <CurrencyAmount amount={Number(user?.balance) || 0} size=\"medium\" />\n               </div>\n               <div className={styles.headerButtons}>\n                 <button \n                   className={styles.logoutButton}\n                   onClick={logout}\n                   data-gamepad-focusable=\"true\"\n                 >\n                   <span className={styles.buttonText}>Logout</span>\n                 </button>\n                 <RulesButton data-gamepad-focusable=\"true\" />\n                 <PlayerStatsButton data-gamepad-focusable=\"true\" />\n                 <StoreButton onClick={() => setShowStoreModal(true)} data-gamepad-focusable=\"true\" />\n                 <PreferencesButton data-gamepad-focusable=\"true\" />\n               </div>\n             </div>\n           </div>\n           \n           <div className={styles.gradientDivider}></div>\n           \n           <div className={styles.buttonGroup}>\n             <button \n               className={`${styles.actionButton} ${styles.createButton}`}\n               onClick={handleCreateGame}\n               disabled={!user?.username}\n               data-gamepad-focusable=\"true\"\n             >\n               Create Quick Game\n             </button>\n             <button\n               className={`${styles.actionButton} ${styles.createButton}`}\n               style={{ marginTop: 8 }}\n               onClick={handleCreateCustomGame}\n               disabled={!user?.username}\n               data-gamepad-focusable=\"true\"\n             >\n               Create Custom Game\n             </button>\n           </div>\n           {showGameSettingsModal && (\n             <GameSettingsModal\n               onSubmit={handleSubmitCustomSettings}\n               onClose={() => setShowGameSettingsModal(false)}\n             />\n           )}\n           {showStoreModal && (\n             <StoreModal\n               onClose={() => {\n                 setShowStoreModal(false);\n                 // Refresh user data to update balance after purchase\n                 if (refreshUserData) {\n                   refreshUserData();\n                 }\n               }}\n             />\n           )}\n         </div>\n         \n         {error && (\n           <div className={styles.errorMessage}>\n             {error}\n           </div>\n         )}\n       </div>\n       \n       {/* Game List Section - Always shown */}\n       <div className={styles.gameListContainer}>\n         <h2 className={styles.gameListTitle}>Available Games</h2>\n         \n         {/* Search bar for filtering games */}\n         <div className={styles.searchContainer}>\n           <TextField\n             placeholder=\"Search games by ID\"\n             variant=\"outlined\"\n             fullWidth\n             value={searchQuery}\n             onChange={handleSearchChange}\n             size={isSmallMobile ? \"small\" : \"medium\"}\n             inputProps={{ \"data-gamepad-focusable\": \"true\" }}\n             InputProps={{\n               startAdornment: (\n                 <InputAdornment position=\"start\">\n                   <span className={styles.searchIcon}>🔍</span>\n                 </InputAdornment>\n               ),\n             }}\n           />\n         </div>\n         \n         {filteredGameList && filteredGameList.length > 0 ? (\n           <div className={styles.gameListWrapper}>\n             {filteredGameList.map(game => (\n               <GameCard \n                 key={game.id} \n                 game={game} \n                 onJoin={handleJoinGame} \n                 userId={userId} // Pass userId\n               />\n             ))}\n           </div>\n         ) : (\n           <div className={styles.emptyGameList}>\n             <div className={styles.emptyStateIcon}>🃏</div>\n             <p className={styles.emptyStateMessage}>\n               {searchQuery.trim() ? 'No matching games found' : 'No games in progress'}\n             </p>\n             <p className={styles.emptyStateHint}>\n               {searchQuery.trim() \n                 ? 'Try a different search or create a new game' \n                 : 'Create a new game to get started!'}\n             </p>\n           </div>\n         )}\n       </div>\n     </div>\n   );\n };\n\n export default Lobby;\n","import React, { createContext, useState, useContext, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\n// Create context\nconst GameContext = createContext();\n\n// Custom hook to use the game context\nexport const useGameContext = () => {\n  const context = useContext(GameContext);\n  if (context === undefined) {\n    throw new Error('useGameContext must be used within a GameProvider');\n  }\n  return context;\n};\n\nexport const GameProvider = ({ children, gameId, initialGameState = null }) => {\n  // Get socket from socket context\n  const { socket, error: socketError } = useSocket();\n  \n  // Get user from auth context\n  const { user } = useAuth();\n  \n  // Game-specific state - we only need to track the full gameState object and error\n  /** @type {[GameState|null, React.Dispatch<React.SetStateAction<GameState|null>>]} */\n  const [gameState, setGameState] = useState(initialGameState);\n  \n  // Keep track of previous players to detect joins/leaves\n  const prevPlayersRef = useRef({});\n  \n  // Keep track of previous active player to detect turn changes\n  const prevActivePlayerRef = useRef(null);\n  \n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Function to explicitly clear the provider's error state\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  // Initialize with socket error if any\n  useEffect(() => {\n    if (socketError) {\n      setError(socketError);\n    }\n  }, [socketError]);\n  // Set up game-specific event handlers\n  useEffect(() => {\n    if (!socket) return;\n\n    // Handle game reconnection\n    socket.on('gameReconnected', (data) => {\n      console.log(`[Game] Reconnected to game: ${data.gameId}`, data.game);\n      \n      // Update game state with the full state from the server\n      setGameState(data.game);\n      \n      // Log reconnection with user ID from AuthContext\n      console.log(`[Game] Successfully reconnected as user ID: ${user?.id}`);\n      \n      // Clear any errors\n      setError(null);\n\n      // CRITICAL: Force a refresh of the player's game state to ensure betting works\n      if (data.game && data.game.id) {\n        // Small delay to ensure the state is fully updated\n        setTimeout(() => {\n          console.log(`[Game] Requesting fresh game state after reconnection`);\n          socket.emit('getGameState', { gameId: data.game.id });\n        }, 500);\n      }\n    });\n    \n    // Handle receiving updated game state\n    socket.on('gameState', (data) => {\n      if (data && data.id) { \n        // Restore check to prevent setting identical state\n        if (JSON.stringify(gameState) !== JSON.stringify(data)) {\n          // Check if it's now the player's turn and play alert sound if needed\n          if (data.currentPlayerId && user?.id) {\n            const isMyTurn = data.currentPlayerId === user.id;\n            const wasPreviouslyMyTurn = prevActivePlayerRef.current === user.id;\n            \n            // Only play sound if it wasn't my turn before but now it is\n            if (isMyTurn && !wasPreviouslyMyTurn) {\n              soundService.play('ui.alert');\n            }\n            \n            // Update the previous active player reference\n            prevActivePlayerRef.current = data.currentPlayerId;\n          }\n          \n          setGameState(data);\n          clearError(); // Clear any previous context errors on successful state update\n        } \n      } else {\n      }\n    });\n    \n    // Game-specific error handling\n    socket.on('gameError', (message) => {\n      console.error('Game error:', message);\n      setError(message);\n    });\n    \n    // Clean up game-specific event listeners\n    return () => {\n      socket.off('gameReconnected');\n      socket.off('gameState');\n      socket.off('gameError');\n    };\n  }, [socket]);\n\n  // Game-specific actions\n  const placeBet = useCallback((amount) => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('placeBet', { bet: amount, gameId });\n    } catch (err) {\n      console.error('Error placing bet:', err);\n      setError('Failed to place bet. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const payAnte = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('payAnte', { gameId });\n    } catch (err) {\n      console.error('Error paying ante:', err);\n      setError('Failed to pay ante. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  const dealCards = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('dealCards', { gameId });\n    } catch (err) {\n      console.error('Error dealing cards:', err);\n      setError('Failed to deal cards. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const revealMiddleCard = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('revealMiddleCard', { gameId });\n    } catch (err) {\n      console.error('Error revealing middle card:', err);\n      setError('Failed to reveal middle card. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const nextRound = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('nextRound', { gameId });\n    } catch (err) {\n      console.error('Error moving to next round:', err);\n      setError('Failed to move to next round. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player ready function (for paying ante)\n  const playerReady = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      // Server is listening for 'ready' event, not 'playerReady'\n      socket.emit('ready');\n    } catch (err) {\n      console.error('Error setting player ready:', err);\n      setError('Failed to set player ready. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player unready function (withdraw ante)\n  const playerUnready = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('unready');\n    } catch (err) {\n      console.error('Error setting player unready:', err);\n      setError('Failed to set player unready. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  /**\n   * @typedef {Object} GameContextValue\n   * @property {GameState|null} gameState - The complete game state\n   * @property {string|null} error - Any error message \n   * @property {(amount: number) => void} placeBet - Function to place a bet\n   * @property {() => void} payAnte - Function to pay the ante\n   * @property {() => void} playerReady - Function to set player ready (pay ante)\n   * @property {() => void} playerUnready - Function to set player unready (withdraw ante)\n   * @property {() => void} dealCards - Function to deal cards\n   * @property {() => void} revealMiddleCard - Function to reveal the middle card\n   * @property {() => void} nextRound - Function to move to the next round\n   * @property {() => void} clearError - Function to clear any error\n   * @property {string|null} gameId - Current game ID\n   */\n\n  /** @type {GameContextValue} */\n  const value = {\n    // Game state - just provide the complete gameState object\n    gameState,\n    error,\n    gameId,\n    \n    // Game actions\n    placeBet,\n    payAnte,\n    playerReady,\n    playerUnready,\n    dealCards,\n    revealMiddleCard,\n    nextRound,\n    // Helper methods\n    clearError,\n  };\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\n// Named exports for specific pieces of state/actions\nexport const useGameState = () => {\n  const { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error } = useGameContext();\n  return { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error };\n};\n\nexport const useGameActions = () => {\n  const { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError } = useGameContext();\n  return { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError };\n};\n\nexport default GameContext;\n","/**\n * Game Constants - Defines fixed values used throughout the game\n * This is a shared constants file used by both server and client\n * Supports both ES modules (for Vite/client) and CommonJS (for Node.js/server)\n */\n\nconst GAME_CONSTANTS = {\n  // Game configuration\n  ANTE_AMOUNT: 1,  // Fixed ante amount - always $1\n  STARTING_BALANCE: 2000,  // Starting player balance\n  FULL_DECK_SIZE: 52,  // Number of cards in a full deck\n  RECONNECTION_TIMEOUT: 30000,  // Time window for player reconnection (30 seconds)\n  MAX_SEATS: 16, // Maximum number of seats/players allowed in a game\n  \n  // Timer durations (in milliseconds)\n  TIMERS: {\n    DEAL_FIRST_CARD_DELAY: 1000,    // Delay before dealing the first card (1 second)\n    DEAL_SECOND_CARD_DELAY: 1000,   // Delay before dealing the second card (1 second)\n    DEAL_THIRD_CARD_DELAY: 2000,    // Delay before revealing the third card (2 seconds)\n    DEALING_DURATION: 3000,         // Total duration of dealing phase (3 seconds)\n    BETTING_DURATION: 30000,        // Duration for betting phase (30 seconds)\n    DECISION_DURATION: 15000,       // Duration for ace and second chance decisions (15 seconds)\n    REVEALING_DURATION: 3000,       // Duration for revealing phase\n    RESULTS_DURATION: 5000,         // Duration to show results before moving to next round (5 seconds)\n    PLAYER_INACTIVITY_TIMEOUT: 30000//Timeout for inactive players in WAITING phase\n  }\n};\n\n// Dual module support - cleaner implementation\n// For ES modules (Vite/client)\nexport default GAME_CONSTANTS;\nexport const { TIMERS, ANTE_AMOUNT, STARTING_BALANCE, FULL_DECK_SIZE, RECONNECTION_TIMEOUT, MAX_SEATS } = GAME_CONSTANTS;\n\n// For CommonJS (Node.js/server)\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = GAME_CONSTANTS;\n}\n","import React from 'react';\n\n/**\n * Exit/door icon component for leave game button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ExitIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Material Design style exit/logout icon */}\n      <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" />\n      <polyline points=\"16 17 21 12 16 7\" />\n      <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" />\n    </svg>\n  );\n};\n\nexport default ExitIcon;\n","import React from 'react';\nimport IconButton from './IconButton';\nimport ExitIcon from '../icons/ExitIcon';\n\n/**\n * A standardized leave/exit button component\n * \n * @param {Object} props Component props\n * @param {function} props.onClick Handler for when the button is clicked\n * @param {string} props.title Custom tooltip text (optional)\n */\nconst LeaveButton = ({ \n  onClick, \n  title = \"Leave Game\",\n  ...restProps \n}) => {\n  return (\n    <IconButton\n      icon={<ExitIcon color=\"white\" size={20} />}\n      title={title}\n      onClick={onClick}\n      variant=\"danger\"\n      {...restProps}\n    />\n  );\n};\n\nexport default LeaveButton;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/GameHeader.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport GAME_CONSTANTS from '../../../shared/constants/GameConstants';\nconst { TIMERS } = GAME_CONSTANTS;\nimport { ICONS } from '../constants/UIConstants';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport GameSummaryModal from './GameSummaryModal.jsx';\nimport StoreModal from './StoreModal.jsx';\nimport RulesButton from './common/RulesButton';\nimport PreferencesButton from './common/PreferencesButton';\nimport StoreButton from './StoreButton';\nimport LeaveButton from './common/LeaveButton';\n\n// Phase display mapping with icons and friendly names\nconst phaseDisplayMap = {\n  waiting: { text: 'Waiting for Players', icon: '👥' },\n  dealing: { text: 'Dealing Cards', icon: ICONS.DEALER },\n  revealing: { text: 'Revealing Cards', icon: '🥁' },\n  results: { text: 'Round Results', icon: '🏆' }\n};\n\nconst GameHeader = ({ handleLeaveGame }) => {\n  const { gameState, gameId } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  \n  // Get the current user's balance from game state (real-time) or fallback to auth context\n  const currentUserId = socket?.auth?.userId;\n  const currentPlayer = currentUserId && gameState?.players ? gameState.players[currentUserId] : null;\n  const playerBalance = currentPlayer?.balance ?? user?.balance ?? 0;\n  const currentPhase = gameState?.phase || 'waiting';\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n  const [showStoreModal, setShowStoreModal] = useState(false);\n\n  // Timer effect for phases\n  useEffect(() => {\n    let timer;\n    \n    if (currentPhase === 'dealing') {\n      setTimeLeft(TIMERS.DEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'betting') {\n      setTimeLeft(TIMERS.BETTING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'revealing') {\n      setTimeLeft(TIMERS.REVEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'results') {\n      setTimeLeft(TIMERS.RESULTS_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else {\n      setTimeLeft(null);\n    }\n\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [currentPhase, gameState?.waitingForAceDecision]);\n  \n  // Get the phase display information\n  let phaseInfo = phaseDisplayMap[currentPhase] || { text: 'Unknown Phase', icon: '❓' };\n  \n  // Override phase info if waiting for Ace decision\n  if (gameState?.waitingForAceDecision && currentPhase === 'dealing') {\n    phaseInfo = { text: 'Choosing Ace Value', icon: ICONS.DEALER };\n  }\n  \n  // Check if current user is the current player (using userId instead of socket.id)\n  const isCurrentPlayersTurn = socket && socket.auth?.userId && gameState?.currentPlayerId === socket.auth.userId;\n  \n  // Special handling for betting phase\n  if (currentPhase === 'betting' && gameState?.currentPlayerId && gameState?.players) {\n    const currentPlayer = gameState.players[gameState.currentPlayerId];\n    \n    if (currentPlayer) {\n      if (isCurrentPlayersTurn) {\n        // It's YOUR turn to bet\n        phaseInfo = {\n          text: `Pass or Bet`,\n          icon: ICONS.COIN\n        };\n      } else {\n        // It's someone else's turn\n        phaseInfo = {\n          text: `${currentPlayer.name} is Betting`,\n          icon: ICONS.COIN\n        };\n      }\n    } else {\n      phaseInfo = { text: 'Betting Round', icon: ICONS.COIN };\n    }\n  }\n  \n  return (\n    <div className={styles.headerContainer}>\n      {/* Desktop layout - single row with 3 cells */}\n      <div className={styles.desktopLayout}>\n        {/* Left: Logo and game ID */}\n        <div className={styles.headerLeft}>\n          <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n          <p className={styles.gameIdText}>\n            <span \n              className={styles.gameIdLink} \n              onClick={() => setShowGameSummary(true)}\n              title=\"Click to view game summary\"\n              data-gamepad-focusable=\"true\"\n              tabIndex=\"0\"\n            >\n              Game #{gameId}\n            </span>\n          </p>\n        </div>\n        \n        {/* Middle: Phase indicator */}\n        <div className={styles.headerCenter}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right: Balance and buttons */}\n        <div className={styles.headerRight}>\n          <div className={styles.controlsStack}>\n            <div className={styles.balanceDisplay}>\n              Balance: <CurrencyAmount amount={Number(playerBalance)} size=\"small\" />\n            </div>\n            <div className={styles.controlsGroup}>\n              <PreferencesButton data-gamepad-focusable=\"true\" />\n              <StoreButton onClick={() => setShowStoreModal(true)} data-gamepad-focusable=\"true\" />\n              <RulesButton data-gamepad-focusable=\"true\" />\n              <LeaveButton onClick={handleLeaveGame} data-gamepad-focusable=\"true\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile layout - two rows */}\n      <div className={styles.mobileLayout}>\n        {/* Top row: Logo/ID, Balance/Buttons */}\n        <div className={styles.mobileTopRow}>\n          <div className={styles.headerLeft}>\n            <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n            <p className={styles.gameIdText}>\n              <span \n                className={styles.gameIdLink} \n                onClick={() => setShowGameSummary(true)}\n                title=\"Click to view game summary\"\n                data-gamepad-focusable=\"true\"\n                tabIndex=\"0\"\n              >\n                Game #{gameId}\n              </span>\n            </p>\n          </div>\n          \n          <div className={styles.mobileRight}>\n            <div className={styles.mobileControlsStack}>\n              <div className={styles.balanceDisplay}>\n                Balance: <CurrencyAmount amount={Number(playerBalance)} size=\"small\" />\n              </div>\n              <div className={styles.mobileActions}>\n                <PreferencesButton data-gamepad-focusable=\"true\" />\n                <StoreButton onClick={() => setShowStoreModal(true)} data-gamepad-focusable=\"true\" />\n                <RulesButton data-gamepad-focusable=\"true\" />\n                <LeaveButton onClick={handleLeaveGame} data-gamepad-focusable=\"true\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Bottom row: Phase indicator (full width) */}\n        <div className={styles.mobileBottomRow}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Game Summary Modal */}\n      {showGameSummary && (\n        <GameSummaryModal \n          onClose={() => setShowGameSummary(false)} \n          gameData={gameState}\n        />\n      )}\n      \n      {/* Store Modal */}\n      {showStoreModal && (\n        <StoreModal\n          onClose={() => setShowStoreModal(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from 'react';\n\n/**\n * Arrow icon component that can be rotated to point up or down\n * @param {Object} props - Component props\n * @param {string} props.direction - Direction of the arrow ('up' or 'down')\n * @param {string} props.color - Color of the arrow (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ArrowIcon = ({ direction = 'up', color = 'currentColor', size = 24 }) => {\n  // Determine rotation based on direction\n  const rotation = direction === 'down' ? 'rotate(180deg)' : 'rotate(0deg)';\n  \n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={{ transform: rotation, display: 'inline-block', transformOrigin: 'center' }}\n    >\n      {/* This is the shift/arrow up icon from Material Design */}\n      <path d=\"M7 11l5-5 5 5M7 17l5-5 5 5\" />\n    </svg>\n  );\n};\n\nexport default ArrowIcon;\n","import React from 'react';\nimport styles from './styles/CardDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst CardDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return <div className={styles.loading}>Loading game state...</div>;\n  }\n  \n  const { \n    firstCard,\n    secondCard,\n    thirdCard,\n    phase,\n    dealer\n  } = gameState;\n  \n  // Card state is managed by the game context\n  \n  const dealerName = dealer?.name;\n  const cardLabels = {\n    '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '10': '10',\n    'J': 'J', 'Q': 'Q', 'K': 'K', 'A': 'A'\n  };\n  \n  // Map for handling both string names and direct symbols\n  const suitSymbols = {\n    'hearts': '♥',\n    'diamonds': '♦',\n    'clubs': '♣',\n    'spades': '♠',\n    // Handle direct Unicode symbols as well\n    '♥': '♥',\n    '♦': '♦',\n    '♣': '♣',\n    '♠': '♠'\n  };\n  \n  // Helper to determine if a suit is red\n  const isRedSuit = (suit) => {\n    return suit === '♥' || suit === '♦' || suit === 'hearts' || suit === 'diamonds';\n  };\n  \n  const renderCard = (card, index) => {\n    if (!card) return (\n      <div key={`empty-${index}`} className={styles.card}>\n        <div className={styles.cardBack}></div>\n      </div>\n    );\n    \n    const isRed = isRedSuit(card.suit);\n    const isAce = card.value === 'A';\n    const isAceLow = card.isAceLow;\n    const isMiddleCard = index === 1; // Index 1 is the middle card position\n    \n    return (\n      <div key={`${card.value}-${card.suit}-${index}`} \n        className={`${styles.card} ${isRed ? styles.redCard : styles.blackCard} ${isAce ? styles.aceCard : ''}`}\n      >\n        {isAce && !isMiddleCard && (\n          <div className={`${styles.aceIndicator} ${isAceLow ? styles.aceLow : styles.aceHigh} ${isRed ? styles.redCard : styles.blackCard}`}>\n            {isAceLow ? (\n              <span className={styles.indicatorContent}>LOW <ArrowIcon direction=\"down\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            ) : (\n              <span className={styles.indicatorContent}>HIGH <ArrowIcon direction=\"up\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            )}\n          </div>\n        )}\n        <div className={styles.cardCorner}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n        <div className={styles.cardCenter}>\n          {suitSymbols[card.suit]}\n        </div>\n        <div className={`${styles.cardCorner} ${styles.bottomRight}`}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  // Function to handle card positioning \n  const renderCardLayout = () => {\n    // Create an array of 3 nulls to represent the card slots\n    let displayCards = [null, null, null];\n    \n    // Check if we have a valid game state with cards\n    if (!firstCard && !secondCard && !thirdCard) {\n      return displayCards.map((card, index) => renderCard(card, index));\n    }\n    \n    // Handle the individual card properties\n    if (firstCard) {\n      displayCards[0] = {...firstCard}; // Left position - use spread operator to create a copy\n    }\n    \n    if (secondCard) {\n      displayCards[2] = {...secondCard}; // Right position - use spread operator to create a copy\n    }\n    \n    if (thirdCard) {\n      displayCards[1] = {...thirdCard}; // Middle position - use spread operator to create a copy\n    }\n    \n    return displayCards.map((card, index) => renderCard(card, index));\n  };\n\n  return (\n    <div className={styles.cardDisplayContainer}>\n      <div className={`${styles.cardsRow} ${phase === 'dealing' ? styles.dealingPhase : ''} ${phase === 'revealing' ? styles.revealingPhase : ''}`}>\n        {renderCardLayout()}\n      </div>\n    </div>\n  );\n};\n\nexport default CardDisplay;\n","import React from 'react';\nimport styles from './styles/PotButton.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * PotButton - The most epic, baller button in the entire game\n * Features a shimmering gold border with a shiny silver background to make the gold currency pop\n * Includes multiple overlapping layers and effects for maximum visual impact\n * \n * @param {Object} props - Component props\n * @param {number} props.amount - The pot amount to display\n * @param {boolean} props.disabled - Whether the button is disabled\n * @param {function} props.onClick - Function to call when the button is clicked\n */\nconst PotButton = ({ amount, disabled, onClick, ...props }) => {\n  return (\n    <button\n      className={`${styles.potButton} ${disabled ? styles.disabled : ''}`}\n      onClick={onClick}\n      disabled={disabled}\n      aria-label={`Bet the pot: ${amount} chips`}\n      {...props}\n    >\n      {/* Layer 2: Gold border with texture */}\n      <div className={styles.shimmerBorder}></div>\n      \n      {/* Layer 4: Silver metallic background */}\n      <div className={styles.buttonBackground}></div>\n      \n      {/* Layer 5: Light reflection effects */}\n      <div className={styles.reflectionEffect}></div>\n      \n      {/* Layer 6-8: Button content with 3D transform */}\n      <div className={styles.buttonContent}>\n        <span className={styles.potText}>POT</span>\n        <span className={styles.potAmount}>\n          <CurrencyAmount amount={amount} background=\"pill\" />\n        </span>\n      </div>\n    </button>\n  );\n};\n\nexport default PotButton;\n","import React, { useState } from 'react';\nimport styles from './styles/BettingPanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PotButton from './PotButton.jsx';\n\nconst BettingPanel = () => {\n  // Get game state and actions from context\n  const { gameState, placeBet } = useGameContext();\n  const { socket } = useSocket();\n  // Initialize state first - before any conditional returns\n  const [customBet, setCustomBet] = useState('');\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    currentPlayerId, \n    pot: potAmount, \n    phase,\n    firstCard,\n    secondCard\n  } = gameState;\n  \n  // Only show in betting phase\n  if (phase !== 'betting') return null;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const myPlayer = socket && players && socket.auth?.userId ? players[socket.auth.userId] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  \n  const handleCustomBetChange = (e) => {\n    // Only allow numbers\n    const value = e.target.value.replace(/[^0-9]/g, '');\n    \n    // Don't allow bets greater than pot or player balance\n    const maxBet = Math.min(potAmount, playerBalance);\n    if (value && parseInt(value) > maxBet) {\n      setCustomBet(maxBet.toString());\n    } else {\n      setCustomBet(value);\n    }\n  };\n  \n  const handleCustomBetSubmit = () => {\n    if (customBet && !isNaN(customBet)) {\n      const betAmount = parseInt(customBet, 10);\n      // Verify bet is at least $1 and at most the pot/balance\n      if (betAmount >= 1 && betAmount <= Math.min(potAmount, playerBalance)) {\n        placeBet(betAmount);\n        setCustomBet('');\n      }\n    }\n  };\n  \n  // Helper to handle Enter key in the custom bet input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleCustomBetSubmit();\n    }\n  };\n  \n\n  \n  const renderBettingControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.betContainer}>\n        <p className={styles.betText}>Place your bet (Min: <CurrencyAmount amount={1} />, Max: <CurrencyAmount amount={Math.min(potAmount, playerBalance)} />)</p>\n        \n        {/* Extreme options row */}\n        <div className={styles.extremeOptionsRow}>\n          <button\n            className={`${styles.betButton} ${styles.extremeButton} ${styles.passButton}`}\n            onClick={() => placeBet(0)}\n            data-gamepad-focusable=\"true\"\n          >\n            PASS\n          </button>\n          \n          <PotButton \n            amount={potAmount}\n            onClick={() => placeBet(potAmount)}\n            disabled={potAmount > playerBalance}\n            data-gamepad-focusable=\"true\"\n          />\n        </div>\n        \n        {/* Standard bet options */}\n        <div className={styles.betButtons}>\n          {[1, 2, 5].map(amount => {\n            const maxBet = Math.min(potAmount, playerBalance);\n            const disabled = amount > maxBet;\n            return (\n              <button\n                key={amount}\n                className={`${styles.betButton} ${disabled ? styles.disabledButton : ''}`}\n                onClick={() => placeBet(amount)}\n                disabled={disabled}\n                data-gamepad-focusable=\"true\"\n              >\n                <CurrencyAmount amount={amount} />\n              </button>\n            );\n          })}\n          \n          {/* Custom bet input */}\n          <div className={styles.customBetContainer}>\n            <input\n              type=\"text\"\n              className={styles.customBetInput}\n              placeholder=\"Custom\"\n              value={customBet}\n              onChange={handleCustomBetChange}\n              onKeyPress={handleKeyPress}\n              data-gamepad-focusable=\"true\"\n            />\n            <button\n              className={styles.customBetButton}\n              onClick={handleCustomBetSubmit}\n              disabled={!customBet}\n              data-gamepad-focusable=\"true\"\n            >\n              Bet\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  \n\n  // Only render the panel for the current player\n  if (!isCurrentPlayer) return null;\n  \n  return (\n    <div className={styles.bettingPanel}>\n      {renderBettingControls()}\n    </div>\n  );\n};\n\nexport default BettingPanel;\n","import React, { useRef, useEffect, useState, useMemo } from 'react';\nimport styles from './styles/PlayerList.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport UserAvatar from './UserAvatar.jsx';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PlayerList = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  \n  if (!gameState || !gameState.players) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for game data...</p>\n      </div>\n    );\n  }\n  \n  const { players, currentPlayerId, dealerId, gameTransactions = [] } = gameState;\n  const currentUserId = socket?.auth?.userId;\n  \n  // Calculate player totals from game transactions (same logic as GameSummaryModal)\n  const playerTotals = useMemo(() => {\n    const totals = {};\n    const transactions = Array.isArray(gameTransactions) ? gameTransactions : [];\n    \n    // Group transactions by player ID and sum up amounts\n    transactions.forEach(tx => {\n      if (!tx.playerId) return;\n      \n      if (!totals[tx.playerId]) {\n        totals[tx.playerId] = 0;\n      }\n      \n      totals[tx.playerId] += tx.amount;\n    });\n    \n    return totals;\n  }, [gameTransactions]);\n  if (!players || Object.keys(players).length === 0) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for players to join...</p>\n      </div>\n    );\n  }\n\n  \n  return (\n    <div className={styles.playersContainer}>\n      <h3 className={styles.playersTitle}>Scoreboard</h3>\n      \n      <div className={styles.playersList}>\n        {/* Use gameState.seats to render players in seat order */}\n        {gameState.seats\n          .filter(playerId => playerId !== null && players[playerId])\n          .map(playerId => {\n            const player = players[playerId];\n            const isCurrentPlayer = playerId === currentPlayerId;\n            // Compare player.userId with currentUserId instead of comparing playerId with currentUserId\n            const isCurrentUser = player.userId === currentUserId;\n            const isDealer = playerId === dealerId; // Use playerId instead of player.id\n            const isDisconnected = player.disconnected === true;\n            \n            return (\n              <div \n                key={playerId} \n                className={`\n                  ${styles.playerItem}\n                  ${isCurrentPlayer ? styles.currentPlayer : ''}\n                  ${isCurrentUser ? styles.currentUser : ''}\n                `}\n              >\n              <div className={styles.playerInfo}>\n                <UserAvatar \n                  user={{ \n                    username: player.name, \n                    profileImg: player.profileImg \n                  }} \n                  size=\"small\" \n                  showName={false}\n                />\n                <span className={styles.playerName}>\n                  {player.name}\n                  <span className={styles.playerStatus}>\n                    {isDealer && ` ${ICONS.DEALER}`}\n                    {player.disconnected && <span className={styles.disconnectedIndicator} title=\"Player disconnected\">⚠️ Disconnected</span>}\n                  </span>\n                </span>\n              </div>\n              <div className={styles.playerBalanceContainer}>\n                <BalanceDisplay balance={playerTotals[playerId] || 0} />\n\n                <div \n                  className={`\n                    ${styles.readyIndicator} \n                    ${player.isSittingOut ? styles.sittingOut : (player.isReady ? styles.ready : styles.notReady)}\n                  `}\n                  title={player.isSittingOut ? 'Sitting Out' : (player.isReady ? 'Ready' : 'Not Ready')}\n                >\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst BalanceDisplay = ({ balance }) => {\n  const [prevBalance, setPrevBalance] = useState(balance);\n  const [animationClass, setAnimationClass] = useState('');\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (balance !== prevBalance) {\n      // Determine if balance increased or decreased\n      const isIncrease = balance > prevBalance;\n      setAnimationClass(isIncrease ? styles.balanceIncrease : styles.balanceDecrease);\n\n      // Clear previous timeout if it exists\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      // Remove animation class after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setAnimationClass('');\n      }, 1000); // Match animation duration\n\n      setPrevBalance(balance);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [balance]);\n\n  return (\n    <span className={`${styles.playerBalance} ${animationClass}`}>\n      <CurrencyAmount amount={balance} />\n    </span>\n  );\n};\n\nexport default PlayerList;\n","import React from 'react';\nimport styles from './styles/PotDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PotDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  const { pot, round = 1 } = gameState;\n  \n  return (\n    <div className={styles.potDisplayContainer}>\n      <div className={styles.potIconWrapper}>\n        <span className={styles.potIcon}>{ICONS.POT}</span>\n      </div>\n      <div className={styles.potInfo}>\n        <h3 className={styles.potLabel}>\n          POT <span className={styles.potCounter}>({round})</span>\n        </h3>\n        <span className={styles.potAmount}><CurrencyAmount amount={pot} size=\"medium\" /></span>\n      </div>\n    </div>\n  );\n};\n\nexport default PotDisplay;\n","import React from 'react';\nimport styles from './styles/DeckDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { ICONS } from '../constants/UIConstants';\n\nconst DeckDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  // Get the deck size and deck count from the game state\n  const { deckSize = 0, deckCount = 1 } = gameState;\n  \n  // Calculate the visual thickness of the deck based on remaining cards\n  const getThicknessClass = () => {\n    if (deckSize >= 40) return styles.deckThick;\n    if (deckSize >= 25) return styles.deckMedium;\n    if (deckSize >= 10) return styles.deckThin;\n    return styles.deckVeryThin;\n  };\n  \n  return (\n    <div className={styles.deckDisplayContainer}>\n      <div className={`${styles.deckVisual} ${getThicknessClass()}`}>\n        <div className={styles.deckIcon}>{ICONS.DECK}</div>\n      </div>\n      <div className={styles.deckInfo}>\n        <h3 className={styles.deckLabel}>\n          DECK <span className={styles.deckCounter}>({deckCount})</span>\n        </h3>\n        <span className={styles.deckCount}>{deckSize}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default DeckDisplay;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/AutoAnteToggle.module.css';\n\nconst AutoAnteToggle = () => {\n  const { preferences, toggleAutoAnte, loading } = usePreferences();\n  const { gameState, playerReady } = useGameContext();\n  const { socket } = useSocket();\n  \n  const handleToggle = async () => {\n    const newValue = !preferences.autoAnte;\n    const success = await toggleAutoAnte();\n    \n    // Only auto-ante if the player is not already anted\n    if (newValue && success && playerReady) {\n      // Check if player is already anted (using userId instead of socket.id)\n      let myPlayer = null;\n      if (socket && socket.auth?.userId && gameState?.players) {\n        // Find player by userId\n        const playerIds = Object.keys(gameState.players);\n        for (const id of playerIds) {\n          if (gameState.players[id].userId === socket.auth.userId) {\n            myPlayer = gameState.players[id];\n            break;\n          }\n        }\n      }\n      const isPlayerReady = myPlayer?.isReady;\n      \n      // Only call playerReady if the player is not already ready\n      if (!isPlayerReady) {\n        playerReady();\n      }\n    }\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.autoAnte}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n          data-gamepad-focusable=\"true\"\n        />\n        <span className={styles.toggleSlider}></span>\n        <span className={styles.toggleText}>\n          Auto-Ante\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default AutoAnteToggle;\n","import React from 'react';\nimport styles from './styles/AnteControls.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\nimport AutoAnteToggle from './AutoAnteToggle.jsx';\n\n\nconst AnteControls = () => {\n  // Get game state and actions from context\n  const { gameState, playerReady, playerUnready } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    anteAmount, \n    phase \n  } = gameState;\n  \n  // Only show in waiting phase\n  if (phase !== 'waiting') return null;\n  \n  // Find the player by user ID\n  let myPlayer = null;\n  if (socket && socket.auth?.userId && players) {\n    // Find player by userId\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === socket.auth.userId) {\n        myPlayer = players[id];\n        break;\n      }\n    }\n  } else if (user && players) {\n    // If we can't find by socket ID, try to find by user ID\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === user.id) {\n        myPlayer = players[id];\n        console.log(`[AnteControls] Found player by user ID instead of socket ID`);\n        break;\n      }\n    }\n  }\n  \n  // Get player balance and ready status\n  const playerBalance = Number(myPlayer?.balance || 0);\n  const isPlayerReady = myPlayer?.isReady;\n  \n  // Check if player has enough chips\n  const hasEnoughChips = playerBalance >= anteAmount;\n  \n  // Player state and readiness is managed by the game context\n  \n  return (\n    <div className={styles.anteControlsWrapper}>\n      <div className={styles.controlsContainer}>\n        {/* Main action button (Ante or Back Out) */}\n        <div className={styles.buttonContainerRow}>\n          {!isPlayerReady ? (\n            // Player is not ready - show Ante button and Sit Out button side by side\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.anteButton}\n                onClick={playerReady}\n                disabled={!hasEnoughChips}\n                aria-label=\"Ante up\"\n                data-gamepad-focusable=\"true\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.anteIcon}>{ICONS.CHECK}</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>ANTE</h3>\n                  <span className={styles.buttonAmount}><CurrencyAmount amount={anteAmount} /></span>\n                </div>\n              </button>\n\n              <button\n                className={`${styles.backOutButton} ${styles.sitOutHalfWidth}`}\n                onClick={() => {\n                  if (socket && gameState && user) {\n                    socket.emit('sitOut', {\n                      gameId: gameState.id,\n                      userId: socket.auth?.userId || user.id\n                    });\n                  }\n                }}\n                disabled={myPlayer?.isSittingOut} // Disable if sitting out\n                title={myPlayer?.isSittingOut ? \"You are currently sitting out\" : \"Sit out next round\"}\n                aria-label=\"Sit Out\"\n                data-gamepad-focusable=\"true\"\n              >\n                <div className={styles.shimmerBorder}></div>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>SIT OUT</h3>\n                </div>\n              </button>\n\n              {!hasEnoughChips && (\n                <p className={styles.notEnoughChipsText}>Not enough coins (<CurrencyAmount amount={anteAmount} /> required)</p>\n              )}\n            </div>\n          ) : (\n            // Player is ready - show Back Out button\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.backOutButton}\n                onClick={() => {\n                  if (typeof playerUnready === 'function') {\n                    playerUnready();\n                  } else {\n                    console.error('playerUnready is not a function');\n                  }\n                }}\n                aria-label=\"Back out\"\n                data-gamepad-focusable=\"true\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.backOutIcon}>✕</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>BACK OUT</h3>\n                </div>\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Auto-Ante toggle - always shown */}\n        <div className={styles.autoAnteContainer}>\n          <AutoAnteToggle />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnteControls;\n","import { useGameContext } from '../contexts/GameContext';\nimport styles from './styles/ResultsPanel.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Results panel component that displays the outcome of a hand during the results phase\n */\nconst ResultsPanel = () => {\n  const { gameState } = useGameContext();\n\n  // If there's no result, don't render anything\n  if (!gameState.result) return null;\n\n  const { result, players, resultCountdown } = gameState;\n  const playerName = players[result.playerId]?.name;\n\n  const renderWinResult = () => (\n    <>\n      <h2 className={`${styles.resultText} ${styles.winText}`}>\n        {playerName} WON!\n      </h2>\n      {result.winnings > 0 && (\n        <p className={styles.winningsText}>\n          Winnings: <CurrencyAmount amount={result.winnings / 2} size=\"medium\" />\n        </p>\n      )}\n    </>\n  );\n\n  const renderLossResult = () => (\n    <>\n      <h2 className={`${styles.resultText} ${styles.loseText}`}>\n        {playerName} LOST!\n      </h2>\n      {result.betAmount > 0 && (\n        <p className={styles.winningsText}>\n          Loss: <CurrencyAmount amount={result.betAmount} size=\"medium\" />\n        </p>\n      )}\n    </>\n  );\n\n  const renderTieResult = () => {\n    const penaltyAmount = result.betAmount * (result.isTripleAceTie ? 3 : 2);\n    \n    return (\n      <>\n        <div className={styles.penaltyWarning}>\n          <div className={styles.cautionTape}></div>\n        </div>\n        <h2 className={`${styles.resultText} ${styles.tieText}`}>\n          {playerName} {result.isTripleAceTie ? '3X' : '2X'} PENALTY!\n        </h2>\n        {result.betAmount > 0 && (\n          <p className={styles.winningsText}>\n            Penalty: <CurrencyAmount amount={penaltyAmount} size=\"medium\" />\n          </p>\n        )}\n      </>\n    );\n  };\n\n  const renderOutcome = () => {\n    switch (result.outcome) {\n      case 'win':\n        return renderWinResult();\n      case 'lose':\n        return renderLossResult();\n      case 'tie':\n        return renderTieResult();\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={styles.resultsPanel}>\n      {/* Card display section removed - cards are now visible in the game board */}\n\n      <div className={styles.resultContent}>\n        {renderOutcome()}\n        \n        {resultCountdown && (\n          <div className={styles.countdownContainer}>\n            <p className={styles.countdownText}>\n              Next hand in: {resultCountdown.countdownSeconds}s\n            </p>\n            <div className={styles.countdownProgress}>\n              <div \n                className={styles.countdownBar} \n                style={{ width: `${(resultCountdown.countdownSeconds / 5) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ResultsPanel;","import React, { useState, useEffect } from 'react';\nimport styles from './styles/AceChoicePanel.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst AceChoicePanel = () => {\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForAceDecision && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForAceDecision, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const handleAceChoice = (isAceLow) => {\n    socket.emit('chooseAceValue', { isAceLow });\n  };\n  \n  // Check if it's the current player's turn\n  const isCurrentPlayersTurn = socket?.auth?.userId === gameState.currentPlayerId;\n  const currentPlayerName = gameState.players[gameState.currentPlayerId]?.name || 'Current player';\n  \n  const renderAceChoiceControls = () => {\n    if (!isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.aceChoiceControls}>\n        <p className={styles.aceChoiceText}>\n          You've been dealt an Ace! Choose whether it should be high or low.\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.aceChoiceButtons}>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceHighButton}`}\n            onClick={() => handleAceChoice(false)}\n            data-gamepad-focusable=\"true\"\n          >\n            <span className={styles.buttonContent}>ACE HIGH <ArrowIcon direction=\"up\" color=\"white\" size={20} /></span>\n          </button>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceLowButton}`}\n            onClick={() => handleAceChoice(true)}\n            data-gamepad-focusable=\"true\"\n          >\n            <span className={styles.buttonContent}>ACE LOW <ArrowIcon direction=\"down\" color=\"white\" size={20} /></span>\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n        <p className={styles.waitingText}>\n          {currentPlayerName} is choosing whether their Ace is high or low...\n        </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.aceChoicePanel}>\n      {renderAceChoiceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default AceChoicePanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/SecondChancePanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst SecondChancePanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState(null); // 'ante' or 'pass'\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForSecondChance && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForSecondChance, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const { \n    players, \n    currentPlayerId, \n    anteAmount = 1\n  } = gameState;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const currentPlayer = players[currentPlayerId];\n  \n  const handleSecondChance = (anteAgain) => {\n    if (socket) {\n      setLoading(true);\n      setActionType(anteAgain ? 'ante' : 'pass');\n      socket.emit('secondChance', { anteAgain });\n    }\n  };\n  \n  const renderSecondChanceControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.secondChanceControls}>\n        <p className={styles.secondChanceText}>\n          Would you like to ante up again for a second chance?\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.secondChanceButtons}>\n          <button\n            className={`${styles.secondChanceButton} ${styles.anteAgainButton}`}\n            onClick={() => handleSecondChance(true)}\n            data-gamepad-focusable=\"true\"\n          >\n            {loading && actionType === 'ante' ? 'Processing...' : (\n              <>\n                Ante Up <span className={styles.currencyWrapper}>\n                  <CurrencyAmount amount={anteAmount} size=\"small\" />\n                </span>\n              </>\n            )}\n          </button>\n          <button\n            className={`${styles.secondChanceButton} ${styles.passButton}`}\n            onClick={() => handleSecondChance(false)}\n            data-gamepad-focusable=\"true\"\n          >\n            {loading && actionType === 'pass' ? 'Processing...' : 'Pass'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n          <p className={styles.waitingText}>\n            {currentPlayer?.name} is deciding whether to take a second chance.\n          </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.secondChancePanel}>\n      {renderSecondChanceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default SecondChancePanel;\n","import React, { useState } from 'react';\nimport styles from './styles/GameLog.module.css';\nimport { useGameContext } from '../contexts/GameContext';\n\nconst GameLog = () => {\n  const { gameState } = useGameContext();\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!gameState || !gameState.gameLog) return null;\n  \n  // Get the game log entries\n  const logEntries = gameState.gameLog || [];\n  \n  // Format timestamp to readable time\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n  \n  // Toggle expanded state\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  // Determine how many entries to show\n  const displayEntries = isExpanded ? logEntries : logEntries.slice(0, 5);\n  \n  return (\n    <div className={styles.gameLogContainer}>\n      <div className={styles.gameLogHeader} onClick={toggleExpanded}>\n        <h3>Game Log</h3>\n        <span className={styles.expandIcon}>{isExpanded ? '▲' : '▼'}</span>\n      </div>\n      \n      <div className={`${styles.gameLogEntries} ${isExpanded ? styles.expanded : ''}`}>\n        {displayEntries.length === 0 ? (\n          <div className={styles.emptyLog}>No game events yet</div>\n        ) : (\n          displayEntries.map((entry, index) => (\n            <div key={index} className={styles.logEntry}>\n              <span className={styles.logTime}>{formatTime(entry.timestamp)}</span>\n              <span className={styles.logMessage}>{entry.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {!isExpanded && logEntries.length > 5 && (\n        <div className={styles.showMoreButton} onClick={toggleExpanded}>\n          Show {logEntries.length - 5} more entries\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameLog;\n","import React, { useEffect } from 'react';\nimport styles from './styles/GameScreen.module.css';\nimport GameHeader from './GameHeader.jsx';\nimport CardDisplay from './CardDisplay.jsx';\nimport BettingPanel from './BettingPanel.jsx';\nimport PlayerList from './PlayerList.jsx';\nimport PotDisplay from './PotDisplay.jsx';\nimport DeckDisplay from './DeckDisplay.jsx';\nimport AnteControls from './AnteControls.jsx';\nimport ResultsPanel from './ResultsPanel.jsx';\nimport AceChoicePanel from './AceChoicePanel.jsx';\nimport SecondChancePanel from './SecondChancePanel.jsx';\nimport GameLog from './GameLog.jsx';\n\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useGamepadNavigation } from '../hooks/useGamepadNavigation';\n\nconst GameScreen = ({ onReturnToLobby }) => {\n  // Get state and actions from context\n  const { \n    gameState,\n    error,\n    clearError\n  } = useGameContext();\n  \n  // Initialize gamepad navigation\n  const { isGamepadConnected } = useGamepadNavigation(true);\n  \n  // Auto-clear errors after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 10000); // 10 seconds\n      \n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n  \n  // Handle returning to lobby\n  const handleLeaveGame = () => {\n    // Call the parent callback\n    if (onReturnToLobby) {\n      onReturnToLobby();\n    }\n  };\n  \n  // Get the socket instance for event emission\n  const { socket } = useSocket(); \n  // Get the authenticated user data from AuthContext\n  const { user } = useAuth(); \n  \n  // Safety check for null gameState or missing phase\n  if (!gameState) {\n    return (\n      <div className={styles.loadingContainer}>\n        <p>Loading game state...</p>\n      </div>\n    );\n  }\n  \n  // Make sure we have a valid phase\n  const phase = gameState.phase || 'waiting';\n\n  // Find the current player based on the authenticated user ID from AuthContext\n  // Assuming the user object from AuthContext has an 'id' property\n  const currentUserId = user?.id; // Use user.id (adjust if property name is different e.g., user.userId)\n  const currentPlayer = gameState.players && currentUserId ? gameState.players[currentUserId] : null;\n\n  // Handler for the 'I'm Back' button\n  const handleImBackClick = () => {\n    if (socket && gameState.id) {\n      socket.emit('imBack', { gameId: gameState.id });\n    } else {\n      console.error(\"Cannot emit 'imBack': socket or gameId missing.\");\n    }\n  };\n\n\n  return (\n    <div className={styles.gameContainer}>\n      <div className={styles.gameScreen}>\n        <GameHeader handleLeaveGame={handleLeaveGame} />\n        \n        {error && (\n          <div className={styles.errorContainer}>\n            <p className={styles.errorText}>{error}</p>\n          </div>\n        )}\n        \n        <div className={styles.gameInfoWrapper}>\n          <DeckDisplay />\n          <PotDisplay />\n        </div>\n        \n        {/* Always show the CardDisplay component */}\n        <CardDisplay />\n        \n        {/* Primary check: Is the current player sitting out? */}\n        {currentPlayer?.isSittingOut ? (\n          // If sitting out, always show the 'I'm Back!' button regardless of phase\n          <button onClick={handleImBackClick} className={styles.imBackButton} data-gamepad-focusable=\"true\"> \n            I'm Back!\n          </button>\n        ) : (\n          // If not sitting out, render controls based on the game phase\n          phase === 'waiting' ? (\n            /* Show ante controls during waiting phase */\n            <AnteControls />\n          ) : phase === 'results' ? (\n            /* Show the results panel during results phase */\n            <ResultsPanel />\n          ) : gameState.waitingForAceDecision ? (\n            /* Show the Ace choice panel when first card is an Ace */\n            <AceChoicePanel />\n          ) : gameState.waitingForSecondChance ? (\n            /* Show the Second Chance panel when matching cards are dealt */\n            <SecondChancePanel />\n          ) : phase === 'betting' ? (\n            /* Show the betting panel only during betting phase */\n            <BettingPanel />\n          ) : null\n        )}\n        \n        <div className={styles.gameBottomSection}>\n          <div className={styles.playerListContainer}>\n            <PlayerList />\n          </div>\n          <div className={styles.gameLogContainer}>\n            <GameLog />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameScreen;\n","import React from 'react';\nimport styles from './LoadingScreen.module.css';\n\n/**\n * A reusable loading screen component\n * @param {Object} props\n * @param {string} props.message - The message to display while loading\n */\nexport const LoadingScreen = ({ message = 'Loading...' }) => {\n  return (\n    <div className={styles.loadingScreen}>\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport styles from '../../styles/PasswordPromptModal.module.css';\n\nfunction PasswordPromptModal({ isOpen, onClose, onSubmit, gameId }) {\n  const [password, setPassword] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e) => {\n    e.preventDefault(); // Prevent default form submission\n    onSubmit(password);\n    setPassword(''); // Clear password after submit\n  };\n\n  const handleCancel = () => {\n    setPassword(''); // Clear password on cancel\n    onClose();\n  };\n\n  return (\n    <div className={styles.modalOverlay}>\n      <div className={styles.modalContent}>\n        <h2>Password Required</h2>\n        <p>Please enter the password for game <strong>{gameId || ''}</strong>:</p>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className={styles.passwordInput}\n            autoFocus\n            required\n            data-gamepad-focusable=\"true\"\n          />\n          <div className={styles.modalActions}>\n            <button type=\"button\" onClick={handleCancel} className={`${styles.modalButton} ${styles.cancelButton}`} data-gamepad-focusable=\"true\">\n              Cancel\n            </button>\n            <button type=\"submit\" className={`${styles.modalButton} ${styles.submitButton}`} data-gamepad-focusable=\"true\">\n              Join Game\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PasswordPromptModal;\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { GameProvider, useGameContext } from '../contexts/GameContext';\nimport GameScreen from './GameScreen';\nimport { useSocket } from '../contexts/SocketContext';\nimport { LoadingScreen } from './common/LoadingScreen';\nimport PasswordPromptModal from './common/PasswordPromptModal';\nimport soundService from '../services/SoundService';\n\nconst GameRoom = () => {\n  const { gameId } = useParams();\n  const navigate = useNavigate();\n  const { socket, isConnected } = useSocket();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\n  const hasInitiatedJoin = useRef(false); // Ref to track true initiation\n\n  const handleReturnToLobby = useCallback(() => {\n    if (socket && isConnected && gameId) {\n      soundService.play('ui.leave'); \n      socket.emit('leaveGame', { gameId }); \n      navigate('/');\n    }\n  }, [socket, isConnected, gameId, navigate]);\n\n  const handlePasswordSubmit = useCallback((password) => {\n    setIsPasswordModalOpen(false);\n    if (socket && gameId && password) {\n      setError(null); \n      socket.emit('joinGame', { gameId, password });\n      setLoading(true);\n    }\n  }, [socket, gameId]);\n\n  const handlePasswordCancel = useCallback(() => {\n    setIsPasswordModalOpen(false);\n    navigate('/');\n  }, [navigate]);\n\n  useEffect(() => {\n    setError(null);          \n    setIsPasswordModalOpen(false); \n    setLoading(true);        \n  }, [gameId]);\n\n  useEffect(() => {\n    if (!socket) {\n      return; \n    }\n\n    const onGameJoined = (data) => {\n      if (data && data.game && data.game.id === gameId) {\n        soundService.play('ui.join');\n        setLoading(false);\n        setError(null);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    const onError = (errorData) => {\n      const message = errorData.message || 'An unknown error occurred';\n\n      if (message === 'Password required') {\n        console.error(errorData);\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n        setError(null);\n      } else if (message === 'Invalid password') {\n        console.error(errorData);\n        setError('Invalid password.');\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n      } else if (message === 'Game not found') {\n        navigate('/');\n      } else if (message === 'Game is full') {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n        setTimeout(() => navigate('/'), 3000);\n      } else {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    socket.on('gameJoined', onGameJoined);\n    socket.on('error', onError);\n\n    return () => {\n      socket.off('gameJoined', onGameJoined);\n      socket.off('error', onError);\n    };\n  }, [socket, gameId, navigate]); \n\n  useEffect(() => {\n    // Use ref to prevent double emission due to StrictMode or rapid state changes\n    if (socket && gameId && !hasInitiatedJoin.current) {\n      hasInitiatedJoin.current = true; // Mark as initiated *immediately*\n      setLoading(true); \n      setError(null); \n      setIsPasswordModalOpen(false); \n      socket.emit('joinGame', { gameId });\n    } else {\n    }\n    // Dependencies remain minimal: only run when socket or gameId fundamentally change\n  }, [socket, gameId]); \n\n  const GameRoomContent = () => {\n    const { gameState } = useGameContext(); \n\n    return (\n      <>\n        <PasswordPromptModal \n          isOpen={isPasswordModalOpen}\n          onClose={handlePasswordCancel}\n          onSubmit={handlePasswordSubmit}\n          gameId={gameId} \n        />\n\n        {loading && <LoadingScreen message={`Joining game ${gameId}...`} />} \n        \n        {error && !loading && !isPasswordModalOpen && (\n          <div className=\"error-container\" style={{ padding: '20px', color: 'red', textAlign: 'center' }}>\n            <h2>An error occurred</h2>\n            <p>{error}</p>\n        {/* Suggest refreshing the page instead of navigating back */}\n        <button onClick={() => window.location.reload()}>Refresh Page</button>\n          </div>\n        )}\n        \n        {!loading && !error && gameState && \n          <GameScreen onReturnToLobby={handleReturnToLobby} />\n        }\n      </>\n    );\n  };\n\n  return (\n    <GameProvider gameId={gameId}>\n      <GameRoomContent /> \n    </GameProvider>\n  );\n};\n\nexport default GameRoom;\n","import { createBrowserRouter, Navigate } from 'react-router-dom';\nimport AuthPage from './components/auth/AuthPage';\nimport Lobby from './components/Lobby';\nimport GameRoom from './components/GameRoom';\nimport { LoadingScreen } from './components/common/LoadingScreen';\nimport { useAuth } from './contexts/AuthContext';\nimport { LobbyProvider } from './contexts/LobbyContext';\n\n// Auth protection wrapper component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingScreen message=\"Checking authentication...\" />;\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n  \n  return children;\n};\n\n// Define the router configuration\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: (\n      <ProtectedRoute>\n        <LobbyProvider>\n          <Lobby />\n        </LobbyProvider>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '/auth',\n    element: <AuthPage />,\n  },\n  {\n    path: '/:gameId',\n    element: <ProtectedRoute><GameRoom /></ProtectedRoute>,\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"/\" replace />,\n  },\n]);\n","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport soundService from './services/SoundService';\nimport { router } from './router';\nimport './styles/global.css';\n\nfunction App() {\n  // Initialize Sound Service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <AuthProvider>\n      <SocketProvider>\n        <PreferencesProvider>\n          <App />\n        </PreferencesProvider>\n      </SocketProvider>\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"names":["m","require$$0","createRoot","hydrateRoot","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","i","length","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","oncanplaythrough","e","_setupCodecs","audioTest","err","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","split","checkSafari","indexOf","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","document","removeEventListener","_emit","addEventListener","_obtainHtml5Audio","pop","testPlay","play","Promise","then","catch","console","warn","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","handleSuspension","_resumeAfterSuspend","Howl","o","src","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_xhr","method","xhr","headers","withCredentials","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","url","str","exec","toLowerCase","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","apply","fade","from","to","len","min","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","call","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","test","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","_endListener","code","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","XMLHttpRequest","open","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","type","createPanner","soundService","constructor","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","API_URL","import","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","join","leave","alert","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","body","maxTouchPoints","AuthForm","onSubmit","mode","username","setUsername","useState","password","setPassword","setError","useMediaQuery","isSmallMobile","Paper","className","styles","elevation","children","jsx","Typography","variant","component","gutterBottom","sx","color","fontWeight","jsxRuntimeExports","Alert","severity","mb","backgroundColor","jsxs","async","preventDefault","message","TextField","label","fullWidth","margin","value","onChange","target","required","size","inputProps","minLength","borderColor","fontSize","padding","marginBottom","Button","mt","background","textTransform","letterSpacing","boxShadow","transform","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","Blob","toString","withNativeArrayBuffer","ArrayBuffer","isView","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","content","result","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","decode","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","bytes","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","packet","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","Emitter","mixin","_callbacks","removeListener","removeAllListeners","cb","callbacks","emit","emitReserved","listeners","hasListeners","nextTick","resolve","setTimeoutFn","globalThisShim","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","randomString","random","TransportError","Error","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","doOpen","doClose","onClose","packets","write","onOpen","onData","onPacket","details","onPause","createUri","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","hasCORS","empty","BaseXHR","isSSL","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","extraHeaders","setDisableHeaderCheck","cookieJar","addCookies","requestTimeout","onreadystatechange","parseCookies","getResponseHeader","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","unloadHandler","attachEvent","hasXHR2","newRequest","concat","isReactNative","product","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","b","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","_hasPingExpired","hasExpired","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect_error","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queueSeq","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","factor","jitter","attempts","rand","deviation","floor","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","parsed","loc","href","sameNamespace","forceNew","multiplex","SocketContext","createContext","useSocket","useContext","SocketProvider","token","useAuth","setSocket","setIsConnected","useEffect","newSocket","userData","userId","socketEvents","Provider","ICONS","WelcomePopup","balance","onClick","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","log","updatedUser","fetchUserData","authToken","fetch","Authorization","ok","json","currentToken","localStorage","getItem","removeItem","initializeAuth","login","logout","useCallback","refreshUserData","newToken","initialUserData","setItem","completeUserData","handleCloseWelcomePopup","AppHeader","AuthPage","setMode","navigate","useNavigate","Box","endpoint","toUpperCase","requestBody","credentials","hasUser","hasUsername","hasId","hasToken","textAlign","LobbyContext","LobbyProvider","gameList","setGameList","handleGameList","games","handleError","contextValue","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","loadPreferences","React","finalPreferences","updatePreference","prev","formattedData","toggleAutoAnte","newValue","toggleMute","uploadTwoSecondPotGif","file","fileName","fileSize","fileType","formData","FormData","append","text","statusText","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","useGamepadNavigation","isEnabled","focusedElement","setFocusedElement","navigableElements","setNavigableElements","isGamepadConnected","setIsGamepadConnected","showFocusIndicator","setShowFocusIndicator","lastNavigationTime","useRef","buttonStates","registerNavigableElements","visibleElements","querySelectorAll","element","rect","getBoundingClientRect","width","height","closest","parentElement","parentRect","modals","sortedModals","topmostModal","sort","a","aZIndex","getComputedStyle","zIndex","contains","prevElements","every","el","navigateDirection","direction","current","currentIndex","findIndex","firstElement","focus","currentElement","getAttribute","scrollAmount","isAtTop","scrollTop","isAtBottom","scrollHeight","clientHeight","nextElement","currentRect","container","currentCenterX","left","candidates","bottom","top","sortedCandidates","candidate","horizontalDistance","verticalDistance","horizontalDiff","verticalDiff","allOtherElements","targetY","innerHeight","best","currentCenterY","rowTolerance","sameRowElements","candidateCenterY","currentRowIndex","activateElement","click","handleKeyDown","animationFrame","checkGamepads","gamepads","getGamepads","gamepad","prevStates","upPressed","buttons","pressed","downPressed","leftPressed","rightPressed","aPressed","up","down","right","leftStickX","axes","leftStickY","deadzone","stickMoved","requestAnimationFrame","cancelAnimationFrame","handleMouseMove","classList","remove","observer","MutationObserver","observe","childList","subtree","attributes","attributeFilter","OnlinePlayerCount","setCount","handler","CoinIcon","coinIcon","CurrencyAmount","amount","customClass","containerClasses","currencyAmount","darkBackground","pillBackground","Boolean","GearIcon","props","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","BaseModal","title","footer","overlay","modal","stopPropagation","closeButton","ToggleSwitch","isChecked","checked","FileUpload","onUpload","currentFileUrl","acceptedFileTypes","previewType","isUploading","setIsUploading","fileInputRef","ref","files","accept","alt","controls","handleButtonClick","disabled","PreferencesModal","style","maxWidth","maxHeight","baseModalStyles","loadingMessage","settingsContainer","sectionHeader","settingItem","settingDescription","position","borderRadius","border","marginTop","IconButton","icon","compact","restProps","iconButton","PreferencesButton","isPreferencesOpen","setIsPreferencesOpen","Fragment","openPreferences","isOpen","closePreferences","BarChartIcon","x1","y1","x2","y2","DownloadIcon","useGameContext","require","gameState","TransactionDownloadButton","propGameState","gameData","gameTransactions","gameId","downloadTransactionsCSV","transactions","csvContent","sortedTransactions","tx","timestamp","toLocaleString","playerName","player","escapedName","transactionType","reasonParts","blob","URL","createObjectURL","link","createElement","setAttribute","visibility","appendChild","removeChild","GameStats","players","playerNames","entries","playerId","gameStats","useMemo","formatNumber","playerTransactions","rounds","decks","deckCount","totalAnteAmount","sum","totalBetAmount","bets","biggestBet","biggestPot","potAmount","penalties","totalPenaltyAmount","playerBetCounts","mostAggressivePlayerId","mostBets","playerBetTotals","highestAvgBetPlayerId","highestAvgBet","avg","playerWins","mostWinningPlayerId","mostWins","wins","playerPenalties","mostPenaltiesPlayerId","mostPenalties","playerProfits","txs","biggestWinnerId","biggestWin","biggestLoserId","biggestLoss","profit","suffix","stat","formatStatValue","toFixed","GameSummaryModal","showPayoutsTab","settings","isPrivate","playerTotals","totals","settleUpPayments","player1Id","player1Total","player2Id","player2Total","fromName","toName","payments","losers","_","winners","winner","loser","paymentAmount","activeTab","setActiveTab","currentTarget","payment","PlayerStatsModal","historyData","setHistoryData","pagination","currentPage","setCurrentPage","showGameSummary","setShowGameSummary","selectedGameData","setSelectedGameData","lifetimeStats","setLifetimeStats","statsLoading","setStatsLoading","statsError","setStatsError","fetchGameHistory","stats","fetchLifetimeStats","formatDate","dateString","date","Intl","DateTimeFormat","year","month","day","hour","minute","getRoundCount","game","roundCount","tabIndex","selectedGame","find","handleGameClick","role","totalPlayerCount","endedAt","handlePreviousPage","handleNextPage","PlayerStatsButton","isStatsOpen","setIsStatsOpen","openStats","closeStats","StoreIcon","StoreButton","UserAvatar","showName","namePosition","initials","getInitials","sizeClass","medium","containerClass","formattedImageUrl","userAvatarContainer","avatar","avatarImage","display","nextSibling","initialsPlaceholder","part","DEFAULT_SETTINGS","useCustomName","customName","enableAceChoice","enableSecondChance","GameSettingsModal","initialSettings","setSettings","errors","setErrors","handleChange","updatedSettings","currentErrors","newErrors","gap","lobbyStyles","actionButton","cancelButton","form","createButton","validationErrors","currentSettings","pass","validateSettings","settingControls","textInput","inputError","maxLength","autoFocus","storeService","baseURL","getAuthHeaders","getOfferingsByType","offeringType","errorData","offerings","getAllOfferings","processPurchase","productId","coinsAdded","newBalance","getCoinOfferings","StoreModal","coinOfferings","setCoinOfferings","purchasing","setPurchasing","loadCoinOfferings","gridTemplateColumns","offering","flexDirection","alignItems","justifyContent","minHeight","imageUrl","objectFit","flex","formatCoins","coinAmount","NumberFormat","lineHeight","formatPrice","price","priceUSD","currency","handlePurchase","primaryButton","opacity","cursor","marginRight","LockIcon","rx","ry","GameCard","onJoin","gameDisplayName","isUserDisconnected","disconnectedPlayers","isUserInGame","allPlayers","buttonText","buttonClass","joinGameButton","reconnectButton","continueButton","cardClass","gameListItem","userDisconnectedGame","userInGame","gameListInfo","gameListId","privatePill","verticalAlign","disconnectedBadge","inGameBadge","gameListPlayers","playerCount","QuestionIcon","cx","cy","r","GameRulesModal","scrollableContent","paddingLeft","RulesButton","showRules","setShowRules","openRules","closeRules","Lobby","lobbyLoading","lobbyError","authLoading","socketLoading","searchQuery","setSearchQuery","showGameSettingsModal","setShowGameSettingsModal","showStoreModal","setShowStoreModal","createGameWithSettings","creationTimeout","handleGameCreated","handleJoinGame","filteredGameList","filtered","trim","userInGameA","userInGameB","userDisconnectedInA","userDisconnectedInB","localeCompare","lobbyContainer","formContainer","formSection","welcomeMessage","welcomeHeader","welcomeText","balanceDisplay","headerButtons","logoutButton","gradientDivider","buttonGroup","handleCreateGame","handleCreateCustomGame","errorMessage","gameListContainer","gameListTitle","searchContainer","InputProps","startAdornment","InputAdornment","searchIcon","gameListWrapper","emptyGameList","emptyStateIcon","emptyStateMessage","emptyStateHint","GameContext","undefined","GameProvider","initialGameState","socketError","setGameState","prevActivePlayerRef","clearError","currentPlayerId","isMyTurn","wasPreviouslyMyTurn","placeBet","bet","payAnte","dealCards","revealMiddleCard","nextRound","playerReady","playerUnready","GAME_CONSTANTS","ANTE_AMOUNT","STARTING_BALANCE","FULL_DECK_SIZE","RECONNECTION_TIMEOUT","MAX_SEATS","TIMERS","DEAL_FIRST_CARD_DELAY","DEAL_SECOND_CARD_DELAY","DEAL_THIRD_CARD_DELAY","DEALING_DURATION","BETTING_DURATION","DECISION_DURATION","REVEALING_DURATION","RESULTS_DURATION","PLAYER_INACTIVITY_TIMEOUT","module","ExitIcon","points","LeaveButton","phaseDisplayMap","waiting","dealing","revealing","results","GameHeader","handleLeaveGame","currentUserId","currentPlayer","playerBalance","currentPhase","phase","timeLeft","setTimeLeft","waitingForAceDecision","phaseInfo","isCurrentPlayersTurn","headerContainer","desktopLayout","headerLeft","gameTitle","liveTag","gameIdText","gameIdLink","headerCenter","gamePhase","phaseBettingYourTurn","phaseBettingWaiting","phaseIcon","phaseText","timerBar","timerProgress","headerRight","controlsStack","controlsGroup","mobileLayout","mobileTopRow","mobileRight","mobileControlsStack","mobileActions","mobileBottomRow","ArrowIcon","rotation","transformOrigin","CardDisplay","firstCard","secondCard","thirdCard","dealer","cardLabels","J","Q","K","A","suitSymbols","hearts","diamonds","clubs","spades","renderCard","card","cardBack","isRed","suit","isAce","isAceLow","isMiddleCard","redCard","blackCard","aceCard","aceIndicator","aceLow","aceHigh","indicatorContent","cardCorner","cardValue","cardSuit","cardCenter","bottomRight","cardDisplayContainer","cardsRow","dealingPhase","revealingPhase","renderCardLayout","displayCards","PotButton","BettingPanel","customBet","setCustomBet","pot","isCurrentPlayer","myPlayer","handleCustomBetChange","maxBet","handleCustomBetSubmit","betAmount","handleKeyPress","renderBettingControls","onKeyPress","PlayerList","dealerId","seats","isCurrentUser","isDealer","BalanceDisplay","isSittingOut","isReady","prevBalance","setPrevBalance","animationClass","setAnimationClass","timeoutRef","PotDisplay","POT","DeckDisplay","deckSize","AutoAnteToggle","playerIds","AnteControls","anteAmount","isPlayerReady","hasEnoughChips","ResultsPanel","resultCountdown","resultsPanel","resultContent","renderOutcome","outcome","resultText","winText","winnings","winningsText","loseText","renderTieResult","penaltyAmount","isTripleAceTie","penaltyWarning","cautionTape","tieText","countdownContainer","countdownText","countdownSeconds","countdownProgress","countdownBar","AceChoicePanel","countdown","setCountdown","prevCount","handleAceChoice","currentPlayerName","renderAceChoiceControls","SecondChancePanel","actionType","setActionType","waitingForSecondChance","handleSecondChance","anteAgain","renderSecondChanceControls","GameLog","isExpanded","setIsExpanded","gameLog","logEntries","toggleExpanded","displayEntries","entry","formatTime","toLocaleTimeString","second","GameScreen","onReturnToLobby","loadingContainer","gameContainer","gameScreen","errorContainer","errorText","gameInfoWrapper","handleImBackClick","imBackButton","gameBottomSection","playerListContainer","gameLogContainer","LoadingScreen","PasswordPromptModal","handleCancel","GameRoom","useParams","isPasswordModalOpen","setIsPasswordModalOpen","hasInitiatedJoin","handleReturnToLobby","handlePasswordSubmit","handlePasswordCancel","onGameJoined","GameRoomContent","reload","ProtectedRoute","Navigate","router","createBrowserRouter","App","RouterProvider","ReactDOM","getElementById","render","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}