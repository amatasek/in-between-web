{"version":3,"file":"GameRoom-C3cJ7RCP.js","sources":["../../src/constants.js","../../src/contexts/GameContext.jsx","../../src/components/icons/ExitIcon.jsx","../../src/components/common/LeaveButton.jsx","../../src/components/GameHeader.jsx","../../src/components/icons/ArrowIcon.jsx","../../src/components/CardDisplay.jsx","../../src/components/PotButton.jsx","../../src/components/BettingPanel.jsx","../../src/components/PlayerList.jsx","../../src/components/PotDisplay.jsx","../../src/components/DeckDisplay.jsx","../../src/components/AutoAnteToggle.jsx","../../src/components/AnteControls.jsx","../../src/components/ResultsPanel.jsx","../../src/components/AceChoicePanel.jsx","../../src/components/SecondChancePanel.jsx","../../src/components/GameLog.jsx","../../src/components/EmojiReactions.jsx","../../src/components/GameScreen.jsx","../../src/components/common/PasswordPromptModal.jsx","../../src/components/GameRoom.jsx"],"sourcesContent":["/**\n * Frontend Constants - Game logic and UI constants for the web client\n * \n * ‚ö†Ô∏è  SHARED CONSTANTS - Keep synchronized with backend! ‚ö†Ô∏è\n * Some constants must match @am-games-api/src/constants.js\n * Any changes to shared constants should be reflected in the backend constants file.\n */\n\n// ========================================\n// SHARED CONSTANTS (Frontend + Backend)\n// ========================================\n\n/**\n * Game phase constants for consistent phase management across the application\n * üîÑ SHARED: Must match backend GamePhases\n */\nexport const GamePhases = {\n  // Initial phase when waiting for players and anteeing up\n  WAITING: 'waiting',\n  \n  // Phase when cards are being dealt\n  DEALING: 'dealing',\n  \n  // Phase when players are betting\n  BETTING: 'betting',\n  \n  // Phase when middle card is being revealed\n  REVEALING: 'revealing',\n  \n  // Phase when round results are shown\n  RESULTS: 'results'\n};\n\n/**\n * Core game configuration constants\n * üîÑ SHARED: Must match backend GAME_CONSTANTS\n */\nexport const GAME_CONSTANTS = {\n  // Game configuration\n  ANTE_AMOUNT: 1,  // Fixed ante amount - always $1\n  STARTING_BALANCE: 2000,  // Starting player balance\n  FULL_DECK_SIZE: 52,  // Number of cards in a full deck\n  RECONNECTION_TIMEOUT: 30000,  // Time window for player reconnection (30 seconds)\n  MAX_SEATS: 16, // Maximum number of seats/players allowed in a game\n  \n  // Timer durations (in milliseconds)\n  // üîÑ SHARED: Backend uses these for game logic, frontend for UI timers\n  TIMERS: {\n    DEAL_FIRST_CARD_DELAY: 1000,    // Delay before dealing the first card (1 second)\n    DEAL_SECOND_CARD_DELAY: 1000,   // Delay before dealing the second card (1 second)\n    DEAL_THIRD_CARD_DELAY: 2000,    // Delay before revealing the third card (2 seconds)\n    DEALING_DURATION: 3000,         // Total duration of dealing phase (3 seconds)\n    BETTING_DURATION: 30000,        // Duration for betting phase (30 seconds)\n    DECISION_DURATION: 15000,       // Duration for ace and second chance decisions (15 seconds)\n    REVEALING_DURATION: 3000,       // Duration for revealing phase\n    RESULTS_DURATION: 5000,         // Duration to show results before moving to next round (5 seconds)\n    PLAYER_INACTIVITY_TIMEOUT: 30000//Timeout for inactive players in WAITING phase\n  }\n};\n\n// ========================================\n// FRONTEND-ONLY CONSTANTS\n// ========================================\n\n/**\n * UI Icons used throughout the application\n * üé® FRONTEND-ONLY: These are only used for UI display\n */\nexport const ICONS = {\n  POT: 'üçØ',\n  DEALER: 'üÉè',\n  CHECK: '‚úì',\n  DECK: 'üÉè'\n};\n\n// Export specific commonly used constants for convenience\nexport const { TIMERS, ANTE_AMOUNT, STARTING_BALANCE, FULL_DECK_SIZE, RECONNECTION_TIMEOUT, MAX_SEATS } = GAME_CONSTANTS;","import React, { createContext, useState, useContext, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\n// Create context\nconst GameContext = createContext();\n\n// Custom hook to use the game context\nexport const useGameContext = () => {\n  const context = useContext(GameContext);\n  if (context === undefined) {\n    throw new Error('useGameContext must be used within a GameProvider');\n  }\n  return context;\n};\n\nexport const GameProvider = ({ children, gameId, initialGameState = null }) => {\n  // Get socket from socket context\n  const { socket, error: socketError } = useSocket();\n  \n  // Get user from auth context\n  const { user } = useAuth();\n  \n  // Game-specific state - we only need to track the full gameState object and error\n  /** @type {[GameState|null, React.Dispatch<React.SetStateAction<GameState|null>>]} */\n  const [gameState, setGameState] = useState(initialGameState);\n  \n  // Keep track of previous players to detect joins/leaves\n  const prevPlayersRef = useRef({});\n  \n  // Keep track of previous active player to detect turn changes\n  const prevActivePlayerRef = useRef(null);\n  \n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Function to explicitly clear the provider's error state\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  // Initialize with socket error if any\n  useEffect(() => {\n    if (socketError) {\n      setError(socketError);\n    }\n  }, [socketError]);\n  // Set up game-specific event handlers\n  useEffect(() => {\n    if (!socket) return;\n\n    // Handle game reconnection\n    socket.on('gameReconnected', (data) => {\n      console.log(`[Game] Reconnected to game: ${data.gameId}`, data.game);\n      \n      // Update game state with the full state from the server\n      setGameState(data.game);\n      \n      // Log reconnection with user ID from AuthContext\n      console.log(`[Game] Successfully reconnected as user ID: ${user?.id}`);\n      \n      // Clear any errors\n      setError(null);\n\n      // CRITICAL: Force a refresh of the player's game state to ensure betting works\n      if (data.game && data.game.id) {\n        // Small delay to ensure the state is fully updated\n        setTimeout(() => {\n          console.log(`[Game] Requesting fresh game state after reconnection`);\n          socket.emit('getGameState', { gameId: data.game.id });\n        }, 500);\n      }\n    });\n    \n    // Handle receiving updated game state\n    socket.on('gameState', (data) => {\n      if (data && data.id) { \n        // Restore check to prevent setting identical state\n        if (JSON.stringify(gameState) !== JSON.stringify(data)) {\n          // Check if it's now the player's turn and play alert sound if needed\n          if (data.currentPlayerId && user?.id) {\n            const isMyTurn = data.currentPlayerId === user.id;\n            const wasPreviouslyMyTurn = prevActivePlayerRef.current === user.id;\n            \n            // Only play sound if it wasn't my turn before but now it is\n            if (isMyTurn && !wasPreviouslyMyTurn) {\n              soundService.play('ui.alert');\n            }\n            \n            // Update the previous active player reference\n            prevActivePlayerRef.current = data.currentPlayerId;\n          }\n          \n          setGameState(data);\n          clearError(); // Clear any previous context errors on successful state update\n        } \n      } else {\n      }\n    });\n    \n    // Game-specific error handling\n    socket.on('gameError', (message) => {\n      console.error('Game error:', message);\n      setError(message);\n    });\n    \n    // Clean up game-specific event listeners\n    return () => {\n      socket.off('gameReconnected');\n      socket.off('gameState');\n      socket.off('gameError');\n    };\n  }, [socket]);\n\n  // Game-specific actions\n  const placeBet = useCallback((amount) => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('placeBet', { bet: amount, gameId });\n    } catch (err) {\n      console.error('Error placing bet:', err);\n      setError('Failed to place bet. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const payAnte = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('payAnte', { gameId });\n    } catch (err) {\n      console.error('Error paying ante:', err);\n      setError('Failed to pay ante. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  const dealCards = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('dealCards', { gameId });\n    } catch (err) {\n      console.error('Error dealing cards:', err);\n      setError('Failed to deal cards. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const revealMiddleCard = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('revealMiddleCard', { gameId });\n    } catch (err) {\n      console.error('Error revealing middle card:', err);\n      setError('Failed to reveal middle card. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const nextRound = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('nextRound', { gameId });\n    } catch (err) {\n      console.error('Error moving to next round:', err);\n      setError('Failed to move to next round. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player ready function (for paying ante)\n  const playerReady = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      // Server is listening for 'ready' event, not 'playerReady'\n      socket.emit('ready');\n    } catch (err) {\n      console.error('Error setting player ready:', err);\n      setError('Failed to set player ready. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player unready function (withdraw ante)\n  const playerUnready = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('unready');\n    } catch (err) {\n      console.error('Error setting player unready:', err);\n      setError('Failed to set player unready. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  /**\n   * @typedef {Object} GameContextValue\n   * @property {GameState|null} gameState - The complete game state\n   * @property {string|null} error - Any error message \n   * @property {(amount: number) => void} placeBet - Function to place a bet\n   * @property {() => void} payAnte - Function to pay the ante\n   * @property {() => void} playerReady - Function to set player ready (pay ante)\n   * @property {() => void} playerUnready - Function to set player unready (withdraw ante)\n   * @property {() => void} dealCards - Function to deal cards\n   * @property {() => void} revealMiddleCard - Function to reveal the middle card\n   * @property {() => void} nextRound - Function to move to the next round\n   * @property {() => void} clearError - Function to clear any error\n   * @property {string|null} gameId - Current game ID\n   */\n\n  /** @type {GameContextValue} */\n  const value = {\n    // Game state - just provide the complete gameState object\n    gameState,\n    error,\n    gameId,\n    \n    // Game actions\n    placeBet,\n    payAnte,\n    playerReady,\n    playerUnready,\n    dealCards,\n    revealMiddleCard,\n    nextRound,\n    // Helper methods\n    clearError,\n  };\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\n// Named exports for specific pieces of state/actions\nexport const useGameState = () => {\n  const { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error } = useGameContext();\n  return { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error };\n};\n\nexport const useGameActions = () => {\n  const { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError } = useGameContext();\n  return { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError };\n};\n\nexport default GameContext;\n","import React from 'react';\n\n/**\n * Exit/door icon component for leave game button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ExitIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Material Design style exit/logout icon */}\n      <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" />\n      <polyline points=\"16 17 21 12 16 7\" />\n      <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" />\n    </svg>\n  );\n};\n\nexport default ExitIcon;\n","import React from 'react';\nimport IconButton from './IconButton';\nimport ExitIcon from '../icons/ExitIcon';\n\n/**\n * A standardized leave/exit button component\n * \n * @param {Object} props Component props\n * @param {function} props.onClick Handler for when the button is clicked\n * @param {string} props.title Custom tooltip text (optional)\n */\nconst LeaveButton = ({ \n  onClick, \n  title = \"Leave Game\",\n  ...restProps \n}) => {\n  return (\n    <IconButton\n      icon={<ExitIcon color=\"white\" size={20} />}\n      title={title}\n      onClick={onClick}\n      variant=\"danger\"\n      {...restProps}\n    />\n  );\n};\n\nexport default LeaveButton;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/GameHeader.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { TIMERS, ICONS } from '../constants';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport GameSummaryModal from './GameSummaryModal.jsx';\nimport StoreModal from './StoreModal.jsx';\nimport RulesButton from './common/RulesButton';\nimport PlayerStatsButton from './common/PlayerStatsButton';\nimport PreferencesButton from './common/PreferencesButton';\nimport StoreButton from './StoreButton';\nimport LeaveButton from './common/LeaveButton';\n\n// Phase display mapping with icons and friendly names\nconst phaseDisplayMap = {\n  waiting: { text: 'Waiting for Players', icon: 'üë•' },\n  dealing: { text: 'Dealing Cards', icon: ICONS.DEALER },\n  revealing: { text: 'Revealing Cards', icon: 'ü•Å' },\n  results: { text: 'Round Results', icon: 'üèÜ' }\n};\n\nconst GameHeader = ({ handleLeaveGame, onModalStateChange }) => {\n  const { gameState, gameId } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  \n  // Get the current user's balance from game state (real-time) or fallback to auth context\n  const currentUserId = socket?.auth?.userId;\n  const currentPlayer = currentUserId && gameState?.players ? gameState.players[currentUserId] : null;\n  const playerBalance = currentPlayer?.balance ?? user?.balance ?? 0;\n  const currentPhase = gameState?.phase || 'waiting';\n  \n  // Check if user is ready (committed to current hand)\n  const isPlayerReady = currentPlayer?.isReady || false;\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n  const [showStoreModal, setShowStoreModal] = useState(false);\n  const [isPreferencesOpen, setIsPreferencesOpen] = useState(false);\n  const [isRulesOpen, setIsRulesOpen] = useState(false);\n  const [isStatsOpen, setIsStatsOpen] = useState(false);\n\n  // Timer effect for phases\n  useEffect(() => {\n    let timer;\n    \n    if (currentPhase === 'dealing') {\n      setTimeLeft(TIMERS.DEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'betting') {\n      setTimeLeft(TIMERS.BETTING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'revealing') {\n      setTimeLeft(TIMERS.REVEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'results') {\n      setTimeLeft(TIMERS.RESULTS_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else {\n      setTimeLeft(null);\n    }\n\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [currentPhase, gameState?.waitingForAceDecision]);\n\n  // Notify parent when modal state changes\n  useEffect(() => {\n    const isModalOpen = showGameSummary || showStoreModal || isPreferencesOpen || isRulesOpen || isStatsOpen;\n    if (onModalStateChange) {\n      onModalStateChange(isModalOpen);\n    }\n  }, [showGameSummary, showStoreModal, isPreferencesOpen, isRulesOpen, isStatsOpen, onModalStateChange]);\n  \n  // Get the phase display information\n  let phaseInfo = phaseDisplayMap[currentPhase] || { text: 'Unknown Phase', icon: '‚ùì' };\n  \n  // Override phase info if waiting for Ace decision\n  if (gameState?.waitingForAceDecision && currentPhase === 'dealing') {\n    phaseInfo = { text: 'Choosing Ace Value', icon: 'ü§î' };\n  }\n  \n  // Override phase info if waiting for second chance decision\n  if (gameState?.waitingForSecondChance) {\n    phaseInfo = { text: 'Second Chance Decision', icon: 'ü§î' };\n  }\n  \n  // Check if current user is the current player (using userId instead of socket.id)\n  const isCurrentPlayersTurn = socket && socket.auth?.userId && gameState?.currentPlayerId === socket.auth.userId;\n  \n  // Special handling for betting phase\n  if (currentPhase === 'betting' && gameState?.currentPlayerId && gameState?.players) {\n    const currentPlayer = gameState.players[gameState.currentPlayerId];\n    \n    if (currentPlayer) {\n      if (isCurrentPlayersTurn) {\n        // It's YOUR turn to bet\n        phaseInfo = {\n          text: `Pass or Bet`,\n          icon: 'ü§î'\n        };\n      } else {\n        // It's someone else's turn\n        phaseInfo = {\n          text: `${currentPlayer.name} is Betting`,\n          icon: 'ü§î'\n        };\n      }\n    } else {\n      phaseInfo = { text: 'Betting Round', icon: 'ü§î' };\n    }\n  }\n  \n  return (\n    <div className={styles.headerContainer}>\n      {/* Desktop layout - single row with 3 cells */}\n      <div className={styles.desktopLayout}>\n        {/* Left: Logo and game ID */}\n        <div className={styles.headerLeft}>\n          <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n          <p className={styles.gameIdText}>\n            <span \n              className={styles.gameIdLink} \n              onClick={() => setShowGameSummary(true)}\n              title=\"Click to view game summary\"\n              data-gamepad-focusable=\"true\"\n              tabIndex=\"0\"\n            >\n              Game #{gameId}\n            </span>\n          </p>\n        </div>\n        \n        {/* Middle: Phase indicator */}\n        <div className={styles.headerCenter}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right: Balance and buttons */}\n        <div className={styles.headerRight}>\n          <div className={styles.controlsStack}>\n            <div className={styles.balanceDisplay}>\n              Balance: <CurrencyAmount amount={Number(playerBalance)} size=\"small\" />\n            </div>\n            <div className={styles.controlsGroup}>\n              <PreferencesButton \n                onModalStateChange={setIsPreferencesOpen}\n                data-gamepad-focusable=\"true\" \n              />\n              <RulesButton \n                onModalStateChange={setIsRulesOpen}\n                data-gamepad-focusable=\"true\" \n              />\n              <PlayerStatsButton \n                onModalStateChange={setIsStatsOpen}\n                data-gamepad-focusable=\"true\" \n              />\n              <StoreButton onClick={() => setShowStoreModal(true)} data-gamepad-focusable=\"true\" />\n              <LeaveButton \n                onClick={handleLeaveGame} \n                disabled={isPlayerReady}\n                data-gamepad-focusable=\"true\" \n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile layout - two rows */}\n      <div className={styles.mobileLayout}>\n        {/* Top row: Logo/ID, Balance/Buttons */}\n        <div className={styles.mobileTopRow}>\n          <div className={styles.headerLeft}>\n            <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n            <p className={styles.gameIdText}>\n              <span \n                className={styles.gameIdLink} \n                onClick={() => setShowGameSummary(true)}\n                title=\"Click to view game summary\"\n                data-gamepad-focusable=\"true\"\n                tabIndex=\"0\"\n              >\n                Game #{gameId}\n              </span>\n            </p>\n          </div>\n          \n          <div className={styles.mobileRight}>\n            <div className={styles.mobileControlsStack}>\n              <div className={styles.balanceDisplay}>\n                Balance: <CurrencyAmount amount={Number(playerBalance)} size=\"small\" />\n              </div>\n              <div className={styles.mobileActions}>\n                <PreferencesButton \n                  onModalStateChange={setIsPreferencesOpen}\n                  data-gamepad-focusable=\"true\" \n                />\n                <RulesButton \n                  onModalStateChange={setIsRulesOpen}\n                  data-gamepad-focusable=\"true\" \n                />\n                <PlayerStatsButton \n                  onModalStateChange={setIsStatsOpen}\n                  data-gamepad-focusable=\"true\" \n                />\n                <StoreButton onClick={() => setShowStoreModal(true)} data-gamepad-focusable=\"true\" />\n                <LeaveButton \n                onClick={handleLeaveGame} \n                disabled={isPlayerReady}\n                data-gamepad-focusable=\"true\" \n              />\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Bottom row: Phase indicator (full width) */}\n        <div className={styles.mobileBottomRow}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Game Summary Modal */}\n      {showGameSummary && (\n        <GameSummaryModal \n          onClose={() => setShowGameSummary(false)} \n          gameData={gameState}\n        />\n      )}\n      \n      {/* Store Modal */}\n      {showStoreModal && (\n        <StoreModal\n          onClose={() => setShowStoreModal(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from 'react';\n\n/**\n * Arrow icon component that can be rotated to point up or down\n * @param {Object} props - Component props\n * @param {string} props.direction - Direction of the arrow ('up' or 'down')\n * @param {string} props.color - Color of the arrow (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ArrowIcon = ({ direction = 'up', color = 'currentColor', size = 24 }) => {\n  // Determine rotation based on direction\n  const rotation = direction === 'down' ? 'rotate(180deg)' : 'rotate(0deg)';\n  \n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={{ transform: rotation, display: 'inline-block', transformOrigin: 'center' }}\n    >\n      {/* This is the shift/arrow up icon from Material Design */}\n      <path d=\"M7 11l5-5 5 5M7 17l5-5 5 5\" />\n    </svg>\n  );\n};\n\nexport default ArrowIcon;\n","import React from 'react';\nimport styles from './styles/CardDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst CardDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return <div className={styles.loading}>Loading game state...</div>;\n  }\n  \n  const { \n    firstCard,\n    secondCard,\n    thirdCard,\n    phase,\n    dealer\n  } = gameState;\n  \n  // Card state is managed by the game context\n  \n  const dealerName = dealer?.name;\n  const cardLabels = {\n    '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '10': '10',\n    'J': 'J', 'Q': 'Q', 'K': 'K', 'A': 'A'\n  };\n  \n  // Map for handling both string names and direct symbols\n  const suitSymbols = {\n    'hearts': '‚ô•',\n    'diamonds': '‚ô¶',\n    'clubs': '‚ô£',\n    'spades': '‚ô†',\n    // Handle direct Unicode symbols as well\n    '‚ô•': '‚ô•',\n    '‚ô¶': '‚ô¶',\n    '‚ô£': '‚ô£',\n    '‚ô†': '‚ô†'\n  };\n  \n  // Helper to determine if a suit is red\n  const isRedSuit = (suit) => {\n    return suit === '‚ô•' || suit === '‚ô¶' || suit === 'hearts' || suit === 'diamonds';\n  };\n  \n  const renderCard = (card, index) => {\n    if (!card) return (\n      <div key={`empty-${index}`} className={styles.card}>\n        <div className={styles.cardBack}></div>\n      </div>\n    );\n    \n    const isRed = isRedSuit(card.suit);\n    const isAce = card.value === 'A';\n    const isAceLow = card.isAceLow;\n    const isMiddleCard = index === 1; // Index 1 is the middle card position\n    \n    return (\n      <div key={`${card.value}-${card.suit}-${index}`} \n        className={`${styles.card} ${isRed ? styles.redCard : styles.blackCard} ${isAce ? styles.aceCard : ''}`}\n      >\n        {isAce && !isMiddleCard && (\n          <div className={`${styles.aceIndicator} ${isAceLow ? styles.aceLow : styles.aceHigh} ${isRed ? styles.redCard : styles.blackCard}`}>\n            {isAceLow ? (\n              <span className={styles.indicatorContent}>LOW <ArrowIcon direction=\"down\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            ) : (\n              <span className={styles.indicatorContent}>HIGH <ArrowIcon direction=\"up\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            )}\n          </div>\n        )}\n        <div className={styles.cardCorner}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n        <div className={styles.cardCenter}>\n          {suitSymbols[card.suit]}\n        </div>\n        <div className={`${styles.cardCorner} ${styles.bottomRight}`}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  // Function to handle card positioning \n  const renderCardLayout = () => {\n    // Create an array of 3 nulls to represent the card slots\n    let displayCards = [null, null, null];\n    \n    // Check if we have a valid game state with cards\n    if (!firstCard && !secondCard && !thirdCard) {\n      return displayCards.map((card, index) => renderCard(card, index));\n    }\n    \n    // Handle the individual card properties\n    if (firstCard) {\n      displayCards[0] = {...firstCard}; // Left position - use spread operator to create a copy\n    }\n    \n    if (secondCard) {\n      displayCards[2] = {...secondCard}; // Right position - use spread operator to create a copy\n    }\n    \n    if (thirdCard) {\n      displayCards[1] = {...thirdCard}; // Middle position - use spread operator to create a copy\n    }\n    \n    return displayCards.map((card, index) => renderCard(card, index));\n  };\n\n  return (\n    <div className={styles.cardDisplayContainer}>\n      <div className={`${styles.cardsRow} ${phase === 'dealing' ? styles.dealingPhase : ''} ${phase === 'revealing' ? styles.revealingPhase : ''}`}>\n        {renderCardLayout()}\n      </div>\n    </div>\n  );\n};\n\nexport default CardDisplay;\n","import React from 'react';\nimport styles from './styles/PotButton.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * PotButton - The most epic, baller button in the entire game\n * Features a shimmering gold border with a shiny silver background to make the gold currency pop\n * Includes multiple overlapping layers and effects for maximum visual impact\n * \n * @param {Object} props - Component props\n * @param {number} props.amount - The pot amount to display\n * @param {boolean} props.disabled - Whether the button is disabled\n * @param {function} props.onClick - Function to call when the button is clicked\n */\nconst PotButton = ({ amount, disabled, onClick, ...props }) => {\n  return (\n    <button\n      className={`${styles.potButton} ${disabled ? styles.disabled : ''}`}\n      onClick={onClick}\n      disabled={disabled}\n      aria-label={`Bet the pot: ${amount} chips`}\n      {...props}\n    >\n      {/* Layer 2: Gold border with texture */}\n      <div className={styles.shimmerBorder}></div>\n      \n      {/* Layer 4: Silver metallic background */}\n      <div className={styles.buttonBackground}></div>\n      \n      {/* Layer 5: Light reflection effects */}\n      <div className={styles.reflectionEffect}></div>\n      \n      {/* Layer 6-8: Button content with 3D transform */}\n      <div className={styles.buttonContent}>\n        <span className={styles.potText}>POT</span>\n        <span className={styles.potAmount}>\n          <CurrencyAmount amount={amount} background=\"pill\" />\n        </span>\n      </div>\n    </button>\n  );\n};\n\nexport default PotButton;\n","import React, { useState } from 'react';\nimport styles from './styles/BettingPanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PotButton from './PotButton.jsx';\nimport GamepadInput from './GamepadInput';\n\nconst BettingPanel = () => {\n  // Get game state and actions from context\n  const { gameState, placeBet } = useGameContext();\n  const { socket } = useSocket();\n  // Initialize state first - before any conditional returns\n  const [customBet, setCustomBet] = useState('');\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    currentPlayerId, \n    pot: potAmount, \n    phase,\n    firstCard,\n    secondCard\n  } = gameState;\n  \n  // Only show in betting phase\n  if (phase !== 'betting') return null;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const myPlayer = socket && players && socket.auth?.userId ? players[socket.auth.userId] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  \n  const handleCustomBetChange = (e) => {\n    // Only allow numbers\n    const value = e.target.value.replace(/[^0-9]/g, '');\n    \n    // Don't allow bets greater than pot or player balance\n    const maxBet = Math.min(potAmount, playerBalance);\n    if (value && parseInt(value) > maxBet) {\n      setCustomBet(maxBet.toString());\n    } else {\n      setCustomBet(value);\n    }\n  };\n  \n  const handleCustomBetSubmit = () => {\n    if (customBet && !isNaN(customBet)) {\n      const betAmount = parseInt(customBet, 10);\n      // Verify bet is at least $1 and at most the pot/balance\n      if (betAmount >= 1 && betAmount <= Math.min(potAmount, playerBalance)) {\n        placeBet(betAmount);\n        setCustomBet('');\n      }\n    }\n  };\n  \n  // Helper to handle Enter key in the custom bet input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleCustomBetSubmit();\n    }\n  };\n  \n\n  \n  const renderBettingControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.betContainer}>\n        <p className={styles.betText}>Place your bet (Min: <CurrencyAmount amount={1} />, Max: <CurrencyAmount amount={Math.min(potAmount, playerBalance)} />)</p>\n        \n        {/* Extreme options row */}\n        <div className={styles.extremeOptionsRow}>\n          <button\n            className={`${styles.betButton} ${styles.extremeButton} ${styles.passButton}`}\n            onClick={() => placeBet(0)}\n            data-gamepad-focusable=\"true\"\n            autoFocus\n          >\n            PASS\n          </button>\n          \n          <PotButton \n            amount={potAmount}\n            onClick={() => placeBet(potAmount)}\n            disabled={potAmount > playerBalance}\n            data-gamepad-focusable=\"true\"\n          />\n        </div>\n        \n        {/* Standard bet options */}\n        <div className={styles.betButtons}>\n          {[1, 2, 5].map(amount => {\n            const maxBet = Math.min(potAmount, playerBalance);\n            const disabled = amount > maxBet;\n            return (\n              <button\n                key={amount}\n                className={`${styles.betButton} ${disabled ? styles.disabledButton : ''}`}\n                onClick={() => placeBet(amount)}\n                disabled={disabled}\n                data-gamepad-focusable=\"true\"\n              >\n                <CurrencyAmount amount={amount} />\n              </button>\n            );\n          })}\n          \n          {/* Custom bet input */}\n          <div className={styles.customBetContainer}>\n            <GamepadInput\n              title=\"Enter Bet Amount\"\n              type=\"number\"\n              className={styles.customBetInput}\n              placeholder=\"Custom\"\n              value={customBet}\n              onChange={handleCustomBetChange}\n              onKeyPress={handleKeyPress}\n            />\n            <button\n              className={styles.customBetButton}\n              onClick={handleCustomBetSubmit}\n              disabled={!customBet}\n              data-gamepad-focusable=\"true\"\n            >\n              Bet\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  \n\n  // Only render the panel for the current player\n  if (!isCurrentPlayer) return null;\n  \n  return (\n    <div className={styles.bettingPanel}>\n      {renderBettingControls()}\n    </div>\n  );\n};\n\nexport default BettingPanel;\n","import React, { useRef, useEffect, useState, useMemo, useContext } from 'react';\nimport styles from './styles/PlayerList.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport UserAvatar from './UserAvatar.jsx';\nimport { ICONS } from '../constants';\nimport UserDataContext from '../contexts/UserDataContext';\n\nconst PlayerList = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const userDataContext = useContext(UserDataContext);\n  \n  // Prefetch user data for all players when game state changes\n  useEffect(() => {\n    if (gameState?.players && userDataContext) {\n      const userIds = Object.values(gameState.players).map(player => player.userId).filter(Boolean);\n      if (userIds.length > 0) {\n        userDataContext.prefetchUsers(userIds);\n      }\n    }\n  }, [gameState?.players, userDataContext]);\n  \n  if (!gameState || !gameState.players) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for game data...</p>\n      </div>\n    );\n  }\n  \n  const { players, currentPlayerId, dealerId, gameTransactions = [] } = gameState;\n  const currentUserId = socket?.auth?.userId;\n  \n  // Use server-side calculated totals\n  const playerTotals = gameState.totals || {};\n  if (!players || Object.keys(players).length === 0) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for players to join...</p>\n      </div>\n    );\n  }\n\n  \n  return (\n    <div className={styles.playersContainer}>\n      <h3 className={styles.playersTitle}>Scoreboard</h3>\n      \n      <div className={styles.playersList}>\n        {/* Use gameState.seats to render players in seat order */}\n        {gameState.seats\n          .filter(playerId => playerId !== null && players[playerId])\n          .map(playerId => {\n            const player = players[playerId];\n            const isCurrentPlayer = playerId === currentPlayerId;\n            // Compare player.userId with currentUserId instead of comparing playerId with currentUserId\n            const isCurrentUser = player.userId === currentUserId;\n            const isDealer = playerId === dealerId; // Use playerId instead of player.id\n            const isDisconnected = player.disconnected === true;\n            \n            return (\n              <div \n                key={playerId} \n                className={`\n                  ${styles.playerItem}\n                  ${isCurrentPlayer ? styles.currentPlayer : ''}\n                  ${isCurrentUser ? styles.currentUser : ''}\n                `}\n              >\n              <div className={styles.playerInfo}>\n                <UserAvatar \n                  userId={player.userId}\n                  size=\"small\" \n                  showName={false}\n                />\n                <span className={styles.playerName}>\n                  {player.name}\n                  <span className={styles.playerStatus}>\n                    {isDealer && ` ${ICONS.DEALER}`}\n                    {player.disconnected && <span className={styles.disconnectedIndicator} title=\"Player disconnected\">‚ö†Ô∏è Disconnected</span>}\n                  </span>\n                </span>\n              </div>\n              <div className={styles.playerBalanceContainer}>\n                <BalanceDisplay balance={playerTotals[playerId] || 0} />\n\n                <div \n                  className={`\n                    ${styles.readyIndicator} \n                    ${player.isSittingOut ? styles.sittingOut : (player.isReady ? styles.ready : styles.notReady)}\n                  `}\n                  title={player.isSittingOut ? 'Sitting Out' : (player.isReady ? 'Ready' : 'Not Ready')}\n                >\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst BalanceDisplay = ({ balance }) => {\n  const [prevBalance, setPrevBalance] = useState(balance);\n  const [animationClass, setAnimationClass] = useState('');\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (balance !== prevBalance) {\n      // Determine if balance increased or decreased\n      const isIncrease = balance > prevBalance;\n      setAnimationClass(isIncrease ? styles.balanceIncrease : styles.balanceDecrease);\n\n      // Clear previous timeout if it exists\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      // Remove animation class after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setAnimationClass('');\n      }, 1000); // Match animation duration\n\n      setPrevBalance(balance);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [balance]);\n\n  return (\n    <span className={`${styles.playerBalance} ${animationClass}`}>\n      <CurrencyAmount amount={balance} />\n    </span>\n  );\n};\n\nexport default PlayerList;\n","import React from 'react';\nimport styles from './styles/PotDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants';\n\nconst PotDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  const { pot, round = 1 } = gameState;\n  \n  return (\n    <div className={styles.potDisplayContainer}>\n      <div className={styles.potIconWrapper}>\n        <span className={styles.potIcon}>{ICONS.POT}</span>\n      </div>\n      <div className={styles.potInfo}>\n        <h3 className={styles.potLabel}>\n          POT <span className={styles.potCounter}>({round})</span>\n        </h3>\n        <span className={styles.potAmount}><CurrencyAmount amount={pot} size=\"medium\" /></span>\n      </div>\n    </div>\n  );\n};\n\nexport default PotDisplay;\n","import React from 'react';\nimport styles from './styles/DeckDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { ICONS } from '../constants';\n\nconst DeckDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  // Get the deck size and deck count from the game state\n  const { deckSize = 0, deckCount = 1 } = gameState;\n  \n  // Calculate the visual thickness of the deck based on remaining cards\n  const getThicknessClass = () => {\n    if (deckSize >= 40) return styles.deckThick;\n    if (deckSize >= 25) return styles.deckMedium;\n    if (deckSize >= 10) return styles.deckThin;\n    return styles.deckVeryThin;\n  };\n  \n  return (\n    <div className={styles.deckDisplayContainer}>\n      <div className={`${styles.deckVisual} ${getThicknessClass()}`}>\n        <div className={styles.deckIcon}>{ICONS.DECK}</div>\n      </div>\n      <div className={styles.deckInfo}>\n        <h3 className={styles.deckLabel}>\n          DECK <span className={styles.deckCounter}>({deckCount})</span>\n        </h3>\n        <span className={styles.deckCount}>{deckSize}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default DeckDisplay;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/AutoAnteToggle.module.css';\n\nconst AutoAnteToggle = () => {\n  const { preferences, toggleAutoAnte, loading } = usePreferences();\n  const { gameState, playerReady } = useGameContext();\n  const { socket } = useSocket();\n  \n  const handleToggle = async () => {\n    const newValue = !preferences.autoAnte;\n    const success = await toggleAutoAnte();\n    \n    // Only auto-ante if the player is not already anted\n    if (newValue && success && playerReady) {\n      // Check if player is already anted (using userId instead of socket.id)\n      let myPlayer = null;\n      if (socket && socket.auth?.userId && gameState?.players) {\n        // Find player by userId\n        const playerIds = Object.keys(gameState.players);\n        for (const id of playerIds) {\n          if (gameState.players[id].userId === socket.auth.userId) {\n            myPlayer = gameState.players[id];\n            break;\n          }\n        }\n      }\n      const isPlayerReady = myPlayer?.isReady;\n      \n      // Only call playerReady if the player is not already ready\n      if (!isPlayerReady) {\n        playerReady();\n      }\n    }\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.autoAnte}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n          data-gamepad-focusable=\"true\"\n        />\n        <span className={styles.toggleSlider}></span>\n        <span className={styles.toggleText}>\n          Auto-Ante\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default AutoAnteToggle;\n","import React from 'react';\nimport styles from './styles/AnteControls.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants';\nimport AutoAnteToggle from './AutoAnteToggle.jsx';\n\n\nconst AnteControls = () => {\n  // Get game state and actions from context\n  const { gameState, playerReady, playerUnready } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    anteAmount, \n    phase \n  } = gameState;\n  \n  // Only show in waiting phase\n  if (phase !== 'waiting') return null;\n  \n  // Find the player by user ID\n  let myPlayer = null;\n  if (socket && socket.auth?.userId && players) {\n    // Find player by userId\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === socket.auth.userId) {\n        myPlayer = players[id];\n        break;\n      }\n    }\n  } else if (user && players) {\n    // If we can't find by socket ID, try to find by user ID\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === user.id) {\n        myPlayer = players[id];\n        console.log(`[AnteControls] Found player by user ID instead of socket ID`);\n        break;\n      }\n    }\n  }\n  \n  // Get player balance and ready status\n  const playerBalance = Number(myPlayer?.balance || 0);\n  const isPlayerReady = myPlayer?.isReady;\n  \n  // Check if player has enough chips\n  const hasEnoughChips = playerBalance >= anteAmount;\n  \n  // Player state and readiness is managed by the game context\n  \n  return (\n    <div className={styles.anteControlsWrapper}>\n      <div className={styles.controlsContainer}>\n        {/* Main action button (Ante or Back Out) */}\n        <div className={styles.buttonContainerRow}>\n          {!isPlayerReady ? (\n            // Player is not ready - show Ante button and Sit Out button side by side\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.anteButton}\n                onClick={playerReady}\n                disabled={!hasEnoughChips}\n                aria-label=\"Ante up\"\n                data-gamepad-focusable=\"true\"\n                autoFocus\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.anteIcon}>{ICONS.CHECK}</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>ANTE</h3>\n                  <span className={styles.buttonAmount}><CurrencyAmount amount={anteAmount} /></span>\n                </div>\n              </button>\n\n              <button\n                className={`${styles.backOutButton} ${styles.sitOutHalfWidth}`}\n                onClick={() => {\n                  if (socket && gameState && user) {\n                    socket.emit('sitOut', {\n                      gameId: gameState.id,\n                      userId: socket.auth?.userId || user.id\n                    });\n                  }\n                }}\n                disabled={myPlayer?.isSittingOut} // Disable if sitting out\n                title={myPlayer?.isSittingOut ? \"You are currently sitting out\" : \"Sit out next round\"}\n                aria-label=\"Sit Out\"\n                data-gamepad-focusable=\"true\"\n              >\n                <div className={styles.shimmerBorder}></div>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>SIT OUT</h3>\n                </div>\n              </button>\n\n              {!hasEnoughChips && (\n                <p className={styles.notEnoughChipsText}>Not enough coins (<CurrencyAmount amount={anteAmount} /> required)</p>\n              )}\n            </div>\n          ) : (\n            // Player is ready - show Back Out button\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.backOutButton}\n                onClick={() => {\n                  if (typeof playerUnready === 'function') {\n                    playerUnready();\n                  } else {\n                    console.error('playerUnready is not a function');\n                  }\n                }}\n                aria-label=\"Back out\"\n                data-gamepad-focusable=\"true\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.backOutIcon}>‚úï</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>BACK OUT</h3>\n                </div>\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Auto-Ante toggle - always shown */}\n        <div className={styles.autoAnteContainer}>\n          <AutoAnteToggle />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnteControls;\n","import { useGameContext } from '../contexts/GameContext';\nimport styles from './styles/ResultsPanel.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Results panel component that displays the outcome of a hand during the results phase\n */\nconst ResultsPanel = () => {\n  const { gameState } = useGameContext();\n\n  // If there's no result, don't render anything\n  if (!gameState.result) return null;\n\n  const { result, players, resultCountdown } = gameState;\n  const playerName = players[result.playerId]?.name;\n\n  const renderWinResult = () => (\n    <>\n      <h2 className={`${styles.resultText} ${styles.winText}`}>\n        {playerName} WON!\n      </h2>\n      {result.winnings > 0 && (\n        <p className={styles.winningsText}>\n          Winnings: <CurrencyAmount amount={result.winnings / 2} size=\"medium\" />\n        </p>\n      )}\n    </>\n  );\n\n  const renderLossResult = () => (\n    <>\n      <h2 className={`${styles.resultText} ${styles.loseText}`}>\n        {playerName} LOST!\n      </h2>\n      {result.betAmount > 0 && (\n        <p className={styles.winningsText}>\n          Loss: <CurrencyAmount amount={result.betAmount} size=\"medium\" />\n        </p>\n      )}\n    </>\n  );\n\n  const renderTieResult = () => {\n    const penaltyAmount = result.betAmount * (result.isTripleAceTie ? 3 : 2);\n    \n    return (\n      <>\n        <div className={styles.penaltyWarning}>\n          <div className={styles.cautionTape}></div>\n        </div>\n        <h2 className={`${styles.resultText} ${styles.tieText}`}>\n          {playerName} {result.isTripleAceTie ? '3X' : '2X'} PENALTY!\n        </h2>\n        {result.betAmount > 0 && (\n          <p className={styles.winningsText}>\n            Penalty: <CurrencyAmount amount={penaltyAmount} size=\"medium\" />\n          </p>\n        )}\n      </>\n    );\n  };\n\n  const renderOutcome = () => {\n    switch (result.outcome) {\n      case 'win':\n        return renderWinResult();\n      case 'lose':\n        return renderLossResult();\n      case 'tie':\n        return renderTieResult();\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={styles.resultsPanel}>\n      {/* Card display section removed - cards are now visible in the game board */}\n\n      <div className={styles.resultContent}>\n        {renderOutcome()}\n        \n        {resultCountdown && (\n          <div className={styles.countdownContainer}>\n            <p className={styles.countdownText}>\n              Next hand in: {resultCountdown.countdownSeconds}s\n            </p>\n            <div className={styles.countdownProgress}>\n              <div \n                className={styles.countdownBar} \n                style={{ width: `${(resultCountdown.countdownSeconds / 5) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ResultsPanel;","import React, { useState, useEffect } from 'react';\nimport styles from './styles/AceChoicePanel.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst AceChoicePanel = () => {\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForAceDecision && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForAceDecision, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const handleAceChoice = (isAceLow) => {\n    socket.emit('chooseAceValue', { isAceLow });\n  };\n  \n  // Check if it's the current player's turn\n  const isCurrentPlayersTurn = socket?.auth?.userId === gameState.currentPlayerId;\n  const currentPlayerName = gameState.players[gameState.currentPlayerId]?.name || 'Current player';\n  \n  const renderAceChoiceControls = () => {\n    if (!isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.aceChoiceControls}>\n        <p className={styles.aceChoiceText}>\n          You've been dealt an Ace! Choose whether it should be high or low.\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.aceChoiceButtons}>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceHighButton}`}\n            onClick={() => handleAceChoice(false)}\n            data-gamepad-focusable=\"true\"\n            autoFocus\n          >\n            <span className={styles.buttonContent}>ACE HIGH <ArrowIcon direction=\"up\" color=\"white\" size={20} /></span>\n          </button>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceLowButton}`}\n            onClick={() => handleAceChoice(true)}\n            data-gamepad-focusable=\"true\"\n          >\n            <span className={styles.buttonContent}>ACE LOW <ArrowIcon direction=\"down\" color=\"white\" size={20} /></span>\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n        <p className={styles.waitingText}>\n          {currentPlayerName} is choosing whether their Ace is high or low...\n        </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.aceChoicePanel}>\n      {renderAceChoiceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default AceChoicePanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/SecondChancePanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst SecondChancePanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState(null); // 'ante' or 'pass'\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForSecondChance && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForSecondChance, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const { \n    players, \n    currentPlayerId, \n    anteAmount = 1\n  } = gameState;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const currentPlayer = players[currentPlayerId];\n  \n  const handleSecondChance = (anteAgain) => {\n    if (socket) {\n      setLoading(true);\n      setActionType(anteAgain ? 'ante' : 'pass');\n      socket.emit('secondChance', { anteAgain });\n    }\n  };\n  \n  const renderSecondChanceControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.secondChanceControls}>\n        <p className={styles.secondChanceText}>\n          Would you like to ante up again for a second chance?\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.secondChanceButtons}>\n          <button\n            className={`${styles.secondChanceButton} ${styles.anteAgainButton}`}\n            onClick={() => handleSecondChance(true)}\n            data-gamepad-focusable=\"true\"\n            autoFocus\n          >\n            {loading && actionType === 'ante' ? 'Processing...' : (\n              <>\n                Ante Up <span className={styles.currencyWrapper}>\n                  <CurrencyAmount amount={anteAmount} size=\"small\" />\n                </span>\n              </>\n            )}\n          </button>\n          <button\n            className={`${styles.secondChanceButton} ${styles.passButton}`}\n            onClick={() => handleSecondChance(false)}\n            data-gamepad-focusable=\"true\"\n          >\n            {loading && actionType === 'pass' ? 'Processing...' : 'Pass'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n          <p className={styles.waitingText}>\n            {currentPlayer?.name} is deciding whether to take a second chance.\n          </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.secondChancePanel}>\n      {renderSecondChanceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default SecondChancePanel;\n","import React, { useState } from 'react';\nimport styles from './styles/GameLog.module.css';\nimport { useGameContext } from '../contexts/GameContext';\n\nconst GameLog = () => {\n  const { gameState } = useGameContext();\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!gameState || !gameState.gameLog) return null;\n  \n  // Get the game log entries\n  const logEntries = gameState.gameLog || [];\n  \n  // Format timestamp to readable time\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n  \n  // Toggle expanded state\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  // Determine how many entries to show\n  const displayEntries = isExpanded ? logEntries : logEntries.slice(0, 5);\n  \n  return (\n    <div className={styles.gameLogContainer}>\n      <div className={styles.gameLogHeader} onClick={toggleExpanded}>\n        <h3>Game Log</h3>\n        <span className={styles.expandIcon}>{isExpanded ? '‚ñ≤' : '‚ñº'}</span>\n      </div>\n      \n      <div className={`${styles.gameLogEntries} ${isExpanded ? styles.expanded : ''}`}>\n        {displayEntries.length === 0 ? (\n          <div className={styles.emptyLog}>No game events yet</div>\n        ) : (\n          displayEntries.map((entry, index) => (\n            <div key={index} className={styles.logEntry}>\n              <span className={styles.logTime}>{formatTime(entry.timestamp)}</span>\n              <span className={styles.logMessage}>{entry.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {!isExpanded && logEntries.length > 5 && (\n        <div className={styles.showMoreButton} onClick={toggleExpanded}>\n          Show {logEntries.length - 5} more entries\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameLog;\n","import React, { useState } from 'react';\nimport styles from './styles/EmojiReactions.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst EmojiReactions = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n\n  // Available emojis for reactions - colors matched to emoji appearance\n  const emojis = [\n    { emoji: 'üî•', name: 'Fire', color: '#FF6B35' },       // Orange-red flame\n    { emoji: 'üòÑ', name: 'Happy', color: '#FFD93D' },      // Yellow happy face\n    { emoji: 'üí©', name: 'Poop', color: '#8B4513' },       // Brown\n    { emoji: 'üòé', name: 'Cool', color: '#4A5568' },       // Dark gray (sunglasses)\n    { emoji: 'ü§Ø', name: 'Mind Blown', color: '#FFA500' }, // Orange explosion\n    { emoji: 'üòà', name: 'Devilish', color: '#9333EA' },   // Purple devil\n    { emoji: 'üò¨', name: 'Worried', color: '#FCD34D' },    // Yellow grimace\n    { emoji: 'üëè', name: 'Applause', color: '#FBBF24' },   // Skin tone yellow\n    { emoji: 'üò≠', name: 'Crying', color: '#3B82F6' },     // Blue tears\n    { emoji: 'ü§°', name: 'Clown', color: '#EF4444' },      // Red nose\n    { emoji: 'üí™', name: 'Strong', color: '#F59E0B' },     // Skin/muscle tone\n    { emoji: 'üòÖ', name: 'Nervous', color: '#60A5FA' },    // Blue sweat drop\n    { emoji: 'üéâ', name: 'Celebration', color: '#A855F7' }, // Multi-color party\n    { emoji: 'ü§î', name: 'Thinking', color: '#6B7280' },   // Neutral gray\n    { emoji: 'üôà', name: 'See No Evil', color: '#A0522D' }, // Monkey brown\n    { emoji: 'üò§', name: 'Confident', color: '#DC2626' }   // Red anger/steam\n  ];\n\n  const handleEmojiClick = (emojiData) => {\n    if (!socket || !gameState || !user) {\n      return;\n    }\n\n    // Send emoji reaction to server\n    socket.emit('emojiReaction', {\n      gameId: gameState.id,\n      emoji: emojiData.emoji,\n      color: emojiData.color,\n      playerName: user.username\n    });\n\n    // Close panel after selection\n    setIsOpen(false);\n  };\n\n  const togglePanel = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div className={styles.emojiReactions}>\n      {/* Toggle button */}\n      <button\n        className={styles.toggleButton}\n        onClick={togglePanel}\n        data-gamepad-focusable=\"true\"\n        aria-label=\"Toggle emoji reactions\"\n      >\n        üòä\n      </button>\n\n      {/* Emoji panel */}\n      {isOpen && (\n        <div className={styles.emojiPanel}>\n          <div className={styles.emojiGrid}>\n            {emojis.map((emojiData, index) => (\n              <button\n                key={index}\n                className={styles.emojiButton}\n                onClick={() => handleEmojiClick(emojiData)}\n                data-gamepad-focusable=\"true\"\n                title={emojiData.name}\n                style={{ '--emoji-color': emojiData.color }}\n              >\n                {emojiData.emoji}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EmojiReactions;","import React, { useEffect, useState } from 'react';\nimport styles from './styles/GameScreen.module.css';\nimport GameHeader from './GameHeader.jsx';\nimport CardDisplay from './CardDisplay.jsx';\nimport BettingPanel from './BettingPanel.jsx';\nimport PlayerList from './PlayerList.jsx';\nimport PotDisplay from './PotDisplay.jsx';\nimport DeckDisplay from './DeckDisplay.jsx';\nimport AnteControls from './AnteControls.jsx';\nimport ResultsPanel from './ResultsPanel.jsx';\nimport AceChoicePanel from './AceChoicePanel.jsx';\nimport SecondChancePanel from './SecondChancePanel.jsx';\nimport GameLog from './GameLog.jsx';\nimport EmojiReactions from './EmojiReactions.jsx';\n\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useGamepadNavigation } from '../hooks/useGamepadNavigation';\n\nconst GameScreen = ({ onReturnToLobby }) => {\n  // Track modal state to hide emoji reactions\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  \n  // Get state and actions from context\n  const { \n    gameState,\n    error,\n    clearError\n  } = useGameContext();\n  \n  // Initialize gamepad navigation\n  const { isGamepadConnected } = useGamepadNavigation(true);\n  \n  // Auto-clear errors after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 10000); // 10 seconds\n      \n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n  \n  // Handle returning to lobby\n  const handleLeaveGame = () => {\n    // Call the parent callback\n    if (onReturnToLobby) {\n      onReturnToLobby();\n    }\n  };\n  \n  // Get the socket instance for event emission\n  const { socket } = useSocket(); \n  // Get the authenticated user data from AuthContext\n  const { user } = useAuth(); \n  \n  // Safety check for null gameState or missing phase\n  if (!gameState) {\n    return (\n      <div className={styles.loadingContainer}>\n        <p>Loading game state...</p>\n      </div>\n    );\n  }\n  \n  // Make sure we have a valid phase\n  const phase = gameState.phase || 'waiting';\n\n  // Find the current player based on the authenticated user ID from AuthContext\n  // Assuming the user object from AuthContext has an 'id' property\n  const currentUserId = user?.id; // Use user.id (adjust if property name is different e.g., user.userId)\n  const currentPlayer = gameState.players && currentUserId ? gameState.players[currentUserId] : null;\n\n  // Handler for the 'I'm Back' button\n  const handleImBackClick = () => {\n    if (socket && gameState.id) {\n      socket.emit('imBack', { gameId: gameState.id });\n    } else {\n      console.error(\"Cannot emit 'imBack': socket or gameId missing.\");\n    }\n  };\n\n\n  return (\n    <div className={styles.gameContainer}>\n      <div className={`${styles.gameScreen} mobile-scale-content`}>\n        <GameHeader \n          handleLeaveGame={handleLeaveGame} \n          onModalStateChange={setIsModalOpen}\n        />\n        \n        {error && (\n          <div className={styles.errorContainer}>\n            <p className={styles.errorText}>{error}</p>\n          </div>\n        )}\n        \n        <div className={styles.gameInfoWrapper}>\n          <DeckDisplay />\n          <PotDisplay />\n        </div>\n        \n        {/* Always show the CardDisplay component */}\n        <CardDisplay />\n        \n        {/* Primary check: Is the current player sitting out? */}\n        {currentPlayer?.isSittingOut ? (\n          // If sitting out, always show the 'I'm Back!' button regardless of phase\n          <button onClick={handleImBackClick} className={styles.imBackButton} data-gamepad-focusable=\"true\" autoFocus> \n            I'm Back!\n          </button>\n        ) : (\n          // If not sitting out, render controls based on the game phase\n          phase === 'waiting' ? (\n            /* Show ante controls during waiting phase */\n            <AnteControls />\n          ) : phase === 'results' ? (\n            /* Show the results panel during results phase */\n            <ResultsPanel />\n          ) : gameState.waitingForAceDecision ? (\n            /* Show the Ace choice panel when first card is an Ace */\n            <AceChoicePanel />\n          ) : gameState.waitingForSecondChance ? (\n            /* Show the Second Chance panel when matching cards are dealt */\n            <SecondChancePanel />\n          ) : phase === 'betting' ? (\n            /* Show the betting panel only during betting phase */\n            <BettingPanel />\n          ) : null\n        )}\n        \n        <div className={styles.gameBottomSection}>\n          <div className={styles.playerListContainer}>\n            <PlayerList />\n          </div>\n          <div className={styles.gameLogContainer}>\n            <GameLog />\n          </div>\n        </div>\n      </div>\n      \n      {/* Emoji reactions - positioned outside scaled content, hidden when modal is open */}\n      {!isModalOpen && <EmojiReactions />}\n    </div>\n  );\n};\n\nexport default GameScreen;\n","import React, { useState } from 'react';\nimport styles from './PasswordPromptModal.module.css';\nimport GamepadInput from '../GamepadInput';\n\nfunction PasswordPromptModal({ isOpen, onClose, onSubmit, gameId }) {\n  const [password, setPassword] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e) => {\n    e.preventDefault(); // Prevent default form submission\n    onSubmit(password);\n    setPassword(''); // Clear password after submit\n  };\n\n  const handleCancel = () => {\n    setPassword(''); // Clear password on cancel\n    onClose();\n  };\n\n  return (\n    <div className={styles.modalOverlay}>\n      <div className={styles.modalContent}>\n        <h2>Password Required</h2>\n        <p>Please enter the password for game <strong>{gameId || ''}</strong>:</p>\n        <form onSubmit={handleSubmit}>\n          <GamepadInput\n            title=\"Enter Game Password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className={styles.passwordInput}\n            autoFocus\n            required\n          />\n          <div className={styles.modalActions}>\n            <button type=\"button\" onClick={handleCancel} className={`${styles.modalButton} ${styles.cancelButton}`} data-gamepad-focusable=\"true\">\n              Cancel\n            </button>\n            <button type=\"submit\" className={`${styles.modalButton} ${styles.submitButton}`} data-gamepad-focusable=\"true\">\n              Join Game\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PasswordPromptModal;\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { GameProvider, useGameContext } from '../contexts/GameContext';\nimport GameScreen from './GameScreen';\nimport { useSocket } from '../contexts/SocketContext';\nimport { LoadingScreen } from './common/LoadingScreen';\nimport PasswordPromptModal from './common/PasswordPromptModal';\nimport soundService from '../services/SoundService';\n\nconst GameRoom = () => {\n  const { gameId } = useParams();\n  const navigate = useNavigate();\n  const { socket, isConnected } = useSocket();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\n  const hasInitiatedJoin = useRef(false); // Ref to track true initiation\n\n  const handleReturnToLobby = useCallback(() => {\n    if (socket && isConnected && gameId) {\n      soundService.play('ui.leave'); \n      socket.emit('leaveGame', { gameId }); \n      navigate('/');\n    }\n  }, [socket, isConnected, gameId, navigate]);\n\n  const handlePasswordSubmit = useCallback((password) => {\n    setIsPasswordModalOpen(false);\n    if (socket && gameId && password) {\n      setError(null); \n      socket.emit('joinGame', { gameId, password });\n      setLoading(true);\n    }\n  }, [socket, gameId]);\n\n  const handlePasswordCancel = useCallback(() => {\n    setIsPasswordModalOpen(false);\n    navigate('/');\n  }, [navigate]);\n\n  useEffect(() => {\n    setError(null);          \n    setIsPasswordModalOpen(false); \n    setLoading(true);        \n  }, [gameId]);\n\n  useEffect(() => {\n    if (!socket) {\n      return; \n    }\n\n    const onGameJoined = (data) => {\n      if (data && data.game && data.game.id === gameId) {\n        soundService.play('ui.join');\n        setLoading(false);\n        setError(null);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    const onError = (errorData) => {\n      const message = errorData.message || 'An unknown error occurred';\n\n      if (message === 'Password required') {\n        console.error(errorData);\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n        setError(null);\n      } else if (message === 'Invalid password') {\n        console.error(errorData);\n        setError('Invalid password.');\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n      } else if (message === 'Game not found') {\n        navigate('/');\n      } else if (message === 'Game is full') {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n        setTimeout(() => navigate('/'), 3000);\n      } else {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    socket.on('gameJoined', onGameJoined);\n    socket.on('error', onError);\n\n    return () => {\n      socket.off('gameJoined', onGameJoined);\n      socket.off('error', onError);\n    };\n  }, [socket, gameId, navigate]); \n\n  useEffect(() => {\n    // Use ref to prevent double emission due to StrictMode or rapid state changes\n    if (socket && gameId && !hasInitiatedJoin.current) {\n      hasInitiatedJoin.current = true; // Mark as initiated *immediately*\n      setLoading(true); \n      setError(null); \n      setIsPasswordModalOpen(false); \n      socket.emit('joinGame', { gameId });\n    } else {\n    }\n    // Dependencies remain minimal: only run when socket or gameId fundamentally change\n  }, [socket, gameId]); \n\n  const GameRoomContent = () => {\n    const { gameState } = useGameContext(); \n    const { socket } = useSocket();\n    \n    // Add beforeunload listener to warn users who are ready (in an active hand)\n    useEffect(() => {\n      const handleBeforeUnload = (e) => {\n        const currentUserId = socket?.auth?.userId;\n        const currentPlayer = currentUserId && gameState?.players ? gameState.players[currentUserId] : null;\n        const isPlayerReady = currentPlayer?.isReady || false;\n        \n        // Only show warning if player is ready (has ante'd and is in the hand)\n        if (isPlayerReady) {\n          e.preventDefault();\n          e.returnValue = 'You have money in the pot! Are you sure you want to leave?';\n          return e.returnValue;\n        }\n      };\n      \n      window.addEventListener('beforeunload', handleBeforeUnload);\n      \n      return () => {\n        window.removeEventListener('beforeunload', handleBeforeUnload);\n      };\n    }, [gameState, socket]);\n\n    return (\n      <>\n        <PasswordPromptModal \n          isOpen={isPasswordModalOpen}\n          onClose={handlePasswordCancel}\n          onSubmit={handlePasswordSubmit}\n          gameId={gameId} \n        />\n\n        {loading && <LoadingScreen message={`Joining game ${gameId}...`} />} \n        \n        {error && !loading && !isPasswordModalOpen && (\n          <div className=\"error-container\" style={{ padding: '20px', color: 'red', textAlign: 'center' }}>\n            <h2>An error occurred</h2>\n            <p>{error}</p>\n        {/* Suggest refreshing the page instead of navigating back */}\n        <button onClick={() => window.location.reload()}>Refresh Page</button>\n          </div>\n        )}\n        \n        {!loading && !error && gameState && \n          <GameScreen onReturnToLobby={handleReturnToLobby} />\n        }\n      </>\n    );\n  };\n\n  return (\n    <GameProvider gameId={gameId}>\n      <GameRoomContent /> \n    </GameProvider>\n  );\n};\n\nexport default GameRoom;\n"],"names":["ICONS","TIMERS","DEALING_DURATION","BETTING_DURATION","REVEALING_DURATION","RESULTS_DURATION","GameContext","createContext","useGameContext","context","useContext","Error","GameProvider","children","gameId","initialGameState","socket","error","socketError","useSocket","user","useAuth","gameState","setGameState","useState","useRef","prevActivePlayerRef","setError","clearError","useCallback","useEffect","on","data","console","log","game","id","setTimeout","emit","JSON","stringify","currentPlayerId","isMyTurn","wasPreviouslyMyTurn","current","soundService","play","message","off","placeBet","amount","bet","err","payAnte","dealCards","revealMiddleCard","nextRound","playerReady","playerUnready","value","jsx","Provider","ExitIcon","color","size","jsxRuntimeExports","jsxs","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","x1","y1","x2","y2","LeaveButton","onClick","title","restProps","IconButton","icon","variant","phaseDisplayMap","waiting","text","dealing","revealing","results","GameHeader","handleLeaveGame","onModalStateChange","currentUserId","_a","auth","userId","currentPlayer","players","playerBalance","balance","currentPhase","phase","isPlayerReady","isReady","timeLeft","setTimeLeft","showGameSummary","setShowGameSummary","showStoreModal","setShowStoreModal","isPreferencesOpen","setIsPreferencesOpen","isRulesOpen","setIsRulesOpen","isStatsOpen","setIsStatsOpen","timer","setInterval","Math","max","prev","waitingForAceDecision","phaseInfo","waitingForSecondChance","isCurrentPlayersTurn","_b","name","className","styles","headerContainer","desktopLayout","headerLeft","gameTitle","liveTag","gameIdText","gameIdLink","tabIndex","headerCenter","gamePhase","phaseBettingYourTurn","phaseBettingWaiting","charAt","toUpperCase","slice","phaseIcon","phaseText","timerBar","timerProgress","style","headerRight","controlsStack","balanceDisplay","CurrencyAmount","Number","controlsGroup","PreferencesButton","RulesButton","PlayerStatsButton","StoreButton","disabled","mobileLayout","mobileTopRow","mobileRight","mobileControlsStack","mobileActions","mobileBottomRow","GameSummaryModal","onClose","gameData","StoreModal","ArrowIcon","direction","rotation","transform","display","transformOrigin","CardDisplay","loading","firstCard","secondCard","thirdCard","dealer","cardLabels","J","Q","K","A","suitSymbols","hearts","diamonds","clubs","spades","renderCard","card","index","cardBack","isRed","suit","isAce","isAceLow","isMiddleCard","redCard","blackCard","aceCard","aceIndicator","aceLow","aceHigh","indicatorContent","cardCorner","cardValue","cardSuit","cardCenter","bottomRight","cardDisplayContainer","cardsRow","dealingPhase","revealingPhase","displayCards","map","renderCardLayout","PotButton","props","background","BettingPanel","customBet","setCustomBet","pot","potAmount","isCurrentPlayer","myPlayer","handleCustomBetChange","e","target","replace","maxBet","min","parseInt","toString","handleCustomBetSubmit","isNaN","betAmount","handleKeyPress","key","autoFocus","GamepadInput","type","placeholder","onChange","onKeyPress","PlayerList","userDataContext","UserDataContext","userIds","Object","values","player","filter","Boolean","length","prefetchUsers","dealerId","gameTransactions","playerTotals","totals","keys","seats","playerId","isCurrentUser","isDealer","disconnected","UserAvatar","showName","BalanceDisplay","isSittingOut","prevBalance","setPrevBalance","animationClass","setAnimationClass","timeoutRef","clearTimeout","PotDisplay","round","DeckDisplay","deckSize","deckCount","AutoAnteToggle","preferences","toggleAutoAnte","usePreferences","checked","autoAnte","async","newValue","success","playerIds","AnteControls","anteAmount","hasEnoughChips","ResultsPanel","result","resultCountdown","playerName","resultsPanel","resultContent","outcome","Fragment","resultText","winText","winnings","winningsText","loseText","penaltyAmount","isTripleAceTie","penaltyWarning","cautionTape","tieText","renderTieResult","renderOutcome","countdownContainer","countdownText","countdownSeconds","countdownProgress","countdownBar","AceChoicePanel","countdown","setCountdown","prevCount","clearInterval","handleAceChoice","currentPlayerName","_c","SecondChancePanel","setLoading","actionType","setActionType","handleSecondChance","anteAgain","GameLog","isExpanded","setIsExpanded","gameLog","logEntries","toggleExpanded","displayEntries","entry","timestamp","Date","toLocaleTimeString","hour","minute","second","EmojiReactions","isOpen","setIsOpen","emoji","emojiData","username","handleEmojiClick","GameScreen","onReturnToLobby","isModalOpen","setIsModalOpen","useGamepadNavigation","PasswordPromptModal","onSubmit","password","setPassword","preventDefault","required","GameRoom","useParams","navigate","useNavigate","isConnected","isPasswordModalOpen","setIsPasswordModalOpen","hasInitiatedJoin","handleReturnToLobby","handlePasswordSubmit","handlePasswordCancel","onGameJoined","onError","errorData","GameRoomContent","handleBeforeUnload","socket2","returnValue","window","addEventListener","removeEventListener","LoadingScreen","padding","textAlign","location","reload"],"mappings":"0UAqCO,MA+BMA,EACN,KADMA,EAEH,KAFGA,EAGJ,IAHIA,EAIL,MAIKC,OAAEA,GAvCe,CAU5BA,OAAQ,CAINC,iBAAkB,IAClBC,iBAAkB,IAElBC,mBAAoB,IACpBC,iBAAkB,MCjDhBC,EAAcC,EAAAA,gBAGPC,EAAiB,KACtB,MAAAC,EAAUC,aAAWJ,GAC3B,QAAgB,IAAZG,EACI,MAAA,IAAIE,MAAM,qDAEX,OAAAF,CAAA,EAGIG,EAAe,EAAGC,WAAUC,SAAQC,mBAAmB,SAElE,MAAMC,OAAEA,EAAQC,MAAOC,GAAgBC,KAGjCC,KAAEA,GAASC,KAIVC,EAAWC,GAAgBC,EAAAA,SAAST,GAGpBU,EAAAA,OAAO,CAAE,GAG1B,MAAAC,EAAsBD,SAAO,OAG5BR,EAAOU,GAAYH,EAAAA,SAAS,MAG7BI,EAAaC,EAAAA,aAAY,KAC7BF,EAAS,KAAI,GACZ,IAGHG,EAAAA,WAAU,KACJZ,GACFS,EAAST,EAAW,GAErB,CAACA,IAEJY,EAAAA,WAAU,KACR,GAAKd,EA0DL,OAvDOA,EAAAe,GAAG,mBAAoBC,IAC5BC,QAAQC,IAAI,+BAA+BF,EAAKlB,SAAUkB,EAAKG,MAG/DZ,EAAaS,EAAKG,MAGlBF,QAAQC,IAAI,+CAAqD,MAANd,OAAM,EAAAA,EAAAgB,MAGjET,EAAS,MAGLK,EAAKG,MAAQH,EAAKG,KAAKC,IAEzBC,YAAW,KACTJ,QAAQC,IAAI,yDACZlB,EAAOsB,KAAK,eAAgB,CAAExB,OAAQkB,EAAKG,KAAKC,IAAI,GACnD,IAAG,IAKHpB,EAAAe,GAAG,aAAcC,IAClB,GAAAA,GAAQA,EAAKI,IAEXG,KAAKC,UAAUlB,KAAeiB,KAAKC,UAAUR,GAAO,CAElD,GAAAA,EAAKS,kBAAmB,MAAArB,OAAA,EAAAA,EAAMgB,IAAI,CAC9B,MAAAM,EAAWV,EAAKS,kBAAoBrB,EAAKgB,GACzCO,EAAsBjB,EAAoBkB,UAAYxB,EAAKgB,GAG7DM,IAAaC,GACfE,EAAaC,KAAK,YAIpBpB,EAAoBkB,QAAUZ,EAAKS,eAAA,CAGrClB,EAAaS,GACFJ,GAAA,CACb,IAMGZ,EAAAe,GAAG,aAAcgB,IACdd,QAAAhB,MAAM,cAAe8B,GAC7BpB,EAASoB,EAAO,IAIX,KACL/B,EAAOgC,IAAI,mBACXhC,EAAOgC,IAAI,aACXhC,EAAOgC,IAAI,YAAW,CACxB,GACC,CAAChC,IAGE,MAAAiC,EAAWpB,eAAaqB,IACxB,GAAClC,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,WAAY,CAAEa,IAAKD,EAAQpC,iBAChCsC,GACCnB,QAAAhB,MAAM,qBAAsBmC,GACpCzB,EAAS,yCAAwC,IAElD,CAACX,EAAQF,IAENuC,EAAUxB,EAAAA,aAAY,KACtB,GAACb,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,UAAW,CAAExB,iBAClBsC,GACCnB,QAAAhB,MAAM,qBAAsBmC,GACpCzB,EAAS,wCAAuC,IAEjD,CAACX,EAAQF,IAENwC,EAAYzB,EAAAA,aAAY,KACxB,GAACb,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,YAAa,CAAExB,iBACpBsC,GACCnB,QAAAhB,MAAM,uBAAwBmC,GACtCzB,EAAS,0CAAyC,IAEnD,CAACX,EAAQF,IAENyC,EAAmB1B,EAAAA,aAAY,KAC/B,GAACb,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,mBAAoB,CAAExB,iBAC3BsC,GACCnB,QAAAhB,MAAM,+BAAgCmC,GAC9CzB,EAAS,kDAAiD,IAE3D,CAACX,EAAQF,IAEN0C,EAAY3B,EAAAA,aAAY,KACxB,GAACb,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,YAAa,CAAExB,iBACpBsC,GACCnB,QAAAhB,MAAM,8BAA+BmC,GAC7CzB,EAAS,kDAAiD,IAE3D,CAACX,EAAQF,IAGN2C,EAAc5B,EAAAA,aAAY,KAC1B,GAACb,GAAWF,EAEZ,IAEFE,EAAOsB,KAAK,eACLc,GACCnB,QAAAhB,MAAM,8BAA+BmC,GAC7CzB,EAAS,gDAA+C,IAEzD,CAACX,EAAQF,IAGN4C,EAAgB7B,EAAAA,aAAY,KAC5B,GAACb,GAAWF,EAEZ,IACFE,EAAOsB,KAAK,iBACLc,GACCnB,QAAAhB,MAAM,gCAAiCmC,GAC/CzB,EAAS,kDAAiD,IAE3D,CAACX,EAAQF,IAkBN6C,EAAQ,CAEZrC,YACAL,QACAH,SAGAmC,WACAI,UACAI,cACAC,gBACAJ,YACAC,mBACAC,YAEA5B,cAGF,SACGgC,IAAAtD,EAAYuD,SAAZ,CAAqBF,QACnB9C,YACH,m+CCjOEiD,EAAW,EAAGC,QAAQ,eAAgBC,OAAO,MAE/CC,EAAAC,KAAC,MAAA,CACCC,MAAM,6BACNC,MAAOJ,EACPK,OAAQL,EACRM,QAAQ,YACRC,KAAK,OACLC,OAAQT,EACRU,YAAY,IACZC,cAAc,QACdC,eAAe,QAGf9D,SAAA,GAAC+C,IAAA,OAAA,CAAKgB,EAAE,8CACRhB,IAAC,WAAS,CAAAiB,OAAO,qBACjBjB,EAAAA,IAAC,QAAKkB,GAAG,KAAKC,GAAG,KAAKC,GAAG,IAAIC,GAAG,UCbhCC,EAAc,EAClBC,UACAC,QAAQ,gBACLC,KAGDpB,EAAAL,IAAC0B,EAAA,CACCC,OAAO3B,IAAAE,EAAA,CAASC,MAAM,QAAQC,KAAM,KACpCoB,QACAD,UACAK,QAAQ,YACJH,ICNJI,EAAkB,CACtBC,QAAS,CAAEC,KAAM,sBAAuBJ,KAAM,MAC9CK,QAAS,CAAED,KAAM,gBAAiBJ,KAAMvF,GACxC6F,UAAW,CAAEF,KAAM,kBAAmBJ,KAAM,MAC5CO,QAAS,CAAEH,KAAM,gBAAiBJ,KAAM,OAGpCQ,EAAa,EAAGC,kBAAiBC,iCACrC,MAAM3E,UAAEA,EAAAR,OAAWA,GAAWN,KACxBQ,OAAEA,GAAWG,KACbC,KAAEA,GAASC,IAGX6E,EAAgB,OAAAC,EAAQ,MAAAnF,OAAA,EAAAA,EAAAoF,WAAM,EAAAD,EAAAE,OAC9BC,EAAgBJ,IAAiB,MAAA5E,OAAA,EAAAA,EAAWiF,SAAUjF,EAAUiF,QAAQL,GAAiB,KACzFM,GAAgB,MAAAF,OAAA,EAAAA,EAAeG,iBAAWrF,WAAMqF,UAAW,EAC3DC,SAAepF,WAAWqF,QAAS,UAGnCC,GAAgB,MAAAN,OAAAA,EAAAA,EAAeO,WAAW,GACzCC,EAAUC,GAAevF,EAAAA,SAAS,OAClCwF,EAAiBC,GAAsBzF,EAAAA,UAAS,IAChD0F,EAAgBC,GAAqB3F,EAAAA,UAAS,IAC9C4F,EAAmBC,GAAwB7F,EAAAA,UAAS,IACpD8F,EAAaC,GAAkB/F,EAAAA,UAAS,IACxCgG,EAAaC,GAAkBjG,EAAAA,UAAS,GAG/CM,EAAAA,WAAU,KACJ,IAAA4F,EA0BJ,MAxBqB,YAAjBhB,GACFK,EAAY9G,EAAOC,kBACnBwH,EAAQC,aAAY,KAClBZ,MAAoBa,KAAKC,IAAI,EAAGC,EAAO,MAAI,GAC1C,MACuB,YAAjBpB,GACTK,EAAY9G,EAAOE,kBACnBuH,EAAQC,aAAY,KAClBZ,MAAoBa,KAAKC,IAAI,EAAGC,EAAO,MAAI,GAC1C,MACuB,cAAjBpB,GACTK,EAAY9G,EAAOG,oBACnBsH,EAAQC,aAAY,KAClBZ,MAAoBa,KAAKC,IAAI,EAAGC,EAAO,MAAI,GAC1C,MACuB,YAAjBpB,GACTK,EAAY9G,EAAOI,kBACnBqH,EAAQC,aAAY,KAClBZ,MAAoBa,KAAKC,IAAI,EAAGC,EAAO,MAAI,GAC1C,MAEHf,EAAY,MAGP,KACDW,iBAAqBA,EAAK,CAChC,GACC,CAAChB,EAAc,MAAApF,OAAA,EAAAA,EAAWyG,wBAG7BjG,EAAAA,WAAU,KAEJmE,GACFA,EAFkBe,GAAmBE,GAAkBE,GAAqBE,GAAeE,EAE7D,GAE/B,CAACR,EAAiBE,EAAgBE,EAAmBE,EAAaE,EAAavB,IAG9E,IAAA+B,EAAYvC,EAAgBiB,IAAiB,CAAEf,KAAM,gBAAiBJ,KAAM,MAG5E,MAAAjE,OAAA,EAAAA,EAAWyG,wBAA0C,YAAjBrB,IACtCsB,EAAY,CAAErC,KAAM,qBAAsBJ,KAAM,cAI9CjE,WAAW2G,0BACbD,EAAY,CAAErC,KAAM,yBAA0BJ,KAAM,OAIhD,MAAA2C,EAAuBlH,IAAU,OAAAmH,EAAOnH,EAAAoF,eAAMC,UAAU,MAAA/E,OAAA,EAAAA,EAAWmB,mBAAoBzB,EAAOoF,KAAKC,OAGzG,GAAqB,YAAjBK,IAAyC,MAAXpF,OAAW,EAAAA,EAAAmB,yBAAmBnB,WAAWiF,SAAS,CAClF,MAAMD,EAAgBhF,EAAUiF,QAAQjF,EAAUmB,iBAKlCuF,EAHZ1B,EACE4B,EAEU,CACVvC,KAAM,cACNJ,KAAM,MAII,CACVI,KAAM,GAAGW,EAAc8B,kBACvB7C,KAAM,MAIE,CAAEI,KAAM,gBAAiBJ,KAAM,KAC7C,CAGF,SACGrB,KAAA,MAAA,CAAImE,UAAWC,EAAOC,gBAErB1H,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOE,cAErB3H,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOG,WACrB5H,SAAA,GAACqD,KAAA,KAAA,CAAGmE,UAAWC,EAAOI,UAAW7H,SAAA,CAAA,cAAY+C,EAAAA,IAAA,OAAA,CAAKyE,UAAWC,EAAOK,QAAS9H,SAAI,YAChF+C,EAAAA,IAAA,IAAA,CAAEyE,UAAWC,EAAOM,WACnB/H,SAAAoD,EAAAC,KAAC,OAAA,CACCmE,UAAWC,EAAOO,WAClB1D,QAAS,IAAM8B,GAAmB,GAClC7B,MAAM,6BACN,yBAAuB,OACvB0D,SAAS,IACVjI,SAAA,CAAA,SACQC,UAMZ8C,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,EAAOS,aACrBlI,SAAAoD,EAAAC,KAAC,MAAA,CACCmE,UAAW,GAAGC,EAAOU,aAA8B,YAAjBtC,EAC/BwB,EAAuBI,EAAOW,qBAAuBX,EAAOY,oBAC7DZ,EAAO,QAAQ5B,EAAayC,OAAO,GAAGC,cAAgB1C,EAAa2C,MAAM,QAC3E,aAAY3C,EAEZ7F,SAAA,CAAA+C,MAAC,OAAK,CAAAyE,UAAWC,EAAOgB,UAAYzI,WAAU0E,aAC7C,OAAK,CAAA8C,UAAWC,EAAOiB,UAAY1I,WAAU8E,OAChC,OAAbmB,GACClD,EAAAA,IAAC,MAAI,CAAAyE,UAAWC,EAAOkB,SACrB3I,SAAAoD,EAAAL,IAAC,MAAA,CACCyE,UAAWC,EAAOmB,cAClBC,MAAO,CACLtF,MAAW0C,GAA6B,YAAjBJ,EAA6BzG,EAAOC,iBACrB,YAAjBwG,EAA6BzG,EAAOE,iBACnB,cAAjBuG,EAA+BzG,EAAOG,mBACtCH,EAAOI,kBAAqB,IAH1C,cAYnBuD,EAAAA,IAAC,OAAIyE,UAAWC,EAAOqB,YACrB9I,SAACqD,EAAAA,KAAA,MAAA,CAAImE,UAAWC,EAAOsB,cACrB/I,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOuB,eAAgBhJ,SAAA,CAAA,kBAC3BiJ,EAAe,CAAA5G,OAAQ6G,OAAOvD,GAAgBxC,KAAK,eAE9DE,KAAA,MAAA,CAAImE,UAAWC,EAAO0B,cACrBnJ,SAAA,CAAAoD,EAAAL,IAACqG,EAAA,CACChE,mBAAoBoB,EACpB,yBAAuB,SAEzBpD,EAAAL,IAACsG,EAAA,CACCjE,mBAAoBsB,EACpB,yBAAuB,SAEzBtD,EAAAL,IAACuG,EAAA,CACClE,mBAAoBwB,EACpB,yBAAuB,SAEzB7D,MAACwG,GAAYjF,QAAS,IAAMgC,GAAkB,GAAO,yBAAuB,SAC5ElD,EAAAL,IAACsB,EAAA,CACCC,QAASa,EACTqE,SAAUzD,EACV,yBAAuB,sBAQhC1C,KAAA,MAAA,CAAImE,UAAWC,EAAOgC,aAErBzJ,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOiC,aACrB1J,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOG,WACrB5H,SAAA,GAACqD,KAAA,KAAA,CAAGmE,UAAWC,EAAOI,UAAW7H,SAAA,CAAA,cAAY+C,EAAAA,IAAA,OAAA,CAAKyE,UAAWC,EAAOK,QAAS9H,SAAI,YAChF+C,EAAAA,IAAA,IAAA,CAAEyE,UAAWC,EAAOM,WACnB/H,SAAAoD,EAAAC,KAAC,OAAA,CACCmE,UAAWC,EAAOO,WAClB1D,QAAS,IAAM8B,GAAmB,GAClC7B,MAAM,6BACN,yBAAuB,OACvB0D,SAAS,IACVjI,SAAA,CAAA,SACQC,UAKb8C,EAAAA,IAAC,OAAIyE,UAAWC,EAAOkC,YACrB3J,SAACqD,EAAAA,KAAA,MAAA,CAAImE,UAAWC,EAAOmC,oBACrB5J,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,EAAOuB,eAAgBhJ,SAAA,CAAA,kBAC3BiJ,EAAe,CAAA5G,OAAQ6G,OAAOvD,GAAgBxC,KAAK,eAE9DE,KAAA,MAAA,CAAImE,UAAWC,EAAOoC,cACrB7J,SAAA,CAAAoD,EAAAL,IAACqG,EAAA,CACChE,mBAAoBoB,EACpB,yBAAuB,SAEzBpD,EAAAL,IAACsG,EAAA,CACCjE,mBAAoBsB,EACpB,yBAAuB,SAEzBtD,EAAAL,IAACuG,EAAA,CACClE,mBAAoBwB,EACpB,yBAAuB,SAEzB7D,MAACwG,GAAYjF,QAAS,IAAMgC,GAAkB,GAAO,yBAAuB,SAC5ElD,EAAAL,IAACsB,EAAA,CACDC,QAASa,EACTqE,SAAUzD,EACV,yBAAuB,oBAQ9BhD,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,EAAOqC,gBACrB9J,SAAAoD,EAAAC,KAAC,MAAA,CACCmE,UAAW,GAAGC,EAAOU,aAA8B,YAAjBtC,EAC/BwB,EAAuBI,EAAOW,qBAAuBX,EAAOY,oBAC7DZ,EAAO,QAAQ5B,EAAayC,OAAO,GAAGC,cAAgB1C,EAAa2C,MAAM,QAC3E,aAAY3C,EAEZ7F,SAAA,CAAA+C,MAAC,OAAK,CAAAyE,UAAWC,EAAOgB,UAAYzI,WAAU0E,aAC7C,OAAK,CAAA8C,UAAWC,EAAOiB,UAAY1I,WAAU8E,OAChC,OAAbmB,GACClD,EAAAA,IAAC,MAAI,CAAAyE,UAAWC,EAAOkB,SACrB3I,SAAAoD,EAAAL,IAAC,MAAA,CACCyE,UAAWC,EAAOmB,cAClBC,MAAO,CACLtF,MAAW0C,GAA6B,YAAjBJ,EAA6BzG,EAAOC,iBACrB,YAAjBwG,EAA6BzG,EAAOE,iBACnB,cAAjBuG,EAA+BzG,EAAOG,mBACtCH,EAAOI,kBAAqB,IAH1C,iBAapB2G,GACC/C,EAAAL,IAACgH,EAAA,CACCC,QAAS,IAAM5D,GAAmB,GAClC6D,SAAUxJ,IAKb4F,GACCjD,EAAAL,IAACmH,EAAA,CACCF,QAAS,IAAM1D,GAAkB,OAGvC,8mBCvRE6D,EAAY,EAAGC,YAAY,KAAMlH,QAAQ,eAAgBC,OAAO,OAE9D,MAAAkH,EAAyB,SAAdD,EAAuB,iBAAmB,eAGzD,OAAAhH,EAAAL,IAAC,MAAA,CACCO,MAAM,6BACNC,MAAOJ,EACPK,OAAQL,EACRM,QAAQ,YACRC,KAAK,OACLC,OAAQT,EACRU,YAAY,IACZC,cAAc,QACdC,eAAe,QACf+E,MAAO,CAAEyB,UAAWD,EAAUE,QAAS,eAAgBC,gBAAiB,UAGxExK,SAAA+C,EAAAA,IAAC,OAAK,CAAAgB,EAAE,gCACV,ECvBE0G,EAAc,KACZ,MAAAhK,UAAEA,GAAcd,IAEtB,IAAKc,EACKsC,OAAAA,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,EAAOiD,QAAS1K,SAAqB,0BAGxD,MAAA2K,UACJA,EAAAC,WACAA,EAAAC,UACAA,EAAA/E,MACAA,EAAAgF,OACAA,GACErK,EAIuB,MAAAqK,GAAAA,EAAAvD,KAC3B,MAAMwD,EAAa,CACjB,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,GAAM,KACtFC,EAAK,IAAKC,EAAK,IAAKC,EAAK,IAAKC,EAAK,KAI/BC,EAAc,CAClBC,OAAU,IACVC,SAAY,IACZC,MAAS,IACTC,OAAU,IAEV,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQDC,EAAa,CAACC,EAAMC,KACpB,IAACD,EACF3I,OAAAA,MAAA,MAAA,CAA2ByE,UAAWC,EAAOiE,KAC5C1L,WAAC+C,IAAA,MAAA,CAAIyE,UAAWC,EAAOmE,YADf,SAASD,KAKf,MAAAE,EAVU,OADCC,EAWOJ,EAAKI,OAVG,MAATA,GAAyB,WAATA,GAA8B,aAATA,EAD5C,IAACA,EAYX,MAAAC,EAAuB,MAAfL,EAAK5I,MACbkJ,EAAWN,EAAKM,SAChBC,EAAyB,IAAVN,EAGnB,OAAAvI,EAAAC,KAAC,MAAA,CACCmE,UAAW,GAAGC,EAAOiE,QAAQG,EAAQpE,EAAOyE,QAAUzE,EAAO0E,aAAaJ,EAAQtE,EAAO2E,QAAU,KAElGpM,SAAA,CAAS+L,IAACE,GACTlJ,EAAAA,IAAC,MAAI,CAAAyE,UAAW,GAAGC,EAAO4E,gBAAgBL,EAAWvE,EAAO6E,OAAS7E,EAAO8E,WAAWV,EAAQpE,EAAOyE,QAAUzE,EAAO0E,YACpHnM,SAAAgM,EACE3I,EAAAA,KAAA,OAAA,CAAKmE,UAAWC,EAAO+E,iBAAkBxM,SAAA,CAAA,OAAI+C,EAAAA,IAACoH,GAAUC,UAAU,OAAOlH,MAAO2I,EAAQ,UAAY,UAAW1I,KAAM,QAEtHE,EAAAA,KAAC,OAAK,CAAAmE,UAAWC,EAAO+E,iBAAkBxM,SAAA,CAAA,QAAK+C,EAAAA,IAACoH,GAAUC,UAAU,KAAKlH,MAAO2I,EAAQ,UAAY,UAAW1I,KAAM,YAI1HE,KAAA,MAAA,CAAImE,UAAWC,EAAOgF,WACrBzM,SAAA,CAAA+C,EAAAA,IAAC,OAAIyE,UAAWC,EAAOiF,UAAY1M,SAAW+K,EAAAW,EAAK5I,eAClD,OAAI0E,UAAWC,EAAOkF,SAAW3M,SAAYoL,EAAAM,EAAKI,WAErD/I,EAAAA,IAAC,OAAIyE,UAAWC,EAAOmF,WACpB5M,SAAYoL,EAAAM,EAAKI,QAEpBzI,EAAAA,KAAC,OAAImE,UAAW,GAAGC,EAAOgF,cAAchF,EAAOoF,cAC7C7M,SAAA,CAAA+C,EAAAA,IAAC,OAAIyE,UAAWC,EAAOiF,UAAY1M,SAAW+K,EAAAW,EAAK5I,eAClD,OAAI0E,UAAWC,EAAOkF,SAAW3M,SAAYoL,EAAAM,EAAKI,aArB7C,GAAGJ,EAAK5I,SAAS4I,EAAKI,QAAQH,IAuBxC,EA+BF,OAAA5I,EAAAA,IAAC,MAAI,CAAAyE,UAAWC,EAAOqF,qBACrB9M,SAAC+C,EAAAA,IAAA,MAAA,CAAIyE,UAAW,GAAGC,EAAOsF,YAAsB,YAAVjH,EAAsB2B,EAAOuF,aAAe,MAAgB,cAAVlH,EAAwB2B,EAAOwF,eAAiB,KACrIjN,SA5BkB,MAEvB,IAAIkN,EAAe,CAAC,KAAM,KAAM,MAGhC,OAAKvC,GAAcC,GAAeC,GAK9BF,IACFuC,EAAa,GAAK,IAAIvC,IAGpBC,IACFsC,EAAa,GAAK,IAAItC,IAGpBC,IACFqC,EAAa,GAAK,IAAIrC,IAGjBqC,EAAaC,KAAI,CAACzB,EAAMC,IAAUF,EAAWC,EAAMC,MAhBjDuB,EAAaC,KAAI,CAACzB,EAAMC,IAAUF,EAAWC,EAAMC,IAgBI,EAM1CyB,MAEtB,sjBCvGEC,GAAY,EAAGhL,SAAQmH,SAAAA,EAAUlF,aAAYgJ,KAE/ClK,EAAAC,KAAC,SAAA,CACCmE,UAAW,GAAGC,MAAoB+B,EAAW/B,GAAkB,KAC/DnD,UACAkF,SAAAA,EACA,aAAY,gBAAgBnH,aACxBiL,EAGJtN,SAAA,GAAC+C,IAAA,MAAA,CAAIyE,UAAWC,OAGf1E,IAAA,MAAA,CAAIyE,UAAWC,OAGf1E,IAAA,MAAA,CAAIyE,UAAWC,OAGfpE,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,EAAAA,IAAC,OAAK,CAAAyE,UAAWC,GAAgBzH,SAAG,UACpC+C,IAAC,OAAK,CAAAyE,UAAWC,GACfzH,eAACiJ,EAAe,CAAA5G,SAAgBkL,WAAW,iBC5B/CC,GAAe,aAEnB,MAAM/M,UAAEA,EAAA2B,SAAWA,GAAazC,KAC1BQ,OAAEA,GAAWG,KAEZmN,EAAWC,GAAgB/M,EAAAA,SAAS,IAEvC,IAACF,EAAkB,OAAA,KAEjB,MAAAiF,QACJA,EAAA9D,gBACAA,EACA+L,IAAKC,EAAAA,MACL9H,EAAA6E,UACAA,EAAAC,WACAA,GACEnK,EAGA,GAAU,YAAVqF,EAA4B,OAAA,KAEhC,MAAM+H,EAAkB1N,GAAUyB,KAAoB,OAAA0D,EAAAnF,EAAOoF,WAAM,EAAAD,EAAAE,QAC7DsI,EAAW3N,GAAUuF,IAAW,OAAA4B,EAAOnH,EAAAoF,WAAM,EAAA+B,EAAA9B,QAASE,EAAQvF,EAAOoF,KAAKC,QAAU,KACpFG,EAAgBuD,QAAiB,MAAV4E,OAAU,EAAAA,EAAAlI,UAAW,GAE5CmI,EAAyBC,IAE7B,MAAMlL,EAAQkL,EAAEC,OAAOnL,MAAMoL,QAAQ,UAAW,IAG1CC,EAASpH,KAAKqH,IAAIR,EAAWjI,GAC/B7C,GAASuL,SAASvL,GAASqL,EAChBT,EAAAS,EAAOG,YAEpBZ,EAAa5K,EAAK,EAIhByL,EAAwB,KAC5B,GAAId,IAAce,MAAMf,GAAY,CAC5B,MAAAgB,EAAYJ,SAASZ,EAAW,IAElCgB,GAAa,GAAKA,GAAa1H,KAAKqH,IAAIR,EAAWjI,KACrDvD,EAASqM,GACTf,EAAa,IACf,GAKEgB,EAAkBV,IACR,UAAVA,EAAEW,KACkBJ,GAAA,EA6EtB,OAACV,QAGF,MAAI,CAAArG,UAAWC,EACbzH,SA1EE6N,IAGFxK,KAAA,MAAA,CAAImE,UAAWC,EACdzH,SAAA,GAACqD,KAAA,IAAA,CAAEmE,UAAWC,EAAgBzH,SAAA,CAAA,0BAAqB+C,IAACkG,EAAe,CAAA5G,OAAQ,IAAK,gBAAQ4G,EAAe,CAAA5G,OAAQ0E,KAAKqH,IAAIR,EAAWjI,KAAkB,SAGpJtC,KAAA,MAAA,CAAImE,UAAWC,EACdzH,SAAA,CAAAoD,EAAAL,IAAC,SAAA,CACCyE,UAAW,GAAGC,KAAoBA,MAAwBA,KAC1DnD,QAAS,IAAMlC,EAAS,GACxB,yBAAuB,OACvBwM,WAAS,EACV5O,SAAA,SAIDoD,EAAAL,IAACsK,GAAA,CACChL,OAAQuL,EACRtJ,QAAS,IAAMlC,EAASwL,GACxBpE,SAAUoE,EAAYjI,EACtB,yBAAuB,cAK1BtC,KAAA,MAAA,CAAImE,UAAWC,EACbzH,SAAA,CAAA,CAAC,EAAG,EAAG,GAAGmN,KAAc9K,IACvB,MAAM8L,EAASpH,KAAKqH,IAAIR,EAAWjI,GAC7B6D,EAAWnH,EAAS8L,EAExB,OAAA/K,EAAAL,IAAC,SAAA,CAECyE,UAAW,GAAGC,KAAoB+B,EAAW/B,EAAwB,KACrEnD,QAAS,IAAMlC,EAASC,GACxBmH,SAAAA,EACA,yBAAuB,OAEvBxJ,SAAAoD,EAAAL,IAACkG,GAAe5G,YANXA,EAOP,MAKHgB,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAoD,EAAAL,IAAC8L,EAAA,CACCtK,MAAM,mBACNuK,KAAK,SACLtH,UAAWC,GACXsH,YAAY,SACZjM,MAAO2K,EACPuB,SAAUjB,EACVkB,WAAYP,IAEdtL,EAAAL,IAAC,SAAA,CACCyE,UAAWC,GACXnD,QAASiK,EACT/E,UAAWiE,EACX,yBAAuB,OACxBzN,SAAA,iBA3DoB,OAsEF,IAK3B,8iBCrIEkP,GAAa,WACX,MAAAzO,UAAEA,GAAcd,KAChBQ,OAAEA,GAAWG,IACb6O,EAAkBtP,aAAWuP,GAYnC,GATAnO,EAAAA,WAAU,KACJ,IAAA,MAAAR,OAAA,EAAAA,EAAWiF,UAAWyJ,EAAiB,CACzC,MAAME,EAAUC,OAAOC,OAAO9O,EAAUiF,SAASyH,KAAIqC,GAAUA,EAAOhK,SAAQiK,OAAOC,SACjFL,EAAQM,OAAS,GACnBR,EAAgBS,cAAcP,EAChC,IAED,CAAY,MAAX5O,OAAW,EAAAA,EAAAiF,QAASyJ,KAEnB1O,IAAcA,EAAUiF,QAEzB,SAAA3C,IAAC,OAAIyE,UAAWC,GACdzH,SAAC+C,EAAAA,IAAA,IAAA,CAAE/C,wCAKT,MAAM0F,QAAEA,EAAS9D,gBAAAA,EAAAiO,SAAiBA,mBAAUC,EAAmB,IAAOrP,EAChE4E,EAAgB,OAAAC,EAAQ,MAAAnF,OAAA,EAAAA,EAAAoF,WAAM,EAAAD,EAAAE,OAG9BuK,EAAetP,EAAUuP,QAAU,CAAC,EAC1C,OAAKtK,GAA2C,IAAhC4J,OAAOW,KAAKvK,GAASiK,SAUlCtM,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,EAAAA,IAAC,KAAG,CAAAyE,UAAWC,GAAqBzH,SAAU,qBAE7C,MAAI,CAAAwH,UAAWC,GAEbzH,WAAUkQ,MACRT,QAAmBU,GAAa,OAAbA,GAAqBzK,EAAQyK,KAChDhD,KAAgBgD,IACT,MAAAX,EAAS9J,EAAQyK,GACjBtC,EAAkBsC,IAAavO,EAE/BwO,EAAgBZ,EAAOhK,SAAWH,EAClCgL,EAAWF,IAAaN,EAI5B,OAHqBL,EAAOc,aAG5BlN,EAAAC,KAAC,MAAA,CAECmE,UAAW,uBACPC,yBACAoG,EAAkBpG,GAAuB,yBACzC2I,EAAgB3I,GAAqB,uBAG3CzH,SAAA,GAACqD,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAoD,EAAAL,IAACwN,EAAA,CACC/K,OAAQgK,EAAOhK,OACfrC,KAAK,QACLqN,UAAU,MAEXnN,KAAA,OAAA,CAAKmE,UAAWC,GACdzH,SAAA,CAAOwP,EAAAjI,OACPlE,KAAA,OAAA,CAAKmE,UAAWC,GACdzH,SAAA,CAAYqQ,GAAA,IAAIlR,IAChBqQ,EAAOc,oBAAiB,OAAA,CAAK9I,UAAWC,GAA8BlD,MAAM,sBAAsBvE,SAAe,+BAIvHqD,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,EAAAA,IAAC0N,GAAe,CAAA7K,QAASmK,EAAaI,IAAa,IAEnD/M,EAAAL,IAAC,MAAA,CACCyE,UAAW,yBACPC,4BACA+H,EAAOkB,aAAejJ,GAAqB+H,EAAOxJ,QAAUyB,GAAeA,yBAE/ElD,MAAOiL,EAAOkB,aAAe,cAAiBlB,EAAOxJ,QAAU,QAAU,mBA7BtEmK,EAiCT,WA1DNpN,IAAC,OAAIyE,UAAWC,GACdzH,SAAC+C,EAAAA,IAAA,IAAA,CAAE/C,6CA6DP,EAIEyQ,GAAiB,EAAG7K,cACxB,MAAO+K,EAAaC,GAAkBjQ,EAAAA,SAASiF,IACxCiL,EAAgBC,GAAqBnQ,EAAAA,SAAS,IAC/CoQ,EAAanQ,SAAO,MA6BvBmC,OA3BH9B,EAAAA,WAAU,KACR,GAAI2E,IAAY+K,EAAa,CAG3BG,EADmBlL,EAAU+K,EACElJ,GAAyBA,IAGpDsJ,EAAWhP,SACbiP,aAAaD,EAAWhP,SAIfgP,EAAAhP,QAAUP,YAAW,KAC9BsP,EAAkB,GAAE,GACnB,KAEHF,EAAehL,EAAO,CAGxB,MAAO,KACDmL,EAAWhP,SACbiP,aAAaD,EAAWhP,QAAO,CAEnC,GACC,CAAC6D,IAGD7C,EAAAA,IAAA,OAAA,CAAKyE,UAAW,GAAGC,MAAwBoJ,IAC1C7Q,SAAA+C,MAACkG,EAAe,CAAA5G,OAAQuD,KAC1B,2LCrIEqL,GAAa,KACX,MAAAxQ,UAAEA,GAAcd,IAElB,IAACc,EAAkB,OAAA,KAEvB,MAAMkN,IAAEA,EAAAuD,MAAKA,EAAQ,GAAMzQ,EAE3B,SACG4C,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAC+C,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,GACdzH,eAAC,OAAK,CAAAwH,UAAWC,GAAiBzH,SAAMb,QAEzCkE,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,GAACqD,KAAA,KAAA,CAAGmE,UAAWC,GAAiBzH,SAAA,CAAA,SACzBqD,KAAA,OAAA,CAAKmE,UAAWC,GAAmBzH,SAAA,CAAA,IAAEkR,EAAM,YAElDnO,IAAC,OAAK,CAAAyE,UAAWC,GAAkBzH,SAAC+C,EAAAA,IAAAkG,EAAA,CAAe5G,OAAQsL,EAAKxK,KAAK,kBAEzE,sSCnBEgO,GAAc,KACZ,MAAA1Q,UAAEA,GAAcd,IAElB,IAACc,EAAkB,OAAA,KAGvB,MAAM2Q,SAAEA,EAAW,EAAGC,UAAAA,EAAY,GAAM5Q,EAUxC,SACG4C,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,MAAC,OAAIyE,UAAW,GAAGC,MARjB2J,GAAY,GAAW3J,GACvB2J,GAAY,GAAW3J,GACvB2J,GAAY,GAAW3J,GACpBA,KAMHzH,eAAC,OAAIwH,UAAWC,GAAkBzH,SAAAb,QAEnCkE,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,GAACqD,KAAA,KAAA,CAAGmE,UAAWC,GAAkBzH,SAAA,CAAA,UACzBqD,KAAA,OAAA,CAAKmE,UAAWC,GAAoBzH,SAAA,CAAA,IAAEqR,EAAU,UAEvDtO,EAAAA,IAAA,OAAA,CAAKyE,UAAWC,GAAmBzH,SAASoR,SAEjD,0kBC1BEE,GAAiB,KACrB,MAAMC,YAAEA,EAAaC,eAAAA,EAAgB9G,QAAAA,GAAY+G,KAC3ChR,UAAEA,EAAAmC,YAAWA,GAAgBjD,KAC7BQ,OAAEA,GAAWG,IA6BnB,OAAIoK,EACM3H,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,GAAgBzH,SAAsB,2BAI7DoD,EAAAL,IAAC,OAAIyE,UAAWC,GACdzH,SAACqD,EAAAA,KAAA,QAAA,CAAMmE,UAAWC,GAChBzH,SAAA,CAAAoD,EAAAL,IAAC,QAAA,CACC+L,KAAK,WACL4C,QAASH,EAAYI,SACrB3C,SArCa4C,gBACb,MAAAC,GAAYN,EAAYI,SACxBG,QAAgBN,IAGlB,GAAAK,GAAYC,GAAWlP,EAAa,CAEtC,IAAIkL,EAAW,KACf,GAAI3N,IAAU,OAAAmF,EAAOnF,EAAAoF,WAAM,EAAAD,EAAAE,gBAAU/E,WAAWiF,SAAS,CAEvD,MAAMqM,EAAYzC,OAAOW,KAAKxP,EAAUiF,SACxC,IAAA,MAAWnE,KAAMwQ,EACf,GAAItR,EAAUiF,QAAQnE,GAAIiE,SAAWrF,EAAOoF,KAAKC,OAAQ,CAC5CsI,EAAArN,EAAUiF,QAAQnE,GAC7B,KAAA,CAEJ,EAE8B,MAAVuM,OAAU,EAAAA,EAAA9H,UAIlBpD,GACd,GAeI4E,UAAWC,GACX,yBAAuB,WAExB1E,IAAA,OAAA,CAAKyE,UAAWC,KAChB1E,EAAAA,IAAA,OAAA,CAAKyE,UAAWC,GAAmBzH,SAEpC,kBAEJ,EC/CEgS,GAAe,WAEnB,MAAMvR,UAAEA,EAAAmC,YAAWA,EAAaC,cAAAA,GAAkBlD,KAC5CQ,OAAEA,GAAWG,KACbC,KAAEA,GAASC,IAEb,IAACC,EAAkB,OAAA,KAEjB,MAAAiF,QACJA,EAAAuM,WACAA,EAAAnM,MACAA,GACErF,EAGA,GAAU,YAAVqF,EAA4B,OAAA,KAGhC,IAAIgI,EAAW,KACf,GAAI3N,IAAU,OAAAmF,EAAAnF,EAAOoF,WAAP,EAAAD,EAAaE,SAAUE,EAAS,CAEtC,MAAAqM,EAAYzC,OAAOW,KAAKvK,GAC9B,IAAA,MAAWnE,KAAMwQ,EACf,GAAIrM,EAAQnE,GAAIiE,SAAWrF,EAAOoF,KAAKC,OAAQ,CAC7CsI,EAAWpI,EAAQnE,GACnB,KAAA,CAEJ,MAAA,GACShB,GAAQmF,EAAS,CAEpB,MAAAqM,EAAYzC,OAAOW,KAAKvK,GAC9B,IAAA,MAAWnE,KAAMwQ,EACf,GAAIrM,EAAQnE,GAAIiE,SAAWjF,EAAKgB,GAAI,CAClCuM,EAAWpI,EAAQnE,GACnBH,QAAQC,IAAI,+DACZ,KAAA,CAEJ,CAIF,MAAMsE,EAAgBuD,QAAiB,MAAV4E,OAAU,EAAAA,EAAAlI,UAAW,GAC5CG,EAA0B,MAAV+H,OAAU,EAAAA,EAAA9H,QAG1BkM,EAAiBvM,GAAiBsM,EAKtC,OAAA7O,EAAAL,IAAC,OAAIyE,UAAWC,GACdzH,SAACqD,EAAAA,KAAA,MAAA,CAAImE,UAAWC,GAEdzH,SAAA,CAAA+C,EAAAA,IAAC,MAAI,CAAAyE,UAAWC,GACbzH,SAAC+F,EA+CChD,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,GACdzH,SAAAoD,EAAAC,KAAC,SAAA,CACCmE,UAAWC,GACXnD,QAAS,KACsB,mBAAlBzB,EACKA,IAEdzB,QAAQhB,MAAM,kCAAiC,EAGnD,aAAW,WACX,yBAAuB,OAGvBJ,SAAA,GAAC+C,IAAA,MAAA,CAAIyE,UAAWC,KACf1E,EAAAA,IAAA,OAAA,CAAKyE,UAAWC,GAAoBzH,SAAC,QACtC+C,IAAC,MAAI,CAAAyE,UAAWC,GACdzH,SAAC+C,EAAAA,IAAA,KAAA,CAAGyE,UAAWC,GAAoBzH,SAAA,sBA9DxCqD,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAoD,EAAAC,KAAC,SAAA,CACCmE,UAAWC,GACXnD,QAAS1B,EACT4G,UAAW0I,EACX,aAAW,UACX,yBAAuB,OACvBtD,WAAS,EAGT5O,SAAA,GAAC+C,IAAA,MAAA,CAAIyE,UAAWC,WACf,OAAK,CAAAD,UAAWC,GAAkBzH,eAClCqD,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,EAAAA,IAAC,KAAG,CAAAyE,UAAWC,GAAoBzH,SAAI,WACvC+C,IAAC,QAAKyE,UAAWC,GAAqBzH,SAAC+C,EAAAA,IAAAkG,EAAA,CAAe5G,OAAQ4P,YAIlE7O,EAAAC,KAAC,SAAA,CACCmE,UAAW,GAAGC,MAAwBA,KACtCnD,QAAS,WACHnE,GAAUM,GAAaF,GACzBJ,EAAOsB,KAAK,SAAU,CACpBxB,OAAQQ,EAAUc,GAClBiE,QAAQ,OAAAF,EAAAnF,EAAOoF,WAAPD,EAAAA,EAAaE,SAAUjF,EAAKgB,IACrC,EAGLiI,SAAoB,MAAVsE,OAAU,EAAAA,EAAA4C,aACpBnM,OAAiB,MAAVuJ,OAAU,EAAAA,EAAA4C,cAAe,gCAAkC,qBAClE,aAAW,UACX,yBAAuB,OAEvB1Q,SAAA,GAAC+C,IAAA,MAAA,CAAIyE,UAAWC,OAChB1E,IAAC,MAAI,CAAAyE,UAAWC,GACdzH,SAAC+C,EAAAA,IAAA,KAAA,CAAGyE,UAAWC,GAAoBzH,SAAA,kBAIrCkS,GACA7O,EAAAA,KAAC,IAAE,CAAAmE,UAAWC,GAA2BzH,SAAA,CAAA,uBAAkB+C,IAACkG,EAAe,CAAA5G,OAAQ4P,IAAc,2BA8BxG,MAAI,CAAAzK,UAAWC,GACdzH,SAAA+C,EAAAA,IAACuO,aAGP,4cCrIEa,GAAe,WACb,MAAA1R,UAAEA,GAAcd,IAGlB,IAACc,EAAU2R,OAAe,OAAA,KAE9B,MAAMA,OAAEA,EAAA1M,QAAQA,EAAS2M,gBAAAA,GAAoB5R,EACvC6R,EAAa,OAAAhN,EAAAI,EAAQ0M,EAAOjC,gBAAW,EAAA7K,EAAAiC,KA8D3C,OAAAnE,EAAAL,IAAC,OAAIyE,UAAWC,GAAO8K,aAGrBvS,SAACqD,EAAAA,KAAA,MAAA,CAAImE,UAAWC,GAAO+K,cACpBxS,SAAA,CAlBe,MACpB,OAAQoS,EAAOK,SACb,IAAK,MACH,OA/CFpP,EAAAA,KAAAqP,EAAAA,SAAA,CAAA1S,SAAA,CAACqD,EAAAA,KAAA,KAAA,CAAGmE,UAAW,GAAGC,GAAOkL,cAAclL,GAAOmL,UAC3C5S,SAAA,CAAAsS,EAAW,WAEbF,EAAOS,SAAW,UAChB,IAAE,CAAArL,UAAWC,GAAOqL,aAAc9S,SAAA,CAAA,mBACtBiJ,EAAe,CAAA5G,OAAQ+P,EAAOS,SAAW,EAAG1P,KAAK,iBA2ChE,IAAK,OACH,OApCFE,EAAAA,KAAAqP,EAAAA,SAAA,CAAA1S,SAAA,CAACqD,EAAAA,KAAA,KAAA,CAAGmE,UAAW,GAAGC,GAAOkL,cAAclL,GAAOsL,WAC3C/S,SAAA,CAAAsS,EAAW,YAEbF,EAAO3D,UAAY,UACjB,IAAE,CAAAjH,UAAWC,GAAOqL,aAAc9S,SAAA,CAAA,eAC1BiJ,EAAe,CAAA5G,OAAQ+P,EAAO3D,UAAWtL,KAAK,iBAgCzD,IAAK,MACH,MA3BkB,MACtB,MAAM6P,EAAgBZ,EAAO3D,WAAa2D,EAAOa,eAAiB,EAAI,GAEtE,OAEI7P,EAAAC,KAAAqP,WAAA,CAAA1S,SAAA,GAAC+C,IAAA,MAAA,CAAIyE,UAAWC,GAAOyL,eACrBlT,eAAC,MAAI,CAAAwH,UAAWC,GAAO0L,gBAEzB9P,EAAAA,KAAC,MAAGmE,UAAW,GAAGC,GAAOkL,cAAclL,GAAO2L,UAC3CpT,SAAA,CAAAsS,EAAW,IAAEF,EAAOa,eAAiB,KAAO,KAAK,eAEnDb,EAAO3D,UAAY,UACjB,IAAE,CAAAjH,UAAWC,GAAOqL,aAAc9S,SAAA,CAAA,YACvB+C,EAAAA,IAAAkG,EAAA,CAAe5G,OAAQ2Q,EAAe7P,KAAK,gBAG3D,EAWSkQ,GACT,QACS,OAAA,KAAA,EASQC,GAEdjB,KACChP,KAAC,MAAI,CAAAmE,UAAWC,GAAO8L,mBACrBvT,SAAA,GAACqD,KAAA,IAAA,CAAEmE,UAAWC,GAAO+L,cAAexT,SAAA,CAAA,iBACnBqS,EAAgBoB,iBAAiB,OAEjD1Q,EAAAA,IAAA,MAAA,CAAIyE,UAAWC,GAAOiM,kBACrB1T,SAAAoD,EAAAL,IAAC,MAAA,CACCyE,UAAWC,GAAOkM,aAClB9K,MAAO,CAAEtF,MAAW8O,EAAgBoB,iBAAmB,EAAK,IAA5C,gBAM5B,uUCzFEG,GAAiB,eACf,MAAAzT,OAAEA,GAAWG,KACbG,UAAEA,GAAcd,KAChBY,KAAEA,GAASC,KACVqT,EAAWC,GAAgBnT,EAAAA,SAAS,IAG3CM,EAAAA,WAAU,WACJ,IAAA,MAAAR,OAAA,EAAAA,EAAWyG,yBAAyB,OAAA5B,EAAA,MAAAnF,OAAA,EAAAA,EAAQoF,WAARD,EAAAA,EAAcE,UAAW/E,EAAUmB,gBAAiB,CAC1FkS,EAAa,IAEP,MAAAjN,EAAQC,aAAY,KACxBgN,GAA0BC,GACpBA,GAAa,GACfC,cAAcnN,GACP,GAEFkN,EAAY,GACpB,GACA,KAEI,MAAA,IAAMC,cAAcnN,EAAK,IAEjC,CAAC,MAAApG,OAAA,EAAAA,EAAWyG,sBAAuB,MAAAzG,OAAA,EAAAA,EAAWmB,gBAAiB,OAAA0D,EAAQ,MAAAnF,OAAA,EAAAA,EAAAoF,WAAM,EAAAD,EAAAE,SAE1E,MAAAyO,EAAmBjI,IACvB7L,EAAOsB,KAAK,iBAAkB,CAAEuK,YAAU,EAItC3E,GAAuB,OAAAC,EAAA,MAAAnH,OAAA,EAAAA,EAAQoF,WAAR,EAAA+B,EAAc9B,UAAW/E,EAAUmB,gBAC1DsS,GAAoB,OAAAC,EAAU1T,EAAAiF,QAAQjF,EAAUmB,2BAAkB2F,OAAQ,iBA6ChF,SACGlE,KAAA,MAAA,CAAImE,UAAWC,GACbzH,SAAA,CA5CEqH,IAGFhE,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,GAACqD,KAAA,IAAA,CAAEmE,UAAWC,GAAsBzH,SAAA,CAAA,uEAEjCqD,KAAA,OAAA,CAAKmE,UAAWC,GAAkBzH,SAAA,CAAA,KAAG6T,EAAU,aAGjDxQ,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAoD,EAAAL,IAAC,SAAA,CACCyE,UAAW,GAAGC,MAA0BA,KACxCnD,QAAS,IAAM2P,GAAgB,GAC/B,yBAAuB,OACvBrF,WAAS,EAET5O,WAACqD,KAAA,OAAA,CAAKmE,UAAWC,GAAsBzH,SAAA,CAAA,kBAAUmK,EAAU,CAAAC,UAAU,KAAKlH,MAAM,QAAQC,KAAM,UAEhGC,EAAAL,IAAC,SAAA,CACCyE,UAAW,GAAGC,MAA0BA,KACxCnD,QAAS,IAAM2P,GAAgB,GAC/B,yBAAuB,OAEvBjU,WAACqD,KAAA,OAAA,CAAKmE,UAAWC,GAAsBzH,SAAA,CAAA,iBAASmK,EAAU,CAAAC,UAAU,OAAOlH,MAAM,QAAQC,KAAM,gBAvBrE,KA+B9BkE,EAA6B,KAG/BjE,EAAAL,IAAC,OAAIyE,UAAWC,GACdzH,SAACqD,EAAAA,KAAA,IAAA,CAAEmE,UAAWC,GACXzH,SAAA,CAAAkU,EAAkB,0DAUzB,uVCjFEE,GAAoB,aAClB,MAAA3T,UAAEA,GAAcd,KAChBQ,OAAEA,GAAWG,KACZoK,EAAS2J,GAAc1T,EAAAA,UAAS,IAChC2T,EAAYC,GAAiB5T,EAAAA,SAAS,OACtCkT,EAAWC,GAAgBnT,EAAAA,SAAS,IAG3CM,EAAAA,WAAU,WACJ,IAAA,MAAAR,OAAA,EAAAA,EAAW2G,0BAA0B,OAAA9B,EAAA,MAAAnF,OAAA,EAAAA,EAAQoF,WAARD,EAAAA,EAAcE,UAAW/E,EAAUmB,gBAAiB,CAC3FkS,EAAa,IAEP,MAAAjN,EAAQC,aAAY,KACxBgN,GAA0BC,GACpBA,GAAa,GACfC,cAAcnN,GACP,GAEFkN,EAAY,GACpB,GACA,KAEI,MAAA,IAAMC,cAAcnN,EAAK,IAEjC,CAAC,MAAApG,OAAA,EAAAA,EAAW2G,uBAAwB,MAAA3G,OAAA,EAAAA,EAAWmB,gBAAiB,OAAA0D,EAAQ,MAAAnF,OAAA,EAAAA,EAAAoF,WAAM,EAAAD,EAAAE,SAE3E,MAAAE,QACJA,EAAA9D,gBACAA,EAAAqQ,WACAA,EAAa,GACXxR,EAEEoN,EAAkB1N,GAAUyB,KAAoB,OAAA0F,EAAAnH,EAAOoF,WAAM,EAAA+B,EAAA9B,QAC7DC,EAAgBC,EAAQ9D,GAExB4S,EAAsBC,IACtBtU,IACFkU,GAAW,GACGE,EAAAE,EAAY,OAAS,QACnCtU,EAAOsB,KAAK,eAAgB,CAAEgT,cAAW,EAqD7C,SACGpR,KAAA,MAAA,CAAImE,UAAWC,GACbzH,SAAA,CAlDE6N,IAGFxK,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,GAACqD,KAAA,IAAA,CAAEmE,UAAWC,GAAyBzH,SAAA,CAAA,yDAEpCqD,KAAA,OAAA,CAAKmE,UAAWC,GAAkBzH,SAAA,CAAA,KAAG6T,EAAU,aAGjDxQ,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAoD,EAAAL,IAAC,SAAA,CACCyE,UAAW,GAAGC,MAA6BA,KAC3CnD,QAAS,IAAMkQ,GAAmB,GAClC,yBAAuB,OACvB5F,WAAS,EAER5O,SAAW0K,GAAe,SAAf4J,EAAwB,uBAChC5B,EAAAA,SAAA,CAAA1S,SAAA,CAAA,aACQ+C,IAAC,OAAK,CAAAyE,UAAWC,GACvBzH,SAAC+C,EAAAA,IAAAkG,EAAA,CAAe5G,OAAQ4P,EAAY9O,KAAK,iBAKjDC,EAAAL,IAAC,SAAA,CACCyE,UAAW,GAAGC,MAA6BA,KAC3CnD,QAAS,IAAMkQ,GAAmB,GAClC,yBAAuB,OAEtBxU,SAAA0K,GAA0B,SAAf4J,EAAwB,gBAAkB,eA7BjC,KAqCzBzG,EAAwB,KAG1BzK,EAAAL,IAAC,OAAIyE,UAAWC,GACZzH,SAACqD,EAAAA,KAAA,IAAA,CAAEmE,UAAWC,GACXzH,SAAA,CAAe,MAAAyF,SAAAA,EAAA8B,KAAK,uDAU7B,+QClGEmN,GAAU,KACR,MAAAjU,UAAEA,GAAcd,KACfgV,EAAYC,GAAiBjU,EAAAA,UAAS,GAE7C,IAAKF,IAAcA,EAAUoU,QAAgB,OAAA,KAGvC,MAAAC,EAAarU,EAAUoU,SAAW,GASlCE,EAAiB,KACrBH,GAAeD,EAAU,EAIrBK,EAAiBL,EAAaG,EAAaA,EAAWtM,MAAM,EAAG,GAErE,SACGnF,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAAqD,OAAC,MAAI,CAAAmE,UAAWC,GAAsBnD,QAASyQ,EAC7C/U,SAAA,GAAA+C,IAAC,MAAG/C,SAAQ,mBACX,OAAK,CAAAwH,UAAWC,GAAoBzH,SAAA2U,EAAa,IAAM,WAGzD5R,IAAA,MAAA,CAAIyE,UAAW,GAAGC,MAAyBkN,EAAalN,GAAkB,KACxEzH,SAA0B,MAAX2P,OACbvM,EAAAL,IAAA,MAAA,CAAIyE,UAAWC,GAAiBzH,SAAA,uBAEjCgV,EAAe7H,KAAI,CAAC8H,EAAOtJ,cACzBtI,KAAC,MAAgB,CAAAmE,UAAWC,GAC1BzH,SAAA,CAAA+C,EAAAA,IAAC,QAAKyE,UAAWC,GAAiBzH,UA1B1BkV,EA0BqCD,EAAMC,UAzBhD,IAAIC,KAAKD,GACVE,mBAAmB,GAAI,CAAEC,KAAM,UAAWC,OAAQ,UAAWC,OAAQ,qBAyBtE,OAAK,CAAA/N,UAAWC,GAAoBzH,WAAMkC,YAFnCyJ,GAzBD,IAACuJ,CA6BX,OAIHP,GAAcG,EAAWnF,OAAS,GACjCtM,EAAAA,KAAA,MAAA,CAAImE,UAAWC,GAAuBnD,QAASyQ,EAAgB/U,SAAA,CAAA,QACxD8U,EAAWnF,OAAS,EAAE,qBAGlC,wIC9CE6F,GAAiB,KACrB,MAAOC,EAAQC,GAAa/U,EAAAA,UAAS,IAC/BR,OAAEA,GAAWG,KACbG,UAAEA,GAAcd,KAChBY,KAAEA,GAASC,IA2CjB,SACG6C,KAAA,MAAA,CAAImE,UAAWC,GAEdzH,SAAA,CAAAoD,EAAAL,IAAC,SAAA,CACCyE,UAAWC,GACXnD,QATc,KAClBoR,GAAWD,EAAM,EASb,yBAAuB,OACvB,aAAW,yBACZzV,SAAA,OAKAyV,KACC1S,IAAC,MAAI,CAAAyE,UAAWC,GACdzH,eAAC,MAAI,CAAAwH,UAAWC,GACbzH,SAxDI,CACb,CAAE2V,MAAO,KAAMpO,KAAM,OAAQrE,MAAO,WACpC,CAAEyS,MAAO,KAAMpO,KAAM,QAASrE,MAAO,WACrC,CAAEyS,MAAO,KAAMpO,KAAM,OAAQrE,MAAO,WACpC,CAAEyS,MAAO,KAAMpO,KAAM,OAAQrE,MAAO,WACpC,CAAEyS,MAAO,KAAMpO,KAAM,aAAcrE,MAAO,WAC1C,CAAEyS,MAAO,KAAMpO,KAAM,WAAYrE,MAAO,WACxC,CAAEyS,MAAO,KAAMpO,KAAM,UAAWrE,MAAO,WACvC,CAAEyS,MAAO,KAAMpO,KAAM,WAAYrE,MAAO,WACxC,CAAEyS,MAAO,KAAMpO,KAAM,SAAUrE,MAAO,WACtC,CAAEyS,MAAO,KAAMpO,KAAM,QAASrE,MAAO,WACrC,CAAEyS,MAAO,KAAMpO,KAAM,SAAUrE,MAAO,WACtC,CAAEyS,MAAO,KAAMpO,KAAM,UAAWrE,MAAO,WACvC,CAAEyS,MAAO,KAAMpO,KAAM,cAAerE,MAAO,WAC3C,CAAEyS,MAAO,KAAMpO,KAAM,WAAYrE,MAAO,WACxC,CAAEyS,MAAO,KAAMpO,KAAM,cAAerE,MAAO,WAC3C,CAAEyS,MAAO,KAAMpO,KAAM,YAAarE,MAAO,YAwCzBiK,KAAI,CAACyI,EAAWjK,IACtBvI,EAAAL,IAAC,SAAA,CAECyE,UAAWC,GACXnD,QAAS,IAzCE,CAACsR,IACnBzV,GAAWM,GAAcF,IAK9BJ,EAAOsB,KAAK,gBAAiB,CAC3BxB,OAAQQ,EAAUc,GAClBoU,MAAOC,EAAUD,MACjBzS,MAAO0S,EAAU1S,MACjBoP,WAAY/R,EAAKsV,WAInBH,GAAU,GAAK,EA2BYI,CAAiBF,GAChC,yBAAuB,OACvBrR,MAAOqR,EAAUrO,KACjBsB,MAAO,CAAE,gBAAiB+M,EAAU1S,OAEnClD,SAAU4V,EAAAD,OAPNhK,WAajB,EChEEoK,GAAa,EAAGC,sBAEpB,MAAOC,EAAaC,GAAkBvV,EAAAA,UAAS,IAGzCF,UACJA,EAAAL,MACAA,EAAAW,WACAA,GACEpB,IAG2BwW,GAAqB,GAGpDlV,EAAAA,WAAU,KACR,GAAIb,EAAO,CACH,MAAAyG,EAAQrF,YAAW,KACZT,GAAA,GACV,KAEI,MAAA,IAAMiQ,aAAanK,EAAK,IAEhC,CAACzG,EAAOW,IAGX,MAQMZ,OAAEA,GAAWG,KAEbC,KAAEA,GAASC,IAGjB,IAAKC,EAED,SAAAsC,IAAC,OAAIyE,UAAWC,EACdzH,SAAC+C,EAAAA,IAAA,IAAA,CAAE/C,qCAMH,MAAA8F,EAAQrF,EAAUqF,OAAS,UAI3BT,EAAsB,MAAN9E,OAAM,EAAAA,EAAAgB,GACtBkE,EAAgBhF,EAAUiF,SAAWL,EAAgB5E,EAAUiF,QAAQL,GAAiB,KAY9F,SACGhC,KAAA,MAAA,CAAImE,UAAWC,EACdzH,SAAA,CAAAqD,OAAC,MAAI,CAAAmE,UAAW,GAAGC,yBACjBzH,SAAA,CAAAoD,EAAAL,IAACmC,EAAA,CACCC,gBA3CgB,KAElB6Q,GACcA,GAAA,EAyCZ5Q,mBAAoB8Q,IAGrB9V,KACC2C,IAAC,MAAI,CAAAyE,UAAWC,EACdzH,SAAC+C,EAAAA,IAAA,IAAA,CAAEyE,UAAWC,EAAmBzH,SAAAI,QAIpCiD,KAAA,MAAA,CAAImE,UAAWC,EACdzH,SAAA,CAAAoD,EAAAL,IAACoO,GAAY,UACZF,GAAW,CAAA,YAIbxG,EAAY,KAGZ,MAAAhF,SAAAA,EAAeiL,cAEd3N,EAAAA,IAAC,SAAO,CAAAuB,QAlCU,KACpBnE,GAAUM,EAAUc,GACtBpB,EAAOsB,KAAK,SAAU,CAAExB,OAAQQ,EAAUc,KAE1CH,QAAQhB,MAAM,kDAAiD,EA8BvBoH,UAAWC,EAAqB,yBAAuB,OAAOmH,WAAS,EAAC5O,SAE5G,cAGU,YAAV8F,QAEGkM,GAAa,CAAA,GACF,YAAVlM,QAEDqM,GAAa,CAAA,GACZ1R,EAAUyG,4BAEX0M,GAAe,CAAA,GACdnT,EAAU2G,6BAEXgN,GAAkB,CAAA,GACP,YAAVtO,QAED0H,GAAa,CAAA,GACZ,OAGLnK,KAAA,MAAA,CAAImE,UAAWC,EACdzH,SAAA,CAAA+C,EAAAA,IAAC,OAAIyE,UAAWC,EACdzH,SAAA+C,MAACmM,IAAW,WAEb,MAAI,CAAA1H,UAAWC,EACdzH,SAAA+C,EAAAA,IAAC2R,gBAMLuB,GAAelT,MAACyS,GAAe,CAAA,KACnC,qMC7IJ,SAASY,IAAoBX,OAAEA,EAAAzL,QAAQA,EAASqM,SAAAA,EAAApW,OAAUA,IACxD,MAAOqW,EAAUC,GAAe5V,EAAAA,SAAS,IAErC,IAAC8U,EAAe,OAAA,KAclB,OAAArS,EAAAL,IAAC,OAAIyE,UAAWC,GACdzH,SAACqD,EAAAA,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,GAAA+C,IAAC,MAAG/C,SAAiB,6BACpB,IAAE,CAAAA,SAAA,CAAA,wCAAmC+C,IAAC,SAAQ,CAAA/C,SAAAC,GAAU,KAAY,SACrEoD,KAAC,OAAK,CAAAgT,SAhBUrI,IACpBA,EAAEwI,iBACFH,EAASC,GACTC,EAAY,GAAE,EAcRvW,SAAA,CAAAoD,EAAAL,IAAC8L,EAAA,CACCtK,MAAM,sBACNuK,KAAK,WACLhM,MAAOwT,EACPtH,SAAWhB,GAAMuI,EAAYvI,EAAEC,OAAOnL,OACtC0E,UAAWC,GACXmH,WAAS,EACT6H,UAAQ,MAETpT,KAAA,MAAA,CAAImE,UAAWC,GACdzH,SAAA,CAAA+C,MAAC,SAAO,CAAA+L,KAAK,SAASxK,QArBX,KACnBiS,EAAY,IACJvM,GAAA,EAmB6CxC,UAAW,GAAGC,MAAsBA,KAAuB,yBAAuB,OAAOzH,SAEtI,aACC+C,IAAA,SAAA,CAAO+L,KAAK,SAAStH,UAAW,GAAGC,MAAsBA,KAAuB,yBAAuB,OAAOzH,SAE/G,wBAMZ,CCtCA,MAAM0W,GAAW,KACT,MAAAzW,OAAEA,GAAW0W,IACbC,EAAWC,KACX1W,OAAEA,EAAA2W,YAAQA,GAAgBxW,KACzBoK,EAAS2J,GAAc1T,EAAAA,UAAS,IAChCP,EAAOU,GAAYH,EAAAA,SAAS,OAC5BoW,EAAqBC,GAA0BrW,EAAAA,UAAS,GACzDsW,EAAmBrW,UAAO,GAE1BsW,EAAsBlW,EAAAA,aAAY,KAClCb,GAAU2W,GAAe7W,IAC3B+B,EAAaC,KAAK,YAClB9B,EAAOsB,KAAK,YAAa,CAAExB,WAC3B2W,EAAS,KAAG,GAEb,CAACzW,EAAQ2W,EAAa7W,EAAQ2W,IAE3BO,EAAuBnW,eAAasV,IACxCU,GAAuB,GACnB7W,GAAUF,GAAUqW,IACtBxV,EAAS,MACTX,EAAOsB,KAAK,WAAY,CAAExB,SAAQqW,aAClCjC,GAAW,GAAI,GAEhB,CAAClU,EAAQF,IAENmX,EAAuBpW,EAAAA,aAAY,KACvCgW,GAAuB,GACvBJ,EAAS,IAAG,GACX,CAACA,IAEJ3V,EAAAA,WAAU,KACRH,EAAS,MACTkW,GAAuB,GACvB3C,GAAW,EAAI,GACd,CAACpU,IAEJgB,EAAAA,WAAU,KACR,IAAKd,EACH,OAGI,MAAAkX,EAAgBlW,IAChBA,GAAQA,EAAKG,MAAQH,EAAKG,KAAKC,KAAOtB,IACxC+B,EAAaC,KAAK,WAClBoS,GAAW,GACXvT,EAAS,MACTkW,GAAuB,GAAK,EAI1BM,EAAWC,IACT,MAAArV,EAAUqV,EAAUrV,SAAW,4BAErB,sBAAZA,GACFd,QAAQhB,MAAMmX,GACdP,GAAuB,GACvB3C,GAAW,GACXvT,EAAS,OACY,qBAAZoB,GACTd,QAAQhB,MAAMmX,GACdzW,EAAS,qBACTkW,GAAuB,GACvB3C,GAAW,IACU,mBAAZnS,EACT0U,EAAS,KACY,iBAAZ1U,GACTpB,EAASoB,GACTmS,GAAW,GACX2C,GAAuB,GACvBxV,YAAW,IAAMoV,EAAS,MAAM,OAEhC9V,EAASoB,GACTmS,GAAW,GACX2C,GAAuB,GAAK,EAOhC,OAHO7W,EAAAe,GAAG,aAAcmW,GACjBlX,EAAAe,GAAG,QAASoW,GAEZ,KACEnX,EAAAgC,IAAI,aAAckV,GAClBlX,EAAAgC,IAAI,QAASmV,EAAO,CAC7B,GACC,CAACnX,EAAQF,EAAQ2W,IAEpB3V,EAAAA,WAAU,KAEJd,GAAUF,IAAWgX,EAAiBlV,UACxCkV,EAAiBlV,SAAU,EAC3BsS,GAAW,GACXvT,EAAS,MACTkW,GAAuB,GACvB7W,EAAOsB,KAAK,WAAY,CAAExB,WAAQ,GAInC,CAACE,EAAQF,IAEZ,MAAMuX,EAAkB,KAChB,MAAA/W,UAAEA,GAAcd,KACdQ,OAAAA,GAAWG,IAwBnB,OArBAW,EAAAA,WAAU,KACF,MAAAwW,EAAsBzJ,UACpB,MAAA3I,EAAgBlF,OAAAA,EAAQ,MAAAuX,OAAA,EAAAA,EAAAnS,WAAM,EAAAD,EAAAE,OAC9BC,EAAgBJ,IAAiB,MAAA5E,OAAA,EAAAA,EAAWiF,SAAUjF,EAAUiF,QAAQL,GAAiB,KAI/F,IAHsB,MAAAI,OAAAA,EAAAA,EAAeO,WAAW,EAM9C,OAFAgI,EAAEwI,iBACFxI,EAAE2J,YAAc,6DACT3J,EAAE2J,WAAA,EAMb,OAFOC,OAAAC,iBAAiB,eAAgBJ,GAEjC,KACEG,OAAAE,oBAAoB,eAAgBL,EAAkB,CAC/D,GACC,CAAChX,EAAWN,IAIXiD,EAAAC,KAAAqP,WAAA,CAAA1S,SAAA,CAAAoD,EAAAL,IAACqT,GAAA,CACCX,OAAQsB,EACR/M,QAASoN,EACTf,SAAUc,EACVlX,WAGDyK,KAAY3H,IAAAgV,EAAA,CAAc7V,QAAS,gBAAgBjC,SAEnDG,IAAUsK,IAAYqM,UACpB,MAAI,CAAAvP,UAAU,kBAAkBqB,MAAO,CAAEmP,QAAS,OAAQ9U,MAAO,MAAO+U,UAAW,UAClFjY,SAAA,GAAA+C,IAAC,MAAG/C,SAAiB,wBACrB+C,IAAC,KAAG/C,SAAMI,UAEb,UAAOkE,QAAS,IAAMsT,OAAOM,SAASC,SAAUnY,SAAY,qBAI3D0K,IAAYtK,GAASK,GACpB2C,EAAAL,IAAAgT,GAAA,CAAWC,gBAAiBkB,MAEjC,EAIJ,OACG9T,EAAAL,IAAAhD,EAAA,CAAaE,SACZD,eAACwX,GAAgB,IACnB"}