const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-CQIquzlU.js","assets/vendor-D3vErxIQ.js","assets/useGamepadNavigation-Tj-O-nX_.js","assets/AppHeader-AYteADqr.js","assets/AppHeader-nJsTMoBm.css","assets/audio-D4HOgbU8.js","assets/socket-DfKCw8Ob.js","assets/AuthPage-CtFtJF7G.css","assets/Lobby-ZXWojhRK.js","assets/GamepadInput-qY_wPbyT.js","assets/GamepadInput-CckUL6hh.css","assets/Lobby-BAU-GGZX.css","assets/GameRoom-JE8zr_xc.js","assets/GameRoom-d_xluaPP.css"])))=>i.map(i=>d[i]);
import{r as e,a as t,b as r,N as a,R as n,d as o}from"./vendor-D3vErxIQ.js";import{h as s}from"./audio-D4HOgbU8.js";import{l as c}from"./socket-DfKCw8Ob.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},d={},l=e,u=Symbol.for("react.element"),f=Symbol.for("react.fragment"),b=Object.prototype.hasOwnProperty,g=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,r){var a,n={},o=null,s=null;for(a in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(s=t.ref),t)b.call(t,a)&&!h.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:u,type:e,key:o,ref:s,props:n,_owner:g.current}}d.Fragment=f,d.jsx=p,d.jsxs=p,i.exports=d;var m=i.exports,y={},x=t;y.createRoot=x.createRoot,y.hydrateRoot=x.hydrateRoot;const v=new class{constructor(){this.sounds={},this.muted=!1,this.initialized=!1,this.categories=["ui"],this.lastPlayedTime={},this.debounceTime=500,this.audioUnlocked=!1,this.API_URL="https://api.in-between.live","undefined"!=typeof window&&setTimeout((()=>{this.initialize(),this._setupMobileAudioUnlock()}),0)}initialize(){this.initialized||(this.loadCategory("ui"),this.initialized=!0)}loadCategory(e){if(this.sounds[e])return;const t={};"ui"===e&&(t.join=[0,500],t.leave=[500,1e3],t.alert=[1500,1500]),this.sounds[e]=new s.Howl({src:[`${this.API_URL}/assets/audio/${e}-sounds.mp3`,`${this.API_URL}/assets/audio/${e}-sounds.webm`],sprite:t,preload:!0,html5:this._isMobileDevice(),format:["mp3","webm"],pool:10})}play(e,t=1){if(this.muted)return;let r,a;if(this.initialized||this.initialize(),e.includes(".")?[r,a]=e.split("."):(r="ui",a=e),!this.sounds[r])return void this.loadCategory(r);const n=`${r}.${a}`,o=Date.now();return o-(this.lastPlayedTime[n]||0)<this.debounceTime?void 0:(this.lastPlayedTime[n]=o,this.sounds[r].volume(t),this.sounds[r].play(a))}setMuted(e){this.muted=e,Object.values(this.sounds).forEach((t=>{t&&t.mute&&t.mute(e)}))}syncWithPreferences(e){e&&void 0!==e.muted&&this.setMuted(e.muted)}_setupMobileAudioUnlock(){if("undefined"==typeof window||!this._isMobileDevice())return;const e=()=>{if(this.audioUnlocked)return;const t=new Audio;t.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////",t.load(),t.play().then((()=>{this.audioUnlocked=!0,document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("click",e)})).catch((e=>{}))};document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)}_isMobileDevice(){return"undefined"!=typeof navigator&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)}},w={},_=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");a=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in w)return;w[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise(((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},A="_loadingScreen_16l5s_1",k="_loadingContainer_16l5s_10",j="_spinner_16l5s_21",S="_message_16l5s_31",E=({message:e="Loading..."})=>m.jsx("div",{className:A,children:m.jsxs("div",{className:k,children:[m.jsx("div",{className:j}),m.jsx("p",{className:S,children:e})]})}),C="https://api.in-between.live",P=e.createContext(),I=()=>e.useContext(P),T=({children:t})=>{const{token:r}=L(),[a,n]=e.useState(null),[o,s]=e.useState(!1),[i,d]=e.useState(null);e.useEffect((()=>{if("undefined"==typeof window)return;if(!r)return void(a&&(a.disconnect(),n(null),s(!1),d(null)));const e=c("https://api.in-between.live",{auth:{token:r},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,transports:["websocket","polling"],timeout:1e4});n(e),e.on("connect",(()=>{d(null)})),e.on("authenticated",(t=>{e.auth={userId:t.userId,username:t.username},s(!0),e.emit("getGameList")})),e.on("connect_error",(e=>{d("Failed to connect to game server: "+e.message),s(!1)})),e.on("disconnect",(()=>{s(!1)})),e.on("error",(e=>{d(e.message||"Unknown socket error")}));const t=["connect","authenticated","disconnect","connect_error","error","transport"];return()=>{e&&(t.forEach((t=>e.off(t))),e.disconnect(),n(null),s(!1),d(null))}}),[r]);const l={socket:a,isConnected:o,error:i,setError:d};return m.jsx(P.Provider,{value:l,children:t})},$=e.createContext(null),N=({children:t})=>{const[r,a]=e.useState(null),[n,o]=e.useState(null),[s,c]=e.useState(!0),[i,d]=e.useState(!1),l=I(),u=l?.socket;e.useEffect((()=>{if(u&&r)return u.on("balanceUpdated",(e=>{if(e&&"number"==typeof e.balance){const t={...r,balance:e.balance};a(t)}})),()=>{u.off("balanceUpdated")}}),[u,r]);const f=async e=>{try{if(!e)return null;const t=await fetch(`${C}/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch user data");return(await t.json()).user}catch(t){return null}};e.useEffect((()=>{(async()=>{let e=null;try{e=localStorage.getItem("token"),e&&o(e)}catch(t){localStorage.removeItem("token")}if(e)try{const t=await f(e);t?a(t):(a(null),o(null),localStorage.removeItem("token"))}catch(t){a(null),o(null),localStorage.removeItem("token")}finally{c(!1)}else a(null),o(null),c(!1)})()}),[]);const b=e.useCallback((()=>{a(null),o(null),d(!1),localStorage.removeItem("token")}),[]),g=e.useCallback((async()=>{try{const e=await f(n);e?a(e):b()}catch(e){b()}}),[n,b]);return s?null:m.jsx($.Provider,{value:{user:r,token:n,login:async(e,t)=>{if(!e||!e.username||!e.id||"number"!=typeof e.balance)throw new Error("Invalid user data provided");if(!t)throw new Error("No authentication token provided");try{const r={username:e.username,id:e.id,balance:e.balance};a(r),o(t),localStorage.setItem("token",t),d(!0);const n=await f(t);n&&a(n)}catch(r){throw r}},logout:b,refreshUserData:g,loading:s},children:t})},L=()=>{const t=e.useContext($);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},M=e.createContext(),O=()=>e.useContext(M),D=({children:t})=>{const{socket:r,isConnected:a}=I(),[n,o]=e.useState([]),[s,c]=e.useState(!0),[i,d]=e.useState(null);e.useEffect((()=>{if(!r||!a)return;const e=e=>{o(e),c(!1)},t=e=>{d(e.message||"An error occurred"),c(!1)};return r.on("gameList",e),r.on("error",t),r.emit("getGameList"),()=>{r.off("gameList",e),r.off("error",t)}}),[r,a]);const l={gameList:n,loading:s,error:i};return m.jsx(M.Provider,{value:l,children:t})},U=e.lazy((()=>_((()=>import("./AuthPage-CQIquzlU.js")),__vite__mapDeps([0,1,2,3,4,5,6,7])))),B=e.lazy((()=>_((()=>import("./Lobby-ZXWojhRK.js")),__vite__mapDeps([8,1,2,3,4,9,10,5,6,11])))),R=e.lazy((()=>_((()=>import("./GameRoom-JE8zr_xc.js")),__vite__mapDeps([12,1,9,10,2,5,6,13])))),z=({children:e})=>{const{user:t,loading:r}=L();return r?m.jsx(E,{message:"Checking authentication..."}):t?e:m.jsx(a,{to:"/auth",replace:!0})},F=r([{path:"/",element:m.jsx(z,{children:m.jsx(D,{children:m.jsx(e.Suspense,{fallback:m.jsx(E,{message:"Loading..."}),children:m.jsx(B,{})})})})},{path:"/auth",element:m.jsx(e.Suspense,{fallback:m.jsx(E,{message:"Loading..."}),children:m.jsx(U,{})})},{path:"/:gameId",element:m.jsx(z,{children:m.jsx(e.Suspense,{fallback:m.jsx(E,{message:"Loading..."}),children:m.jsx(R,{})})})},{path:"*",element:m.jsx(a,{to:"/",replace:!0})}]),G={overlay:"_overlay_18xtc_1",modal:"_modal_18xtc_17",header:"_header_18xtc_38",closeButton:"_closeButton_18xtc_55",sectionHeader:"_sectionHeader_18xtc_74",settingItem:"_settingItem_18xtc_90",settingControls:"_settingControls_18xtc_102",primaryButton:"_primaryButton_18xtc_109",settingDescription:"_settingDescription_18xtc_131",textInput:"_textInput_18xtc_153",inputError:"_inputError_18xtc_171",errorMessage:"_errorMessage_18xtc_176",content:"_content_18xtc_186",footer:"_footer_18xtc_229"};let V=0;function K({title:r,onClose:a,children:n,footer:o,headerButtons:s,className:c="",overlayStyle:i,...d}){e.useEffect((()=>(1==++V&&document.body.classList.add("modal-open"),()=>{0==--V&&document.body.classList.remove("modal-open")})),[]);const l=m.jsx("div",{className:G.overlay,style:i,onClick:a,children:m.jsxs("div",{className:`${G.modal} ${c}`,onClick:e=>e.stopPropagation(),...d,children:[r&&m.jsxs("div",{className:G.header,children:[m.jsx("h2",{children:r}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s,m.jsx("button",{className:G.closeButton,onClick:a,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"×"})]})]}),m.jsx("div",{className:G.content,children:n}),o&&m.jsx("div",{className:G.footer,children:o})]})});return t.createPortal(l,document.body)}const W="_keyboardModal_j4llx_2",J="_inputDisplay_j4llx_7",q="_tempInput_j4llx_13",H="_keyboardGrid_j4llx_31",Q="_keyRow_j4llx_35",Z="_key_j4llx_2",Y="_specialKey_j4llx_77",X="_spaceKey_j4llx_86",ee="_activeShift_j4llx_91",te=({isVisible:t,onClose:r,onEnter:a,inputType:n="text",initialValue:o=""})=>{const{keyboardTitle:s}=ae(),[c,i]=e.useState("lowercase"),[d,l]=e.useState("");e.useEffect((()=>{l(t?"number"===n?o&&"0"!==o?o:"":o||"":"")}),[t,o,n]);const u={lowercase:[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["space","enter"]],uppercase:[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["space","enter"]],numbers:[["1","2","3"],["4","5","6"],["7","8","9"],["0","backspace"],["enter"]]}["number"===n?"numbers":c],f=e.useCallback((e=>{switch(e){case"shift":i((e=>"lowercase"===e?"uppercase":"lowercase"));break;case"backspace":l((e=>e.slice(0,-1)));break;case"enter":a?.(d);break;case"space":l((e=>e+" "));break;default:l((t=>t+e))}}),[a,d]),b=e=>{switch(e){case"shift":return"⇧";case"backspace":return"⌫";case"space":return"Space";case"enter":return"↵";default:return e}},g=e=>{let t=Z;return["shift","backspace","space","enter"].includes(e)&&(t+=` ${Y}`),"space"===e&&(t+=` ${X}`),"shift"===e&&"uppercase"===c&&(t+=` ${ee}`),t};return e.useEffect((()=>{if(t){const e=e=>{"Escape"===e.key&&(e.preventDefault(),r?.())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[t,r]),t?m.jsxs(K,{title:s||("number"===n?"Number Pad":"Virtual Keyboard"),onClose:r,className:W,overlayStyle:{zIndex:1300},children:[m.jsx("div",{className:J,children:m.jsx("input",{type:"password"===n?"password":"text",value:d,className:q,readOnly:!0,placeholder:"Type below..."})}),m.jsx("div",{className:H,children:u.map(((e,t)=>m.jsx("div",{className:Q,children:e.map(((e,r)=>m.jsx("button",{className:g(e),onClick:()=>f(e),"data-gamepad-focusable":"true","aria-label":"backspace"===e?"Backspace":"enter"===e?"Enter":"space"===e?"Space":"shift"===e?"Shift":e,children:b(e)},`${t}-${r}`)))},t)))})]}):null},re=e.createContext(),ae=()=>{const t=e.useContext(re);if(!t)throw new Error("useVirtualKeyboardContext must be used within a VirtualKeyboardProvider");return t},ne=({children:t})=>{const r=(()=>{const[t,r]=e.useState(!1),[a,n]=e.useState(null),[o,s]=e.useState("text"),[c,i]=e.useState(""),[d,l]=e.useState(!1);e.useEffect((()=>{const e=()=>{const e=document.body.classList.contains("gamepad-navigation-active");l(e)};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()}),[]);const u=e.useCallback(((e,t="text",a="")=>{e&&(n(e),s(t),i(a),r(!0),e.blur())}),[]),f=e.useCallback((()=>{r(!1),n(null),s("text"),i("")}),[]),b=e.useCallback((e=>{if(!a)return;Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(a,e||"");const t=new Event("input",{bubbles:!0});a.dispatchEvent(t);const r=new Event("change",{bubbles:!0});a.dispatchEvent(r),f()}),[a,f]),g=e.useCallback(((e,t="text",r="")=>{if(!e)return;let a=e;e.querySelector&&e.querySelector("input")&&(a=e.querySelector("input"));const n=e=>{d&&document.body.classList.contains("gamepad-navigation-active")&&(e.preventDefault(),u(a,t,r))};return a.addEventListener("click",n),()=>{a.removeEventListener("click",n)}}),[d,u]),h=e.useCallback((()=>a?.value||""),[a]);return{isVisible:t,inputType:o,keyboardTitle:c,currentInput:a,isGamepadActive:d,showKeyboard:u,hideKeyboard:f,handleEnter:b,enhanceInput:g,getCurrentInputValue:h}})(),{isVisible:a,inputType:n,hideKeyboard:o,handleEnter:s,getCurrentInputValue:c}=r;return m.jsxs(re.Provider,{value:r,children:[t,a&&m.jsx(te,{isVisible:a,inputType:n,initialValue:c(),onClose:o,onEnter:s})]})},oe="_toast_1ismj_1",se="_slideOut_1ismj_31",ce="_iconWrapper_1ismj_46",ie="_icon_1ismj_46",de="_emojiIcon_1ismj_61",le="_content_1ismj_75",ue="_title_1ismj_82",fe="_message_1ismj_89",be="_emojiMessage_1ismj_97",ge="_playerName_1ismj_104",he="_reactionText_1ismj_110",pe="_emojiReaction_1ismj_116",me="_closeButton_1ismj_134",ye=({title:t,message:r,emoji:a="ℹ",color:n="#3498db",duration:o=4e3,onClose:s,position:c})=>{const[i,d]=e.useState(!0);e.useEffect((()=>{if(o>0){const e=setTimeout((()=>{d(!1),setTimeout(s,300)}),o);return()=>clearTimeout(e)}}),[o,s]);const l=!t&&"ℹ"!==a;return m.jsxs("div",{className:`${oe} ${l&&i?pe:""} ${i?"":se}`,style:{top:"20px",zIndex:1e4+c,borderColor:n,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:[m.jsx("div",{className:ce,children:m.jsx("span",{className:`${ie} ${l?de:""}`,style:{color:n,textShadow:l?`0 0 20px ${n}, 0 0 40px ${n}60`:`0 0 8px ${n}80`},children:a})}),m.jsxs("div",{className:le,children:[t&&m.jsx("div",{className:ue,children:t}),m.jsx("div",{className:`${fe} ${l?be:""}`,children:l?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:ge,children:r}),m.jsx("span",{className:he,children:"reacted!"})]}):r})]}),m.jsx("button",{className:me,onClick:s,"aria-label":"Close notification",children:"×"})]})},xe=e.createContext(),ve=({children:t})=>{const[r,a]=e.useState([]),[n,o]=e.useState([]),[s,c]=e.useState(0),{socket:i}=I(),d=e.useCallback(((e,t,r="ℹ",n="#3498db",i=4e3)=>{const d=Date.now()+Math.random(),l={id:d,title:e,message:t,emoji:r,color:n,duration:i},u=Date.now();return u-s>=600?(a((e=>[...e,l])),c(u)):o((e=>[...e,l])),d}),[s]),l=e.useCallback((e=>{a((t=>t.filter((t=>t.id!==e))))}),[]),u=e.useCallback(((e,t,r)=>d(e,t,"✓","#27ae60",r)),[d]),f=e.useCallback(((e,t,r)=>d(e,t,"✕","#e74c3c",r)),[d]),b=e.useCallback(((e,t,r)=>d(e,t,"⚠","#f39c12",r)),[d]),g=e.useCallback(((e,t,r)=>d(e,t,"ℹ","#3498db",r)),[d]),h=e.useCallback(((e,t,r)=>d(e,t,"🎮","#9b59b6",r)),[d]),p=e.useCallback(((e,t,r)=>d(e,t,"💰","#16a085",r)),[d]);e.useEffect((()=>{if(0===n.length)return;const e=setTimeout((()=>{const e=n[0];o((e=>e.slice(1))),a((t=>[...t,e])),c(Date.now())}),600);return()=>clearTimeout(e)}),[n,r]),e.useEffect((()=>{if(!i)return;const e=e=>{d(e.title||"",e.message,e.emoji||"ℹ",e.color||"#3498db",e.duration)};return i.on("toast",e),()=>{i.off("toast",e)}}),[i,d]);const y={addToast:d,removeToast:l,showSuccess:u,showError:f,showWarning:b,showInfo:g,showGameEvent:h,showMoneyEvent:p,toasts:r};return m.jsxs(xe.Provider,{value:y,children:[t,m.jsx("div",{className:"toast-container",style:{position:"fixed",top:0,right:0,zIndex:1e4},children:r.map(((e,t)=>m.jsx(ye,{title:e.title,message:e.message,emoji:e.emoji,color:e.color,duration:e.duration,position:t,onClose:()=>l(e.id)},e.id)))})]})};function we(){return e.useEffect((()=>{v.initialize()}),[]),m.jsx(ve,{children:m.jsx(ne,{children:m.jsx(n,{router:F})})})}const _e={default:{"--bg-primary":"#1a2a3a","--bg-secondary":"#2c3e50","--bg-card":"#152534","--bg-card-dark":"#1c2a3a","--bg-panel-start":"#1e2a38","--bg-panel-end":"#2980b9","--bg-loading":"#1a1a2e","--text-primary":"#ecf0f1","--text-secondary":"#bdc3c7","--text-dark":"#2c3e50","--text-light":"#ecf0f1","--text-muted":"#7f8c8d","--text-white":"#ffffff","--text-gray":"#666666","--text-error":"#e74c3c","--text-success":"#2ecc71","--text-warning":"#f1c40f","--text-info":"#3498db","--text-faded":"rgba(255, 255, 255, 0.6)","--text-subtle":"rgba(255, 255, 255, 0.7)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#3498db","--info-dark":"#2980b9","--info-light":"#5dade2","--success":"#2ecc71","--success-dark":"#27ae60","--success-light":"#58d68d","--btn-primary-start":"#3498db","--btn-primary-end":"#27ae60","--btn-primary-hover-start":"#3fa9e5","--btn-primary-hover-end":"#2ecc71","--btn-secondary-start":"rgba(52, 73, 94, 0.9)","--btn-secondary-end":"rgba(44, 62, 80, 0.9)","--btn-secondary-hover-start":"rgba(52, 73, 94, 1)","--btn-secondary-hover-end":"rgba(44, 62, 80, 1)","--btn-tertiary-start":"#3498db","--btn-tertiary-end":"#2980b9","--btn-tertiary-hover-start":"#5faee3","--btn-tertiary-hover-end":"#3498db","--btn-tertiary-shadow":"rgba(52, 152, 219, 0.3)","--color-focus":"#00ff88","--color-focus-shadow":"rgba(0, 255, 136, 0.3)","--color-divider-start":"rgba(52, 152, 219, 0.2)","--color-divider-middle":"rgba(52, 152, 219, 0.8)","--color-divider-end":"rgba(52, 152, 219, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(10, 25, 47, 0.95)","--input-bg-hover":"rgba(15, 35, 60, 0.98)","--input-bg-focus":"rgba(20, 40, 70, 1)","--input-text-color":"#ecf0f1","--input-border-color":"rgba(51, 65, 85, 0.7)","--color-glass-dark":"rgba(0, 0, 0, 0.3)","--color-glass-light":"rgba(0, 0, 0, 0.1)"},light:{"--bg-primary":"#fef0ff","--bg-secondary":"#fff0f8","--bg-card":"#ffffff","--bg-card-dark":"#f8f9ff","--bg-panel-start":"#e8f4ff","--bg-panel-end":"#ffe0f0","--bg-loading":"#fff5fb","--text-primary":"#2e3f7f","--text-secondary":"#7b68ee","--text-dark":"#1a237e","--text-light":"#2e3f7f","--text-muted":"#9c88ff","--text-white":"#2e3f7f","--text-gray":"#8e7fff","--text-error":"#ff79a8","--text-success":"#4cd964","--text-warning":"#ff9500","--text-info":"#5ac8fa","--text-faded":"rgba(46, 63, 127, 0.5)","--text-subtle":"rgba(46, 63, 127, 0.65)","--text-bright":"rgba(46, 63, 127, 0.85)","--info":"#5ac8fa","--info-dark":"#32ade6","--info-light":"#87ceeb","--color-glass-dark":"rgba(90, 200, 250, 0.08)","--color-glass-light":"rgba(255, 121, 168, 0.08)","--success":"#4cd964","--success-dark":"#3fc550","--success-light":"#76ff7a","--btn-primary-start":"#ff79a8","--btn-primary-end":"#ff9500","--btn-primary-hover-start":"#ff6fa3","--btn-primary-hover-end":"#ff8800","--btn-secondary-start":"rgba(183, 153, 255, 0.3)","--btn-secondary-end":"rgba(255, 179, 230, 0.3)","--btn-secondary-hover-start":"rgba(183, 153, 255, 0.5)","--btn-secondary-hover-end":"rgba(255, 179, 230, 0.5)","--btn-tertiary-start":"#5ac8fa","--btn-tertiary-end":"#007aff","--btn-tertiary-hover-start":"#32ade6","--btn-tertiary-hover-end":"#0051d5","--btn-tertiary-shadow":"rgba(90, 200, 250, 0.3)","--color-focus":"#ff79a8","--color-focus-shadow":"rgba(255, 121, 168, 0.3)","--color-border-light":"rgba(183, 153, 255, 0.2)","--color-border-lighter":"rgba(183, 153, 255, 0.3)","--color-divider-start":"rgba(255, 149, 0, 0.15)","--color-divider-middle":"rgba(255, 149, 0, 0.5)","--color-divider-end":"rgba(255, 149, 0, 0.15)","--accent":"#ff9500","--accent-dark":"#ff8800","--secondary":"#ff79a8","--secondary-dark":"#ff6fa3","--input-bg":"rgba(255, 255, 255, 0.95)","--input-bg-hover":"rgba(255, 255, 255, 0.98)","--input-bg-focus":"#ffffff","--input-text-color":"#2e3f7f","--input-border-color":"rgba(183, 153, 255, 0.4)"},dark:{"--bg-primary":"#0a0a0a","--bg-secondary":"#161616","--bg-card":"#1a1a1a","--bg-card-dark":"#222222","--bg-panel-start":"#1f1f1f","--bg-panel-end":"#2980b9","--bg-loading":"#0d0d0d","--text-primary":"#e8e8e8","--text-secondary":"#a8a8a8","--text-dark":"#ffffff","--text-light":"#e8e8e8","--text-muted":"#888888","--text-white":"#ffffff","--text-gray":"#999999","--text-error":"#ff6b6b","--text-success":"#51cf66","--text-warning":"#ffd43b","--text-info":"#4dabf7","--text-faded":"rgba(255, 255, 255, 0.45)","--text-subtle":"rgba(255, 255, 255, 0.6)","--text-bright":"rgba(255, 255, 255, 0.9)","--info":"#2980b9","--info-dark":"#2471a3","--info-light":"#3498db","--success":"#27ae60","--success-dark":"#1e8449","--success-light":"#2ecc71","--btn-primary-start":"#2980b9","--btn-primary-end":"#f39c12","--btn-primary-hover-start":"#3498db","--btn-primary-hover-end":"#f1c40f","--btn-secondary-start":"rgba(33, 37, 41, 0.9)","--btn-secondary-end":"rgba(23, 25, 28, 0.9)","--btn-secondary-hover-start":"rgba(52, 58, 64, 1)","--btn-secondary-hover-end":"rgba(33, 37, 41, 1)","--btn-tertiary-start":"#2980b9","--btn-tertiary-end":"#1f618d","--btn-tertiary-hover-start":"#3498db","--btn-tertiary-hover-end":"#2980b9","--btn-tertiary-shadow":"rgba(41, 128, 185, 0.4)","--color-focus":"#00ccff","--color-focus-shadow":"rgba(0, 204, 255, 0.3)","--color-border-light":"rgba(255, 255, 255, 0.12)","--color-border-lighter":"rgba(255, 255, 255, 0.18)","--color-divider-start":"rgba(41, 128, 185, 0.2)","--color-divider-middle":"rgba(41, 128, 185, 0.8)","--color-divider-end":"rgba(41, 128, 185, 0.2)","--accent":"#f39c12","--accent-dark":"#d68910","--secondary":"#c0392b","--secondary-dark":"#a93226","--input-bg":"rgba(255, 255, 255, 0.08)","--input-bg-hover":"rgba(255, 255, 255, 0.1)","--input-bg-focus":"rgba(255, 255, 255, 0.12)","--input-text-color":"var(--text-primary)","--input-border-color":"var(--color-border-light)","--color-glass-dark":"rgba(41, 128, 185, 0.08)","--color-glass-light":"rgba(243, 156, 18, 0.08)"},emerald:{"--bg-primary":"#0f2818","--bg-secondary":"#1a3d2e","--bg-card":"#0d2016","--bg-card-dark":"#122a1f","--bg-panel-start":"#0f2818","--bg-panel-end":"#27ae60","--bg-loading":"#0a1f12","--text-primary":"#e8f5e9","--text-secondary":"#a5d6a7","--text-dark":"#1b5e20","--text-light":"#e8f5e9","--text-muted":"#81c784","--text-white":"#ffffff","--text-gray":"#689f38","--text-error":"#f44336","--text-success":"#4caf50","--text-warning":"#ffeb3b","--text-info":"#2ecc71","--text-faded":"rgba(232, 245, 233, 0.6)","--text-subtle":"rgba(232, 245, 233, 0.7)","--text-bright":"rgba(232, 245, 233, 0.9)","--info":"#27ae60","--info-dark":"#229954","--info-light":"#2ecc71","--success":"#2ecc71","--success-dark":"#27ae60","--success-light":"#58d68d","--btn-primary-start":"#27ae60","--btn-primary-end":"#f1c40f","--btn-primary-hover-start":"#2ecc71","--btn-primary-hover-end":"#f39c12","--btn-secondary-start":"rgba(30, 52, 39, 0.9)","--btn-secondary-end":"rgba(20, 35, 26, 0.9)","--btn-secondary-hover-start":"rgba(39, 68, 51, 1)","--btn-secondary-hover-end":"rgba(30, 52, 39, 1)","--btn-tertiary-start":"#27ae60","--btn-tertiary-end":"#1e8449","--btn-tertiary-hover-start":"#2ecc71","--btn-tertiary-hover-end":"#27ae60","--btn-tertiary-shadow":"rgba(39, 174, 96, 0.3)","--color-focus":"#00ff88","--color-focus-shadow":"rgba(0, 255, 136, 0.3)","--color-divider-start":"rgba(39, 174, 96, 0.2)","--color-divider-middle":"rgba(39, 174, 96, 0.8)","--color-divider-end":"rgba(39, 174, 96, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--secondary":"#e67e22","--secondary-dark":"#d35400","--input-bg":"rgba(15, 40, 24, 0.95)","--input-bg-hover":"rgba(20, 50, 30, 0.98)","--input-bg-focus":"rgba(25, 60, 35, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(39, 174, 96, 0.3)","--color-glass-dark":"rgba(39, 174, 96, 0.08)","--color-glass-light":"rgba(241, 196, 15, 0.08)"},sunset:{"--bg-primary":"#2d1810","--bg-secondary":"#4a2c2a","--bg-card":"#231410","--bg-card-dark":"#2f1a17","--bg-panel-start":"#2d1810","--bg-panel-end":"#e67e22","--bg-loading":"#1a0f08","--text-primary":"#ffe5d9","--text-secondary":"#ffb5a1","--text-dark":"#5d2818","--text-light":"#ffe5d9","--text-muted":"#d4a574","--text-white":"#fff5f0","--text-gray":"#a67c52","--text-error":"#ff6b6b","--text-success":"#f39c12","--text-warning":"#ffeb3b","--text-info":"#ff9f43","--text-faded":"rgba(255, 229, 217, 0.6)","--text-subtle":"rgba(255, 229, 217, 0.7)","--text-bright":"rgba(255, 229, 217, 0.9)","--info":"#e67e22","--info-dark":"#d35400","--info-light":"#f39c12","--success":"#f39c12","--success-dark":"#e67e22","--success-light":"#f5b041","--btn-primary-start":"#e67e22","--btn-primary-end":"#f1c40f","--btn-primary-hover-start":"#d35400","--btn-primary-hover-end":"#f39c12","--btn-secondary-start":"rgba(74, 44, 42, 0.9)","--btn-secondary-end":"rgba(45, 24, 16, 0.9)","--btn-secondary-hover-start":"rgba(87, 52, 49, 1)","--btn-secondary-hover-end":"rgba(74, 44, 42, 1)","--btn-tertiary-start":"#e67e22","--btn-tertiary-end":"#ca6f1e","--btn-tertiary-hover-start":"#f39c12","--btn-tertiary-hover-end":"#e67e22","--btn-tertiary-shadow":"rgba(230, 126, 34, 0.3)","--color-focus":"#ff9944","--color-focus-shadow":"rgba(255, 153, 68, 0.3)","--color-divider-start":"rgba(230, 126, 34, 0.2)","--color-divider-middle":"rgba(230, 126, 34, 0.8)","--color-divider-end":"rgba(230, 126, 34, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--secondary":"#c0392b","--secondary-dark":"#a93226","--input-bg":"rgba(45, 24, 16, 0.95)","--input-bg-hover":"rgba(55, 30, 20, 0.98)","--input-bg-focus":"rgba(65, 36, 24, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(230, 126, 34, 0.3)","--color-glass-dark":"rgba(230, 126, 34, 0.08)","--color-glass-light":"rgba(241, 196, 15, 0.08)"},purple:{"--bg-primary":"#1a1a2e","--bg-secondary":"#2d2d44","--bg-card":"#16132d","--bg-card-dark":"#1f1b3a","--bg-panel-start":"#1a1a2e","--bg-panel-end":"#8e44ad","--bg-loading":"#0f0f1a","--text-primary":"#f3e5f5","--text-secondary":"#ce93d8","--text-dark":"#4a148c","--text-light":"#f3e5f5","--text-muted":"#ba68c8","--text-white":"#ffffff","--text-gray":"#9c27b0","--text-error":"#f44336","--text-success":"#ab47bc","--text-warning":"#ffc107","--text-info":"#ba68c8","--text-faded":"rgba(243, 229, 245, 0.6)","--text-subtle":"rgba(243, 229, 245, 0.7)","--text-bright":"rgba(243, 229, 245, 0.9)","--info":"#8e44ad","--info-dark":"#7d3c98","--info-light":"#a569bd","--success":"#a569bd","--success-dark":"#8e44ad","--success-light":"#bb8fce","--btn-primary-start":"#8e44ad","--btn-primary-end":"#f1c40f","--btn-primary-hover-start":"#a569bd","--btn-primary-hover-end":"#f39c12","--btn-secondary-start":"rgba(45, 45, 68, 0.9)","--btn-secondary-end":"rgba(26, 26, 46, 0.9)","--btn-secondary-hover-start":"rgba(58, 58, 88, 1)","--btn-secondary-hover-end":"rgba(45, 45, 68, 1)","--btn-tertiary-start":"#8e44ad","--btn-tertiary-end":"#6c3483","--btn-tertiary-hover-start":"#a569bd","--btn-tertiary-hover-end":"#8e44ad","--btn-tertiary-shadow":"rgba(142, 68, 173, 0.3)","--color-focus":"#cc99ff","--color-focus-shadow":"rgba(204, 153, 255, 0.3)","--color-divider-start":"rgba(142, 68, 173, 0.2)","--color-divider-middle":"rgba(142, 68, 173, 0.8)","--color-divider-end":"rgba(142, 68, 173, 0.2)","--accent":"#f1c40f","--accent-dark":"#d4ac0d","--secondary":"#e74c3c","--secondary-dark":"#c0392b","--input-bg":"rgba(26, 26, 46, 0.95)","--input-bg-hover":"rgba(35, 35, 55, 0.98)","--input-bg-focus":"rgba(45, 45, 68, 1)","--input-text-color":"var(--text-primary)","--input-border-color":"rgba(142, 68, 173, 0.3)","--color-glass-dark":"rgba(142, 68, 173, 0.08)","--color-glass-light":"rgba(241, 196, 15, 0.08)"}},Ae=e=>{const t=_e[e]||_e.default,r=document.documentElement;Object.entries(t).forEach((([e,t])=>{r.style.setProperty(e,t)}))},ke=()=>localStorage.getItem("selectedTheme")||"default",je=e=>{localStorage.setItem("selectedTheme",e),Ae(e)},Se=e.createContext(null),Ee=e=>{if(!e)return null;const t="https://api.in-between.live";if(e.startsWith("http"))return e;if(e.startsWith("/files/"))return`${t}${e}`;if(e.includes("/uploads/")){const r=e.split("/"),a=r.pop();return`${t}/files/${r[r.length-1]}/${a}`}return`${t}${e}`},Ce=e=>e?{...e,profileImg:Ee(e.profileImg),twoSecondPotGif:Ee(e.twoSecondPotGif),twoSecondPotMp3:e.twoSecondPotMp3}:{},Pe=({children:t})=>{const[r,a]=e.useState({profileImg:null,autoAnte:!1,muted:!1,twoSecondPotGif:null,twoSecondPotMp3:null,selectedTitle:null}),[n,s]=e.useState(!0),{user:c}=L(),i=o.useCallback((async()=>{if(!c)return a({autoAnte:!1}),void s(!1);try{s(!0);const e="https://api.in-between.live",t=localStorage.getItem("token");if(!t)return void s(!1);const r=await fetch(`${e}/preferences`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to load preferences");const n=await r.json(),o=Ce(n)||{autoAnte:!1,muted:!1};a(o),void 0!==o.muted&&v.setMuted(o.muted)}catch(e){a({autoAnte:!1})}finally{s(!1)}}),[c]);e.useEffect((()=>{c&&i()}),[c,i]);const d=async(e,t)=>{if(!c)return!1;try{const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;a((r=>({...r,[e]:t}))),"muted"===e&&v.setMuted(t);const o=await fetch(`${r}/preferences/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({value:t})});if(!o.ok)throw new Error(`Failed to update ${e} preference`);const s=await o.json(),c=Ce(s);return a(c),!0}catch(r){return await i(),!1}};return m.jsx(Se.Provider,{value:{preferences:r,updatePreference:d,toggleAutoAnte:async()=>{const e=!r.autoAnte;return await d("autoAnte",e)},toggleMute:async()=>{const e=!r.muted;return await d("muted",e)},updateSelectedTitle:async e=>await d("selectedTitle",e),uploadTwoSecondPotGif:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;const o=await fetch(`${r}/preferences/twoSecondPotGif`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:t}),s=await o.text();if(!o.ok)throw new Error(`Failed to upload GIF file: ${s}`);const c=s?JSON.parse(s):{},i=Ee(c.fileUrl);return a((e=>({...e,twoSecondPotGif:i}))),!0}catch(t){return!1}},uploadTwoSecondPotMp3:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;const o=await fetch(`${r}/preferences/twoSecondPotMp3`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:t}),s=await o.text();if(!o.ok)throw new Error(`Failed to upload MP3 file: ${s}`);const c=s?JSON.parse(s):{};return a((e=>({...e,twoSecondPotMp3:c.fileUrl}))),!0}catch(t){return!1}},uploadProfileImg:async e=>{if(!e)return!1;try{const t=new FormData;t.append("file",e);const r="https://api.in-between.live",n=localStorage.getItem("token");if(!n)return!1;const o=await fetch(`${r}/preferences/profileImg`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:t}),s=await o.text();if(!o.ok)throw new Error(`Failed to upload profile image: ${s}`);const c=s?JSON.parse(s):{},i=Ee(c.fileUrl);return a((e=>({...e,profileImg:i}))),!0}catch(t){return!1}},loading:n},children:t})},Ie=()=>{const t=e.useContext(Se);if(!t)throw new Error("usePreferences must be used within a PreferencesProvider");return t},Te=e.createContext(null),$e=({children:t})=>{const{socket:r}=I(),{token:a}=L(),[n,o]=e.useState(new Map),s=e.useRef(new Set),c=e.useRef(null);e.useEffect((()=>{if(!r)return;const e=({userId:e,data:t})=>{o((r=>{const a=new Map(r);return a.set(e,t),a}))};return r.on("userDataUpdated",e),()=>{r.off("userDataUpdated",e)}}),[r]),e.useEffect((()=>()=>{c.current&&clearTimeout(c.current)}),[]);const i=e.useCallback((async e=>{if(!e||0===e.length||!a)return{};try{const t=await fetch(`${C}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({userIds:e})});if(!t.ok)throw new Error("Failed to fetch users data");const r=await t.json();return o((e=>{const t=new Map(e);return Object.entries(r).forEach((([e,r])=>{t.set(e,r)})),t})),r}catch(t){return{}}}),[a]),d=e.useCallback((()=>{if(0===s.current.size)return;const e=Array.from(s.current);s.current.clear(),i(e)}),[i]),l={getUserData:e.useCallback((e=>{if(!e)return null;const t=n.get(e);return t||(s.current.add(e),c.current&&clearTimeout(c.current),c.current=setTimeout((()=>{d()}),10),null)}),[n,d]),prefetchUsers:e.useCallback((e=>{const t=e.filter((e=>!n.has(e)));t.length>0&&i(t)}),[n,i])};return m.jsx(Te.Provider,{value:l,children:t})},Ne=t=>{const r=e.useContext(Te);if(!r)throw new Error("useUserData must be used within UserDataProvider");return r.getUserData(t)};(()=>{const e=localStorage.getItem("selectedTheme")||"default";Ae(e)})(),y.createRoot(document.getElementById("root")).render(m.jsx(o.StrictMode,{children:m.jsx(N,{children:m.jsx(T,{children:m.jsx($e,{children:m.jsx(Pe,{children:m.jsx(we,{})})})})})}));export{C as A,K as B,E as L,Te as U,L as a,I as b,Ne as c,G as d,O as e,Ie as f,ke as g,je as h,m as j,v as s,ae as u};
