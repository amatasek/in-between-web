{"version":3,"file":"index-Dr7WMkb_.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/components/auth/AuthForm.jsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/constants/UIConstants.js","../../src/components/common/WelcomePopup.jsx","../../src/contexts/AuthContext.jsx","../../src/components/common/AppHeader.jsx","../../src/components/auth/AuthPage.jsx","../../src/contexts/LobbyContext.jsx","../../src/contexts/PreferencesContext.jsx","../../src/components/common/OnlinePlayerCount.jsx","../../src/components/common/CoinIcon.jsx","../../src/components/common/CurrencyAmount.jsx","../../src/components/icons/GearIcon.jsx","../../src/components/common/BaseModal.jsx","../../src/components/ToggleSwitch.jsx","../../src/components/FileUpload.jsx","../../src/components/PreferencesModal.jsx","../../src/components/common/IconButton.jsx","../../src/components/common/PreferencesButton.jsx","../../src/components/UserAvatar.jsx","../../src/components/GameSettingsModal.jsx","../../src/components/icons/LockIcon.jsx","../../src/components/GameCard.jsx","../../src/components/icons/QuestionIcon.jsx","../../src/components/GameRulesModal.jsx","../../src/components/common/RulesButton.jsx","../../src/components/Lobby.jsx","../../src/contexts/GameContext.jsx","../../../shared/constants/GameConstants.js","../../src/components/icons/DownloadIcon.jsx","../../src/components/common/TransactionDownloadButton.jsx","../../src/components/GameSummaryModal.jsx","../../src/components/icons/ExitIcon.jsx","../../src/components/common/LeaveButton.jsx","../../src/components/GameHeader.jsx","../../src/components/icons/ArrowIcon.jsx","../../src/components/CardDisplay.jsx","../../src/components/PotButton.jsx","../../src/components/BettingPanel.jsx","../../src/components/PlayerList.jsx","../../src/components/PotDisplay.jsx","../../src/components/DeckDisplay.jsx","../../src/components/AutoAnteToggle.jsx","../../src/components/AnteControls.jsx","../../src/components/ResultsPanel.jsx","../../src/components/AceChoicePanel.jsx","../../src/components/SecondChancePanel.jsx","../../src/components/GameLog.jsx","../../src/components/GameScreen.jsx","../../src/components/common/LoadingScreen.jsx","../../src/components/common/PasswordPromptModal.jsx","../../src/components/GameRoom.jsx","../../src/router.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 1000];     // 0 to 1.0 seconds\n      sprites.leave = [1500, 1000]; // 1.5 to 2.5 seconds\n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React, { useState } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Alert,\n  useMediaQuery,\n} from '@mui/material';\nimport styles from './AuthForm.module.css';\n\nconst AuthForm = ({ onSubmit, mode }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      await onSubmit(username, password);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <Paper className={styles.authForm} elevation={0}>\n      <Typography variant=\"h5\" component=\"h2\" gutterBottom sx={{ color: 'var(--info)', fontWeight: 600 }}>\n        {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2, backgroundColor: 'rgba(231, 76, 60, 0.2)', color: 'var(--text-primary)' }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Username\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 3 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n        \n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 6 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          size=\"large\"\n          className={styles.submitButton}\n          sx={{\n            mt: isSmallMobile ? 2 : 3,\n            background: 'linear-gradient(to right, var(--info), var(--success))',\n            textTransform: 'none',\n            fontWeight: 'bold',\n            letterSpacing: '0.5px',\n            padding: isSmallMobile ? '10px' : '12px',\n            fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            '&:hover': {\n              background: 'linear-gradient(to right, var(--info-dark), var(--success-dark))',\n              boxShadow: 'var(--shadow-lg)',\n              transform: 'translateY(-2px)'\n            }\n          }}\n        >\n          {mode === 'login' ? 'Sign In' : 'Create Account'}\n        </Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default AuthForm;\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\nimport { useAuth } from './AuthContext';\n\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\nexport const SocketProvider = ({ children }) => {\n  const { token } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (!token) {\n      if (socket) {\n        socket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n      return;\n    }\n\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      setError(null);\n    });\n    \n    newSocket.on('authenticated', (userData) => {\n      newSocket.auth = {\n        userId: userData.userId,\n        username: userData.username\n      };\n      \n      setIsConnected(true);\n      \n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      setError(err.message || 'Unknown socket error');\n    });\n\n    const socketEvents = [\n      'connect',\n      'authenticated',\n      'disconnect',\n      'connect_error',\n      'error',\n      'transport'\n    ];\n\n    return () => {\n      if (newSocket) {\n        socketEvents.forEach(event => newSocket.off(event));\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n\n  }, [token]);\n\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","/**\n * UI Constants for the In-Between game\n * Centralizing UI elements like icons makes them easier to update across the application\n */\n\n// Game Icons\nexport const ICONS = {\n  COIN: '🔶', // Yellow/gold diamond icon for currency\n  POT: '🍯',\n  DEALER: '🃏',\n  CHECK: '✓',\n  DECK: '🃏' // Card deck icon\n};\n","import React from 'react';\nimport styles from './WelcomePopup.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A popup component that displays a welcome message and balance reset notification\n * @param {Object} props - Component props\n * @param {string} props.username - The username to display in the welcome message\n * @param {number} props.balance - The user's reset balance\n * @param {function} props.onClose - Function to call when the popup is closed\n */\nconst WelcomePopup = ({ username, balance, onClose }) => {\n  return (\n    <div className={styles.overlay}>\n      <div className={styles.popup}>\n        <div className={styles.header}>\n          <h2>Welcome, {username}!</h2>\n          <button className={styles.closeButton} onClick={onClose}>×</button>\n        </div>\n        <div className={styles.content}>\n          <p className={styles.message}>\n            Your balance has been reset to:\n          </p>\n          <p className={styles.balance}>\n            <span className={styles.coinIcon}>{ICONS.COIN}</span>\n            <span className={styles.balanceAmount}>{balance}</span>\n          </p>\n          <p className={styles.subtext}>\n            Thank you for participating in the <span className={styles.inlineGameName}>In Between <span className={styles.inlineLiveTag}>LIVE</span></span> beta program. Your feedback is valuable as we continue to enhance the gaming experience.\n          </p>\n        </div>\n        <div className={styles.footer}>\n          <button className={styles.actionButton} onClick={onClose}>\n            Let's Play!\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomePopup;\n","import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdated', (data) => { \n        console.log('[AuthContext] Received balanceUpdated event:', data); \n        if (data && typeof data.balance === 'number') {\n          console.log(`[AuthContext] Updating user balance from ${user?.balance} to ${data.balance}`); \n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state\n          setUser(updatedUser);\n        } else {\n          console.warn('[AuthContext] Received invalid balance data:', data);\n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdated');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async (authToken) => {\n    try {\n      // Use the passed token directly\n      if (!authToken) {\n        return null;\n      }\n\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${authToken}`, // Use authToken\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Single Effect for Initial Authentication Check\n  useEffect(() => {\n    const initializeAuth = async () => {\n      let currentToken = null;\n      try {\n        currentToken = localStorage.getItem('token');\n        \n        if (currentToken) {\n          setToken(currentToken); \n        }\n      } catch (error) {\n        console.error('[Auth] Error reading token from localStorage:', error);\n        localStorage.removeItem('token'); // Clear potentially corrupted token\n      }\n\n      // Now, decide whether to fetch user data based on the token found\n      if (currentToken) {\n        try {\n          const userData = await fetchUserData(currentToken); \n          if (userData) {\n            setUser(userData); \n          } else {\n            // Fetch failed or returned no data for a valid token\n            console.error('[Auth] Token valid but failed to fetch user data. Logging out.');\n            setUser(null);\n            setToken(null);\n            localStorage.removeItem('token');\n          }\n        } catch (error) {\n          console.error('[Auth] Error during user data fetch. Logging out.', error);\n          setUser(null);\n          setToken(null);\n          localStorage.removeItem('token');\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        setUser(null);\n        setToken(null);\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []); // Empty dependency array ensures it runs only once on mount\n\n  const login = async (userData, newToken) => {\n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      const completeUserData = await fetchUserData(newToken);\n      if (completeUserData) {\n        setUser(completeUserData);\n      }\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = useCallback(() => {\n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage\n    localStorage.removeItem('token');\n  }, []); // Empty dependency array means this function never changes\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = useCallback(async () => {\n    try {\n      // fetchUserData depends on the 'token' state variable\n      const userData = await fetchUserData(token);\n      if (userData) {\n        setUser(userData);\n      } else {\n        console.error('[Auth] Failed to refresh user data. Logging out.');\n        // logout is now stable thanks to useCallback above\n        logout();\n      }\n    } catch (error) { \n      console.error('[Auth] Error during manual refresh. Logging out.', error);\n      logout();\n    }\n  // Add dependencies: token and logout\n  }, [token, logout]);\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","import React from 'react';\nimport styles from './AppHeader.module.css';\n\n/**\n * A shared header component for the In-Between game\n * Used across auth and lobby screens for consistent branding\n */\nconst AppHeader = () => {\n  return (\n    <div className={styles.headerContainer}>\n      <h1 className={styles.gameTitle}>\n        In Between <span className={styles.liveTag}>LIVE</span>\n      </h1>\n    </div>\n  );\n};\n\nexport default AppHeader;\n","import React, { useState } from 'react';\nimport { Box, Button, Typography } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport AuthForm from './AuthForm.jsx';\nimport { useAuth } from '../../contexts/AuthContext';\nimport styles from './AuthPage.module.css';\nimport AppHeader from '../common/AppHeader';\n\nconst AuthPage = () => {\n  const [mode, setMode] = useState('login');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const [error, setError] = useState(null);\n\n  const handleAuth = async (username, password) => {\n    if (!username || !password) {\n      setError('Username and password are required');\n      return;\n    }\n\n    setError(null);\n    // Get API URL from environment or use localhost as fallback\n    const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    const endpoint = `${API_URL}/auth/${mode}`;\n    \n    console.log(`[Auth] ${mode.toUpperCase()} attempt: ${username}`);\n\n    try {\n      const requestBody = { username, password };\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(requestBody),\n      });\n\n      let data;\n      try {\n        data = await response.json();\n      } catch (error) {\n        console.error('[Client] Error parsing response:', error);\n        throw new Error('Invalid response from server');\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Authentication failed');\n      }\n\n      if (!data.user?.username || !data.user?.id || !data.token) {\n        console.error('[Client] Invalid response format:', {\n          hasUser: !!data.user,\n          hasUsername: !!data.user?.username,\n          hasId: !!data.user?.id,\n          hasToken: !!data.token\n        });\n        throw new Error('Invalid server response format');\n      }\n\n      console.log(`[Auth] ${mode.toUpperCase()} successful: ${data.user.username}`);\n      try {\n        login(data.user, data.token);\n        // Navigate to the lobby after successful login\n        navigate('/');\n      } catch (error) {\n        console.error('[Client] Error in login callback:', error);\n        throw new Error('Failed to initialize user session');\n      }\n    } catch (error) {\n      console.error('[Client] Auth error:', {\n        message: error.message,\n        endpoint,\n        mode\n      });\n      setError(error.message || 'Failed to connect to server');\n    }\n\n\n  };\n\n  return (\n    <Box className={styles.authPage}>\n      <AppHeader />\n      \n      <Box className={styles.formContainer}>\n        {error && (\n          <Typography className={styles.error}>\n            {error}\n          </Typography>\n        )}\n        \n        <AuthForm mode={mode} onSubmit={handleAuth} />\n        \n        <Box textAlign=\"center\" mt={3}>\n          <Button\n            color=\"primary\"\n            onClick={() => setMode(mode === 'login' ? 'register' : 'login')}\n            sx={{\n              color: '#ecf0f1',\n              textTransform: 'none',\n              fontSize: '1rem',\n              '&:hover': {\n                backgroundColor: 'rgba(255, 255, 255, 0.1)'\n              }\n            }}\n          >\n            {mode === 'login' \n              ? \"Don't have an account? Register\" \n              : \"Already have an account? Login\"}\n          </Button>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AuthPage;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\n\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\nexport const LobbyProvider = ({ children }) => {\n  const { socket, isConnected } = useSocket();\n  \n  const [gameList, setGameList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    \n    const handleGameList = (games) => {\n      setGameList(games);\n      setLoading(false);\n    };\n    \n    const handleError = (err) => {\n      console.error('[LobbyContext] Socket error:', err.message || err);\n      setError(err.message || 'An error occurred');\n      setLoading(false);\n    };\n    \n    socket.on('gameList', handleGameList);\n    socket.on('error', handleError);\n    \n    socket.emit('getGameList');\n    \n    return () => {\n      socket.off('gameList', handleGameList);\n      socket.off('error', handleError);\n    };\n  }, [socket, isConnected]);\n  \n  const contextValue = {\n    gameList,\n    loading,\n    error,\n  };\n  \n  return (\n    <LobbyContext.Provider value={contextValue}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n    console.log('[Preferences] Loading preferences for user:', user.username);\n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        console.log(`[Preferences] Updating sound muted state to: ${value}`);\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      console.log(`[Preferences] Updated ${key}:`, data);\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      console.log(`[Preferences] Formatted ${key} response:`, formattedData);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting GIF upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending GIF upload request to: ${API_URL}/preferences/twoSecondPotGif`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] GIF upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded GIF:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted GIF URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting MP3 upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending MP3 upload request to: ${API_URL}/preferences/twoSecondPotMp3`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] MP3 upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded MP3:', data);\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting profile image upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending profile image upload request to: ${API_URL}/preferences/profileImg`);\n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] Profile image upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded profile image:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted profile image URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import React, { useEffect, useState } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\nimport styles from './OnlinePlayerCount.module.css';\n\nconst OnlinePlayerCount = () => {\n  const { socket, isConnected } = useSocket();\n  const [count, setCount] = useState(null);\n\n  useEffect(() => {\n    if (!socket || !isConnected) return;\n    // Request the current online player count\n    socket.emit('getOnlinePlayerCount', (n) => {\n      setCount(n);\n    });\n    // Listen for real-time updates\n    const handler = (n) => setCount(n);\n    socket.on('onlinePlayerCountUpdate', handler);\n    return () => {\n      socket.off('onlinePlayerCountUpdate', handler);\n    };\n  }, [socket, isConnected]);\n\n  if (count === null) return null;\n  return (\n    <div className={styles.pill}>\n      <span className={styles.pulse} />\n      <span className={styles.text}>{count} online</span>\n    </div>\n  );\n};\n\nexport default OnlinePlayerCount;\n","import React from 'react';\nimport styles from './CoinIcon.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A reusable coin icon component to replace dollar signs\n * @param {Object} props - Component props\n * @param {string} [props.size='small'] - Size of the coin icon ('small', 'medium', 'large')\n * @param {string} [props.className] - Additional CSS class to apply\n */\nconst CoinIcon = ({ size = 'small', className = '' }) => {\n  return (\n    <span className={`${styles.coinIcon} ${styles[size]} ${className}`}>\n      {ICONS.COIN}\n    </span>\n  );\n};\n\nexport default CoinIcon;\n","import React from 'react';\nimport styles from './CurrencyAmount.module.css';\nimport CoinIcon from './CoinIcon.jsx';\n\n/**\n * A reusable component that displays currency amounts with consistent styling\n * @param {Object} props - Component props\n * @param {number} props.amount - The amount to display\n * @param {string} props.size - The size of the coin icon (small, medium, large)\n * @param {string} props.background - Optional custom background style (e.g. 'dark', 'pill')\n * @param {string} props.customClass - Optional custom CSS class to apply\n */\nconst CurrencyAmount = ({ amount, size, background, customClass }) => {\n  // Determine which CSS classes to apply\n  const containerClasses = [\n    styles.currencyAmount,\n    background === 'dark' ? styles.darkBackground : '',\n    background === 'pill' ? styles.pillBackground : '',\n    customClass || ''\n  ].filter(Boolean).join(' ');\n  \n  return (\n    <span className={containerClasses}>\n      <CoinIcon size={size} />\n      <span>{amount}</span>\n    </span>\n  );\n};\n\nexport default CurrencyAmount;\n","import React from 'react';\n\nconst GearIcon = ({ className = 'h-6 w-6', ...props }) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      strokeWidth={1.5}\n      stroke=\"currentColor\"\n      className={className}\n      {...props}\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n      />\n    </svg>\n  );\n};\n\nexport default GearIcon;\n","import React from 'react';\nimport styles from './BaseModal.module.css';\n\n// BaseModal: Shared modal structure for all app modals\nexport default function BaseModal({ title, onClose, children, footer, className = '', ...props }) {\n  return (\n    <div className={styles.overlay} onClick={onClose}>\n      <div\n        className={`${styles.modal} ${className}`}\n        onClick={e => e.stopPropagation()}\n        {...props}\n      >\n        <button\n          className={styles.closeButton}\n          onClick={onClose}\n          aria-label=\"Close\"\n          type=\"button\"\n        >\n          &times;\n        </button>\n        {title && <div className={styles.header}>{title}</div>}\n        <div className={styles.content}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport styles from './styles/ToggleSwitch.module.css';\n\nconst ToggleSwitch = ({ isChecked, onChange, label }) => {\n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={isChecked}\n          onChange={onChange}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        {label && <span className={styles.toggleText}>{label}</span>}\n      </label>\n    </div>\n  );\n};\n\nexport default ToggleSwitch;\n","import React, { useState, useRef } from 'react';\nimport styles from './styles/FileUpload.module.css';\n\nconst FileUpload = ({ \n  onUpload, \n  currentFileUrl, \n  acceptedFileTypes, \n  label,\n  previewType = 'image' // 'image', 'audio', or 'none'\n}) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null);\n  \n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.error('[FileUpload] No file selected');\n      return;\n    }\n    \n    console.log('[FileUpload] File selected:', {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n    \n    setError(null);\n    setIsUploading(true);\n    \n    try {\n      console.log('[FileUpload] Calling onUpload function');\n      const success = await onUpload(file);\n      console.log('[FileUpload] Upload result:', success);\n      \n      if (!success) {\n        console.error('[FileUpload] Upload failed');\n        setError('Failed to upload file. Please try again.');\n      } else {\n        console.log('[FileUpload] Upload successful');\n      }\n    } catch (err) {\n      console.error('[FileUpload] Error uploading file:', err);\n      setError('An error occurred during upload.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  const handleButtonClick = () => {\n    fileInputRef.current.click();\n  };\n  \n  const renderPreview = () => {\n    if (!currentFileUrl) return null;\n    \n    if (previewType === 'image') {\n      return (\n        <div className={styles.previewContainer}>\n          <img \n            src={currentFileUrl} \n            alt=\"Preview\" \n            className={styles.imagePreview} \n          />\n        </div>\n      );\n    } else if (previewType === 'audio') {\n      return (\n        <div className={styles.previewContainer}>\n          <audio \n            controls \n            src={currentFileUrl} \n            className={styles.audioPreview}\n          >\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      );\n    }\n    \n    return null;\n  };\n  \n  return (\n    <div className={styles.fileUploadContainer}>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileChange}\n        accept={acceptedFileTypes}\n        className={styles.fileInput}\n      />\n      \n      {currentFileUrl && renderPreview()}\n      \n      <button \n        type=\"button\" \n        onClick={handleButtonClick}\n        className={`${styles.uploadButton} ${currentFileUrl ? styles.changeButton : ''}`}\n        disabled={isUploading}\n      >\n        {isUploading ? 'Uploading...' : currentFileUrl ? `Change ${label}` : `Upload ${label}`}\n      </button>\n      \n      {error && (\n        <div className={styles.errorMessage}>\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport BaseModal from './common/BaseModal';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport FileUpload from './FileUpload.jsx';\n\nconst PreferencesModal = ({ onClose }) => {\n  const { \n    preferences, \n    toggleAutoAnte,\n    toggleMute,\n    uploadTwoSecondPotGif, \n    uploadTwoSecondPotMp3, \n    uploadProfileImg,\n    loading \n  } = usePreferences();\n\n  if (loading) {\n    return (\n      <BaseModal title=\"Preferences\" onClose={onClose} style={{ maxWidth: 600, maxHeight: '25vh' }}>\n        <div className={baseModalStyles.loadingMessage}>Loading preferences...</div>\n      </BaseModal>\n    );\n  }\n\n  return (\n    <BaseModal title=\"Preferences\" onClose={onClose} style={{ maxWidth: 600, maxHeight: '80vh' }}>\n      <div className={baseModalStyles.settingsContainer}>\n        {/* Game Options Section */}\n        <div className={baseModalStyles.sectionHeader}>Game Options</div>\n\n        {/* Mute Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Mute Sound</h4>\n            <p>Mute all game sound effects</p>\n          </div>\n          <ToggleSwitch \n            isChecked={preferences.muted}\n            onChange={toggleMute}\n          />\n        </div>\n\n        {/* Auto-Ante Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Auto-Ante</h4>\n            <p>Automatically ante up when a new round begins</p>\n          </div>\n          <ToggleSwitch \n            isChecked={preferences.autoAnte}\n            onChange={toggleAutoAnte}\n          />\n        </div>\n\n        {/* Customization Options Section */}\n        <div className={baseModalStyles.sectionHeader}>Customization Options</div>\n\n        {/* Profile Image Setting */}\n        <div className={baseModalStyles.settingItem}>\n          <div className={baseModalStyles.settingDescription}>\n            <h4>Profile Image</h4>\n            <p>Upload a profile image to personalize your account</p>\n          </div>\n          <FileUpload\n            onUpload={uploadProfileImg}\n            currentFileUrl={preferences.profileImg}\n            acceptedFileTypes=\"image/jpeg,image/png,image/gif\"\n            label=\"Image\"\n            previewType=\"image\"\n          />\n        </div>\n\n        {/* Two Second Pot GIF Setting */}\n        <div style={{ position: 'relative' }}>\n          <div style={{\n            position: 'absolute',\n            top: '-12px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: '#FFD700',\n            color: '#333',\n            padding: '2px 10px',\n            borderRadius: '4px',\n            fontWeight: 'bold',\n            fontSize: '14px',\n            zIndex: 2\n          }}>\n            COMING SOON\n          </div>\n          <div className={baseModalStyles.settingItem} style={{ border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px', marginTop: '12px' }}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Two Second POT GIF</h4>\n              <p>Upload a GIF to play when you slam the POT button</p>\n            </div>\n            <FileUpload\n              onUpload={uploadTwoSecondPotGif}\n              currentFileUrl={preferences.twoSecondPotGif}\n              acceptedFileTypes=\"image/gif\"\n              label=\"GIF\"\n              previewType=\"image\"\n            />\n          </div>\n        </div>\n\n        {/* Two Second Pot Sound Setting */}\n        <div style={{ position: 'relative' }}>\n          <div style={{\n            position: 'absolute',\n            top: '-12px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: '#FFD700',\n            color: '#333',\n            padding: '2px 10px',\n            borderRadius: '4px',\n            fontWeight: 'bold',\n            fontSize: '14px',\n            zIndex: 2\n          }}>\n            COMING SOON\n          </div>\n          <div className={baseModalStyles.settingItem} style={{ border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px', marginTop: '12px' }}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Two Second POT Sound</h4>\n              <p>Upload a sound to play when you slam the POT button</p>\n            </div>\n            <FileUpload\n              onUpload={uploadTwoSecondPotMp3}\n              currentFileUrl={preferences.twoSecondPotMp3}\n              acceptedFileTypes=\"audio/mpeg,audio/wav\"\n              label=\"Sound\"\n              previewType=\"audio\"\n            />\n          </div>\n        </div>\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default PreferencesModal;\n","import React from 'react';\nimport styles from './styles/IconButton.module.css';\n\n/**\n * A reusable icon button component with standardized styling\n * \n * @param {Object} props Component props\n * @param {React.ReactNode} props.icon The icon to display\n * @param {string} props.title Tooltip text for the button\n * @param {function} props.onClick Click handler function\n * @param {string} props.variant Button variant ('default', 'danger', 'success')\n * @param {boolean} props.compact Whether to use compact styling\n * @param {string} props.className Additional class names\n */\nconst IconButton = ({ \n  icon, \n  title, \n  onClick, \n  variant = 'default',\n  compact = true,\n  className = '',\n  ...restProps\n}) => {\n  return (\n    <button\n      className={`${styles.iconButton} ${styles[variant]} ${className}`}\n      onClick={onClick}\n      title={title}\n      type=\"button\"\n      {...restProps}\n    >\n      {icon}\n    </button>\n  );\n};\n\nexport default IconButton;\n","import React, { useState } from 'react';\nimport GearIcon from '../icons/GearIcon';\nimport PreferencesModal from '../PreferencesModal';\nimport IconButton from './IconButton';\n\nconst PreferencesButton = () => {\n  const [isPreferencesOpen, setIsPreferencesOpen] = useState(false);\n\n  const openPreferences = () => {\n    setIsPreferencesOpen(true);\n  };\n\n  const closePreferences = () => {\n    setIsPreferencesOpen(false);\n  };\n\n  return (\n    <>\n      <IconButton\n        onClick={openPreferences}\n        icon={<GearIcon style={{ color: 'white', width: 20, height: 20 }} />}\n        aria-label=\"Open Preferences\"\n        variant=\"preferences\"\n        title=\"Preferences\"\n      />\n      {/* Render the modal conditionally */}\n      {isPreferencesOpen && <PreferencesModal isOpen={isPreferencesOpen} onClose={closePreferences} />}\n    </>\n  );\n};\n\nexport default PreferencesButton;\n","import React from 'react';\nimport styles from './styles/UserAvatar.module.css';\n\n/**\n * UserAvatar component displays a user's profile image or their initials if no image is available.\n * It can be used in various contexts like the lobby, player list, results screen, etc.\n * \n * @param {Object} props - Component props\n * @param {Object} props.user - User object containing username and profileImg\n * @param {string} props.size - Size of the avatar ('small', 'medium', 'large')\n * @param {boolean} props.showName - Whether to display the username next to the avatar\n * @param {string} props.namePosition - Position of the username ('right', 'below')\n * @param {string} props.className - Additional CSS class for styling\n */\nconst UserAvatar = ({ \n  user, \n  size = 'medium', \n  showName = true, \n  namePosition = 'right',\n  className = ''\n}) => {\n  if (!user) return null;\n  \n  const { username, profileImg } = user;\n  const initials = getInitials(username || 'Unknown');\n  const sizeClass = styles[size] || styles.medium;\n  const containerClass = showName ? styles[`container${namePosition.charAt(0).toUpperCase() + namePosition.slice(1)}`] : '';\n  \n  // Format the image URL to point to the server\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // Handle different URL formats\n  let formattedImageUrl = null;\n  if (profileImg) {\n    // If the URL already starts with http, use it as is\n    if (profileImg.startsWith('http')) {\n      formattedImageUrl = profileImg;\n    } \n    // If the URL contains /uploads/, replace it with /files/\n    else if (profileImg.includes('/uploads/')) {\n      // Extract just the filename from the path\n      const filename = profileImg.split('/').pop();\n      formattedImageUrl = `${API_URL}/files/images/${filename}`;\n    }\n    // Otherwise, just append the URL to the API_URL\n    else {\n      formattedImageUrl = `${API_URL}${profileImg}`;\n    }\n  }\n\n  \n  return (\n    <div className={`${styles.userAvatarContainer} ${containerClass} ${className}`}>\n      <div className={`${styles.avatar} ${sizeClass}`}>\n        {formattedImageUrl ? (\n          <img \n            src={formattedImageUrl} \n            alt={`${username}'s avatar`} \n            className={styles.avatarImage}\n            onError={(e) => {\n              console.error(`Failed to load profile image for ${username}:`, e);\n              e.target.style.display = 'none';\n              e.target.nextSibling.style.display = 'flex';\n            }}\n          />\n        ) : null}\n        <div \n          className={styles.initialsPlaceholder}\n          style={{ display: formattedImageUrl ? 'none' : 'flex' }}\n        >\n          {initials}\n        </div>\n      </div>\n      \n      {showName && (\n        <div className={styles.username}>\n          {username || 'Unknown'}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Helper function to get initials from a name\nconst getInitials = (name) => {\n  if (!name) return '?';\n  \n  return name\n    .split(' ')\n    .map(part => part.charAt(0))\n    .join('')\n    .toUpperCase()\n    .substring(0, 2);\n};\n\nexport default UserAvatar;\n","import React, { useState, useEffect } from 'react';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport lobbyStyles from './styles/Lobby.module.css';\nimport BaseModal from './common/BaseModal';\nimport baseModalStyles from './common/BaseModal.module.css';\n\nconst DEFAULT_SETTINGS = {\n  useCustomName: false,\n  customName: '',\n  isPrivate: false,\n  password: '',\n  enableAceChoice: true,\n  enableSecondChance: true,\n};\n\nconst GameSettingsModal = ({ initialSettings = DEFAULT_SETTINGS, onSubmit, onClose }) => {\n  const [settings, setSettings] = useState({ ...DEFAULT_SETTINGS, ...initialSettings });\n  const [errors, setErrors] = useState({});\n\n  // Validation logic\n  const validateSettings = (currentSettings) => {\n    const newErrors = {};\n\n    // Validate Custom Name\n    if (currentSettings.useCustomName) {\n      const name = currentSettings.customName || '';\n      if (!name) {\n        newErrors.customName = 'Custom name is required.';\n      } else if (name.length < 4 || name.length > 26) {\n        newErrors.customName = 'Name must be 4-26 characters.';\n      } else if (!/^[a-zA-Z0-9_-]+$/.test(name)) {\n        newErrors.customName = 'Use letters, numbers, -, or _.';\n      }\n    }\n\n    // Validate Password\n    if (currentSettings.isPrivate) {\n      const pass = currentSettings.password || '';\n      if (!pass) {\n        newErrors.password = 'Password is required.';\n      } else if (pass.length < 3 || pass.length > 36) {\n        newErrors.password = 'Password must be 3-36 characters.';\n      }\n    }\n    return newErrors;\n  };\n\n  const handleChange = (key, value) => {\n    setSettings(prev => {\n      const updatedSettings = { ...prev, [key]: value };\n\n      // Clear customName and its error if useCustomName is turned off\n      if (key === 'useCustomName' && !value) {\n        updatedSettings.customName = '';\n        if (errors.customName) {\n          setErrors(currentErrors => {\n            const newErrors = { ...currentErrors };\n            delete newErrors.customName;\n            return newErrors;\n          });\n        }\n      }\n\n      // Clear password and its error if private is turned off\n      if (key === 'isPrivate' && !value) {\n        updatedSettings.password = '';\n        if (errors.password) {\n          setErrors(currentErrors => {\n            const newErrors = { ...currentErrors };\n            delete newErrors.password;\n            return newErrors;\n          });\n        }\n      }\n      return updatedSettings;\n    });\n\n    // Clear specific error when user starts typing/toggling again\n    if ((key === 'customName' || key === 'useCustomName') && errors.customName) {\n      setErrors(currentErrors => {\n        const newErrors = { ...currentErrors };\n        delete newErrors.customName;\n        return newErrors;\n      });\n    }\n    if ((key === 'password' || key === 'isPrivate') && errors.password) {\n      setErrors(currentErrors => {\n        const newErrors = { ...currentErrors };\n        delete newErrors.password;\n        return newErrors;\n      });\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const validationErrors = validateSettings(settings);\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n    } else {\n      setErrors({}); // Clear errors on successful submit\n      // Prepare the payload for submission\n      const payload = {\n        ...settings,\n        customName: settings.useCustomName ? settings.customName : null,\n      };\n      delete payload.useCustomName; // Remove the toggle state key\n\n      onSubmit(payload);\n    }\n  };\n\n  return (\n    <BaseModal\n      title=\"Game Options\"\n      onClose={onClose}\n      style={{ maxWidth: 600 }}\n      footer={\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className={`${lobbyStyles.actionButton} ${lobbyStyles.cancelButton || ''}`}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            form=\"gameSettingsForm\"\n            className={`${lobbyStyles.actionButton} ${lobbyStyles.createButton}`}\n            disabled={Object.keys(errors).length > 0}\n          >\n            Create Game\n          </button>\n        </div>\n      }\n    >\n      <form id=\"gameSettingsForm\" onSubmit={handleSubmit}>\n        <div className={baseModalStyles.settingsContainer}>\n          {/* Custom Game Name Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Custom Game Name</h4>\n              <p>Set a custom name for your game lobby</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.useCustomName}\n                onChange={e => handleChange('useCustomName', e.target.checked)}\n              />\n              {settings.useCustomName && (\n                <input\n                  type=\"text\"\n                  value={settings.customName || ''}\n                  onChange={e => handleChange('customName', e.target.value)}\n                  className={`${baseModalStyles.textInput}${errors.customName ? ' ' + baseModalStyles.inputError : ''}`}\n                  placeholder=\"Game Name\"\n                  maxLength={26}\n                  autoFocus\n                  style={{ marginTop: 8 }}\n                />\n              )}\n              {errors.customName && <span className=\"errorMessage\">{errors.customName}</span>}\n            </div>\n          </div>\n\n          {/* Private Game Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Private Game</h4>\n              <p>Only players with the password can join</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.isPrivate}\n                onChange={e => handleChange('isPrivate', e.target.checked)}\n              />\n              {settings.isPrivate && (\n                <input\n                  type=\"text\"\n                  value={settings.password || ''}\n                  onChange={e => handleChange('password', e.target.value)}\n                  className={`${baseModalStyles.textInput}${errors.password ? ' ' + baseModalStyles.inputError : ''}`}\n                  placeholder=\"Password\"\n                  maxLength={36}\n                  autoFocus={settings.isPrivate && !settings.useCustomName}\n                  style={{ marginTop: 8 }}\n                />\n              )}\n              {errors.password && <span className=\"errorMessage\">{errors.password}</span>}\n            </div>\n          </div>\n\n          {/* Ace Choice Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Enable Ace Choice</h4>\n              <p>Allow players to choose high/low on Ace</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.enableAceChoice}\n                onChange={e => handleChange('enableAceChoice', e.target.checked)}\n              />\n            </div>\n          </div>\n\n          {/* Second Chance Setting */}\n          <div className={baseModalStyles.settingItem}>\n            <div className={baseModalStyles.settingDescription}>\n              <h4>Enable Second Chance</h4>\n              <p>Allow players to ante up for a second chance</p>\n            </div>\n            <div className={baseModalStyles.settingControls}>\n              <ToggleSwitch\n                isChecked={settings.enableSecondChance}\n                onChange={e => handleChange('enableSecondChance', e.target.checked)}\n              />\n            </div>\n          </div>\n        </div>\n      </form>\n    </BaseModal>\n  );\n};\n\nexport default GameSettingsModal;\n","import React from 'react';\n\nconst LockIcon = ({ className = '', width = '1em', height = '1em', ...props }) => (\n  <svg \n    xmlns=\"http://www.w3.org/2000/svg\" \n    viewBox=\"0 0 24 24\" \n    fill=\"none\" \n    stroke=\"currentColor\" \n    strokeWidth=\"2\" \n    strokeLinecap=\"round\" \n    strokeLinejoin=\"round\" \n    className={`feather feather-lock ${className}`} \n    width={width} \n    height={height}\n    {...props}\n  >\n    <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n    <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n  </svg>\n);\n\nexport default LockIcon;\n","import React from 'react';\nimport styles from './styles/Lobby.module.css'; // Use the new CSS module\nimport LockIcon from './icons/LockIcon'; // Import the new icon\n\nfunction GameCard({ game, onJoin, userId }) { \n  // Determine display name: Use custom name if available, otherwise fallback to ID\n  const gameDisplayName = game.settings?.customName || `Game ${game.id}`;\n\n  // Determine user's status in this game\n  const isUserDisconnected = game.disconnectedPlayers?.some(player => player.userId === userId);\n  const isUserInGame = game.allPlayers?.some(player => player.userId === userId && !player.disconnected);\n\n  // Determine button text and class\n  let buttonText = 'Join';\n  let buttonClass = styles.joinGameButton; // Base class from original\n  if (isUserDisconnected) {\n    buttonText = 'Reconnect';\n    buttonClass += ` ${styles.reconnectButton}`;\n  } else if (isUserInGame) {\n    buttonText = 'Continue';\n    buttonClass += ` ${styles.continueButton}`;\n  }\n\n  // Determine card container class\n  let cardClass = styles.gameListItem; // Use original outer class\n  if (isUserDisconnected) {\n    cardClass += ` ${styles.userDisconnectedGame}`;\n  } else if (isUserInGame) {\n    cardClass += ` ${styles.userInGame}`;\n  }\n\n  return (\n    <div className={cardClass}> {/* Use gameListItem + conditional */}\n      {/* Replicate original info structure */}\n      <div className={styles.gameListInfo}>\n        <div className={styles.gameListId}> {/* Div for ID/Name + Badges */}\n          {gameDisplayName}\n          {game.settings?.isPrivate && (\n            <span className={styles.privatePill} title=\"Private Game\">\n              <LockIcon width=\"0.9em\" height=\"0.9em\" style={{ marginRight: '4px', verticalAlign: 'middle' }} />\n              Private\n            </span>\n          )}\n          {isUserDisconnected && (\n            <span className={styles.disconnectedBadge} title=\"You're disconnected from this game\">⚠️ Reconnect</span>\n          )}\n          {isUserInGame && (\n            <span className={styles.inGameBadge} title=\"You're in this game\">You're In</span>\n          )}\n        </div>\n        <div className={styles.gameListPlayers}> {/* Div for Player Count */}\n          {game.playerCount} {game.playerCount === 1 ? 'player' : 'players'}\n        </div>\n      </div>\n      {/* Button as sibling to gameListInfo */}\n      <button \n        className={buttonClass} // Use joinGameButton + conditional\n        onClick={() => onJoin(game.id)}\n        disabled={!userId} \n      >\n        {buttonText} \n      </button>\n    </div>\n  );\n}\n\nexport default GameCard;\n","import React from 'react';\n\n/**\n * Question mark icon component for rules button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst QuestionIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Material Design style question mark icon */}\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\" />\n      <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"17.01\" />\n    </svg>\n  );\n};\n\nexport default QuestionIcon;\n","import React from 'react';\nimport BaseModal from './common/BaseModal';\nimport baseModalStyles from './common/BaseModal.module.css';\nimport { ICONS } from '../constants/UIConstants';\n\n/**\n * Game Rules Modal that displays the rules of the game\n * @param {Object} props - Component props\n * @param {function} props.onClose - Function to call when the modal is closed\n */\nconst GameRulesModal = ({ onClose }) => {\n  return (\n    <BaseModal\n      title=\"Game Rules\"\n      onClose={onClose}\n      style={{ maxWidth: 600 }}\n    >\n      <div className={baseModalStyles.content} style={{ maxHeight: '60vh', overflowY: 'auto', padding: '0' }}>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Objective</div>\n          <div className={baseModalStyles.settingDescription}>\n            The goal is to bet on whether the third card will have a value that falls \"in between\" the first two cards.\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Card Values</div>\n          <div className={baseModalStyles.settingDescription}>\n            Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice).\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Game Flow</div>\n          <div className={baseModalStyles.settingDescription}>\n            <ol style={{ paddingLeft: 20, margin: 0 }}>\n              <li>Each player antes up to join the round.</li>\n              <li>The player to the right of the dealer goes first.</li>\n              <li>Two cards are dealt face up.</li>\n              <li>Player decides whether to bet or pass.</li>\n              <li>If a bet is placed, the third card is revealed.</li>\n              <li>Bets are settled.</li>\n              <li>Next player goes.</li>\n              <li>If the pot is empty, players ante up again to start a new round.</li>\n            </ol>\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>Betting</div>\n          <div className={baseModalStyles.settingDescription}>\n            If you think the third card will fall between the first two cards, you can bet up to the pot amount.<br/>\n            If you win, you receive the amount of your bet from the pot.<br/>\n            If you lose, your bet is added to the pot.\n          </div>\n        </div>\n        <div style={{ marginBottom: 22 }}>\n          <div className={baseModalStyles.sectionHeader}>POT Button</div>\n          <div className={baseModalStyles.settingDescription}>\n            The POT button allows you to bet the entire pot amount at once for maximum winnings.\n          </div>\n        </div>\n        <div style={{ marginBottom: 6 }}>\n          <div className={baseModalStyles.sectionHeader}>Special Rules</div>\n          <div className={baseModalStyles.settingDescription}>\n            <ul style={{ paddingLeft: 20, margin: 0 }}>\n              <li><strong>Ace Choice:</strong> If the first card is an Ace, you can choose to play it as low (1) or high (14).</li>\n              <li><strong>Second Chance:</strong> If the first two cards are the same, you can chose to ante again to see another hand.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </BaseModal>\n  );\n};\n\nexport default GameRulesModal;","import React, { useState } from 'react';\nimport IconButton from './IconButton';\nimport QuestionIcon from '../icons/QuestionIcon';\nimport GameRulesModal from '../GameRulesModal';\n\n/**\n * A standardized rules button component that opens the game rules modal\n * \n * @param {Object} props Component props\n * @param {string} props.title Custom tooltip text (optional)\n */\nconst RulesButton = ({ \n  title = \"View Game Rules\",\n  ...restProps \n}) => {\n  const [showRules, setShowRules] = useState(false);\n\n  const openRules = () => {\n    setShowRules(true);\n  };\n\n  const closeRules = () => {\n    setShowRules(false);\n  };\n\n  return (\n    <>\n      <IconButton\n        icon={<QuestionIcon color=\"white\" size={20} />}\n        title={title}\n        onClick={openRules}\n        variant=\"default\"\n        {...restProps}\n      />\n      \n      {showRules && <GameRulesModal onClose={closeRules} />}\n    </>\n  );\n};\n\nexport default RulesButton;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\nimport styles from './styles/Lobby.module.css';\nimport { useLobby } from '../contexts/LobbyContext.jsx';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { TextField, useMediaQuery, InputAdornment } from '@mui/material';\nimport AppHeader from './common/AppHeader';\nimport OnlinePlayerCount from './common/OnlinePlayerCount';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PreferencesButton from './common/PreferencesButton.jsx';\nimport UserAvatar from './UserAvatar.jsx';\nimport soundService from '../services/SoundService';\nimport GameSettingsModal from './GameSettingsModal.jsx';\nimport GameCard from './GameCard'; // Import the new GameCard component\nimport RulesButton from './common/RulesButton';\n\nconst Lobby = () => {\n  const { gameList, loading: lobbyLoading, error: lobbyError } = useLobby(); // Assuming lobby context handles its own loading\n  const { user, logout, loading: authLoading, refreshUserData } = useAuth();\n  const { socket, isConnected, loading: socketLoading } = useSocket();\n  const { preferences } = usePreferences();\n  const navigate = useNavigate(); // Get navigate function\n  const [searchQuery, setSearchQuery] = useState('');\n  const [error, setError] = useState(null); // Local error state for lobby actions\n\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n  \n  const userId = user?.username ? `user_${user.username}` : null;\n\n  // Modal state for custom game creation\n  const [showGameSettingsModal, setShowGameSettingsModal] = useState(false);\n\n  // Refresh user data (including balance) on lobby mount/reconnect\n  useEffect(() => {\n    // Effect runs on mount and when isConnected changes.\n    // We just need to ensure refreshUserData is available from the context.\n    if (refreshUserData) {\n      refreshUserData();\n    }\n  }, [isConnected, refreshUserData]);\n\n  useEffect(() => {\n    if (!user) {\n      setError('Please log in to continue');\n      return;\n    }\n\n    if (!user.username || !user.id) {\n      console.error('[Lobby] Invalid user data received:', user);\n      setError('Invalid user data');\n      logout(); // Clear invalid session\n      return;\n    }\n\n    if (!isConnected) {\n      setError('Not connected to server. Attempting to reconnect...');\n    } else {\n      setError(null);\n    }\n  }, [user, logout, isConnected]);\n  \n  // Shared game creation logic\n  const createGameWithSettings = (settings) => {\n    if (!user?.id) {\n      setError('Please log in to create a game');\n      return;\n    }\n    if (!isConnected) {\n      setError('Not connected to server');\n      return;\n    }\n    setError(null);\n\n    const creationTimeout = setTimeout(() => {\n      setError('Game creation timed out. Please try again.');\n    }, 5000);\n\n    const handleGameCreated = (data) => {\n      clearTimeout(creationTimeout);\n      socket.off('gameCreated', handleGameCreated);\n      if (data?.game?.id) {\n        navigate(`/${data.game.id}`);\n      } else {\n        setError('Failed to create or join game. Invalid response.');\n      }\n    };\n\n    socket.on('gameCreated', handleGameCreated);\n    \n    if (settings) {\n      socket.emit('createGame', { settings });\n    } else {\n      socket.emit('createGame');\n    }\n  };\n\n  const handleCreateGame = () => createGameWithSettings();\n\n  // Handler for custom game creation\n  const handleCreateCustomGame = () => {\n    setShowGameSettingsModal(true);\n  };\n\n  // Handler for submitting custom settings modal\n  const handleSubmitCustomSettings = (settings) => {\n    setShowGameSettingsModal(false);\n    createGameWithSettings(settings);\n  };\n  \n  const handleJoinGame = (gameId) => {\n    if (!isConnected) {\n      setError('Not connected to server.');\n      return;\n    }\n    if (!user) {\n      setError('Please log in to join a game.');\n      return;\n    }\n\n    setError(null);\n    soundService.play('ui.click'); // Play join sound\n\n    navigate(`/${gameId}`);\n  };\n  \n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  const filteredGameList = useMemo(() => {\n    if (!gameList) return [];\n    \n    let filtered = gameList;\n    if (searchQuery.trim()) {\n      const query = searchQuery.trim().toLowerCase();\n      filtered = gameList.filter(game => \n        game.id.toLowerCase().includes(query)\n      );\n    }\n    \n    return filtered.sort((a, b) => {\n      const userInGameA = a.allPlayers?.some(player => player.userId === userId);\n      const userInGameB = b.allPlayers?.some(player => player.userId === userId);\n      \n      const userDisconnectedInA = a.disconnectedPlayers?.some(player => player.userId === userId);\n      const userDisconnectedInB = b.disconnectedPlayers?.some(player => player.userId === userId);\n      \n      if (userDisconnectedInA && !userDisconnectedInB) return -1;\n      if (!userDisconnectedInA && userDisconnectedInB) return 1;\n      if (userInGameA && !userInGameB) return -1;\n      if (!userInGameA && userInGameB) return 1;\n      return a.id.localeCompare(b.id); // Alphabetical by ID if tie\n    });\n  }, [gameList, searchQuery, userId]); // Dependency on userId ensures resorting if user changes\n  \n   return (\n     <div className={styles.lobbyContainer}>\n       <AppHeader />\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: '1.1em', marginBottom: '-0.6em' }}>\n        <OnlinePlayerCount />\n      </div>       \n       <div className={styles.formContainer}>\n         <div className={styles.formSection}>\n           <div className={styles.welcomeMessage}>\n             <div className={styles.welcomeHeader}>\n               {error ? (\n                 <div className={styles.error}>{error}</div>\n               ) : (\n                 <div className={styles.welcomeText}>\n                   <UserAvatar \n                     user={{ \n                       username: user?.username || 'Player', \n                       profileImg: preferences?.profileImg \n                     }} \n                     size=\"medium\" \n                     showName={true} \n                     namePosition=\"right\"\n                   />\n                 </div>\n               )}\n               <div className={styles.balanceDisplay}>\n                 Balance: <CurrencyAmount amount={Number(user?.balance) || 0} size=\"medium\" />\n               </div>\n               <div className={styles.headerButtons}>\n                 <button \n                   className={styles.logoutButton}\n                   onClick={logout}\n                 >\n                   <span className={styles.buttonText}>Logout</span>\n                 </button>\n                 <RulesButton />\n                 <PreferencesButton />\n               </div>\n             </div>\n           </div>\n           \n           <div className={styles.gradientDivider}></div>\n           \n           <div className={styles.buttonGroup}>\n             <button \n               className={`${styles.actionButton} ${styles.createButton}`}\n               onClick={handleCreateGame}\n               disabled={!user?.username}\n             >\n               Create Quick Game\n             </button>\n             <button\n               className={`${styles.actionButton} ${styles.createButton}`}\n               style={{ marginTop: 8 }}\n               onClick={handleCreateCustomGame}\n               disabled={!user?.username}\n             >\n               Create Custom Game\n             </button>\n           </div>\n           {showGameSettingsModal && (\n             <GameSettingsModal\n               onSubmit={handleSubmitCustomSettings}\n               onClose={() => setShowGameSettingsModal(false)}\n             />\n           )}\n         </div>\n         \n         {error && (\n           <div className={styles.errorMessage}>\n             {error}\n           </div>\n         )}\n       </div>\n       \n       {/* Game List Section - Always shown */}\n       <div className={styles.gameListContainer}>\n         <h2 className={styles.gameListTitle}>Available Games</h2>\n         \n         {/* Search bar for filtering games */}\n         <div className={styles.searchContainer}>\n           <TextField\n             placeholder=\"Search games by ID\"\n             variant=\"outlined\"\n             fullWidth\n             value={searchQuery}\n             onChange={handleSearchChange}\n             size={isSmallMobile ? \"small\" : \"medium\"}\n             InputProps={{\n               startAdornment: (\n                 <InputAdornment position=\"start\">\n                   <span className={styles.searchIcon}>🔍</span>\n                 </InputAdornment>\n               ),\n             }}\n           />\n         </div>\n         \n         {filteredGameList && filteredGameList.length > 0 ? (\n           <div className={styles.gameListWrapper}>\n             {filteredGameList.map(game => (\n               <GameCard \n                 key={game.id} \n                 game={game} \n                 onJoin={handleJoinGame} \n                 userId={userId} // Pass userId\n               />\n             ))}\n           </div>\n         ) : (\n           <div className={styles.emptyGameList}>\n             <div className={styles.emptyStateIcon}>🃏</div>\n             <p className={styles.emptyStateMessage}>\n               {searchQuery.trim() ? 'No matching games found' : 'No games in progress'}\n             </p>\n             <p className={styles.emptyStateHint}>\n               {searchQuery.trim() \n                 ? 'Try a different search or create a new game' \n                 : 'Create a new game to get started!'}\n             </p>\n           </div>\n         )}\n       </div>\n     </div>\n   );\n };\n\n export default Lobby;\n","import React, { createContext, useState, useContext, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport soundService from '../services/SoundService';\n\n// Create context\nconst GameContext = createContext();\n\n// Custom hook to use the game context\nexport const useGameContext = () => {\n  const context = useContext(GameContext);\n  if (context === undefined) {\n    throw new Error('useGameContext must be used within a GameProvider');\n  }\n  return context;\n};\n\nexport const GameProvider = ({ children, gameId, initialGameState = null }) => {\n  // Get socket from socket context\n  const { socket, error: socketError } = useSocket();\n  \n  // Game-specific state - we only need to track the full gameState object and error\n  /** @type {[GameState|null, React.Dispatch<React.SetStateAction<GameState|null>>]} */\n  const [gameState, setGameState] = useState(initialGameState);\n  \n  // Keep track of previous players to detect joins/leaves\n  const prevPlayersRef = useRef({});\n  \n  // Initialize with the provided game state if available\n  useEffect(() => {\n    // No need to log the initial state\n    // Initialize sound service\n    soundService.initialize();\n  }, []);\n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Function to explicitly clear the provider's error state\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  // Initialize with socket error if any\n  useEffect(() => {\n    if (socketError) {\n      setError(socketError);\n    }\n  }, [socketError]);\n  // Set up game-specific event handlers\n  useEffect(() => {\n    if (!socket) return;\n    \n    // Handle game reconnection\n    socket.on('gameReconnected', (data) => {\n      console.log(`[Game] Reconnected to game: ${data.gameId}`, data.game);\n      \n      // Update game state with the full state from the server\n      setGameState(data.game);\n      \n      // Set the player ID to the current user ID (not socket ID)\n      if (socket.auth?.userId) {\n        setPlayerId(socket.auth.userId);\n        console.log(`[Game] Successfully reconnected as user ID: ${socket.auth.userId}`);\n      } else {\n        // Fallback to socket ID if user ID is not available\n        setPlayerId(socket.id);\n        console.log(`[Game] Successfully reconnected as socket ID: ${socket.id} (user ID not available)`);\n      }\n      \n      // Clear any errors\n      setError(null);\n      \n      // Play a sound to indicate successful reconnection\n      soundService.play('ui.connect');\n      \n      // CRITICAL: Force a refresh of the player's game state to ensure betting works\n      if (data.game && data.game.id) {\n        // Small delay to ensure the state is fully updated\n        setTimeout(() => {\n          console.log(`[Game] Requesting fresh game state after reconnection`);\n          socket.emit('getGameState', { gameId: data.game.id });\n        }, 500);\n      }\n    });\n    \n    // Handle receiving updated game state\n    socket.on('gameState', (data) => {\n      if (data && data.id) { \n        // Restore check to prevent setting identical state\n        if (JSON.stringify(gameState) !== JSON.stringify(data)) {\n          setGameState(data);\n          clearError(); // Clear any previous context errors on successful state update\n        } \n      } else {\n      }\n    });\n    \n    // Game-specific error handling\n    socket.on('gameError', (message) => {\n      console.error('Game error:', message);\n      setError(message);\n    });\n    \n    // Clean up game-specific event listeners\n    return () => {\n      socket.off('gameReconnected');\n      socket.off('gameState');\n      socket.off('gameError');\n    };\n  }, [socket]);\n\n  // Game-specific actions\n  const placeBet = useCallback((amount) => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('placeBet', { bet: amount, gameId });\n    } catch (err) {\n      console.error('Error placing bet:', err);\n      setError('Failed to place bet. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const payAnte = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('payAnte', { gameId });\n    } catch (err) {\n      console.error('Error paying ante:', err);\n      setError('Failed to pay ante. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  const dealCards = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('dealCards', { gameId });\n    } catch (err) {\n      console.error('Error dealing cards:', err);\n      setError('Failed to deal cards. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const revealMiddleCard = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('revealMiddleCard', { gameId });\n    } catch (err) {\n      console.error('Error revealing middle card:', err);\n      setError('Failed to reveal middle card. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const nextRound = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('nextRound', { gameId });\n    } catch (err) {\n      console.error('Error moving to next round:', err);\n      setError('Failed to move to next round. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player ready function (for paying ante)\n  const playerReady = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      // Server is listening for 'ready' event, not 'playerReady'\n      socket.emit('ready');\n    } catch (err) {\n      console.error('Error setting player ready:', err);\n      setError('Failed to set player ready. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player unready function (withdraw ante)\n  const playerUnready = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('unready');\n    } catch (err) {\n      console.error('Error setting player unready:', err);\n      setError('Failed to set player unready. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  /**\n   * @typedef {Object} GameContextValue\n   * @property {GameState|null} gameState - The complete game state\n   * @property {string|null} error - Any error message \n   * @property {(amount: number) => void} placeBet - Function to place a bet\n   * @property {() => void} payAnte - Function to pay the ante\n   * @property {() => void} playerReady - Function to set player ready (pay ante)\n   * @property {() => void} playerUnready - Function to set player unready (withdraw ante)\n   * @property {() => void} dealCards - Function to deal cards\n   * @property {() => void} revealMiddleCard - Function to reveal the middle card\n   * @property {() => void} nextRound - Function to move to the next round\n   * @property {() => void} clearError - Function to clear any error\n   * @property {string|null} gameId - Current game ID\n   */\n\n  /** @type {GameContextValue} */\n  const value = {\n    // Game state - just provide the complete gameState object\n    gameState,\n    error,\n    gameId,\n    \n    // Game actions\n    placeBet,\n    payAnte,\n    playerReady,\n    playerUnready,\n    dealCards,\n    revealMiddleCard,\n    nextRound,\n    // Helper methods\n    clearError,\n  };\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\n// Named exports for specific pieces of state/actions\nexport const useGameState = () => {\n  const { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error } = useGameContext();\n  return { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, error };\n};\n\nexport const useGameActions = () => {\n  const { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError } = useGameContext();\n  return { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError };\n};\n\nexport default GameContext;\n","/**\n * Game Constants - Defines fixed values used throughout the game\n * This is a shared constants file used by both server and client\n * Supports both ES modules (for Vite/client) and CommonJS (for Node.js/server)\n */\n\nconst GAME_CONSTANTS = {\n  // Game configuration\n  ANTE_AMOUNT: 1,  // Fixed ante amount - always $1\n  STARTING_BALANCE: 1000,  // Starting player balance - $1000\n  FULL_DECK_SIZE: 52,  // Number of cards in a full deck\n  RECONNECTION_TIMEOUT: 30000,  // Time window for player reconnection (30 seconds)\n  MAX_SEATS: 16, // Maximum number of seats/players allowed in a game\n  \n  // Timer durations (in milliseconds)\n  TIMERS: {\n    DEAL_FIRST_CARD_DELAY: 1000,    // Delay before dealing the first card (1 second)\n    DEAL_SECOND_CARD_DELAY: 1000,   // Delay before dealing the second card (1 second)\n    DEAL_THIRD_CARD_DELAY: 2000,    // Delay before revealing the third card (2 seconds)\n    DEALING_DURATION: 3000,         // Total duration of dealing phase (3 seconds)\n    BETTING_DURATION: 30000,        // Duration for betting phase (30 seconds)\n    DECISION_DURATION: 15000,       // Duration for ace and second chance decisions (15 seconds)\n    REVEALING_DURATION: 3000,       // Duration for revealing phase\n    RESULTS_DURATION: 5000,         // Duration to show results before moving to next round (5 seconds)\n    PLAYER_INACTIVITY_TIMEOUT: 60000 // 1 minute timeout for inactive players in WAITING phase\n  }\n};\n\n// Dual module support - cleaner implementation\n// For ES modules (Vite/client)\nexport default GAME_CONSTANTS;\nexport const { TIMERS, ANTE_AMOUNT, STARTING_BALANCE, FULL_DECK_SIZE, RECONNECTION_TIMEOUT, MAX_SEATS } = GAME_CONSTANTS;\n\n// For CommonJS (Node.js/server)\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = GAME_CONSTANTS;\n}\n","import React from 'react';\n\n/**\n * Download CSV icon component for transaction log download button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst DownloadIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Stylized CSV download icon with document and arrow */}\n      <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n      <path d=\"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z\" />\n      <path d=\"M12 15 L12 18\" />\n      <path d=\"M9.5 16.5 L12 19 L14.5 16.5\" />\n      <path d=\"M8 10 L10 10\" />\n      <path d=\"M12 10 L14 10\" />\n      <path d=\"M16 10 L16 10\" />\n    </svg>\n  );\n};\n\nexport default DownloadIcon;\n","import React from 'react';\nimport IconButton from './IconButton';\nimport DownloadIcon from '../icons/DownloadIcon';\nimport { useGameContext } from '../../contexts/GameContext';\n\n/**\n * A specialized button component for downloading game transactions as CSV\n * \n * @param {Object} props Component props\n * @param {string} props.title Custom tooltip text (optional)\n * @param {Object} props.gameState Game state object (optional, will use context if not provided)\n */\nconst TransactionDownloadButton = ({ \n  title = \"Download Transaction Log as CSV\",\n  gameState: propGameState,\n  ...restProps \n}) => {\n  // Use provided gameState or get from context\n  const contextValue = useGameContext();\n  const gameState = propGameState || contextValue?.gameState;\n\n  const downloadTransactionsCSV = () => {\n    if (!gameState || !gameState.gameTransactions) return;\n    \n    // Create CSV header\n    let csvContent = \"Player,Transaction Type,Amount,Round,Timestamp\\n\";\n    \n    // Collect all transactions into a single array with player info\n    const allTransactions = [];\n    \n    Object.entries(gameState.gameTransactions).forEach(([playerId, transactions]) => {\n      if (!transactions || !Array.isArray(transactions)) return;\n      \n      const playerName = transactions[0]?.playerName || gameState.players[playerId]?.name || 'Unknown Player';\n      \n      transactions.forEach(tx => {\n        allTransactions.push({\n          playerId,\n          playerName,\n          ...tx,\n          // Ensure timestamp is a Date object for sorting\n          timestampObj: tx.timestamp ? new Date(tx.timestamp) : new Date(0)\n        });\n      });\n    });\n    \n    // Sort all transactions by timestamp in ascending order\n    allTransactions.sort((a, b) => a.timestampObj - b.timestampObj);\n    \n    // Add sorted transaction data to CSV\n    allTransactions.forEach(tx => {\n      // Format date for display\n      const timestamp = tx.timestamp ? new Date(tx.timestamp).toLocaleString() : 'N/A';\n      // Escape any commas in the player name\n      const escapedName = tx.playerName.includes(',') ? `\"${tx.playerName}\"` : tx.playerName;\n      // Format the transaction reason as a clean transaction type\n      let transactionType = 'Transaction';\n      if (tx.reason) {\n        // Extract the action part from the reason (e.g., \"Ante in round 1\" -> \"Ante\")\n        const reasonParts = tx.reason.split(' ');\n        transactionType = reasonParts[0]; // Take the first word as the type\n        \n        // Special case for \"Won bet\" which is two words\n        if (reasonParts[0] === 'Won') {\n          transactionType = 'Win';\n        }\n        // Special case for penalty reasons\n        else if (tx.reason.includes('penalty')) {\n          transactionType = 'Penalty';\n        }\n      }\n      // Add the transaction row\n      csvContent += `${escapedName},${transactionType},${tx.amount},${tx.round || 'N/A'},${timestamp}\\n`;\n    });\n    \n    // Create and trigger download\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', `game-${gameState.id}-transactions.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <IconButton\n      icon={<DownloadIcon color=\"white\" size={20} />}\n      title={title}\n      onClick={downloadTransactionsCSV}\n      variant=\"default\"\n      {...restProps}\n    />\n  );\n};\n\nexport default TransactionDownloadButton;\n","import React, { useMemo } from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport styles from './styles/GameSummaryModal.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport TransactionDownloadButton from './common/TransactionDownloadButton';\n\n/**\n * Game Summary Modal component that displays running scores and settle-up calculations\n */\nconst GameSummaryModal = ({ onClose }) => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.modalHeader}>\n            <h2>Game Summary</h2>\n            <button className={styles.closeButton} onClick={onClose}>×</button>\n          </div>\n          <div className={styles.settingsContainer}>\n            <div className={styles.loadingMessage}>Loading game data...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const { gameTransactions = {}, players = {}, id: gameId } = gameState;\n  \n  // Get player names (including those who left)\n  const playerNames = {};\n  \n  // First add current players\n  Object.entries(players).forEach(([playerId, player]) => {\n    playerNames[playerId] = player.name;\n  });\n  \n  // Then add players who left but have transactions\n  Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n    if (!playerNames[playerId] && transactions && transactions.length > 0) {\n      playerNames[playerId] = transactions[0].playerName || 'Unknown Player';\n    }\n  });\n\n  // Calculate player totals directly from transactions\n  const playerTotals = useMemo(() => {\n    const totals = {};\n    Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n      if (!transactions || !Array.isArray(transactions)) return;\n      totals[playerId] = transactions.reduce((sum, tx) => sum + tx.amount, 0);\n    });\n    return totals;\n  }, [gameTransactions]);\n  \n  // Calculate settle-up payments\n  const settleUpPayments = useMemo(() => {\n    // For simple 2-player games, just have the loser pay the winner directly\n    if (Object.keys(playerTotals).length === 2) {\n      const players = Object.entries(playerTotals);\n      const [player1Id, player1Total] = players[0];\n      const [player2Id, player2Total] = players[1];\n      \n      // If totals sum to zero (or close to it), one player pays the other\n      if (Math.abs(player1Total + player2Total) < 0.1) {\n        if (player1Total > 0) {\n          // Player 2 pays Player 1\n          return [{\n            from: player2Id,\n            fromName: playerNames[player2Id],\n            to: player1Id,\n            toName: playerNames[player1Id],\n            amount: Math.abs(player1Total)\n          }];\n        } else if (player2Total > 0) {\n          // Player 1 pays Player 2\n          return [{\n            from: player1Id,\n            fromName: playerNames[player1Id],\n            to: player2Id,\n            toName: playerNames[player2Id],\n            amount: Math.abs(player2Total)\n          }];\n        }\n      }\n    }\n    \n    // For more complex cases with more players\n    const payments = [];\n    \n    // Split into winners and losers\n    const losers = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount < 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount: Math.abs(amount) // Convert to positive amount for easier calculation\n      }));\n    \n    const winners = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount > 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount\n      }));\n    \n    // Sort by amount (descending)\n    losers.sort((a, b) => b.amount - a.amount);\n    winners.sort((a, b) => b.amount - a.amount);\n    \n    // Process each winner, starting with the biggest winner\n    while (winners.length > 0 && losers.length > 0) {\n      const winner = winners[0];\n      const loser = losers[0];\n      \n      // Calculate payment amount\n      const paymentAmount = Math.min(winner.amount, loser.amount);\n      \n      if (paymentAmount > 0.01) { // Only process meaningful payments\n        // Add payment\n        payments.push({\n          from: loser.playerId,\n          fromName: loser.playerName,\n          to: winner.playerId,\n          toName: winner.playerName,\n          amount: paymentAmount\n        });\n        \n\n        \n        // Update balances\n        winner.amount -= paymentAmount;\n        loser.amount -= paymentAmount;\n        \n        // Remove settled players or re-sort if they still have balance\n        if (winner.amount < 0.01) {\n          winners.shift();\n        }\n        \n        if (loser.amount < 0.01) {\n          losers.shift();\n        }\n      } else {\n        // No meaningful payment possible\n        break;\n      }\n    }\n    \n    return payments;\n  }, [playerTotals, playerNames]);\n\n  return (\n    <div className={styles.modalOverlay} onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Game Summary ({gameId})</h2>\n          <div className={styles.headerButtons}>\n            <TransactionDownloadButton gameState={gameState} />\n            <button className={styles.closeButton} onClick={onClose}>×</button>\n          </div>\n        </div>\n        \n        <div className={styles.settingsContainer}>\n          {/* Totals Section */}\n          <div className={styles.settingSection}>\n            <h3>Totals</h3>\n            {Object.keys(playerTotals).length === 0 ? (\n              <p className={styles.noDataMessage}>No transactions recorded yet.</p>\n            ) : (\n              <div className={styles.totalsTable}>\n                {Object.entries(playerTotals).map(([playerId, total]) => (\n                  <div key={playerId} className={styles.totalRow}>\n                    <span className={styles.playerName}>{playerNames[playerId] || 'Unknown Player'}</span>\n                    <span className={`${styles.totalAmount} ${total >= 0 ? styles.positive : styles.negative}`}>\n                      <CurrencyAmount amount={total} size=\"small\" />\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Settle Up Section - Conditionally render based on private game setting */}\n          {gameState.settings.isPrivate && (\n            <div className={styles.settingSection}>\n              <h3>Settle Up</h3>\n              {settleUpPayments.length === 0 ? (\n                <p className={styles.noDataMessage}>No payments needed or no transactions recorded yet.</p>\n              ) : (\n                <div className={styles.settleUpTable}>\n                  {settleUpPayments.map((payment, index) => (\n                    <div key={index} className={styles.paymentRow}>\n                      <span className={styles.paymentText}>\n                        <span className={styles.playerName}>{payment.fromName}</span> pays{' '}\n                        <span className={styles.playerName}>{payment.toName}</span>\n                      </span>\n                      <span className={styles.paymentAmount}>\n                        <CurrencyAmount amount={payment.amount} size=\"small\" />\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n          {/* END Settle Up Section */}\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameSummaryModal;\n","import React from 'react';\n\n/**\n * Exit/door icon component for leave game button\n * @param {Object} props - Component props\n * @param {string} props.color - Color of the icon (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ExitIcon = ({ color = 'currentColor', size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n    >\n      {/* Material Design style exit/logout icon */}\n      <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" />\n      <polyline points=\"16 17 21 12 16 7\" />\n      <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" />\n    </svg>\n  );\n};\n\nexport default ExitIcon;\n","import React from 'react';\nimport IconButton from './IconButton';\nimport ExitIcon from '../icons/ExitIcon';\n\n/**\n * A standardized leave/exit button component\n * \n * @param {Object} props Component props\n * @param {function} props.onClick Handler for when the button is clicked\n * @param {string} props.title Custom tooltip text (optional)\n */\nconst LeaveButton = ({ \n  onClick, \n  title = \"Leave Game\",\n  ...restProps \n}) => {\n  return (\n    <IconButton\n      icon={<ExitIcon color=\"white\" size={20} />}\n      title={title}\n      onClick={onClick}\n      variant=\"danger\"\n      {...restProps}\n    />\n  );\n};\n\nexport default LeaveButton;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/GameHeader.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport GAME_CONSTANTS from '../../../shared/constants/GameConstants';\nconst { TIMERS } = GAME_CONSTANTS;\nimport { ICONS } from '../constants/UIConstants';\nimport GameSummaryModal from './GameSummaryModal.jsx';\nimport RulesButton from './common/RulesButton';\nimport PreferencesButton from './common/PreferencesButton';\nimport LeaveButton from './common/LeaveButton';\n\n// Phase display mapping with icons and friendly names\nconst phaseDisplayMap = {\n  waiting: { text: 'Waiting for Players', icon: '👥' },\n  dealing: { text: 'Dealing Cards', icon: ICONS.DEALER },\n  revealing: { text: 'Revealing Cards', icon: '🥁' },\n  results: { text: 'Round Results', icon: '🏆' }\n};\n\nconst GameHeader = ({ handleLeaveGame }) => {\n  const { gameState, gameId } = useGameContext();\n  const { socket } = useSocket();\n  const currentPhase = gameState?.phase || 'waiting';\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n\n  // Timer effect for phases\n  useEffect(() => {\n    let timer;\n    \n    if (currentPhase === 'dealing') {\n      setTimeLeft(TIMERS.DEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'betting') {\n      setTimeLeft(TIMERS.BETTING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'revealing') {\n      setTimeLeft(TIMERS.REVEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'results') {\n      setTimeLeft(TIMERS.RESULTS_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else {\n      setTimeLeft(null);\n    }\n\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [currentPhase, gameState?.waitingForAceDecision]);\n  \n  // Get the phase display information\n  let phaseInfo = phaseDisplayMap[currentPhase] || { text: 'Unknown Phase', icon: '❓' };\n  \n  // Override phase info if waiting for Ace decision\n  if (gameState?.waitingForAceDecision && currentPhase === 'dealing') {\n    phaseInfo = { text: 'Choosing Ace Value', icon: ICONS.DEALER };\n  }\n  \n  // Check if current user is the current player (using userId instead of socket.id)\n  const isCurrentPlayersTurn = socket && socket.auth?.userId && gameState?.currentPlayerId === socket.auth.userId;\n  \n  // Special handling for betting phase\n  if (currentPhase === 'betting' && gameState?.currentPlayerId && gameState?.players) {\n    const currentPlayer = gameState.players[gameState.currentPlayerId];\n    \n    if (currentPlayer) {\n      if (isCurrentPlayersTurn) {\n        // It's YOUR turn to bet\n        phaseInfo = {\n          text: `Pass or Bet`,\n          icon: ICONS.COIN\n        };\n      } else {\n        // It's someone else's turn\n        phaseInfo = {\n          text: `${currentPlayer.name} is Betting`,\n          icon: ICONS.COIN\n        };\n      }\n    } else {\n      phaseInfo = { text: 'Betting Round', icon: ICONS.COIN };\n    }\n  }\n  \n  return (\n    <div className={styles.headerContainer}>\n      {/* Desktop layout - single row with 3 cells */}\n      <div className={styles.desktopLayout}>\n        {/* Left: Logo and game ID */}\n        <div className={styles.headerLeft}>\n          <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n          <p className={styles.gameIdText}>\n            <span \n              className={styles.gameIdLink} \n              onClick={() => setShowGameSummary(true)}\n              title=\"Click to view game summary\"\n            >\n              Game #{gameId}\n            </span>\n          </p>\n        </div>\n        \n        {/* Middle: Phase indicator */}\n        <div className={styles.headerCenter}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right: Rules, Leave and Mute buttons */}\n        <div className={styles.headerRight}>\n          <div className={styles.controlsGroup}>\n            <PreferencesButton />\n            <RulesButton />\n            <LeaveButton onClick={handleLeaveGame} />\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile layout - two rows */}\n      <div className={styles.mobileLayout}>\n        {/* Top row: Logo/ID, Mute, Rules, Leave */}\n        <div className={styles.mobileTopRow}>\n          <div className={styles.headerLeft}>\n            <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n            <p className={styles.gameIdText}>\n              <span \n                className={styles.gameIdLink} \n                onClick={() => setShowGameSummary(true)}\n                title=\"Click to view game summary\"\n              >\n                Game #{gameId}\n              </span>\n            </p>\n          </div>\n          \n\n          \n          <div className={styles.mobileActions}>\n            <PreferencesButton />\n            <RulesButton />\n            <LeaveButton onClick={handleLeaveGame} />\n          </div>\n        </div>\n        \n        {/* Bottom row: Phase indicator (full width) */}\n        <div className={styles.mobileBottomRow}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Game Summary Modal */}\n      {showGameSummary && (\n        <GameSummaryModal \n          onClose={() => setShowGameSummary(false)} \n          gameId={gameId}\n          gameState={gameState}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from 'react';\n\n/**\n * Arrow icon component that can be rotated to point up or down\n * @param {Object} props - Component props\n * @param {string} props.direction - Direction of the arrow ('up' or 'down')\n * @param {string} props.color - Color of the arrow (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ArrowIcon = ({ direction = 'up', color = 'currentColor', size = 24 }) => {\n  // Determine rotation based on direction\n  const rotation = direction === 'down' ? 'rotate(180deg)' : 'rotate(0deg)';\n  \n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={{ transform: rotation, display: 'inline-block', transformOrigin: 'center' }}\n    >\n      {/* This is the shift/arrow up icon from Material Design */}\n      <path d=\"M7 11l5-5 5 5M7 17l5-5 5 5\" />\n    </svg>\n  );\n};\n\nexport default ArrowIcon;\n","import React from 'react';\nimport styles from './styles/CardDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst CardDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return <div className={styles.loading}>Loading game state...</div>;\n  }\n  \n  const { \n    firstCard,\n    secondCard,\n    thirdCard,\n    phase,\n    dealer\n  } = gameState;\n  \n  // Card state is managed by the game context\n  \n  const dealerName = dealer?.name;\n  const cardLabels = {\n    '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '10': '10',\n    'J': 'J', 'Q': 'Q', 'K': 'K', 'A': 'A'\n  };\n  \n  // Map for handling both string names and direct symbols\n  const suitSymbols = {\n    'hearts': '♥',\n    'diamonds': '♦',\n    'clubs': '♣',\n    'spades': '♠',\n    // Handle direct Unicode symbols as well\n    '♥': '♥',\n    '♦': '♦',\n    '♣': '♣',\n    '♠': '♠'\n  };\n  \n  // Helper to determine if a suit is red\n  const isRedSuit = (suit) => {\n    return suit === '♥' || suit === '♦' || suit === 'hearts' || suit === 'diamonds';\n  };\n  \n  const renderCard = (card, index) => {\n    if (!card) return (\n      <div key={`empty-${index}`} className={styles.card}>\n        <div className={styles.cardBack}></div>\n      </div>\n    );\n    \n    const isRed = isRedSuit(card.suit);\n    const isAce = card.value === 'A';\n    const isAceLow = card.isAceLow;\n    const isMiddleCard = index === 1; // Index 1 is the middle card position\n    \n    return (\n      <div key={`${card.value}-${card.suit}-${index}`} \n        className={`${styles.card} ${isRed ? styles.redCard : styles.blackCard} ${isAce ? styles.aceCard : ''}`}\n      >\n        {isAce && !isMiddleCard && (\n          <div className={`${styles.aceIndicator} ${isAceLow ? styles.aceLow : styles.aceHigh} ${isRed ? styles.redCard : styles.blackCard}`}>\n            {isAceLow ? (\n              <span className={styles.indicatorContent}>LOW <ArrowIcon direction=\"down\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            ) : (\n              <span className={styles.indicatorContent}>HIGH <ArrowIcon direction=\"up\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            )}\n          </div>\n        )}\n        <div className={styles.cardCorner}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n        <div className={styles.cardCenter}>\n          {suitSymbols[card.suit]}\n        </div>\n        <div className={`${styles.cardCorner} ${styles.bottomRight}`}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  // Function to handle card positioning \n  const renderCardLayout = () => {\n    // Create an array of 3 nulls to represent the card slots\n    let displayCards = [null, null, null];\n    \n    // Check if we have a valid game state with cards\n    if (!firstCard && !secondCard && !thirdCard) {\n      return displayCards.map((card, index) => renderCard(card, index));\n    }\n    \n    // Handle the individual card properties\n    if (firstCard) {\n      displayCards[0] = {...firstCard}; // Left position - use spread operator to create a copy\n    }\n    \n    if (secondCard) {\n      displayCards[2] = {...secondCard}; // Right position - use spread operator to create a copy\n    }\n    \n    if (thirdCard) {\n      displayCards[1] = {...thirdCard}; // Middle position - use spread operator to create a copy\n    }\n    \n    return displayCards.map((card, index) => renderCard(card, index));\n  };\n\n  return (\n    <div className={styles.cardDisplayContainer}>\n      <div className={`${styles.cardsRow} ${phase === 'dealing' ? styles.dealingPhase : ''} ${phase === 'revealing' ? styles.revealingPhase : ''}`}>\n        {renderCardLayout()}\n      </div>\n    </div>\n  );\n};\n\nexport default CardDisplay;\n","import React from 'react';\nimport styles from './styles/PotButton.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * PotButton - The most epic, baller button in the entire game\n * Features a shimmering gold border with a shiny silver background to make the gold currency pop\n * Includes multiple overlapping layers and effects for maximum visual impact\n * \n * @param {Object} props - Component props\n * @param {number} props.amount - The pot amount to display\n * @param {boolean} props.disabled - Whether the button is disabled\n * @param {function} props.onClick - Function to call when the button is clicked\n */\nconst PotButton = ({ amount, disabled, onClick }) => {\n  return (\n    <button\n      className={`${styles.potButton} ${disabled ? styles.disabled : ''}`}\n      onClick={onClick}\n      disabled={disabled}\n      aria-label={`Bet the pot: ${amount} chips`}\n    >\n      {/* Layer 2: Gold border with texture */}\n      <div className={styles.shimmerBorder}></div>\n      \n      {/* Layer 4: Silver metallic background */}\n      <div className={styles.buttonBackground}></div>\n      \n      {/* Layer 5: Light reflection effects */}\n      <div className={styles.reflectionEffect}></div>\n      \n      {/* Layer 6-8: Button content with 3D transform */}\n      <div className={styles.buttonContent}>\n        <span className={styles.potText}>POT</span>\n        <span className={styles.potAmount}>\n          <CurrencyAmount amount={amount} background=\"pill\" />\n        </span>\n      </div>\n    </button>\n  );\n};\n\nexport default PotButton;\n","import React, { useState } from 'react';\nimport styles from './styles/BettingPanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PotButton from './PotButton.jsx';\n\nconst BettingPanel = () => {\n  // Get game state and actions from context\n  const { gameState, placeBet } = useGameContext();\n  const { socket } = useSocket();\n  // Initialize state first - before any conditional returns\n  const [customBet, setCustomBet] = useState('');\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    currentPlayerId, \n    pot: potAmount, \n    phase,\n    firstCard,\n    secondCard\n  } = gameState;\n  \n  // Only show in betting phase\n  if (phase !== 'betting') return null;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const myPlayer = socket && players && socket.auth?.userId ? players[socket.auth.userId] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  \n  const handleCustomBetChange = (e) => {\n    // Only allow numbers\n    const value = e.target.value.replace(/[^0-9]/g, '');\n    \n    // Don't allow bets greater than pot or player balance\n    const maxBet = Math.min(potAmount, playerBalance);\n    if (value && parseInt(value) > maxBet) {\n      setCustomBet(maxBet.toString());\n    } else {\n      setCustomBet(value);\n    }\n  };\n  \n  const handleCustomBetSubmit = () => {\n    if (customBet && !isNaN(customBet)) {\n      const betAmount = parseInt(customBet, 10);\n      // Verify bet is at least $1 and at most the pot/balance\n      if (betAmount >= 1 && betAmount <= Math.min(potAmount, playerBalance)) {\n        placeBet(betAmount);\n        setCustomBet('');\n      }\n    }\n  };\n  \n  // Helper to handle Enter key in the custom bet input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleCustomBetSubmit();\n    }\n  };\n  \n\n  \n  const renderBettingControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.betContainer}>\n        <p className={styles.betText}>Place your bet (Min: <CurrencyAmount amount={1} />, Max: <CurrencyAmount amount={Math.min(potAmount, playerBalance)} />)</p>\n        \n        {/* Extreme options row */}\n        <div className={styles.extremeOptionsRow}>\n          <button\n            className={`${styles.betButton} ${styles.extremeButton} ${styles.passButton}`}\n            onClick={() => placeBet(0)}\n          >\n            PASS\n          </button>\n          \n          <PotButton \n            amount={potAmount}\n            onClick={() => placeBet(potAmount)}\n            disabled={potAmount > playerBalance}\n          />\n        </div>\n        \n        {/* Standard bet options */}\n        <div className={styles.betButtons}>\n          {[1, 2, 5].map(amount => {\n            const maxBet = Math.min(potAmount, playerBalance);\n            const disabled = amount > maxBet;\n            return (\n              <button\n                key={amount}\n                className={`${styles.betButton} ${disabled ? styles.disabledButton : ''}`}\n                onClick={() => placeBet(amount)}\n                disabled={disabled}\n              >\n                <CurrencyAmount amount={amount} />\n              </button>\n            );\n          })}\n          \n          {/* Custom bet input */}\n          <div className={styles.customBetContainer}>\n            <input\n              type=\"text\"\n              className={styles.customBetInput}\n              placeholder=\"Custom\"\n              value={customBet}\n              onChange={handleCustomBetChange}\n              onKeyPress={handleKeyPress}\n            />\n            <button\n              className={styles.customBetButton}\n              onClick={handleCustomBetSubmit}\n              disabled={!customBet}\n            >\n              Bet\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  \n\n  // Only render the panel for the current player\n  if (!isCurrentPlayer) return null;\n  \n  return (\n    <div className={styles.bettingPanel}>\n      {renderBettingControls()}\n    </div>\n  );\n};\n\nexport default BettingPanel;\n","import React, { useRef, useEffect, useState } from 'react';\nimport styles from './styles/PlayerList.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport UserAvatar from './UserAvatar.jsx';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PlayerList = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  \n  if (!gameState || !gameState.players) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for game data...</p>\n      </div>\n    );\n  }\n  \n  const { players, currentPlayerId, dealerId } = gameState;\n  const currentUserId = socket?.auth?.userId;\n  if (!players || Object.keys(players).length === 0) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for players to join...</p>\n      </div>\n    );\n  }\n\n  \n  return (\n    <div className={styles.playersContainer}>\n      <h3 className={styles.playersTitle}>Players</h3>\n      \n      <div className={styles.playersList}>\n        {/* Use gameState.seats to render players in seat order */}\n        {gameState.seats\n          .filter(playerId => playerId !== null && players[playerId])\n          .map(playerId => {\n            const player = players[playerId];\n            const isCurrentPlayer = playerId === currentPlayerId;\n            // Compare player.userId with currentUserId instead of comparing playerId with currentUserId\n            const isCurrentUser = player.userId === currentUserId;\n            const isDealer = playerId === dealerId; // Use playerId instead of player.id\n            const isDisconnected = player.disconnected === true;\n            \n            return (\n              <div \n                key={playerId} \n                className={`\n                  ${styles.playerItem}\n                  ${isCurrentPlayer ? styles.currentPlayer : ''}\n                  ${isCurrentUser ? styles.currentUser : ''}\n                `}\n              >\n              <div className={styles.playerInfo}>\n                <UserAvatar \n                  user={{ \n                    username: player.name, \n                    profileImg: player.profileImg \n                  }} \n                  size=\"small\" \n                  showName={false}\n                />\n                <span className={styles.playerName}>\n                  {player.name}\n                  <span className={styles.playerStatus}>\n                    {isDealer && ` ${ICONS.DEALER}`}\n                    {player.disconnected && <span className={styles.disconnectedIndicator} title=\"Player disconnected\">⚠️ Disconnected</span>}\n                  </span>\n                </span>\n              </div>\n              <div className={styles.playerBalanceContainer}>\n                <BalanceDisplay balance={Number(player.balance || 0)} />\n\n                <div \n                  className={`\n                    ${styles.readyIndicator} \n                    ${player.isSittingOut ? styles.sittingOut : (player.isReady ? styles.ready : styles.notReady)}\n                  `}\n                  title={player.isSittingOut ? 'Sitting Out' : (player.isReady ? 'Ready' : 'Not Ready')}\n                >\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst BalanceDisplay = ({ balance }) => {\n  const [prevBalance, setPrevBalance] = useState(balance);\n  const [animationClass, setAnimationClass] = useState('');\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (balance !== prevBalance) {\n      // Determine if balance increased or decreased\n      const isIncrease = balance > prevBalance;\n      setAnimationClass(isIncrease ? styles.balanceIncrease : styles.balanceDecrease);\n\n      // Clear previous timeout if it exists\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      // Remove animation class after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setAnimationClass('');\n      }, 1000); // Match animation duration\n\n      setPrevBalance(balance);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [balance]);\n\n  return (\n    <span className={`${styles.playerBalance} ${animationClass}`}>\n      <CurrencyAmount amount={balance} />\n    </span>\n  );\n};\n\nexport default PlayerList;\n","import React from 'react';\nimport styles from './styles/PotDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PotDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  const { pot } = gameState;\n  \n  return (\n    <div className={styles.potDisplayContainer}>\n      <div className={styles.potIconWrapper}>\n        <span className={styles.potIcon}>{ICONS.POT}</span>\n      </div>\n      <div className={styles.potInfo}>\n        <h3 className={styles.potLabel}>POT</h3>\n        <span className={styles.potAmount}><CurrencyAmount amount={pot} size=\"medium\" /></span>\n      </div>\n    </div>\n  );\n};\n\nexport default PotDisplay;\n","import React from 'react';\nimport styles from './styles/DeckDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { ICONS } from '../constants/UIConstants';\n\nconst DeckDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  // Get the deck size from the game state\n  const { deckSize = 0 } = gameState;\n  \n  // Calculate the visual thickness of the deck based on remaining cards\n  const getThicknessClass = () => {\n    if (deckSize >= 40) return styles.deckThick;\n    if (deckSize >= 25) return styles.deckMedium;\n    if (deckSize >= 10) return styles.deckThin;\n    return styles.deckVeryThin;\n  };\n  \n  return (\n    <div className={styles.deckDisplayContainer}>\n      <div className={`${styles.deckVisual} ${getThicknessClass()}`}>\n        <div className={styles.deckIcon}>{ICONS.DECK}</div>\n      </div>\n      <div className={styles.deckInfo}>\n        <h3 className={styles.deckLabel}>DECK</h3>\n        <span className={styles.deckCount}>{deckSize}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default DeckDisplay;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/AutoAnteToggle.module.css';\n\nconst AutoAnteToggle = () => {\n  const { preferences, toggleAutoAnte, loading } = usePreferences();\n  const { gameState, playerReady } = useGameContext();\n  const { socket } = useSocket();\n  \n  const handleToggle = async () => {\n    const newValue = !preferences.autoAnte;\n    const success = await toggleAutoAnte();\n    \n    // Only auto-ante if the player is not already anted\n    if (newValue && success && playerReady) {\n      // Check if player is already anted (using userId instead of socket.id)\n      let myPlayer = null;\n      if (socket && socket.auth?.userId && gameState?.players) {\n        // Find player by userId\n        const playerIds = Object.keys(gameState.players);\n        for (const id of playerIds) {\n          if (gameState.players[id].userId === socket.auth.userId) {\n            myPlayer = gameState.players[id];\n            break;\n          }\n        }\n      }\n      const isPlayerReady = myPlayer?.isReady;\n      \n      // Only call playerReady if the player is not already ready\n      if (!isPlayerReady) {\n        playerReady();\n      }\n    }\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.autoAnte}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        <span className={styles.toggleText}>\n          Auto-Ante\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default AutoAnteToggle;\n","import React from 'react';\nimport styles from './styles/AnteControls.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\nimport AutoAnteToggle from './AutoAnteToggle.jsx';\n\n\nconst AnteControls = () => {\n  // Get game state and actions from context\n  const { gameState, playerReady, playerUnready } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    anteAmount, \n    phase \n  } = gameState;\n  \n  // Only show in waiting phase\n  if (phase !== 'waiting') return null;\n  \n  // Find the player by user ID\n  let myPlayer = null;\n  if (socket && socket.auth?.userId && players) {\n    // Find player by userId\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === socket.auth.userId) {\n        myPlayer = players[id];\n        break;\n      }\n    }\n  } else if (user && players) {\n    // If we can't find by socket ID, try to find by user ID\n    const playerIds = Object.keys(players);\n    for (const id of playerIds) {\n      if (players[id].userId === user.id) {\n        myPlayer = players[id];\n        console.log(`[AnteControls] Found player by user ID instead of socket ID`);\n        break;\n      }\n    }\n  }\n  \n  // Get player balance and ready status\n  const playerBalance = Number(myPlayer?.balance || 0);\n  const isPlayerReady = myPlayer?.isReady;\n  \n  // Check if player has enough chips\n  const hasEnoughChips = playerBalance >= anteAmount;\n  \n  // Player state and readiness is managed by the game context\n  \n  return (\n    <div className={styles.anteControlsWrapper}>\n      <div className={styles.controlsContainer}>\n        {/* Main action button (Ante or Back Out) */}\n        <div className={styles.buttonContainerRow}>\n          {!isPlayerReady ? (\n            // Player is not ready - show Ante button and Sit Out button side by side\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.anteButton}\n                onClick={playerReady}\n                disabled={!hasEnoughChips}\n                aria-label=\"Ante up\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.anteIcon}>{ICONS.CHECK}</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>ANTE</h3>\n                  <span className={styles.buttonAmount}><CurrencyAmount amount={anteAmount} /></span>\n                </div>\n              </button>\n\n              {/* Temporarily commented out sit out button\n              <button\n                className={`${styles.backOutButton} ${styles.sitOutHalfWidth}`}\n                onClick={() => {\n                  if (socket && gameState && user) {\n                    socket.emit('sitOut', {\n                      gameId: gameState.id,\n                      userId: socket.auth?.userId || user.id\n                    });\n                  }\n                }}\n                disabled={myPlayer?.isSittingOut} // Disable if sitting out\n                title={myPlayer?.isSittingOut ? \"You are currently sitting out\" : \"Sit out next round\"}\n                aria-label=\"Sit Out\"\n              >\n                <div className={styles.shimmerBorder}></div>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>SIT OUT</h3>\n                </div>\n              </button>\n              */}\n\n              {!hasEnoughChips && (\n                <p className={styles.notEnoughChipsText}>Not enough coins (<CurrencyAmount amount={anteAmount} /> required)</p>\n              )}\n            </div>\n          ) : (\n            // Player is ready - show Back Out button\n            <div className={styles.buttonContainerRow}>\n              <button \n                className={styles.backOutButton}\n                onClick={() => {\n                  if (typeof playerUnready === 'function') {\n                    playerUnready();\n                  } else {\n                    console.error('playerUnready is not a function');\n                  }\n                }}\n                aria-label=\"Back out\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.backOutIcon}>✕</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>BACK OUT</h3>\n                </div>\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {/* Auto-Ante toggle - always shown */}\n        <div className={styles.autoAnteContainer}>\n          <AutoAnteToggle />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnteControls;\n","import React from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/ResultsPanel.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Results panel component that displays the outcome of a hand during the results phase\n */\nconst ResultsPanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n\n  // If there's no result, don't render anything\n  if (!gameState.result) return null;\n\n  const { result, players, resultCountdown } = gameState;\n  const isCurrentPlayer = result.playerId === socket?.id;\n  const playerName = isCurrentPlayer ? 'You' : players[result.playerId]?.name;\n  const outcomeText = isCurrentPlayer \n    ? (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'PENALTY!' : 'Lost')\n    : (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'PENALTY!' : 'Lost');\n\n  return (\n    <div className={styles.resultsPanel}>\n      {/* Card display section removed - cards are now visible in the game board */}\n\n      <div className={styles.resultContent}>\n        {result.outcome === 'tie' && (\n          <div className={styles.penaltyWarning}>\n            <div className={styles.cautionTape}></div>\n          </div>\n        )}\n        <h2 className={`${styles.resultText} ${styles[result.outcome + 'Text']}`}>\n          {playerName} {outcomeText}{result.outcome !== 'tie' && '!'}\n        </h2>\n        \n        {result.winnings > 0 && (\n          <p className={styles.winningsText}>\n            Winnings: <CurrencyAmount amount={result.winnings} size=\"medium\" />\n          </p>\n        )}\n        \n        {result.outcome === 'tie' && (\n          <p className={styles.penaltyText}>\n            {result.isTripleAceTie ? '3X PENALTY' : '2X PENALTY'}\n          </p>\n        )}\n        \n        {resultCountdown && (\n          <div className={styles.countdownContainer}>\n            <p className={styles.countdownText}>\n              Next hand in: {resultCountdown.countdownSeconds}s\n            </p>\n            <div className={styles.countdownProgress}>\n              <div \n                className={styles.countdownBar} \n                style={{ width: `${(resultCountdown.countdownSeconds / 5) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ResultsPanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/AceChoicePanel.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst AceChoicePanel = () => {\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForAceDecision && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForAceDecision, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const handleAceChoice = (isAceLow) => {\n    socket.emit('chooseAceValue', { isAceLow });\n  };\n  \n  // Check if it's the current player's turn\n  const isCurrentPlayersTurn = socket?.auth?.userId === gameState.currentPlayerId;\n  const currentPlayerName = gameState.players[gameState.currentPlayerId]?.name || 'Current player';\n  \n  const renderAceChoiceControls = () => {\n    if (!isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.aceChoiceControls}>\n        <p className={styles.aceChoiceText}>\n          You've been dealt an Ace! Choose whether it should be high or low.\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.aceChoiceButtons}>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceHighButton}`}\n            onClick={() => handleAceChoice(false)}\n          >\n            <span className={styles.buttonContent}>ACE HIGH <ArrowIcon direction=\"up\" color=\"white\" size={20} /></span>\n          </button>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceLowButton}`}\n            onClick={() => handleAceChoice(true)}\n          >\n            <span className={styles.buttonContent}>ACE LOW <ArrowIcon direction=\"down\" color=\"white\" size={20} /></span>\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n        <p className={styles.waitingText}>\n          {currentPlayerName} is choosing whether their Ace is high or low...\n        </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.aceChoicePanel}>\n      {renderAceChoiceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default AceChoicePanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/SecondChancePanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst SecondChancePanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState(null); // 'ante' or 'pass'\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForSecondChance && socket?.auth?.userId === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForSecondChance, gameState?.currentPlayerId, socket?.auth?.userId]);\n  \n  const { \n    players, \n    currentPlayerId, \n    anteAmount = 1\n  } = gameState;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.auth?.userId;\n  const currentPlayer = players[currentPlayerId];\n  \n  const handleSecondChance = (anteAgain) => {\n    if (socket) {\n      setLoading(true);\n      setActionType(anteAgain ? 'ante' : 'pass');\n      socket.emit('secondChance', { anteAgain });\n    }\n  };\n  \n  const renderSecondChanceControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.secondChanceControls}>\n        <p className={styles.secondChanceText}>\n          Would you like to ante up again for a second chance?\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.secondChanceButtons}>\n          <button\n            className={`${styles.secondChanceButton} ${styles.anteAgainButton}`}\n            onClick={() => handleSecondChance(true)}\n          >\n            {loading && actionType === 'ante' ? 'Processing...' : (\n              <>\n                Ante Up <span className={styles.currencyWrapper}>\n                  <CurrencyAmount amount={anteAmount} size=\"small\" />\n                </span>\n              </>\n            )}\n          </button>\n          <button\n            className={`${styles.secondChanceButton} ${styles.passButton}`}\n            onClick={() => handleSecondChance(false)}\n          >\n            {loading && actionType === 'pass' ? 'Processing...' : 'Pass'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n          <p className={styles.waitingText}>\n            {currentPlayer?.name} is deciding whether to take a second chance.\n          </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.secondChancePanel}>\n      {renderSecondChanceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default SecondChancePanel;\n","import React, { useState } from 'react';\nimport styles from './styles/GameLog.module.css';\nimport { useGameContext } from '../contexts/GameContext';\n\nconst GameLog = () => {\n  const { gameState } = useGameContext();\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!gameState || !gameState.gameLog) return null;\n  \n  // Get the game log entries\n  const logEntries = gameState.gameLog || [];\n  \n  // Format timestamp to readable time\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n  \n  // Toggle expanded state\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  // Determine how many entries to show\n  const displayEntries = isExpanded ? logEntries : logEntries.slice(0, 5);\n  \n  return (\n    <div className={styles.gameLogContainer}>\n      <div className={styles.gameLogHeader} onClick={toggleExpanded}>\n        <h3>Game Log</h3>\n        <span className={styles.expandIcon}>{isExpanded ? '▲' : '▼'}</span>\n      </div>\n      \n      <div className={`${styles.gameLogEntries} ${isExpanded ? styles.expanded : ''}`}>\n        {displayEntries.length === 0 ? (\n          <div className={styles.emptyLog}>No game events yet</div>\n        ) : (\n          displayEntries.map((entry, index) => (\n            <div key={index} className={styles.logEntry}>\n              <span className={styles.logTime}>{formatTime(entry.timestamp)}</span>\n              <span className={styles.logMessage}>{entry.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {!isExpanded && logEntries.length > 5 && (\n        <div className={styles.showMoreButton} onClick={toggleExpanded}>\n          Show {logEntries.length - 5} more entries\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameLog;\n","import React, { useEffect } from 'react';\nimport styles from './styles/GameScreen.module.css';\nimport GameHeader from './GameHeader.jsx';\nimport CardDisplay from './CardDisplay.jsx';\nimport BettingPanel from './BettingPanel.jsx';\nimport PlayerList from './PlayerList.jsx';\nimport PotDisplay from './PotDisplay.jsx';\nimport DeckDisplay from './DeckDisplay.jsx';\nimport AnteControls from './AnteControls.jsx';\nimport ResultsPanel from './ResultsPanel.jsx';\nimport AceChoicePanel from './AceChoicePanel.jsx';\nimport SecondChancePanel from './SecondChancePanel.jsx';\nimport GameLog from './GameLog.jsx';\n\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst GameScreen = ({ onReturnToLobby }) => {\n  // Get state and actions from context\n  const { \n    gameState,\n    error,\n    clearError\n  } = useGameContext();\n  \n  // Auto-clear errors after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 10000); // 10 seconds\n      \n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n  \n  // Handle returning to lobby\n  const handleLeaveGame = () => {\n    // Call the parent callback\n    if (onReturnToLobby) {\n      onReturnToLobby();\n    }\n  };\n  \n  // Get the socket instance for event emission\n  const { socket } = useSocket(); \n  // Get the authenticated user data from AuthContext\n  const { user } = useAuth(); \n  \n  // Safety check for null gameState or missing phase\n  if (!gameState) {\n    return (\n      <div className={styles.loadingContainer}>\n        <p>Loading game state...</p>\n      </div>\n    );\n  }\n  \n  // Make sure we have a valid phase\n  const phase = gameState.phase || 'waiting';\n\n  // Find the current player based on the authenticated user ID from AuthContext\n  // Assuming the user object from AuthContext has an 'id' property\n  const currentUserId = user?.id; // Use user.id (adjust if property name is different e.g., user.userId)\n  const currentPlayer = gameState.players && currentUserId ? gameState.players[currentUserId] : null;\n\n  // Handler for the 'I'm Back' button\n  const handleImBackClick = () => {\n    if (socket && gameState.id) {\n      socket.emit('imBack', { gameId: gameState.id });\n    } else {\n      console.error(\"Cannot emit 'imBack': socket or gameId missing.\");\n    }\n  };\n\n\n  return (\n    <div className={styles.gameContainer}>\n      <div className={styles.gameScreen}>\n        <GameHeader handleLeaveGame={handleLeaveGame} />\n        \n        {error && (\n          <div className={styles.errorContainer}>\n            <p className={styles.errorText}>{error}</p>\n          </div>\n        )}\n        \n        <div className={styles.gameInfoWrapper}>\n          <DeckDisplay />\n          <PotDisplay />\n        </div>\n        \n        {/* Always show the CardDisplay component */}\n        <CardDisplay />\n        \n        {/* Primary check: Is the current player sitting out? */}\n        {currentPlayer?.isSittingOut ? (\n          // If sitting out, always show the 'I'm Back!' button regardless of phase\n          <button onClick={handleImBackClick} className={styles.imBackButton}> \n            I'm Back!\n          </button>\n        ) : (\n          // If not sitting out, render controls based on the game phase\n          phase === 'waiting' ? (\n            /* Show ante controls during waiting phase */\n            <AnteControls />\n          ) : phase === 'results' ? (\n            /* Show the results panel during results phase */\n            <ResultsPanel />\n          ) : gameState.waitingForAceDecision ? (\n            /* Show the Ace choice panel when first card is an Ace */\n            <AceChoicePanel />\n          ) : gameState.waitingForSecondChance ? (\n            /* Show the Second Chance panel when matching cards are dealt */\n            <SecondChancePanel />\n          ) : phase === 'betting' ? (\n            /* Show the betting panel only during betting phase */\n            <BettingPanel />\n          ) : null\n        )}\n        \n        <div className={styles.gameBottomSection}>\n          <div className={styles.playerListContainer}>\n            <PlayerList />\n          </div>\n          <div className={styles.gameLogContainer}>\n            <GameLog />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameScreen;\n","import React from 'react';\nimport styles from './LoadingScreen.module.css';\n\n/**\n * A reusable loading screen component\n * @param {Object} props\n * @param {string} props.message - The message to display while loading\n */\nexport const LoadingScreen = ({ message = 'Loading...' }) => {\n  return (\n    <div className={styles.loadingScreen}>\n      <div className={styles.loadingContainer}>\n        <div className={styles.spinner}></div>\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport styles from '../../styles/PasswordPromptModal.module.css';\n\nfunction PasswordPromptModal({ isOpen, onClose, onSubmit, gameId }) {\n  const [password, setPassword] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e) => {\n    e.preventDefault(); // Prevent default form submission\n    onSubmit(password);\n    setPassword(''); // Clear password after submit\n  };\n\n  const handleCancel = () => {\n    setPassword(''); // Clear password on cancel\n    onClose();\n  };\n\n  return (\n    <div className={styles.modalOverlay}>\n      <div className={styles.modalContent}>\n        <h2>Password Required</h2>\n        <p>Please enter the password for game <strong>{gameId || ''}</strong>:</p>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className={styles.passwordInput}\n            autoFocus\n            required\n          />\n          <div className={styles.modalActions}>\n            <button type=\"button\" onClick={handleCancel} className={`${styles.modalButton} ${styles.cancelButton}`}>\n              Cancel\n            </button>\n            <button type=\"submit\" className={`${styles.modalButton} ${styles.submitButton}`}>\n              Join Game\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PasswordPromptModal;\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { GameProvider, useGameContext } from '../contexts/GameContext';\nimport GameScreen from './GameScreen';\nimport { useSocket } from '../contexts/SocketContext';\nimport { LoadingScreen } from './common/LoadingScreen';\nimport PasswordPromptModal from './common/PasswordPromptModal';\nimport soundService from '../services/SoundService';\n\nconst GameRoom = () => {\n  const { gameId } = useParams();\n  const navigate = useNavigate();\n  const { socket, isConnected } = useSocket();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\n  const hasInitiatedJoin = useRef(false); // Ref to track true initiation\n\n  const handleReturnToLobby = useCallback(() => {\n    if (socket && isConnected && gameId) {\n      soundService.play('ui.leave'); \n      socket.emit('leaveGame', { gameId }); \n      navigate('/');\n    }\n  }, [socket, isConnected, gameId, navigate]);\n\n  const handlePasswordSubmit = useCallback((password) => {\n    setIsPasswordModalOpen(false);\n    if (socket && gameId && password) {\n      setError(null); \n      socket.emit('joinGame', { gameId, password });\n      setLoading(true);\n    }\n  }, [socket, gameId]);\n\n  const handlePasswordCancel = useCallback(() => {\n    setIsPasswordModalOpen(false);\n    navigate('/');\n  }, [navigate]);\n\n  useEffect(() => {\n    setError(null);          \n    setIsPasswordModalOpen(false); \n    setLoading(true);        \n  }, [gameId]);\n\n  useEffect(() => {\n    if (!socket) {\n      return; \n    }\n\n    const onGameJoined = (data) => {\n      if (data && data.game && data.game.id === gameId) {\n        soundService.play('ui.join');\n        setLoading(false);\n        setError(null);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    const onError = (errorData) => {\n      const message = errorData.message || 'An unknown error occurred';\n\n      if (message === 'Password required') {\n        console.error(errorData);\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n        setError(null);\n      } else if (message === 'Invalid password') {\n        console.error(errorData);\n        setError('Invalid password.');\n        setIsPasswordModalOpen(true);\n        setLoading(false);\n      } else if (message === 'Game not found') {\n        navigate('/');\n      } else if (message === 'Game is full') {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n        setTimeout(() => navigate('/'), 3000);\n      } else {\n        setError(message);\n        setLoading(false);\n        setIsPasswordModalOpen(false);\n      }\n    };\n\n    socket.on('gameJoined', onGameJoined);\n    socket.on('error', onError);\n\n    return () => {\n      socket.off('gameJoined', onGameJoined);\n      socket.off('error', onError);\n    };\n  }, [socket, gameId, navigate]); \n\n  useEffect(() => {\n    // Use ref to prevent double emission due to StrictMode or rapid state changes\n    if (socket && gameId && !hasInitiatedJoin.current) {\n      hasInitiatedJoin.current = true; // Mark as initiated *immediately*\n      setLoading(true); \n      setError(null); \n      setIsPasswordModalOpen(false); \n      socket.emit('joinGame', { gameId });\n    } else {\n    }\n    // Dependencies remain minimal: only run when socket or gameId fundamentally change\n  }, [socket, gameId]); \n\n  const GameRoomContent = () => {\n    const { gameState } = useGameContext(); \n\n    return (\n      <>\n        <PasswordPromptModal \n          isOpen={isPasswordModalOpen}\n          onClose={handlePasswordCancel}\n          onSubmit={handlePasswordSubmit}\n          gameId={gameId} \n        />\n\n        {loading && <LoadingScreen message={`Joining game ${gameId}...`} />} \n        \n        {error && !loading && !isPasswordModalOpen && (\n          <div className=\"error-container\" style={{ padding: '20px', color: 'red', textAlign: 'center' }}>\n            <h2>An error occurred</h2>\n            <p>{error}</p>\n        {/* Suggest refreshing the page instead of navigating back */}\n        <button onClick={() => window.location.reload()}>Refresh Page</button>\n          </div>\n        )}\n        \n        {!loading && !error && gameState && \n          <GameScreen onReturnToLobby={handleReturnToLobby} />\n        }\n      </>\n    );\n  };\n\n  return (\n    <GameProvider gameId={gameId}>\n      <GameRoomContent /> \n    </GameProvider>\n  );\n};\n\nexport default GameRoom;\n","import { createBrowserRouter, Navigate } from 'react-router-dom';\nimport AuthPage from './components/auth/AuthPage';\nimport Lobby from './components/Lobby';\nimport GameRoom from './components/GameRoom';\nimport { LoadingScreen } from './components/common/LoadingScreen';\nimport { useAuth } from './contexts/AuthContext';\nimport { LobbyProvider } from './contexts/LobbyContext';\n\n// Auth protection wrapper component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingScreen message=\"Checking authentication...\" />;\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n  \n  return children;\n};\n\n// Define the router configuration\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: (\n      <ProtectedRoute>\n        <LobbyProvider>\n          <Lobby />\n        </LobbyProvider>\n      </ProtectedRoute>\n    ),\n  },\n  {\n    path: '/auth',\n    element: <AuthPage />,\n  },\n  {\n    path: '/:gameId',\n    element: <ProtectedRoute><GameRoom /></ProtectedRoute>,\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"/\" replace />,\n  },\n]);\n","import React, { useEffect } from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport soundService from './services/SoundService';\nimport { router } from './router';\nimport './styles/global.css';\n\nfunction App() {\n  // Initialize Sound Service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <AuthProvider>\n      <SocketProvider>\n        <PreferencesProvider>\n          <App />\n        </PreferencesProvider>\n      </SocketProvider>\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"names":["m","require$$0","createRoot","hydrateRoot","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","i","length","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","oncanplaythrough","e","_setupCodecs","audioTest","err","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","split","checkSafari","indexOf","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","document","removeEventListener","_emit","addEventListener","_obtainHtml5Audio","pop","testPlay","play","Promise","then","catch","console","warn","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","handleSuspension","_resumeAfterSuspend","Howl","o","src","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_xhr","method","xhr","headers","withCredentials","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","url","str","exec","toLowerCase","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","apply","fade","from","to","len","min","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","call","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","test","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","_endListener","code","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","XMLHttpRequest","open","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","type","createPanner","soundService","constructor","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","API_URL","import","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","join","leave","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","body","maxTouchPoints","AuthForm","onSubmit","mode","username","setUsername","useState","password","setPassword","setError","useMediaQuery","isSmallMobile","Paper","className","styles","elevation","children","jsx","Typography","variant","component","gutterBottom","sx","color","fontWeight","jsxRuntimeExports","Alert","severity","mb","backgroundColor","jsxs","async","preventDefault","message","TextField","label","fullWidth","margin","value","onChange","target","required","size","inputProps","minLength","borderColor","fontSize","padding","marginBottom","Button","mt","background","textTransform","letterSpacing","boxShadow","transform","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","Blob","toString","withNativeArrayBuffer","ArrayBuffer","isView","obj","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","content","result","readAsDataURL","toArray","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","decode","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","bytes","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","packet","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","Emitter","mixin","_callbacks","removeListener","removeAllListeners","cb","callbacks","emit","emitReserved","listeners","hasListeners","nextTick","resolve","setTimeoutFn","globalThisShim","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","clearTimeoutFn","randomString","random","TransportError","Error","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","doOpen","doClose","onClose","packets","write","onOpen","onData","onPacket","details","onPause","createUri","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","hasCORS","empty","BaseXHR","isSSL","xd","req","request","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","extraHeaders","setDisableHeaderCheck","cookieJar","addCookies","requestTimeout","onreadystatechange","parseCookies","getResponseHeader","_onLoad","_onError","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","unloadHandler","attachEvent","hasXHR2","newRequest","concat","isReactNative","product","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","b","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","_hasPingExpired","hasExpired","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","_filterUpgrades","upgrades","filteredUpgrades","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect_error","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queueSeq","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","factor","jitter","attempts","rand","deviation","floor","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","parsed","loc","href","sameNamespace","forceNew","multiplex","SocketContext","createContext","useSocket","useContext","SocketProvider","token","useAuth","setSocket","setIsConnected","useEffect","newSocket","userData","userId","socketEvents","Provider","ICONS","WelcomePopup","balance","onClick","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","log","updatedUser","fetchUserData","authToken","fetch","Authorization","ok","json","currentToken","localStorage","getItem","removeItem","initializeAuth","login","logout","useCallback","refreshUserData","newToken","initialUserData","setItem","completeUserData","handleCloseWelcomePopup","AppHeader","AuthPage","setMode","navigate","useNavigate","Box","endpoint","toUpperCase","requestBody","credentials","hasUser","hasUsername","hasId","hasToken","textAlign","LobbyContext","LobbyProvider","gameList","setGameList","handleGameList","games","handleError","contextValue","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","loadPreferences","React","finalPreferences","updatePreference","prev","formattedData","toggleAutoAnte","newValue","toggleMute","uploadTwoSecondPotGif","file","fileName","fileSize","fileType","formData","FormData","append","text","statusText","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","OnlinePlayerCount","setCount","handler","CoinIcon","coinIcon","CurrencyAmount","amount","customClass","containerClasses","currencyAmount","darkBackground","pillBackground","Boolean","GearIcon","props","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","BaseModal","title","footer","overlay","modal","stopPropagation","closeButton","ToggleSwitch","isChecked","checked","FileUpload","onUpload","currentFileUrl","acceptedFileTypes","previewType","isUploading","setIsUploading","fileInputRef","useRef","ref","files","accept","alt","controls","handleButtonClick","current","click","disabled","PreferencesModal","style","maxWidth","maxHeight","baseModalStyles","loadingMessage","settingsContainer","sectionHeader","settingItem","settingDescription","position","top","left","borderRadius","zIndex","border","marginTop","IconButton","icon","compact","restProps","iconButton","PreferencesButton","isPreferencesOpen","setIsPreferencesOpen","Fragment","openPreferences","width","height","isOpen","closePreferences","UserAvatar","showName","namePosition","initials","getInitials","sizeClass","medium","containerClass","formattedImageUrl","userAvatarContainer","avatar","avatarImage","display","nextSibling","initialsPlaceholder","part","DEFAULT_SETTINGS","useCustomName","customName","isPrivate","enableAceChoice","enableSecondChance","GameSettingsModal","initialSettings","settings","setSettings","errors","setErrors","handleChange","updatedSettings","currentErrors","newErrors","gap","lobbyStyles","actionButton","cancelButton","form","createButton","validationErrors","currentSettings","pass","validateSettings","settingControls","textInput","inputError","maxLength","autoFocus","LockIcon","rx","ry","GameCard","game","onJoin","gameDisplayName","isUserDisconnected","disconnectedPlayers","player","isUserInGame","allPlayers","buttonText","buttonClass","joinGameButton","reconnectButton","continueButton","cardClass","gameListItem","userDisconnectedGame","userInGame","gameListInfo","gameListId","privatePill","marginRight","verticalAlign","disconnectedBadge","inGameBadge","gameListPlayers","playerCount","QuestionIcon","cx","cy","r","x1","y1","x2","y2","GameRulesModal","overflowY","paddingLeft","RulesButton","showRules","setShowRules","openRules","closeRules","Lobby","lobbyLoading","lobbyError","authLoading","socketLoading","searchQuery","setSearchQuery","showGameSettingsModal","setShowGameSettingsModal","createGameWithSettings","creationTimeout","handleGameCreated","handleJoinGame","gameId","filteredGameList","useMemo","filtered","trim","sort","a","userInGameA","userInGameB","userDisconnectedInA","userDisconnectedInB","localeCompare","lobbyContainer","flexDirection","alignItems","formContainer","formSection","welcomeMessage","welcomeHeader","welcomeText","balanceDisplay","headerButtons","logoutButton","gradientDivider","buttonGroup","handleCreateGame","handleCreateCustomGame","errorMessage","gameListContainer","gameListTitle","searchContainer","InputProps","startAdornment","InputAdornment","searchIcon","gameListWrapper","emptyGameList","emptyStateIcon","emptyStateMessage","emptyStateHint","GameContext","useGameContext","undefined","GameProvider","initialGameState","socketError","gameState","setGameState","clearError","setPlayerId","placeBet","bet","payAnte","dealCards","revealMiddleCard","nextRound","playerReady","playerUnready","GAME_CONSTANTS","ANTE_AMOUNT","STARTING_BALANCE","FULL_DECK_SIZE","RECONNECTION_TIMEOUT","MAX_SEATS","TIMERS","DEAL_FIRST_CARD_DELAY","DEAL_SECOND_CARD_DELAY","DEAL_THIRD_CARD_DELAY","DEALING_DURATION","BETTING_DURATION","DECISION_DURATION","REVEALING_DURATION","RESULTS_DURATION","PLAYER_INACTIVITY_TIMEOUT","module","DownloadIcon","TransactionDownloadButton","propGameState","downloadTransactionsCSV","gameTransactions","csvContent","allTransactions","entries","playerId","transactions","playerName","players","tx","timestampObj","timestamp","toLocaleString","escapedName","transactionType","reasonParts","blob","URL","createObjectURL","link","createElement","setAttribute","visibility","appendChild","removeChild","GameSummaryModal","playerNames","playerTotals","totals","sum","settleUpPayments","player1Id","player1Total","player2Id","player2Total","fromName","toName","payments","losers","_","winners","winner","loser","paymentAmount","currentTarget","payment","ExitIcon","points","LeaveButton","phaseDisplayMap","waiting","dealing","revealing","results","GameHeader","handleLeaveGame","currentPhase","phase","timeLeft","setTimeLeft","showGameSummary","setShowGameSummary","waitingForAceDecision","phaseInfo","isCurrentPlayersTurn","currentPlayerId","currentPlayer","headerContainer","desktopLayout","headerLeft","gameTitle","liveTag","gameIdText","gameIdLink","headerCenter","gamePhase","phaseBettingYourTurn","phaseBettingWaiting","phaseIcon","phaseText","timerBar","timerProgress","headerRight","controlsGroup","mobileLayout","mobileTopRow","mobileActions","mobileBottomRow","ArrowIcon","direction","rotation","transformOrigin","CardDisplay","firstCard","secondCard","thirdCard","dealer","cardLabels","J","Q","K","A","suitSymbols","hearts","diamonds","clubs","spades","renderCard","card","cardBack","isRed","suit","isAce","isAceLow","isMiddleCard","redCard","blackCard","aceCard","aceIndicator","aceLow","aceHigh","indicatorContent","cardCorner","cardValue","cardSuit","cardCenter","bottomRight","cardDisplayContainer","cardsRow","dealingPhase","revealingPhase","renderCardLayout","displayCards","PotButton","BettingPanel","customBet","setCustomBet","pot","potAmount","isCurrentPlayer","myPlayer","playerBalance","handleCustomBetChange","maxBet","handleCustomBetSubmit","betAmount","handleKeyPress","renderBettingControls","onKeyPress","PlayerList","dealerId","currentUserId","seats","isCurrentUser","isDealer","BalanceDisplay","isSittingOut","isReady","prevBalance","setPrevBalance","animationClass","setAnimationClass","timeoutRef","PotDisplay","POT","DeckDisplay","deckSize","AutoAnteToggle","playerIds","AnteControls","anteAmount","isPlayerReady","hasEnoughChips","ResultsPanel","resultCountdown","outcomeText","outcome","resultsPanel","resultContent","penaltyWarning","cautionTape","resultText","winnings","winningsText","penaltyText","isTripleAceTie","countdownContainer","countdownText","countdownSeconds","countdownProgress","countdownBar","AceChoicePanel","countdown","setCountdown","prevCount","handleAceChoice","currentPlayerName","renderAceChoiceControls","SecondChancePanel","actionType","setActionType","waitingForSecondChance","handleSecondChance","anteAgain","renderSecondChanceControls","GameLog","isExpanded","setIsExpanded","gameLog","logEntries","toggleExpanded","displayEntries","entry","formatTime","toLocaleTimeString","hour","minute","second","GameScreen","onReturnToLobby","loadingContainer","gameContainer","gameScreen","errorContainer","errorText","gameInfoWrapper","handleImBackClick","imBackButton","gameBottomSection","playerListContainer","gameLogContainer","LoadingScreen","PasswordPromptModal","handleCancel","GameRoom","useParams","isPasswordModalOpen","setIsPasswordModalOpen","hasInitiatedJoin","handleReturnToLobby","handlePasswordSubmit","handlePasswordCancel","onGameJoined","errorData","GameRoomContent","reload","ProtectedRoute","Navigate","router","createBrowserRouter","element","App","RouterProvider","ReactDOM","getElementById","render","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}