{"version":3,"file":"index-CHTDP_LH.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/config.js","../../src/contexts/SocketContext.jsx","../../src/constants/UIConstants.js","../../src/components/common/WelcomePopup.jsx","../../src/contexts/AuthContext.jsx","../../node_modules/howler/dist/howler.js","../../src/services/SoundService.js","../../src/contexts/LobbyContext.jsx","../../src/contexts/PreferencesContext.jsx","../../src/components/common/AppHeader.jsx","../../src/components/common/CoinIcon.jsx","../../src/components/common/CurrencyAmount.jsx","../../src/components/ToggleSwitch.jsx","../../src/components/FileUpload.jsx","../../src/components/PreferencesModal.jsx","../../src/components/PreferencesButton.jsx","../../src/components/UserAvatar.jsx","../../src/components/Lobby.jsx","../../src/contexts/GameContext.jsx","../../../shared/constants/GameConstants.js","../../src/components/MuteToggle.jsx","../../src/components/GameSummaryModal.jsx","../../src/components/GameHeader.jsx","../../src/components/icons/ArrowIcon.jsx","../../src/components/CardDisplay.jsx","../../src/components/PotButton.jsx","../../src/components/BettingPanel.jsx","../../src/components/PlayerList.jsx","../../src/components/PotDisplay.jsx","../../src/components/DeckDisplay.jsx","../../src/components/AutoAnteToggle.jsx","../../src/components/AnteControls.jsx","../../src/components/ResultsPanel.jsx","../../src/components/AceChoicePanel.jsx","../../src/components/SecondChancePanel.jsx","../../src/components/GameLog.jsx","../../src/components/GameScreen.jsx","../../src/components/auth/AuthForm.jsx","../../src/components/auth/AuthPage.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","// API and Socket configuration\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\nconst SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:3001';\n\nexport {\n  API_URL,\n  SOCKET_URL\n};\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { io } from 'socket.io-client';\nimport { SOCKET_URL } from '../config';\n\n// For Socket.io types, we'll define a simple interface that covers our usage\n/**\n * @typedef {Object} SocketIO\n * @property {boolean} connected - Whether the socket is connected\n * @property {string} id - The socket's ID\n * @property {function} emit - Function to emit events\n * @property {function} on - Function to listen for events\n * @property {function} off - Function to remove event listeners\n * @property {function} disconnect - Function to disconnect the socket\n */\n\n// Create context\nconst SocketContext = createContext();\n\nexport const useSocket = () => useContext(SocketContext);\n\n/**\n * @param {Object} props\n * @param {React.ReactNode} props.children\n */\nexport const SocketProvider = ({ children }) => {\n  /** @type {[SocketIO|null, React.Dispatch<React.SetStateAction<SocketIO|null>>]} */\n  const [socket, setSocket] = useState(null);\n  /** @type {[boolean, React.Dispatch<React.SetStateAction<boolean>>]} */\n  const [isConnected, setIsConnected] = useState(false);\n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    // Only run in browser environment\n    if (typeof window === 'undefined') {\n      return;\n    }\n    \n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Skip socket connection if no auth token is available\n      return;\n    }\n\n    // Initialize socket connection with auth token\n    const newSocket = io(SOCKET_URL, {\n      auth: { token },\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      transports: ['websocket', 'polling'],\n      timeout: 10000\n    });\n    \n    // Socket transport events\n    newSocket.on('transport', transport => {\n      console.log(`[Socket] Transport: ${transport}`);\n    });\n    \n    setSocket(newSocket);\n\n    // Socket connection status\n    newSocket.on('connect', () => {\n      console.log(`[Socket] Connected: ${newSocket.id}`);\n      // Note: We don't set isConnected to true here yet\n      // We'll wait for the 'authenticated' event to confirm full authentication\n      setError(null);\n    });\n    \n    // Listen for authentication confirmation\n    newSocket.on('authenticated', () => {\n      console.log('[Socket] Authentication successful');\n      setIsConnected(true); // Now we can set isConnected to true\n      \n      // Request the game list when authenticated\n      console.log('[Socket] Requesting initial game list');\n      newSocket.emit('getGameList');\n    });\n\n    newSocket.on('connect_error', (error) => {\n      console.error('[Socket] Connection error:', {\n        message: error.message,\n        description: error.description,\n        type: error.type,\n        data: error.data\n      });\n      setError('Failed to connect to game server: ' + error.message);\n      setIsConnected(false);\n    });\n\n    newSocket.on('disconnect', () => {\n      console.log('[Socket] Disconnected from server');\n      setIsConnected(false);\n    });\n\n    newSocket.on('error', (err) => {\n      console.error('Socket error:', err);\n      setError(err.message || 'Unknown socket error');\n    });\n\n    // Cleanup on unmount\n    return () => {\n      // Clean up socket connection and event listeners\n      if (newSocket) {\n        newSocket.off('connect');\n        newSocket.off('disconnect');\n        newSocket.off('connect_error');\n        newSocket.off('error');\n        newSocket.disconnect();\n        setSocket(null);\n        setIsConnected(false);\n        setError(null);\n      }\n    };\n  }, []);\n\n  /**\n   * @typedef {Object} SocketContextValue\n   * @property {SocketIO|null} socket - The Socket.IO instance\n   * @property {boolean} isConnected - Whether the socket is connected\n   * @property {string|null} error - Any error message\n   * @property {(error: string|null) => void} setError - Function to set error message\n   */\n\n  /** @type {SocketContextValue} */\n  const value = {\n    socket,\n    isConnected,\n    error,\n    setError\n  };\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n","/**\n * UI Constants for the In-Between game\n * Centralizing UI elements like icons makes them easier to update across the application\n */\n\n// Game Icons\nexport const ICONS = {\n  COIN: '', // Yellow/gold diamond icon for currency\n  POT: '',\n  DEALER: '',\n  CHECK: '',\n  CARDS: '',\n  DECK: '', // Card deck icon\n  ARROW_UP: '', // Arrow up for Ace high\n  ARROW_DOWN: '', // Arrow down for Ace low\n};\n","import React from 'react';\nimport styles from './WelcomePopup.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A popup component that displays a welcome message and balance reset notification\n * @param {Object} props - Component props\n * @param {string} props.username - The username to display in the welcome message\n * @param {number} props.balance - The user's reset balance\n * @param {function} props.onClose - Function to call when the popup is closed\n */\nconst WelcomePopup = ({ username, balance, onClose }) => {\n  return (\n    <div className={styles.overlay}>\n      <div className={styles.popup}>\n        <div className={styles.header}>\n          <h2>Welcome, {username}!</h2>\n          <button className={styles.closeButton} onClick={onClose}></button>\n        </div>\n        <div className={styles.content}>\n          <p className={styles.message}>\n            Your balance has been reset to:\n          </p>\n          <p className={styles.balance}>\n            <span className={styles.coinIcon}>{ICONS.COIN}</span>\n            <span className={styles.balanceAmount}>{balance}</span>\n          </p>\n          <p className={styles.subtext}>\n            Thank you for participating in the <span className={styles.inlineGameName}>In Between <span className={styles.inlineLiveTag}>LIVE</span></span> beta program. Your feedback is valuable as we continue to enhance the gaming experience.\n          </p>\n        </div>\n        <div className={styles.footer}>\n          <button className={styles.actionButton} onClick={onClose}>\n            Let's Play!\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomePopup;\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport WelcomePopup from '../components/common/WelcomePopup';\nimport { API_URL } from '../config';\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showWelcomePopup, setShowWelcomePopup] = useState(false);\n  \n  // Get socket from socket context to listen for balance updates\n  const socketData = useSocket();\n  const socket = socketData?.socket;\n\n  // Listen for balance updates from the server\n  useEffect(() => {\n    if (socket && user) {\n      // Listen for balance updates\n      socket.on('balanceUpdate', (data) => {\n        console.log(`[Auth] Balance update: ${data.balance}`);\n        if (data && typeof data.balance === 'number') {\n          // Update user with new balance\n          const updatedUser = {\n            ...user,\n            balance: data.balance\n          };\n          \n          // Update state and local storage\n          setUser(updatedUser);\n          localStorage.setItem('user', JSON.stringify(updatedUser));\n          console.log(`[Auth] User balance updated: ${data.balance}`);\n          \n        }\n      });\n      \n      // Clean up listener on unmount\n      return () => {\n        socket.off('balanceUpdate');\n      };\n    }\n  }, [socket, user]);\n\n  // Function to fetch user data from the /me endpoint\n  const fetchUserData = async () => {\n    if (!token) return null;\n    \n    try {\n      console.log('[Auth] Fetching user data from /me endpoint');\n      const response = await fetch(`${API_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const data = await response.json();\n      console.log('[Auth] User data fetched successfully');\n      return data.user;\n    } catch (error) {\n      console.error('[Auth] Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  // Effect to load initial session from localStorage (token only)\n  useEffect(() => {\n    try {\n      // Check for stored token on mount\n      const storedToken = localStorage.getItem('token');\n      \n      if (storedToken) {\n        console.log('[Auth] Token found in localStorage, restoring session');\n        setToken(storedToken);\n        // We'll fetch the user data in the next useEffect\n      }\n    } catch (error) {\n      console.error('[Auth] Error restoring session:', error);\n      logout(); // Clear potentially corrupted data\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  \n  // Effect to fetch user data when token changes or on initial load\n  useEffect(() => {\n    console.log('[Auth] useEffect for fetchUserData triggered', { hasToken: !!token, isLoading: loading });\n    \n    if (!token || loading) {\n      console.log('[Auth] Skipping fetchUserData - no token or still loading');\n      return;\n    }\n    \n    // Track if the component is mounted to prevent state updates after unmount\n    let isMounted = true;\n    \n    const loadUserData = async () => {\n      // Always fetch fresh user data when we have a token\n      console.log('[Auth] Fetching fresh user data from /me endpoint');\n      const userData = await fetchUserData();\n      if (userData && isMounted) {\n        console.log('[Auth] User data received:', userData);\n        setUser(userData);\n        console.log('[Auth] User data loaded from /me endpoint');\n      } else {\n        console.log('[Auth] No user data received or component unmounted', { userData, isMounted });\n        // If we couldn't get user data but have a token, something is wrong\n        if (isMounted && !userData) {\n          console.error('[Auth] Failed to fetch user data with valid token');\n          // Consider logging out the user if we can't get their data\n          // logout();\n        }\n      }\n    };\n    \n    loadUserData();\n    \n    // Cleanup function to prevent state updates after unmount\n    return () => {\n      isMounted = false;\n    };\n  }, [token, loading]); // Only depend on token and loading, not user\n\n  const login = async (userData, newToken) => {\n    console.log(`[Auth] Login: ${userData.username}`);\n    \n    if (!userData || !userData.username || !userData.id || typeof userData.balance !== 'number') {\n      console.error('[Auth] Invalid user data:', userData);\n      throw new Error('Invalid user data provided');\n    }\n\n    if (!newToken) {\n      console.error('[Auth] No token provided');\n      throw new Error('No authentication token provided');\n    }\n    \n    try {\n      // Set initial user data for immediate UI feedback\n      const initialUserData = {\n        username: userData.username,\n        id: userData.id,\n        balance: userData.balance\n      };\n      \n      // Store only the token in localStorage\n      setUser(initialUserData);\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n      console.log(`[Auth] Login successful: ${initialUserData.username}`);\n      \n      // Show welcome popup when user logs in\n      setShowWelcomePopup(true);\n      \n      // Fetch complete user data from /me endpoint\n      setTimeout(async () => {\n        const completeUserData = await fetchUserData();\n        if (completeUserData) {\n          setUser(completeUserData);\n          console.log('[Auth] Updated user data with complete profile');\n        }\n      }, 500); // Small delay to ensure token is set\n      \n    } catch (error) {\n      console.error('[Auth] Error during login:', error);\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    console.log('[Auth] Logout');\n    \n    // Clear state\n    setUser(null);\n    setToken(null);\n    setShowWelcomePopup(false);\n    \n    // Clear localStorage (only token is stored now)\n    localStorage.removeItem('token');\n    // Remove any legacy user data that might still be in localStorage\n    localStorage.removeItem('user');\n    \n    console.log('[Auth] User logged out, all data cleared');\n  };\n\n  if (loading) {\n    return null; // or a loading spinner\n  }\n  \n  const handleCloseWelcomePopup = () => {\n    setShowWelcomePopup(false);\n  };\n\n  // Function to refresh user data from the /me endpoint\n  const refreshUserData = async () => {\n    console.log('[Auth] Manually refreshing user data');\n    const userData = await fetchUserData();\n    if (userData) {\n      setUser(userData);\n      console.log('[Auth] User data refreshed successfully');\n      return userData;\n    }\n    console.log('[Auth] Failed to refresh user data');\n    return null;\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, refreshUserData, loading }}>\n      {children}\n      {showWelcomePopup && user && (\n        <WelcomePopup \n          username={user.username} \n          balance={user.balance} \n          onClose={handleCloseWelcomePopup} \n        />\n      )}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (!node.bufferSource) {\n        return self;\n      }\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Create a new panner node if one doesn't already exist.\n        var panner = sound._panner;\n        if (!panner) {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n          panner = sound._panner\n        }\n\n        // Update the panner values or create a new panner if none exists.\n        panner.coneInnerAngle = pa.coneInnerAngle;\n        panner.coneOuterAngle = pa.coneOuterAngle;\n        panner.coneOuterGain = pa.coneOuterGain;\n        panner.distanceModel = pa.distanceModel;\n        panner.maxDistance = pa.maxDistance;\n        panner.refDistance = pa.refDistance;\n        panner.rolloffFactor = pa.rolloffFactor;\n        panner.panningModel = pa.panningModel;\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","import { Howl } from 'howler';\n\n/**\n * Sound Service for managing game audio\n * Uses Howler.js for cross-browser audio playback\n */\nclass SoundService {\n  constructor() {\n    this.sounds = {};\n    this.muted = false; // Default state, will be updated from preferences\n    this.initialized = false;\n    this.categories = ['ui']; // Only load UI sounds for now\n    this.lastPlayedTime = {}; // Track when each sound was last played for debouncing\n    this.debounceTime = 500; // Debounce time in milliseconds (half a second)\n    this.audioUnlocked = false; // Track if audio has been unlocked for mobile\n    \n    // Get API URL from environment or use localhost as fallback\n    this.API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    \n    // Only initialize in browser environment\n    if (typeof window !== 'undefined') {\n      // Initialize on next tick to avoid SSR issues\n      setTimeout(() => {\n        this.initialize();\n        this._setupMobileAudioUnlock();\n      }, 0);\n    }\n  }\n\n  /**\n   * Initialize the sound service and load all sound categories\n   */\n  initialize() {\n    if (this.initialized) return;\n    \n    // Load only the UI category for now\n    this.loadCategory('ui');\n    \n    // Mark as initialized since we're loading asynchronously\n    this.initialized = true;\n  }\n  \n  /**\n   * Load sounds for a specific category\n   * @param {string} category - Sound category to load\n   */\n  loadCategory(category) {\n    // Skip if already loaded\n    if (this.sounds[category]) return;\n    \n    // Define sprites for each category\n    const sprites = {};\n    \n    // UI category sprites\n    if (category === 'ui') {\n      // Match the exact timing from ui-sounds.json\n      sprites.join = [0, 1000];     // 0 to 1.0 seconds\n      sprites.leave = [1500, 1000]; // 1.5 to 2.5 seconds\n    }\n    \n    // Create the Howl instance with the sprites\n    this.sounds[category] = new Howl({\n      src: [\n        `${this.API_URL}/assets/audio/${category}-sounds.mp3`,\n        `${this.API_URL}/assets/audio/${category}-sounds.webm`\n      ],\n      sprite: sprites,\n      preload: true,\n      // Use HTML5 Audio on mobile for better compatibility\n      html5: this._isMobileDevice(),\n      format: ['mp3', 'webm'],\n      pool: 10 // Increase the pool size to avoid exhaustion\n    });\n  }\n\n  /**\n   * Play a sound effect\n   * @param {string} sound - Sound name (format: category.name or just name for UI category)\n   * @param {number} [volume=1] - Volume level (0-1)\n   * @returns {number|undefined} Sound ID if played, undefined if not\n   */\n  play(sound, volume = 1) {\n    // Skip if muted\n    if (this.muted) return;\n    \n    // Initialize if not already done\n    if (!this.initialized) this.initialize();\n    \n    let category, soundName;\n    if (sound.includes('.')) {\n      [category, soundName] = sound.split('.');\n    } else {\n      category = 'ui';\n      soundName = sound;\n    }\n    \n    if (!this.sounds[category]) {\n      // Try to load the category if it's not loaded yet\n      this.loadCategory(category);\n      return;\n    }\n    \n    // Create a unique key for this sound\n    const soundKey = `${category}.${soundName}`;\n    \n    // Check if this sound was played recently (debounce)\n    const now = Date.now();\n    const lastPlayed = this.lastPlayedTime[soundKey] || 0;\n    if (now - lastPlayed < this.debounceTime) {\n      return;\n    }\n    \n    // Update the last played time\n    this.lastPlayedTime[soundKey] = now;\n    \n    // Set volume and play the sound\n    this.sounds[category].volume(volume);\n    return this.sounds[category].play(soundName);\n  }\n\n  /**\n   * Set muted state\n   * @param {boolean} muted - Whether sound should be muted\n   */\n  setMuted(muted) {\n    this.muted = muted;\n    \n    // Update all sound instances\n    Object.values(this.sounds).forEach(sound => {\n      if (sound && sound.mute) {\n        sound.mute(muted);\n      }\n    });\n  }\n  \n  /**\n   * Sync with user preferences\n   * @param {Object} preferences - User preferences object\n   */\n  syncWithPreferences(preferences) {\n    if (preferences && typeof preferences.muted !== 'undefined') {\n      this.setMuted(preferences.muted);\n    }\n  }\n  \n  /**\n   * Setup audio unlock for mobile devices\n   * @private\n   */\n  _setupMobileAudioUnlock() {\n    if (typeof window === 'undefined' || !this._isMobileDevice()) return;\n    \n    const unlockAudio = () => {\n      if (this.audioUnlocked) return;\n      \n      // Play a silent sound to unlock audio on mobile\n      const silence = new Audio();\n      silence.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAABIgD///////////////////////////////////////////8AAAA8TEFNRTMuMTAwAQAAAAAAAAAAABSAJAJAQgAAgAAAAiIkfC3/////////////////////';  \n      silence.load();\n      silence.play().then(() => {\n        this.audioUnlocked = true;\n        document.body.removeEventListener('touchstart', unlockAudio);\n        document.body.removeEventListener('touchend', unlockAudio);\n        document.body.removeEventListener('click', unlockAudio);\n      }).catch(e => {\n        // Silent failure - we'll try again on next user interaction\n      });\n    };\n    \n    // Add event listeners to unlock audio on user interaction\n    document.body.addEventListener('touchstart', unlockAudio, false);\n    document.body.addEventListener('touchend', unlockAudio, false);\n    document.body.addEventListener('click', unlockAudio, false);\n  }\n  \n  /**\n   * Check if current device is mobile\n   * @private\n   * @returns {boolean} True if mobile device\n   */\n  _isMobileDevice() {\n    if (typeof navigator === 'undefined') return false;\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); // iPad detection\n  }\n\n}\n\n// Create a singleton instance\nconst soundService = new SoundService();\n\nexport default soundService;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useSocket } from './SocketContext';\nimport { useAuth } from './AuthContext';\nimport { API_URL } from '../config';\nimport soundService from '../services/SoundService';\n\n// Import shared type definitions\n/** @typedef {import('../../../shared/types').LobbyState} LobbyState */\n/** @typedef {import('../../../shared/types').GameListItem} GameListItem */\n\n// Create context\nconst LobbyContext = createContext();\n\nexport const useLobby = () => useContext(LobbyContext);\n\n/**\n * @param {Object} props\n * @param {React.ReactNode} props.children\n * @param {(gameId: string) => void} [props.onGameJoined]\n */\nexport const LobbyProvider = ({ children, onGameJoined }) => {\n  const { socket, isConnected, setError } = useSocket();\n  const { token, refreshUserData } = useAuth();\n  \n  // Initialize sound service\n  useEffect(() => {\n    soundService.initialize();\n  }, []);\n  \n  // Define initial lobby state\n  /** @type {LobbyState} */\n  const initialLobbyState = {\n    playerName: '',\n    gameList: [],\n    gameId: null,\n    gameState: null,  // Store the game state received from server\n    view: 'lobby', // 'lobby' or 'game'\n    error: null,\n    isAuthenticated: false\n  };\n\n  // Single consolidated lobby state\n  /** @type {[LobbyState, React.Dispatch<React.SetStateAction<LobbyState>>]} */\n  const [lobbyState, setLobbyState] = useState(initialLobbyState);\n\n  // Helper functions to update specific parts of the state\n  const setPlayerName = (name) => {\n    setLobbyState(prevState => ({ ...prevState, playerName: name }));\n  };\n\n  const setGameId = (id) => {\n    setLobbyState(prevState => ({ ...prevState, gameId: id }));\n  };\n\n  const setView = (newView) => {\n    setLobbyState(prevState => ({ ...prevState, view: newView }));\n  };\n  \n  // Fetch initial game list via HTTP when component mounts or token changes\n  useEffect(() => {\n    const fetchGameList = async () => {\n      if (!token) return;\n      \n      try {\n        console.log('[Lobby] Fetching initial game list via HTTP');\n        const response = await fetch(`${API_URL}/games`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        \n        if (!response.ok) {\n          throw new Error(`HTTP error ${response.status}`);\n        }\n        \n        const games = await response.json();\n        console.log(`[Lobby] Initial games fetched via HTTP: ${games.length}`);\n        setLobbyState(prevState => ({ ...prevState, gameList: games }));\n      } catch (error) {\n        console.error('[Lobby] Error fetching game list via HTTP:', error);\n        // Don't set error state here - we'll fall back to WebSocket\n      }\n    };\n    \n    fetchGameList();\n  }, [token]);\n  \n  // Setup socket event listeners for lobby-related events\n  useEffect(() => {\n    if (!socket) {\n      // No socket connection available\n      return;\n    }\n    \n    // Set up socket event listeners for lobby functionality\n    \n    // Game list updates\n    socket.on('gameList', (games) => {\n      console.log(`[Lobby] Games available: ${games.length}`);\n      setLobbyState(prevState => ({ ...prevState, gameList: games }));\n    });\n    \n    // Game joined response (after creation or joining)\n    socket.on('gameJoined', (data) => {\n      console.log(`[Lobby] Game joined event received:`, data);\n      try {\n        if (!data || !data.game) {\n          console.error('[Lobby] No game data in gameJoined event:', data);\n          throw new Error('No game data received');\n        }\n        \n        if (!data.game.id || !data.game.phase) {\n          console.error('[Lobby] Invalid game structure in gameJoined event:', data.game);\n          throw new Error('Invalid game data structure');\n        }\n        \n        console.log(`[Lobby] Setting game state and changing view to game for: ${data.game.id}`);\n        \n        // Force a complete state reset to ensure clean transition\n        const newState = {\n          playerName: lobbyState.playerName,\n          gameList: lobbyState.gameList,\n          gameId: data.game.id,\n          gameState: data.game,\n          view: 'game',\n          error: null,\n          isAuthenticated: lobbyState.isAuthenticated\n        };\n        \n        console.log('[Lobby] New lobby state after game join:', newState);\n        setLobbyState(newState);\n        \n        // Game state updated successfully\n        console.log(`[Lobby] Successfully joined game: ${data.game.id}`);\n        \n        // Notify parent component\n        if (onGameJoined) {\n          console.log(`[Lobby] Notifying parent component of game join: ${data.game.id}`);\n          onGameJoined(data.game.id);\n        }\n      } catch (error) {\n        console.error('[Lobby] Error processing game join:', error);\n        setError(`Failed to join game: ${error.message}`);\n        setLobbyState(prevState => ({ ...prevState, error: error.message }));\n      }\n    });\n    \n    // Error handling\n    socket.on('error', (error) => {\n      console.error('[Lobby] Socket error:', error);\n      setError(error.message || 'An error occurred');\n      setLobbyState(prevState => ({ ...prevState, error: error.message }));\n    });\n    \n    // Clean up listeners\n    return () => {\n      // Remove all event listeners when component unmounts\n      socket.off('gameList');\n      socket.off('gameJoined');\n      socket.off('error');\n    };\n  }, [socket, onGameJoined]);\n  \n  /**\n   * Create a new game with the current player as host\n   */\n  const createGame = () => {\n    console.log('[Lobby] Creating new game');\n    if (!socket) {\n      const error = 'Not connected to server';\n      console.error('[Lobby]', error);\n      setError(error);\n      return;\n    }\n    \n    if (socket && isConnected) {\n      // First check if we're already in a game and need to leave it\n      if (lobbyState.gameId) {\n        console.log(`[Lobby] Already in game ${lobbyState.gameId}, leaving before creating new game`);\n        // Leave the current game first\n        const currentGameId = lobbyState.gameId;\n        socket.emit('leaveGameLobby', { gameId: currentGameId });\n      }\n      \n      // Reset state completely - create a fresh state object\n      const freshState = {\n        playerName: lobbyState.playerName,\n        gameList: lobbyState.gameList,\n        gameId: null,\n        gameState: null,\n        view: 'lobby',\n        error: null,\n        isAuthenticated: lobbyState.isAuthenticated\n      };\n      \n      console.log('[Lobby] Resetting state before creating game:', freshState);\n      setLobbyState(freshState);\n      \n      // Play join sound when creating a game\n      console.log('[LobbyContext] Creating game, playing join sound');\n      soundService.play('ui.join');\n      \n      // Create the game after a short delay to ensure state is reset\n      setTimeout(() => {\n        console.log('[Lobby] Emitting createGame event');\n        socket.emit('createGame');\n      }, 200);\n    } else {\n      const error = 'Not connected to server';\n      console.error('[Lobby]', error);\n      setError(error);\n    }\n  };\n  \n  /**\n   * Join an existing game by ID\n   * @param {string} gameIdToJoin - The ID of the game to join\n   */\n  const joinGame = (gameIdToJoin) => {\n    if (!socket) {\n      const error = 'Not connected to server';\n      console.error('[Lobby]', error);\n      setError(error);\n      return;\n    }\n    \n    if (!gameIdToJoin) {\n      setError('Game ID is required');\n      return;\n    }\n    \n    if (socket && isConnected) {\n      // First check if we're already in a game and need to leave it\n      if (lobbyState.gameId) {\n        console.log(`[Lobby] Already in game ${lobbyState.gameId}, leaving before joining new game`);\n        // Leave the current game first\n        const currentGameId = lobbyState.gameId;\n        socket.emit('leaveGameLobby', { gameId: currentGameId });\n      }\n      \n      // Reset state completely - create a fresh state object\n      const freshState = {\n        playerName: lobbyState.playerName,\n        gameList: lobbyState.gameList,\n        gameId: null,\n        gameState: null,\n        view: 'lobby',\n        error: null,\n        isAuthenticated: lobbyState.isAuthenticated\n      };\n      \n      console.log('[Lobby] Resetting state before joining game:', freshState);\n      setLobbyState(freshState);\n      \n      // Play join sound when joining a game\n      console.log('[LobbyContext] Joining game, playing join sound');\n      soundService.play('ui.join');\n      \n      // Join the game after a short delay to ensure state is reset\n      setTimeout(() => {\n        console.log(`[Lobby] Emitting joinGame event for game: ${gameIdToJoin}`);\n        socket.emit('joinGame', { gameId: gameIdToJoin });\n      }, 200);\n    } else {\n      setError('Not connected to server');\n    }\n  };\n  \n  /**\n   * Return to the lobby from a game\n   * Also fetches the updated user balance\n   */\n  const returnToLobby = () => {\n    console.log('[Lobby] Returning to lobby');\n    \n    // Get the current gameId before resetting state\n    const currentGameId = lobbyState.gameId;\n    \n    // Play leave sound when returning to lobby\n    console.log('[LobbyContext] Returning to lobby, playing leave sound');\n    soundService.play('ui.leave');\n    \n    // Reset the lobby state completely\n    setLobbyState(prevState => ({\n      playerName: prevState.playerName,\n      gameList: prevState.gameList,\n      gameId: null,\n      gameState: null,  // Fully clear game state\n      view: 'lobby',\n      error: null,\n      isAuthenticated: prevState.isAuthenticated\n    }));\n    \n    // Then fetch the updated user data and game list\n    if (socket && isConnected) {\n      console.log('[Lobby] Emitting events to refresh lobby data');\n      \n      // Tell the server we're leaving the game (new event)\n      if (currentGameId) {\n        socket.emit('leaveGameLobby', { gameId: currentGameId });\n      }\n      \n      // Fetch updated user data using the /me endpoint\n      refreshUserData();\n      \n      // Request fresh game list\n      socket.emit('getGameList');\n    }\n  };\n  \n  /**\n   * @typedef {Object} LobbyContextValue\n   * @property {LobbyState} lobbyState - Complete lobby state object\n   * @property {(name: string) => void} setPlayerName - Update player name\n   * @property {() => void} createGame - Function to create a new game\n   * @property {(gameId: string) => void} joinGame - Function to join a game\n   * @property {() => void} returnToLobby - Function to return to lobby\n   */\n  \n  /** @type {LobbyContextValue} */\n  const value = {\n    lobbyState,\n    setPlayerName,\n    createGame,\n    joinGame,\n    returnToLobby\n  };\n  \n  return (\n    <LobbyContext.Provider value={value}>\n      {children}\n    </LobbyContext.Provider>\n  );\n};\n","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext.jsx';\nimport soundService from '../services/SoundService';\n\nconst PreferencesContext = createContext(null);\n\n// Helper function to format image URLs consistently across the application\nconst formatImageUrl = (url) => {\n  if (!url) return null;\n  \n  // Get API URL from environment or use localhost as fallback\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // If the URL already starts with http, use it as is\n  if (url.startsWith('http')) {\n    return url;\n  } \n  // If the URL is a relative path starting with /files/, use it as is with API_URL\n  else if (url.startsWith('/files/')) {\n    return `${API_URL}${url}`;\n  }\n  // If the URL contains /uploads/, replace it with /files/\n  else if (url.includes('/uploads/')) {\n    // Extract the type and filename from the path\n    const parts = url.split('/');\n    const filename = parts.pop();\n    const type = parts[parts.length - 1]; // images, audio, etc.\n    return `${API_URL}/files/${type}/${filename}`;\n  }\n  // Otherwise, just append the URL to the API_URL\n  else {\n    return `${API_URL}${url}`;\n  }\n};\n\n// Helper function to format preferences data with proper image URLs\nconst formatPreferencesData = (data) => {\n  if (!data) return {};\n  \n  return {\n    ...data,\n    profileImg: formatImageUrl(data.profileImg),\n    twoSecondPotGif: formatImageUrl(data.twoSecondPotGif),\n    twoSecondPotMp3: data.twoSecondPotMp3 // Audio files don't need the same formatting\n  };\n};\n\nexport const PreferencesProvider = ({ children }) => {\n  const [preferences, setPreferences] = useState({\n    profileImg: null,\n    autoAnte: false,\n    muted: false,\n    twoSecondPotGif: null,\n    twoSecondPotMp3: null\n  });\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuth();\n  \n  // Define loadPreferences function with useCallback to handle dependencies properly\n  const loadPreferences = React.useCallback(async () => {\n    if (!user) {\n      setPreferences({ autoAnte: false });\n      setLoading(false);\n      return;\n    }\n    \n    console.log('[Preferences] Loading preferences for user:', user.username);\n      \n    try {\n      setLoading(true);\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        setLoading(false);\n        return;\n      }\n      \n      const response = await fetch(`${API_URL}/preferences`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to load preferences');\n      }\n      \n      const data = await response.json();\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      const finalPreferences = formattedData || { autoAnte: false, muted: false };\n      setPreferences(finalPreferences);\n      \n      // Sync sound service with loaded preferences\n      if (typeof finalPreferences.muted !== 'undefined') {\n        soundService.setMuted(finalPreferences.muted);\n      }\n    } catch (error) {\n      console.error('[Preferences] Error loading preferences:', error);\n      // Set default preferences on error\n      setPreferences({ autoAnte: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  \n  // Load preferences from the server when the user changes or component mounts\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n    }\n  }, [user, loadPreferences]);\n  \n  // Update a preference\n  const updatePreference = async (key, value) => {\n    if (!user) {\n      console.error('[Preferences] Cannot update preferences: User not logged in');\n      return false;\n    }\n    \n    try {\n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      // Optimistically update the UI\n      setPreferences(prev => ({\n        ...prev,\n        [key]: value\n      }));\n      \n      // If updating the muted preference, sync with sound service\n      if (key === 'muted') {\n        console.log(`[Preferences] Updating sound muted state to: ${value}`);\n        soundService.setMuted(value);\n      }\n      \n      // Send the update to the server\n      const response = await fetch(`${API_URL}/preferences/${key}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ value })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update ${key} preference`);\n      }\n      \n      const data = await response.json();\n      console.log(`[Preferences] Updated ${key}:`, data);\n      \n      // Format preferences data with proper image URLs\n      const formattedData = formatPreferencesData(data);\n      \n      console.log(`[Preferences] Formatted ${key} response:`, formattedData);\n      \n      // Update with the formatted server response (in case there were any changes)\n      setPreferences(formattedData);\n      return true;\n    } catch (error) {\n      console.error(`[Preferences] Error updating ${key}:`, error);\n      \n      // Revert the optimistic update on error\n      await loadPreferences();\n      return false;\n    }\n  };\n  \n  // Toggle auto-ante preference\n  const toggleAutoAnte = async () => {\n    const newValue = !preferences.autoAnte;\n    return await updatePreference('autoAnte', newValue);\n  };\n\n  // Toggle mute preference\n  const toggleMute = async () => {\n    const newValue = !preferences.muted;\n    return await updatePreference('muted', newValue);\n  };\n\n  // Upload file for two-second-pot-gif preference\n  const uploadTwoSecondPotGif = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for GIF upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting GIF upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending GIF upload request to: ${API_URL}/preferences/twoSecondPotGif`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotGif`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] GIF upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload GIF file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded GIF:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted GIF URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotGif: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading GIF:', error);\n      return false;\n    }\n  };\n\n  // Upload file for two-second-pot-mp3 preference\n  const uploadTwoSecondPotMp3 = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for MP3 upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting MP3 upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending MP3 upload request to: ${API_URL}/preferences/twoSecondPotMp3`);\n      \n      const response = await fetch(`${API_URL}/preferences/twoSecondPotMp3`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] MP3 upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload MP3 file: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded MP3:', data);\n      \n      // Update preferences with the file URL\n      setPreferences(prev => ({\n        ...prev,\n        twoSecondPotMp3: data.fileUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading MP3:', error);\n      return false;\n    }\n  };\n  \n  // Upload file for profile image preference\n  const uploadProfileImg = async (file) => {\n    if (!file) {\n      console.error('[Preferences] No file provided for profile image upload');\n      return false;\n    }\n    \n    console.log('[Preferences] Starting profile image upload:', {\n      fileName: file.name,\n      fileSize: file.size,\n      fileType: file.type\n    });\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      // Get API URL from environment or use localhost as fallback\n      const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        console.error('[Preferences] No token available');\n        return false;\n      }\n      \n      console.log(`[Preferences] Sending profile image upload request to: ${API_URL}/preferences/profileImg`);\n      \n      const response = await fetch(`${API_URL}/preferences/profileImg`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      \n      const responseText = await response.text();\n      console.log('[Preferences] Profile image upload response:', {\n        status: response.status,\n        statusText: response.statusText,\n        responseText\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to upload profile image: ${responseText}`);\n      }\n      \n      // Parse the response text as JSON\n      const data = responseText ? JSON.parse(responseText) : {};\n      console.log('[Preferences] Uploaded profile image:', data);\n      \n      // Format the file URL for consistency\n      const formattedUrl = formatImageUrl(data.fileUrl);\n      console.log('[Preferences] Formatted profile image URL:', formattedUrl);\n      \n      // Update preferences with the formatted file URL\n      setPreferences(prev => ({\n        ...prev,\n        profileImg: formattedUrl\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error('[Preferences] Error uploading profile image:', error);\n      return false;\n    }\n  };\n  \n  // No test upload function needed\n  \n  return (\n    <PreferencesContext.Provider \n      value={{ \n        preferences, \n        updatePreference, \n        toggleAutoAnte,\n        toggleMute,\n        uploadTwoSecondPotGif,\n        uploadTwoSecondPotMp3,\n        uploadProfileImg,\n        loading \n      }}\n    >\n      {children}\n    </PreferencesContext.Provider>\n  );\n};\n\nexport const usePreferences = () => {\n  const context = useContext(PreferencesContext);\n  if (!context) {\n    throw new Error('usePreferences must be used within a PreferencesProvider');\n  }\n  return context;\n};\n","import React from 'react';\nimport styles from './AppHeader.module.css';\n\n/**\n * A shared header component for the In-Between game\n * Used across auth and lobby screens for consistent branding\n */\nconst AppHeader = () => {\n  return (\n    <div className={styles.headerContainer}>\n      <h1 className={styles.gameTitle}>\n        In Between <span className={styles.liveTag}>LIVE</span>\n      </h1>\n    </div>\n  );\n};\n\nexport default AppHeader;\n","import React from 'react';\nimport styles from './CoinIcon.module.css';\nimport { ICONS } from '../../constants/UIConstants';\n\n/**\n * A reusable coin icon component to replace dollar signs\n * @param {Object} props - Component props\n * @param {string} [props.size='small'] - Size of the coin icon ('small', 'medium', 'large')\n * @param {string} [props.className] - Additional CSS class to apply\n */\nconst CoinIcon = ({ size = 'small', className = '' }) => {\n  return (\n    <span className={`${styles.coinIcon} ${styles[size]} ${className}`}>\n      {ICONS.COIN}\n    </span>\n  );\n};\n\nexport default CoinIcon;\n","import React from 'react';\nimport styles from './CurrencyAmount.module.css';\nimport CoinIcon from './CoinIcon.jsx';\n\n/**\n * A reusable component that displays currency amounts with consistent styling\n * @param {Object} props - Component props\n * @param {number} props.amount - The amount to display\n * @param {string} props.size - The size of the coin icon (small, medium, large)\n * @param {string} props.background - Optional custom background style (e.g. 'dark', 'pill')\n * @param {string} props.customClass - Optional custom CSS class to apply\n */\nconst CurrencyAmount = ({ amount, size, background, customClass }) => {\n  // Determine which CSS classes to apply\n  const containerClasses = [\n    styles.currencyAmount,\n    background === 'dark' ? styles.darkBackground : '',\n    background === 'pill' ? styles.pillBackground : '',\n    customClass || ''\n  ].filter(Boolean).join(' ');\n  \n  return (\n    <span className={containerClasses}>\n      <CoinIcon size={size} />\n      <span>{amount}</span>\n    </span>\n  );\n};\n\nexport default CurrencyAmount;\n","import React from 'react';\nimport styles from './styles/ToggleSwitch.module.css';\n\nconst ToggleSwitch = ({ isChecked, onChange, label }) => {\n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={isChecked}\n          onChange={onChange}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        {label && <span className={styles.toggleText}>{label}</span>}\n      </label>\n    </div>\n  );\n};\n\nexport default ToggleSwitch;\n","import React, { useState, useRef } from 'react';\nimport styles from './styles/FileUpload.module.css';\n\nconst FileUpload = ({ \n  onUpload, \n  currentFileUrl, \n  acceptedFileTypes, \n  label,\n  previewType = 'image' // 'image', 'audio', or 'none'\n}) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null);\n  \n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.error('[FileUpload] No file selected');\n      return;\n    }\n    \n    console.log('[FileUpload] File selected:', {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n    \n    setError(null);\n    setIsUploading(true);\n    \n    try {\n      console.log('[FileUpload] Calling onUpload function');\n      const success = await onUpload(file);\n      console.log('[FileUpload] Upload result:', success);\n      \n      if (!success) {\n        console.error('[FileUpload] Upload failed');\n        setError('Failed to upload file. Please try again.');\n      } else {\n        console.log('[FileUpload] Upload successful');\n      }\n    } catch (err) {\n      console.error('[FileUpload] Error uploading file:', err);\n      setError('An error occurred during upload.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  const handleButtonClick = () => {\n    fileInputRef.current.click();\n  };\n  \n  const renderPreview = () => {\n    if (!currentFileUrl) return null;\n    \n    if (previewType === 'image') {\n      return (\n        <div className={styles.previewContainer}>\n          <img \n            src={currentFileUrl} \n            alt=\"Preview\" \n            className={styles.imagePreview} \n          />\n        </div>\n      );\n    } else if (previewType === 'audio') {\n      return (\n        <div className={styles.previewContainer}>\n          <audio \n            controls \n            src={currentFileUrl} \n            className={styles.audioPreview}\n          >\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      );\n    }\n    \n    return null;\n  };\n  \n  return (\n    <div className={styles.fileUploadContainer}>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileChange}\n        accept={acceptedFileTypes}\n        className={styles.fileInput}\n      />\n      \n      {currentFileUrl && renderPreview()}\n      \n      <button \n        type=\"button\" \n        onClick={handleButtonClick}\n        className={`${styles.uploadButton} ${currentFileUrl ? styles.changeButton : ''}`}\n        disabled={isUploading}\n      >\n        {isUploading ? 'Uploading...' : currentFileUrl ? `Change ${label}` : `Upload ${label}`}\n      </button>\n      \n      {error && (\n        <div className={styles.errorMessage}>\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport styles from './styles/PreferencesModal.module.css';\nimport ToggleSwitch from './ToggleSwitch.jsx';\nimport FileUpload from './FileUpload.jsx';\n\nconst PreferencesModal = ({ onClose }) => {\n  const { \n    preferences, \n    toggleAutoAnte,\n    toggleMute,\n    uploadTwoSecondPotGif, \n    uploadTwoSecondPotMp3, \n    uploadProfileImg,\n    loading \n  } = usePreferences();\n\n  if (loading) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.loadingMessage}>Loading preferences...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.modalOverlay}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Preferences</h2>\n          <button className={styles.closeButton} onClick={onClose}></button>\n        </div>\n        \n        \n        <div className={styles.settingsContainer}>\n            \n            {/* Profile Image Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Profile Image</h4>\n                <p>Upload a profile image to personalize your account</p>\n              </div>\n              <FileUpload\n                onUpload={uploadProfileImg}\n                currentFileUrl={preferences.profileImg}\n                acceptedFileTypes=\"image/jpeg,image/png,image/gif\"\n                label=\"Image\"\n                previewType=\"image\"\n              />\n            </div>\n            \n            {/* Mute Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Mute Sound</h4>\n                <p>Mute all game sound effects</p>\n              </div>\n              <ToggleSwitch \n                isChecked={preferences.muted}\n                onChange={toggleMute}\n              />\n            </div>\n            \n            {/* Auto-Ante Setting */}\n            <div className={styles.settingItem}>\n              <div className={styles.settingDescription}>\n                <h4>Auto-Ante</h4>\n                <p>Automatically ante up when a new round begins</p>\n              </div>\n              <ToggleSwitch \n                isChecked={preferences.autoAnte}\n                onChange={toggleAutoAnte}\n              />\n            </div>\n            \n            {/* Two Second Pot GIF Setting */}\n            <div className={styles.settingItem} style={{ position: 'relative', border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px' }}>\n              <div style={{\n                position: 'absolute',\n                top: '-12px',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#FFD700',\n                color: '#333',\n                padding: '2px 10px',\n                borderRadius: '4px',\n                fontWeight: 'bold',\n                fontSize: '14px'\n              }}>\n                COMING SOON\n              </div>\n              <div className={styles.settingDescription}>\n                <h4>Two Second POT GIF</h4>\n                <p>Upload a GIF to play when you slam the POT button</p>\n              </div>\n              <FileUpload\n                onUpload={uploadTwoSecondPotGif}\n                currentFileUrl={preferences.twoSecondPotGif}\n                acceptedFileTypes=\"image/gif\"\n                label=\"GIF\"\n                previewType=\"image\"\n              />\n            </div>\n            \n            {/* Two Second Pot MP3 Setting */}\n            <div className={styles.settingItem} style={{ position: 'relative', border: '2px dashed #FFD700', padding: '15px', borderRadius: '8px' }}>\n              <div style={{\n                position: 'absolute',\n                top: '-12px',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#FFD700',\n                color: '#333',\n                padding: '2px 10px',\n                borderRadius: '4px',\n                fontWeight: 'bold',\n                fontSize: '14px'\n              }}>\n                COMING SOON\n              </div>\n              <div className={styles.settingDescription}>\n                <h4>Two Second POT Sound</h4>\n                <p>Upload a sound to play when you slam the POT button</p>\n              </div>\n              <FileUpload\n                onUpload={uploadTwoSecondPotMp3}\n                currentFileUrl={preferences.twoSecondPotMp3}\n                acceptedFileTypes=\"audio/mpeg,audio/wav\"\n                label=\"Sound\"\n                previewType=\"audio\"\n              />\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PreferencesModal;\n","import React from 'react';\nimport styles from './styles/PreferencesButton.module.css';\n\nconst PreferencesButton = ({ onClick }) => {\n  return (\n    <button \n      className={styles.preferencesButton}\n      onClick={onClick}\n      aria-label=\"Preferences\"\n    >\n      <div className={styles.iconContainer}>\n        <svg className={styles.gearIcon} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n          <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n        </svg>\n      </div>\n      <span className={styles.buttonText}>Preferences</span>\n    </button>\n  );\n};\n\nexport default PreferencesButton;\n","import React from 'react';\nimport styles from './styles/UserAvatar.module.css';\n\n/**\n * UserAvatar component displays a user's profile image or their initials if no image is available.\n * It can be used in various contexts like the lobby, player list, results screen, etc.\n * \n * @param {Object} props - Component props\n * @param {Object} props.user - User object containing username and profileImg\n * @param {string} props.size - Size of the avatar ('small', 'medium', 'large')\n * @param {boolean} props.showName - Whether to display the username next to the avatar\n * @param {string} props.namePosition - Position of the username ('right', 'below')\n * @param {string} props.className - Additional CSS class for styling\n */\nconst UserAvatar = ({ \n  user, \n  size = 'medium', \n  showName = true, \n  namePosition = 'right',\n  className = ''\n}) => {\n  if (!user) return null;\n  \n  const { username, profileImg } = user;\n  const initials = getInitials(username || 'Unknown');\n  const sizeClass = styles[size] || styles.medium;\n  const containerClass = showName ? styles[`container${namePosition.charAt(0).toUpperCase() + namePosition.slice(1)}`] : '';\n  \n  // Format the image URL to point to the server\n  const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n  \n  // Handle different URL formats\n  let formattedImageUrl = null;\n  if (profileImg) {\n    // If the URL already starts with http, use it as is\n    if (profileImg.startsWith('http')) {\n      formattedImageUrl = profileImg;\n    } \n    // If the URL contains /uploads/, replace it with /files/\n    else if (profileImg.includes('/uploads/')) {\n      // Extract just the filename from the path\n      const filename = profileImg.split('/').pop();\n      formattedImageUrl = `${API_URL}/files/images/${filename}`;\n    }\n    // Otherwise, just append the URL to the API_URL\n    else {\n      formattedImageUrl = `${API_URL}${profileImg}`;\n    }\n  }\n\n  \n  return (\n    <div className={`${styles.userAvatarContainer} ${containerClass} ${className}`}>\n      <div className={`${styles.avatar} ${sizeClass}`}>\n        {formattedImageUrl ? (\n          <img \n            src={formattedImageUrl} \n            alt={`${username}'s avatar`} \n            className={styles.avatarImage}\n            onError={(e) => {\n              console.error(`Failed to load profile image for ${username}:`, e);\n              e.target.style.display = 'none';\n              e.target.nextSibling.style.display = 'flex';\n            }}\n          />\n        ) : null}\n        <div \n          className={styles.initialsPlaceholder}\n          style={{ display: formattedImageUrl ? 'none' : 'flex' }}\n        >\n          {initials}\n        </div>\n      </div>\n      \n      {showName && (\n        <div className={styles.username}>\n          {username || 'Unknown'}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Helper function to get initials from a name\nconst getInitials = (name) => {\n  if (!name) return '?';\n  \n  return name\n    .split(' ')\n    .map(part => part.charAt(0))\n    .join('')\n    .toUpperCase()\n    .substring(0, 2);\n};\n\nexport default UserAvatar;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport styles from './styles/Lobby.module.css';\nimport { useLobby } from '../contexts/LobbyContext.jsx';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { CircularProgress, Box, Typography, TextField, useMediaQuery, InputAdornment } from '@mui/material';\nimport AppHeader from './common/AppHeader';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PreferencesModal from './PreferencesModal.jsx';\nimport PreferencesButton from './PreferencesButton.jsx';\nimport UserAvatar from './UserAvatar.jsx';\n\nconst Lobby = () => {\n  // Get state and actions from lobby and auth contexts\n  const { lobbyState, createGame, joinGame } = useLobby();\n  const { error: lobbyError, gameList } = lobbyState;\n  const { user, logout } = useAuth();\n  const { isConnected } = useSocket();\n  const { preferences } = usePreferences();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showPreferences, setShowPreferences] = useState(false);\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n\n  // We'll handle loading state manually instead of using an effect\n\n  // Check user data and socket connection status\n  useEffect(() => {\n    try {\n      // Check if user exists and has required properties\n      if (!user) {\n        console.log('[Lobby] No user data found');\n        setError('Please log in to continue');\n        setIsLoading(false);\n        return;\n      }\n\n      if (!user.username || !user.id) {\n        console.error('[Lobby] Invalid user data:', user);\n        setError('Invalid user data');\n        logout(); // Clear invalid session\n        setIsLoading(false);\n        return;\n      }\n\n      console.log('[Lobby] Current user state:', {\n        username: user.username,\n        id: user.id\n      });\n\n      // Only stop loading when socket is connected\n      if (isConnected) {\n        console.log('[Lobby] Socket connected, ready to create/join games');\n        setIsLoading(false);\n        setError(null);\n        \n        // We've removed the localStorage approach since we fixed the core issue\n        // with duplicate event handlers in GameContext and LobbyContext\n      } else {\n        console.log('[Lobby] Waiting for socket connection...');\n        setIsLoading(true);\n        \n        // Set a timeout to prevent getting stuck on loading screen\n        const timeoutId = setTimeout(() => {\n          console.log('[Lobby] Socket connection timeout, proceeding anyway');\n          setIsLoading(false);\n        }, 3000); // 3 seconds timeout\n        \n        return () => clearTimeout(timeoutId);\n      }\n    } catch (err) {\n      console.error('[Lobby] Error processing user data:', err);\n      setError('Error loading user data');\n      logout(); // Clear potentially corrupted session\n      setIsLoading(false);\n    }\n  }, [user, logout, isConnected]);\n  \n  const handleCreateGame = () => {\n    if (!user?.id) {\n      setError('Please log in to create a game');\n      return;\n    }\n    \n    // First clear any errors\n    setError(null);\n    \n    // Show loading state\n    setIsLoading(true);\n    \n    // Simply call the createGame function directly\n    // Since we fixed the duplicate event handler issue, this works correctly now\n    createGame();\n  };\n  \n  const handleJoinGame = (gameId) => {\n    if (!user?.id) {\n      setError('Please log in to join a game');\n      return;\n    }\n    \n    // First clear any errors\n    setError(null);\n    \n    // Show loading state\n    setIsLoading(true);\n    \n    // Call the joinGame function with the selected game ID\n    joinGame(gameId);\n  };\n  \n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  // Filter games based on search query\n  const filteredGameList = useMemo(() => {\n    if (!searchQuery.trim() || !gameList) return gameList;\n    \n    const query = searchQuery.trim().toLowerCase();\n    return gameList.filter(game => \n      game.id.toLowerCase().includes(query)\n    );\n  }, [gameList, searchQuery]);\n  \n  // Loading overlay component that shows during game transitions\n  const LoadingOverlay = () => (\n    <Box sx={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'rgba(26, 26, 46, 0.9)',\n      zIndex: 1000,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      gap: 3\n    }}>\n      <CircularProgress size={60} sx={{ color: '#3498db' }} />\n      <Typography variant=\"h6\" sx={{ color: '#ecf0f1', mt: 2 }}>\n        Connecting to game...\n      </Typography>\n      <Typography variant=\"body1\" sx={{ color: '#bdc3c7', textAlign: 'center', maxWidth: '80%' }}>\n        Please wait while we establish a connection to the game.\n      </Typography>\n    </Box>\n  );\n\n  // Render loading state while socket is connecting\n  if (isLoading) {\n    return (\n      <div className={styles.lobbyContainer}>\n        <AppHeader />\n        \n        <Box sx={{ \n          display: 'flex', \n          flexDirection: 'column', \n          alignItems: 'center', \n          justifyContent: 'center',\n          height: '50vh',\n          gap: 3\n        }}>\n          <CircularProgress size={60} sx={{ color: '#3498db' }} />\n          <Typography variant=\"h6\" sx={{ color: '#ecf0f1', mt: 2 }}>\n            Connecting to game server...\n          </Typography>\n          <Typography variant=\"body1\" sx={{ color: '#bdc3c7', textAlign: 'center', maxWidth: '80%' }}>\n            Please wait while we establish a secure connection to the game server.\n          </Typography>\n        </Box>\n      </div>\n    );\n  }\n  \n  return (\n    <div className={styles.lobbyContainer}>\n      <AppHeader />\n      \n      {showPreferences && <PreferencesModal onClose={() => setShowPreferences(false)} />}\n      \n      <div className={styles.formContainer}>\n        <div className={styles.formSection}>\n          <div className={styles.welcomeMessage}>\n            <div className={styles.welcomeHeader}>\n              {error ? (\n                <div className={styles.error}>{error}</div>\n              ) : (\n                <div className={styles.welcomeText}>\n                  <UserAvatar \n                    user={{ \n                      username: user?.username || 'Player', \n                      profileImg: preferences?.profileImg \n                    }} \n                    size=\"medium\" \n                    showName={true} \n                    namePosition=\"right\"\n                  />\n                </div>\n              )}\n              <div className={styles.balanceDisplay}>\n                Balance: <CurrencyAmount amount={Number(user?.balance) || 0} size=\"medium\" />\n              </div>\n              <div className={styles.headerButtons}>\n                <PreferencesButton onClick={() => setShowPreferences(true)} />\n                <button \n                  className={styles.logoutButton}\n                  onClick={logout}\n                >\n                  <span className={styles.buttonText}>Logout</span>\n                </button>\n              </div>\n            </div>\n          </div>\n          \n          <div className={styles.gradientDivider}></div>\n          \n          <div className={styles.buttonGroup}>\n            <button \n              className={`${styles.actionButton} ${styles.createButton}`}\n              onClick={handleCreateGame}\n              disabled={!user?.username}\n            >\n              Create New Game\n            </button>\n          </div>\n        </div>\n        \n        {error && (\n          <div className={styles.errorMessage}>\n            {error}\n          </div>\n        )}\n      </div>\n      \n      {/* Game List Section - Always shown */}\n      <div className={styles.gameListContainer}>\n        <h2 className={styles.gameListTitle}>Available Games</h2>\n        \n        {/* Search bar for filtering games */}\n        <div className={styles.searchContainer}>\n          <TextField\n            placeholder=\"Search games by ID\"\n            variant=\"outlined\"\n            fullWidth\n            value={searchQuery}\n            onChange={handleSearchChange}\n            size={isSmallMobile ? \"small\" : \"medium\"}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <span className={styles.searchIcon}></span>\n                </InputAdornment>\n              ),\n            }}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                '& fieldset': {\n                  border: 'none',\n                },\n                '&:hover fieldset': {\n                  border: 'none',\n                },\n                '&.Mui-focused fieldset': {\n                  border: 'none',\n                },\n                backgroundColor: '#0a1622',\n                boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.5)',\n                borderRadius: '8px',\n                border: 'none',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  backgroundColor: '#0c1825',\n                },\n                '&.Mui-focused': {\n                  backgroundColor: '#0d1927',\n                  boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.5)',\n                },\n              },\n              '& .MuiInputLabel-root': {\n                color: 'rgba(52, 152, 219, 0.7)',\n                fontWeight: 400,\n              },\n              '& .MuiOutlinedInput-input': {\n                color: 'rgba(236, 240, 241, 0.9)',\n                fontWeight: 500,\n                padding: isSmallMobile ? '10px 12px' : '12px 14px',\n                '&::placeholder': {\n                  color: 'rgba(52, 152, 219, 0.5)',\n                  opacity: 1,\n                },\n              },\n              '& .MuiInputLabel-root.Mui-focused': {\n                color: '#3498db',\n              },\n              marginBottom: '0.75rem',\n            }}\n          />\n        </div>\n        \n        {filteredGameList && filteredGameList.length > 0 ? (\n          <div className={styles.gameListWrapper}>\n            {filteredGameList.map(game => (\n              <div key={game.id} className={styles.gameListItem}>\n                <div className={styles.gameListInfo}>\n                  <div className={styles.gameListId}>{game.id}</div>\n                  <div className={styles.gameListPlayers}>\n                    {game.playerCount} {game.playerCount === 1 ? 'player' : 'players'}\n                  </div>\n                </div>\n                <button \n                  className={styles.joinGameButton}\n                  onClick={() => handleJoinGame(game.id)}\n                  disabled={!user}\n                >\n                  Join\n                </button>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className={styles.emptyGameList}>\n            <div className={styles.emptyStateIcon}></div>\n            <p className={styles.emptyStateMessage}>\n              {searchQuery.trim() ? 'No matching games found' : 'No games in progress'}\n            </p>\n            <p className={styles.emptyStateHint}>\n              {searchQuery.trim() \n                ? 'Try a different search or create a new game' \n                : 'Create a new game to get started!'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Lobby;\n","import React, { createContext, useState, useContext, useEffect, useCallback, useRef } from 'react';\nimport { useSocket } from './SocketContext.jsx';\nimport soundService from '../services/SoundService';\n\n// Import shared type definitions\n/** @typedef {import('../../../shared/types').GameState} GameState */\n/** @typedef {import('../../../shared/types').Card} Card */\n/** @typedef {import('../../../shared/types').Player} Player */\n\n// Create context\nconst GameContext = createContext();\n\n// Custom hook to use the game context\nexport const useGameContext = () => {\n  const context = useContext(GameContext);\n  if (context === undefined) {\n    throw new Error('useGameContext must be used within a GameProvider');\n  }\n  return context;\n};\n\nexport const GameProvider = ({ children, gameId, initialGameState = null }) => {\n  // Get socket from socket context\n  const { socket, error: socketError } = useSocket();\n  \n  // Game-specific state - we only need to track the full gameState object and error\n  /** @type {[GameState|null, React.Dispatch<React.SetStateAction<GameState|null>>]} */\n  const [gameState, setGameState] = useState(initialGameState);\n  \n  // Keep track of previous players to detect joins/leaves\n  const prevPlayersRef = useRef({});\n  \n  // Initialize with the provided game state if available\n  useEffect(() => {\n    // No need to log the initial state\n    // Initialize sound service\n    soundService.initialize();\n  }, []);\n  /** @type {[string|null, React.Dispatch<React.SetStateAction<string|null>>]} */\n  const [error, setError] = useState(null);\n\n  // Initialize with socket error if any\n  useEffect(() => {\n    if (socketError) {\n      setError(socketError);\n    }\n  }, [socketError]);\n  // Set up game-specific event handlers\n  useEffect(() => {\n    if (!socket) return;\n    \n    // The gameJoined event is now handled exclusively in LobbyContext\n    // This prevents duplicate event handling issues that were causing\n    // game joining problems. By centralizing this event handling, we ensure\n    // consistent state transitions between lobby and game views.\n\n    // Game state updates\n    socket.on('gameState', (state) => {\n      if (state && state.id) {\n        // Process game state update\n        \n        // Check for player joins/leaves\n        if (state.players && prevPlayersRef.current) {\n          const currentPlayers = Object.keys(state.players);\n          const previousPlayers = Object.keys(prevPlayersRef.current);\n          \n          // Check for new players\n          const newPlayers = currentPlayers.filter(id => !previousPlayers.includes(id));\n          \n          // Check for players who left\n          const leftPlayers = previousPlayers.filter(id => !currentPlayers.includes(id));\n          \n          // Play join sound for new players\n          if (newPlayers.length > 0) {\n            soundService.play('ui.join');\n          }\n          \n          // Play leave sound for players who left\n          if (leftPlayers.length > 0) {\n            soundService.play('ui.leave');\n          }\n          \n          // Update previous players reference\n          prevPlayersRef.current = {...state.players};\n        }\n        \n        // Check for dealer change notification\n        if (state.dealerChanged) {\n          // Create a modified state that will keep dealerChanged true for 5 seconds\n          const enhancedState = {...state};\n          \n          // Update the game state immediately\n          setGameState(enhancedState);\n          \n          // After 5 seconds, update the state again with dealerChanged set to false\n          setTimeout(() => {\n            setGameState(prevState => {\n              if (prevState) {\n                return {...prevState, dealerChanged: false};\n              }\n              return prevState;\n            });\n          }, 5000);\n        } else {\n          // Just update the game state normally\n          setGameState({...state});\n        }\n      }\n    });\n\n    // Legacy handler for backward compatibility\n    socket.on('gameUpdate', (state) => {\n      if (state && state.id) {\n        // Handle legacy game update format\n        setGameState({...state});\n      }\n    });\n\n    // Game-specific error handling\n    socket.on('gameError', (message) => {\n      console.error('Game error:', message);\n      setError(message);\n    });\n    \n    // Clean up game-specific event listeners\n    return () => {\n      // We don't clean up the gameJoined event here anymore since it's now\n      // exclusively handled by LobbyContext\n      socket.off('gameState');\n      socket.off('gameUpdate');\n      socket.off('gameError');\n    };\n  }, [socket]);\n\n  // Game-specific actions\n  const placeBet = useCallback((amount) => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('placeBet', { bet: amount, gameId });\n    } catch (err) {\n      console.error('Error placing bet:', err);\n      setError('Failed to place bet. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const payAnte = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('payAnte', { gameId });\n    } catch (err) {\n      console.error('Error paying ante:', err);\n      setError('Failed to pay ante. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  const dealCards = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('dealCards', { gameId });\n    } catch (err) {\n      console.error('Error dealing cards:', err);\n      setError('Failed to deal cards. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const revealMiddleCard = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('revealMiddleCard', { gameId });\n    } catch (err) {\n      console.error('Error revealing middle card:', err);\n      setError('Failed to reveal middle card. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  const nextRound = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('nextRound', { gameId });\n    } catch (err) {\n      console.error('Error moving to next round:', err);\n      setError('Failed to move to next round. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player ready function (for paying ante)\n  const playerReady = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      // Server is listening for 'ready' event, not 'playerReady'\n      socket.emit('ready');\n    } catch (err) {\n      console.error('Error setting player ready:', err);\n      setError('Failed to set player ready. Please try again.');\n    }\n  }, [socket, gameId]);\n  \n  // Player unready function (withdraw ante)\n  const playerUnready = useCallback(() => {\n    if (!socket || !gameId) return;\n    \n    try {\n      socket.emit('unready');\n    } catch (err) {\n      console.error('Error setting player unready:', err);\n      setError('Failed to set player unready. Please try again.');\n    }\n  }, [socket, gameId]);\n\n  /**\n   * @typedef {Object} GameContextValue\n   * @property {GameState|null} gameState - The complete game state\n   * @property {string|null} error - Any error message \n   * @property {(amount: number) => void} placeBet - Function to place a bet\n   * @property {() => void} payAnte - Function to pay the ante\n   * @property {() => void} playerReady - Function to set player ready (pay ante)\n   * @property {() => void} playerUnready - Function to set player unready (withdraw ante)\n   * @property {() => void} dealCards - Function to deal cards\n   * @property {() => void} revealMiddleCard - Function to reveal the middle card\n   * @property {() => void} nextRound - Function to move to the next round\n   * @property {() => void} clearError - Function to clear any error\n   * @property {string|null} gameId - Current game ID\n   */\n\n  /** @type {GameContextValue} */\n  const value = {\n    // Game state - just provide the complete gameState object\n    gameState,\n    error,\n    gameId,\n    \n    // Game actions\n    placeBet,\n    payAnte,\n    playerReady,\n    playerUnready,\n    dealCards,\n    revealMiddleCard,\n    nextRound,\n    // Helper methods\n    clearError: () => setError(null)\n  };\n\n  return (\n    <GameContext.Provider value={value}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\n// Named exports for specific pieces of state/actions\nexport const useGameState = () => {\n  const { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, dealerChanged, error } = useGameContext();\n  return { gameState, players, currentPlayer, cards, gamePhase, dealerName, deckNumber, remainingCards, dealerChanged, error };\n};\n\nexport const useGameActions = () => {\n  const { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError } = useGameContext();\n  return { placeBet, payAnte, dealCards, revealMiddleCard, nextRound, clearError };\n};\n\nexport default GameContext;\n","/**\n * Game Constants - Defines fixed values used throughout the game\n * This is a shared constants file used by both server and client\n * Supports both ES modules (for Vite/client) and CommonJS (for Node.js/server)\n */\n\nconst GAME_CONSTANTS = {\n  // Game configuration\n  ANTE_AMOUNT: 1,  // Fixed ante amount - always $1\n  STARTING_BALANCE: 20,  // Starting player balance - $20\n  FULL_DECK_SIZE: 52,  // Number of cards in a full deck\n  \n  // Timer durations (in milliseconds)\n  TIMERS: {\n    DEAL_FIRST_CARD_DELAY: 1000,    // Delay before dealing the first card (1 second)\n    DEAL_SECOND_CARD_DELAY: 1000,   // Delay before dealing the second card (1 second)\n    DEAL_THIRD_CARD_DELAY: 2000,    // Delay before revealing the third card (2 seconds)\n    DEALING_DURATION: 3000,         // Total duration of dealing phase (3 seconds)\n    BETTING_DURATION: 30000,        // Duration for betting phase (30 seconds)\n    DECISION_DURATION: 15000,       // Duration for ace and second chance decisions (15 seconds)\n    REVEALING_DURATION: 3000,       // Duration for revealing phase\n    RESULTS_DURATION: 5000          // Duration to show results before moving to next round (5 seconds)\n  }\n};\n\n// Dual module support - cleaner implementation\n// For ES modules (Vite/client)\nexport default GAME_CONSTANTS;\nexport const { TIMERS, ANTE_AMOUNT, STARTING_BALANCE, FULL_DECK_SIZE } = GAME_CONSTANTS;\n\n// For CommonJS (Node.js/server)\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = GAME_CONSTANTS;\n}\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport styles from './styles/MuteToggle.module.css';\nimport { ICONS } from '../constants/UIConstants';\n\nconst MuteToggle = ({ compact = false }) => {\n  const { preferences, toggleMute, loading } = usePreferences();\n  \n  const handleToggle = async () => {\n    await toggleMute();\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={`${styles.toggleContainer} ${compact ? styles.compact : ''}`}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.muted}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        {!compact && (\n          <span className={styles.toggleText}>\n            {preferences.muted ? 'Unmute' : 'Mute'}\n          </span>\n        )}\n        {compact && (\n          <span className={styles.compactText}>\n            Mute\n          </span>\n        )}\n      </label>\n    </div>\n  );\n};\n\nexport default MuteToggle;\n","import React, { useMemo } from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport styles from './styles/GameSummaryModal.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Game Summary Modal component that displays running scores and settle-up calculations\n */\nconst GameSummaryModal = ({ onClose }) => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return (\n      <div className={styles.modalOverlay}>\n        <div className={styles.modalContent}>\n          <div className={styles.modalHeader}>\n            <h2>Game Summary</h2>\n            <button className={styles.closeButton} onClick={onClose}></button>\n          </div>\n          <div className={styles.settingsContainer}>\n            <div className={styles.loadingMessage}>Loading game data...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const { gameTransactions = {}, players = {}, id: gameId } = gameState;\n  \n  // Get player names (including those who left)\n  const playerNames = {};\n  \n  // First add current players\n  Object.entries(players).forEach(([playerId, player]) => {\n    playerNames[playerId] = player.name;\n  });\n  \n  // Then add players who left but have transactions\n  Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n    if (!playerNames[playerId] && transactions && transactions.length > 0) {\n      playerNames[playerId] = transactions[0].playerName || 'Unknown Player';\n    }\n  });\n\n  // Calculate player totals directly from transactions\n  const playerTotals = useMemo(() => {\n    const totals = {};\n    Object.entries(gameTransactions).forEach(([playerId, transactions]) => {\n      if (!transactions || !Array.isArray(transactions)) return;\n      totals[playerId] = transactions.reduce((sum, tx) => sum + tx.amount, 0);\n    });\n    return totals;\n  }, [gameTransactions]);\n  \n  // Calculate settle-up payments\n  const settleUpPayments = useMemo(() => {\n    // For simple 2-player games, just have the loser pay the winner directly\n    if (Object.keys(playerTotals).length === 2) {\n      const players = Object.entries(playerTotals);\n      const [player1Id, player1Total] = players[0];\n      const [player2Id, player2Total] = players[1];\n      \n      // If totals sum to zero (or close to it), one player pays the other\n      if (Math.abs(player1Total + player2Total) < 0.1) {\n        if (player1Total > 0) {\n          // Player 2 pays Player 1\n          return [{\n            from: player2Id,\n            fromName: playerNames[player2Id],\n            to: player1Id,\n            toName: playerNames[player1Id],\n            amount: Math.abs(player1Total)\n          }];\n        } else if (player2Total > 0) {\n          // Player 1 pays Player 2\n          return [{\n            from: player1Id,\n            fromName: playerNames[player1Id],\n            to: player2Id,\n            toName: playerNames[player2Id],\n            amount: Math.abs(player2Total)\n          }];\n        }\n      }\n    }\n    \n    // For more complex cases with more players\n    const payments = [];\n    \n    // Split into winners and losers\n    const losers = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount < 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount: Math.abs(amount) // Convert to positive amount for easier calculation\n      }));\n    \n    const winners = Object.entries(playerTotals)\n      .filter(([_, amount]) => amount > 0)\n      .map(([playerId, amount]) => ({\n        playerId,\n        playerName: playerNames[playerId] || 'Unknown Player',\n        amount\n      }));\n    \n    // Sort by amount (descending)\n    losers.sort((a, b) => b.amount - a.amount);\n    winners.sort((a, b) => b.amount - a.amount);\n    \n    // Process each winner, starting with the biggest winner\n    while (winners.length > 0 && losers.length > 0) {\n      const winner = winners[0];\n      const loser = losers[0];\n      \n      // Calculate payment amount\n      const paymentAmount = Math.min(winner.amount, loser.amount);\n      \n      if (paymentAmount > 0.01) { // Only process meaningful payments\n        // Add payment\n        payments.push({\n          from: loser.playerId,\n          fromName: loser.playerName,\n          to: winner.playerId,\n          toName: winner.playerName,\n          amount: paymentAmount\n        });\n        \n        // Update balances\n        winner.amount -= paymentAmount;\n        loser.amount -= paymentAmount;\n        \n        // Remove settled players or re-sort if they still have balance\n        if (winner.amount < 0.01) {\n          winners.shift();\n        }\n        \n        if (loser.amount < 0.01) {\n          losers.shift();\n        }\n      } else {\n        // No meaningful payment possible\n        break;\n      }\n    }\n    \n    return payments;\n  }, [playerTotals, playerNames]);\n\n  return (\n    <div className={styles.modalOverlay} onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <div className={styles.modalContent}>\n        <div className={styles.modalHeader}>\n          <h2>Game Summary ({gameId})</h2>\n          <button className={styles.closeButton} onClick={onClose}></button>\n        </div>\n        \n        <div className={styles.settingsContainer}>\n          {/* Totals Section */}\n          <div className={styles.settingSection}>\n            <h3>Totals</h3>\n            {Object.keys(playerTotals).length === 0 ? (\n              <p className={styles.noDataMessage}>No transactions recorded yet.</p>\n            ) : (\n              <div className={styles.totalsTable}>\n                {Object.entries(playerTotals).map(([playerId, total]) => (\n                  <div key={playerId} className={styles.totalRow}>\n                    <span className={styles.playerName}>{playerNames[playerId] || 'Unknown Player'}</span>\n                    <span className={`${styles.totalAmount} ${total >= 0 ? styles.positive : styles.negative}`}>\n                      <CurrencyAmount amount={total} size=\"small\" />\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Settle Up Section */}\n          <div className={styles.settingSection}>\n            <h3>Settle Up</h3>\n            {settleUpPayments.length === 0 ? (\n              <p className={styles.noDataMessage}>No payments needed or no transactions recorded yet.</p>\n            ) : (\n              <div className={styles.settleUpTable}>\n                {settleUpPayments.map((payment, index) => (\n                  <div key={index} className={styles.paymentRow}>\n                    <span className={styles.paymentText}>\n                      <span className={styles.playerName}>{payment.fromName}</span> pays{' '}\n                      <span className={styles.playerName}>{payment.toName}</span>\n                    </span>\n                    <span className={styles.paymentAmount}>\n                      <CurrencyAmount amount={payment.amount} size=\"small\" />\n                    </span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameSummaryModal;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/GameHeader.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport GAME_CONSTANTS from '../../../shared/constants/GameConstants';\nconst { TIMERS } = GAME_CONSTANTS;\nimport { ICONS } from '../constants/UIConstants';\nimport MuteToggle from './MuteToggle.jsx';\nimport GameSummaryModal from './GameSummaryModal.jsx';\n\n// Phase display mapping with icons and friendly names\nconst phaseDisplayMap = {\n  waiting: { text: 'Waiting for Players', icon: '' },\n  dealing: { text: 'Dealing Cards', icon: ICONS.DEALER },\n  revealing: { text: 'Revealing Cards', icon: ICONS.CARDS },\n  results: { text: 'Round Results', icon: '' }\n  // betting phase is handled dynamically to show player name\n};\n\nconst GameHeader = ({ handleLeaveGame }) => {\n  const { gameState, gameId } = useGameContext();\n  const { socket } = useSocket();\n  const currentPhase = gameState?.phase || 'waiting';\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [showGameSummary, setShowGameSummary] = useState(false);\n\n  // Timer effect for phases\n  useEffect(() => {\n    let timer;\n    \n    if (currentPhase === 'dealing') {\n      setTimeLeft(TIMERS.DEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'betting') {\n      setTimeLeft(TIMERS.BETTING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'revealing') {\n      setTimeLeft(TIMERS.REVEALING_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else if (currentPhase === 'results') {\n      setTimeLeft(TIMERS.RESULTS_DURATION);\n      timer = setInterval(() => {\n        setTimeLeft(prev => Math.max(0, prev - 100));\n      }, 100);\n    } else {\n      setTimeLeft(null);\n    }\n\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [currentPhase, gameState?.waitingForAceDecision]);\n  \n  // Get the phase display information\n  let phaseInfo = phaseDisplayMap[currentPhase] || { text: 'Unknown Phase', icon: '' };\n  \n  // Override phase info if waiting for Ace decision\n  if (gameState?.waitingForAceDecision && currentPhase === 'dealing') {\n    phaseInfo = { text: 'Choosing Ace Value', icon: ICONS.DEALER };\n  }\n  \n  // Check if current user is the current player\n  const isCurrentPlayersTurn = socket && gameState?.currentPlayerId === socket.id;\n  \n  // Special handling for betting phase\n  if (currentPhase === 'betting' && gameState?.currentPlayerId && gameState?.players) {\n    const currentPlayer = gameState.players[gameState.currentPlayerId];\n    \n    if (currentPlayer) {\n      if (isCurrentPlayersTurn) {\n        // It's YOUR turn to bet\n        phaseInfo = {\n          text: `Pass or Bet`,\n          icon: ICONS.COIN\n        };\n      } else {\n        // It's someone else's turn\n        phaseInfo = {\n          text: `${currentPlayer.name} is Betting`,\n          icon: ICONS.COIN\n        };\n      }\n    } else {\n      phaseInfo = { text: 'Betting Round', icon: ICONS.COIN };\n    }\n  }\n  \n  return (\n    <div className={styles.headerContainer}>\n      {/* Desktop layout - single row with 3 cells */}\n      <div className={styles.desktopLayout}>\n        {/* Left: Logo and game ID */}\n        <div className={styles.headerLeft}>\n          <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n          <p className={styles.gameIdText}>\n            <span \n              className={styles.gameIdLink} \n              onClick={() => setShowGameSummary(true)}\n              title=\"Click to view game summary\"\n            >\n              Game #{gameId}\n            </span>\n          </p>\n        </div>\n        \n        {/* Middle: Phase indicator */}\n        <div className={styles.headerCenter}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right: Leave and Mute stacked */}\n        <div className={styles.headerRight}>\n          <div className={styles.controlsStack}>\n            <button \n              className={styles.leaveButton}\n              onClick={handleLeaveGame}\n            >\n              Leave Game\n            </button>\n            <div className={styles.muteToggleContainer}>\n              <MuteToggle compact={true} />\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Mobile layout - two rows */}\n      <div className={styles.mobileLayout}>\n        {/* Top row: Logo/ID, Mute, Leave */}\n        <div className={styles.mobileTopRow}>\n          <div className={styles.headerLeft}>\n            <h1 className={styles.gameTitle}>In Between <span className={styles.liveTag}>LIVE</span></h1>\n            <p className={styles.gameIdText}>\n              <span \n                className={styles.gameIdLink} \n                onClick={() => setShowGameSummary(true)}\n                title=\"Click to view game summary\"\n              >\n                Game #{gameId}\n              </span>\n            </p>\n          </div>\n          \n          <div className={styles.muteToggleContainer}>\n            <MuteToggle compact={true} />\n          </div>\n          \n          <button \n            className={styles.leaveButton}\n            onClick={handleLeaveGame}\n          >\n            Leave Game\n          </button>\n        </div>\n        \n        {/* Bottom row: Phase indicator (full width) */}\n        <div className={styles.mobileBottomRow}>\n          <div \n            className={`${styles.gamePhase} ${currentPhase === 'betting' ? \n              (isCurrentPlayersTurn ? styles.phaseBettingYourTurn : styles.phaseBettingWaiting) : \n              styles[`phase${currentPhase.charAt(0).toUpperCase() + currentPhase.slice(1)}`]}`} \n            data-phase={currentPhase}\n          >\n            <span className={styles.phaseIcon}>{phaseInfo.icon}</span>\n            <span className={styles.phaseText}>{phaseInfo.text}</span>\n            {timeLeft !== null && (\n              <div className={styles.timerBar}>\n                <div \n                  className={styles.timerProgress} \n                  style={{ \n                    width: `${(timeLeft / (currentPhase === 'dealing' ? TIMERS.DEALING_DURATION :\n                                         currentPhase === 'betting' ? TIMERS.BETTING_DURATION :\n                                         currentPhase === 'revealing' ? TIMERS.REVEALING_DURATION :\n                                         TIMERS.RESULTS_DURATION)) * 100}%`\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      {/* Game Summary Modal */}\n      {showGameSummary && <GameSummaryModal onClose={() => setShowGameSummary(false)} />}\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from 'react';\n\n/**\n * Arrow icon component that can be rotated to point up or down\n * @param {Object} props - Component props\n * @param {string} props.direction - Direction of the arrow ('up' or 'down')\n * @param {string} props.color - Color of the arrow (default: 'currentColor')\n * @param {number} props.size - Size of the icon in pixels (default: 24)\n */\nconst ArrowIcon = ({ direction = 'up', color = 'currentColor', size = 24 }) => {\n  // Determine rotation based on direction\n  const rotation = direction === 'down' ? 'rotate(180deg)' : 'rotate(0deg)';\n  \n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke={color} \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\"\n      style={{ transform: rotation, display: 'inline-block', transformOrigin: 'center' }}\n    >\n      {/* This is the shift/arrow up icon from Material Design */}\n      <path d=\"M7 11l5-5 5 5M7 17l5-5 5 5\" />\n    </svg>\n  );\n};\n\nexport default ArrowIcon;\n","import React from 'react';\nimport styles from './styles/CardDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst CardDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) {\n    return <div className={styles.loading}>Loading game state...</div>;\n  }\n  \n  const { \n    firstCard,\n    secondCard,\n    thirdCard,\n    phase, \n    remainingCards, \n    dealerChanged, \n    dealer,\n    deckNumber \n  } = gameState;\n  \n  // Card state is managed by the game context\n  \n  const dealerName = dealer?.name;\n  const cardLabels = {\n    '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8', '9': '9', '10': '10',\n    'J': 'J', 'Q': 'Q', 'K': 'K', 'A': 'A'\n  };\n  \n  // Map for handling both string names and direct symbols\n  const suitSymbols = {\n    'hearts': '',\n    'diamonds': '',\n    'clubs': '',\n    'spades': '',\n    // Handle direct Unicode symbols as well\n    '': '',\n    '': '',\n    '': '',\n    '': ''\n  };\n  \n  // Helper to determine if a suit is red\n  const isRedSuit = (suit) => {\n    return suit === '' || suit === '' || suit === 'hearts' || suit === 'diamonds';\n  };\n  \n  const renderCard = (card, index) => {\n    if (!card) return (\n      <div key={`empty-${index}`} className={styles.card}>\n        <div className={styles.cardBack}></div>\n      </div>\n    );\n    \n    const isRed = isRedSuit(card.suit);\n    const isAce = card.value === 'A';\n    const isAceLow = card.isAceLow;\n    const isMiddleCard = index === 1; // Index 1 is the middle card position\n    \n    return (\n      <div key={`${card.value}-${card.suit}-${index}`} \n        className={`${styles.card} ${isRed ? styles.redCard : styles.blackCard} ${isAce ? styles.aceCard : ''}`}\n      >\n        {isAce && !isMiddleCard && (\n          <div className={`${styles.aceIndicator} ${isAceLow ? styles.aceLow : styles.aceHigh} ${isRed ? styles.redCard : styles.blackCard}`}>\n            {isAceLow ? (\n              <span className={styles.indicatorContent}>LOW <ArrowIcon direction=\"down\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            ) : (\n              <span className={styles.indicatorContent}>HIGH <ArrowIcon direction=\"up\" color={isRed ? '#e74c3c' : '#2c3e50'} size={16} /></span>\n            )}\n          </div>\n        )}\n        <div className={styles.cardCorner}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n        <div className={styles.cardCenter}>\n          {suitSymbols[card.suit]}\n        </div>\n        <div className={`${styles.cardCorner} ${styles.bottomRight}`}>\n          <div className={styles.cardValue}>{cardLabels[card.value]}</div>\n          <div className={styles.cardSuit}>{suitSymbols[card.suit]}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  // Function to handle card positioning \n  const renderCardLayout = () => {\n    // Create an array of 3 nulls to represent the card slots\n    let displayCards = [null, null, null];\n    \n    // Check if we have a valid game state with cards\n    if (!firstCard && !secondCard && !thirdCard) {\n      return displayCards.map((card, index) => renderCard(card, index));\n    }\n    \n    // Handle the individual card properties\n    if (firstCard) {\n      displayCards[0] = {...firstCard}; // Left position - use spread operator to create a copy\n    }\n    \n    if (secondCard) {\n      displayCards[2] = {...secondCard}; // Right position - use spread operator to create a copy\n    }\n    \n    if (thirdCard) {\n      displayCards[1] = {...thirdCard}; // Middle position - use spread operator to create a copy\n    }\n    \n    return displayCards.map((card, index) => renderCard(card, index));\n  };\n\n  return (\n    <div className={styles.cardDisplayContainer}>\n      {dealerChanged && (\n        <div className={styles.dealerRotationAlert}>\n          <p>\n            <span className={styles.dealerIcon}></span>\n            <span className={styles.dealerRotationText}>\n              {dealerName} is now the dealer (Deck #{deckNumber})!\n            </span>\n          </p>\n        </div>\n      )}\n      \n      \n      <div className={`${styles.cardsRow} ${phase === 'dealing' ? styles.dealingPhase : ''} ${phase === 'revealing' ? styles.revealingPhase : ''}`}>\n        {renderCardLayout()}\n      </div>\n    </div>\n  );\n};\n\nexport default CardDisplay;\n","import React from 'react';\nimport styles from './styles/PotButton.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * PotButton - The most epic, baller button in the entire game\n * Features a shimmering gold border with a shiny silver background to make the gold currency pop\n * Includes multiple overlapping layers and effects for maximum visual impact\n * \n * @param {Object} props - Component props\n * @param {number} props.amount - The pot amount to display\n * @param {boolean} props.disabled - Whether the button is disabled\n * @param {function} props.onClick - Function to call when the button is clicked\n */\nconst PotButton = ({ amount, disabled, onClick }) => {\n  return (\n    <button\n      className={`${styles.potButton} ${disabled ? styles.disabled : ''}`}\n      onClick={onClick}\n      disabled={disabled}\n      aria-label={`Bet the pot: ${amount} chips`}\n    >\n      {/* Layer 2: Gold border with texture */}\n      <div className={styles.shimmerBorder}></div>\n      \n      {/* Layer 4: Silver metallic background */}\n      <div className={styles.buttonBackground}></div>\n      \n      {/* Layer 5: Light reflection effects */}\n      <div className={styles.reflectionEffect}></div>\n      \n      {/* Layer 6-8: Button content with 3D transform */}\n      <div className={styles.buttonContent}>\n        <span className={styles.potText}>POT</span>\n        <span className={styles.potAmount}>\n          <CurrencyAmount amount={amount} background=\"pill\" />\n        </span>\n      </div>\n    </button>\n  );\n};\n\nexport default PotButton;\n","import React, { useState } from 'react';\nimport styles from './styles/BettingPanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport PotButton from './PotButton.jsx';\n\nconst BettingPanel = () => {\n  // Get game state and actions from context\n  const { gameState, placeBet } = useGameContext();\n  const { socket } = useSocket();\n  // Initialize state first - before any conditional returns\n  const [customBet, setCustomBet] = useState('');\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    currentPlayerId, \n    pot: potAmount, \n    phase,\n    firstCard,\n    secondCard\n  } = gameState;\n  \n  // Only show in betting phase\n  if (phase !== 'betting') return null;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.id;\n  const myPlayer = socket && players ? players[socket.id] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  \n  const handleCustomBetChange = (e) => {\n    // Only allow numbers\n    const value = e.target.value.replace(/[^0-9]/g, '');\n    \n    // Don't allow bets greater than pot or player balance\n    const maxBet = Math.min(potAmount, playerBalance);\n    if (value && parseInt(value) > maxBet) {\n      setCustomBet(maxBet.toString());\n    } else {\n      setCustomBet(value);\n    }\n  };\n  \n  const handleCustomBetSubmit = () => {\n    if (customBet && !isNaN(customBet)) {\n      const betAmount = parseInt(customBet, 10);\n      // Verify bet is at least $1 and at most the pot/balance\n      if (betAmount >= 1 && betAmount <= Math.min(potAmount, playerBalance)) {\n        placeBet(betAmount);\n        setCustomBet('');\n      }\n    }\n  };\n  \n  // Helper to handle Enter key in the custom bet input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleCustomBetSubmit();\n    }\n  };\n  \n\n  \n  const renderBettingControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.betContainer}>\n        <p className={styles.betText}>Place your bet (Min: <CurrencyAmount amount={1} />, Max: <CurrencyAmount amount={Math.min(potAmount, playerBalance)} />)</p>\n        \n        {/* Extreme options row */}\n        <div className={styles.extremeOptionsRow}>\n          <button\n            className={`${styles.betButton} ${styles.extremeButton} ${styles.passButton}`}\n            onClick={() => placeBet(0)}\n          >\n            PASS\n          </button>\n          \n          <PotButton \n            amount={potAmount}\n            onClick={() => placeBet(potAmount)}\n            disabled={potAmount > playerBalance}\n          />\n        </div>\n        \n        {/* Standard bet options */}\n        <div className={styles.betButtons}>\n          {[1, 2, 5].map(amount => {\n            const maxBet = Math.min(potAmount, playerBalance);\n            const disabled = amount > maxBet;\n            return (\n              <button\n                key={amount}\n                className={`${styles.betButton} ${disabled ? styles.disabledButton : ''}`}\n                onClick={() => placeBet(amount)}\n                disabled={disabled}\n              >\n                <CurrencyAmount amount={amount} />\n              </button>\n            );\n          })}\n          \n          {/* Custom bet input */}\n          <div className={styles.customBetContainer}>\n            <input\n              type=\"text\"\n              className={styles.customBetInput}\n              placeholder=\"Custom\"\n              value={customBet}\n              onChange={handleCustomBetChange}\n              onKeyPress={handleKeyPress}\n            />\n            <button\n              className={styles.customBetButton}\n              onClick={handleCustomBetSubmit}\n              disabled={!customBet}\n            >\n              Bet\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  \n\n  // Only render the panel for the current player\n  if (!isCurrentPlayer) return null;\n  \n  return (\n    <div className={styles.bettingPanel}>\n      {renderBettingControls()}\n    </div>\n  );\n};\n\nexport default BettingPanel;\n","import React, { useRef, useEffect, useState } from 'react';\nimport styles from './styles/PlayerList.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport UserAvatar from './UserAvatar.jsx';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PlayerList = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  \n  if (!gameState || !gameState.players) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for game data...</p>\n      </div>\n    );\n  }\n  \n  const { players, currentPlayerId, dealerId, deckNumber, remainingCards } = gameState;\n  const currentUserId = socket?.id;\n  if (!players || Object.keys(players).length === 0) {\n    return (\n      <div className={styles.emptyPlayerList}>\n        <p>Waiting for players to join...</p>\n      </div>\n    );\n  }\n\n  // Display deck information if available\n  const renderDeckInfo = () => {\n    if (typeof deckNumber === 'number' && typeof remainingCards === 'number') {\n      return (\n        <div className={styles.deckInfo}>\n          <span className={styles.deckNumber}>Deck #{deckNumber}</span>\n          <span className={styles.remainingCards}>{remainingCards} cards remaining</span>\n        </div>\n      );\n    }\n    return null;\n  };\n\n\n  \n  return (\n    <div className={styles.playersContainer}>\n      <h3 className={styles.playersTitle}>Players</h3>\n      {renderDeckInfo()}\n      <div className={styles.playersList}>\n        {/* Use gameState.seats to render players in seat order */}\n        {gameState.seats\n          .filter(playerId => playerId !== null && players[playerId])\n          .map(playerId => {\n            const player = players[playerId];\n            const isCurrentPlayer = player.id === currentPlayerId;\n            const isCurrentUser = player.id === currentUserId;\n            const isDealer = player.id === dealerId;\n            \n\n            \n            return (\n              <div \n                key={player.id} \n                className={`\n                  ${styles.playerItem}\n                  ${isCurrentPlayer ? styles.currentPlayer : ''}\n                  ${isCurrentUser ? styles.currentUser : ''}\n                `}\n              >\n              <div className={styles.playerInfo}>\n                <UserAvatar \n                  user={{ \n                    username: player.name, \n                    profileImg: player.mediaPreferences?.profileImg \n                  }} \n                  size=\"small\" \n                  showName={false}\n                />\n                <span className={styles.playerName}>\n                  {player.name}\n                  <span className={styles.playerStatus}>\n                    {isDealer && ` ${ICONS.DEALER}`}\n                  </span>\n                </span>\n              </div>\n              <div className={styles.playerBalanceContainer}>\n                <BalanceDisplay balance={Number(player.balance || 0)} />\n\n                <div className={`${styles.readyIndicator} ${player.isReady ? styles.ready : styles.notReady}`}></div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst BalanceDisplay = ({ balance }) => {\n  const [prevBalance, setPrevBalance] = useState(balance);\n  const [animationClass, setAnimationClass] = useState('');\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (balance !== prevBalance) {\n      // Determine if balance increased or decreased\n      const isIncrease = balance > prevBalance;\n      setAnimationClass(isIncrease ? styles.balanceIncrease : styles.balanceDecrease);\n\n      // Clear previous timeout if it exists\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      // Remove animation class after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setAnimationClass('');\n      }, 1000); // Match animation duration\n\n      setPrevBalance(balance);\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [balance]);\n\n  return (\n    <span className={`${styles.playerBalance} ${animationClass}`}>\n      <CurrencyAmount amount={balance} />\n    </span>\n  );\n};\n\nexport default PlayerList;\n","import React from 'react';\nimport styles from './styles/PotDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\n\nconst PotDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  const { pot } = gameState;\n  \n  return (\n    <div className={styles.potDisplayContainer}>\n      <div className={styles.potIconWrapper}>\n        <span className={styles.potIcon}>{ICONS.POT}</span>\n      </div>\n      <div className={styles.potInfo}>\n        <h3 className={styles.potLabel}>POT</h3>\n        <span className={styles.potAmount}><CurrencyAmount amount={pot} size=\"medium\" /></span>\n      </div>\n    </div>\n  );\n};\n\nexport default PotDisplay;\n","import React from 'react';\nimport styles from './styles/DeckDisplay.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { ICONS } from '../constants/UIConstants';\n\nconst DeckDisplay = () => {\n  const { gameState } = useGameContext();\n  \n  if (!gameState) return null;\n  \n  // Get the deck size from the game state\n  const { deckSize = 0 } = gameState;\n  \n  // Calculate the visual thickness of the deck based on remaining cards\n  const getThicknessClass = () => {\n    if (deckSize >= 40) return styles.deckThick;\n    if (deckSize >= 25) return styles.deckMedium;\n    if (deckSize >= 10) return styles.deckThin;\n    return styles.deckVeryThin;\n  };\n  \n  return (\n    <div className={styles.deckDisplayContainer}>\n      <div className={`${styles.deckVisual} ${getThicknessClass()}`}>\n        <div className={styles.deckIcon}>{ICONS.DECK}</div>\n      </div>\n      <div className={styles.deckInfo}>\n        <h3 className={styles.deckLabel}>DECK</h3>\n        <span className={styles.deckCount}>{deckSize}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default DeckDisplay;\n","import React from 'react';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/AutoAnteToggle.module.css';\n\nconst AutoAnteToggle = () => {\n  const { preferences, toggleAutoAnte, loading } = usePreferences();\n  const { gameState, playerReady } = useGameContext();\n  const { socket } = useSocket();\n  \n  const handleToggle = async () => {\n    const newValue = !preferences.autoAnte;\n    const success = await toggleAutoAnte();\n    \n    // Only auto-ante if the player is not already anted\n    if (newValue && success && playerReady) {\n      // Check if player is already anted\n      const myPlayer = socket && gameState?.players ? gameState.players[socket.id] : null;\n      const isPlayerReady = myPlayer?.isReady;\n      \n      // Only call playerReady if the player is not already ready\n      if (!isPlayerReady) {\n        playerReady();\n      }\n    }\n  };\n  \n  if (loading) {\n    return <div className={styles.loading}>Loading preferences...</div>;\n  }\n  \n  return (\n    <div className={styles.toggleContainer}>\n      <label className={styles.toggleLabel}>\n        <input\n          type=\"checkbox\"\n          checked={preferences.autoAnte}\n          onChange={handleToggle}\n          className={styles.toggleInput}\n        />\n        <span className={styles.toggleSlider}></span>\n        <span className={styles.toggleText}>\n          Auto-Ante\n        </span>\n      </label>\n    </div>\n  );\n};\n\nexport default AutoAnteToggle;\n","import React from 'react';\nimport styles from './styles/AnteControls.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { usePreferences } from '../contexts/PreferencesContext';\nimport CurrencyAmount from './common/CurrencyAmount';\nimport { ICONS } from '../constants/UIConstants';\nimport AutoAnteToggle from './AutoAnteToggle.jsx';\n\nconst AnteControls = () => {\n  // Get game state and actions from context\n  const { gameState, playerReady, playerUnready } = useGameContext();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n  const { preferences } = usePreferences();\n  \n  if (!gameState) return null;\n  \n  const { \n    players, \n    anteAmount, \n    phase \n  } = gameState;\n  \n  // Only show in waiting phase\n  if (phase !== 'waiting') return null;\n  \n  const myPlayer = socket && players ? players[socket.id] : null;\n  const playerBalance = Number(myPlayer?.balance || 0);\n  const isPlayerReady = myPlayer?.isReady;\n  const hasEnoughChips = playerBalance >= anteAmount;\n  \n  // Player state and readiness is managed by the game context\n  \n  return (\n    <div className={styles.anteControlsWrapper}>\n      <div className={styles.controlsContainer}>\n        {/* Main action button (Ante or Back Out) */}\n        <div className={styles.buttonContainer}>\n          {!isPlayerReady ? (\n            // Player is not ready - show Ante button\n            <>\n              <button \n                className={styles.anteButton}\n                onClick={playerReady}\n                disabled={!hasEnoughChips}\n                aria-label=\"Ante up\"\n              >\n                {/* Add shimmer border for glimmering effect */}\n                <div className={styles.shimmerBorder}></div>\n                <span className={styles.anteIcon}>{ICONS.CHECK}</span>\n                <div className={styles.buttonInfo}>\n                  <h3 className={styles.buttonLabel}>ANTE</h3>\n                  <span className={styles.buttonAmount}><CurrencyAmount amount={anteAmount} /></span>\n                </div>\n              </button>\n              \n              {!hasEnoughChips && (\n                <p className={styles.notEnoughChipsText}>Not enough coins (<CurrencyAmount amount={anteAmount} /> required)</p>\n              )}\n            </>\n          ) : (\n            // Player is ready - show Back Out button\n            <button \n              className={styles.backOutButton}\n              onClick={() => {\n                if (typeof playerUnready === 'function') {\n                  playerUnready();\n                } else {\n                  console.error('playerUnready is not a function');\n                }\n              }}\n              aria-label=\"Back out\"\n            >\n              {/* Add shimmer border for glimmering effect */}\n              <div className={styles.shimmerBorder}></div>\n              <span className={styles.backOutIcon}></span>\n              <div className={styles.buttonInfo}>\n                <h3 className={styles.buttonLabel}>BACK OUT</h3>\n              </div>\n            </button>\n          )}\n        </div>\n        \n        {/* Auto-Ante toggle - always shown */}\n        <div className={styles.autoAnteContainer}>\n          <AutoAnteToggle />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnteControls;\n","import React from 'react';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport styles from './styles/ResultsPanel.module.css';\nimport CurrencyAmount from './common/CurrencyAmount';\n\n/**\n * Results panel component that displays the outcome of a hand during the results phase\n */\nconst ResultsPanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n\n  // If there's no result, don't render anything\n  if (!gameState.result) return null;\n\n  const { result, players, resultCountdown } = gameState;\n  const isCurrentPlayer = result.playerId === socket?.id;\n  const playerName = isCurrentPlayer ? 'You' : players[result.playerId]?.name;\n  const outcomeText = isCurrentPlayer \n    ? (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'Tied' : 'Lost')\n    : (result.outcome === 'win' ? 'Won' : result.outcome === 'tie' ? 'Tied' : 'Lost');\n\n  return (\n    <div className={styles.resultsPanel}>\n      {/* Card display section removed - cards are now visible in the game board */}\n\n      <div className={styles.resultContent}>\n        <h2 className={`${styles.resultText} ${styles[result.outcome + 'Text']}`}>\n          {playerName} {outcomeText}!\n        </h2>\n        \n        {result.winnings > 0 && (\n          <p className={styles.winningsText}>\n            Winnings: <CurrencyAmount amount={result.winnings} size=\"medium\" />\n          </p>\n        )}\n        \n        {resultCountdown && (\n          <div className={styles.countdownContainer}>\n            <p className={styles.countdownText}>\n              Next hand in: {resultCountdown.countdownSeconds}s\n            </p>\n            <div className={styles.countdownProgress}>\n              <div \n                className={styles.countdownBar} \n                style={{ width: `${(resultCountdown.countdownSeconds / 5) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ResultsPanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/AceChoicePanel.module.css';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport ArrowIcon from './icons/ArrowIcon';\n\nconst AceChoicePanel = () => {\n  const { socket } = useSocket();\n  const { gameState } = useGameContext();\n  const { user } = useAuth();\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForAceDecision && socket?.id === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForAceDecision, gameState?.currentPlayerId, socket?.id]);\n  \n  const handleAceChoice = (isAceLow) => {\n    socket.emit('chooseAceValue', { isAceLow });\n  };\n  \n  // Check if it's the current player's turn\n  const isCurrentPlayersTurn = socket?.id === gameState.currentPlayerId;\n  const currentPlayerName = gameState.players[gameState.currentPlayerId]?.name || 'Current player';\n  \n  const renderAceChoiceControls = () => {\n    if (!isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.aceChoiceControls}>\n        <p className={styles.aceChoiceText}>\n          You've been dealt an Ace! Choose whether it should be high or low.\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.aceChoiceButtons}>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceHighButton}`}\n            onClick={() => handleAceChoice(false)}\n          >\n            <span className={styles.buttonContent}>ACE HIGH <ArrowIcon direction=\"up\" color=\"white\" size={20} /></span>\n          </button>\n          <button \n            className={`${styles.aceChoiceButton} ${styles.aceLowButton}`}\n            onClick={() => handleAceChoice(true)}\n          >\n            <span className={styles.buttonContent}>ACE LOW <ArrowIcon direction=\"down\" color=\"white\" size={20} /></span>\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayersTurn) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n        <p className={styles.waitingText}>\n          {currentPlayerName} is choosing whether their Ace is high or low...\n        </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.aceChoicePanel}>\n      {renderAceChoiceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default AceChoicePanel;\n","import React, { useState, useEffect } from 'react';\nimport styles from './styles/SecondChancePanel.module.css';\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport CurrencyAmount from './common/CurrencyAmount';\n\nconst SecondChancePanel = () => {\n  const { gameState } = useGameContext();\n  const { socket } = useSocket();\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState(null); // 'ante' or 'pass'\n  const [countdown, setCountdown] = useState(15);\n  \n  // Set up countdown timer when the component mounts\n  useEffect(() => {\n    if (gameState?.waitingForSecondChance && socket?.id === gameState.currentPlayerId) {\n      setCountdown(15); // Reset to 15 seconds\n      \n      const timer = setInterval(() => {\n        setCountdown(prevCount => {\n          if (prevCount <= 1) {\n            clearInterval(timer);\n            return 0;\n          }\n          return prevCount - 1;\n        });\n      }, 1000);\n      \n      return () => clearInterval(timer);\n    }\n  }, [gameState?.waitingForSecondChance, gameState?.currentPlayerId, socket?.id]);\n  \n  const { \n    players, \n    currentPlayerId, \n    anteAmount = 1\n  } = gameState;\n  \n  const isCurrentPlayer = socket && currentPlayerId === socket.id;\n  const currentPlayer = players[currentPlayerId];\n  \n  const handleSecondChance = (anteAgain) => {\n    if (socket) {\n      setLoading(true);\n      setActionType(anteAgain ? 'ante' : 'pass');\n      socket.emit('secondChance', { anteAgain });\n    }\n  };\n  \n  const renderSecondChanceControls = () => {\n    if (!isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.secondChanceControls}>\n        <p className={styles.secondChanceText}>\n          Would you like to ante up again for a second chance?\n          <span className={styles.countdown}> ({countdown}s)</span>\n        </p>\n        \n        <div className={styles.secondChanceButtons}>\n          <button\n            className={`${styles.secondChanceButton} ${styles.anteAgainButton}`}\n            onClick={() => handleSecondChance(true)}\n          >\n            {loading && actionType === 'ante' ? 'Processing...' : (\n              <>\n                Ante Up <span className={styles.currencyWrapper}>\n                  <CurrencyAmount amount={anteAmount} size=\"small\" />\n                </span>\n              </>\n            )}\n          </button>\n          <button\n            className={`${styles.secondChanceButton} ${styles.passButton}`}\n            onClick={() => handleSecondChance(false)}\n          >\n            {loading && actionType === 'pass' ? 'Processing...' : 'Pass'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n  \n  const renderWaitingMessage = () => {\n    if (isCurrentPlayer) return null;\n    \n    return (\n      <div className={styles.waitingMessage}>\n          <p className={styles.waitingText}>\n            {currentPlayer?.name} is deciding whether to take a second chance.\n          </p>\n      </div>\n    );\n  };\n  \n  return (\n    <div className={styles.secondChancePanel}>\n      {renderSecondChanceControls()}\n      {renderWaitingMessage()}\n    </div>\n  );\n};\n\nexport default SecondChancePanel;\n","import React, { useState } from 'react';\nimport styles from './styles/GameLog.module.css';\nimport { useGameContext } from '../contexts/GameContext';\n\nconst GameLog = () => {\n  const { gameState } = useGameContext();\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!gameState || !gameState.gameLog) return null;\n  \n  // Get the game log entries\n  const logEntries = gameState.gameLog || [];\n  \n  // Format timestamp to readable time\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n  \n  // Toggle expanded state\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  // Determine how many entries to show\n  const displayEntries = isExpanded ? logEntries : logEntries.slice(0, 5);\n  \n  return (\n    <div className={styles.gameLogContainer}>\n      <div className={styles.gameLogHeader} onClick={toggleExpanded}>\n        <h3>Game Log</h3>\n        <span className={styles.expandIcon}>{isExpanded ? '' : ''}</span>\n      </div>\n      \n      <div className={`${styles.gameLogEntries} ${isExpanded ? styles.expanded : ''}`}>\n        {displayEntries.length === 0 ? (\n          <div className={styles.emptyLog}>No game events yet</div>\n        ) : (\n          displayEntries.map((entry, index) => (\n            <div key={index} className={styles.logEntry}>\n              <span className={styles.logTime}>{formatTime(entry.timestamp)}</span>\n              <span className={styles.logMessage}>{entry.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {!isExpanded && logEntries.length > 5 && (\n        <div className={styles.showMoreButton} onClick={toggleExpanded}>\n          Show {logEntries.length - 5} more entries\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameLog;\n","import React, { useEffect } from 'react';\nimport styles from './styles/GameScreen.module.css';\nimport GameHeader from './GameHeader.jsx';\nimport CardDisplay from './CardDisplay.jsx';\nimport BettingPanel from './BettingPanel.jsx';\nimport PlayerList from './PlayerList.jsx';\nimport PotDisplay from './PotDisplay.jsx';\nimport DeckDisplay from './DeckDisplay.jsx';\nimport AnteControls from './AnteControls.jsx';\nimport ResultsPanel from './ResultsPanel.jsx';\nimport AceChoicePanel from './AceChoicePanel.jsx';\nimport SecondChancePanel from './SecondChancePanel.jsx';\nimport GameLog from './GameLog.jsx';\n\nimport { useGameContext } from '../contexts/GameContext';\nimport { useSocket } from '../contexts/SocketContext';\n\nconst GameScreen = ({ onReturnToLobby }) => {\n  // Get state and actions from context\n  const { \n    gameState,\n    error,\n    clearError\n  } = useGameContext();\n  \n  // Auto-clear errors after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 10000); // 10 seconds\n      \n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n  \n  // Handle returning to lobby\n  const handleLeaveGame = () => {\n    // Call the parent callback\n    if (onReturnToLobby) {\n      onReturnToLobby();\n    }\n  };\n  \n  // Get the socket instance for player identification\n  const { socket } = useSocket();\n  \n  // Safety check for null gameState or missing phase\n  if (!gameState) {\n    return (\n      <div className={styles.loadingContainer}>\n        <p>Loading game state...</p>\n      </div>\n    );\n  }\n  \n  // Make sure we have a valid phase\n  const phase = gameState.phase || 'waiting';\n\n\n  return (\n    <div className={styles.gameContainer}>\n      <div className={styles.gameScreen}>\n        <GameHeader handleLeaveGame={handleLeaveGame} />\n        \n        {error && (\n          <div className={styles.errorContainer}>\n            <p className={styles.errorText}>{error}</p>\n          </div>\n        )}\n        \n        <div className={styles.gameInfoWrapper}>\n          <DeckDisplay />\n          <PotDisplay />\n        </div>\n        \n        {/* Always show the CardDisplay component */}\n        <CardDisplay />\n        \n        {phase === 'waiting' ? (\n          /* Show ante controls during waiting phase */\n          <AnteControls />\n        ) : phase === 'results' ? (\n          /* Show the results panel during results phase */\n          <ResultsPanel />\n        ) : gameState.waitingForAceDecision ? (\n          /* Show the Ace choice panel when first card is an Ace */\n          <AceChoicePanel />\n        ) : gameState.waitingForSecondChance ? (\n          /* Show the Second Chance panel when matching cards are dealt */\n          <SecondChancePanel />\n        ) : phase === 'betting' ? (\n          /* Show the betting panel only during betting phase */\n          <BettingPanel />\n        ) : null}\n        \n        <div className={styles.gameBottomSection}>\n          <div className={styles.playerListContainer}>\n            <PlayerList />\n          </div>\n          <div className={styles.gameLogContainer}>\n            <GameLog />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameScreen;\n","import React, { useState } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Alert,\n  useMediaQuery,\n} from '@mui/material';\nimport styles from './AuthForm.module.css';\n\nconst AuthForm = ({ onSubmit, mode }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const isSmallMobile = useMediaQuery('(max-width:400px)');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      await onSubmit(username, password);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <Paper className={styles.authForm} elevation={0}>\n      <Typography variant=\"h5\" component=\"h2\" gutterBottom sx={{ color: 'var(--info)', fontWeight: 600 }}>\n        {mode === 'login' ? 'Welcome Back' : 'Create Account'}\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2, backgroundColor: 'rgba(231, 76, 60, 0.2)', color: 'var(--text-primary)' }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Username\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 3 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n        \n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n          size={isSmallMobile ? \"small\" : \"medium\"}\n          inputProps={{ minLength: 6 }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              '& fieldset': {\n                borderColor: 'var(--info-light)',\n              },\n              '&:hover fieldset': {\n                borderColor: 'var(--info)',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: 'var(--info)',\n              },\n              backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'var(--info-light)',\n              fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            },\n            '& .MuiOutlinedInput-input': {\n              color: 'var(--text-dark)',\n              fontWeight: 500,\n              backgroundColor: 'rgba(255, 255, 255, 0.85)',\n              padding: isSmallMobile ? '12px 14px' : '16.5px 14px',\n            },\n            '& .MuiInputLabel-root.Mui-focused': {\n              color: 'var(--info)',\n            },\n            marginBottom: isSmallMobile ? '0.5rem' : '1rem',\n          }}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          size=\"large\"\n          className={styles.submitButton}\n          sx={{\n            mt: isSmallMobile ? 2 : 3,\n            background: 'linear-gradient(to right, var(--info), var(--success))',\n            textTransform: 'none',\n            fontWeight: 'bold',\n            letterSpacing: '0.5px',\n            padding: isSmallMobile ? '10px' : '12px',\n            fontSize: isSmallMobile ? '0.9rem' : '1rem',\n            '&:hover': {\n              background: 'linear-gradient(to right, var(--info-dark), var(--success-dark))',\n              boxShadow: 'var(--shadow-lg)',\n              transform: 'translateY(-2px)'\n            }\n          }}\n        >\n          {mode === 'login' ? 'Sign In' : 'Create Account'}\n        </Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default AuthForm;\n","import React, { useState } from 'react';\nimport { Box, Button, Typography } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport AuthForm from './AuthForm.jsx';\nimport { useAuth } from '../../contexts/AuthContext';\nimport styles from './AuthPage.module.css';\nimport AppHeader from '../common/AppHeader';\n\nconst AuthPage = () => {\n  const [mode, setMode] = useState('login');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const [error, setError] = useState(null);\n\n  const handleAuth = async (username, password) => {\n    if (!username || !password) {\n      setError('Username and password are required');\n      return;\n    }\n\n    setError(null);\n    // Get API URL from environment or use localhost as fallback\n    const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n    const endpoint = `${API_URL}/auth/${mode}`;\n    \n    console.log(`[Auth] ${mode.toUpperCase()} attempt: ${username}`);\n\n    try {\n      const requestBody = { username, password };\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(requestBody),\n      });\n\n      let data;\n      try {\n        data = await response.json();\n      } catch (error) {\n        console.error('[Client] Error parsing response:', error);\n        throw new Error('Invalid response from server');\n      }\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Authentication failed');\n      }\n\n      if (!data.user?.username || !data.user?.id || !data.token) {\n        console.error('[Client] Invalid response format:', {\n          hasUser: !!data.user,\n          hasUsername: !!data.user?.username,\n          hasId: !!data.user?.id,\n          hasToken: !!data.token\n        });\n        throw new Error('Invalid server response format');\n      }\n\n      console.log(`[Auth] ${mode.toUpperCase()} successful: ${data.user.username}`);\n      try {\n        login(data.user, data.token);\n        // Navigate to the lobby after successful login\n        navigate('/');\n      } catch (error) {\n        console.error('[Client] Error in login callback:', error);\n        throw new Error('Failed to initialize user session');\n      }\n    } catch (error) {\n      console.error('[Client] Auth error:', {\n        message: error.message,\n        endpoint,\n        mode\n      });\n      setError(error.message || 'Failed to connect to server');\n    }\n\n\n  };\n\n  return (\n    <Box className={styles.authPage}>\n      <AppHeader />\n      \n      <Box className={styles.formContainer}>\n        {error && (\n          <Typography className={styles.error}>\n            {error}\n          </Typography>\n        )}\n        \n        <AuthForm mode={mode} onSubmit={handleAuth} />\n        \n        <Box textAlign=\"center\" mt={3}>\n          <Button\n            color=\"primary\"\n            onClick={() => setMode(mode === 'login' ? 'register' : 'login')}\n            sx={{\n              color: '#ecf0f1',\n              textTransform: 'none',\n              fontSize: '1rem',\n              '&:hover': {\n                backgroundColor: 'rgba(255, 255, 255, 0.1)'\n              }\n            }}\n          >\n            {mode === 'login' \n              ? \"Don't have an account? Register\" \n              : \"Already have an account? Login\"}\n          </Button>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default AuthPage;\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\n// Import our component-based architecture\nimport Lobby from './components/Lobby';\nimport GameScreen from './components/GameScreen';\nimport AuthPage from './components/auth/AuthPage';\n\n// Import our context providers\nimport { LobbyProvider, useLobby } from './contexts/LobbyContext.jsx';\nimport { GameProvider } from './contexts/GameContext';\nimport { useAuth } from './contexts/AuthContext';\n\n// A component that handles authentication\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading, token } = useAuth();\n  \n  // Show loading state while checking auth\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  // Only show auth page if user is not logged in AND there's no token being processed\n  if (!user && !token) {\n    return <Navigate to=\"/auth\" />;\n  }\n  \n  return children;\n};\n\n// A component that uses the lobby context to determine what to show\nconst GameScreenWithContext = () => {\n  const { lobbyState, returnToLobby } = useLobby();\n  const { gameId, gameState } = lobbyState;\n  \n  if (!gameId) {\n    return <Navigate to=\"/\" />;\n  }\n  \n  return (\n    <GameProvider gameId={gameId} initialGameState={gameState}>\n      <GameScreen onReturnToLobby={returnToLobby} />\n    </GameProvider>\n  );\n};\n\n// Main App component that handles routing\nfunction AppWithProviders() {\n  return (\n    <LobbyProvider>\n      <Routes>\n        <Route path=\"/auth\" element={<AuthPage />} />\n        <Route \n          path=\"/\" \n          element={\n            <ProtectedRoute>\n              <Lobby />\n            </ProtectedRoute>\n          } \n        />\n        <Route \n          path=\"/game/:gameId\" \n          element={\n            <ProtectedRoute>\n              <GameScreenWithContext />\n            </ProtectedRoute>\n          } \n        />\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      </Routes>\n    </LobbyProvider>\n  );\n}\n\nexport default AppWithProviders;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\n// Import global styles\nimport './styles/variables.css';\n\n// Import our context providers\nimport { SocketProvider } from './contexts/SocketContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PreferencesProvider } from './contexts/PreferencesContext';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <SocketProvider>\n        <AuthProvider>\n          <PreferencesProvider>\n            <App />\n          </PreferencesProvider>\n        </AuthProvider>\n      </SocketProvider>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n"],"names":["m","require$$0","createRoot","hydrateRoot","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","forEach","key","ERROR_PACKET","type","data","withNativeBlob","Blob","prototype","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","toArray","Uint8Array","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","i","charCodeAt","decode","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","length","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","len","p","arraybuffer","bytes","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","transform","packet","controller","arrayBuffer","then","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","size","shift","j","slice","Emitter","mixin","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","Array","emitReserved","listeners","hasListeners","nextTick","Promise","resolve","setTimeoutFn","globalThisShim","self","window","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","bind","clearTimeoutFn","randomString","Date","now","Math","random","TransportError","Error","constructor","reason","description","context","super","Transport","writable","query","socket","forceBase64","onError","open","readyState","doOpen","close","doClose","onClose","send","packets","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","indexOf","port","secure","Number","encodedQuery","str","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","join","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","value","XMLHttpRequest","err","hasCORS","empty","BaseXHR","location","isSSL","protocol","xd","req","request","method","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","e","cookieJar","addCookies","withCredentials","requestTimeout","timeout","onreadystatechange","parseCookies","getResponseHeader","status","_onLoad","_onError","document","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","unloadHandler","attachEvent","hasXHR2","newRequest","responseType","concat","isReactNative","navigator","product","toLowerCase","BaseWS","protocols","headers","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","catch","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","src","b","replace","exec","source","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","listener","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","Infinity","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","l","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","id","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","code","pingInterval","pingTimeout","_pingTimeoutTimer","delay","upgrading","_getWritablePackets","payloadSize","c","utf8Length","ceil","_hasPingExpired","hasExpired","msg","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","error","onTransportClose","onupgrade","to","_filterUpgrades","upgrades","filteredUpgrades","o","map","DEFAULT_TRANSPORTS","filter","withNativeFile","File","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","num","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","start","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect","connect_error","disconnect","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","message","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","min","max","factor","jitter","attempts","duration","rand","deviation","floor","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","cache","parsed","loc","test","href","url","sameNamespace","forceNew","multiplex","API_URL","import","SocketContext","createContext","useSocket","useContext","SocketProvider","children","setSocket","useState","setIsConnected","setError","useEffect","token","localStorage","getItem","newSocket","log","console","jsx","Provider","ICONS","WelcomePopup","username","balance","jsxRuntimeExports","className","styles","jsxs","onClick","AuthContext","AuthProvider","user","setUser","setToken","loading","setLoading","showWelcomePopup","setShowWelcomePopup","socketData","updatedUser","setItem","fetchUserData","async","response","fetch","Authorization","ok","json","storedToken","logout","hasToken","isLoading","isMounted","userData","loadUserData","login","removeItem","newToken","initialUserData","completeUserData","refreshUserData","handleCloseWelcomePopup","useAuth","HowlerGlobal","init","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","_getSoundIds","sound","_soundById","_node","mute","muted","stop","unload","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","ua","userAgent","checkOpera","match","isOldOpera","parseInt","checkSafari","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","createBufferSource","destination","noteOn","resume","onended","_emit","_obtainHtml5Audio","testPlay","play","warn","audio","suspend","_sounds","_paused","_suspendTimer","handleSuspension","_resumeAfterSuspend","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_state","_endTimers","_playLock","_onend","onend","_onfade","onfade","_onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","action","Sound","loadBuffer","internal","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","_seek","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","isCocoonJS","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","_clearSound","_interval","fade","from","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","_fadeTo","setInterval","tick","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","index","remCache","events","isId","task","ended","_drain","limit","cnt","_panner","isIOS","vendor","howl","_parent","parent","createGain","createGainNode","_errorListener","_loadListener","_endListener","__default","loadSound","atob","dataView","decodeAudioData","safeXhrSend","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","exports","global","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_super","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","createPanner","soundService","initialized","categories","lastPlayedTime","debounceTime","audioUnlocked","initialize","_setupMobileAudioUnlock","loadCategory","category","sprites","leave","_isMobileDevice","soundName","includes","soundKey","setMuted","values","syncWithPreferences","preferences","unlockAudio","silence","body","maxTouchPoints","LobbyContext","useLobby","LobbyProvider","onGameJoined","lobbyState","setLobbyState","playerName","gameList","gameId","gameState","isAuthenticated","games","prevState","fetchGameList","game","phase","newState","setPlayerName","createGame","currentGameId","freshState","joinGame","gameIdToJoin","returnToLobby","PreferencesContext","formatImageUrl","startsWith","filename","formatPreferencesData","profileImg","twoSecondPotGif","twoSecondPotMp3","PreferencesProvider","setPreferences","autoAnte","loadPreferences","React","useCallback","finalPreferences","updatePreference","prev","formattedData","toggleAutoAnte","newValue","toggleMute","uploadTwoSecondPotGif","file","fileName","fileSize","fileType","formData","FormData","append","text","statusText","formattedUrl","fileUrl","uploadTwoSecondPotMp3","uploadProfileImg","usePreferences","AppHeader","CoinIcon","coinIcon","CurrencyAmount","amount","background","customClass","containerClasses","currencyAmount","darkBackground","pillBackground","Boolean","ToggleSwitch","isChecked","onChange","label","checked","FileUpload","onUpload","currentFileUrl","acceptedFileTypes","previewType","isUploading","setIsUploading","fileInputRef","useRef","ref","target","files","accept","alt","controls","handleButtonClick","current","click","disabled","PreferencesModal","style","position","border","padding","borderRadius","top","left","color","fontWeight","fontSize","PreferencesButton","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","d","UserAvatar","showName","namePosition","initials","getInitials","sizeClass","medium","containerClass","toUpperCase","formattedImageUrl","userAvatarContainer","avatar","avatarImage","display","nextSibling","initialsPlaceholder","part","Lobby","lobbyError","searchQuery","setSearchQuery","setIsLoading","showPreferences","setShowPreferences","useMediaQuery","isSmallMobile","timeoutId","filteredGameList","useMemo","trim","lobbyContainer","Box","sx","flexDirection","alignItems","justifyContent","height","gap","CircularProgress","Typography","variant","mt","textAlign","maxWidth","formContainer","formSection","welcomeMessage","welcomeHeader","welcomeText","balanceDisplay","headerButtons","logoutButton","buttonText","gradientDivider","buttonGroup","actionButton","createButton","handleCreateGame","errorMessage","gameListContainer","gameListTitle","searchContainer","TextField","fullWidth","InputProps","startAdornment","InputAdornment","searchIcon","backgroundColor","boxShadow","transition","opacity","marginBottom","gameListWrapper","gameListItem","gameListInfo","gameListId","gameListPlayers","playerCount","joinGameButton","handleJoinGame","emptyGameList","emptyStateIcon","emptyStateMessage","emptyStateHint","GameContext","useGameContext","undefined","GameProvider","initialGameState","socketError","setGameState","prevPlayersRef","players","currentPlayers","previousPlayers","newPlayers","leftPlayers","dealerChanged","enhancedState","placeBet","bet","payAnte","dealCards","revealMiddleCard","nextRound","playerReady","playerUnready","clearError","GAME_CONSTANTS","ANTE_AMOUNT","STARTING_BALANCE","FULL_DECK_SIZE","TIMERS","DEAL_FIRST_CARD_DELAY","DEAL_SECOND_CARD_DELAY","DEAL_THIRD_CARD_DELAY","DEALING_DURATION","BETTING_DURATION","DECISION_DURATION","REVEALING_DURATION","RESULTS_DURATION","module","MuteToggle","compact","GameSummaryModal","gameTransactions","playerNames","entries","playerId","player","transactions","playerTotals","totals","sum","tx","settleUpPayments","player1Id","player1Total","player2Id","player2Total","fromName","toName","payments","losers","_","winners","sort","a","winner","loser","paymentAmount","currentTarget","payment","phaseDisplayMap","waiting","icon","dealing","revealing","results","GameHeader","handleLeaveGame","currentPhase","timeLeft","setTimeLeft","showGameSummary","setShowGameSummary","waitingForAceDecision","phaseInfo","isCurrentPlayersTurn","currentPlayerId","currentPlayer","headerContainer","desktopLayout","headerLeft","gameTitle","liveTag","gameIdText","gameIdLink","title","headerCenter","gamePhase","phaseBettingYourTurn","phaseBettingWaiting","phaseIcon","phaseText","timerBar","timerProgress","width","headerRight","controlsStack","leaveButton","muteToggleContainer","mobileLayout","mobileTopRow","mobileBottomRow","ArrowIcon","direction","rotation","transformOrigin","CardDisplay","firstCard","secondCard","thirdCard","remainingCards","dealer","deckNumber","dealerName","cardLabels","J","Q","K","A","suitSymbols","hearts","diamonds","clubs","spades","renderCard","card","cardBack","isRed","suit","isAce","isAceLow","isMiddleCard","redCard","blackCard","aceCard","aceIndicator","aceLow","aceHigh","indicatorContent","cardCorner","cardValue","cardSuit","cardCenter","bottomRight","cardDisplayContainer","dealerRotationAlert","dealerIcon","dealerRotationText","cardsRow","dealingPhase","revealingPhase","renderCardLayout","displayCards","PotButton","BettingPanel","customBet","setCustomBet","pot","potAmount","isCurrentPlayer","myPlayer","playerBalance","handleCustomBetChange","maxBet","handleCustomBetSubmit","betAmount","handleKeyPress","renderBettingControls","onKeyPress","PlayerList","dealerId","currentUserId","seats","isCurrentUser","isDealer","mediaPreferences","BalanceDisplay","isReady","prevBalance","setPrevBalance","animationClass","setAnimationClass","timeoutRef","PotDisplay","POT","DeckDisplay","deckSize","AutoAnteToggle","AnteControls","anteAmount","isPlayerReady","hasEnoughChips","Fragment","ResultsPanel","resultCountdown","outcomeText","outcome","resultsPanel","resultContent","resultText","winnings","winningsText","countdownContainer","countdownText","countdownSeconds","countdownProgress","countdownBar","AceChoicePanel","countdown","setCountdown","prevCount","handleAceChoice","currentPlayerName","renderAceChoiceControls","SecondChancePanel","actionType","setActionType","waitingForSecondChance","handleSecondChance","anteAgain","renderSecondChanceControls","GameLog","isExpanded","setIsExpanded","gameLog","logEntries","toggleExpanded","displayEntries","entry","formatTime","timestamp","toLocaleTimeString","hour","minute","second","GameScreen","onReturnToLobby","loadingContainer","gameContainer","gameScreen","errorContainer","errorText","gameInfoWrapper","gameBottomSection","playerListContainer","gameLogContainer","AuthForm","onSubmit","mode","setUsername","password","setPassword","Paper","elevation","component","gutterBottom","Alert","severity","mb","preventDefault","margin","required","inputProps","minLength","borderColor","Button","textTransform","letterSpacing","AuthPage","setMode","navigate","useNavigate","endpoint","requestBody","credentials","hasUser","hasUsername","hasId","ProtectedRoute","Navigate","GameScreenWithContext","AppWithProviders","Routes","Route","element","getElementById","render","StrictMode","BrowserRouter","App"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,33]}