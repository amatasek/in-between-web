import{U as c,k as W,V as u,X as L,c as z,t as G,F as $,D as k,h as U,O as q,Y as T,Z as e,_ as H}from"./index-BuBMj0oT.js";import{u as R,b as r}from"./vendor-CT7sGowS.js";import{u as O}from"./useGamepadNavigation-DKu7SyYo.js";import{A as D}from"./AppHeader-CWQEI6yN.js";import{F as V}from"./Footer-BzHap9PF.js";import{c as _}from"./createLucideIcon-D-AJSOET.js";import"./socket-CA1CrNgP.js";import"./audio-hxunv4lQ.js";const X={async signInWithApple(){return(await c.signInWithApple()).user},async signInWithGoogle(){return(await c.signInWithGoogle()).user},async signInWithFacebook(){return(await c.signInWithFacebook({useLimitedLogin:!0})).user},async signInWithEmail(s,a){return(await c.signInWithEmailAndPassword({email:s,password:a})).user},async createAccountWithEmail(s,a){return(await c.createUserWithEmailAndPassword({email:s,password:a})).user},async getCurrentUser(){return(await c.getCurrentUser()).user},async signOut(){await c.signOut()},async sendPasswordResetEmail(s){await c.sendPasswordResetEmail({email:s})},getErrorMessage(s){return{"auth/invalid-email":"Invalid email address","auth/user-disabled":"This account has been disabled","auth/user-not-found":"No account found with this email","auth/wrong-password":"Incorrect password","auth/email-already-in-use":"An account with this email already exists","auth/weak-password":"Password should be at least 6 characters","auth/operation-not-allowed":"This sign-in method is not enabled","auth/popup-closed-by-user":"Sign-in cancelled","auth/cancelled-popup-request":"Sign-in cancelled","auth/popup-blocked":"Pop-up blocked. Please allow pop-ups and try again"}[s?.code]||s?.message||"An error occurred during authentication"}},Y={async signInWithApple(){const s=new q("apple.com");return(await k(u,s)).user},async signInWithGoogle(){const s=new U;return(await k(u,s)).user},async signInWithFacebook(){const s=new $;return(await k(u,s)).user},async signInWithEmail(s,a){return(await G(u,s,a)).user},async createAccountWithEmail(s,a){return(await z(u,s,a)).user},getCurrentUser(){return Promise.resolve(u.currentUser)},async signOut(){await L(u)},async sendPasswordResetEmail(s){await W(u,s,{url:`${window.location.origin}/auth`,handleCodeInApp:!1})},getErrorMessage(s){return{"auth/invalid-email":"Invalid email address","auth/user-disabled":"This account has been disabled","auth/user-not-found":"No account found with this email","auth/wrong-password":"Incorrect password","auth/email-already-in-use":"An account with this email already exists","auth/weak-password":"Password should be at least 6 characters","auth/operation-not-allowed":"This sign-in method is not enabled","auth/popup-closed-by-user":"Sign-in cancelled","auth/cancelled-popup-request":"Sign-in cancelled","auth/popup-blocked":"Pop-up blocked. Please allow pop-ups and try again"}[s?.code]||s?.message||"An error occurred during authentication"}},Z=T.isNativePlatform(),l=Z?X:Y,J="_socialButton_2le5o_1",K="_disabled_2le5o_20",Q="_icon_2le5o_35",ee="_label_2le5o_42",se="_apple_2le5o_48",te="_google_2le5o_60",ae="_facebook_2le5o_72",ne="_spinner_2le5o_84",d={socialButton:J,disabled:K,icon:Q,label:ee,apple:se,google:te,facebook:ae,spinner:ne},C=({provider:s,onClick:a,disabled:o,loading:g})=>{const n=(()=>{switch(s){case"apple":return{icon:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),label:"Sign in with Apple",className:d.apple};case"google":return{icon:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),label:"Continue with Google",className:d.google};case"facebook":return{icon:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),label:"Continue with Facebook",className:d.facebook};default:return null}})();return n?e.jsx("button",{type:"button",className:`${d.socialButton} ${n.className} ${o?d.disabled:""}`,onClick:a,disabled:o||g,children:g?e.jsx("div",{className:d.spinner}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:d.icon,children:n.icon}),e.jsx("span",{className:d.label,children:n.label})]})}):null},oe="_authPage_1tsxa_1",ie="_container_1tsxa_9",re="_content_1tsxa_21",le="_errorAlert_1tsxa_43",ce="_socialButtons_1tsxa_68",ue="_divider_1tsxa_76",de="_emailButton_1tsxa_98",he="_privacyNote_1tsxa_132",pe="_emailForm_1tsxa_141",me="_inputGroup_1tsxa_147",ge="_label_1tsxa_153",xe="_input_1tsxa_147",be="_submitButton_1tsxa_182",we="_spinner_1tsxa_213",_e="_toggleMode_1tsxa_226",ye="_backButton_1tsxa_245",fe="_forgotPasswordLink_1tsxa_269",ve="_forgotPasswordText_1tsxa_288",ke="_successMessage_1tsxa_297",je="_migrationBanner_1tsxa_331",Ne="_migrationLink_1tsxa_353",t={authPage:oe,container:ie,content:re,errorAlert:le,socialButtons:ce,divider:ue,emailButton:de,privacyNote:he,emailForm:pe,inputGroup:me,label:ge,input:xe,submitButton:be,spinner:we,toggleMode:_e,backButton:ye,forgotPasswordLink:fe,forgotPasswordText:ve,successMessage:ke,migrationBanner:je,migrationLink:Ne};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ce=_("circle-alert",Pe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ee=_("circle-check-big",Be);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fe=_("info",Ae);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ie=_("mail",Se),Te=()=>{const s=R(),{user:a}=H(),[o,g]=r.useState(null),[y,n]=r.useState(null),[B,j]=r.useState(!1),[m,E]=r.useState(!1),[h,f]=r.useState(""),[v,A]=r.useState(""),[p,b]=r.useState(!1),[F,w]=r.useState(!1),[S,N]=r.useState(!1);O(!1),r.useEffect(()=>{a&&s("/")},[a,s]);const P=async i=>{n(null),g(i);try{switch(i){case"apple":await l.signInWithApple();break;case"google":await l.signInWithGoogle();break;case"facebook":await l.signInWithFacebook();break;default:throw new Error("Unknown provider")}}catch(x){n(l.getErrorMessage(x))}finally{g(null)}},I=async i=>{i.preventDefault(),n(null),b(!0);try{m?await l.createAccountWithEmail(h,v):await l.signInWithEmail(h,v)}catch(x){n(l.getErrorMessage(x))}finally{b(!1)}},M=async i=>{i.preventDefault(),n(null),b(!0);try{if(!h){n("Please enter your email address");return}await l.sendPasswordResetEmail(h),N(!0)}catch(x){n(l.getErrorMessage(x))}finally{b(!1)}};return e.jsxs("div",{className:`screen app-gradient-bg ${t.authPage}`,children:[e.jsx(D,{}),e.jsxs("div",{className:t.container,children:[e.jsxs("div",{className:t.migrationBanner,children:[e.jsx(Fe,{size:16}),e.jsxs("span",{children:["Have an existing account?"," ",e.jsx("button",{type:"button",className:t.migrationLink,onClick:()=>s("/migrate"),children:"Migrate your account"})]})]}),e.jsxs("div",{className:t.content,children:[y&&e.jsxs("div",{className:t.errorAlert,children:[e.jsx(Ce,{size:20}),e.jsx("span",{children:y})]}),B?F?e.jsx(e.Fragment,{children:S?e.jsxs("div",{className:t.successMessage,children:[e.jsx(Ee,{size:48}),e.jsx("h3",{children:"Check your email"}),e.jsxs("p",{children:["We've sent a password reset link to ",e.jsx("strong",{children:h})]}),e.jsx("button",{type:"button",className:t.backButton,onClick:()=>{w(!1),N(!1),f("")},children:"← Back to sign in"})]}):e.jsxs("form",{onSubmit:M,className:t.emailForm,children:[e.jsx("p",{className:t.forgotPasswordText,children:"Enter your email address and we'll send you a link to reset your password."}),e.jsxs("div",{className:t.inputGroup,children:[e.jsx("label",{htmlFor:"reset-email",className:t.label,children:"Email"}),e.jsx("input",{id:"reset-email",type:"email",value:h,onChange:i=>f(i.target.value),className:t.input,placeholder:"your@email.com",required:!0,autoComplete:"email",autoFocus:!0})]}),e.jsx("button",{type:"submit",className:t.submitButton,disabled:p,children:p?e.jsx("div",{className:t.spinner}):"Send reset link"}),e.jsx("button",{type:"button",className:t.backButton,onClick:()=>{w(!1),n(null)},disabled:p,children:"← Back to sign in"})]})}):e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:I,className:t.emailForm,children:[e.jsxs("div",{className:t.inputGroup,children:[e.jsx("label",{htmlFor:"email",className:t.label,children:"Email"}),e.jsx("input",{id:"email",name:"username",type:"email",value:h,onChange:i=>f(i.target.value),className:t.input,placeholder:"your@email.com",required:!0,autoComplete:"username",autoFocus:!0})]}),e.jsxs("div",{className:t.inputGroup,children:[e.jsx("label",{htmlFor:"password",className:t.label,children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",value:v,onChange:i=>A(i.target.value),className:t.input,placeholder:"••••••••",required:!0,autoComplete:m?"new-password":"current-password",minLength:"6"}),!m&&e.jsx("button",{type:"button",className:t.forgotPasswordLink,onClick:()=>w(!0),children:"Forgot password?"})]}),e.jsx("button",{type:"submit",className:t.submitButton,disabled:p,children:p?e.jsx("div",{className:t.spinner}):m?"Create Account":"Sign In"}),e.jsx("button",{type:"button",className:t.toggleMode,onClick:()=>E(!m),disabled:p,children:m?"Already have an account? Sign in":"Need an account? Sign up"}),e.jsx("button",{type:"button",className:t.backButton,onClick:()=>{j(!1),w(!1),n(null)},disabled:p,children:"← Back to all sign-in options"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t.socialButtons,children:[e.jsx(C,{provider:"google",onClick:()=>P("google"),disabled:o!==null,loading:o==="google"}),e.jsx(C,{provider:"facebook",onClick:()=>P("facebook"),disabled:o!==null,loading:o==="facebook"})]}),e.jsx("p",{className:t.privacyNote,children:"We only access your email address"}),e.jsx("div",{className:t.divider,children:e.jsx("span",{children:"or"})}),e.jsxs("button",{type:"button",className:t.emailButton,onClick:()=>j(!0),disabled:o!==null,children:[e.jsx(Ie,{size:20}),e.jsx("span",{children:"Continue with Email"})]})]})]})]}),e.jsx(V,{})]})};export{Te as default};
