import{b as e,a,s,j as t,f as n,U as r,L as l}from"./index-DxGJ3JEY.js";import{r as i,e as c,u as o}from"./vendor-D3vErxIQ.js";import{C as d,a as u,R as m,P as _,S as h,I as p,c as x,b as j,g,G as N,d as v,U as y}from"./GamepadInput-BVAmcuIi.js";import{u as f}from"./useGamepadNavigation-Tj-O-nX_.js";import"./audio-D4HOgbU8.js";import"./socket-DfKCw8Ob.js";const b="♥",C="♦",w="♣",T="♠",k="→",I="↑",A="↓",S="↻",$="✓",P="✕",{TIMERS:E}={TIMERS:{BETTING_DURATION:3e4,DECISION_DURATION:15e3}},B=i.createContext(),L=()=>{const e=i.useContext(B);if(void 0===e)throw new Error("useGameContext must be used within a GameProvider");return e},q=({children:n,gameId:r,initialGameState:l=null})=>{const{socket:c,error:o}=e(),{user:d}=a(),[u,m]=i.useState(l);i.useRef({});const _=i.useRef(null),[h,p]=i.useState(null),x=i.useCallback((()=>{p(null)}),[]);i.useEffect((()=>{o&&p(o)}),[o]),i.useEffect((()=>{if(c)return c.on("gameReconnected",(e=>{m(e.game),p(null),e.game&&e.game.id&&setTimeout((()=>{c.emit("getGameState",{gameId:e.game.id})}),500)})),c.on("gameState",(e=>{if(e&&e.id&&JSON.stringify(u)!==JSON.stringify(e)){if(e.currentPlayerId&&d?.id){const a=e.currentPlayerId===d.id,t=_.current===d.id;a&&!t&&s.play("ui.alert"),_.current=e.currentPlayerId}m(e),x()}})),c.on("gameError",(e=>{p(e)})),()=>{c.off("gameReconnected"),c.off("gameState"),c.off("gameError")}}),[c]);const j=i.useCallback((e=>{if(c&&r)try{c.emit("placeBet",{bet:e,gameId:r})}catch(a){p("Failed to place bet. Please try again.")}}),[c,r]),g=i.useCallback((()=>{if(c&&r)try{c.emit("payAnte",{gameId:r})}catch(e){p("Failed to pay ante. Please try again.")}}),[c,r]),N=i.useCallback((()=>{if(c&&r)try{c.emit("dealCards",{gameId:r})}catch(e){p("Failed to deal cards. Please try again.")}}),[c,r]),v=i.useCallback((()=>{if(c&&r)try{c.emit("revealMiddleCard",{gameId:r})}catch(e){p("Failed to reveal middle card. Please try again.")}}),[c,r]),y=i.useCallback((()=>{if(c&&r)try{c.emit("nextRound",{gameId:r})}catch(e){p("Failed to move to next round. Please try again.")}}),[c,r]),f=i.useCallback((()=>{if(c&&r)try{c.emit("ready")}catch(e){p("Failed to set player ready. Please try again.")}}),[c,r]),b=i.useCallback((()=>{if(c&&r)try{c.emit("unready")}catch(e){p("Failed to set player unready. Please try again.")}}),[c,r]),C={gameState:u,error:h,gameId:r,placeBet:j,payAnte:g,playerReady:f,playerUnready:b,dealCards:N,revealMiddleCard:v,nextRound:y,clearError:x};return t.jsx(B.Provider,{value:C,children:n})},R="_gameContainer_l6mu0_1",O="_gameScreen_l6mu0_5",D="_loadingContainer_l6mu0_31",z="_errorContainer_l6mu0_40",M="_errorText_l6mu0_50",F="_tableWrapper_l6mu0_71",G="_gameBottomSection_l6mu0_85",Y="_headerContainer_wf4qp_1",U="_header_wf4qp_1",W="_headerLeft_wf4qp_24",H="_gameTitle_wf4qp_33",V="_liveTag_wf4qp_44",J="_gameIdText_wf4qp_62",K="_gameIdLink_wf4qp_69",Q="_headerRight_wf4qp_82",X="_controlsStack_wf4qp_88",Z="_balanceDisplay_wf4qp_95",ee="_balanceLabel_wf4qp_108",ae="_controlsGroup_wf4qp_114",se=({color:e="currentColor",size:a=24})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16 17 21 12 16 7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),te=({handleLeaveGame:s,onModalStateChange:n})=>{const{gameState:r,gameId:l}=L(),{socket:c}=e(),{user:o}=a(),g=c?.auth?.userId,N=g&&r?.players?r.players[g]:null,v=N?.balance??o?.balance??0,y=N?.isReady||!1,[f,b]=i.useState(!1),[C,w]=i.useState(!1),[T,k]=i.useState(!1),[I,A]=i.useState(!1),[S,$]=i.useState(!1);return i.useEffect((()=>{n&&n(f||C||T||I||S)}),[f,C,T,I,S,n]),t.jsxs("div",{className:Y,children:[t.jsxs("div",{className:U,children:[t.jsxs("div",{className:W,children:[t.jsxs("h1",{className:H,children:["In Between ",t.jsx("span",{className:V,children:"LIVE"})]}),t.jsx("p",{className:J,children:t.jsxs("span",{className:K,onClick:()=>b(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",l]})})]}),t.jsx("div",{className:Q,children:t.jsxs("div",{className:X,children:[t.jsxs("div",{className:Z,children:[t.jsx("span",{className:ee,children:"Balance:"}),t.jsx(d,{amount:Number(v),size:"small"})]}),t.jsxs("div",{className:ae,children:[t.jsx(u,{onModalStateChange:k,"data-gamepad-focusable":"true"}),t.jsx(m,{onModalStateChange:A,"data-gamepad-focusable":"true"}),t.jsx(_,{onModalStateChange:$,"data-gamepad-focusable":"true"}),t.jsx(h,{onClick:()=>w(!0),"data-gamepad-focusable":"true"}),t.jsx(p,{icon:t.jsx(se,{color:"white",size:20}),title:"Leave Game",onClick:s,variant:"danger",disabled:y,"data-gamepad-focusable":"true"})]})]})})]}),f&&t.jsx(x,{onClose:()=>b(!1),gameData:r}),C&&t.jsx(j,{onClose:()=>w(!1)})]})},ne={table:"_table_zbyr4_2",feltTexture:"_feltTexture_zbyr4_75",sitOutOverlay:"_sitOutOverlay_zbyr4_104"},re={cardsRow:"_cardsRow_12pga_1",card:"_card_12pga_1",dealingPhase:"_dealingPhase_12pga_74",revealingPhase:"_revealingPhase_12pga_83",cardBack:"_cardBack_12pga_109",redCard:"_redCard_12pga_119",blackCard:"_blackCard_12pga_123",cardCorner:"_cardCorner_12pga_127",bottomRight:"_bottomRight_12pga_136",cardValue:"_cardValue_12pga_144",cardSuit:"_cardSuit_12pga_150",cardCenter:"_cardCenter_12pga_155",aceCard:"_aceCard_12pga_212",aceIndicator:"_aceIndicator_12pga_216",aceHigh:"_aceHigh_12pga_236",aceLow:"_aceLow_12pga_242",indicatorContent:"_indicatorContent_12pga_248"},le=()=>{const{gameState:e}=L(),[a,s]=i.useState(g());if(i.useEffect((()=>{const e=()=>{s(g())};return window.addEventListener("cardbackchange",e),()=>window.removeEventListener("cardbackchange",e)}),[]),!e)return t.jsx("div",{className:re.loading,children:"Loading game state..."});const{firstCard:n,secondCard:r,thirdCard:l,phase:c,dealer:o}=e,d={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},u={hearts:b,diamonds:C,clubs:w,spades:T,[b]:b,[C]:C,[w]:w,[T]:T},m=(e,s)=>{if(!e)return t.jsx("div",{className:re.card,children:t.jsx("div",{className:re.cardBack,style:{backgroundImage:`url(${a})`}})},`empty-${s}`);const n=(e=>e===b||e===C||"hearts"===e||"diamonds"===e)(e.suit),r="A"===e.value,l=e.isAceLow,i=1===s;return t.jsxs("div",{className:`${re.card} ${n?re.redCard:re.blackCard} ${r?re.aceCard:""}`,children:[r&&!i&&t.jsx("div",{className:`${re.aceIndicator} ${l?re.aceLow:re.aceHigh} ${n?re.redCard:re.blackCard}`,children:l?t.jsxs("span",{className:re.indicatorContent,children:["LOW ",A]}):t.jsxs("span",{className:re.indicatorContent,children:["HIGH ",I]})}),t.jsxs("div",{className:re.cardCorner,children:[t.jsx("div",{className:re.cardValue,children:d[e.value]}),t.jsx("div",{className:re.cardSuit,children:u[e.suit]})]}),t.jsx("div",{className:re.cardCenter,children:u[e.suit]}),t.jsxs("div",{className:`${re.cardCorner} ${re.bottomRight}`,children:[t.jsx("div",{className:re.cardValue,children:d[e.value]}),t.jsx("div",{className:re.cardSuit,children:u[e.suit]})]})]},`${e.value}-${e.suit}-${s}`)};return t.jsx("div",{className:`${re.cardsRow} ${"dealing"===c?re.dealingPhase:""} ${"revealing"===c?re.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return n||r||l?(n&&(e[0]={...n}),r&&(e[2]={...r}),l&&(e[1]={...l}),e.map(((e,a)=>m(e,a)))):e.map(((e,a)=>m(e,a)))})()})},ie="_potDisplay_1o95d_2",ce="_potLabel_1o95d_18",oe=()=>{const{gameState:e}=L();if(!e)return null;const{pot:a=0}=e;return t.jsxs("div",{className:ie,children:[t.jsx("span",{className:ce,children:"POT"}),t.jsx(d,{amount:a,size:"large"})]})},de="_aceOverlay_1apr0_2",ue="_cardGlow_1apr0_14",me="_countdownRing_1apr0_24",_e="_countdownCircle_1apr0_34",he="_choiceButton_1apr0_43",pe="_highButton_1apr0_74",xe="_lowButton_1apr0_85",je="_timerDisplay_1apr0_96",ge="_waitingMessage_1apr0_109",Ne="_aceControlsBottom_1apr0_136",ve="_timerContainer_1apr0_150",ye="_aceButtonContainer_1apr0_158",fe="_choicePrompt_1apr0_165",be="_bottomChoiceButton_1apr0_174",Ce="_lowButtonBottom_1apr0_200",we="_highButtonBottom_1apr0_210",Te=({direction:e="up",color:a="currentColor",size:s=24})=>{const n="down"===e?"rotate(180deg)":"rotate(0deg)";return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:t.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},ke="_waitingTimer_egezv_2",Ie="_timerContent_egezv_16",Ae="_playerName_egezv_23",Se="_action_egezv_29",$e="_timerBar_egezv_35",Pe="_timerProgress_egezv_43",Ee=({playerName:e,action:a="deciding",duration:s=15e3})=>{const[n,r]=i.useState(s),l=i.useRef(Date.now());i.useEffect((()=>{l.current=Date.now(),r(s)}),[s]),i.useEffect((()=>{const e=setInterval((()=>{const a=Date.now()-l.current,t=Math.max(0,s-a);r(t),t<=0&&clearInterval(e)}),100);return()=>clearInterval(e)}),[s]);const c=(s-n)/s*100;return t.jsxs("div",{className:`panel-game ${ke}`,children:[t.jsxs("div",{className:Ie,children:[t.jsx("span",{className:Ae,children:e}),t.jsxs("span",{className:Se,children:["is ",a,"..."]})]}),t.jsx("div",{className:$e,children:t.jsx("div",{className:Pe,style:{width:`${c}%`}})})]})},Be="_countdownTimer_1r3bp_3",Le="_progressRing_1r3bp_19",qe="_progressRingBackground_1r3bp_25",Re="_progressRingCircle_1r3bp_31",Oe="_timeDisplay_1r3bp_40",De=({duration:e=15,isActive:a=!0})=>{const[s,n]=i.useState(e),r=i.useRef(Date.now());i.useEffect((()=>{a&&(r.current=Date.now(),n(e))}),[e,a]),i.useEffect((()=>{if(!a)return;const s=setInterval((()=>{const a=Math.floor((Date.now()-r.current)/1e3),t=Math.max(0,e-a);n(t),t<=0&&clearInterval(s)}),100);return()=>clearInterval(s)}),[e,a]);const l=s/e*100,c=50,o=44*Math.PI,d=o-l/100*o;return t.jsxs("div",{className:Be,children:[t.jsxs("svg",{className:Le,width:c,height:c,viewBox:"0 0 50 50",children:[t.jsx("circle",{className:qe,cx:25,cy:25,r:22,strokeWidth:3}),t.jsx("circle",{className:Re,cx:25,cy:25,r:22,strokeWidth:3,strokeDasharray:`${o} ${o}`,strokeDashoffset:d,style:{stroke:(()=>{const a=s/e*100;return a>66?"var(--color-ready)":a>33?"var(--accent)":"var(--secondary)"})()}})]}),t.jsxs("div",{className:Oe,children:[s,"s"]})]})},ze=({card:a,isCurrentPlayersTurn:s,bottomPosition:n=!1})=>{const{socket:r}=e(),{gameState:l}=L(),[c,o]=i.useState(null),d=e=>{null===c&&(o(e),r.emit("chooseAceValue",{isAceLow:e}))},u=l.players[l.currentPlayerId]?.name||"Current player";return n?s?t.jsxs("div",{className:`panel-game ${Ne}`,children:[t.jsx("div",{className:ve,children:t.jsx(De,{duration:15,isActive:!0})}),t.jsxs("div",{className:ye,children:[t.jsx("span",{className:fe,children:"ACE VALUE:"}),t.jsxs("button",{className:`${be} ${Ce}`,onClick:()=>d(!0),disabled:null!==c,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx(Te,{direction:"down",size:16}),t.jsx("span",{children:"LOW"})]}),t.jsxs("button",{className:`${be} ${we}`,onClick:()=>d(!1),disabled:null!==c,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"HIGH"}),t.jsx(Te,{direction:"up",size:16})]})]})]}):t.jsx(Ee,{playerName:u,action:"choosing ace value",duration:E.DECISION_DURATION}):t.jsxs("div",{className:de,children:[t.jsx("div",{className:ue}),s&&t.jsx("svg",{className:me,children:t.jsx("circle",{className:_e,cx:"60",cy:"87",r:"80",style:{strokeDasharray:countdown/15*502+" 502"}})}),s?t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`${he} ${pe}`,onClick:()=>d(!1),disabled:null!==c,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx(Te,{direction:"up",size:20}),t.jsx("span",{children:"HIGH"})]}),t.jsxs("button",{className:`${he} ${xe}`,onClick:()=>d(!0),disabled:null!==c,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"LOW"}),t.jsx(Te,{direction:"down",size:20})]}),t.jsxs("div",{className:je,children:[countdown,"s"]})]}):t.jsxs("div",{className:ge,children:[u," is choosing..."]})]})},Me="_bettingOverlay_1q32g_2",Fe="_timerContainer_1q32g_26",Ge="_betButton_1q32g_57",Ye="_passButton_1q32g_84",Ue="_amountButton_1q32g_96",We="_customButton_1q32g_108",He="_amountPill_1q32g_120",Ve="_potButtonWrapper_1q32g_137",Je="_customInput_1q32g_142",Ke="_betInput_1q32g_152",Qe="_confirmButton_1q32g_172",Xe="_cancelButton_1q32g_173",Ze="_potButton_1pkys_3",ea="_glowEffect_1pkys_37",aa="_potLabel_1pkys_53",sa="_currencyPill_1pkys_63",ta="_disabled_1pkys_102",na=({amount:e,disabled:a,onClick:s,...n})=>t.jsxs("button",{className:`${Ze} ${a?ta:""}`,onClick:s,disabled:a,"aria-label":`Bet the pot: ${e} chips`,"data-gamepad-focusable":"true",...n,children:[t.jsx("div",{className:ea}),t.jsx("span",{className:aa,children:"POT"}),t.jsx("div",{className:sa,children:t.jsx(d,{amount:e,size:"small"})})]}),ra=({isCurrentPlayersTurn:a})=>{const{gameState:s,placeBet:n}=L(),{socket:r}=e(),[l,c]=i.useState(""),[o,u]=i.useState(!1);if(!s||!a)return t.jsx(Ee,{playerName:s?.players[s.currentPlayerId]?.name||"Player",action:"betting",duration:E.BETTING_DURATION});const{pot:m,firstCard:_,secondCard:h,players:p,currentPlayerId:x}=s,j=p[x],g=j?.balance||0;Math.abs(_.numericValue-h.numericValue);const v=Math.min(m,g),y=[1,5,10,20,50,100].filter((e=>e<=v)).slice(-3),f=e=>{e>0&&e<=v&&(n(e),u(!1))},b=()=>{const e=parseInt(l);!isNaN(e)&&e>0&&e<=v&&(f(e),c(""))};return t.jsxs("div",{className:`panel-game ${Me}`,children:[t.jsx("div",{className:Fe,children:t.jsx(De,{duration:30,isActive:!0})}),o?t.jsxs("div",{className:Je,children:[t.jsx(N,{title:"Enter Custom Bet",type:"number",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&b(),placeholder:`1-${v}`,min:"1",max:v,autoFocus:!0,className:Ke}),t.jsx("button",{onClick:b,className:Qe,"data-gamepad-focusable":"true",children:$}),t.jsx("button",{onClick:()=>{u(!1),c("")},className:Xe,"data-gamepad-focusable":"true",children:P})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:`${Ge} ${Ye}`,onClick:()=>{n(0)},"data-gamepad-focusable":"true",autoFocus:!0,children:t.jsx("span",{children:"PASS"})}),y.map((e=>t.jsx("button",{className:`${Ge} ${Ue}`,onClick:()=>f(e),"data-gamepad-focusable":"true",children:t.jsx("div",{className:He,children:t.jsx(d,{amount:e,size:"small"})})},e))),v===m&&t.jsx("div",{className:Ve,children:t.jsx(na,{onClick:()=>f(m),disabled:!1,amount:m})}),t.jsx("button",{className:`${Ge} ${We}`,onClick:()=>u(!0),"data-gamepad-focusable":"true",children:t.jsx("span",{children:"CUSTOM"})})]})]})},la="_secondChanceOverlay_1sq4x_2",ia="_bridge_1sq4x_13",ca="_bridgeLine_1sq4x_20",oa="_matchBadge_1sq4x_57",da="_matchText_1sq4x_69",ua="_choiceContainer_1sq4x_78",ma="_timer_1sq4x_87",_a="_buttons_1sq4x_106",ha="_choiceButton_1sq4x_112",pa="_anteButton_1sq4x_139",xa="_passButton_1sq4x_151",ja="_buttonIcon_1sq4x_162",ga="_buttonText_1sq4x_168",Na="_buttonAmount_1sq4x_174",va="_waitingContainer_1sq4x_180",ya="_waitingMessage_1sq4x_187",fa="_secondChanceBottom_1sq4x_229",ba="_timerContainer_1sq4x_243",Ca="_bottomButtonContainer_1sq4x_251",wa="_choicePrompt_1sq4x_258",Ta="_bottomChoiceButton_1sq4x_267",ka="_anteButtonBottom_1sq4x_293",Ia="_passButtonBottom_1sq4x_302",Aa=({firstCard:a,secondCard:s,isCurrentPlayersTurn:n,bottomPosition:r=!1,indicatorOnly:l=!1})=>{const{gameState:c}=L(),{socket:o}=e(),[u,m]=i.useState(!1),[_,h]=i.useState(null),{anteAmount:p=1,players:x,currentPlayerId:j}=c,g=x[j],N=g?.name||"Player",v=e=>{o&&null===_&&(m(!0),h(e),o.emit("secondChance",{anteAgain:e}))};return a&&s&&(a.numericValue,s.numericValue),l?null:r?n?t.jsxs("div",{className:`panel-game ${fa}`,children:[t.jsx("div",{className:ba,children:t.jsx(De,{duration:15,isActive:!0})}),t.jsxs("div",{className:Ca,children:[t.jsx("span",{className:wa,children:"SECOND CHANCE:"}),t.jsxs("button",{className:`${Ta} ${ka}`,onClick:()=>v(!0),disabled:u||null!==_,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("span",{className:ja,children:S}),t.jsx("span",{children:"ANTE AGAIN"}),t.jsx(d,{amount:p,size:"small"})]}),t.jsxs("button",{className:`${Ta} ${Ia}`,onClick:()=>v(!1),disabled:u||null!==_,"data-gamepad-focusable":"true",children:[t.jsx("span",{children:"PASS"}),t.jsx("span",{className:ja,children:k})]})]})]}):t.jsx(Ee,{playerName:N,action:"deciding on second chance",duration:E.DECISION_DURATION}):t.jsxs("div",{className:la,children:[t.jsxs("div",{className:ia,children:[t.jsx("div",{className:ca}),t.jsx("div",{className:oa,children:t.jsx("span",{className:da,children:"MATCH!"})})]}),n?t.jsxs("div",{className:ua,children:[t.jsxs("div",{className:ma,children:[countdown,"s"]}),t.jsxs("div",{className:_a,children:[t.jsxs("button",{className:`${ha} ${pa}`,onClick:()=>v(!0),disabled:u||null!==_,"data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("span",{className:ja,children:S}),t.jsx("span",{className:ga,children:"ANTE AGAIN"}),t.jsx("span",{className:Na,children:t.jsx(d,{amount:p,size:"small"})})]}),t.jsxs("button",{className:`${ha} ${xa}`,onClick:()=>v(!1),disabled:u||null!==_,"data-gamepad-focusable":"true",children:[t.jsx("span",{className:ga,children:"PASS"}),t.jsx("span",{className:ja,children:k})]})]})]}):t.jsx("div",{className:va,children:t.jsxs("div",{className:ya,children:[N," is deciding..."]})})]})},Sa="_resultsContainer_upvys_2",$a="_messageArea_upvys_11",Pa="_resultBar_upvys_22",Ea="_playerName_upvys_66",Ba="_resultText_upvys_71",La="_winBar_upvys_78",qa="_winAmount_upvys_82",Ra="_lossBar_upvys_91",Oa="_lossAmount_upvys_95",Da="_penaltyBar_upvys_104",za="_penaltyText_upvys_108",Ma="_penaltyAmount_upvys_114",Fa="_animationContainer_upvys_124",Ga="_cautionTapeContainer_upvys_132",Ya="_cautionTape_upvys_132",Ua="_rainContainer_fxhyg_2",Wa="_fallingItem_fxhyg_10",Ha="_emoji_fxhyg_18",Va="_confetti_fxhyg_26",Ja=({type:e="emoji",items:a=[],count:s=10,animationDuration:n=2.5,className:r=""})=>t.jsx("div",{className:`${Ua} ${r}`,children:[...Array(s)].map(((r,l)=>(r=>{const l=r/s*n+.3*(Math.random()-.5),i=100*Math.random();switch(e){case"coin":return t.jsx("div",{className:Wa,style:{left:`${i}%`,animationDelay:`${l}s`,"--animation-duration":`${n}s`},children:t.jsx(v,{size:"large"})},r);case"confetti":const e=a.length>0?a:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"];return t.jsx("div",{className:`${Wa} ${Va}`,style:{left:`${i}%`,animationDelay:`${l}s`,"--animation-duration":1.2*n+"s",backgroundColor:e[Math.floor(Math.random()*e.length)]}},r);default:const s=a.length>0?a:["🎉"];return t.jsx("div",{className:Wa,style:{left:`${i}%`,animationDelay:`${l}s`,"--animation-duration":`${n}s`},children:t.jsx("span",{className:Ha,children:s[Math.floor(Math.random()*s.length)]})},r)}})(l)))}),Ka=({result:e,players:a})=>{const[s,n]=i.useState(!0);if(i.useEffect((()=>{n(!0);const e=setTimeout((()=>n(!1)),3e3);return()=>clearTimeout(e)}),[e]),!e)return null;const r=a[e.playerId]?.name||"Player",l=e.outcome;if("win"===l){const a=e.winnings||0,s=Math.min(a/500,1),n=Math.floor(10+40*s),l=Math.floor(5+20*s);return t.jsxs("div",{className:Sa,children:[t.jsxs("div",{className:Fa,children:[t.jsx(Ja,{type:"confetti",count:n,animationDuration:3,items:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"]}),t.jsx(Ja,{type:"coin",count:l,animationDuration:2})]}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${La}`,children:[t.jsx("span",{className:Ea,children:r}),t.jsx("span",{className:Ba,children:"WINS"}),e.winnings&&e.winnings>0&&t.jsx("span",{className:qa,children:t.jsx(d,{amount:e.winnings/2,size:"small"})})]})})]})}if("lose"===l){const a=e.betAmount||0,s=Math.min(a/500,1),n=Math.floor(8+22*s);let l;return l=a<50?["😢","😔","😕","👎","📉","💔","🗑️","🤦‍♂️"]:a<200?["😭","😩","🤦","💸","📉","😤","😣","🗑️","🤡","💩","🙈"]:["🤡","💩","😂","🤣","🗑️","💀","☠️","🪦","⚰️","🤪","😵‍💫","🙃","🤮"],t.jsxs("div",{className:Sa,children:[t.jsx("div",{className:Fa,children:t.jsx(Ja,{type:"emoji",items:l,count:n,animationDuration:2.5})}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${Ra}`,children:[t.jsx("span",{className:Ea,children:r}),t.jsx("span",{className:Ba,children:"LOST"}),e.betAmount&&e.betAmount>0&&t.jsx("span",{className:Oa,children:t.jsx(d,{amount:e.betAmount,size:"small"})})]})})]})}const c=(e.betAmount||0)*(e.isTripleAceTie?3:2),o=e.isTripleAceTie?15:8,u=e.isTripleAceTie?["💀","☠️","⚠️","🚨","⛔","💥","🔥","😱","🎰","💸"]:["⚠️","🚨","⛔","🔴","❌","💥","🎯","🎲"];return t.jsxs("div",{className:Sa,children:[t.jsxs("div",{className:Ga,children:[t.jsxs("div",{className:Ya,children:[t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]}),t.jsxs("div",{className:Ya,children:[t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),t.jsx("span",{children:e.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]})]}),t.jsx("div",{className:Fa,children:t.jsx(Ja,{type:"emoji",items:u,count:o,animationDuration:e.isTripleAceTie?2:3})}),t.jsx("div",{className:$a,children:t.jsxs("div",{className:`panel ${Pa} ${Da}`,children:[t.jsx("span",{className:Ea,children:r}),t.jsx("span",{className:Ba,children:e.isTripleAceTie?"TRIPLE":""}),t.jsxs("span",{className:za,children:[e.isTripleAceTie?"3x":"2x"," PENALTY"]}),t.jsx("span",{className:Ma,children:t.jsx(d,{amount:c,size:"small"})})]})})]})},Qa="_revealingOverlay_hpopv_2",Xa="_revealingContent_hpopv_26",Za="_playerName_hpopv_35",es="_actionText_hpopv_43",as="_betAmount_hpopv_51",ss=({playerName:e,betAmount:a})=>e&&a?t.jsx("div",{className:`panel-game ${Qa}`,children:t.jsxs("div",{className:Xa,children:[t.jsx("span",{className:Za,children:e}),t.jsx("span",{className:es,children:"bets"}),t.jsx("div",{className:as,children:t.jsx(d,{amount:a,size:"small"})})]})}):null,ts="_anteControls_68v5e_4",ns="_anteButton_68v5e_27",rs="_backOutButton_68v5e_27",ls="_sitOutHalfWidth_68v5e_27",is="_shimmerBorder_68v5e_110",cs="_buttonInfo_68v5e_125",os="_buttonLabel_68v5e_132",ds="_buttonAmount_68v5e_143",us="_notEnoughChipsText_68v5e_154",ms="_toggleLabel_b88gt_2",_s="_toggleInput_b88gt_9",hs="_toggleSlider_b88gt_15",ps="_toggleText_b88gt_64",xs="_loading_b88gt_86",js=()=>{const{preferences:a,toggleAutoAnte:s,loading:r}=n(),{gameState:l,playerReady:i}=L(),{socket:c}=e();return r?t.jsx("div",{className:xs,children:"Loading preferences..."}):t.jsxs("label",{className:ms,children:[t.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{const e=!a.autoAnte,t=await s();if(e&&t&&i){let e=null;if(c&&c.auth?.userId&&l?.players){const a=Object.keys(l.players);for(const s of a)if(l.players[s].userId===c.auth.userId){e=l.players[s];break}}const a=e?.isReady;a||i()}},className:_s,"data-gamepad-focusable":"true"}),t.jsx("span",{className:hs}),t.jsx("span",{className:ps,children:"Auto-Ante"})]})},gs=()=>{const{gameState:s,playerReady:n,playerUnready:r}=L(),{socket:l}=e(),{user:i}=a();if(!s)return null;const{players:c,anteAmount:o,phase:u}=s;if("waiting"!==u)return null;let m=null;if(l&&l.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.auth.userId){m=c[a];break}}else if(i&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.id){m=c[a];break}}const _=Number(m?.balance||0),h=m?.isReady,p=_>=o;return t.jsxs("div",{className:`panel-game ${ts}`,children:[h?t.jsxs("button",{className:rs,onClick:()=>{"function"==typeof r&&r()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:is}),t.jsx("div",{className:cs,children:t.jsx("span",{className:os,children:"BACK OUT"})})]}):t.jsxs(t.Fragment,{children:[t.jsx(js,{}),t.jsxs("button",{className:ns,onClick:n,disabled:!p,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[t.jsx("div",{className:is}),t.jsxs("div",{className:cs,children:[t.jsx("span",{className:os,children:"ANTE"}),t.jsx("span",{className:ds,children:t.jsx(d,{amount:o})})]})]}),t.jsxs("button",{className:`${rs} ${ls}`,onClick:()=>{l&&s&&i&&l.emit("sitOut",{gameId:s.id,userId:l.auth?.userId||i.id})},disabled:m?.isSittingOut,title:m?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[t.jsx("div",{className:is}),t.jsx("div",{className:cs,children:t.jsx("span",{className:os,children:"SIT OUT"})})]})]}),!h&&!p&&t.jsx("p",{className:us,children:"Not enough coins"})]})},Ns="_imBackOverlay_1wm7i_3",vs="_container_1wm7i_11",ys="_sittingOutText_1wm7i_21",fs="_imBackButton_1wm7i_30",bs="_buttonText_1wm7i_48",Cs="_helpText_1wm7i_66",ws=({onClick:e})=>t.jsx("div",{className:Ns,children:t.jsxs("div",{className:vs,children:[t.jsx("h3",{className:ys,children:"You are sitting out"}),t.jsx("button",{className:fs,onClick:e,"data-gamepad-focusable":"true",autoFocus:!0,children:t.jsx("span",{className:bs,children:"I'M BACK!"})}),t.jsx("p",{className:Cs,children:"Click to rejoin the game"})]})}),Ts=()=>{const{gameState:s}=L(),{socket:n}=e(),{user:r}=a();if(!s)return null;const{phase:l,currentPlayerId:i,players:c,waitingForAceDecision:o,waitingForSecondChance:d,firstCard:u,secondCard:m,result:_}=s,h=r?.id,p=c&&h?c[h]:null,x=h===i,j=p?.isSittingOut||!1;return t.jsxs("div",{className:ne.table,children:[t.jsx("div",{className:ne.feltTexture}),t.jsx(oe,{}),t.jsx(le,{}),o&&t.jsx("div",{className:ne.aceGlowEffect}),d&&t.jsx(Aa,{firstCard:u,secondCard:m,isCurrentPlayersTurn:x,indicatorOnly:!0}),!j&&t.jsxs(t.Fragment,{children:["betting"===l&&!o&&!d&&t.jsx(ra,{isCurrentPlayersTurn:x}),o&&t.jsx(ze,{card:u,isCurrentPlayersTurn:x,bottomPosition:!0}),d&&t.jsx(Aa,{firstCard:u,secondCard:m,isCurrentPlayersTurn:x,bottomPosition:!0})]}),"revealing"===l&&!j&&t.jsx(ss,{playerName:c[i]?.name||"Player",betAmount:c[i]?.currentBet||0}),"results"===l&&_&&!j&&t.jsx(Ka,{result:_,players:c}),"waiting"===l&&!j&&t.jsx(gs,{}),j&&t.jsx("div",{className:ne.sitOutOverlay,children:t.jsx(ws,{onClick:()=>{n&&s.id&&n.emit("imBack",{gameId:s.id})}})})]})},ks="_playersContainer_1p4he_1",Is="_playersTitle_1p4he_23",As="_playersList_1p4he_47",Ss="_currentPlayerGlow_1p4he_55",$s="_currentUser_1p4he_69",Ps="_playerInfo_1p4he_73",Es="_playerStatus_1p4he_81",Bs="_disconnectedIndicator_1p4he_88",Ls="_playerBalanceContainer_1p4he_95",qs="_playerBalance_1p4he_95",Rs="_balanceIncrease_1p4he_114",Os="_balanceDecrease_1p4he_118",Ds="_readyIndicator_1p4he_148",zs="_ready_1p4he_148",Ms="_notReady_1p4he_159",Fs="_sittingOut_1p4he_163",Gs="_emptyPlayerList_1p4he_178",Ys=()=>{const{gameState:a}=L(),{socket:s}=e(),n=i.useContext(r);if(i.useEffect((()=>{if(a?.players&&n){const e=Object.values(a.players).map((e=>e.userId)).filter(Boolean);e.length>0&&n.prefetchUsers(e)}}),[a?.players,n]),!a||!a.players)return t.jsx("div",{className:Gs,children:t.jsx("p",{children:"Waiting for game data..."})});const{players:l,currentPlayerId:c,gameTransactions:o=[]}=a,d=s?.auth?.userId,u=a.totals||{};return l&&0!==Object.keys(l).length?t.jsxs("div",{className:ks,children:[t.jsx("h3",{className:Is,children:"Scoreboard"}),t.jsx("div",{className:As,children:a.seats.filter((e=>null!==e&&l[e])).map((e=>{const a=l[e],s=e===c,n=a.userId===d;return a.disconnected,t.jsxs("div",{className:`\n                  ${s?"panel":"panel-alt"}\n                  ${s?Ss:""}\n                  ${n?$s:""}\n                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[t.jsxs("div",{className:Ps,children:[t.jsx(y,{userId:a.userId,size:"small",showName:!0,namePosition:"right",fontWeight:"bold"}),t.jsx("span",{className:Es,children:a.disconnected&&t.jsx("span",{className:Bs,title:"Player disconnected",children:"⚠️ Disconnected"})})]}),t.jsxs("div",{className:Ls,children:[t.jsx(Us,{balance:u[e]||0}),t.jsx("div",{className:`\n                    ${Ds} \n                    ${a.isSittingOut?Fs:a.isReady?zs:Ms}\n                  `,title:a.isSittingOut?"Sitting Out":a.isReady?"Ready":"Not Ready"})]})]},e)}))})]}):t.jsx("div",{className:Gs,children:t.jsx("p",{children:"Waiting for players to join..."})})},Us=({balance:e})=>{const[a,s]=i.useState(e),[n,r]=i.useState(""),l=i.useRef(null);return i.useEffect((()=>{if(e!==a){r(e>a?Rs:Os),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{r("")}),1e3),s(e)}return()=>{l.current&&clearTimeout(l.current)}}),[e]),t.jsx("span",{className:`${qs} ${n}`,children:t.jsx(d,{amount:e})})},Ws="_gameLogContainer_hejid_1",Hs="_gameLogHeader_hejid_16",Vs="_expandIcon_hejid_30",Js="_gameLogEntries_hejid_54",Ks="_logEntry_hejid_64",Qs="_logTime_hejid_89",Xs="_logMessage_hejid_96",Zs="_systemMessage_hejid_101",et="_emptyLog_hejid_112",at="_showMoreButton_hejid_120",st={turnPanel:"_turnPanel_1mzsb_2",leftSection:"_leftSection_1mzsb_15",win:"_win_1mzsb_22",lose:"_lose_1mzsb_27",penalty:"_penalty_1mzsb_32",pass:"_pass_1mzsb_37",cardsContainer:"_cardsContainer_1mzsb_43",playerName:"_playerName_1mzsb_49",action:"_action_1mzsb_56",amount:"_amount_1mzsb_65"},tt="_cardMini_tdd1b_2",nt="_red_tdd1b_18",rt="_black_tdd1b_22",lt="_rank_tdd1b_26",it="_aceIndicator_tdd1b_34",ct="_suit_tdd1b_53",ot="_cardPlaceholder_tdd1b_58",dt=({card:e})=>{if(!e)return t.jsx("div",{className:ot,children:"?"});const a=e.value||"?",s=e.suit||"?",n="♥"===s||"♦"===s||"hearts"===s||"diamonds"===s,r="A"===a,l=!0===e.isAceLow,i=r&&!l;return t.jsxs("div",{className:`${tt} ${n?nt:rt}`,children:[t.jsxs("span",{className:lt,children:[a,r&&(i?t.jsx("span",{className:it,children:"↑"}):l?t.jsx("span",{className:it,children:"↓"}):null)]}),t.jsx("span",{className:ct,children:(e=>{switch(e){case"hearts":case"♥":return b;case"diamonds":case"♦":return C;case"clubs":case"♣":return w;case"spades":case"♠":return T;default:return e||""}})(s)})]})},ut=({summary:e})=>{if(!e)return null;const a=()=>e.winAmount?e.winAmount/2:e.lossAmount?e.lossAmount:e.betAmount?e.betAmount:0;return t.jsxs("div",{className:`panel-alt ${st.turnPanel} ${(e=>{switch(e){case"win":return st.win;case"lose":return st.lose;case"penalty":case"triple_penalty":return st.penalty;case"pass":return st.pass;default:return st.default}})(e.action)}`,children:[t.jsxs("div",{className:st.leftSection,children:[t.jsxs("div",{className:st.cardsContainer,children:[t.jsx(dt,{card:e.cards?.left}),e.cards?.middle&&t.jsx(dt,{card:e.cards?.middle}),t.jsx(dt,{card:e.cards?.right})]}),t.jsx("span",{className:st.playerName,children:e.playerName}),t.jsx("span",{className:st.action,children:(e=>{switch(e){case"win":return"WON";case"lose":return"LOST";case"penalty":return"PENALTY";case"triple_penalty":return"TRIPLE PENALTY";case"pass":return"PASSED";case"bet":return"BET";default:return e?.toUpperCase()||""}})(e.action)})]}),a()>0&&t.jsx("div",{className:st.amount,children:t.jsx(d,{amount:a(),size:"small"})})]})},mt="_roundPanel_1npc7_2",_t="_dividerLine_1npc7_26",ht="_roundLabel_1npc7_38",pt=({roundNumber:e})=>t.jsxs("div",{className:`panel-alt ${mt}`,children:[t.jsx("div",{className:_t}),t.jsxs("span",{className:ht,children:["Round ",e]}),t.jsx("div",{className:_t})]}),xt=()=>{const{gameState:e}=L(),[a,s]=i.useState(!1);if(!e||!e.gameLog)return null;const n=e.gameLog||[],r=e.seats?e.seats.filter((e=>null!==e)).length:0,l=Math.max(r,4),[c,o]=i.useState(l);i.useEffect((()=>{a||o(l)}),[r,l,a]);const d=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=a?[]:n.slice(0,c);return t.jsxs("div",{className:Ws,children:[t.jsxs("h3",{className:Hs,onClick:()=>{s(!a),a&&o(l)},children:["Game Log",t.jsx("span",{className:Vs,children:a?"▶":"▼"})]}),!a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Js,children:0===n.length?t.jsx("div",{className:et,children:"No game events yet"}):u.map(((e,a)=>"turn"===e.type?t.jsx(ut,{summary:e},a):"round_start"===e.type?t.jsx(pt,{roundNumber:e.roundNumber},a):"system"===e.type||"error"===e.type?t.jsxs("div",{className:`${Ks} ${Zs}`,children:[t.jsx("span",{className:Qs,children:d(e.timestamp)}),t.jsx("span",{className:Xs,children:e.message})]},a):t.jsxs("div",{className:Ks,children:[t.jsx("span",{className:Qs,children:d(e.timestamp)}),t.jsx("span",{className:Xs,children:e.message})]},a)))}),n.length>c&&t.jsxs("div",{className:at,onClick:()=>{o((e=>e+Math.max(r,5)))},children:["Show ",Math.min(Math.max(r,5),n.length-c)," more",n.length-c>Math.max(r,5)&&` (${n.length-c} remaining)`]})]})]})},jt="_emojiReactions_1y1z5_1",gt="_toggleButton_1y1z5_8",Nt="_emojiPanel_1y1z5_35",vt="_emojiGrid_1y1z5_60",yt="_emojiButton_1y1z5_66",ft=()=>{const[s,n]=i.useState(!1),{socket:r}=e(),{gameState:l}=L(),{user:c}=a(),o=i.useRef(null);return i.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&n(!1)};return s&&(document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[s]),t.jsxs("div",{className:jt,ref:o,children:[t.jsx("button",{className:gt,onClick:()=>{n(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"😊"}),s&&t.jsx("div",{className:Nt,children:t.jsx("div",{className:vt,children:[{emoji:"🔥",name:"Fire",color:"#FF6B35"},{emoji:"😄",name:"Happy",color:"#FFD93D"},{emoji:"💩",name:"Poop",color:"#8B4513"},{emoji:"😎",name:"Cool",color:"#4A5568"},{emoji:"🤯",name:"Mind Blown",color:"#FFA500"},{emoji:"😈",name:"Devilish",color:"#9333EA"},{emoji:"😬",name:"Worried",color:"#FCD34D"},{emoji:"👏",name:"Applause",color:"#FBBF24"},{emoji:"😭",name:"Crying",color:"#3B82F6"},{emoji:"🤡",name:"Clown",color:"#EF4444"},{emoji:"💪",name:"Strong",color:"#F59E0B"},{emoji:"😅",name:"Nervous",color:"#60A5FA"},{emoji:"🎉",name:"Celebration",color:"#A855F7"},{emoji:"🤔",name:"Thinking",color:"#6B7280"},{emoji:"🙈",name:"See No Evil",color:"#A0522D"},{emoji:"😤",name:"Confident",color:"#DC2626"}].map(((e,a)=>t.jsx("button",{className:yt,onClick:()=>(e=>{r&&l&&c&&(r.emit("emojiReaction",{gameId:l.id,emoji:e.emoji,color:e.color,playerName:c.username}),n(!1))})(e),"data-gamepad-focusable":"true",title:e.name,style:{"--emoji-color":e.color},children:e.emoji},a)))})})]})},bt=({onReturnToLobby:s})=>{const[n,r]=i.useState(!1),{gameState:l,error:c,clearError:o}=L();f(!0),i.useEffect((()=>{if(c){const e=setTimeout((()=>{o()}),1e4);return()=>clearTimeout(e)}}),[c,o]);const{socket:d}=e(),{user:u}=a();if(!l)return t.jsx("div",{className:D,children:t.jsx("p",{children:"Loading game state..."})});l.phase;const m=u?.id;return l.players&&m&&l.players[m],t.jsxs("div",{className:`screen ${R}`,children:[t.jsxs("div",{className:`${O} mobile-scale-content`,children:[t.jsx(te,{handleLeaveGame:()=>{s&&s()},onModalStateChange:r}),c&&t.jsx("div",{className:z,children:t.jsx("p",{className:M,children:c})}),t.jsx("div",{className:F,children:t.jsx(Ts,{})}),t.jsxs("div",{className:G,children:[t.jsx(Ys,{}),t.jsx(xt,{})]})]}),!n&&t.jsx(ft,{})]})},Ct="_modalOverlay_jrbqi_1",wt="_modalContent_jrbqi_14",Tt="_passwordInput_jrbqi_34",kt="_modalActions_jrbqi_52",It="_modalButton_jrbqi_58",At="_cancelButton_jrbqi_69",St="_submitButton_jrbqi_78";function $t({isOpen:e,onClose:a,onSubmit:s,gameId:n}){const[r,l]=i.useState("");if(!e)return null;return t.jsx("div",{className:Ct,children:t.jsxs("div",{className:wt,children:[t.jsx("h2",{children:"Password Required"}),t.jsxs("p",{children:["Please enter the password for game ",t.jsx("strong",{children:n||""}),":"]}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),s(r),l("")},children:[t.jsx(N,{title:"Enter Game Password",type:"password",value:r,onChange:e=>l(e.target.value),className:Tt,autoFocus:!0,required:!0}),t.jsxs("div",{className:kt,children:[t.jsx("button",{type:"button",onClick:()=>{l(""),a()},className:`${It} ${At}`,"data-gamepad-focusable":"true",children:"Cancel"}),t.jsx("button",{type:"submit",className:`${It} ${St}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const Pt=()=>{const{gameId:a}=c(),n=o(),{socket:r,isConnected:d}=e(),[u,m]=i.useState(!0),[_,h]=i.useState(null),[p,x]=i.useState(!1),j=i.useRef(!1),g=i.useCallback((()=>{r&&d&&a&&(s.play("ui.leave"),r.emit("leaveGame",{gameId:a}),n("/"))}),[r,d,a,n]),N=i.useCallback((e=>{x(!1),r&&a&&e&&(h(null),r.emit("joinGame",{gameId:a,password:e}),m(!0))}),[r,a]),v=i.useCallback((()=>{x(!1),n("/")}),[n]);i.useEffect((()=>{h(null),x(!1),m(!0)}),[a]),i.useEffect((()=>{if(!r)return;const e=e=>{e&&e.game&&e.game.id===a&&(s.play("ui.join"),m(!1),h(null),x(!1))},t=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(x(!0),m(!1),h(null)):"Invalid password"===a?(h("Invalid password."),x(!0),m(!1)):"Game not found"===a?n("/"):"Game is full"===a?(h(a),m(!1),x(!1),setTimeout((()=>n("/")),3e3)):(h(a),m(!1),x(!1))};return r.on("gameJoined",e),r.on("error",t),()=>{r.off("gameJoined",e),r.off("error",t)}}),[r,a,n]),i.useEffect((()=>{r&&a&&!j.current&&(j.current=!0,m(!0),h(null),x(!1),r.emit("joinGame",{gameId:a}))}),[r,a]);const y=()=>{const{gameState:s}=L(),{socket:n}=e();return i.useEffect((()=>{const e=e=>{const a=n?.auth?.userId,t=a&&s?.players?s.players[a]:null;if(t?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[s,n]),t.jsxs(t.Fragment,{children:[t.jsx($t,{isOpen:p,onClose:v,onSubmit:N,gameId:a}),u&&t.jsx(l,{message:`Joining game ${a}...`}),_&&!u&&!p&&t.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[t.jsx("h2",{children:"An error occurred"}),t.jsx("p",{children:_}),t.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!u&&!_&&s&&t.jsx(bt,{onReturnToLobby:g})]})};return t.jsx(q,{gameId:a,children:t.jsx(y,{})})};export{Pt as default};
