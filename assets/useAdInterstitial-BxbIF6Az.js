import{c as F}from"./createLucideIcon-D-AJSOET.js";import{Z as e,$ as be,a2 as ye,ad as O,a9 as ae,aa as xe,a0 as Q,_ as R,ae as ce,ab as ge,af as _e,ag as je,Y as ie}from"./index-NRT9ESP6.js";import{b as o,i as ve}from"./vendor-CT7sGowS.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ce=F("arrow-left",Ne);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ke=F("arrow-right-left",we);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ae=F("arrow-right",Se);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$e=F("chart-column",Pe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ie=F("circle-question-mark",Te);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Le=F("download",Be);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ee=F("settings",Me);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Re=F("shopping-bag",ze);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],In=F("zap",Ue),De="_overlay_12fs3_1",Fe="_modal_12fs3_17",He="_header_12fs3_38",Oe="_closeButton_12fs3_55",Ge="_sectionHeader_12fs3_74",Ve="_settingDescription_12fs3_90",We="_errorMessage_12fs3_112",qe="_content_12fs3_122",Xe="_footer_12fs3_151",I={overlay:De,modal:Fe,header:He,closeButton:Oe,sectionHeader:Ge,settingDescription:Ve,errorMessage:We,content:qe,footer:Xe};let de=0;function G({title:n,onClose:t,children:s,footer:a,headerButtons:r,className:u="",overlayStyle:l,...h}){o.useEffect(()=>(++de===1&&document.body.classList.add("modal-open"),()=>{--de===0&&document.body.classList.remove("modal-open")}),[]);const p=e.jsx("div",{className:I.overlay,style:l,onClick:t,children:e.jsxs("div",{className:`${I.modal} ${u}`,onClick:y=>y.stopPropagation(),...h,children:[n&&e.jsxs("div",{className:I.header,children:[e.jsx("h2",{children:n}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r,e.jsx("button",{className:I.closeButton,onClick:t,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"√ó"})]})]}),e.jsx("div",{className:I.content,children:s}),a&&e.jsx("div",{className:I.footer,children:a})]})});return ve.createPortal(p,document.body)}const Ye="_toggleContainer_1gama_1",Ke="_toggleInput_1gama_5",Ze="_toggleLabel_1gama_11",Je="_toggleSlider_1gama_17",Qe="_toggleText_1gama_65",Z={toggleContainer:Ye,toggleInput:Ke,toggleLabel:Ze,toggleSlider:Je,toggleText:Qe},ue=({isChecked:n,onChange:t,label:s})=>e.jsx("div",{className:Z.toggleContainer,children:e.jsxs("label",{className:Z.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:n,onChange:t,className:Z.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:Z.toggleSlider}),s&&e.jsx("span",{className:Z.toggleText,children:s})]})}),Bn=({type:n="text",title:t="",...s})=>{const a=o.useRef(null);let r=null;try{r=be()?.enhanceInput}catch{console.warn("VirtualKeyboardProvider not found - GamepadInput working as regular input")}return o.useEffect(()=>{if(a.current&&r)return r(a.current,n,t)},[r,n,t]),e.jsx("input",{ref:a,type:n,"data-gamepad-focusable":"true",...s})},et="_userAvatarContainer_1f4zb_1",tt="_containerRight_1f4zb_6",at="_containerBelow_1f4zb_11",st="_avatar_1f4zb_16",nt="_small_1f4zb_34",rt="_medium_1f4zb_40",ot="_large_1f4zb_46",it="_avatarImageContainer_1f4zb_52",lt="_avatarImage_1f4zb_52",ct="_initialsPlaceholder_1f4zb_70",dt="_userInfo_1f4zb_84",ut="_username_1f4zb_92",mt="_premiumUsername_1f4zb_101",pt="_userTitle_1f4zb_106",ht="_playerCard_1f4zb_125",gt="_cardAppear_1f4zb_1",ft="_playerCardAvatar_1f4zb_154",bt="_playerCardImage_1f4zb_163",yt="_playerCardInitials_1f4zb_171",xt="_playerCardInfo_1f4zb_185",_t="_playerCardUsername_1f4zb_194",jt="_playerCardTitle_1f4zb_202",vt="_playerCardXP_1f4zb_210",Nt="_playerCardLevelXP_1f4zb_218",Ct="_separator_1f4zb_226",wt="_xpValue_1f4zb_230",kt="_loading_1f4zb_235",St="_shimmerBg_1f4zb_1",At="_avatarLoader_1f4zb_241",Pt="_shimmerOverlay_1f4zb_1",$t="_skeletonUsername_1f4zb_250",Tt="_skeletonTitle_1f4zb_260",It="_shimmerText_1f4zb_1",S={userAvatarContainer:et,containerRight:tt,containerBelow:at,avatar:st,small:nt,medium:rt,large:ot,avatarImageContainer:it,avatarImage:lt,initialsPlaceholder:ct,userInfo:dt,username:ut,premiumUsername:mt,userTitle:pt,playerCard:ht,cardAppear:gt,playerCardAvatar:ft,playerCardImage:bt,playerCardInitials:yt,playerCardInfo:xt,playerCardUsername:_t,playerCardTitle:jt,playerCardXP:vt,playerCardLevelXP:Nt,separator:Ct,xpValue:wt,loading:kt,shimmerBg:St,avatarLoader:At,shimmerOverlay:Pt,skeletonUsername:$t,skeletonTitle:Tt,shimmerText:It},Bt=({userId:n,size:t="medium",showName:s=!0,namePosition:a="right",className:r="",showTitle:u=!0,fontWeight:l="normal"})=>{const[h,p]=o.useState(!1),y=ye(n);if(!n)return null;if(!y){const j=S[t]||S.medium,M=s?S[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"";return e.jsxs("div",{className:`${S.userAvatarContainer} ${M} ${r}`,children:[e.jsx("div",{className:`${S.avatar} ${j} ${S.loading}`,children:e.jsx("div",{className:S.avatarLoader})}),s&&e.jsxs("div",{className:S.userInfo,children:[e.jsx("div",{className:S.skeletonUsername}),u&&e.jsx("div",{className:S.skeletonTitle})]})]})}const{username:g,profileImg:c,title:x,xp:C,level:d,isPremium:P}=y,T=O(g),b=Lt(T||"Unknown"),_=S[t]||S.medium,$=s?S[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"",v="https://api.in-between.live";let i=null;if(c)if(c.startsWith("http"))i=c;else if(c.includes("/uploads/")){const j=c.split("/").pop();i=`${v}/files/images/${j}`}else i=`${v}${c}`;return e.jsxs("div",{className:`${S.userAvatarContainer} ${$} ${r}`,children:[e.jsxs("div",{className:`${S.avatar} ${_}`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:S.avatarImageContainer,children:[i?e.jsx("img",{src:i,alt:`${g}'s avatar`,className:S.avatarImage,onError:j=>{console.error(`Failed to load profile image for ${g}:`,j),j.target.style.display="none",j.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:S.initialsPlaceholder,style:{display:i?"none":"flex"},children:b})]}),h&&e.jsxs("div",{className:S.playerCard,children:[e.jsx("div",{className:S.playerCardAvatar,children:i?e.jsx("img",{src:i,alt:`${g}'s avatar`,className:S.playerCardImage}):e.jsx("div",{className:S.playerCardInitials,children:b})}),e.jsxs("div",{className:S.playerCardInfo,children:[e.jsx("div",{className:S.playerCardUsername,children:e.jsx(ae,{username:g||"Unknown",showDiscriminator:!0})}),x&&e.jsx("div",{className:S.playerCardTitle,children:x}),d!==void 0&&C!==void 0&&e.jsxs("div",{className:S.playerCardLevelXP,children:["Level ",d," ",e.jsx("span",{className:S.separator,children:"‚Ä¢"})," ",e.jsxs("span",{className:S.xpValue,children:[Mt(C)," XP"]})]})]})]})]}),s&&e.jsxs("div",{className:S.userInfo,children:[e.jsx("div",{className:`${S.username} ${P?S.premiumUsername:""}`,style:{fontWeight:l},children:T||"Unknown"}),u&&x&&e.jsx("div",{className:S.userTitle,children:x})]})]})},Lt=n=>n.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),Mt=n=>n>=1e6?`${(n/1e6).toFixed(1).replace(/\.0$/,"")}M`:n>=1e3?`${(n/1e3).toFixed(1).replace(/\.0$/,"")}K`:n.toString(),Et="_iconButton_3xp6j_1",zt="_danger_3xp6j_31",Rt="_preferences_3xp6j_44",Ut="_stats_3xp6j_57",Dt="_store_3xp6j_70",me={iconButton:Et,default:"_default_3xp6j_18",danger:zt,preferences:Rt,stats:Ut,store:Dt},ee=({icon:n,title:t,onClick:s,variant:a="default",className:r="",...u})=>e.jsx("button",{className:`${me.iconButton} ${me[a]} ${r}`,onClick:s,title:t,type:"button",...u,children:n}),Ft="_currencyAmount_rl73n_1",Ht="_pillBackground_rl73n_17",Ot="_darkBackground_rl73n_28",ne={currencyAmount:Ft,pillBackground:Ht,darkBackground:Ot},Gt="_coinIcon_isycs_1",Vt="_small_isycs_13",Wt="_medium_isycs_17",qt="_large_isycs_21",pe={coinIcon:Gt,small:Vt,medium:Wt,large:qt},Xt=({size:n="small",className:t=""})=>{const s={small:15,medium:19,large:24},a=s[n]||s.small,r=o.useMemo(()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`,[]),u=o.useMemo(()=>`goldShine-${Math.random().toString(36).substr(2,9)}`,[]);return e.jsx("span",{className:`${pe.coinIcon} ${pe[n]} ${t}`,children:e.jsxs("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:u,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${r})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${u})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},q=({amount:n=0,size:t,background:s,customClass:a})=>{const r=[ne.currencyAmount,s==="dark"?ne.darkBackground:"",s==="pill"?ne.pillBackground:"",a||""].filter(Boolean).join(" "),u=typeof n=="number"?n:0;return e.jsxs("span",{className:r,children:[e.jsx(Xt,{size:t}),e.jsx("span",{children:u.toLocaleString()})]})},Yt="_noDataMessage_13uuv_2",Kt="_statsGrid_13uuv_9",Zt="_statLabel_13uuv_42",Jt="_statValue_13uuv_49",Qt="_statSuffix_13uuv_57",J={noDataMessage:Yt,statsGrid:Kt,statLabel:Zt,statValue:Jt,statSuffix:Qt},ea=({gameData:n})=>{const t=n.gameTransactions,s=n.players,a=o.useMemo(()=>{const l={};return Object.entries(s).forEach(([h,p])=>{l[h]=p.name}),t.forEach(h=>{h.playerId&&!l[h.playerId]&&(l[h.playerId]=h.playerName||"Unknown Player")}),l},[s,t]),r=o.useMemo(()=>{if(t.length===0)return[];const l=m=>m.toLocaleString(),h=t.filter(m=>m.transactionType==="Ante").reduce((m,A)=>m+Math.abs(A.amount),0),p=t.filter(m=>m.transactionType==="Bet").reduce((m,A)=>m+Math.abs(A.amount),0),y=t.filter(m=>m.transactionType==="Bet"),g=y.length>0?y.reduce((m,A)=>Math.abs(A.amount)>Math.abs(m.amount)?A:m,y[0]):null,c=t.reduce((m,A)=>A.potAmount>m?A.potAmount:m,0),x=t.filter(m=>m.transactionType==="2x"||m.transactionType==="3x"),C=x.reduce((m,A)=>m+Math.abs(A.amount),0),d={};y.forEach(m=>{d[m.playerId]=(d[m.playerId]||0)+1});let P=null,T=0;Object.entries(d).forEach(([m,A])=>{A>T&&(T=A,P=m)});const b={};y.forEach(m=>{b[m.playerId]||(b[m.playerId]={total:0,count:0}),b[m.playerId].total+=Math.abs(m.amount),b[m.playerId].count+=1});let _=null,$=0;Object.entries(b).forEach(([m,A])=>{const le=A.total/A.count;le>$&&($=le,_=m)});const v={};t.filter(m=>m.transactionType==="Win").forEach(m=>{v[m.playerId]=(v[m.playerId]||0)+1});let i=null,j=0;Object.entries(v).forEach(([m,A])=>{A>j&&(j=A,i=m)});const M={};x.forEach(m=>{M[m.playerId]=(M[m.playerId]||0)+1});let E=null,V=0;Object.entries(M).forEach(([m,A])=>{A>V&&(V=A,E=m)});const se=n.totals||{};let X=null,K=0,w=null,k=0;return Object.entries(se).forEach(([m,A])=>{A>K&&(K=A,X=m),A<k&&(k=A,w=m)}),[{key:"totalBets",label:"Total Bets Placed",value:y.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:h,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:p,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:c,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:g?Math.abs(g.amount):0,type:"currency",suffix:g?` by ${O(g.playerName)}`:""},{key:"biggestWinner",label:"Biggest Winner",value:X?O(a[X]||"Unknown Player"):"N/A",type:"text",suffix:X?` (+${l(K)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:w?O(a[w]||"Unknown Player"):"N/A",type:"text",suffix:w?` (${l(k)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:P?O(a[P]||"Unknown Player"):"N/A",type:"text",suffix:P?` (${l(T)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:_?O(a[_]||"Unknown Player"):"N/A",type:"text",suffix:_?` (avg: ${l(Math.round($))})`:""},{key:"mostWinning",label:"Most Winning Player",value:i?O(a[i]||"Unknown Player"):"N/A",type:"text",suffix:i?` (${l(j)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:x.length,type:"number",suffix:x.length>0?` (${l(C)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:E?O(a[E]||"Unknown Player"):"N/A",type:"text",suffix:E?` (${l(V)} penalties)`:""}]},[t,a,n.totals]),u=(l,h)=>l==="currency"?e.jsx(q,{amount:h,size:"small"}):l==="percentage"?`${(h*100).toFixed(1)}%`:l==="number"?h.toLocaleString():h;return r.length===0?e.jsx("p",{className:J.noDataMessage,children:"No statistics available for this game."}):e.jsx("div",{className:J.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:r.map(l=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:J.statLabel,children:l.label}),e.jsxs("div",{className:J.statValue,children:[u(l.type,l.value),l.suffix&&e.jsx("span",{className:J.statSuffix,children:l.suffix})]})]},l.key))})};let re;try{re=require("../../contexts/GameContext").useGameContext}catch{re=()=>({gameState:null})}const ta=({title:n="Download Transaction Log as CSV",gameState:t,...s})=>{const a=re(),r=t||a?.gameState,u=r?.gameTransactions||r?.gameData?.gameTransactions||[],l=r?._id||r?.id||"unknown",h=()=>{const p=Array.isArray(u)?u:[];if(p.length===0)return;let y=`Player,Transaction Type,Amount,Round,Timestamp
`;const g=[...p].map(d=>({...d,timestamp:d.timestamp?new Date(d.timestamp):new Date}));g.sort((d,P)=>d.timestamp-P.timestamp),g.forEach(d=>{const P=d.timestamp?new Date(d.timestamp).toLocaleString():"N/A",T=d.playerName||d.player||"Unknown Player",b=T.includes(",")?`"${T}"`:T;let _=d.transactionType||"Transaction";if(!d.transactionType&&d.reason){const $=d.reason.split(" ");_=$[0],$[0]==="Won"?_="Win":d.reason.includes("penalty")&&(_="Penalty")}y+=`${b},${_},${d.amount},${d.round||"N/A"},${P}
`});const c=new Blob([y],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(c),C=document.createElement("a");C.setAttribute("href",x),C.setAttribute("download",`game-${l}-transactions.csv`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)};return e.jsx(ee,{icon:e.jsx(Le,{size:20,style:{color:"white"}}),title:n,onClick:h,variant:"default",...s})},aa="_infoTable_67tp9_3",sa="_totalsTable_67tp9_3",na="_infoRow_67tp9_10",ra="_infoLabel_67tp9_19",oa="_infoValue_67tp9_25",ia="_totalRow_67tp9_33",la="_playerName_67tp9_42",ca="_totalAmount_67tp9_53",da="_paymentAmount_67tp9_53",ua="_positive_67tp9_59",ma="_negative_67tp9_63",pa="_paymentText_67tp9_67",ha="_paymentArrow_67tp9_74",ga="_noDataMessage_67tp9_84",fa="_optimizeButtonContainer_67tp9_91",ba="_optimizeButton_67tp9_91",ya="_optimizeIcon_67tp9_116",xa="_loadingMessage_67tp9_120",f={infoTable:aa,totalsTable:sa,infoRow:na,infoLabel:ra,infoValue:oa,totalRow:ia,playerName:la,totalAmount:ca,paymentAmount:da,positive:ua,negative:ma,paymentText:pa,paymentArrow:ha,noDataMessage:ga,optimizeButtonContainer:fa,optimizeButton:ba,optimizeIcon:ya,loadingMessage:xa},_a=({onClose:n,gameData:t})=>{const[s,a]=o.useState("info"),[r,u]=o.useState(0),[l,h]=o.useState(!1),p=t?.id||"unknown",y=o.useMemo(()=>t?.players||{},[t?.players]),g=o.useMemo(()=>{const b=t?.gameTransactions||[];return Array.isArray(b)?b:[]},[t?.gameTransactions]),c=o.useMemo(()=>{const b={};return Object.entries(y).forEach(([_,$])=>{b[_]=$.name}),g.forEach(_=>{_.playerId&&!b[_.playerId]&&(b[_.playerId]=_.playerName||"Unknown Player")}),b},[y,g]),x=o.useMemo(()=>t.totals||{},[t.totals]),C=o.useMemo(()=>t?.createdAt?new Date(t.createdAt).getTime():g.length>0?new Date(g[0].timestamp).getTime():Date.now(),[t?.createdAt,g]),d=o.useMemo(()=>t?.endedAt?new Date(t.endedAt).getTime():null,[t?.endedAt]);o.useEffect(()=>{const b=()=>{const $=(d||Date.now())-C;u($)};if(b(),!d){const _=setInterval(b,1e3);return()=>clearInterval(_)}},[C,d]);const P=b=>{const _=Math.floor(b/1e3),$=Math.floor(_/60),v=Math.floor($/60),i=_%60,j=$%60;return`${v.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},T=o.useMemo(()=>{if(Object.keys(x).length===2){const v=Object.entries(x),[i,j]=v[0],[M,E]=v[1];if(Math.abs(j+E)<.1){if(j>0)return[{from:M,fromName:c[M],to:i,toName:c[i],amount:Math.abs(j)}];if(E>0)return[{from:i,fromName:c[i],to:M,toName:c[M],amount:Math.abs(E)}]}}const b=[],_=Object.entries(x).filter(([,v])=>v<0).map(([v,i])=>({playerId:v,playerName:c[v]||"Unknown Player",amount:Math.abs(i)})),$=Object.entries(x).filter(([,v])=>v>0).map(([v,i])=>({playerId:v,playerName:c[v]||"Unknown Player",amount:i}));for(_.sort((v,i)=>i.amount-v.amount),$.sort((v,i)=>i.amount-v.amount);$.length>0&&_.length>0;){const v=$[0],i=_[0],j=Math.min(v.amount,i.amount);if(j>.01)b.push({from:i.playerId,fromName:i.playerName,to:v.playerId,toName:v.playerName,amount:j}),v.amount-=j,i.amount-=j,v.amount<.01&&$.shift(),i.amount<.01&&_.shift();else break}return b},[x,c]);return t?e.jsxs(G,{title:`Game Summary (${p})`,onClose:n,headerButtons:e.jsx(ta,{gameState:t}),style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${s==="info"?"active":""}`,onClick:()=>a("info"),"data-gamepad-focusable":"true",children:"Info"}),e.jsx("button",{type:"button",className:`tab-button ${s==="totals"?"active":""}`,onClick:()=>a("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{type:"button",className:`tab-button ${s==="stats"?"active":""}`,onClick:()=>a("stats"),"data-gamepad-focusable":"true",children:"Stats"})]}),s==="info"&&e.jsx("div",{className:"tab-content",children:e.jsxs("div",{className:f.infoTable,children:[e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Game Name:"}),e.jsx("span",{className:f.infoValue,children:p})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Privacy:"}),e.jsx("span",{className:f.infoValue,children:t?.settings?.isPrivate?"Private":"Public"})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Duration:"}),e.jsx("span",{className:f.infoValue,children:P(r)})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Rounds:"}),e.jsx("span",{className:f.infoValue,children:t?.roundCount||t?.round||1})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Players:"}),e.jsx("span",{className:f.infoValue,children:t?.totalPlayerCount||Object.keys(y).length})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Ante Amount:"}),e.jsx("span",{className:f.infoValue,children:e.jsx(q,{amount:t?.settings?.anteAmount||t?.anteAmount||1,size:"small"})})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Ace Choice:"}),e.jsx("span",{className:f.infoValue,children:t?.settings?.enableAceChoice?"Enabled":"Disabled"})]}),e.jsxs("div",{className:f.infoRow,children:[e.jsx("span",{className:f.infoLabel,children:"Second Chance:"}),e.jsx("span",{className:f.infoValue,children:t?.settings?.enableSecondChance?"Enabled":"Disabled"})]})]})}),s==="totals"&&e.jsx("div",{className:"tab-content",children:Object.keys(x).length===0?e.jsx("p",{className:f.noDataMessage,children:"No transactions recorded yet."}):e.jsxs(e.Fragment,{children:[l?e.jsx("div",{className:f.totalsTable,children:T.length===0?e.jsx("p",{className:f.noDataMessage,children:"No payments needed."}):T.map(b=>e.jsxs("div",{className:f.totalRow,children:[e.jsxs("span",{className:f.paymentText,children:[e.jsx("span",{className:f.playerName,children:e.jsx(ae,{username:b.fromName,showDiscriminator:!0})}),e.jsx(Ae,{size:16,className:f.paymentArrow}),e.jsx("span",{className:f.playerName,children:e.jsx(ae,{username:b.toName,showDiscriminator:!0})})]}),e.jsx("span",{className:f.paymentAmount,children:e.jsx(q,{amount:b.amount,size:"small"})})]},`${b.fromName}-${b.toName}-${b.amount}`))}):e.jsx("div",{className:f.totalsTable,children:Object.entries(x).map(([b,_])=>e.jsxs("div",{className:f.totalRow,children:[e.jsx("span",{className:f.playerName,children:e.jsx(ae,{username:c[b]||"Unknown Player",showDiscriminator:!0})}),e.jsx("span",{className:`${f.totalAmount} ${_>=0?f.positive:f.negative}`,children:e.jsx(q,{amount:_,size:"small"})})]},b))}),e.jsx("div",{className:f.optimizeButtonContainer,children:e.jsxs("button",{type:"button",className:f.optimizeButton,onClick:()=>h(!l),"data-gamepad-focusable":"true",children:[l?e.jsx(Ce,{size:14,className:f.optimizeIcon}):e.jsx(ke,{size:14,className:f.optimizeIcon}),l?"Return to totals":"Optimize ledger"]})})]})}),s==="stats"&&e.jsx(ea,{gameData:t})]}):e.jsx(G,{title:"Game Summary",onClose:n,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{className:f.loadingMessage,children:"Loading game data..."})})},ja="_leaderboardContainer_1al73_1",va="_leaderboardHeader_1al73_9",Na="_durationSelector_1al73_15",Ca="_durationButton_1al73_24",wa="_active_1al73_41",ka="_loadingMessage_1al73_48",Sa="_errorMessage_1al73_48",Aa="_emptyMessage_1al73_48",Pa="_loadingSpinner_1al73_60",$a="_leaderboardList_1al73_78",Ta="_leaderboardRow_1al73_88",Ia="_rankCell_1al73_102",Ba="_rank_1al73_102",La="_playerCell_1al73_113",Ma="_statsCell_1al73_118",B={leaderboardContainer:ja,leaderboardHeader:va,durationSelector:Na,durationButton:Ca,active:wa,loadingMessage:ka,errorMessage:Sa,emptyMessage:Aa,loadingSpinner:Pa,leaderboardList:$a,leaderboardRow:Ta,rankCell:Ia,rank:Ba,playerCell:La,statsCell:Ma},Ea=()=>{const[n,t]=o.useState([]),[s,a]=o.useState(!0),[r,u]=o.useState(null),[l,h]=o.useState("all"),p=o.useContext(xe),y=o.useCallback(async()=>{a(!0),u(null);try{const c=await fetch(`${Q}/leaderboard?duration=${l}`);if(!c.ok)throw new Error("Failed to fetch leaderboard");const x=await c.json();if(t(x.leaderboard||[]),p&&x.leaderboard){const C=x.leaderboard.map(d=>d.userId);p.prefetchUsers(C)}}catch(c){console.error("Error fetching leaderboard:",c),u(c.message)}finally{a(!1)}},[l]);o.useEffect(()=>{y()},[y]);const g=c=>c===1?"ü•á":c===2?"ü•à":c===3?"ü•â":`#${c}`;return e.jsxs("div",{className:B.leaderboardContainer,children:[e.jsx("div",{className:B.leaderboardHeader,children:e.jsxs("div",{className:B.durationSelector,children:[e.jsx("button",{type:"button",className:`${B.durationButton} ${l==="all"?B.active:""}`,onClick:()=>h("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{type:"button",className:`${B.durationButton} ${l==="30days"?B.active:""}`,onClick:()=>h("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),s?e.jsxs("div",{className:B.loadingMessage,children:[e.jsx("div",{className:B.loadingSpinner}),"Loading leaderboard..."]}):r?e.jsxs("div",{className:B.errorMessage,children:["Error: ",r]}):n.length===0?e.jsx("div",{className:B.emptyMessage,children:"No players found for this time period."}):e.jsx("div",{className:B.leaderboardList,"data-gamepad-scrollable":"true",tabIndex:"0",children:n.map(c=>e.jsxs("div",{className:`panel-alt ${B.leaderboardRow}`,children:[e.jsx("div",{className:B.rankCell,children:e.jsx("span",{className:B.rank,children:g(c.rank)})}),e.jsx("div",{className:B.playerCell,children:e.jsx(Bt,{userId:c.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:B.statsCell,children:e.jsx(q,{amount:c.totalProfit,size:"small"})})]},c.userId))})]})},za="_statsPlaceholder_1mas6_1",Ra="_statsGrid_1mas6_14",Ua="_statLabel_1mas6_47",Da="_statValue_1mas6_54",Fa="_statSuffix_1mas6_62",Ha="_historyContent_1mas6_77",Oa="_historyTable_1mas6_83",Ga="_loadingMessageFullHeight_1mas6_95",Va="_errorMessageFullHeight_1mas6_96",Wa="_statsPlaceholderFullHeight_1mas6_97",qa="_tableBody_1mas6_123",Xa="_tableHeader_1mas6_151",Ya="_gameNameHeader_1mas6_164",Ka="_playerCountHeader_1mas6_164",Za="_roundsHeader_1mas6_164",Ja="_endDateHeader_1mas6_164",Qa="_historyRow_1mas6_180",es="_gameNameCell_1mas6_193",ts="_playerCountCell_1mas6_201",as="_roundsCell_1mas6_201",ss="_endDateCell_1mas6_209",ns="_gameNameLink_1mas6_217",rs="_pageButton_1mas6_296",os="_pageInfo_1mas6_327",is="_errorMessage_1mas6_96",ls="_loadingMessage_1mas6_95",cs="_loadingSpinner_1mas6_370",ds="_dateMobile_1mas6_385",us="_dateDesktop_1mas6_389",N={statsPlaceholder:za,statsGrid:Ra,statLabel:Ua,statValue:Da,statSuffix:Fa,historyContent:Ha,historyTable:Oa,loadingMessageFullHeight:Ga,errorMessageFullHeight:Va,statsPlaceholderFullHeight:Wa,tableBody:qa,tableHeader:Xa,gameNameHeader:Ya,playerCountHeader:Ka,roundsHeader:Za,endDateHeader:Ja,historyRow:Qa,gameNameCell:es,playerCountCell:ts,roundsCell:as,endDateCell:ss,gameNameLink:ns,pageButton:rs,pageInfo:os,errorMessage:is,loadingMessage:ls,loadingSpinner:cs,dateMobile:ds,dateDesktop:us},ms=({onClose:n})=>{const{token:t}=R(),[s,a]=o.useState("leaderboard"),[r,u]=o.useState(!0),[l,h]=o.useState(null),[p,y]=o.useState({games:[],pagination:{}}),[g,c]=o.useState(0),[x,C]=o.useState(!1),[d,P]=o.useState(null),[T,b]=o.useState(null),[_,$]=o.useState(!0),[v,i]=o.useState(null),j=5;o.useEffect(()=>{(async()=>{u(!0),h(null);try{const k=await fetch(`${Q}/games/history?pageSize=${j}&pageNumber=${g}`,{headers:{Authorization:`Bearer ${t}`}});if(!k.ok)throw new Error("Failed to fetch game history");const m=await k.json();y(m)}catch(k){console.error("Error fetching game history:",k),h(k.message)}finally{u(!1)}})()},[t,g]),o.useEffect(()=>{(async()=>{$(!0),i(null);try{const k=await fetch(`${Q}/me/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!k.ok)throw new Error("Failed to fetch lifetime stats");const m=await k.json();b(m.stats)}catch(k){console.error("Error fetching lifetime stats:",k),i(k.message)}finally{$(!1)}})()},[t]);const M=()=>{g>0&&c(g-1)},E=()=>{p.pagination&&p.games.length===j&&c(g+1)},V=(w,k=!1)=>{if(!w)return"Unknown";const m=new Date(w);return k?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(m):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(m)},se=(w,k)=>typeof k=="number"?w==="currency"?e.jsx(q,{amount:k,size:"small"}):w==="percentage"?`${(k*100).toFixed(1)}%`:k.toLocaleString():typeof k=="boolean"?k?"Yes":"No":w==="date"||k instanceof Date?V(k):w==="number"?Number(k).toLocaleString():String(k),X=w=>w.roundCount||0,K=w=>{const k=p.games.find(m=>m.id===w);k&&(P(k),C(!0))};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{title:"Player Stats",onClose:n,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${s==="leaderboard"?"active":""}`,onClick:()=>a("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{type:"button",className:`tab-button ${s==="stats"?"active":""}`,onClick:()=>a("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{type:"button",className:`tab-button ${s==="history"?"active":""}`,onClick:()=>a("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),s==="leaderboard"&&e.jsx("div",{className:"tab-content",children:e.jsx(Ea,{})}),s==="stats"&&e.jsx("div",{className:"tab-content",children:_?e.jsxs("div",{className:N.loadingMessage,children:[e.jsx("div",{className:N.loadingSpinner}),"Loading your lifetime stats..."]}):v?e.jsxs("div",{className:N.errorMessage,children:["Error: ",v]}):!T||T.length===0?e.jsx("div",{className:N.statsPlaceholder,children:e.jsx("p",{children:"No lifetime statistics available."})}):e.jsx("div",{className:N.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:T.map((w,k)=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:N.statLabel,children:w.label}),e.jsxs("div",{className:N.statValue,children:[se(w.type,w.value),w.suffix&&e.jsx("span",{className:N.statSuffix,children:w.suffix})]})]},w.key||`stat-${k}`))})}),s==="history"&&e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:N.historyContent,children:r?e.jsx("div",{className:`panel-alt ${N.historyTable}`,children:e.jsx("div",{className:N.loadingMessageFullHeight,children:e.jsx("div",{className:N.loadingSpinner})})}):l?e.jsx("div",{className:`panel-alt ${N.historyTable}`,children:e.jsxs("div",{className:N.errorMessageFullHeight,children:["Error: ",l]})}):p.games.length===0?e.jsx("div",{className:`panel-alt ${N.historyTable}`,children:e.jsx("div",{className:N.statsPlaceholderFullHeight,children:e.jsx("p",{children:"No games found in your history."})})}):e.jsxs("div",{className:`panel-alt ${N.historyTable}`,children:[e.jsxs("div",{className:N.tableHeader,children:[e.jsx("div",{className:N.gameNameHeader,children:"Game"}),e.jsx("div",{className:N.playerCountHeader,children:"Players"}),e.jsx("div",{className:N.roundsHeader,children:"Rounds"}),e.jsx("div",{className:N.endDateHeader,children:"Ended"})]}),e.jsx("div",{className:N.tableBody,"data-gamepad-scrollable":"true",tabIndex:"0",children:p.games.map(w=>e.jsxs("div",{className:N.historyRow,children:[e.jsx("div",{className:N.gameNameCell,children:e.jsxs("span",{className:N.gameNameLink,onClick:()=>K(w.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",w.id]})}),e.jsx("div",{className:N.playerCountCell,children:w.totalPlayerCount}),e.jsx("div",{className:N.roundsCell,children:X(w)}),e.jsxs("div",{className:N.endDateCell,children:[e.jsx("span",{className:N.dateDesktop,children:V(w.endedAt)}),e.jsx("span",{className:N.dateMobile,children:V(w.endedAt,!0)})]})]},w.id))})]})}),e.jsxs("div",{className:N.pageInfo,children:[e.jsx("button",{type:"button",onClick:M,disabled:r||g===0,className:N.pageButton,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"‚Üê"}),"Page ",g+1,p.pagination&&p.pagination.total?` of ${Math.ceil(p.pagination.total/j)}`:"",e.jsx("button",{type:"button",onClick:E,disabled:r||!p.pagination||p.games.length<j,className:N.pageButton,"aria-label":"Next page","data-gamepad-focusable":"true",children:"‚Üí"})]})]})]}),x&&d&&e.jsx(_a,{gameData:d,onClose:()=>{C(!1),P(null)}})]})},Ln=({onModalStateChange:n,...t})=>{const[s,a]=o.useState(!1),r=()=>{a(!0)},u=()=>{a(!1)};return o.useEffect(()=>{n&&n(s)},[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:r,icon:e.jsx($e,{size:20,style:{color:"white"}}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...t}),s&&e.jsx(ms,{isOpen:s,onClose:u})]})},ps=({currentUsername:n,onUsernameChanged:t})=>{const[s,a]=o.useState(""),[r,u]=o.useState(!1),[l,h]=o.useState(""),[p,y]=o.useState(""),{token:g}=R(),{base:c,discriminator:x}=ce(n),C=async d=>{if(d.preventDefault(),h(""),y(""),u(!0),!g){h("You must be logged in to change your username"),u(!1);return}try{const P=await fetch(`${Q}/users/username`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({username:s})}),T=await P.json();if(!P.ok){h(T.message||"Failed to change username");return}const{base:b,discriminator:_}=ce(T.username);y(`Username changed to ${b}#${_}`),a(""),t&&t(T.username),setTimeout(()=>{window.location.reload()},1500)}catch{h("Network error. Please try again.")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("h4",{style:{margin:0},children:"Username"}),e.jsxs("span",{style:{color:"var(--text-primary)",fontWeight:500,fontSize:"0.95rem"},children:[c,x&&e.jsxs("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:["#",x]})]})]}),e.jsxs("form",{onSubmit:C,autoComplete:"off",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",name:"new-display-name",value:s,onChange:d=>a(d.target.value),placeholder:"Enter new username",minLength:2,maxLength:32,pattern:"[a-zA-Z0-9_\\-]+",required:!0,disabled:r,readOnly:!0,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true",style:{flexGrow:1,flexShrink:1,minWidth:0,padding:"8px 14px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-primary)",fontSize:"0.9rem",outline:"none",transition:"border-color 0.2s, background 0.2s",height:"36px"},onFocus:d=>{d.target.removeAttribute("readonly"),d.target.style.borderColor="var(--btn-tertiary-start)",d.target.style.background="rgba(255, 255, 255, 0.08)"},onBlur:d=>{d.target.setAttribute("readonly",!0),d.target.style.borderColor="rgba(255, 255, 255, 0.1)",d.target.style.background="rgba(255, 255, 255, 0.05)"}}),e.jsx("button",{type:"submit",disabled:r||!s.trim()||s.trim()===c,style:{background:r||!s.trim()||s.trim()===c?"#95a5a6":"linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",color:"var(--text-white)",border:"none",borderRadius:"34px",padding:"8px 16px",fontSize:"0.9rem",fontWeight:500,cursor:r||!s.trim()||s.trim()===c?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"120px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",flexShrink:0,height:"36px"},onMouseEnter:d=>{d.target.disabled||(d.target.style.background="linear-gradient(to right, var(--btn-tertiary-hover-start), var(--btn-tertiary-hover-end))",d.target.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.3)",d.target.style.transform="translateY(-1px)")},onMouseLeave:d=>{d.target.disabled||(d.target.style.background="linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",d.target.style.boxShadow="0 2px 5px rgba(0, 0, 0, 0.2)",d.target.style.transform="translateY(0)")},children:r?"Saving...":"Change"})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-subtle)",opacity:.6},children:"2-32 characters ‚Ä¢ Letters, numbers, underscores, hyphens"}),l&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"6px",color:"#f87171",fontSize:"0.875rem"},children:l}),p&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"6px",color:"#86efac",fontSize:"0.875rem"},children:p})]})]})},hs="_fileUploadContainer_z5fvc_1",gs="_fileInput_z5fvc_8",fs="_uploadButton_z5fvc_12",bs="_changeButton_z5fvc_37",ys="_previewContainer_z5fvc_53",xs="_imagePreview_z5fvc_61",_s="_audioPreview_z5fvc_70",js="_errorMessage_z5fvc_76",U={fileUploadContainer:hs,fileInput:gs,uploadButton:fs,changeButton:bs,previewContainer:ys,imagePreview:xs,audioPreview:_s,errorMessage:js},vs=({onUpload:n,currentFileUrl:t,acceptedFileTypes:s,previewType:a="image"})=>{const[r,u]=o.useState(!1),[l,h]=o.useState(null),p=o.useRef(null),y=async x=>{const C=x.target.files[0];if(!C){console.error("[FileUpload] No file selected");return}console.log("[FileUpload] File selected:",{name:C.name,type:C.type,size:C.size}),h(null),u(!0);try{console.log("[FileUpload] Calling onUpload function");const d=await n(C);console.log("[FileUpload] Upload result:",d),d?console.log("[FileUpload] Upload successful"):(console.error("[FileUpload] Upload failed"),h("Failed to upload file. Please try again."))}catch(d){console.error("[FileUpload] Error uploading file:",d),h("An error occurred during upload.")}finally{u(!1)}},g=()=>{p.current.click()},c=()=>t?a==="image"?e.jsx("div",{className:U.previewContainer,children:e.jsx("img",{src:t,alt:"Preview",className:U.imagePreview})}):a==="audio"?e.jsx("div",{className:U.previewContainer,children:e.jsx("audio",{controls:!0,src:t,className:U.audioPreview,children:"Your browser does not support the audio element."})}):null:null;return e.jsxs("div",{className:U.fileUploadContainer,children:[e.jsx("input",{type:"file",ref:p,onChange:y,accept:s,className:U.fileInput}),t&&c(),e.jsx("button",{type:"button",onClick:g,className:`${U.uploadButton} ${t?U.changeButton:""}`,disabled:r,"data-gamepad-focusable":"true",children:r?"Uploading...":t?"Change":"Upload"}),l&&e.jsx("div",{className:U.errorMessage,children:l})]})},Ns=()=>{const{token:n}=R(),{preferences:t,updateSelectedTitle:s}=ge(),[a,r]=o.useState([]),[u,l]=o.useState(!0),[h,p]=o.useState(null),y=o.useCallback(async()=>{try{l(!0);const c=await fetch(`${Q}/me/titles`,{headers:{Authorization:`Bearer ${n}`}});if(!c.ok)throw new Error("Failed to load titles");const x=await c.json();r(x)}catch(c){p(c.message)}finally{l(!1)}},[n]);o.useEffect(()=>{y()},[y]);const g=async c=>{try{await s(c)}catch{p("Failed to update title")}};return u?e.jsx("div",{className:I.loadingMessage,children:"Loading titles..."}):h?e.jsx("div",{className:I.errorMessage,children:h}):a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:[e.jsxs("div",{onClick:()=>g(""),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),g(""))},style:{display:"inline-flex",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle?"rgba(255, 255, 255, 0.08)":"var(--btn-tertiary-shadow)",border:t.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid var(--btn-tertiary-start)",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),a.map(c=>e.jsxs("div",{onClick:()=>g(c.title),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),g(c.title))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle===c.title?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:t.selectedTitle===c.title?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:c.title}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:c.description})]},c.title)),a.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"var(--text-muted)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},oe={back01:"/cards/back01.png",back02:"/cards/back02.png",back03:"/cards/back03.png",back04:"/cards/back04.png",back05:"/cards/back05.png",back06:"/cards/back06.png",back07:"/cards/back07.png",back08:"/cards/back08.png"},fe=()=>localStorage.getItem("selectedCardBack")||"back01",Mn=()=>{const n=fe();return oe[n]||oe.back01},Cs=n=>{oe[n]&&(localStorage.setItem("selectedCardBack",n),window.dispatchEvent(new CustomEvent("cardbackchange",{detail:n})))},he=[{id:"back01",image:"/cards/back01.png"},{id:"back02",image:"/cards/back02.png"},{id:"back03",image:"/cards/back03.png"},{id:"back04",image:"/cards/back04.png"},{id:"back05",image:"/cards/back05.png"},{id:"back06",image:"/cards/back06.png"},{id:"back07",image:"/cards/back07.png"},{id:"back08",image:"/cards/back08.png"}],ws=()=>{const[n,t]=o.useState("back01");o.useEffect(()=>{const a=fe();t(a)},[]);const s=a=>{t(a),Cs(a)};return e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",overflowY:"visible",paddingTop:"8px",paddingBottom:"8px",alignItems:"center",minHeight:"100px"},children:he.map((a,r)=>e.jsx("div",{onClick:()=>s(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),s(a.id))},style:{position:"relative",cursor:"pointer",flexShrink:0,transition:"transform 0.2s ease",transform:n===a.id?"scale(1.1)":"scale(1)",marginLeft:r===0?"8px":0,marginRight:r===he.length-1?"8px":0},children:e.jsx("div",{style:{width:"60px",height:"84px",backgroundImage:`url(${a.image})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",boxShadow:n===a.id?"0 0 0 3px var(--btn-tertiary-start), 0 4px 12px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"}})},a.id))})},ks=[{id:"default",name:"Default",description:"Orignal blue theme",primary:"#2c3e50",accent:"#3498db"},{id:"dark",name:"Dark Mode",description:"Lights out",primary:"#0d0d0d",accent:"#f39c12"},{id:"blue-steel",name:"Blue Steel",description:"Graphite & sky blue",primary:"#3d424a",accent:"#87ceeb"},{id:"lambeau",name:"Lambeau",description:"Go Pack Go!",primary:"#203731",accent:"#FFB612"},{id:"sunset",name:"Sunset",description:"Stunning twilight",primary:"#0c1929",accent:"#ff6b6b"},{id:"miami-vice",name:"Miami Vice",description:"Neon pink & cyan",primary:"#1a0f2e",accent:"#00d2d3"},{id:"purple",name:"Royal Purple",description:"Bold purple theme",primary:"#1a1a2e",accent:"#8e44ad"}],Ss=()=>{const[n,t]=o.useState("default");o.useEffect(()=>{const a=_e();t(a)},[]);const s=a=>{t(a),je(a)};return e.jsx("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:ks.map(a=>e.jsxs("div",{onClick:()=>s(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),s(a.id))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"50px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:n===a.id?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:n===a.id?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"3px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.primary,border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.accent,border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:a.name}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:a.description})]},a.id))})},As=({onClose:n,defaultTab:t="profile"})=>{const{user:s}=R(),{preferences:a,toggleAutoAnte:r,toggleMute:u,uploadProfileImg:l,loading:h}=ge(),[p,y]=o.useState(t);return h?e.jsx(G,{title:"Preferences",onClose:n,style:{maxWidth:600,height:"80vh"},children:e.jsx("div",{className:I.loadingMessage,children:"Loading preferences..."})}):e.jsxs(G,{title:"Preferences",onClose:n,style:{maxWidth:600,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${p==="profile"?"active":""}`,onClick:()=>y("profile"),"data-gamepad-focusable":"true",children:"Profile"}),e.jsx("button",{type:"button",className:`tab-button ${p==="game"?"active":""}`,onClick:()=>y("game"),"data-gamepad-focusable":"true",children:"Game Options"})]}),p==="profile"&&e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"panel-alt",children:e.jsx(ps,{currentUsername:s?.username,onUsernameChanged:g=>{console.log("Username changed to:",g)}})}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Profile Image"}),e.jsx(vs,{onUpload:l,currentFileUrl:a.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Title"}),e.jsx(Ns,{})]})]}),p==="game"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Mute Sound"}),e.jsx(ue,{isChecked:a.muted,onChange:u})]}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Auto-Ante"}),e.jsx(ue,{isChecked:a.autoAnte,onChange:r})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Theme"}),e.jsx(Ss,{})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Card Back"}),e.jsx(ws,{})]})]})]})},En=({onModalStateChange:n,inGame:t=!1})=>{const[s,a]=o.useState(!1),r=()=>{a(!0)},u=()=>{a(!1)};return o.useEffect(()=>{n&&n(s)},[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:r,icon:e.jsx(Ee,{size:20,style:{color:"white"}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),s&&e.jsx(As,{isOpen:s,onClose:u,defaultTab:t?"game":"profile"})]})},Ps=({onClose:n})=>e.jsxs(G,{title:"Game Rules",onClose:n,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Objective"}),e.jsx("div",{className:I.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Card Values"}),e.jsx("div",{className:I.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:I.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"Players take turns in seat order."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"Betting"}),e.jsxs("div",{className:I.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:I.sectionHeader,children:"POT Button"}),e.jsx("div",{className:I.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:I.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:I.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),zn=({title:n="View Game Rules",onModalStateChange:t,...s})=>{const[a,r]=o.useState(!1),u=()=>{r(!0)},l=()=>{r(!1)};return o.useEffect(()=>{t&&t(a)},[a,t]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{icon:e.jsx(Ie,{size:20,style:{color:"white"}}),title:n,onClick:u,variant:"default",...s}),a&&e.jsx(Ps,{onClose:l})]})},Rn=({onClick:n,...t})=>e.jsx(ee,{onClick:n,icon:e.jsx(Re,{size:20,style:{color:"white"}}),"aria-label":"Store",variant:"store",title:"Store",...t}),$s="_coinPacksGrid_1p81q_3",Ts="_coinPackCard_1p81q_50",Is="_coinAmount_1p81q_56",Bs="_productImage_1p81q_64",Ls="_productDescription_1p81q_78",Ms="_productPrice_1p81q_87",Es="_free_1p81q_94",zs="_paid_1p81q_98",Rs="_adButton_1p81q_103",L={coinPacksGrid:$s,coinPackCard:Ts,coinAmount:Is,productImage:Bs,productDescription:Ls,productPrice:Ms,free:Es,paid:zs,adButton:Rs};class Us{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`,this.subscriptionURL=`${this.API_URL}/subscription`}getAuthHeaders(t){return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getOfferingsByType(t,s){try{const a=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(t)}`,r=await fetch(a,{method:"GET",headers:this.getAuthHeaders(s),credentials:"include"});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error(l.error||`HTTP ${r.status}: Failed to fetch offerings`)}return(await r.json()).offerings||[]}catch(a){throw console.error("[PURCHASE_SERVICE] Error fetching offerings:",a),new Error(`Failed to fetch product offerings: ${a.message}`)}}async getAllOfferings(t){try{const s=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(t),credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.error||`HTTP ${s.status}: Failed to fetch offerings`)}return(await s.json()).offerings||[]}catch(s){throw console.error("[PURCHASE_SERVICE] Error fetching all offerings:",s),new Error(`Failed to fetch product offerings: ${s.message}`)}}async processPurchase(t,s){try{if(!t)throw new Error("Product ID is required");const a=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(s),credentials:"include",body:JSON.stringify({productId:t})});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.error||`HTTP ${a.status}: Purchase failed`)}return await a.json()}catch(a){throw console.error("[PURCHASE_SERVICE] Error processing purchase:",a),new Error(`Purchase failed: ${a.message}`)}}async getSubscriptionStatus(t){try{const s=await fetch(`${this.subscriptionURL}/status`,{method:"GET",headers:this.getAuthHeaders(t),credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.error||`HTTP ${s.status}: Failed to fetch subscription`)}return(await s.json()).subscription||{isPremium:!1}}catch(s){return console.error("[STORE_SERVICE] Error fetching subscription status:",s),{isPremium:!1}}}async cancelSubscription(t){try{const s=await fetch(`${this.subscriptionURL}/cancel`,{method:"POST",headers:this.getAuthHeaders(t),credentials:"include"});if(!s.ok){const a=await s.json().catch(()=>({}));throw new Error(a.error||`HTTP ${s.status}: Cancellation failed`)}return await s.json()}catch(s){throw console.error("[STORE_SERVICE] Error cancelling subscription:",s),new Error(`Cancellation failed: ${s.message}`)}}}const te=new Us,Un=({onClose:n})=>{const{token:t,user:s,refreshUserData:a}=R(),[r,u]=o.useState("coins"),[l,h]=o.useState([]),[p,y]=o.useState([]),[g,c]=o.useState(!0),[x,C]=o.useState(null),[d,P]=o.useState(null),T=o.useCallback(async()=>{try{c(!0),P(null);const i=await te.getOfferingsByType("coin",t);h([{id:"watch-ad",coinAmount:300,priceUSD:0,name:"Watch Ad",description:"Watch a short video ad to earn free coins!",imageUrl:null,isAd:!0},...i])}catch(i){console.error("Failed to load coin offerings:",i),P("Failed to load products. Please try again.")}finally{c(!1)}},[t]),b=o.useCallback(async()=>{try{const i=await te.getOfferingsByType("subscription",t);y(i)}catch(i){console.error("Failed to load upgrade offerings:",i)}},[t]);o.useEffect(()=>{t&&(T(),b())},[t,T,b]);const _=async i=>{try{if(C(i),P(null),i==="watch-ad"){C(null);return}await te.processPurchase(i,t),await a(),n()}catch(j){console.error("Purchase failed:",j),P(j.message||"Purchase failed. Please try again.")}finally{C(null)}},$=async()=>{try{C("cancel"),P(null),await te.cancelSubscription(t),await a()}catch(i){console.error("Cancel failed:",i),P(i.message||"Cancellation failed. Please try again.")}finally{C(null)}},v=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i);return g?e.jsx(G,{title:"Store",onClose:n,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(G,{title:"Store",onClose:n,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${r==="coins"?"active":""}`,onClick:()=>u("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"}),e.jsx("button",{type:"button",className:`tab-button ${r==="upgrade"?"active":""}`,onClick:()=>u("upgrade"),"data-gamepad-focusable":"true",children:"Upgrades"})]}),d&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:d}),r==="coins"&&e.jsx("div",{className:"tab-content",children:l.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{className:L.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:l.map(i=>e.jsxs("div",{className:`panel-alt ${L.coinPackCard}`,children:[e.jsx("h3",{className:L.coinAmount,children:e.jsx(q,{amount:i.coinAmount,size:"large"})}),e.jsx("div",{className:L.productImage,children:i.imageUrl&&e.jsx("img",{src:i.imageUrl,alt:i.name,onError:j=>{j.target.style.display="none"}})}),e.jsx("p",{className:L.productDescription,children:i.description}),e.jsx("div",{className:`${L.productPrice} ${i.isAd?L.free:L.paid}`,children:i.isAd?"FREE":v(i.priceUSD)}),e.jsx("button",{type:"button",onClick:()=>_(i.id),disabled:x===i.id||i.isAd,className:i.isAd?L.adButton:"btn btn-primary","data-gamepad-focusable":"true",children:x===i.id?"Processing...":i.isAd?"COMING SOON":"TEST BUY"})]},i.id))})}),r==="upgrade"&&e.jsx("div",{className:"tab-content",children:p.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No upgrades available at the moment."}):e.jsx("div",{className:L.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:p.map(i=>{const j=s?.subscription?.isPremium,M=x===i.id||x==="cancel";return e.jsxs("div",{className:`panel-alt ${L.coinPackCard}`,children:[e.jsx("h3",{className:L.coinAmount,style:{color:"#ff73fa"},children:i.name}),e.jsx("div",{className:L.productImage,children:i.imageUrl&&e.jsx("img",{src:i.imageUrl,alt:i.name,onError:E=>{E.target.style.display="none"}})}),e.jsx("p",{className:L.productDescription,children:i.description}),e.jsxs("div",{className:`${L.productPrice} ${L.paid}`,children:[v(i.priceUSD),"/month"]}),e.jsx("button",{type:"button",onClick:()=>j?$():_(i.id),disabled:M,className:j?"btn btn-danger":"btn btn-primary","data-gamepad-focusable":"true",style:j?{backgroundColor:"#e74c3c",borderColor:"#c0392b",color:"#ffffff"}:{background:"linear-gradient(135deg, #ff73fa, #d946ef)",borderColor:"#ff73fa"},children:M?"Processing...":j?"TEST CANCEL":"TEST SUBSCRIBE"})]},i.id)})})})]})},Ds="_adMobBannerContainer_pl20g_3",Fs="_banner_pl20g_17",Hs="_largeBanner_pl20g_22",Os="_mediumRectangle_pl20g_27",Gs="_placeholderContent_pl20g_40",Vs="_adMobLogo_pl20g_51",Ws="_adLabel_pl20g_58",W={adMobBannerContainer:Ds,banner:Fs,largeBanner:Hs,mediumRectangle:Os,placeholderContent:Gs,adMobLogo:Vs,adLabel:Ws},qs=({size:n="large"})=>{const{user:t}=R();if(!!t?.subscription?.isPremium)return null;const a=n==="large"?W.largeBanner:n==="banner"?W.banner:W.mediumRectangle,r=n==="large"?"320x100":n==="banner"?"320x50":"300x250";return e.jsx("div",{className:`${W.adMobBannerContainer} ${a}`,children:e.jsxs("div",{className:W.placeholderContent,children:[e.jsx("div",{className:W.adMobLogo,children:"Advertisement"}),e.jsxs("span",{className:W.adLabel,children:["Test Ad - ",r]})]})})},Xs="_adBannerContainer_hly9y_1",Ys="_desktopAd_hly9y_23",Ks="_mobileAd_hly9y_31",Zs="_adPlaceholder_hly9y_38",Js="_adLabel_hly9y_64",Qs="_hideAt1000_hly9y_80",en="_hideAt1200_hly9y_86",D={adBannerContainer:Xs,desktopAd:Ys,mobileAd:Ks,adPlaceholder:Zs,adLabel:Js,hideAt1000:Qs,hideAt1200:en},Dn=({hideAtWidth:n=1200})=>{const t=o.useRef(null),s=ie.isNativePlatform(),{user:a}=R(),r=!a?.subscription?.isPremium;if(o.useEffect(()=>{if(!s&&t.current&&window.adsbygoogle)try{t.current.querySelectorAll(".adsbygoogle").forEach(()=>{(window.adsbygoogle=window.adsbygoogle||[]).push({})})}catch(l){console.error("[AdBanner] Error loading ads:",l)}},[s]),s)return e.jsx(qs,{size:"large"});if(!r)return null;const u=n===1e3?D.hideAt1000:D.hideAt1200;return e.jsxs("div",{className:`${D.adBannerContainer} ${u}`,ref:t,children:[e.jsxs("div",{className:D.desktopAd,children:[e.jsx("div",{className:D.adPlaceholder,children:e.jsx("span",{className:D.adLabel,children:"Test Ad - 728x90"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"DESKTOP_BANNER_AD_UNIT_ID","data-ad-format":"horizontal"})]}),e.jsxs("div",{className:D.mobileAd,children:[e.jsx("div",{className:D.adPlaceholder,children:e.jsx("span",{className:D.adLabel,children:"Test Ad - 320x100"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"MOBILE_BANNER_AD_UNIT_ID","data-ad-format":"horizontal"})]})]})},tn="_adSideBannerContainer_1a0rk_1",an="_left_1a0rk_12",sn="_right_1a0rk_16",nn="_adPlaceholder_1a0rk_20",rn="_adLabel_1a0rk_44",on="_minWidth1000_1a0rk_52",ln="_minWidth1200_1a0rk_58",Y={adSideBannerContainer:tn,left:an,right:sn,adPlaceholder:nn,adLabel:rn,minWidth1000:on,minWidth1200:ln},Fn=({position:n="left",minWidth:t=1e3})=>{const s=o.useRef(null),a=ie.isNativePlatform(),{user:r}=R(),u=!r?.subscription?.isPremium;if(o.useEffect(()=>{if(!a&&s.current&&window.adsbygoogle)try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(h){console.error("[AdSideBanner] Error loading ad:",h)}},[a]),a||!u)return null;const l=t===1200?Y.minWidth1200:Y.minWidth1000;return e.jsxs("div",{className:`${Y.adSideBannerContainer} ${Y[n]} ${l}`,ref:s,children:[e.jsx("div",{className:Y.adPlaceholder,children:e.jsx("span",{className:Y.adLabel,children:"Test Ad - 160x600"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"VERTICAL_AD_UNIT_ID","data-ad-format":"vertical"})]})},cn="_interstitialOverlay_1nf80_3",dn="_interstitialContent_1nf80_26",un="_adContainer_1nf80_38",mn="_placeholderContent_1nf80_51",pn="_adMobLogo_1nf80_62",hn="_adTitle_1nf80_70",gn="_adDescription_1nf80_76",fn="_adSize_1nf80_83",bn="_closeButtonContainer_1nf80_91",yn="_closeButton_1nf80_91",xn="_countdown_1nf80_111",z={interstitialOverlay:cn,interstitialContent:dn,adContainer:un,placeholderContent:mn,adMobLogo:pn,adTitle:hn,adDescription:gn,adSize:fn,closeButtonContainer:bn,closeButton:yn,countdown:xn},_n=({onClose:n})=>{const[t,s]=o.useState(5),[a,r]=o.useState(!1),{user:u}=R(),l=!u?.subscription?.isPremium;if(o.useEffect(()=>{if(!l){n();return}const p=setInterval(()=>{s(y=>y<=1?(r(!0),clearInterval(p),0):y-1)},1e3);return()=>clearInterval(p)},[l,n]),!l)return null;const h=()=>{a&&n()};return e.jsx("div",{className:z.interstitialOverlay,children:e.jsxs("div",{className:z.interstitialContent,children:[e.jsx("div",{className:z.adContainer,children:e.jsxs("div",{className:z.placeholderContent,children:[e.jsx("div",{className:z.adMobLogo,children:"Advertisement"}),e.jsx("div",{className:z.adTitle,children:"Interstitial Ad Placeholder"}),e.jsx("div",{className:z.adDescription,children:"This is a test placeholder for mobile interstitial ads"}),e.jsx("div",{className:z.adSize,children:"Full Screen - 320x480+"})]})}),e.jsx("div",{className:z.closeButtonContainer,children:a?e.jsx("button",{type:"button",className:`btn btn-primary ${z.closeButton}`,onClick:h,children:"Close Ad"}):e.jsxs("div",{className:z.countdown,children:["Please wait ",t," second",t!==1?"s":"","..."]})})]})})},jn="_interstitialOverlay_1jjes_1",vn="_interstitialContent_1jjes_15",Nn="_adContainer_1jjes_24",Cn="_adPlaceholder_1jjes_38",wn="_adLabel_1jjes_52",kn="_closeButtonContainer_1jjes_76",Sn="_closeButton_1jjes_76",An="_countdown_1jjes_88",H={interstitialOverlay:jn,interstitialContent:vn,adContainer:Nn,adPlaceholder:Cn,adLabel:wn,closeButtonContainer:kn,closeButton:Sn,countdown:An},Hn=({onClose:n})=>{const[t,s]=o.useState(5),[a,r]=o.useState(!1),u=o.useRef(null),l=ie.isNativePlatform(),{user:h}=R(),p=!h?.subscription?.isPremium;if(o.useEffect(()=>{if(l)return;if(!p){n();return}if(u.current&&window.adsbygoogle)try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(c){console.error("[AdInterstitial] Error loading ad:",c)}const g=setInterval(()=>{s(c=>c<=1?(r(!0),clearInterval(g),0):c-1)},1e3);return()=>clearInterval(g)},[l,p,n]),l)return e.jsx(_n,{onClose:n});if(!p)return null;const y=()=>{a&&n()};return e.jsx("div",{className:H.interstitialOverlay,children:e.jsxs("div",{className:H.interstitialContent,children:[e.jsxs("div",{className:H.adContainer,ref:u,children:[e.jsx("div",{className:H.adPlaceholder,children:e.jsx("span",{className:H.adLabel,children:"Full Screen Ad"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"INTERSTITIAL_AD_UNIT_ID","data-ad-format":"auto","data-full-width-responsive":"true"})]}),e.jsx("div",{className:H.closeButtonContainer,children:a?e.jsx("button",{type:"button",className:`btn btn-primary ${H.closeButton}`,onClick:y,children:"Close"}):e.jsxs("div",{className:H.countdown,children:["Please wait ",t," second",t!==1?"s":"","..."]})})]})})},On=()=>{const[n,t]=o.useState(!1),s=o.useCallback(()=>{t(!0)},[]),a=o.useCallback(()=>{t(!1)},[]);return{shouldShowAd:n,showAd:s,hideAd:a}};export{Hn as A,G as B,q as C,Bn as G,ee as I,Ln as P,zn as R,Rn as S,ue as T,Bt as U,In as Z,En as a,Un as b,Dn as c,Fn as d,_a as e,Xt as f,Mn as g,On as u};
