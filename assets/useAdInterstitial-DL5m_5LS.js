import{Z as e,$ as _e,a2 as ve,ad as H,a9 as re,aa as je,a0 as ee,_ as U,ae as me,ab as be,af as Ce,ag as Ne,Y as de}from"./index-BuBMj0oT.js";import{b as i,i as we}from"./vendor-CT7sGowS.js";import{c as te}from"./createLucideIcon-D-AJSOET.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Se=te("chart-column",ke);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pe=te("circle-question-mark",Ae);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Te=te("download",$e);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Be=te("settings",Ie);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Ee=te("shopping-bag",Le),Me="_overlay_12fs3_1",Ue="_modal_12fs3_17",De="_header_12fs3_38",Re="_closeButton_12fs3_55",ze="_sectionHeader_12fs3_74",Oe="_settingDescription_12fs3_90",Fe="_errorMessage_12fs3_112",He="_content_12fs3_122",Ge="_footer_12fs3_151",A={overlay:Me,modal:Ue,header:De,closeButton:Re,sectionHeader:ze,settingDescription:Oe,errorMessage:Fe,content:He,footer:Ge};let pe=0;function G({title:n,onClose:a,children:s,footer:t,headerButtons:r,className:d="",overlayStyle:c,...h}){i.useEffect(()=>(++pe===1&&document.body.classList.add("modal-open"),()=>{--pe===0&&document.body.classList.remove("modal-open")}),[]);const u=e.jsx("div",{className:A.overlay,style:c,onClick:a,children:e.jsxs("div",{className:`${A.modal} ${d}`,onClick:f=>f.stopPropagation(),...h,children:[n&&e.jsxs("div",{className:A.header,children:[e.jsx("h2",{children:n}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r,e.jsx("button",{className:A.closeButton,onClick:a,"aria-label":"Close",type:"button","data-gamepad-focusable":"true",children:"√ó"})]})]}),e.jsx("div",{className:A.content,children:s}),t&&e.jsx("div",{className:A.footer,children:t})]})});return we.createPortal(u,document.body)}const qe="_toggleContainer_1gama_1",We="_toggleInput_1gama_5",Ve="_toggleLabel_1gama_11",Xe="_toggleSlider_1gama_17",Ye="_toggleText_1gama_65",J={toggleContainer:qe,toggleInput:We,toggleLabel:Ve,toggleSlider:Xe,toggleText:Ye},he=({isChecked:n,onChange:a,label:s})=>e.jsx("div",{className:J.toggleContainer,children:e.jsxs("label",{className:J.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:n,onChange:a,className:J.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:J.toggleSlider}),s&&e.jsx("span",{className:J.toggleText,children:s})]})}),fn=({type:n="text",title:a="",...s})=>{const t=i.useRef(null);let r=null;try{r=_e()?.enhanceInput}catch{console.warn("VirtualKeyboardProvider not found - GamepadInput working as regular input")}return i.useEffect(()=>{if(t.current&&r)return r(t.current,n,a)},[r,n,a]),e.jsx("input",{ref:t,type:n,"data-gamepad-focusable":"true",...s})},Ke="_userAvatarContainer_32qpa_1",Ze="_containerRight_32qpa_6",Je="_containerBelow_32qpa_11",Qe="_avatar_32qpa_16",et="_small_32qpa_34",tt="_medium_32qpa_40",at="_large_32qpa_46",st="_avatarImageContainer_32qpa_52",nt="_avatarImage_32qpa_52",rt="_initialsPlaceholder_32qpa_70",ot="_userInfo_32qpa_84",lt="_username_32qpa_92",it="_userTitle_32qpa_101",ct="_playerCard_32qpa_120",dt="_cardAppear_32qpa_1",ut="_playerCardAvatar_32qpa_149",mt="_playerCardImage_32qpa_158",pt="_playerCardInitials_32qpa_166",ht="_playerCardInfo_32qpa_180",gt="_playerCardUsername_32qpa_189",yt="_playerCardTitle_32qpa_197",ft="_playerCardXP_32qpa_205",bt="_playerCardLevelXP_32qpa_213",xt="_separator_32qpa_221",_t="_xpValue_32qpa_225",vt="_loading_32qpa_230",jt="_shimmerBg_32qpa_1",Ct="_avatarLoader_32qpa_236",Nt="_shimmerOverlay_32qpa_1",wt="_skeletonUsername_32qpa_245",kt="_skeletonTitle_32qpa_255",St="_shimmerText_32qpa_1",v={userAvatarContainer:Ke,containerRight:Ze,containerBelow:Je,avatar:Qe,small:et,medium:tt,large:at,avatarImageContainer:st,avatarImage:nt,initialsPlaceholder:rt,userInfo:ot,username:lt,userTitle:it,playerCard:ct,cardAppear:dt,playerCardAvatar:ut,playerCardImage:mt,playerCardInitials:pt,playerCardInfo:ht,playerCardUsername:gt,playerCardTitle:yt,playerCardXP:ft,playerCardLevelXP:bt,separator:xt,xpValue:_t,loading:vt,shimmerBg:jt,avatarLoader:Ct,shimmerOverlay:Nt,skeletonUsername:wt,skeletonTitle:kt,shimmerText:St},At=({userId:n,size:a="medium",showName:s=!0,namePosition:t="right",className:r="",showTitle:d=!0,fontWeight:c="normal"})=>{const[h,u]=i.useState(!1),f=ve(n);if(!n)return null;if(!f){const m=v[a]||v.medium,S=s?v[`container${t.charAt(0).toUpperCase()+t.slice(1)}`]:"";return e.jsxs("div",{className:`${v.userAvatarContainer} ${S} ${r}`,children:[e.jsx("div",{className:`${v.avatar} ${m} ${v.loading}`,children:e.jsx("div",{className:v.avatarLoader})}),s&&e.jsxs("div",{className:v.userInfo,children:[e.jsx("div",{className:v.skeletonUsername}),d&&e.jsx("div",{className:v.skeletonTitle})]})]})}const{username:b,profileImg:o,title:g,xp:x,level:l}=f,y=H(b),N=Pt(y||"Unknown"),$=v[a]||v.medium,k=s?v[`container${t.charAt(0).toUpperCase()+t.slice(1)}`]:"",L="https://api.in-between.live";let P=null;if(o)if(o.startsWith("http"))P=o;else if(o.includes("/uploads/")){const m=o.split("/").pop();P=`${L}/files/images/${m}`}else P=`${L}${o}`;return e.jsxs("div",{className:`${v.userAvatarContainer} ${k} ${r}`,children:[e.jsxs("div",{className:`${v.avatar} ${$}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsxs("div",{className:v.avatarImageContainer,children:[P?e.jsx("img",{src:P,alt:`${b}'s avatar`,className:v.avatarImage,onError:m=>{console.error(`Failed to load profile image for ${b}:`,m),m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:v.initialsPlaceholder,style:{display:P?"none":"flex"},children:N})]}),h&&e.jsxs("div",{className:v.playerCard,children:[e.jsx("div",{className:v.playerCardAvatar,children:P?e.jsx("img",{src:P,alt:`${b}'s avatar`,className:v.playerCardImage}):e.jsx("div",{className:v.playerCardInitials,children:N})}),e.jsxs("div",{className:v.playerCardInfo,children:[e.jsx("div",{className:v.playerCardUsername,children:e.jsx(re,{username:b||"Unknown",showDiscriminator:!0})}),g&&e.jsx("div",{className:v.playerCardTitle,children:g}),l!==void 0&&x!==void 0&&e.jsxs("div",{className:v.playerCardLevelXP,children:["Level ",l," ",e.jsx("span",{className:v.separator,children:"‚Ä¢"})," ",e.jsxs("span",{className:v.xpValue,children:[$t(x)," XP"]})]})]})]})]}),s&&e.jsxs("div",{className:v.userInfo,children:[e.jsx("div",{className:v.username,style:{fontWeight:c},children:y||"Unknown"}),d&&g&&e.jsx("div",{className:v.userTitle,children:g})]})]})},Pt=n=>n.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().substring(0,2),$t=n=>n>=1e6?`${(n/1e6).toFixed(1).replace(/\.0$/,"")}M`:n>=1e3?`${(n/1e3).toFixed(1).replace(/\.0$/,"")}K`:n.toString(),Tt="_iconButton_3xp6j_1",It="_danger_3xp6j_31",Bt="_preferences_3xp6j_44",Lt="_stats_3xp6j_57",Et="_store_3xp6j_70",ge={iconButton:Tt,default:"_default_3xp6j_18",danger:It,preferences:Bt,stats:Lt,store:Et},ae=({icon:n,title:a,onClick:s,variant:t="default",className:r="",...d})=>e.jsx("button",{className:`${ge.iconButton} ${ge[t]} ${r}`,onClick:s,title:a,type:"button",...d,children:n}),Mt="_currencyAmount_rl73n_1",Ut="_pillBackground_rl73n_17",Dt="_darkBackground_rl73n_28",le={currencyAmount:Mt,pillBackground:Ut,darkBackground:Dt},Rt="_coinIcon_isycs_1",zt="_small_isycs_13",Ot="_medium_isycs_17",Ft="_large_isycs_21",ye={coinIcon:Rt,small:zt,medium:Ot,large:Ft},Ht=({size:n="small",className:a=""})=>{const s={small:15,medium:19,large:24},t=s[n]||s.small,r=i.useMemo(()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`,[]),d=i.useMemo(()=>`goldShine-${Math.random().toString(36).substr(2,9)}`,[]);return e.jsx("span",{className:`${ye.coinIcon} ${ye[n]} ${a}`,children:e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${r})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${d})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},Y=({amount:n=0,size:a,background:s,customClass:t})=>{const r=[le.currencyAmount,s==="dark"?le.darkBackground:"",s==="pill"?le.pillBackground:"",t||""].filter(Boolean).join(" "),d=typeof n=="number"?n:0;return e.jsxs("span",{className:r,children:[e.jsx(Ht,{size:a}),e.jsx("span",{children:d.toLocaleString()})]})},Gt="_noDataMessage_13uuv_2",qt="_statsGrid_13uuv_9",Wt="_statLabel_13uuv_42",Vt="_statValue_13uuv_49",Xt="_statSuffix_13uuv_57",Q={noDataMessage:Gt,statsGrid:qt,statLabel:Wt,statValue:Vt,statSuffix:Xt},Yt=({gameData:n})=>{const a=n.gameTransactions,s=n.players,t=i.useMemo(()=>{const c={};return Object.entries(s).forEach(([h,u])=>{c[h]=u.name}),a.forEach(h=>{h.playerId&&!c[h.playerId]&&(c[h.playerId]=h.playerName||"Unknown Player")}),c},[s,a]),r=i.useMemo(()=>{if(a.length===0)return[];const c=p=>p.toLocaleString(),h={};a.forEach(p=>{h[p.playerId]||(h[p.playerId]=[]),h[p.playerId].push(p)});const u=n.round||1,f=n.deckCount||1,b=a.filter(p=>p.transactionType==="Ante").reduce((p,w)=>p+Math.abs(w.amount),0),o=a.filter(p=>p.transactionType==="Bet").reduce((p,w)=>p+Math.abs(w.amount),0),g=a.filter(p=>p.transactionType==="Bet"),x=g.length>0?g.reduce((p,w)=>Math.abs(w.amount)>Math.abs(p.amount)?w:p,g[0]):null,l=a.reduce((p,w)=>w.potAmount>p?w.potAmount:p,0),y=a.filter(p=>p.transactionType==="2x"||p.transactionType==="3x"),N=y.reduce((p,w)=>p+Math.abs(w.amount),0),$={};g.forEach(p=>{$[p.playerId]=($[p.playerId]||0)+1});let k=null,L=0;Object.entries($).forEach(([p,w])=>{w>L&&(L=w,k=p)});const P={};g.forEach(p=>{P[p.playerId]||(P[p.playerId]={total:0,count:0}),P[p.playerId].total+=Math.abs(p.amount),P[p.playerId].count+=1});let m=null,S=0;Object.entries(P).forEach(([p,w])=>{const ue=w.total/w.count;ue>S&&(S=ue,m=p)});const z={};a.filter(p=>p.transactionType==="Win").forEach(p=>{z[p.playerId]=(z[p.playerId]||0)+1});let O=null,q=0;Object.entries(z).forEach(([p,w])=>{w>q&&(q=w,O=p)});const K={};y.forEach(p=>{K[p.playerId]=(K[p.playerId]||0)+1});let V=null,Z=0;Object.entries(K).forEach(([p,w])=>{w>Z&&(Z=w,V=p)});const j=n.totals||{};let _=null,E=0,se=null,oe=0;return Object.entries(j).forEach(([p,w])=>{w>E&&(E=w,_=p),w<oe&&(oe=w,se=p)}),[{key:"totalDecks",label:"Total Decks",value:f,type:"number"},{key:"totalRounds",label:"Total Rounds",value:u,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:g.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:b,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:o,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:l,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:x?Math.abs(x.amount):0,type:"currency",suffix:x?` by ${H(x.playerName)}`:""},{key:"biggestWinner",label:"Biggest Winner",value:_?H(t[_]||"Unknown Player"):"N/A",type:"text",suffix:_?` (+${c(E)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:se?H(t[se]||"Unknown Player"):"N/A",type:"text",suffix:se?` (${c(oe)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:k?H(t[k]||"Unknown Player"):"N/A",type:"text",suffix:k?` (${c(L)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:m?H(t[m]||"Unknown Player"):"N/A",type:"text",suffix:m?` (avg: ${c(Math.round(S))})`:""},{key:"mostWinning",label:"Most Winning Player",value:O?H(t[O]||"Unknown Player"):"N/A",type:"text",suffix:O?` (${c(q)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:y.length,type:"number",suffix:y.length>0?` (${c(N)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:V?H(t[V]||"Unknown Player"):"N/A",type:"text",suffix:V?` (${c(Z)} penalties)`:""}]},[a,t,n.deckCount,n.round,n.totals]),d=(c,h)=>c==="currency"?e.jsx(Y,{amount:h,size:"small"}):c==="percentage"?`${(h*100).toFixed(1)}%`:c==="number"?h.toLocaleString():h;return r.length===0?e.jsx("p",{className:Q.noDataMessage,children:"No statistics available for this game."}):e.jsx("div",{className:Q.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:r.map(c=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:Q.statLabel,children:c.label}),e.jsxs("div",{className:Q.statValue,children:[d(c.type,c.value),c.suffix&&e.jsx("span",{className:Q.statSuffix,children:c.suffix})]})]},c.key))})};let ie;try{ie=require("../../contexts/GameContext").useGameContext}catch{ie=()=>({gameState:null})}const Kt=({title:n="Download Transaction Log as CSV",gameState:a,...s})=>{const t=ie(),r=a||t?.gameState,d=r?.gameTransactions||r?.gameData?.gameTransactions||[],c=r?._id||r?.id||"unknown",h=()=>{const u=Array.isArray(d)?d:[];if(u.length===0)return;let f=`Player,Transaction Type,Amount,Round,Timestamp
`;const b=[...u].map(l=>({...l,timestamp:l.timestamp?new Date(l.timestamp):new Date}));b.sort((l,y)=>l.timestamp-y.timestamp),b.forEach(l=>{const y=l.timestamp?new Date(l.timestamp).toLocaleString():"N/A",N=l.playerName||l.player||"Unknown Player",$=N.includes(",")?`"${N}"`:N;let k=l.transactionType||"Transaction";if(!l.transactionType&&l.reason){const L=l.reason.split(" ");k=L[0],L[0]==="Won"?k="Win":l.reason.includes("penalty")&&(k="Penalty")}f+=`${$},${k},${l.amount},${l.round||"N/A"},${y}
`});const o=new Blob([f],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(o),x=document.createElement("a");x.setAttribute("href",g),x.setAttribute("download",`game-${c}-transactions.csv`),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x)};return e.jsx(ae,{icon:e.jsx(Te,{size:20,style:{color:"white"}}),title:n,onClick:h,variant:"default",...s})},Zt="_totalsTable_ugw0i_3",Jt="_settleUpTable_ugw0i_3",Qt="_totalRow_ugw0i_9",ea="_paymentRow_ugw0i_9",ta="_playerName_ugw0i_18",aa="_totalAmount_ugw0i_29",sa="_paymentAmount_ugw0i_29",na="_positive_ugw0i_35",ra="_negative_ugw0i_39",oa="_paymentText_ugw0i_43",la="_noDataMessage_ugw0i_54",ia="_loadingMessage_ugw0i_61",B={totalsTable:Zt,settleUpTable:Jt,totalRow:Qt,paymentRow:ea,playerName:ta,totalAmount:aa,paymentAmount:sa,positive:na,negative:ra,paymentText:oa,noDataMessage:la,loadingMessage:ia},ca=({onClose:n,gameData:a})=>{const[s,t]=i.useState("totals"),r=a?.id||"unknown",d=a?.settings?.isPrivate||!1,c=i.useMemo(()=>a?.players||{},[a?.players]),h=i.useMemo(()=>{const o=a?.gameTransactions||[];return Array.isArray(o)?o:[]},[a?.gameTransactions]),u=i.useMemo(()=>{const o={};return Object.entries(c).forEach(([g,x])=>{o[g]=x.name}),h.forEach(g=>{g.playerId&&!o[g.playerId]&&(o[g.playerId]=g.playerName||"Unknown Player")}),o},[c,h]),f=i.useMemo(()=>a.totals||{},[a.totals]),b=i.useMemo(()=>{if(Object.keys(f).length===2){const l=Object.entries(f),[y,N]=l[0],[$,k]=l[1];if(Math.abs(N+k)<.1){if(N>0)return[{from:$,fromName:u[$],to:y,toName:u[y],amount:Math.abs(N)}];if(k>0)return[{from:y,fromName:u[y],to:$,toName:u[$],amount:Math.abs(k)}]}}const o=[],g=Object.entries(f).filter(([,l])=>l<0).map(([l,y])=>({playerId:l,playerName:u[l]||"Unknown Player",amount:Math.abs(y)})),x=Object.entries(f).filter(([,l])=>l>0).map(([l,y])=>({playerId:l,playerName:u[l]||"Unknown Player",amount:y}));for(g.sort((l,y)=>y.amount-l.amount),x.sort((l,y)=>y.amount-l.amount);x.length>0&&g.length>0;){const l=x[0],y=g[0],N=Math.min(l.amount,y.amount);if(N>.01)o.push({from:y.playerId,fromName:y.playerName,to:l.playerId,toName:l.playerName,amount:N}),l.amount-=N,y.amount-=N,l.amount<.01&&x.shift(),y.amount<.01&&g.shift();else break}return o},[f,u]);return a?e.jsxs(G,{title:`Game Summary (${r})`,onClose:n,headerButtons:e.jsx(Kt,{gameState:a}),style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${s==="totals"?"active":""}`,onClick:()=>t("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{type:"button",className:`tab-button ${s==="stats"?"active":""}`,onClick:()=>t("stats"),"data-gamepad-focusable":"true",children:"Stats"}),d&&e.jsx("button",{type:"button",className:`tab-button ${s==="payouts"?"active":""}`,onClick:()=>t("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),s==="totals"&&e.jsx("div",{className:"tab-content",children:Object.keys(f).length===0?e.jsx("p",{className:B.noDataMessage,children:"No transactions recorded yet."}):e.jsx("div",{className:B.totalsTable,children:Object.entries(f).map(([o,g])=>e.jsxs("div",{className:B.totalRow,children:[e.jsx("span",{className:B.playerName,children:e.jsx(re,{username:u[o]||"Unknown Player",showDiscriminator:!0})}),e.jsx("span",{className:`${B.totalAmount} ${g>=0?B.positive:B.negative}`,children:e.jsx(Y,{amount:g,size:"small"})})]},o))})}),s==="stats"&&e.jsx(Yt,{gameData:a}),s==="payouts"&&d&&e.jsx("div",{className:"tab-content",children:b.length===0?e.jsx("p",{className:B.noDataMessage,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:B.settleUpTable,children:b.map(o=>e.jsxs("div",{className:B.paymentRow,children:[e.jsxs("span",{className:B.paymentText,children:[e.jsx("span",{className:B.playerName,children:e.jsx(re,{username:o.fromName,showDiscriminator:!0})})," pays"," ",e.jsx("span",{className:B.playerName,children:e.jsx(re,{username:o.toName,showDiscriminator:!0})})]}),e.jsx("span",{className:B.paymentAmount,children:e.jsx(Y,{amount:o.amount,size:"small"})})]},`${o.fromName}-${o.toName}-${o.amount}`))})})]}):e.jsx(G,{title:"Game Summary",onClose:n,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{className:B.loadingMessage,children:"Loading game data..."})})},da="_leaderboardContainer_1al73_1",ua="_leaderboardHeader_1al73_9",ma="_durationSelector_1al73_15",pa="_durationButton_1al73_24",ha="_active_1al73_41",ga="_loadingMessage_1al73_48",ya="_errorMessage_1al73_48",fa="_emptyMessage_1al73_48",ba="_loadingSpinner_1al73_60",xa="_leaderboardList_1al73_78",_a="_leaderboardRow_1al73_88",va="_rankCell_1al73_102",ja="_rank_1al73_102",Ca="_playerCell_1al73_113",Na="_statsCell_1al73_118",T={leaderboardContainer:da,leaderboardHeader:ua,durationSelector:ma,durationButton:pa,active:ha,loadingMessage:ga,errorMessage:ya,emptyMessage:fa,loadingSpinner:ba,leaderboardList:xa,leaderboardRow:_a,rankCell:va,rank:ja,playerCell:Ca,statsCell:Na},wa=()=>{const[n,a]=i.useState([]),[s,t]=i.useState(!0),[r,d]=i.useState(null),[c,h]=i.useState("all"),u=i.useContext(je),f=i.useCallback(async()=>{t(!0),d(null);try{const o=await fetch(`${ee}/leaderboard?duration=${c}`);if(!o.ok)throw new Error("Failed to fetch leaderboard");const g=await o.json();if(a(g.leaderboard||[]),u&&g.leaderboard){const x=g.leaderboard.map(l=>l.userId);u.prefetchUsers(x)}}catch(o){console.error("Error fetching leaderboard:",o),d(o.message)}finally{t(!1)}},[c]);i.useEffect(()=>{f()},[f]);const b=o=>o===1?"ü•á":o===2?"ü•à":o===3?"ü•â":`#${o}`;return e.jsxs("div",{className:T.leaderboardContainer,children:[e.jsx("div",{className:T.leaderboardHeader,children:e.jsxs("div",{className:T.durationSelector,children:[e.jsx("button",{type:"button",className:`${T.durationButton} ${c==="all"?T.active:""}`,onClick:()=>h("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{type:"button",className:`${T.durationButton} ${c==="30days"?T.active:""}`,onClick:()=>h("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),s?e.jsxs("div",{className:T.loadingMessage,children:[e.jsx("div",{className:T.loadingSpinner}),"Loading leaderboard..."]}):r?e.jsxs("div",{className:T.errorMessage,children:["Error: ",r]}):n.length===0?e.jsx("div",{className:T.emptyMessage,children:"No players found for this time period."}):e.jsx("div",{className:T.leaderboardList,"data-gamepad-scrollable":"true",tabIndex:"0",children:n.map(o=>e.jsxs("div",{className:`panel-alt ${T.leaderboardRow}`,children:[e.jsx("div",{className:T.rankCell,children:e.jsx("span",{className:T.rank,children:b(o.rank)})}),e.jsx("div",{className:T.playerCell,children:e.jsx(At,{userId:o.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:T.statsCell,children:e.jsx(Y,{amount:o.totalProfit,size:"small"})})]},o.userId))})]})},ka="_statsPlaceholder_1uz5o_1",Sa="_statsGrid_1uz5o_14",Aa="_statLabel_1uz5o_47",Pa="_statValue_1uz5o_54",$a="_statSuffix_1uz5o_62",Ta="_historyTable_1uz5o_77",Ia="_tableBody_1uz5o_89",Ba="_tableHeader_1uz5o_117",La="_gameNameHeader_1uz5o_130",Ea="_playerCountHeader_1uz5o_130",Ma="_roundsHeader_1uz5o_130",Ua="_endDateHeader_1uz5o_130",Da="_historyRow_1uz5o_146",Ra="_gameNameCell_1uz5o_159",za="_playerCountCell_1uz5o_167",Oa="_roundsCell_1uz5o_167",Fa="_endDateCell_1uz5o_175",Ha="_gameNameLink_1uz5o_183",Ga="_pageButton_1uz5o_262",qa="_pageInfo_1uz5o_293",Wa="_errorMessage_1uz5o_304",Va="_loadingMessage_1uz5o_325",Xa="_loadingSpinner_1uz5o_336",Ya="_dateMobile_1uz5o_351",Ka="_dateDesktop_1uz5o_355",C={statsPlaceholder:ka,statsGrid:Sa,statLabel:Aa,statValue:Pa,statSuffix:$a,historyTable:Ta,tableBody:Ia,tableHeader:Ba,gameNameHeader:La,playerCountHeader:Ea,roundsHeader:Ma,endDateHeader:Ua,historyRow:Da,gameNameCell:Ra,playerCountCell:za,roundsCell:Oa,endDateCell:Fa,gameNameLink:Ha,pageButton:Ga,pageInfo:qa,errorMessage:Wa,loadingMessage:Va,loadingSpinner:Xa,dateMobile:Ya,dateDesktop:Ka},Za=({onClose:n})=>{const{token:a}=U(),[s,t]=i.useState("leaderboard"),[r,d]=i.useState(!0),[c,h]=i.useState(null),[u,f]=i.useState({games:[],pagination:{}}),[b,o]=i.useState(0),[g,x]=i.useState(!1),[l,y]=i.useState(null),[N,$]=i.useState(null),[k,L]=i.useState(!0),[P,m]=i.useState(null),S=5;i.useEffect(()=>{(async()=>{d(!0),h(null);try{const _=await fetch(`${ee}/games/history?pageSize=${S}&pageNumber=${b}`,{headers:{Authorization:`Bearer ${a}`}});if(!_.ok)throw new Error("Failed to fetch game history");const E=await _.json();f(E)}catch(_){console.error("Error fetching game history:",_),h(_.message)}finally{d(!1)}})()},[a,b]),i.useEffect(()=>{(async()=>{L(!0),m(null);try{const _=await fetch(`${ee}/me/stats`,{headers:{Authorization:`Bearer ${a}`}});if(!_.ok)throw new Error("Failed to fetch lifetime stats");const E=await _.json();$(E.stats)}catch(_){console.error("Error fetching lifetime stats:",_),m(_.message)}finally{L(!1)}})()},[a]);const z=()=>{b>0&&o(b-1)},O=()=>{u.pagination&&u.games.length===S&&o(b+1)},q=(j,_=!1)=>{if(!j)return"Unknown";const E=new Date(j);return _?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(E):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(E)},K=(j,_)=>typeof _=="number"?j==="currency"?e.jsx(Y,{amount:_,size:"small"}):j==="percentage"?`${(_*100).toFixed(1)}%`:_.toLocaleString():typeof _=="boolean"?_?"Yes":"No":j==="date"||_ instanceof Date?q(_):j==="number"?Number(_).toLocaleString():String(_),V=j=>j.roundCount||0,Z=j=>{const _=u.games.find(E=>E.id===j);_&&(y(_),x(!0))};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{title:"Player Stats",onClose:n,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${s==="leaderboard"?"active":""}`,onClick:()=>t("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{type:"button",className:`tab-button ${s==="stats"?"active":""}`,onClick:()=>t("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{type:"button",className:`tab-button ${s==="history"?"active":""}`,onClick:()=>t("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),s==="leaderboard"&&e.jsx("div",{className:"tab-content",children:e.jsx(wa,{})}),s==="stats"&&e.jsx("div",{className:"tab-content",children:k?e.jsxs("div",{className:C.loadingMessage,children:[e.jsx("div",{className:C.loadingSpinner}),"Loading your lifetime stats..."]}):P?e.jsxs("div",{className:C.errorMessage,children:["Error: ",P]}):!N||N.length===0?e.jsx("div",{className:C.statsPlaceholder,children:e.jsx("p",{children:"No lifetime statistics available."})}):e.jsx("div",{className:C.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:N.map((j,_)=>e.jsxs("div",{className:"panel-alt",children:[e.jsx("div",{className:C.statLabel,children:j.label}),e.jsxs("div",{className:C.statValue,children:[K(j.type,j.value),j.suffix&&e.jsx("span",{className:C.statSuffix,children:j.suffix})]})]},j.key||`stat-${_}`))})}),s==="history"&&e.jsx("div",{className:"tab-content",children:r?e.jsxs("div",{className:C.loadingMessage,children:[e.jsx("div",{className:C.loadingSpinner}),"Loading your game history..."]}):c?e.jsxs("div",{className:C.errorMessage,children:["Error: ",c]}):u.games.length===0?e.jsx("div",{className:C.statsPlaceholder,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`panel-alt ${C.historyTable}`,children:[e.jsxs("div",{className:C.tableHeader,children:[e.jsx("div",{className:C.gameNameHeader,children:"Game"}),e.jsx("div",{className:C.playerCountHeader,children:"Players"}),e.jsx("div",{className:C.roundsHeader,children:"Rounds"}),e.jsx("div",{className:C.endDateHeader,children:"Ended"})]}),e.jsx("div",{className:C.tableBody,"data-gamepad-scrollable":"true",tabIndex:"0",children:u.games.map(j=>e.jsxs("div",{className:C.historyRow,children:[e.jsx("div",{className:C.gameNameCell,children:e.jsxs("span",{className:C.gameNameLink,onClick:()=>Z(j.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",j.id]})}),e.jsx("div",{className:C.playerCountCell,children:j.totalPlayerCount}),e.jsx("div",{className:C.roundsCell,children:V(j)}),e.jsxs("div",{className:C.endDateCell,children:[e.jsx("span",{className:C.dateDesktop,children:q(j.endedAt)}),e.jsx("span",{className:C.dateMobile,children:q(j.endedAt,!0)})]})]},j.id))})]}),e.jsxs("div",{className:C.pageInfo,children:[e.jsx("button",{type:"button",onClick:z,disabled:b===0,className:C.pageButton,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"‚Üê"}),"Page ",b+1,u.pagination&&u.pagination.total?` of ${Math.ceil(u.pagination.total/S)}`:"",e.jsx("button",{type:"button",onClick:O,disabled:!u.pagination||u.games.length<S,className:C.pageButton,"aria-label":"Next page","data-gamepad-focusable":"true",children:"‚Üí"})]})]})})]}),g&&l&&e.jsx(ca,{gameData:l,onClose:()=>{x(!1),y(null)}})]})},bn=({onModalStateChange:n,...a})=>{const[s,t]=i.useState(!1),r=()=>{t(!0)},d=()=>{t(!1)};return i.useEffect(()=>{n&&n(s)},[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(ae,{onClick:r,icon:e.jsx(Se,{size:20,style:{color:"white"}}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...a}),s&&e.jsx(Za,{isOpen:s,onClose:d})]})},Ja=({currentUsername:n,onUsernameChanged:a})=>{const[s,t]=i.useState(""),[r,d]=i.useState(!1),[c,h]=i.useState(""),[u,f]=i.useState(""),{token:b}=U(),{base:o,discriminator:g}=me(n),x=async l=>{if(l.preventDefault(),h(""),f(""),d(!0),!b){h("You must be logged in to change your username"),d(!1);return}try{const y=await fetch(`${ee}/users/username`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({username:s})}),N=await y.json();if(!y.ok){h(N.message||"Failed to change username");return}const{base:$,discriminator:k}=me(N.username);f(`Username changed to ${$}#${k}`),t(""),a&&a(N.username),setTimeout(()=>{window.location.reload()},1500)}catch{h("Network error. Please try again.")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("h4",{style:{margin:0},children:"Username"}),e.jsxs("span",{style:{color:"var(--text-primary)",fontWeight:500,fontSize:"0.95rem"},children:[o,g&&e.jsxs("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:["#",g]})]})]}),e.jsxs("form",{onSubmit:x,autoComplete:"off",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",name:"new-display-name",value:s,onChange:l=>t(l.target.value),placeholder:"Enter new username",minLength:2,maxLength:32,pattern:"[a-zA-Z0-9_\\-]+",required:!0,disabled:r,readOnly:!0,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true",style:{flexGrow:1,flexShrink:1,minWidth:0,padding:"8px 14px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-primary)",fontSize:"0.9rem",outline:"none",transition:"border-color 0.2s, background 0.2s",height:"36px"},onFocus:l=>{l.target.removeAttribute("readonly"),l.target.style.borderColor="var(--btn-tertiary-start)",l.target.style.background="rgba(255, 255, 255, 0.08)"},onBlur:l=>{l.target.setAttribute("readonly",!0),l.target.style.borderColor="rgba(255, 255, 255, 0.1)",l.target.style.background="rgba(255, 255, 255, 0.05)"}}),e.jsx("button",{type:"submit",disabled:r||!s.trim()||s.trim()===o,style:{background:r||!s.trim()||s.trim()===o?"#95a5a6":"linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",color:"var(--text-white)",border:"none",borderRadius:"34px",padding:"8px 16px",fontSize:"0.9rem",fontWeight:500,cursor:r||!s.trim()||s.trim()===o?"not-allowed":"pointer",transition:"all 0.2s ease",minWidth:"120px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",flexShrink:0,height:"36px"},onMouseEnter:l=>{l.target.disabled||(l.target.style.background="linear-gradient(to right, var(--btn-tertiary-hover-start), var(--btn-tertiary-hover-end))",l.target.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.3)",l.target.style.transform="translateY(-1px)")},onMouseLeave:l=>{l.target.disabled||(l.target.style.background="linear-gradient(to right, var(--btn-tertiary-start), var(--btn-tertiary-end))",l.target.style.boxShadow="0 2px 5px rgba(0, 0, 0, 0.2)",l.target.style.transform="translateY(0)")},children:r?"Saving...":"Change"})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-subtle)",opacity:.6},children:"2-32 characters ‚Ä¢ Letters, numbers, underscores, hyphens"}),c&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"6px",color:"#f87171",fontSize:"0.875rem"},children:c}),u&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"6px",color:"#86efac",fontSize:"0.875rem"},children:u})]})]})},Qa="_fileUploadContainer_z5fvc_1",es="_fileInput_z5fvc_8",ts="_uploadButton_z5fvc_12",as="_changeButton_z5fvc_37",ss="_previewContainer_z5fvc_53",ns="_imagePreview_z5fvc_61",rs="_audioPreview_z5fvc_70",os="_errorMessage_z5fvc_76",D={fileUploadContainer:Qa,fileInput:es,uploadButton:ts,changeButton:as,previewContainer:ss,imagePreview:ns,audioPreview:rs,errorMessage:os},ls=({onUpload:n,currentFileUrl:a,acceptedFileTypes:s,previewType:t="image"})=>{const[r,d]=i.useState(!1),[c,h]=i.useState(null),u=i.useRef(null),f=async g=>{const x=g.target.files[0];if(!x){console.error("[FileUpload] No file selected");return}console.log("[FileUpload] File selected:",{name:x.name,type:x.type,size:x.size}),h(null),d(!0);try{console.log("[FileUpload] Calling onUpload function");const l=await n(x);console.log("[FileUpload] Upload result:",l),l?console.log("[FileUpload] Upload successful"):(console.error("[FileUpload] Upload failed"),h("Failed to upload file. Please try again."))}catch(l){console.error("[FileUpload] Error uploading file:",l),h("An error occurred during upload.")}finally{d(!1)}},b=()=>{u.current.click()},o=()=>a?t==="image"?e.jsx("div",{className:D.previewContainer,children:e.jsx("img",{src:a,alt:"Preview",className:D.imagePreview})}):t==="audio"?e.jsx("div",{className:D.previewContainer,children:e.jsx("audio",{controls:!0,src:a,className:D.audioPreview,children:"Your browser does not support the audio element."})}):null:null;return e.jsxs("div",{className:D.fileUploadContainer,children:[e.jsx("input",{type:"file",ref:u,onChange:f,accept:s,className:D.fileInput}),a&&o(),e.jsx("button",{type:"button",onClick:b,className:`${D.uploadButton} ${a?D.changeButton:""}`,disabled:r,"data-gamepad-focusable":"true",children:r?"Uploading...":a?"Change":"Upload"}),c&&e.jsx("div",{className:D.errorMessage,children:c})]})},is=()=>{const{token:n}=U(),{preferences:a,updateSelectedTitle:s}=be(),[t,r]=i.useState([]),[d,c]=i.useState(!0),[h,u]=i.useState(null),f=i.useCallback(async()=>{try{c(!0);const o=await fetch(`${ee}/me/titles`,{headers:{Authorization:`Bearer ${n}`}});if(!o.ok)throw new Error("Failed to load titles");const g=await o.json();r(g)}catch(o){u(o.message)}finally{c(!1)}},[n]);i.useEffect(()=>{f()},[f]);const b=async o=>{try{await s(o)}catch{u("Failed to update title")}};return d?e.jsx("div",{className:A.loadingMessage,children:"Loading titles..."}):h?e.jsx("div",{className:A.errorMessage,children:h}):t.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:[e.jsxs("div",{onClick:()=>b(""),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),b(""))},style:{display:"inline-flex",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:a.selectedTitle?"rgba(255, 255, 255, 0.08)":"var(--btn-tertiary-shadow)",border:a.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid var(--btn-tertiary-start)",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),t.map(o=>e.jsxs("div",{onClick:()=>b(o.title),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),b(o.title))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:a.selectedTitle===o.title?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:a.selectedTitle===o.title?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:o.title}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:o.description})]},o.title)),t.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"var(--text-muted)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},ce={back01:"/cards/back01.png",back02:"/cards/back02.png",back03:"/cards/back03.png",back04:"/cards/back04.png",back05:"/cards/back05.png",back06:"/cards/back06.png",back07:"/cards/back07.png",back08:"/cards/back08.png"},xe=()=>localStorage.getItem("selectedCardBack")||"back01",xn=()=>{const n=xe();return ce[n]||ce.back01},cs=n=>{ce[n]&&(localStorage.setItem("selectedCardBack",n),window.dispatchEvent(new CustomEvent("cardbackchange",{detail:n})))},fe=[{id:"back01",image:"/cards/back01.png"},{id:"back02",image:"/cards/back02.png"},{id:"back03",image:"/cards/back03.png"},{id:"back04",image:"/cards/back04.png"},{id:"back05",image:"/cards/back05.png"},{id:"back06",image:"/cards/back06.png"},{id:"back07",image:"/cards/back07.png"},{id:"back08",image:"/cards/back08.png"}],ds=()=>{const[n,a]=i.useState("back01");i.useEffect(()=>{const t=xe();a(t)},[]);const s=t=>{a(t),cs(t)};return e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",overflowY:"visible",paddingTop:"8px",paddingBottom:"8px",alignItems:"center",minHeight:"100px"},children:fe.map((t,r)=>e.jsx("div",{onClick:()=>s(t.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),s(t.id))},style:{position:"relative",cursor:"pointer",flexShrink:0,transition:"transform 0.2s ease",transform:n===t.id?"scale(1.1)":"scale(1)",marginLeft:r===0?"8px":0,marginRight:r===fe.length-1?"8px":0},children:e.jsx("div",{style:{width:"60px",height:"84px",backgroundImage:`url(${t.image})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",boxShadow:n===t.id?"0 0 0 3px var(--btn-tertiary-start), 0 4px 12px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"}})},t.id))})},us=[{id:"default",name:"Default",description:"Orignal blue theme",primary:"#2c3e50",accent:"#3498db"},{id:"dark",name:"Dark Mode",description:"Lights out",primary:"#0d0d0d",accent:"#f39c12"},{id:"blue-steel",name:"Blue Steel",description:"Graphite & sky blue",primary:"#3d424a",accent:"#87ceeb"},{id:"lambeau",name:"Lambeau",description:"Go Pack Go!",primary:"#203731",accent:"#FFB612"},{id:"sunset",name:"Sunset",description:"Stunning twilight",primary:"#0c1929",accent:"#ff6b6b"},{id:"miami-vice",name:"Miami Vice",description:"Neon pink & cyan",primary:"#1a0f2e",accent:"#00d2d3"},{id:"purple",name:"Royal Purple",description:"Bold purple theme",primary:"#1a1a2e",accent:"#8e44ad"}],ms=()=>{const[n,a]=i.useState("default");i.useEffect(()=>{const t=Ce();a(t)},[]);const s=t=>{a(t),Ne(t)};return e.jsx("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:us.map(t=>e.jsxs("div",{onClick:()=>s(t.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),s(t.id))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"50px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:n===t.id?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:n===t.id?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"3px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t.primary,border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t.accent,border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:t.name}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:t.description})]},t.id))})},ps=({onClose:n,defaultTab:a="profile"})=>{const{user:s}=U(),{preferences:t,toggleAutoAnte:r,toggleMute:d,uploadProfileImg:c,loading:h}=be(),[u,f]=i.useState(a);return h?e.jsx(G,{title:"Preferences",onClose:n,style:{maxWidth:600,height:"80vh"},children:e.jsx("div",{className:A.loadingMessage,children:"Loading preferences..."})}):e.jsxs(G,{title:"Preferences",onClose:n,style:{maxWidth:600,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${u==="profile"?"active":""}`,onClick:()=>f("profile"),"data-gamepad-focusable":"true",children:"Profile"}),e.jsx("button",{type:"button",className:`tab-button ${u==="game"?"active":""}`,onClick:()=>f("game"),"data-gamepad-focusable":"true",children:"Game Options"})]}),u==="profile"&&e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"panel-alt",children:e.jsx(Ja,{currentUsername:s?.username,onUsernameChanged:b=>{console.log("Username changed to:",b)}})}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Profile Image"}),e.jsx(ls,{onUpload:c,currentFileUrl:t.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Title"}),e.jsx(is,{})]})]}),u==="game"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Mute Sound"}),e.jsx(he,{isChecked:t.muted,onChange:d})]}),e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Auto-Ante"}),e.jsx(he,{isChecked:t.autoAnte,onChange:r})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Theme"}),e.jsx(ms,{})]}),e.jsxs("div",{className:"panel-alt",children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Card Back"}),e.jsx(ds,{})]})]})]})},_n=({onModalStateChange:n,inGame:a=!1})=>{const[s,t]=i.useState(!1),r=()=>{t(!0)},d=()=>{t(!1)};return i.useEffect(()=>{n&&n(s)},[s,n]),e.jsxs(e.Fragment,{children:[e.jsx(ae,{onClick:r,icon:e.jsx(Be,{size:20,style:{color:"white"}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),s&&e.jsx(ps,{isOpen:s,onClose:d,defaultTab:a?"game":"profile"})]})},hs=({onClose:n})=>e.jsxs(G,{title:"Game Rules",onClose:n,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:A.sectionHeader,children:"Objective"}),e.jsx("div",{className:A.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:A.sectionHeader,children:"Card Values"}),e.jsx("div",{className:A.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:A.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:A.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"Players take turns in seat order."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:A.sectionHeader,children:"Betting"}),e.jsxs("div",{className:A.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:A.sectionHeader,children:"POT Button"}),e.jsx("div",{className:A.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:A.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:A.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),vn=({title:n="View Game Rules",onModalStateChange:a,...s})=>{const[t,r]=i.useState(!1),d=()=>{r(!0)},c=()=>{r(!1)};return i.useEffect(()=>{a&&a(t)},[t,a]),e.jsxs(e.Fragment,{children:[e.jsx(ae,{icon:e.jsx(Pe,{size:20,style:{color:"white"}}),title:n,onClick:d,variant:"default",...s}),t&&e.jsx(hs,{onClose:c})]})},jn=({onClick:n,...a})=>e.jsx(ae,{onClick:n,icon:e.jsx(Ee,{size:20,style:{color:"white"}}),"aria-label":"Store",variant:"store",title:"Store",...a}),gs="_coinPacksGrid_1p81q_3",ys="_coinPackCard_1p81q_50",fs="_coinAmount_1p81q_56",bs="_productImage_1p81q_64",xs="_productDescription_1p81q_78",_s="_productPrice_1p81q_87",vs="_free_1p81q_94",js="_paid_1p81q_98",Cs="_adButton_1p81q_103",I={coinPacksGrid:gs,coinPackCard:ys,coinAmount:fs,productImage:bs,productDescription:xs,productPrice:_s,free:vs,paid:js,adButton:Cs};class Ns{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`,this.subscriptionURL=`${this.API_URL}/subscription`}getAuthHeaders(a){return{"Content-Type":"application/json",Authorization:a?`Bearer ${a}`:""}}async getOfferingsByType(a,s){try{const t=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(a)}`,r=await fetch(t,{method:"GET",headers:this.getAuthHeaders(s),credentials:"include"});if(!r.ok){const c=await r.json().catch(()=>({}));throw new Error(c.error||`HTTP ${r.status}: Failed to fetch offerings`)}return(await r.json()).offerings||[]}catch(t){throw console.error("[PURCHASE_SERVICE] Error fetching offerings:",t),new Error(`Failed to fetch product offerings: ${t.message}`)}}async getAllOfferings(a){try{const s=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(a),credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.error||`HTTP ${s.status}: Failed to fetch offerings`)}return(await s.json()).offerings||[]}catch(s){throw console.error("[PURCHASE_SERVICE] Error fetching all offerings:",s),new Error(`Failed to fetch product offerings: ${s.message}`)}}async processPurchase(a,s){try{if(!a)throw new Error("Product ID is required");const t=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(s),credentials:"include",body:JSON.stringify({productId:a})});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||`HTTP ${t.status}: Purchase failed`)}return await t.json()}catch(t){throw console.error("[PURCHASE_SERVICE] Error processing purchase:",t),new Error(`Purchase failed: ${t.message}`)}}async getSubscriptionStatus(a){try{const s=await fetch(`${this.subscriptionURL}/status`,{method:"GET",headers:this.getAuthHeaders(a),credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.error||`HTTP ${s.status}: Failed to fetch subscription`)}return(await s.json()).subscription||{isPremium:!1}}catch(s){return console.error("[STORE_SERVICE] Error fetching subscription status:",s),{isPremium:!1}}}async cancelSubscription(a){try{const s=await fetch(`${this.subscriptionURL}/cancel`,{method:"POST",headers:this.getAuthHeaders(a),credentials:"include"});if(!s.ok){const t=await s.json().catch(()=>({}));throw new Error(t.error||`HTTP ${s.status}: Cancellation failed`)}return await s.json()}catch(s){throw console.error("[STORE_SERVICE] Error cancelling subscription:",s),new Error(`Cancellation failed: ${s.message}`)}}}const ne=new Ns,Cn=({onClose:n})=>{const{token:a,user:s,refreshUserData:t}=U(),[r,d]=i.useState("coins"),[c,h]=i.useState([]),[u,f]=i.useState([]),[b,o]=i.useState(!0),[g,x]=i.useState(null),[l,y]=i.useState(null),N=i.useCallback(async()=>{try{o(!0),y(null);const m=await ne.getOfferingsByType("coin",a);h([{id:"watch-ad",coinAmount:300,priceUSD:0,name:"Watch Ad",description:"Watch a short video ad to earn free coins!",imageUrl:null,isAd:!0},...m])}catch(m){console.error("Failed to load coin offerings:",m),y("Failed to load products. Please try again.")}finally{o(!1)}},[a]),$=i.useCallback(async()=>{try{const m=await ne.getOfferingsByType("subscription",a);f(m)}catch(m){console.error("Failed to load upgrade offerings:",m)}},[a]);i.useEffect(()=>{a&&(N(),$())},[a,N,$]);const k=async m=>{try{if(x(m),y(null),m==="watch-ad"){x(null);return}await ne.processPurchase(m,a),await t(),n()}catch(S){console.error("Purchase failed:",S),y(S.message||"Purchase failed. Please try again.")}finally{x(null)}},L=async()=>{try{x("cancel"),y(null),await ne.cancelSubscription(a),await t()}catch(m){console.error("Cancel failed:",m),y(m.message||"Cancellation failed. Please try again.")}finally{x(null)}},P=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m);return b?e.jsx(G,{title:"Store",onClose:n,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(G,{title:"Store",onClose:n,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{type:"button",className:`tab-button ${r==="coins"?"active":""}`,onClick:()=>d("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"}),e.jsx("button",{type:"button",className:`tab-button ${r==="upgrade"?"active":""}`,onClick:()=>d("upgrade"),"data-gamepad-focusable":"true",children:"Upgrades"})]}),l&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:l}),r==="coins"&&e.jsx("div",{className:"tab-content",children:c.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{className:I.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:c.map(m=>e.jsxs("div",{className:`panel-alt ${I.coinPackCard}`,children:[e.jsx("h3",{className:I.coinAmount,children:e.jsx(Y,{amount:m.coinAmount,size:"large"})}),e.jsx("div",{className:I.productImage,children:m.imageUrl&&e.jsx("img",{src:m.imageUrl,alt:m.name,onError:S=>{S.target.style.display="none"}})}),e.jsx("p",{className:I.productDescription,children:m.description}),e.jsx("div",{className:`${I.productPrice} ${m.isAd?I.free:I.paid}`,children:m.isAd?"FREE":P(m.priceUSD)}),e.jsx("button",{type:"button",onClick:()=>k(m.id),disabled:g===m.id||m.isAd,className:m.isAd?I.adButton:"btn btn-primary","data-gamepad-focusable":"true",children:g===m.id?"Processing...":m.isAd?"COMING SOON":"TEST BUY"})]},m.id))})}),r==="upgrade"&&e.jsx("div",{className:"tab-content",children:u.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No upgrades available at the moment."}):e.jsx("div",{className:I.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:u.map(m=>{const S=s?.subscription?.isPremium,z=g===m.id||g==="cancel";return e.jsxs("div",{className:`panel-alt ${I.coinPackCard}`,children:[e.jsx("h3",{className:I.coinAmount,style:{color:"#ff73fa"},children:m.name}),e.jsx("div",{className:I.productImage,children:m.imageUrl&&e.jsx("img",{src:m.imageUrl,alt:m.name,onError:O=>{O.target.style.display="none"}})}),e.jsx("p",{className:I.productDescription,children:m.description}),e.jsxs("div",{className:`${I.productPrice} ${I.paid}`,children:[P(m.priceUSD),"/month"]}),e.jsx("button",{type:"button",onClick:()=>S?L():k(m.id),disabled:z,className:S?"btn btn-danger":"btn btn-primary","data-gamepad-focusable":"true",style:S?{backgroundColor:"#e74c3c",borderColor:"#c0392b",color:"#ffffff"}:{background:"linear-gradient(135deg, #ff73fa, #d946ef)",borderColor:"#ff73fa"},children:z?"Processing...":S?"TEST CANCEL":"TEST SUBSCRIBE"})]},m.id)})})})]})},ws="_adMobBannerContainer_pl20g_3",ks="_banner_pl20g_17",Ss="_largeBanner_pl20g_22",As="_mediumRectangle_pl20g_27",Ps="_placeholderContent_pl20g_40",$s="_adMobLogo_pl20g_51",Ts="_adLabel_pl20g_58",W={adMobBannerContainer:ws,banner:ks,largeBanner:Ss,mediumRectangle:As,placeholderContent:Ps,adMobLogo:$s,adLabel:Ts},Is=({size:n="large"})=>{const{user:a}=U();if(!!a?.subscription?.isPremium)return null;const t=n==="large"?W.largeBanner:n==="banner"?W.banner:W.mediumRectangle,r=n==="large"?"320x100":n==="banner"?"320x50":"300x250";return e.jsx("div",{className:`${W.adMobBannerContainer} ${t}`,children:e.jsxs("div",{className:W.placeholderContent,children:[e.jsx("div",{className:W.adMobLogo,children:"Advertisement"}),e.jsxs("span",{className:W.adLabel,children:["Test Ad - ",r]})]})})},Bs="_adBannerContainer_hly9y_1",Ls="_desktopAd_hly9y_23",Es="_mobileAd_hly9y_31",Ms="_adPlaceholder_hly9y_38",Us="_adLabel_hly9y_64",Ds="_hideAt1000_hly9y_80",Rs="_hideAt1200_hly9y_86",R={adBannerContainer:Bs,desktopAd:Ls,mobileAd:Es,adPlaceholder:Ms,adLabel:Us,hideAt1000:Ds,hideAt1200:Rs},Nn=({hideAtWidth:n=1200})=>{const a=i.useRef(null),s=de.isNativePlatform(),{user:t}=U(),r=!t?.subscription?.isPremium;if(i.useEffect(()=>{if(!s&&a.current&&window.adsbygoogle)try{a.current.querySelectorAll(".adsbygoogle").forEach(()=>{(window.adsbygoogle=window.adsbygoogle||[]).push({})})}catch(c){console.error("[AdBanner] Error loading ads:",c)}},[s]),s)return e.jsx(Is,{size:"large"});if(!r)return null;const d=n===1e3?R.hideAt1000:R.hideAt1200;return e.jsxs("div",{className:`${R.adBannerContainer} ${d}`,ref:a,children:[e.jsxs("div",{className:R.desktopAd,children:[e.jsx("div",{className:R.adPlaceholder,children:e.jsx("span",{className:R.adLabel,children:"Test Ad - 728x90"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"DESKTOP_BANNER_AD_UNIT_ID","data-ad-format":"horizontal"})]}),e.jsxs("div",{className:R.mobileAd,children:[e.jsx("div",{className:R.adPlaceholder,children:e.jsx("span",{className:R.adLabel,children:"Test Ad - 320x100"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"MOBILE_BANNER_AD_UNIT_ID","data-ad-format":"horizontal"})]})]})},zs="_adSideBannerContainer_1a0rk_1",Os="_left_1a0rk_12",Fs="_right_1a0rk_16",Hs="_adPlaceholder_1a0rk_20",Gs="_adLabel_1a0rk_44",qs="_minWidth1000_1a0rk_52",Ws="_minWidth1200_1a0rk_58",X={adSideBannerContainer:zs,left:Os,right:Fs,adPlaceholder:Hs,adLabel:Gs,minWidth1000:qs,minWidth1200:Ws},wn=({position:n="left",minWidth:a=1e3})=>{const s=i.useRef(null),t=de.isNativePlatform(),{user:r}=U(),d=!r?.subscription?.isPremium;if(i.useEffect(()=>{if(!t&&s.current&&window.adsbygoogle)try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(h){console.error("[AdSideBanner] Error loading ad:",h)}},[t]),t||!d)return null;const c=a===1200?X.minWidth1200:X.minWidth1000;return e.jsxs("div",{className:`${X.adSideBannerContainer} ${X[n]} ${c}`,ref:s,children:[e.jsx("div",{className:X.adPlaceholder,children:e.jsx("span",{className:X.adLabel,children:"Test Ad - 160x600"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"VERTICAL_AD_UNIT_ID","data-ad-format":"vertical"})]})},Vs="_interstitialOverlay_1nf80_3",Xs="_interstitialContent_1nf80_26",Ys="_adContainer_1nf80_38",Ks="_placeholderContent_1nf80_51",Zs="_adMobLogo_1nf80_62",Js="_adTitle_1nf80_70",Qs="_adDescription_1nf80_76",en="_adSize_1nf80_83",tn="_closeButtonContainer_1nf80_91",an="_closeButton_1nf80_91",sn="_countdown_1nf80_111",M={interstitialOverlay:Vs,interstitialContent:Xs,adContainer:Ys,placeholderContent:Ks,adMobLogo:Zs,adTitle:Js,adDescription:Qs,adSize:en,closeButtonContainer:tn,closeButton:an,countdown:sn},nn=({onClose:n})=>{const[a,s]=i.useState(5),[t,r]=i.useState(!1),{user:d}=U(),c=!d?.subscription?.isPremium;if(i.useEffect(()=>{if(!c){n();return}const u=setInterval(()=>{s(f=>f<=1?(r(!0),clearInterval(u),0):f-1)},1e3);return()=>clearInterval(u)},[c,n]),!c)return null;const h=()=>{t&&n()};return e.jsx("div",{className:M.interstitialOverlay,children:e.jsxs("div",{className:M.interstitialContent,children:[e.jsx("div",{className:M.adContainer,children:e.jsxs("div",{className:M.placeholderContent,children:[e.jsx("div",{className:M.adMobLogo,children:"Advertisement"}),e.jsx("div",{className:M.adTitle,children:"Interstitial Ad Placeholder"}),e.jsx("div",{className:M.adDescription,children:"This is a test placeholder for mobile interstitial ads"}),e.jsx("div",{className:M.adSize,children:"Full Screen - 320x480+"})]})}),e.jsx("div",{className:M.closeButtonContainer,children:t?e.jsx("button",{type:"button",className:`btn btn-primary ${M.closeButton}`,onClick:h,children:"Close Ad"}):e.jsxs("div",{className:M.countdown,children:["Please wait ",a," second",a!==1?"s":"","..."]})})]})})},rn="_interstitialOverlay_1jjes_1",on="_interstitialContent_1jjes_15",ln="_adContainer_1jjes_24",cn="_adPlaceholder_1jjes_38",dn="_adLabel_1jjes_52",un="_closeButtonContainer_1jjes_76",mn="_closeButton_1jjes_76",pn="_countdown_1jjes_88",F={interstitialOverlay:rn,interstitialContent:on,adContainer:ln,adPlaceholder:cn,adLabel:dn,closeButtonContainer:un,closeButton:mn,countdown:pn},kn=({onClose:n})=>{const[a,s]=i.useState(5),[t,r]=i.useState(!1),d=i.useRef(null),c=de.isNativePlatform(),{user:h}=U(),u=!h?.subscription?.isPremium;if(i.useEffect(()=>{if(c)return;if(!u){n();return}if(d.current&&window.adsbygoogle)try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(o){console.error("[AdInterstitial] Error loading ad:",o)}const b=setInterval(()=>{s(o=>o<=1?(r(!0),clearInterval(b),0):o-1)},1e3);return()=>clearInterval(b)},[c,u,n]),c)return e.jsx(nn,{onClose:n});if(!u)return null;const f=()=>{t&&n()};return e.jsx("div",{className:F.interstitialOverlay,children:e.jsxs("div",{className:F.interstitialContent,children:[e.jsxs("div",{className:F.adContainer,ref:d,children:[e.jsx("div",{className:F.adPlaceholder,children:e.jsx("span",{className:F.adLabel,children:"Full Screen Ad"})}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-3800145998419517","data-ad-slot":"INTERSTITIAL_AD_UNIT_ID","data-ad-format":"auto","data-full-width-responsive":"true"})]}),e.jsx("div",{className:F.closeButtonContainer,children:t?e.jsx("button",{type:"button",className:`btn btn-primary ${F.closeButton}`,onClick:f,children:"Close"}):e.jsxs("div",{className:F.countdown,children:["Please wait ",a," second",a!==1?"s":"","..."]})})]})})},Sn=()=>{const[n,a]=i.useState(!1),s=i.useCallback(()=>{a(!0)},[]),t=i.useCallback(()=>{a(!1)},[]);return{shouldShowAd:n,showAd:s,hideAd:t}};export{kn as A,G as B,Y as C,fn as G,ae as I,bn as P,vn as R,jn as S,he as T,At as U,_n as a,Cn as b,Nn as c,wn as d,ca as e,Ht as f,xn as g,Sn as u};
