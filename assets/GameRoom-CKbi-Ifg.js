import{b as $,a as H,s as ae,j as e,e as ge,U as he,L as xe}from"./index-Dz_3LXOj.js";import{b as u,h as ye,u as fe}from"./vendor-ByZL_ylL.js";import{C as L,a as je,R as be,P as Ce,S as ve,I as Ne,c as Be,b as Te,g as le,G as me,d as we,U as Ae}from"./GamepadInput-D_IMvUlG.js";import{u as Ie}from"./useGamepadNavigation-DCsD-Nlu.js";import"./audio-Do0jXn0P.js";import"./socket-CA1CrNgP.js";const Se={TIMERS:{BETTING_DURATION:3e4,DECISION_DURATION:15e3}},b={HEARTS:"â™¥",DIAMONDS:"â™¦",CLUBS:"â™£",SPADES:"â™ ",ARROW_RIGHT:"â†’",ARROW_UP:"â†‘",ARROW_DOWN:"â†“",ROTATE:"â†»",CHECK:"âœ“",CROSS:"âœ•"},{TIMERS:oe}=Se,_e=u.createContext(),k=()=>{const t=u.useContext(_e);if(t===void 0)throw new Error("useGameContext must be used within a GameProvider");return t},ke=({children:t,gameId:n,initialGameState:c=null})=>{const{socket:s,error:i}=$(),{user:a}=H(),[_,r]=u.useState(c);u.useRef({});const d=u.useRef(null),[o,m]=u.useState(null),x=u.useCallback(()=>{m(null)},[]);u.useEffect(()=>{i&&m(i)},[i]),u.useEffect(()=>{if(s)return s.on("gameReconnected",g=>{console.log(`[Game] Reconnected to game: ${g.gameId}`,g.game),r(g.game),console.log(`[Game] Successfully reconnected as user ID: ${a?.id}`),m(null),g.game&&g.game.id&&setTimeout(()=>{console.log("[Game] Requesting fresh game state after reconnection"),s.emit("getGameState",{gameId:g.game.id})},500)}),s.on("gameState",g=>{if(g&&g.id&&JSON.stringify(_)!==JSON.stringify(g)){if(g.currentPlayerId&&a?.id){const O=g.currentPlayerId===a.id,te=d.current===a.id;O&&!te&&ae.play("ui.alert"),d.current=g.currentPlayerId}r(g),x()}}),s.on("gameError",g=>{console.error("Game error:",g),m(g)}),()=>{s.off("gameReconnected"),s.off("gameState"),s.off("gameError")}},[s]);const h=u.useCallback(g=>{if(!(!s||!n))try{s.emit("placeBet",{bet:g,gameId:n})}catch(O){console.error("Error placing bet:",O),m("Failed to place bet. Please try again.")}},[s,n]),l=u.useCallback(()=>{if(!(!s||!n))try{s.emit("payAnte",{gameId:n})}catch(g){console.error("Error paying ante:",g),m("Failed to pay ante. Please try again.")}},[s,n]),y=u.useCallback(()=>{if(!(!s||!n))try{s.emit("dealCards",{gameId:n})}catch(g){console.error("Error dealing cards:",g),m("Failed to deal cards. Please try again.")}},[s,n]),p=u.useCallback(()=>{if(!(!s||!n))try{s.emit("revealMiddleCard",{gameId:n})}catch(g){console.error("Error revealing middle card:",g),m("Failed to reveal middle card. Please try again.")}},[s,n]),N=u.useCallback(()=>{if(!(!s||!n))try{s.emit("nextRound",{gameId:n})}catch(g){console.error("Error moving to next round:",g),m("Failed to move to next round. Please try again.")}},[s,n]),v=u.useCallback(()=>{if(!(!s||!n))try{s.emit("ready")}catch(g){console.error("Error setting player ready:",g),m("Failed to set player ready. Please try again.")}},[s,n]),B=u.useCallback(()=>{if(!(!s||!n))try{s.emit("unready")}catch(g){console.error("Error setting player unready:",g),m("Failed to set player unready. Please try again.")}},[s,n]),M={gameState:_,error:o,gameId:n,placeBet:h,payAnte:l,playerReady:v,playerUnready:B,dealCards:y,revealMiddleCard:p,nextRound:N,clearError:x};return e.jsx(_e.Provider,{value:M,children:t})},Pe="_gameContainer_1kxnm_1",Le="_gameScreen_1kxnm_6",$e="_loadingContainer_1kxnm_41",Ee="_errorContainer_1kxnm_50",Re="_errorText_1kxnm_66",Oe="_gameBottomSection_1kxnm_95",F={gameContainer:Pe,gameScreen:Le,loadingContainer:$e,errorContainer:Ee,errorText:Re,gameBottomSection:Oe},Me="_headerContainer_1ki61_1",De="_header_1ki61_1",Ge="_headerLeft_1ki61_30",Fe="_gameTitle_1ki61_39",qe="_liveTag_1ki61_50",ze="_gameIdText_1ki61_68",Ue="_gameIdLink_1ki61_75",He="_headerRight_1ki61_88",We="_controlsStack_1ki61_94",Ve="_balanceDisplay_1ki61_101",Ye="_balanceLabel_1ki61_114",Je="_controlsGroup_1ki61_120",E={headerContainer:Me,header:De,headerLeft:Ge,gameTitle:Fe,liveTag:qe,gameIdText:ze,gameIdLink:Ue,headerRight:He,controlsStack:We,balanceDisplay:Ve,balanceLabel:Ye,controlsGroup:Je},Ke=({color:t="currentColor",size:n=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Qe=({handleLeaveGame:t,onModalStateChange:n})=>{const{gameState:c,gameId:s}=k(),{socket:i}=$(),{user:a}=H(),_=i?.auth?.userId,r=_&&c?.players?c.players[_]:null,d=r?.balance??a?.balance??0,o=r?.isReady||!1,[m,x]=u.useState(!1),[h,l]=u.useState(!1),[y,p]=u.useState(!1),[N,v]=u.useState(!1),[B,M]=u.useState(!1);return u.useEffect(()=>{n&&n(m||h||y||N||B)},[m,h,y,N,B,n]),e.jsxs("div",{className:E.headerContainer,children:[e.jsxs("div",{className:E.header,children:[e.jsxs("div",{className:E.headerLeft,children:[e.jsxs("h1",{className:E.gameTitle,children:["In Between ",e.jsx("span",{className:E.liveTag,children:"LIVE"})]}),e.jsx("p",{className:E.gameIdText,children:e.jsxs("span",{className:E.gameIdLink,onClick:()=>x(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",s]})})]}),e.jsx("div",{className:E.headerRight,children:e.jsxs("div",{className:E.controlsStack,children:[e.jsxs("div",{className:E.balanceDisplay,children:[e.jsx("span",{className:E.balanceLabel,children:"Balance:"}),e.jsx(L,{amount:Number(d),size:"small"})]}),e.jsxs("div",{className:E.controlsGroup,children:[e.jsx(je,{onModalStateChange:p,"data-gamepad-focusable":"true"}),e.jsx(be,{onModalStateChange:v,"data-gamepad-focusable":"true"}),e.jsx(Ce,{onModalStateChange:M,"data-gamepad-focusable":"true"}),e.jsx(ve,{onClick:()=>l(!0),"data-gamepad-focusable":"true"}),e.jsx(Ne,{icon:e.jsx(Ke,{color:"white",size:20}),title:"Leave Game",onClick:t,variant:"danger",disabled:o,"data-gamepad-focusable":"true"})]})]})})]}),m&&e.jsx(Be,{onClose:()=>x(!1),gameData:c}),h&&e.jsx(Te,{onClose:()=>l(!1)})]})},Xe="_table_1c3a2_2",Ze="_feltTexture_1c3a2_75",et="_sitOutOverlay_1c3a2_104",Q={table:Xe,feltTexture:Ze,sitOutOverlay:et},tt="_cardsRow_12pga_1",st="_card_12pga_1",nt="_dealingPhase_12pga_74",at="_revealingPhase_12pga_83",ot="_cardBack_12pga_109",rt="_redCard_12pga_119",ct="_blackCard_12pga_123",it="_cardCorner_12pga_127",lt="_bottomRight_12pga_136",dt="_cardValue_12pga_144",ut="_cardSuit_12pga_150",mt="_cardCenter_12pga_155",_t="_aceCard_12pga_212",pt="_aceIndicator_12pga_216",gt="_aceHigh_12pga_236",ht="_aceLow_12pga_242",xt="_indicatorContent_12pga_248",C={cardsRow:tt,card:st,dealingPhase:nt,revealingPhase:at,cardBack:ot,redCard:rt,blackCard:ct,cardCorner:it,bottomRight:lt,cardValue:dt,cardSuit:ut,cardCenter:mt,aceCard:_t,aceIndicator:pt,aceHigh:gt,aceLow:ht,indicatorContent:xt},yt=()=>{const{gameState:t}=k(),[n,c]=u.useState(le());if(u.useEffect(()=>{const l=()=>{c(le())};return window.addEventListener("cardbackchange",l),()=>window.removeEventListener("cardbackchange",l)},[]),!t)return e.jsx("div",{className:C.loading,children:"Loading game state..."});const{firstCard:s,secondCard:i,thirdCard:a,phase:_,dealer:r}=t;r?.name;const d={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},o={hearts:b.HEARTS,diamonds:b.DIAMONDS,clubs:b.CLUBS,spades:b.SPADES,[b.HEARTS]:b.HEARTS,[b.DIAMONDS]:b.DIAMONDS,[b.CLUBS]:b.CLUBS,[b.SPADES]:b.SPADES},m=l=>l===b.HEARTS||l===b.DIAMONDS||l==="hearts"||l==="diamonds",x=(l,y)=>{if(!l)return e.jsx("div",{className:C.card,children:e.jsx("div",{className:C.cardBack,style:{backgroundImage:`url(${n})`}})},`empty-${y}`);const p=m(l.suit),N=l.value==="A",v=l.isAceLow,B=y===1;return e.jsxs("div",{className:`${C.card} ${p?C.redCard:C.blackCard} ${N?C.aceCard:""}`,children:[N&&!B&&e.jsx("div",{className:`${C.aceIndicator} ${v?C.aceLow:C.aceHigh} ${p?C.redCard:C.blackCard}`,children:v?e.jsxs("span",{className:C.indicatorContent,children:["LOW ",b.ARROW_DOWN]}):e.jsxs("span",{className:C.indicatorContent,children:["HIGH ",b.ARROW_UP]})}),e.jsxs("div",{className:C.cardCorner,children:[e.jsx("div",{className:C.cardValue,children:d[l.value]}),e.jsx("div",{className:C.cardSuit,children:o[l.suit]})]}),e.jsx("div",{className:C.cardCenter,children:o[l.suit]}),e.jsxs("div",{className:`${C.cardCorner} ${C.bottomRight}`,children:[e.jsx("div",{className:C.cardValue,children:d[l.value]}),e.jsx("div",{className:C.cardSuit,children:o[l.suit]})]})]},`${l.value}-${l.suit}-${y}`)},h=()=>{let l=[null,null,null];return!s&&!i&&!a?l.map((y,p)=>x(y,p)):(s&&(l[0]={...s}),i&&(l[2]={...i}),a&&(l[1]={...a}),l.map((y,p)=>x(y,p)))};return e.jsx("div",{className:`${C.cardsRow} ${_==="dealing"?C.dealingPhase:""} ${_==="revealing"?C.revealingPhase:""}`,children:h()})},ft="_potDisplay_1o95d_2",jt="_potLabel_1o95d_18",de={potDisplay:ft,potLabel:jt},bt=()=>{const{gameState:t}=k();if(!t)return null;const{pot:n=0}=t;return e.jsxs("div",{className:de.potDisplay,children:[e.jsx("span",{className:de.potLabel,children:"POT"}),e.jsx(L,{amount:n,size:"large"})]})},Ct="_aceOverlay_1apr0_2",vt="_cardGlow_1apr0_14",Nt="_countdownRing_1apr0_24",Bt="_countdownCircle_1apr0_34",Tt="_choiceButton_1apr0_43",wt="_highButton_1apr0_74",At="_lowButton_1apr0_85",It="_timerDisplay_1apr0_96",St="_waitingMessage_1apr0_109",kt="_aceControlsBottom_1apr0_136",Pt="_timerContainer_1apr0_150",Lt="_aceButtonContainer_1apr0_158",$t="_choicePrompt_1apr0_165",Et="_bottomChoiceButton_1apr0_174",Rt="_lowButtonBottom_1apr0_200",Ot="_highButtonBottom_1apr0_210",w={aceOverlay:Ct,cardGlow:vt,countdownRing:Nt,countdownCircle:Bt,choiceButton:Tt,highButton:wt,lowButton:At,timerDisplay:It,waitingMessage:St,aceControlsBottom:kt,timerContainer:Pt,aceButtonContainer:Lt,choicePrompt:$t,bottomChoiceButton:Et,lowButtonBottom:Rt,highButtonBottom:Ot},X=({direction:t="up",color:n="currentColor",size:c=24})=>{const s=t==="down"?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:s,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},Mt="_waitingTimer_egezv_2",Dt="_timerContent_egezv_16",Gt="_playerName_egezv_23",Ft="_action_egezv_29",qt="_timerBar_egezv_35",zt="_timerProgress_egezv_43",q={waitingTimer:Mt,timerContent:Dt,playerName:Gt,action:Ft,timerBar:qt,timerProgress:zt},re=({playerName:t,action:n="deciding",duration:c=15e3})=>{const[s,i]=u.useState(c),a=u.useRef(Date.now());u.useEffect(()=>{a.current=Date.now(),i(c)},[c]),u.useEffect(()=>{const r=setInterval(()=>{const d=Date.now()-a.current,o=Math.max(0,c-d);i(o),o<=0&&clearInterval(r)},100);return()=>clearInterval(r)},[c]);const _=(c-s)/c*100;return e.jsxs("div",{className:`panel-game ${q.waitingTimer}`,children:[e.jsxs("div",{className:q.timerContent,children:[e.jsx("span",{className:q.playerName,children:t}),e.jsxs("span",{className:q.action,children:["is ",n,"..."]})]}),e.jsx("div",{className:q.timerBar,children:e.jsx("div",{className:q.timerProgress,style:{width:`${_}%`}})})]})},Ut="_countdownTimer_1r3bp_3",Ht="_progressRing_1r3bp_19",Wt="_progressRingBackground_1r3bp_25",Vt="_progressRingCircle_1r3bp_31",Yt="_timeDisplay_1r3bp_40",W={countdownTimer:Ut,progressRing:Ht,progressRingBackground:Wt,progressRingCircle:Vt,timeDisplay:Yt},ce=({duration:t=15,isActive:n=!0})=>{const[c,s]=u.useState(t),i=u.useRef(Date.now());u.useEffect(()=>{n&&(i.current=Date.now(),s(t))},[t,n]),u.useEffect(()=>{if(!n)return;const h=setInterval(()=>{const l=Math.floor((Date.now()-i.current)/1e3),y=Math.max(0,t-l);s(y),y<=0&&clearInterval(h)},100);return()=>clearInterval(h)},[t,n]);const a=c/t*100,_=()=>{const h=c/t*100;return h>66?"var(--color-ready)":h>33?"var(--accent)":"var(--secondary)"},r=50,d=3,o=(r-d*2)/2,m=o*2*Math.PI,x=m-a/100*m;return e.jsxs("div",{className:W.countdownTimer,children:[e.jsxs("svg",{className:W.progressRing,width:r,height:r,viewBox:`0 0 ${r} ${r}`,children:[e.jsx("circle",{className:W.progressRingBackground,cx:r/2,cy:r/2,r:o,strokeWidth:d}),e.jsx("circle",{className:W.progressRingCircle,cx:r/2,cy:r/2,r:o,strokeWidth:d,strokeDasharray:`${m} ${m}`,strokeDashoffset:x,style:{stroke:_()}})]}),e.jsxs("div",{className:W.timeDisplay,children:[c,"s"]})]})},Jt=({card:t,isCurrentPlayersTurn:n,bottomPosition:c=!1})=>{const{socket:s}=$(),{gameState:i}=k(),[a,_]=u.useState(null),r=o=>{a===null&&(_(o),s.emit("chooseAceValue",{isAceLow:o}))},d=i.players[i.currentPlayerId]?.name||"Current player";return c?n?e.jsxs("div",{className:`panel-game ${w.aceControlsBottom}`,children:[e.jsx("div",{className:w.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:w.aceButtonContainer,children:[e.jsx("span",{className:w.choicePrompt,children:"ACE VALUE:"}),e.jsxs("button",{className:`${w.bottomChoiceButton} ${w.lowButtonBottom}`,onClick:()=>r(!0),disabled:a!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(X,{direction:"down",size:16}),e.jsx("span",{children:"LOW"})]}),e.jsxs("button",{className:`${w.bottomChoiceButton} ${w.highButtonBottom}`,onClick:()=>r(!1),disabled:a!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"HIGH"}),e.jsx(X,{direction:"up",size:16})]})]})]}):e.jsx(re,{playerName:d,action:"choosing ace value",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:w.aceOverlay,children:[e.jsx("div",{className:w.cardGlow}),n&&e.jsx("svg",{className:w.countdownRing,children:e.jsx("circle",{className:w.countdownCircle,cx:"60",cy:"87",r:"80",style:{strokeDasharray:`${countdown/15*502} 502`}})}),n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`${w.choiceButton} ${w.highButton}`,onClick:()=>r(!1),disabled:a!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx(X,{direction:"up",size:20}),e.jsx("span",{children:"HIGH"})]}),e.jsxs("button",{className:`${w.choiceButton} ${w.lowButton}`,onClick:()=>r(!0),disabled:a!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"LOW"}),e.jsx(X,{direction:"down",size:20})]}),e.jsxs("div",{className:w.timerDisplay,children:[countdown,"s"]})]}):e.jsxs("div",{className:w.waitingMessage,children:[d," is choosing..."]})]})},Kt="_bettingOverlay_1q32g_2",Qt="_timerContainer_1q32g_26",Xt="_betButton_1q32g_57",Zt="_passButton_1q32g_84",es="_amountButton_1q32g_96",ts="_customButton_1q32g_108",ss="_amountPill_1q32g_120",ns="_potButtonWrapper_1q32g_137",as="_customInput_1q32g_142",os="_betInput_1q32g_152",rs="_confirmButton_1q32g_172",cs="_cancelButton_1q32g_173",S={bettingOverlay:Kt,timerContainer:Qt,betButton:Xt,passButton:Zt,amountButton:es,customButton:ts,amountPill:ss,potButtonWrapper:ns,customInput:as,betInput:os,confirmButton:rs,cancelButton:cs},is="_potButton_1pkys_3",ls="_glowEffect_1pkys_37",ds="_potLabel_1pkys_53",us="_currencyPill_1pkys_63",ms="_disabled_1pkys_102",V={potButton:is,glowEffect:ls,potLabel:ds,currencyPill:us,disabled:ms},_s=({amount:t,disabled:n,onClick:c,...s})=>e.jsxs("button",{className:`${V.potButton} ${n?V.disabled:""}`,onClick:c,disabled:n,"aria-label":`Bet the pot: ${t} chips`,"data-gamepad-focusable":"true",...s,children:[e.jsx("div",{className:V.glowEffect}),e.jsx("span",{className:V.potLabel,children:"POT"}),e.jsx("div",{className:V.currencyPill,children:e.jsx(L,{amount:t,size:"small"})})]}),ps=({isCurrentPlayersTurn:t})=>{const{gameState:n,placeBet:c}=k(),{socket:s}=$(),[i,a]=u.useState(""),[_,r]=u.useState(!1),[d,o]=u.useState(!1);if(!n||!t)return e.jsx(re,{playerName:n?.players[n.currentPlayerId]?.name||"Player",action:"betting",duration:oe.BETTING_DURATION});const{pot:m,firstCard:x,secondCard:h,players:l,currentPlayerId:y,anteAmount:p=1}=n,v=l[y]?.balance||0;Math.abs(x.numericValue-h.numericValue)-1;const B=x?.value==="A"&&h?.value==="A",M=Math.floor(B?v/3:v/2),g=Math.min(m,M),O=p,te=[1,5,10,20,50,100].filter(T=>T>=O&&T<=g).slice(-3),se=T=>{d||T>=O&&T<=g&&(o(!0),c(T),r(!1))},pe=()=>{d||(o(!0),c(0))},ie=()=>{const T=parseInt(i);!isNaN(T)&&T>=O&&T<=g&&(se(T),a(""))};return e.jsxs("div",{className:`panel-game ${S.bettingOverlay}`,children:[e.jsx("div",{className:S.timerContainer,children:e.jsx(ce,{duration:30,isActive:!0})}),_?e.jsxs("div",{className:S.customInput,children:[e.jsx(me,{title:"Enter Custom Bet",type:"number",value:i,onChange:T=>a(T.target.value),onKeyPress:T=>T.key==="Enter"&&ie(),placeholder:`${O}-${g}`,min:O,max:g,autoFocus:!0,className:S.betInput}),e.jsx("button",{onClick:ie,className:S.confirmButton,disabled:d,"data-gamepad-focusable":"true",children:b.CHECK}),e.jsx("button",{onClick:()=>{r(!1),a("")},className:S.cancelButton,disabled:d,"data-gamepad-focusable":"true",children:b.CROSS})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${S.betButton} ${S.passButton}`,onClick:pe,disabled:d,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{children:"PASS"})}),te.map(T=>e.jsx("button",{className:`${S.betButton} ${S.amountButton}`,onClick:()=>se(T),disabled:d,"data-gamepad-focusable":"true",children:e.jsx("div",{className:S.amountPill,children:e.jsx(L,{amount:T,size:"small"})})},T)),g===m&&e.jsx("div",{className:S.potButtonWrapper,children:e.jsx(_s,{onClick:()=>se(m),disabled:d,amount:m})}),e.jsx("button",{className:`${S.betButton} ${S.customButton}`,onClick:()=>r(!0),disabled:d,"data-gamepad-focusable":"true",children:e.jsx("span",{children:"CUSTOM"})})]})]})},gs="_secondChanceOverlay_1sq4x_2",hs="_bridge_1sq4x_13",xs="_bridgeLine_1sq4x_20",ys="_matchBadge_1sq4x_57",fs="_matchText_1sq4x_69",js="_choiceContainer_1sq4x_78",bs="_timer_1sq4x_87",Cs="_buttons_1sq4x_106",vs="_choiceButton_1sq4x_112",Ns="_anteButton_1sq4x_139",Bs="_passButton_1sq4x_151",Ts="_buttonIcon_1sq4x_162",ws="_buttonText_1sq4x_168",As="_buttonAmount_1sq4x_174",Is="_waitingContainer_1sq4x_180",Ss="_waitingMessage_1sq4x_187",ks="_secondChanceBottom_1sq4x_229",Ps="_timerContainer_1sq4x_243",Ls="_bottomButtonContainer_1sq4x_251",$s="_choicePrompt_1sq4x_258",Es="_bottomChoiceButton_1sq4x_267",Rs="_anteButtonBottom_1sq4x_293",Os="_passButtonBottom_1sq4x_302",f={secondChanceOverlay:gs,bridge:hs,bridgeLine:xs,matchBadge:ys,matchText:fs,choiceContainer:js,timer:bs,buttons:Cs,choiceButton:vs,anteButton:Ns,passButton:Bs,buttonIcon:Ts,buttonText:ws,buttonAmount:As,waitingContainer:Is,waitingMessage:Ss,secondChanceBottom:ks,timerContainer:Ps,bottomButtonContainer:Ls,choicePrompt:$s,bottomChoiceButton:Es,anteButtonBottom:Rs,passButtonBottom:Os},ue=({firstCard:t,secondCard:n,isCurrentPlayersTurn:c,bottomPosition:s=!1,indicatorOnly:i=!1})=>{const{gameState:a}=k(),{socket:_}=$(),[r,d]=u.useState(null),{anteAmount:o=1,players:m,currentPlayerId:x}=a,l=m[x]?.name||"Player",y=p=>{r===null&&_&&(d(p),_.emit("secondChance",{anteAgain:p}))};return t&&n&&(t.numericValue,n.numericValue),i?null:s?c?e.jsxs("div",{className:`panel-game ${f.secondChanceBottom}`,children:[e.jsx("div",{className:f.timerContainer,children:e.jsx(ce,{duration:15,isActive:!0})}),e.jsxs("div",{className:f.bottomButtonContainer,children:[e.jsx("span",{className:f.choicePrompt,children:"SECOND CHANCE:"}),e.jsxs("button",{className:`${f.bottomChoiceButton} ${f.anteButtonBottom}`,onClick:()=>y(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:f.buttonIcon,children:b.ROTATE}),e.jsx("span",{children:"ANTE AGAIN"}),e.jsx(L,{amount:o,size:"small"})]}),e.jsxs("button",{className:`${f.bottomChoiceButton} ${f.passButtonBottom}`,onClick:()=>y(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{children:"PASS"}),e.jsx("span",{className:f.buttonIcon,children:b.ARROW_RIGHT})]})]})]}):e.jsx(re,{playerName:l,action:"deciding on second chance",duration:oe.DECISION_DURATION}):e.jsxs("div",{className:f.secondChanceOverlay,children:[e.jsxs("div",{className:f.bridge,children:[e.jsx("div",{className:f.bridgeLine}),e.jsx("div",{className:f.matchBadge,children:e.jsx("span",{className:f.matchText,children:"MATCH!"})})]}),c?e.jsxs("div",{className:f.choiceContainer,children:[e.jsxs("div",{className:f.timer,children:[countdown,"s"]}),e.jsxs("div",{className:f.buttons,children:[e.jsxs("button",{className:`${f.choiceButton} ${f.anteButton}`,onClick:()=>y(!0),disabled:r!==null,"data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("span",{className:f.buttonIcon,children:b.ROTATE}),e.jsx("span",{className:f.buttonText,children:"ANTE AGAIN"}),e.jsx("span",{className:f.buttonAmount,children:e.jsx(L,{amount:o,size:"small"})})]}),e.jsxs("button",{className:`${f.choiceButton} ${f.passButton}`,onClick:()=>y(!1),disabled:r!==null,"data-gamepad-focusable":"true",children:[e.jsx("span",{className:f.buttonText,children:"PASS"}),e.jsx("span",{className:f.buttonIcon,children:b.ARROW_RIGHT})]})]})]}):e.jsx("div",{className:f.waitingContainer,children:e.jsxs("div",{className:f.waitingMessage,children:[l," is deciding..."]})})]})},Ms="_resultsContainer_upvys_2",Ds="_messageArea_upvys_11",Gs="_resultBar_upvys_22",Fs="_playerName_upvys_66",qs="_resultText_upvys_71",zs="_winBar_upvys_78",Us="_winAmount_upvys_82",Hs="_lossBar_upvys_91",Ws="_lossAmount_upvys_95",Vs="_penaltyBar_upvys_104",Ys="_penaltyText_upvys_108",Js="_penaltyAmount_upvys_114",Ks="_animationContainer_upvys_124",Qs="_cautionTapeContainer_upvys_132",Xs="_cautionTape_upvys_132",j={resultsContainer:Ms,messageArea:Ds,resultBar:Gs,playerName:Fs,resultText:qs,winBar:zs,winAmount:Us,lossBar:Hs,lossAmount:Ws,penaltyBar:Vs,penaltyText:Ys,penaltyAmount:Js,animationContainer:Ks,cautionTapeContainer:Qs,cautionTape:Xs},Zs="_rainContainer_fxhyg_2",en="_fallingItem_fxhyg_10",tn="_emoji_fxhyg_18",sn="_confetti_fxhyg_26",z={rainContainer:Zs,fallingItem:en,emoji:tn,confetti:sn},Z=({type:t="emoji",items:n=[],count:c=10,animationDuration:s=2.5,className:i=""})=>{const a=_=>{const r=_/c*s,d=(Math.random()-.5)*.3,o=r+d,m=Math.random()*100;switch(t){case"coin":return e.jsx("div",{className:z.fallingItem,style:{left:`${m}%`,animationDelay:`${o}s`,"--animation-duration":`${s}s`},children:e.jsx(we,{size:"large"})},_);case"confetti":const x=n.length>0?n:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"];return e.jsx("div",{className:`${z.fallingItem} ${z.confetti}`,style:{left:`${m}%`,animationDelay:`${o}s`,"--animation-duration":`${s*1.2}s`,backgroundColor:x[Math.floor(Math.random()*x.length)]}},_);case"emoji":default:const h=n.length>0?n:["ğŸ‰"];return e.jsx("div",{className:z.fallingItem,style:{left:`${m}%`,animationDelay:`${o}s`,"--animation-duration":`${s}s`},children:e.jsx("span",{className:z.emoji,children:h[Math.floor(Math.random()*h.length)]})},_)}};return e.jsx("div",{className:`${z.rainContainer} ${i}`,children:[...Array(c)].map((_,r)=>a(r))})},nn=({result:t,players:n})=>{const[c,s]=u.useState(!0);if(u.useEffect(()=>{s(!0);const o=setTimeout(()=>s(!1),3e3);return()=>clearTimeout(o)},[t]),!t)return null;const i=n[t.playerId]?.name||"Player",a=t.outcome;if(a==="win"){const o=t.winnings||0,m=Math.min(o/500,1),x=Math.floor(10+m*40),h=Math.floor(5+m*20);return e.jsxs("div",{className:j.resultsContainer,children:[e.jsxs("div",{className:j.animationContainer,children:[e.jsx(Z,{type:"confetti",count:x,animationDuration:3,items:["#ffd700","#ffed4e","#fff","#ff6b6b","#4CAF50"]}),e.jsx(Z,{type:"coin",count:h,animationDuration:2})]}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.winBar}`,children:[e.jsx("span",{className:j.playerName,children:i}),e.jsx("span",{className:j.resultText,children:"WINS"}),t.winnings&&t.winnings>0&&e.jsx("span",{className:j.winAmount,children:e.jsx(L,{amount:t.winnings/2,size:"small"})})]})})]})}if(a==="lose"){const o=t.betAmount||0,m=Math.min(o/500,1),x=Math.floor(8+m*22),h=["ğŸ˜¢","ğŸ˜”","ğŸ˜•","ğŸ‘","ğŸ“‰","ğŸ’”","ğŸ—‘ï¸","ğŸ¤¦â€â™‚ï¸"],l=["ğŸ˜­","ğŸ˜©","ğŸ¤¦","ğŸ’¸","ğŸ“‰","ğŸ˜¤","ğŸ˜£","ğŸ—‘ï¸","ğŸ¤¡","ğŸ’©","ğŸ™ˆ"],y=["ğŸ¤¡","ğŸ’©","ğŸ˜‚","ğŸ¤£","ğŸ—‘ï¸","ğŸ’€","â˜ ï¸","ğŸª¦","âš°ï¸","ğŸ¤ª","ğŸ˜µâ€ğŸ’«","ğŸ™ƒ","ğŸ¤®"];let p;return o<50?p=h:o<200?p=l:p=y,e.jsxs("div",{className:j.resultsContainer,children:[e.jsx("div",{className:j.animationContainer,children:e.jsx(Z,{type:"emoji",items:p,count:x,animationDuration:2.5})}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.lossBar}`,children:[e.jsx("span",{className:j.playerName,children:i}),e.jsx("span",{className:j.resultText,children:"LOST"}),t.betAmount&&t.betAmount>0&&e.jsx("span",{className:j.lossAmount,children:e.jsx(L,{amount:t.betAmount,size:"small"})})]})})]})}const _=(t.betAmount||0)*(t.isTripleAceTie?3:2),r=t.isTripleAceTie?15:8,d=t.isTripleAceTie?["ğŸ’€","â˜ ï¸","âš ï¸","ğŸš¨","â›”","ğŸ’¥","ğŸ”¥","ğŸ˜±","ğŸ°","ğŸ’¸"]:["âš ï¸","ğŸš¨","â›”","ğŸ”´","âŒ","ğŸ’¥","ğŸ¯","ğŸ²"];return e.jsxs("div",{className:j.resultsContainer,children:[e.jsxs("div",{className:j.cautionTapeContainer,children:[e.jsxs("div",{className:j.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]}),e.jsxs("div",{className:j.cautionTape,children:[e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"}),e.jsx("span",{children:t.isTripleAceTie?"TRIPLE PENALTY":"PENALTY"})]})]}),e.jsx("div",{className:j.animationContainer,children:e.jsx(Z,{type:"emoji",items:d,count:r,animationDuration:t.isTripleAceTie?2:3})}),e.jsx("div",{className:j.messageArea,children:e.jsxs("div",{className:`panel ${j.resultBar} ${j.penaltyBar}`,children:[e.jsx("span",{className:j.playerName,children:i}),e.jsx("span",{className:j.resultText,children:t.isTripleAceTie?"TRIPLE":""}),e.jsxs("span",{className:j.penaltyText,children:[t.isTripleAceTie?"3x":"2x"," PENALTY"]}),e.jsx("span",{className:j.penaltyAmount,children:e.jsx(L,{amount:_,size:"small"})})]})})]})},an="_revealingOverlay_hpopv_2",on="_revealingContent_hpopv_26",rn="_playerName_hpopv_35",cn="_actionText_hpopv_43",ln="_betAmount_hpopv_51",Y={revealingOverlay:an,revealingContent:on,playerName:rn,actionText:cn,betAmount:ln},dn=({playerName:t,betAmount:n})=>!t||!n?null:e.jsx("div",{className:`panel-game ${Y.revealingOverlay}`,children:e.jsxs("div",{className:Y.revealingContent,children:[e.jsx("span",{className:Y.playerName,children:t}),e.jsx("span",{className:Y.actionText,children:"bets"}),e.jsx("div",{className:Y.betAmount,children:e.jsx(L,{amount:n,size:"small"})})]})}),un="_anteControls_68v5e_4",mn="_anteButton_68v5e_27",_n="_backOutButton_68v5e_27",pn="_sitOutHalfWidth_68v5e_27",gn="_shimmerBorder_68v5e_110",hn="_buttonInfo_68v5e_125",xn="_buttonLabel_68v5e_132",yn="_buttonAmount_68v5e_143",fn="_notEnoughChipsText_68v5e_154",I={anteControls:un,anteButton:mn,backOutButton:_n,sitOutHalfWidth:pn,shimmerBorder:gn,buttonInfo:hn,buttonLabel:xn,buttonAmount:yn,notEnoughChipsText:fn},jn="_toggleLabel_b88gt_2",bn="_toggleInput_b88gt_9",Cn="_toggleSlider_b88gt_15",vn="_toggleText_b88gt_64",Nn="_loading_b88gt_86",J={toggleLabel:jn,toggleInput:bn,toggleSlider:Cn,toggleText:vn,loading:Nn},Bn=()=>{const{preferences:t,toggleAutoAnte:n,loading:c}=ge(),{gameState:s,playerReady:i}=k(),{socket:a}=$(),_=async()=>{const r=!t.autoAnte,d=await n();if(r&&d&&i){let o=null;if(a&&a.auth?.userId&&s?.players){const x=Object.keys(s.players);for(const h of x)if(s.players[h].userId===a.auth.userId){o=s.players[h];break}}o?.isReady||i()}};return c?e.jsx("div",{className:J.loading,children:"Loading preferences..."}):e.jsxs("label",{className:J.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:t.autoAnte,onChange:_,className:J.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:J.toggleSlider}),e.jsx("span",{className:J.toggleText,children:"Auto-Ante"})]})},Tn=()=>{const{gameState:t,playerReady:n,playerUnready:c}=k(),{socket:s}=$(),{user:i}=H(),[a,_]=u.useState(!1);if(!t)return null;const{players:r,anteAmount:d,phase:o}=t;if(o!=="waiting")return null;let m=null;if(s&&s.auth?.userId&&r){const y=Object.keys(r);for(const p of y)if(r[p].userId===s.auth.userId){m=r[p];break}}else if(i&&r){const y=Object.keys(r);for(const p of y)if(r[p].userId===i.id){m=r[p],console.log("[AnteControls] Found player by user ID instead of socket ID");break}}const x=Number(m?.balance||0),h=m?.isReady,l=x>=d;return e.jsxs("div",{className:`panel-game ${I.anteControls}`,children:[h?e.jsxs("button",{className:I.backOutButton,onClick:()=>{a||(typeof c=="function"?(_(!0),c()):console.error("playerUnready is not a function"))},disabled:a,"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:I.shimmerBorder}),e.jsx("div",{className:I.buttonInfo,children:e.jsx("span",{className:I.buttonLabel,children:"BACK OUT"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bn,{}),e.jsxs("button",{className:I.anteButton,onClick:()=>{a||(_(!0),n())},disabled:!l||a,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:I.shimmerBorder}),e.jsxs("div",{className:I.buttonInfo,children:[e.jsx("span",{className:I.buttonLabel,children:"ANTE"}),e.jsx("span",{className:I.buttonAmount,children:e.jsx(L,{amount:d})})]})]}),e.jsxs("button",{className:`${I.backOutButton} ${I.sitOutHalfWidth}`,onClick:()=>{a||s&&t&&i&&(_(!0),s.emit("sitOut",{gameId:t.id,userId:s.auth?.userId||i.id}))},disabled:m?.isSittingOut||a,title:m?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:I.shimmerBorder}),e.jsx("div",{className:I.buttonInfo,children:e.jsx("span",{className:I.buttonLabel,children:"SIT OUT"})})]})]}),!h&&!l&&e.jsx("p",{className:I.notEnoughChipsText,children:"Not enough coins"})]})},wn="_imBackOverlay_1wm7i_3",An="_container_1wm7i_11",In="_sittingOutText_1wm7i_21",Sn="_imBackButton_1wm7i_30",kn="_buttonText_1wm7i_48",Pn="_helpText_1wm7i_66",U={imBackOverlay:wn,container:An,sittingOutText:In,imBackButton:Sn,buttonText:kn,helpText:Pn},Ln=({onClick:t,disabled:n=!1})=>e.jsx("div",{className:U.imBackOverlay,children:e.jsxs("div",{className:U.container,children:[e.jsx("h3",{className:U.sittingOutText,children:"You are sitting out"}),e.jsx("button",{className:U.imBackButton,onClick:t,disabled:n,"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsx("span",{className:U.buttonText,children:"I'M BACK!"})}),e.jsx("p",{className:U.helpText,children:"Click to rejoin the game"})]})}),$n=()=>{const{gameState:t}=k(),{socket:n}=$(),{user:c}=H(),[s,i]=u.useState(!1);if(!t)return null;const{phase:a,currentPlayerId:_,players:r,waitingForAceDecision:d,waitingForSecondChance:o,firstCard:m,secondCard:x,result:h}=t,l=c?.id,y=r&&l?r[l]:null,p=l===_,N=y?.isSittingOut||!1,v=()=>{s||n&&t.id&&(i(!0),n.emit("imBack",{gameId:t.id}))};return e.jsxs("div",{className:Q.table,children:[e.jsx("div",{className:Q.feltTexture}),e.jsx(bt,{}),e.jsx(yt,{}),d&&e.jsx("div",{className:Q.aceGlowEffect}),o&&e.jsx(ue,{firstCard:m,secondCard:x,isCurrentPlayersTurn:p,indicatorOnly:!0}),!N&&e.jsxs(e.Fragment,{children:[a==="betting"&&!d&&!o&&e.jsx(ps,{isCurrentPlayersTurn:p}),d&&e.jsx(Jt,{card:m,isCurrentPlayersTurn:p,bottomPosition:!0}),o&&e.jsx(ue,{firstCard:m,secondCard:x,isCurrentPlayersTurn:p,bottomPosition:!0})]}),a==="revealing"&&!N&&e.jsx(dn,{playerName:r[_]?.name||"Player",betAmount:r[_]?.currentBet||0}),a==="results"&&h&&!N&&e.jsx(nn,{result:h,players:r}),a==="waiting"&&!N&&e.jsx(Tn,{}),N&&e.jsx("div",{className:Q.sitOutOverlay,children:e.jsx(Ln,{onClick:v,disabled:s})})]})},En="_playersContainer_1b112_1",Rn="_playersTitle_1b112_21",On="_playersList_1b112_45",Mn="_currentPlayerGlow_1b112_53",Dn="_currentUser_1b112_67",Gn="_playerInfo_1b112_71",Fn="_playerStatus_1b112_79",qn="_disconnectedIndicator_1b112_86",zn="_playerBalanceContainer_1b112_93",Un="_playerBalance_1b112_93",Hn="_balanceIncrease_1b112_112",Wn="_balanceDecrease_1b112_116",Vn="_readyIndicator_1b112_146",Yn="_ready_1b112_146",Jn="_notReady_1b112_157",Kn="_sittingOut_1b112_161",Qn="_emptyPlayerList_1b112_176",A={playersContainer:En,playersTitle:Rn,playersList:On,currentPlayerGlow:Mn,currentUser:Dn,playerInfo:Gn,playerStatus:Fn,disconnectedIndicator:qn,playerBalanceContainer:zn,playerBalance:Un,balanceIncrease:Hn,balanceDecrease:Wn,readyIndicator:Vn,ready:Yn,notReady:Jn,sittingOut:Kn,emptyPlayerList:Qn},Xn=()=>{const{gameState:t}=k(),{socket:n}=$(),c=u.useContext(he);if(u.useEffect(()=>{if(t?.players&&c){const d=Object.values(t.players).map(o=>o.userId).filter(Boolean);d.length>0&&c.prefetchUsers(d)}},[t?.players,c]),!t||!t.players)return e.jsx("div",{className:A.emptyPlayerList,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:s,currentPlayerId:i,gameTransactions:a=[]}=t,_=n?.auth?.userId,r=t.totals||{};return!s||Object.keys(s).length===0?e.jsx("div",{className:A.emptyPlayerList,children:e.jsx("p",{children:"Waiting for players to join..."})}):e.jsxs("div",{className:A.playersContainer,children:[e.jsx("h3",{className:A.playersTitle,children:"Scoreboard"}),e.jsx("div",{className:A.playersList,children:t.seats.filter(d=>d!==null&&s[d]).map(d=>{const o=s[d],m=d===i,x=o.userId===_;return o.disconnected,e.jsxs("div",{className:`
                  ${m?"panel":"panel-alt"}
                  ${m?A.currentPlayerGlow:""}
                  ${x?A.currentUser:""}
                `,style:{padding:"0.35rem 0.75rem",gap:"0.5rem",flexDirection:"row",fontSize:"0.9rem",alignItems:"center",justifyContent:"space-between",height:"40px"},children:[e.jsxs("div",{className:A.playerInfo,children:[e.jsx(Ae,{userId:o.userId,size:"small",showName:!0,namePosition:"right",fontWeight:"bold"}),e.jsx("span",{className:A.playerStatus,children:o.disconnected&&e.jsx("span",{className:A.disconnectedIndicator,title:"Player disconnected",children:"âš ï¸ Disconnected"})})]}),e.jsxs("div",{className:A.playerBalanceContainer,children:[e.jsx(Zn,{balance:r[d]||0}),e.jsx("div",{className:`
                    ${A.readyIndicator} 
                    ${o.isSittingOut?A.sittingOut:o.isReady?A.ready:A.notReady}
                  `,title:o.isSittingOut?"Sitting Out":o.isReady?"Ready":"Not Ready"})]})]},d)})})]})},Zn=({balance:t})=>{const[n,c]=u.useState(t),[s,i]=u.useState(""),a=u.useRef(null);return u.useEffect(()=>{if(t!==n){const _=t>n;i(_?A.balanceIncrease:A.balanceDecrease),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i("")},1e3),c(t)}return()=>{a.current&&clearTimeout(a.current)}},[t]),e.jsx("span",{className:`${A.playerBalance} ${s}`,children:e.jsx(L,{amount:t})})},ea="_gameLogContainer_avo5w_1",ta="_gameLogHeader_avo5w_15",sa="_expandIcon_avo5w_29",na="_gameLogEntries_avo5w_53",aa="_logEntry_avo5w_63",oa="_logTime_avo5w_88",ra="_logMessage_avo5w_95",ca="_systemMessage_avo5w_100",ia="_emptyLog_avo5w_111",la="_showMoreButton_avo5w_119",P={gameLogContainer:ea,gameLogHeader:ta,expandIcon:sa,gameLogEntries:na,logEntry:aa,logTime:oa,logMessage:ra,systemMessage:ca,emptyLog:ia,showMoreButton:la},da="_turnPanel_1mzsb_2",ua="_leftSection_1mzsb_15",ma="_win_1mzsb_22",_a="_lose_1mzsb_27",pa="_penalty_1mzsb_32",ga="_pass_1mzsb_37",ha="_cardsContainer_1mzsb_43",xa="_playerName_1mzsb_49",ya="_action_1mzsb_56",fa="_amount_1mzsb_65",R={turnPanel:da,leftSection:ua,win:ma,lose:_a,penalty:pa,pass:ga,cardsContainer:ha,playerName:xa,action:ya,amount:fa},ja="_cardMini_tdd1b_2",ba="_red_tdd1b_18",Ca="_black_tdd1b_22",va="_rank_tdd1b_26",Na="_aceIndicator_tdd1b_34",Ba="_suit_tdd1b_53",Ta="_cardPlaceholder_tdd1b_58",D={cardMini:ja,red:ba,black:Ca,rank:va,aceIndicator:Na,suit:Ba,cardPlaceholder:Ta},ne=({card:t})=>{if(!t)return e.jsx("div",{className:D.cardPlaceholder,children:"?"});const n=d=>{switch(d){case"hearts":case"â™¥":return b.HEARTS;case"diamonds":case"â™¦":return b.DIAMONDS;case"clubs":case"â™£":return b.CLUBS;case"spades":case"â™ ":return b.SPADES;default:return d||""}},c=t.value||"?",s=t.suit||"?",i=s==="â™¥"||s==="â™¦"||s==="hearts"||s==="diamonds",a=c==="A",_=t.isAceLow===!0,r=a&&!_;return e.jsxs("div",{className:`${D.cardMini} ${i?D.red:D.black}`,children:[e.jsxs("span",{className:D.rank,children:[c,a&&(r?e.jsx("span",{className:D.aceIndicator,children:"â†‘"}):_?e.jsx("span",{className:D.aceIndicator,children:"â†“"}):null)]}),e.jsx("span",{className:D.suit,children:n(s)})]})},wa=({summary:t})=>{if(!t)return null;const n=i=>{switch(i){case"win":return R.win;case"lose":return R.lose;case"penalty":case"triple_penalty":return R.penalty;case"pass":return R.pass;default:return R.default}},c=i=>{switch(i){case"win":return"WON";case"lose":return"LOST";case"penalty":return"PENALTY";case"triple_penalty":return"TRIPLE PENALTY";case"pass":return"PASSED";case"bet":return"BET";default:return i?.toUpperCase()||""}},s=()=>t.winAmount?t.winAmount/2:t.lossAmount?t.lossAmount:t.betAmount?t.betAmount:0;return e.jsxs("div",{className:`panel-alt ${R.turnPanel} ${n(t.action)}`,children:[e.jsxs("div",{className:R.leftSection,children:[e.jsxs("div",{className:R.cardsContainer,children:[e.jsx(ne,{card:t.cards?.left}),t.cards?.middle&&e.jsx(ne,{card:t.cards?.middle}),e.jsx(ne,{card:t.cards?.right})]}),e.jsx("span",{className:R.playerName,children:t.playerName}),e.jsx("span",{className:R.action,children:c(t.action)})]}),s()>0&&e.jsx("div",{className:R.amount,children:e.jsx(L,{amount:s(),size:"small"})})]})},Aa="_roundPanel_1npc7_2",Ia="_dividerLine_1npc7_26",Sa="_roundLabel_1npc7_38",ee={roundPanel:Aa,dividerLine:Ia,roundLabel:Sa},ka=({roundNumber:t})=>e.jsxs("div",{className:`panel-alt ${ee.roundPanel}`,children:[e.jsx("div",{className:ee.dividerLine}),e.jsxs("span",{className:ee.roundLabel,children:["Round ",t]}),e.jsx("div",{className:ee.dividerLine})]}),Pa=()=>{const{gameState:t}=k(),[n,c]=u.useState(!1);if(!t||!t.gameLog)return null;const s=t.gameLog||[],i=t.seats?t.seats.filter(l=>l!==null).length:0,a=Math.max(i,4),[_,r]=u.useState(a);u.useEffect(()=>{n||r(a)},[i,a,n]);const d=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),o=()=>{c(!n),n&&r(a)},m=()=>{r(l=>l+Math.max(i,5))},x=n?[]:s.slice(0,_),h=(l,y)=>l.type==="turn"?e.jsx(wa,{summary:l},l.id):l.type==="round_start"?e.jsx(ka,{roundNumber:l.roundNumber},l.id):l.type==="system"||l.type==="error"?e.jsxs("div",{className:`${P.logEntry} ${P.systemMessage}`,children:[e.jsx("span",{className:P.logTime,children:d(l.timestamp)}),e.jsx("span",{className:P.logMessage,children:l.message})]},l.id):e.jsxs("div",{className:P.logEntry,children:[e.jsx("span",{className:P.logTime,children:d(l.timestamp)}),e.jsx("span",{className:P.logMessage,children:l.message})]},l.id);return e.jsxs("div",{className:P.gameLogContainer,children:[e.jsxs("h3",{className:P.gameLogHeader,onClick:o,children:["Game Log",e.jsx("span",{className:P.expandIcon,children:n?"â–¶":"â–¼"})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:P.gameLogEntries,children:s.length===0?e.jsx("div",{className:P.emptyLog,children:"No game events yet"}):x.map(h)}),s.length>_&&e.jsxs("div",{className:P.showMoreButton,onClick:m,children:["Show ",Math.min(Math.max(i,5),s.length-_)," more",s.length-_>Math.max(i,5)&&` (${s.length-_} remaining)`]})]})]})},La="_emojiReactions_1y1z5_1",$a="_toggleButton_1y1z5_8",Ea="_emojiPanel_1y1z5_35",Ra="_emojiGrid_1y1z5_60",Oa="_emojiButton_1y1z5_66",K={emojiReactions:La,toggleButton:$a,emojiPanel:Ea,emojiGrid:Ra,emojiButton:Oa},Ma=()=>{const[t,n]=u.useState(!1),{socket:c}=$(),{gameState:s}=k(),{user:i}=H(),a=u.useRef(null),_=[{emoji:"ğŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ğŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ğŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ğŸ˜",name:"Cool",color:"#4A5568"},{emoji:"ğŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ğŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ğŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ğŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ğŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ğŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ğŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ğŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ğŸ‰",name:"Celebration",color:"#A855F7"},{emoji:"ğŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ğŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ğŸ˜¤",name:"Confident",color:"#DC2626"}],r=o=>{!c||!s||!i||(c.emit("emojiReaction",{gameId:s.id,emoji:o.emoji,color:o.color,playerName:i.username}),n(!1))},d=()=>{n(!t)};return u.useEffect(()=>{const o=m=>{a.current&&!a.current.contains(m.target)&&n(!1)};return t&&(document.addEventListener("mousedown",o),document.addEventListener("touchstart",o)),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[t]),e.jsxs("div",{className:K.emojiReactions,ref:a,children:[e.jsx("button",{className:K.toggleButton,onClick:d,"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ğŸ˜Š"}),t&&e.jsx("div",{className:K.emojiPanel,children:e.jsx("div",{className:K.emojiGrid,children:_.map((o,m)=>e.jsx("button",{className:K.emojiButton,onClick:()=>r(o),"data-gamepad-focusable":"true",title:o.name,style:{"--emoji-color":o.color},children:o.emoji},m))})})]})},Da=({onReturnToLobby:t})=>{const[n,c]=u.useState(!1),{gameState:s,error:i,clearError:a}=k();Ie(!0),u.useEffect(()=>{if(i){const m=setTimeout(()=>{a()},1e4);return()=>clearTimeout(m)}},[i,a]);const _=()=>{t&&t()},{socket:r}=$(),{user:d}=H();if(!s)return e.jsx("div",{className:F.loadingContainer,children:e.jsx("p",{children:"Loading game state..."})});s.phase;const o=d?.id;return s.players&&o&&s.players[o],e.jsxs("div",{className:`screen ${F.gameContainer}`,children:[e.jsxs("div",{className:`${F.gameScreen} mobile-scale-content`,children:[e.jsx(Qe,{handleLeaveGame:_,onModalStateChange:c}),i&&e.jsx("div",{className:F.errorContainer,children:e.jsx("p",{className:F.errorText,children:i})}),e.jsx($n,{}),e.jsxs("div",{className:F.gameBottomSection,children:[e.jsx(Xn,{}),e.jsx(Pa,{})]})]}),!n&&e.jsx(Ma,{})]})},Ga="_modalOverlay_17ksc_1",Fa="_modalContent_17ksc_14",qa="_passwordInput_17ksc_34",za="_modalActions_17ksc_54",Ua="_modalButton_17ksc_60",Ha="_cancelButton_17ksc_71",Wa="_submitButton_17ksc_80",G={modalOverlay:Ga,modalContent:Fa,passwordInput:qa,modalActions:za,modalButton:Ua,cancelButton:Ha,submitButton:Wa};function Va({isOpen:t,onClose:n,onSubmit:c,gameId:s}){const[i,a]=u.useState("");if(!t)return null;const _=d=>{d.preventDefault(),c(i),a("")},r=()=>{a(""),n()};return e.jsx("div",{className:G.modalOverlay,children:e.jsxs("div",{className:G.modalContent,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:s||""}),":"]}),e.jsxs("form",{onSubmit:_,autoComplete:"off",children:[e.jsx(me,{title:"Enter Game Password",type:"text",value:i,onChange:d=>a(d.target.value),className:G.passwordInput,autoFocus:!0,required:!0,autoComplete:"off","data-form-type":"other","data-lpignore":"true"}),e.jsxs("div",{className:G.modalActions,children:[e.jsx("button",{type:"button",onClick:r,className:`${G.modalButton} ${G.cancelButton}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${G.modalButton} ${G.submitButton}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const eo=()=>{const{gameId:t}=ye(),n=fe(),{socket:c,isConnected:s}=$(),[i,a]=u.useState(!0),[_,r]=u.useState(null),[d,o]=u.useState(!1),m=u.useRef(!1),x=u.useCallback(()=>{c&&s&&t&&(ae.play("ui.leave"),c.emit("leaveGame",{gameId:t}),n("/"))},[c,s,t,n]),h=u.useCallback(p=>{o(!1),c&&t&&p&&(r(null),c.emit("joinGame",{gameId:t,password:p}),a(!0))},[c,t]),l=u.useCallback(()=>{o(!1),n("/")},[n]);u.useEffect(()=>{r(null),o(!1),a(!0)},[t]),u.useEffect(()=>{if(!c)return;const p=v=>{v&&v.game&&v.game.id===t&&(ae.play("ui.join"),a(!1),r(null),o(!1))},N=v=>{const B=v.message||"An unknown error occurred";B==="Password required"?(console.error(v),o(!0),a(!1),r(null)):B==="Invalid password"?(console.error(v),r("Invalid password."),o(!0),a(!1)):B==="Game not found"?n("/"):B==="Game is full"?(r(B),a(!1),o(!1),setTimeout(()=>n("/"),3e3)):(r(B),a(!1),o(!1))};return c.on("gameJoined",p),c.on("error",N),()=>{c.off("gameJoined",p),c.off("error",N)}},[c,t,n]),u.useEffect(()=>{c&&t&&!m.current&&(m.current=!0,a(!0),r(null),o(!1),c.emit("joinGame",{gameId:t}))},[c,t]);const y=()=>{const{gameState:p}=k(),{socket:N}=$();return u.useEffect(()=>{const v=B=>{const M=N?.auth?.userId;if((M&&p?.players?p.players[M]:null)?.isReady||!1)return B.preventDefault(),B.returnValue="You have money in the pot! Are you sure you want to leave?",B.returnValue};return window.addEventListener("beforeunload",v),()=>{window.removeEventListener("beforeunload",v)}},[p,N]),e.jsxs(e.Fragment,{children:[e.jsx(Va,{isOpen:d,onClose:l,onSubmit:h,gameId:t}),i&&e.jsx(xe,{message:`Joining game ${t}...`}),_&&!i&&!d&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:_}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!i&&!_&&p&&e.jsx(Da,{onReturnToLobby:x})]})};return e.jsx(ke,{gameId:t,children:e.jsx(y,{})})};export{eo as default};
