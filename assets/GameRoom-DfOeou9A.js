import{j as e,r as a}from"./react-7X_HfTL4.js";import{I as s,u as t,C as n,a as r,R as l,P as i,S as c,c as o,b as d,G as _,U as u,d as m}from"./StoreModal-D5zi6YlO.js";import{a as h,u as x,U as g,f as j,s as p,L as N}from"./index-DlJ1vvfx.js";import{u as b}from"./useGamepadNavigation-DCtNTfjZ.js";import{J as v,I as f}from"./vendor-CrXq7rKl.js";import"./mui-B3QJ8a6B.js";import"./socket-CR9bC8yV.js";const C="ðŸ¯",y="ðŸƒ",k="âœ“",I="ðŸƒ",{TIMERS:w}={TIMERS:{DEALING_DURATION:3e3,BETTING_DURATION:3e4,REVEALING_DURATION:3e3,RESULTS_DURATION:5e3}},T="_gameContainer_e1zrv_1",S="_gameScreen_e1zrv_16",A="_loadingContainer_e1zrv_52",B="_errorContainer_e1zrv_61",L="_errorText_e1zrv_71",R="_gameInfoWrapper_e1zrv_76",P="_gameBottomSection_e1zrv_91",$="_playerListContainer_e1zrv_98",E="_gameLogContainer_e1zrv_103",D="_imBackButton_e1zrv_141",O={headerContainer:"_headerContainer_bsfrc_1",desktopLayout:"_desktopLayout_bsfrc_14",mobileLayout:"_mobileLayout_bsfrc_22",mobileTopRow:"_mobileTopRow_bsfrc_28",mobileRight:"_mobileRight_bsfrc_40",mobileActions:"_mobileActions_bsfrc_47",mobileBottomRow:"_mobileBottomRow_bsfrc_54",headerLeft:"_headerLeft_bsfrc_63",headerRight:"_headerRight_bsfrc_69",controlsGroup:"_controlsGroup_bsfrc_75",controlsStack:"_controlsStack_bsfrc_82",mobileControlsStack:"_mobileControlsStack_bsfrc_89",gameTitle:"_gameTitle_bsfrc_98",liveTag:"_liveTag_bsfrc_108",pulse:"_pulse_bsfrc_1",gameIdText:"_gameIdText_bsfrc_160",gameIdLink:"_gameIdLink_bsfrc_167",balanceDisplay:"_balanceDisplay_bsfrc_184",headerCenter:"_headerCenter_bsfrc_217",gamePhase:"_gamePhase_bsfrc_245",phaseIcon:"_phaseIcon_bsfrc_307",phaseText:"_phaseText_bsfrc_312",timerBar:"_timerBar_bsfrc_316",timerProgress:"_timerProgress_bsfrc_326",dealPulse:"_dealPulse_bsfrc_1",betPulse:"_betPulse_bsfrc_1",revealFade:"_revealFade_bsfrc_1",resultPulse:"_resultPulse_bsfrc_1",phaseBettingYourTurn:"_phaseBettingYourTurn_bsfrc_480",phaseBettingWaiting:"_phaseBettingWaiting_bsfrc_487",reveal:"_reveal_bsfrc_1",sparkle:"_sparkle_bsfrc_1",timerDrain:"_timerDrain_bsfrc_1"},F=({color:a="currentColor",size:s=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),G=({onClick:a,title:t="Leave Game",...n})=>e.jsx(s,{icon:e.jsx(F,{color:"white",size:20}),title:t,onClick:a,variant:"danger",...n}),U={waiting:{text:"Waiting for Players",icon:"ðŸ‘¥"},dealing:{text:"Dealing Cards",icon:y},revealing:{text:"Revealing Cards",icon:"ðŸ¥"},results:{text:"Round Results",icon:"ðŸ†"}},M=({handleLeaveGame:s,onModalStateChange:_})=>{const{gameState:u,gameId:m}=t(),{socket:g}=h(),{user:j}=x(),p=g?.auth?.userId,N=p&&u?.players?u.players[p]:null,b=N?.balance??j?.balance??0,v=u?.phase||"waiting",f=N?.isReady||!1,[C,y]=a.useState(null),[k,I]=a.useState(!1),[T,S]=a.useState(!1),[A,B]=a.useState(!1),[L,R]=a.useState(!1),[P,$]=a.useState(!1);a.useEffect((()=>{let e;return"dealing"===v?(y(w.DEALING_DURATION),e=setInterval((()=>{y((e=>Math.max(0,e-100)))}),100)):"betting"===v?(y(w.BETTING_DURATION),e=setInterval((()=>{y((e=>Math.max(0,e-100)))}),100)):"revealing"===v?(y(w.REVEALING_DURATION),e=setInterval((()=>{y((e=>Math.max(0,e-100)))}),100)):"results"===v?(y(w.RESULTS_DURATION),e=setInterval((()=>{y((e=>Math.max(0,e-100)))}),100)):y(null),()=>{e&&clearInterval(e)}}),[v,u?.waitingForAceDecision]),a.useEffect((()=>{_&&_(k||T||A||L||P)}),[k,T,A,L,P,_]);let E=U[v]||{text:"Unknown Phase",icon:"â“"};u?.waitingForAceDecision&&"dealing"===v&&(E={text:"Choosing Ace Value",icon:"ðŸ¤”"}),u?.waitingForSecondChance&&(E={text:"Second Chance Decision",icon:"ðŸ¤”"});const D=g&&g.auth?.userId&&u?.currentPlayerId===g.auth.userId;if("betting"===v&&u?.currentPlayerId&&u?.players){const e=u.players[u.currentPlayerId];E=e?D?{text:"Pass or Bet",icon:"ðŸ¤”"}:{text:`${e.name} is Betting`,icon:"ðŸ¤”"}:{text:"Betting Round",icon:"ðŸ¤”"}}return e.jsxs("div",{className:O.headerContainer,children:[e.jsxs("div",{className:O.desktopLayout,children:[e.jsxs("div",{className:O.headerLeft,children:[e.jsxs("h1",{className:O.gameTitle,children:["In Between ",e.jsx("span",{className:O.liveTag,children:"LIVE"})]}),e.jsx("p",{className:O.gameIdText,children:e.jsxs("span",{className:O.gameIdLink,onClick:()=>I(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",m]})})]}),e.jsx("div",{className:O.headerCenter,children:e.jsxs("div",{className:`${O.gamePhase} ${"betting"===v?D?O.phaseBettingYourTurn:O.phaseBettingWaiting:O[`phase${v.charAt(0).toUpperCase()+v.slice(1)}`]}`,"data-phase":v,children:[e.jsx("span",{className:O.phaseIcon,children:E.icon}),e.jsx("span",{className:O.phaseText,children:E.text}),null!==C&&e.jsx("div",{className:O.timerBar,children:e.jsx("div",{className:O.timerProgress,style:{width:C/("dealing"===v?w.DEALING_DURATION:"betting"===v?w.BETTING_DURATION:"revealing"===v?w.REVEALING_DURATION:w.RESULTS_DURATION)*100+"%"}})})]})}),e.jsx("div",{className:O.headerRight,children:e.jsxs("div",{className:O.controlsStack,children:[e.jsxs("div",{className:O.balanceDisplay,children:["Balance: ",e.jsx(n,{amount:Number(b),size:"small"})]}),e.jsxs("div",{className:O.controlsGroup,children:[e.jsx(r,{onModalStateChange:B,"data-gamepad-focusable":"true"}),e.jsx(l,{onModalStateChange:R,"data-gamepad-focusable":"true"}),e.jsx(i,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(c,{onClick:()=>S(!0),"data-gamepad-focusable":"true"}),e.jsx(G,{onClick:s,disabled:f,"data-gamepad-focusable":"true"})]})]})})]}),e.jsxs("div",{className:O.mobileLayout,children:[e.jsxs("div",{className:O.mobileTopRow,children:[e.jsxs("div",{className:O.headerLeft,children:[e.jsxs("h1",{className:O.gameTitle,children:["In Between ",e.jsx("span",{className:O.liveTag,children:"LIVE"})]}),e.jsx("p",{className:O.gameIdText,children:e.jsxs("span",{className:O.gameIdLink,onClick:()=>I(!0),title:"Click to view game summary","data-gamepad-focusable":"true",tabIndex:"0",children:["Game #",m]})})]}),e.jsx("div",{className:O.mobileRight,children:e.jsxs("div",{className:O.mobileControlsStack,children:[e.jsxs("div",{className:O.balanceDisplay,children:["Balance: ",e.jsx(n,{amount:Number(b),size:"small"})]}),e.jsxs("div",{className:O.mobileActions,children:[e.jsx(r,{onModalStateChange:B,"data-gamepad-focusable":"true"}),e.jsx(l,{onModalStateChange:R,"data-gamepad-focusable":"true"}),e.jsx(i,{onModalStateChange:$,"data-gamepad-focusable":"true"}),e.jsx(c,{onClick:()=>S(!0),"data-gamepad-focusable":"true"}),e.jsx(G,{onClick:s,disabled:f,"data-gamepad-focusable":"true"})]})]})})]}),e.jsx("div",{className:O.mobileBottomRow,children:e.jsxs("div",{className:`${O.gamePhase} ${"betting"===v?D?O.phaseBettingYourTurn:O.phaseBettingWaiting:O[`phase${v.charAt(0).toUpperCase()+v.slice(1)}`]}`,"data-phase":v,children:[e.jsx("span",{className:O.phaseIcon,children:E.icon}),e.jsx("span",{className:O.phaseText,children:E.text}),null!==C&&e.jsx("div",{className:O.timerBar,children:e.jsx("div",{className:O.timerProgress,style:{width:C/("dealing"===v?w.DEALING_DURATION:"betting"===v?w.BETTING_DURATION:"revealing"===v?w.REVEALING_DURATION:w.RESULTS_DURATION)*100+"%"}})})]})})]}),k&&e.jsx(o,{onClose:()=>I(!1),gameData:u}),T&&e.jsx(d,{onClose:()=>S(!1)})]})},z={cardDisplayContainer:"_cardDisplayContainer_h5xgf_1",cardsRow:"_cardsRow_h5xgf_9",card:"_card_h5xgf_1",dealingPhase:"_dealingPhase_h5xgf_53",revealingPhase:"_revealingPhase_h5xgf_62",cardBack:"_cardBack_h5xgf_88",redCard:"_redCard_h5xgf_97",blackCard:"_blackCard_h5xgf_101",cardCorner:"_cardCorner_h5xgf_105",bottomRight:"_bottomRight_h5xgf_114",cardValue:"_cardValue_h5xgf_122",cardSuit:"_cardSuit_h5xgf_128",cardCenter:"_cardCenter_h5xgf_133",aceCard:"_aceCard_h5xgf_166",aceIndicator:"_aceIndicator_h5xgf_170",aceHigh:"_aceHigh_h5xgf_190",aceLow:"_aceLow_h5xgf_196",indicatorContent:"_indicatorContent_h5xgf_202"},W=({direction:a="up",color:s="currentColor",size:t=24})=>{const n="down"===a?"rotate(180deg)":"rotate(0deg)";return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:n,display:"inline-block",transformOrigin:"center"},children:e.jsx("path",{d:"M7 11l5-5 5 5M7 17l5-5 5 5"})})},q=()=>{const{gameState:a}=t();if(!a)return e.jsx("div",{className:z.loading,children:"Loading game state..."});const{firstCard:s,secondCard:n,thirdCard:r,phase:l,dealer:i}=a,c={2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"J",Q:"Q",K:"K",A:"A"},o={hearts:"â™¥",diamonds:"â™¦",clubs:"â™£",spades:"â™ ","â™¥":"â™¥","â™¦":"â™¦","â™£":"â™£","â™ ":"â™ "},d=(a,s)=>{if(!a)return e.jsx("div",{className:z.card,children:e.jsx("div",{className:z.cardBack})},`empty-${s}`);const t="â™¥"===(n=a.suit)||"â™¦"===n||"hearts"===n||"diamonds"===n;var n;const r="A"===a.value,l=a.isAceLow,i=1===s;return e.jsxs("div",{className:`${z.card} ${t?z.redCard:z.blackCard} ${r?z.aceCard:""}`,children:[r&&!i&&e.jsx("div",{className:`${z.aceIndicator} ${l?z.aceLow:z.aceHigh} ${t?z.redCard:z.blackCard}`,children:l?e.jsxs("span",{className:z.indicatorContent,children:["LOW ",e.jsx(W,{direction:"down",color:t?"#e74c3c":"#2c3e50",size:16})]}):e.jsxs("span",{className:z.indicatorContent,children:["HIGH ",e.jsx(W,{direction:"up",color:t?"#e74c3c":"#2c3e50",size:16})]})}),e.jsxs("div",{className:z.cardCorner,children:[e.jsx("div",{className:z.cardValue,children:c[a.value]}),e.jsx("div",{className:z.cardSuit,children:o[a.suit]})]}),e.jsx("div",{className:z.cardCenter,children:o[a.suit]}),e.jsxs("div",{className:`${z.cardCorner} ${z.bottomRight}`,children:[e.jsx("div",{className:z.cardValue,children:c[a.value]}),e.jsx("div",{className:z.cardSuit,children:o[a.suit]})]})]},`${a.value}-${a.suit}-${s}`)};return e.jsx("div",{className:z.cardDisplayContainer,children:e.jsx("div",{className:`${z.cardsRow} ${"dealing"===l?z.dealingPhase:""} ${"revealing"===l?z.revealingPhase:""}`,children:(()=>{let e=[null,null,null];return s||n||r?(s&&(e[0]={...s}),n&&(e[2]={...n}),r&&(e[1]={...r}),e.map(((e,a)=>d(e,a)))):e.map(((e,a)=>d(e,a)))})()})})},V="_bettingPanel_1uxgg_1",H="_betContainer_1uxgg_19",Y="_betText_1uxgg_28",J="_extremeOptionsRow_1uxgg_45",K="_betButtons_1uxgg_60",Q="_betButton_1uxgg_60",X="_disabledButton_1uxgg_110",Z="_extremeButton_1uxgg_117",ee="_passButton_1uxgg_131",ae="_customBetContainer_1uxgg_141",se="_customBetInput_1uxgg_155",te="_customBetButton_1uxgg_166",ne="_potButton_146vb_5",re="_shimmerBorder_146vb_47",le="_buttonBackground_146vb_81",ie="_reflectionEffect_146vb_101",ce="_buttonContent_146vb_148",oe="_potText_146vb_164",de="_potAmount_146vb_185",_e="_disabled_146vb_258",ue=({amount:a,disabled:s,onClick:t,...r})=>e.jsxs("button",{className:`${ne} ${s?_e:""}`,onClick:t,disabled:s,"aria-label":`Bet the pot: ${a} chips`,...r,children:[e.jsx("div",{className:re}),e.jsx("div",{className:le}),e.jsx("div",{className:ie}),e.jsxs("div",{className:ce,children:[e.jsx("span",{className:oe,children:"POT"}),e.jsx("span",{className:de,children:e.jsx(n,{amount:a,background:"pill"})})]})]}),me=()=>{const{gameState:s,placeBet:r}=t(),{socket:l}=h(),[i,c]=a.useState("");if(!s)return null;const{players:o,currentPlayerId:d,pot:u,phase:m,firstCard:x,secondCard:g}=s;if("betting"!==m)return null;const j=l&&d===l.auth?.userId,p=l&&o&&l.auth?.userId?o[l.auth.userId]:null,N=Number(p?.balance||0),b=e=>{const a=e.target.value.replace(/[^0-9]/g,""),s=Math.min(u,N);a&&parseInt(a)>s?c(s.toString()):c(a)},v=()=>{if(i&&!isNaN(i)){const e=parseInt(i,10);e>=1&&e<=Math.min(u,N)&&(r(e),c(""))}},f=e=>{"Enter"===e.key&&v()};return j?e.jsx("div",{className:V,children:j?e.jsxs("div",{className:H,children:[e.jsxs("p",{className:Y,children:["Place your bet (Min: ",e.jsx(n,{amount:1}),", Max: ",e.jsx(n,{amount:Math.min(u,N)}),")"]}),e.jsxs("div",{className:J,children:[e.jsx("button",{className:`${Q} ${Z} ${ee}`,onClick:()=>r(0),"data-gamepad-focusable":"true",autoFocus:!0,children:"PASS"}),e.jsx(ue,{amount:u,onClick:()=>r(u),disabled:u>N,"data-gamepad-focusable":"true"})]}),e.jsxs("div",{className:K,children:[[1,2,5].map((a=>{const s=Math.min(u,N),t=a>s;return e.jsx("button",{className:`${Q} ${t?X:""}`,onClick:()=>r(a),disabled:t,"data-gamepad-focusable":"true",children:e.jsx(n,{amount:a})},a)})),e.jsxs("div",{className:ae,children:[e.jsx(_,{title:"Enter Bet Amount",type:"number",className:se,placeholder:"Custom",value:i,onChange:b,onKeyPress:f}),e.jsx("button",{className:te,onClick:v,disabled:!i,"data-gamepad-focusable":"true",children:"Bet"})]})]})]}):null}):null},he="_playersContainer_1etil_1",xe="_playersTitle_1etil_15",ge="_playersList_1etil_38",je="_playerItem_1etil_44",pe="_currentPlayer_1etil_72",Ne="_currentUser_1etil_78",be="_playerInfo_1etil_82",ve="_playerName_1etil_89",fe="_playerStatus_1etil_94",Ce="_disconnectedIndicator_1etil_101",ye="_playerBalanceContainer_1etil_108",ke="_playerBalance_1etil_108",Ie="_balanceIncrease_1etil_127",we="_balanceDecrease_1etil_131",Te="_readyIndicator_1etil_161",Se="_ready_1etil_161",Ae="_notReady_1etil_172",Be="_sittingOut_1etil_176",Le="_emptyPlayerList_1etil_191",Re=()=>{const{gameState:s}=t(),{socket:n}=h(),r=a.useContext(g);if(a.useEffect((()=>{if(s?.players&&r){const e=Object.values(s.players).map((e=>e.userId)).filter(Boolean);e.length>0&&r.prefetchUsers(e)}}),[s?.players,r]),!s||!s.players)return e.jsx("div",{className:Le,children:e.jsx("p",{children:"Waiting for game data..."})});const{players:l,currentPlayerId:i,dealerId:c,gameTransactions:o=[]}=s,d=n?.auth?.userId,_=s.totals||{};return l&&0!==Object.keys(l).length?e.jsxs("div",{className:he,children:[e.jsx("h3",{className:xe,children:"Scoreboard"}),e.jsx("div",{className:ge,children:s.seats.filter((e=>null!==e&&l[e])).map((a=>{const s=l[a],t=a===i,n=s.userId===d,r=a===c;return s.disconnected,e.jsxs("div",{className:`\n                  ${je}\n                  ${t?pe:""}\n                  ${n?Ne:""}\n                `,children:[e.jsxs("div",{className:be,children:[e.jsx(u,{userId:s.userId,size:"small",showName:!1}),e.jsxs("span",{className:ve,children:[s.name,e.jsxs("span",{className:fe,children:[r&&` ${y}`,s.disconnected&&e.jsx("span",{className:Ce,title:"Player disconnected",children:"âš ï¸ Disconnected"})]})]})]}),e.jsxs("div",{className:ye,children:[e.jsx(Pe,{balance:_[a]||0}),e.jsx("div",{className:`\n                    ${Te} \n                    ${s.isSittingOut?Be:s.isReady?Se:Ae}\n                  `,title:s.isSittingOut?"Sitting Out":s.isReady?"Ready":"Not Ready"})]})]},a)}))})]}):e.jsx("div",{className:Le,children:e.jsx("p",{children:"Waiting for players to join..."})})},Pe=({balance:s})=>{const[t,r]=a.useState(s),[l,i]=a.useState(""),c=a.useRef(null);return a.useEffect((()=>{if(s!==t){i(s>t?Ie:we),c.current&&clearTimeout(c.current),c.current=setTimeout((()=>{i("")}),1e3),r(s)}return()=>{c.current&&clearTimeout(c.current)}}),[s]),e.jsx("span",{className:`${ke} ${l}`,children:e.jsx(n,{amount:s})})},$e="_potDisplayContainer_1seua_1",Ee="_potIconWrapper_1seua_29",De="_potIcon_1seua_29",Oe="_potInfo_1seua_55",Fe="_potLabel_1seua_61",Ge="_potAmount_1seua_73",Ue="_potCounter_1seua_80",Me=()=>{const{gameState:a}=t();if(!a)return null;const{pot:s,round:r=1}=a;return e.jsxs("div",{className:$e,children:[e.jsx("div",{className:Ee,children:e.jsx("span",{className:De,children:C})}),e.jsxs("div",{className:Oe,children:[e.jsxs("h3",{className:Fe,children:["POT ",e.jsxs("span",{className:Ue,children:["(",r,")"]})]}),e.jsx("span",{className:Ge,children:e.jsx(n,{amount:s,size:"medium"})})]})]})},ze="_deckDisplayContainer_1nuck_1",We="_deckVisual_1nuck_29",qe="_deckIcon_1nuck_37",Ve="_deckThick_1nuck_45",He="_deckMedium_1nuck_46",Ye="_deckThin_1nuck_47",Je="_deckVeryThin_1nuck_48",Ke="_deckInfo_1nuck_95",Qe="_deckLabel_1nuck_101",Xe="_deckCount_1nuck_113",Ze="_deckCounter_1nuck_120",ea=()=>{const{gameState:a}=t();if(!a)return null;const{deckSize:s=0,deckCount:n=1}=a;return e.jsxs("div",{className:ze,children:[e.jsx("div",{className:`${We} ${s>=40?Ve:s>=25?He:s>=10?Ye:Je}`,children:e.jsx("div",{className:qe,children:I})}),e.jsxs("div",{className:Ke,children:[e.jsxs("h3",{className:Qe,children:["DECK ",e.jsxs("span",{className:Ze,children:["(",n,")"]})]}),e.jsx("span",{className:Xe,children:s})]})]})},aa="_anteControlsWrapper_kosev_1",sa="_controlsContainer_kosev_8",ta="_autoAnteContainer_kosev_25",na="_anteButton_kosev_32",ra="_backOutButton_kosev_32",la="_shimmerBorder_kosev_107",ia="_anteIcon_kosev_225",ca="_backOutIcon_kosev_225",oa="_buttonInfo_kosev_244",da="_buttonLabel_kosev_250",_a="_buttonAmount_kosev_267",ua="_notEnoughChipsText_kosev_282",ma="_buttonContainerRow_kosev_294",ha="_sitOutHalfWidth_kosev_304",xa="_toggleContainer_11qbc_1",ga="_toggleLabel_11qbc_12",ja="_toggleInput_11qbc_19",pa="_toggleSlider_11qbc_25",Na="_toggleText_11qbc_74",ba="_loading_11qbc_82",va=()=>{const{preferences:a,toggleAutoAnte:s,loading:n}=j(),{gameState:r,playerReady:l}=t(),{socket:i}=h();return n?e.jsx("div",{className:ba,children:"Loading preferences..."}):e.jsx("div",{className:xa,children:e.jsxs("label",{className:ga,children:[e.jsx("input",{type:"checkbox",checked:a.autoAnte,onChange:async()=>{const e=!a.autoAnte,t=await s();if(e&&t&&l){let e=null;if(i&&i.auth?.userId&&r?.players){const a=Object.keys(r.players);for(const s of a)if(r.players[s].userId===i.auth.userId){e=r.players[s];break}}const a=e?.isReady;a||l()}},className:ja,"data-gamepad-focusable":"true"}),e.jsx("span",{className:pa}),e.jsx("span",{className:Na,children:"Auto-Ante"})]})})},fa=()=>{const{gameState:a,playerReady:s,playerUnready:r}=t(),{socket:l}=h(),{user:i}=x();if(!a)return null;const{players:c,anteAmount:o,phase:d}=a;if("waiting"!==d)return null;let _=null;if(l&&l.auth?.userId&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===l.auth.userId){_=c[a];break}}else if(i&&c){const e=Object.keys(c);for(const a of e)if(c[a].userId===i.id){_=c[a];break}}const u=Number(_?.balance||0),m=_?.isReady,g=u>=o;return e.jsx("div",{className:aa,children:e.jsxs("div",{className:sa,children:[e.jsx("div",{className:ma,children:m?e.jsx("div",{className:ma,children:e.jsxs("button",{className:ra,onClick:()=>{"function"==typeof r&&r()},"aria-label":"Back out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:la}),e.jsx("span",{className:ca,children:"âœ•"}),e.jsx("div",{className:oa,children:e.jsx("h3",{className:da,children:"BACK OUT"})})]})}):e.jsxs("div",{className:ma,children:[e.jsxs("button",{className:na,onClick:s,disabled:!g,"aria-label":"Ante up","data-gamepad-focusable":"true",autoFocus:!0,children:[e.jsx("div",{className:la}),e.jsx("span",{className:ia,children:k}),e.jsxs("div",{className:oa,children:[e.jsx("h3",{className:da,children:"ANTE"}),e.jsx("span",{className:_a,children:e.jsx(n,{amount:o})})]})]}),e.jsxs("button",{className:`${ra} ${ha}`,onClick:()=>{l&&a&&i&&l.emit("sitOut",{gameId:a.id,userId:l.auth?.userId||i.id})},disabled:_?.isSittingOut,title:_?.isSittingOut?"You are currently sitting out":"Sit out next round","aria-label":"Sit Out","data-gamepad-focusable":"true",children:[e.jsx("div",{className:la}),e.jsx("div",{className:oa,children:e.jsx("h3",{className:da,children:"SIT OUT"})})]}),!g&&e.jsxs("p",{className:ua,children:["Not enough coins (",e.jsx(n,{amount:o})," required)"]})]})}),e.jsx("div",{className:ta,children:e.jsx(va,{})})]})})},Ca={resultsPanel:"_resultsPanel_ayp0x_1",resultContent:"_resultContent_ayp0x_19",resultText:"_resultText_ayp0x_27",winText:"_winText_ayp0x_34",tieText:"_tieText_ayp0x_39",loseText:"_loseText_ayp0x_50",winningsText:"_winningsText_ayp0x_55",countdownContainer:"_countdownContainer_ayp0x_62",countdownText:"_countdownText_ayp0x_67",countdownProgress:"_countdownProgress_ayp0x_74",countdownBar:"_countdownBar_ayp0x_82",penaltyWarning:"_penaltyWarning_ayp0x_95"},ya=()=>{const{gameState:a}=t();if(!a.result)return null;const{result:s,players:r,resultCountdown:l}=a,i=r[s.playerId]?.name;return e.jsx("div",{className:Ca.resultsPanel,children:e.jsxs("div",{className:Ca.resultContent,children:[(()=>{switch(s.outcome){case"win":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${Ca.resultText} ${Ca.winText}`,children:[i," WON!"]}),s.winnings>0&&e.jsxs("p",{className:Ca.winningsText,children:["Winnings: ",e.jsx(n,{amount:s.winnings/2,size:"medium"})]})]});case"lose":return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:`${Ca.resultText} ${Ca.loseText}`,children:[i," LOST!"]}),s.betAmount>0&&e.jsxs("p",{className:Ca.winningsText,children:["Loss: ",e.jsx(n,{amount:s.betAmount,size:"medium"})]})]});case"tie":return(()=>{const a=s.betAmount*(s.isTripleAceTie?3:2);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ca.penaltyWarning,children:e.jsx("div",{className:Ca.cautionTape})}),e.jsxs("h2",{className:`${Ca.resultText} ${Ca.tieText}`,children:[i," ",s.isTripleAceTie?"3X":"2X"," PENALTY!"]}),s.betAmount>0&&e.jsxs("p",{className:Ca.winningsText,children:["Penalty: ",e.jsx(n,{amount:a,size:"medium"})]})]})})();default:return null}})(),l&&e.jsxs("div",{className:Ca.countdownContainer,children:[e.jsxs("p",{className:Ca.countdownText,children:["Next hand in: ",l.countdownSeconds,"s"]}),e.jsx("div",{className:Ca.countdownProgress,children:e.jsx("div",{className:Ca.countdownBar,style:{width:l.countdownSeconds/5*100+"%"}})})]})]})})},ka="_aceChoicePanel_1y6rg_1",Ia="_aceChoiceControls_1y6rg_18",wa="_aceChoiceText_1y6rg_31",Ta="_waitingMessage_1y6rg_39",Sa="_waitingText_1y6rg_53",Aa="_countdown_1y6rg_60",Ba="_aceChoiceButtons_1y6rg_66",La="_aceChoiceButton_1y6rg_66",Ra="_aceHighButton_1y6rg_100",Pa="_aceLowButton_1y6rg_111",$a="_buttonContent_1y6rg_122",Ea=()=>{const{socket:s}=h(),{gameState:n}=t(),{user:r}=x(),[l,i]=a.useState(15);a.useEffect((()=>{if(n?.waitingForAceDecision&&s?.auth?.userId===n.currentPlayerId){i(15);const e=setInterval((()=>{i((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[n?.waitingForAceDecision,n?.currentPlayerId,s?.auth?.userId]);const c=e=>{s.emit("chooseAceValue",{isAceLow:e})},o=s?.auth?.userId===n.currentPlayerId,d=n.players[n.currentPlayerId]?.name||"Current player";return e.jsxs("div",{className:ka,children:[o?e.jsxs("div",{className:Ia,children:[e.jsxs("p",{className:wa,children:["You've been dealt an Ace! Choose whether it should be high or low.",e.jsxs("span",{className:Aa,children:[" (",l,"s)"]})]}),e.jsxs("div",{className:Ba,children:[e.jsx("button",{className:`${La} ${Ra}`,onClick:()=>c(!1),"data-gamepad-focusable":"true",autoFocus:!0,children:e.jsxs("span",{className:$a,children:["ACE HIGH ",e.jsx(W,{direction:"up",color:"white",size:20})]})}),e.jsx("button",{className:`${La} ${Pa}`,onClick:()=>c(!0),"data-gamepad-focusable":"true",children:e.jsxs("span",{className:$a,children:["ACE LOW ",e.jsx(W,{direction:"down",color:"white",size:20})]})})]})]}):null,o?null:e.jsx("div",{className:Ta,children:e.jsxs("p",{className:Sa,children:[d," is choosing whether their Ace is high or low..."]})})]})},Da="_secondChancePanel_mgk8a_1",Oa="_secondChanceControls_mgk8a_18",Fa="_secondChanceText_mgk8a_31",Ga="_waitingMessage_mgk8a_40",Ua="_waitingText_mgk8a_54",Ma="_countdown_mgk8a_61",za="_secondChanceButtons_mgk8a_68",Wa="_secondChanceButton_mgk8a_68",qa="_anteAgainButton_mgk8a_94",Va="_passButton_mgk8a_107",Ha="_currencyWrapper_mgk8a_120",Ya=()=>{const{gameState:s}=t(),{socket:r}=h(),[l,i]=a.useState(!1),[c,o]=a.useState(null),[d,_]=a.useState(15);a.useEffect((()=>{if(s?.waitingForSecondChance&&r?.auth?.userId===s.currentPlayerId){_(15);const e=setInterval((()=>{_((a=>a<=1?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[s?.waitingForSecondChance,s?.currentPlayerId,r?.auth?.userId]);const{players:u,currentPlayerId:m,anteAmount:x=1}=s,g=r&&m===r.auth?.userId,j=u[m],p=e=>{r&&(i(!0),o(e?"ante":"pass"),r.emit("secondChance",{anteAgain:e}))};return e.jsxs("div",{className:Da,children:[g?e.jsxs("div",{className:Oa,children:[e.jsxs("p",{className:Fa,children:["Would you like to ante up again for a second chance?",e.jsxs("span",{className:Ma,children:[" (",d,"s)"]})]}),e.jsxs("div",{className:za,children:[e.jsx("button",{className:`${Wa} ${qa}`,onClick:()=>p(!0),"data-gamepad-focusable":"true",autoFocus:!0,children:l&&"ante"===c?"Processing...":e.jsxs(e.Fragment,{children:["Ante Up ",e.jsx("span",{className:Ha,children:e.jsx(n,{amount:x,size:"small"})})]})}),e.jsx("button",{className:`${Wa} ${Va}`,onClick:()=>p(!1),"data-gamepad-focusable":"true",children:l&&"pass"===c?"Processing...":"Pass"})]})]}):null,g?null:e.jsx("div",{className:Ga,children:e.jsxs("p",{className:Ua,children:[j?.name," is deciding whether to take a second chance."]})})]})},Ja="_gameLogContainer_1c2o8_1",Ka="_gameLogHeader_1c2o8_10",Qa="_expandIcon_1c2o8_28",Xa="_gameLogEntries_1c2o8_51",Za="_expanded_1c2o8_61",es="_logEntry_1c2o8_65",as="_logTime_1c2o8_90",ss="_logMessage_1c2o8_97",ts="_emptyLog_1c2o8_102",ns="_showMoreButton_1c2o8_110",rs=()=>{const{gameState:s}=t(),[n,r]=a.useState(!1);if(!s||!s.gameLog)return null;const l=s.gameLog||[],i=()=>{r(!n)},c=n?l:l.slice(0,5);return e.jsxs("div",{className:Ja,children:[e.jsxs("div",{className:Ka,onClick:i,children:[e.jsx("h3",{children:"Game Log"}),e.jsx("span",{className:Qa,children:n?"â–²":"â–¼"})]}),e.jsx("div",{className:`${Xa} ${n?Za:""}`,children:0===c.length?e.jsx("div",{className:ts,children:"No game events yet"}):c.map(((a,s)=>{return e.jsxs("div",{className:es,children:[e.jsx("span",{className:as,children:(t=a.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),e.jsx("span",{className:ss,children:a.message})]},s);var t}))}),!n&&l.length>5&&e.jsxs("div",{className:ns,onClick:i,children:["Show ",l.length-5," more entries"]})]})},ls="_emojiReactions_19n7s_1",is="_toggleButton_19n7s_8",cs="_emojiPanel_19n7s_34",os="_emojiGrid_19n7s_59",ds="_emojiButton_19n7s_65",_s=()=>{const[s,n]=a.useState(!1),{socket:r}=h(),{gameState:l}=t(),{user:i}=x();return e.jsxs("div",{className:ls,children:[e.jsx("button",{className:is,onClick:()=>{n(!s)},"data-gamepad-focusable":"true","aria-label":"Toggle emoji reactions",children:"ðŸ˜Š"}),s&&e.jsx("div",{className:cs,children:e.jsx("div",{className:os,children:[{emoji:"ðŸ”¥",name:"Fire",color:"#FF6B35"},{emoji:"ðŸ˜„",name:"Happy",color:"#FFD93D"},{emoji:"ðŸ’©",name:"Poop",color:"#8B4513"},{emoji:"ðŸ˜Ž",name:"Cool",color:"#4A5568"},{emoji:"ðŸ¤¯",name:"Mind Blown",color:"#FFA500"},{emoji:"ðŸ˜ˆ",name:"Devilish",color:"#9333EA"},{emoji:"ðŸ˜¬",name:"Worried",color:"#FCD34D"},{emoji:"ðŸ‘",name:"Applause",color:"#FBBF24"},{emoji:"ðŸ˜­",name:"Crying",color:"#3B82F6"},{emoji:"ðŸ¤¡",name:"Clown",color:"#EF4444"},{emoji:"ðŸ’ª",name:"Strong",color:"#F59E0B"},{emoji:"ðŸ˜…",name:"Nervous",color:"#60A5FA"},{emoji:"ðŸŽ‰",name:"Celebration",color:"#A855F7"},{emoji:"ðŸ¤”",name:"Thinking",color:"#6B7280"},{emoji:"ðŸ™ˆ",name:"See No Evil",color:"#A0522D"},{emoji:"ðŸ˜¤",name:"Confident",color:"#DC2626"}].map(((a,s)=>e.jsx("button",{className:ds,onClick:()=>(e=>{r&&l&&i&&(r.emit("emojiReaction",{gameId:l.id,emoji:e.emoji,color:e.color,playerName:i.username}),n(!1))})(a),"data-gamepad-focusable":"true",title:a.name,style:{"--emoji-color":a.color},children:a.emoji},s)))})})]})},us=({onReturnToLobby:s})=>{const[n,r]=a.useState(!1),{gameState:l,error:i,clearError:c}=t();b(!0),a.useEffect((()=>{if(i){const e=setTimeout((()=>{c()}),1e4);return()=>clearTimeout(e)}}),[i,c]);const{socket:o}=h(),{user:d}=x();if(!l)return e.jsx("div",{className:A,children:e.jsx("p",{children:"Loading game state..."})});const _=l.phase||"waiting",u=d?.id,m=l.players&&u?l.players[u]:null;return e.jsxs("div",{className:T,children:[e.jsxs("div",{className:`${S} mobile-scale-content`,children:[e.jsx(M,{handleLeaveGame:()=>{s&&s()},onModalStateChange:r}),i&&e.jsx("div",{className:B,children:e.jsx("p",{className:L,children:i})}),e.jsxs("div",{className:R,children:[e.jsx(ea,{}),e.jsx(Me,{})]}),e.jsx(q,{}),m?.isSittingOut?e.jsx("button",{onClick:()=>{o&&l.id&&o.emit("imBack",{gameId:l.id})},className:D,"data-gamepad-focusable":"true",autoFocus:!0,children:"I'm Back!"}):"waiting"===_?e.jsx(fa,{}):"results"===_?e.jsx(ya,{}):l.waitingForAceDecision?e.jsx(Ea,{}):l.waitingForSecondChance?e.jsx(Ya,{}):"betting"===_?e.jsx(me,{}):null,e.jsxs("div",{className:P,children:[e.jsx("div",{className:$,children:e.jsx(Re,{})}),e.jsx("div",{className:E,children:e.jsx(rs,{})})]})]}),!n&&e.jsx(_s,{})]})},ms="_modalOverlay_quw6f_1",hs="_modalContent_quw6f_14",xs="_passwordInput_quw6f_34",gs="_modalActions_quw6f_52",js="_modalButton_quw6f_58",ps="_cancelButton_quw6f_69",Ns="_submitButton_quw6f_78";function bs({isOpen:s,onClose:t,onSubmit:n,gameId:r}){const[l,i]=a.useState("");if(!s)return null;return e.jsx("div",{className:ms,children:e.jsxs("div",{className:hs,children:[e.jsx("h2",{children:"Password Required"}),e.jsxs("p",{children:["Please enter the password for game ",e.jsx("strong",{children:r||""}),":"]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(l),i("")},children:[e.jsx(_,{title:"Enter Game Password",type:"password",value:l,onChange:e=>i(e.target.value),className:xs,autoFocus:!0,required:!0}),e.jsxs("div",{className:gs,children:[e.jsx("button",{type:"button",onClick:()=>{i(""),t()},className:`${js} ${ps}`,"data-gamepad-focusable":"true",children:"Cancel"}),e.jsx("button",{type:"submit",className:`${js} ${Ns}`,"data-gamepad-focusable":"true",children:"Join Game"})]})]})]})})}const vs=()=>{const{gameId:s}=v(),n=f(),{socket:r,isConnected:l}=h(),[i,c]=a.useState(!0),[o,d]=a.useState(null),[_,u]=a.useState(!1),x=a.useRef(!1),g=a.useCallback((()=>{r&&l&&s&&(p.play("ui.leave"),r.emit("leaveGame",{gameId:s}),n("/"))}),[r,l,s,n]),j=a.useCallback((e=>{u(!1),r&&s&&e&&(d(null),r.emit("joinGame",{gameId:s,password:e}),c(!0))}),[r,s]),b=a.useCallback((()=>{u(!1),n("/")}),[n]);a.useEffect((()=>{d(null),u(!1),c(!0)}),[s]),a.useEffect((()=>{if(!r)return;const e=e=>{e&&e.game&&e.game.id===s&&(p.play("ui.join"),c(!1),d(null),u(!1))},a=e=>{const a=e.message||"An unknown error occurred";"Password required"===a?(u(!0),c(!1),d(null)):"Invalid password"===a?(d("Invalid password."),u(!0),c(!1)):"Game not found"===a?n("/"):"Game is full"===a?(d(a),c(!1),u(!1),setTimeout((()=>n("/")),3e3)):(d(a),c(!1),u(!1))};return r.on("gameJoined",e),r.on("error",a),()=>{r.off("gameJoined",e),r.off("error",a)}}),[r,s,n]),a.useEffect((()=>{r&&s&&!x.current&&(x.current=!0,c(!0),d(null),u(!1),r.emit("joinGame",{gameId:s}))}),[r,s]);const C=()=>{const{gameState:n}=t(),{socket:r}=h();return a.useEffect((()=>{const e=e=>{const a=r?.auth?.userId,s=a&&n?.players?n.players[a]:null;if(s?.isReady||!1)return e.preventDefault(),e.returnValue="You have money in the pot! Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[n,r]),e.jsxs(e.Fragment,{children:[e.jsx(bs,{isOpen:_,onClose:b,onSubmit:j,gameId:s}),i&&e.jsx(N,{message:`Joining game ${s}...`}),o&&!i&&!_&&e.jsxs("div",{className:"error-container",style:{padding:"20px",color:"red",textAlign:"center"},children:[e.jsx("h2",{children:"An error occurred"}),e.jsx("p",{children:o}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!i&&!o&&n&&e.jsx(us,{onReturnToLobby:g})]})};return e.jsx(m,{gameId:s,children:e.jsx(C,{})})};export{vs as default};
