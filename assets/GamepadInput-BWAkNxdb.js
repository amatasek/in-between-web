import{j as e,c as ie,a as ne,e as oe,A as K,f as P,g as ce,h as de,B as E,U as ue,u as me}from"./index-BWrYPZTB.js";import{b as d}from"./vendor-ByZL_ylL.js";const pe="_coinIcon_isycs_1",he="_small_isycs_13",ge="_medium_isycs_17",fe="_large_isycs_21",ee={coinIcon:pe,small:he,medium:ge,large:fe},ye=({size:s="small",className:t=""})=>{const r={small:15,medium:19,large:24},a=r[s]||r.small,i=d.useMemo(()=>`goldGradient-${Math.random().toString(36).substr(2,9)}`,[]),m=d.useMemo(()=>`goldShine-${Math.random().toString(36).substr(2,9)}`,[]);return e.jsx("span",{className:`${ee.coinIcon} ${ee[s]} ${t}`,children:e.jsxs("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:i,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA500"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8C00"})]}),e.jsxs("linearGradient",{id:m,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFED4E"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD700"})]})]}),e.jsx("path",{d:"M12 2L22 12L12 22L2 12L12 2Z",fill:`url(#${i})`,stroke:"#D4AF37",strokeWidth:"0.5"}),e.jsx("path",{d:"M12 5L18 12L12 18L6 12L12 5Z",fill:`url(#${m})`,opacity:"0.6"}),e.jsx("path",{d:"M12 2L16 6L12 8L8 6L12 2Z",fill:"#FFFACD",opacity:"0.7"})]})})},xe="_userAvatarContainer_cjwhj_1",je="_containerRight_cjwhj_6",be="_containerBelow_cjwhj_11",_e="_avatar_cjwhj_16",ve="_small_cjwhj_33",we="_medium_cjwhj_39",ke="_large_cjwhj_45",Ce="_avatarImageContainer_cjwhj_51",Ne="_avatarImage_cjwhj_51",Se="_initialsPlaceholder_cjwhj_69",Ie="_userInfo_cjwhj_83",Pe="_username_cjwhj_89",Te="_userTitle_cjwhj_95",$e="_playerCard_cjwhj_114",Ae="_cardAppear_cjwhj_1",Be="_playerCardAvatar_cjwhj_143",Le="_playerCardImage_cjwhj_152",Me="_playerCardInitials_cjwhj_160",Ee="_playerCardInfo_cjwhj_174",Ue="_playerCardUsername_cjwhj_183",Re="_playerCardTitle_cjwhj_191",De="_playerCardXP_cjwhj_199",Fe="_playerCardLevelXP_cjwhj_207",He="_separator_cjwhj_215",Ge="_xpValue_cjwhj_219",ze="_loading_cjwhj_224",Oe="_shimmerBg_cjwhj_1",We="_avatarLoader_cjwhj_230",Ve="_shimmerOverlay_cjwhj_1",Xe="_skeletonUsername_cjwhj_239",Ke="_skeletonTitle_cjwhj_249",Ye="_shimmerText_cjwhj_1",b={userAvatarContainer:xe,containerRight:je,containerBelow:be,avatar:_e,small:ve,medium:we,large:ke,avatarImageContainer:Ce,avatarImage:Ne,initialsPlaceholder:Se,userInfo:Ie,username:Pe,userTitle:Te,playerCard:$e,cardAppear:Ae,playerCardAvatar:Be,playerCardImage:Le,playerCardInitials:Me,playerCardInfo:Ee,playerCardUsername:Ue,playerCardTitle:Re,playerCardXP:De,playerCardLevelXP:Fe,separator:He,xpValue:Ge,loading:ze,shimmerBg:Oe,avatarLoader:We,shimmerOverlay:Ve,skeletonUsername:Xe,skeletonTitle:Ke,shimmerText:Ye},Ze=({userId:s,size:t="medium",showName:r=!0,namePosition:a="right",className:i="",showTitle:m=!0,fontWeight:c="normal"})=>{const[p,g]=d.useState(!1),k=ie(s);if(!s)return null;if(!k){const T=b[t]||b.medium,A=r?b[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"";return e.jsxs("div",{className:`${b.userAvatarContainer} ${A} ${i}`,children:[e.jsx("div",{className:`${b.avatar} ${T} ${b.loading}`,children:e.jsx("div",{className:b.avatarLoader})}),r&&e.jsxs("div",{className:b.userInfo,children:[e.jsx("div",{className:b.skeletonUsername}),m&&e.jsx("div",{className:b.skeletonTitle})]})]})}const{username:f,profileImg:o,title:u,xp:x,level:y}=k,n=qe(f||"Unknown"),h=b[t]||b.medium,S=r?b[`container${a.charAt(0).toUpperCase()+a.slice(1)}`]:"",N="https://api.in-between.live";let C=null;if(o)if(o.startsWith("http"))C=o;else if(o.includes("/uploads/")){const T=o.split("/").pop();C=`${N}/files/images/${T}`}else C=`${N}${o}`;return e.jsxs("div",{className:`${b.userAvatarContainer} ${S} ${i}`,children:[e.jsxs("div",{className:`${b.avatar} ${h}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[e.jsxs("div",{className:b.avatarImageContainer,children:[C?e.jsx("img",{src:C,alt:`${f}'s avatar`,className:b.avatarImage,onError:T=>{console.error(`Failed to load profile image for ${f}:`,T),T.target.style.display="none",T.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:b.initialsPlaceholder,style:{display:C?"none":"flex"},children:n})]}),p&&e.jsxs("div",{className:b.playerCard,children:[e.jsx("div",{className:b.playerCardAvatar,children:C?e.jsx("img",{src:C,alt:`${f}'s avatar`,className:b.playerCardImage}):e.jsx("div",{className:b.playerCardInitials,children:n})}),e.jsxs("div",{className:b.playerCardInfo,children:[e.jsx("div",{className:b.playerCardUsername,children:f||"Unknown"}),u&&e.jsx("div",{className:b.playerCardTitle,children:u}),y!==void 0&&x!==void 0&&e.jsxs("div",{className:b.playerCardLevelXP,children:["Level ",y," ",e.jsx("span",{className:b.separator,children:"‚Ä¢"})," ",e.jsxs("span",{className:b.xpValue,children:[Je(x)," XP"]})]})]})]})]}),r&&e.jsxs("div",{className:b.userInfo,children:[e.jsx("div",{className:b.username,style:{fontWeight:c},children:f||"Unknown"}),m&&u&&e.jsx("div",{className:b.userTitle,children:u})]})]})},qe=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),Je=s=>s>=1e6?(s/1e6).toFixed(1).replace(/\.0$/,"")+"M":s>=1e3?(s/1e3).toFixed(1).replace(/\.0$/,"")+"K":s.toString(),Qe="_currencyAmount_rl73n_1",et="_pillBackground_rl73n_17",tt="_darkBackground_rl73n_28",q={currencyAmount:Qe,pillBackground:et,darkBackground:tt},W=({amount:s=0,size:t,background:r,customClass:a})=>{const i=[q.currencyAmount,r==="dark"?q.darkBackground:"",r==="pill"?q.pillBackground:"",a||""].filter(Boolean).join(" "),m=typeof s=="number"?s:0;return e.jsxs("span",{className:i,children:[e.jsx(ye,{size:t}),e.jsx("span",{children:m.toLocaleString()})]})},at=({className:s="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.004.827c-.29.24-.438.613-.431.992a6.759 6.759 0 010 1.905c-.007.378.141.75.431.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.29-.24.438-.613.43-.992a6.932 6.932 0 010-1.905c.007-.378-.14-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),st="_toggleContainer_1gama_1",rt="_toggleInput_1gama_5",nt="_toggleLabel_1gama_11",ot="_toggleSlider_1gama_17",lt="_toggleText_1gama_65",O={toggleContainer:st,toggleInput:rt,toggleLabel:nt,toggleSlider:ot,toggleText:lt},te=({isChecked:s,onChange:t,label:r})=>e.jsx("div",{className:O.toggleContainer,children:e.jsxs("label",{className:O.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:s,onChange:t,className:O.toggleInput,"data-gamepad-focusable":"true"}),e.jsx("span",{className:O.toggleSlider}),r&&e.jsx("span",{className:O.toggleText,children:r})]})}),it="_fileUploadContainer_z5fvc_1",ct="_fileInput_z5fvc_8",dt="_uploadButton_z5fvc_12",ut="_changeButton_z5fvc_37",mt="_previewContainer_z5fvc_53",pt="_imagePreview_z5fvc_61",ht="_audioPreview_z5fvc_70",gt="_errorMessage_z5fvc_76",L={fileUploadContainer:it,fileInput:ct,uploadButton:dt,changeButton:ut,previewContainer:mt,imagePreview:pt,audioPreview:ht,errorMessage:gt},ft=({onUpload:s,currentFileUrl:t,acceptedFileTypes:r,label:a,previewType:i="image"})=>{const[m,c]=d.useState(!1),[p,g]=d.useState(null),k=d.useRef(null),f=async x=>{const y=x.target.files[0];if(!y){console.error("[FileUpload] No file selected");return}console.log("[FileUpload] File selected:",{name:y.name,type:y.type,size:y.size}),g(null),c(!0);try{console.log("[FileUpload] Calling onUpload function");const n=await s(y);console.log("[FileUpload] Upload result:",n),n?console.log("[FileUpload] Upload successful"):(console.error("[FileUpload] Upload failed"),g("Failed to upload file. Please try again."))}catch(n){console.error("[FileUpload] Error uploading file:",n),g("An error occurred during upload.")}finally{c(!1)}},o=()=>{k.current.click()},u=()=>t?i==="image"?e.jsx("div",{className:L.previewContainer,children:e.jsx("img",{src:t,alt:"Preview",className:L.imagePreview})}):i==="audio"?e.jsx("div",{className:L.previewContainer,children:e.jsx("audio",{controls:!0,src:t,className:L.audioPreview,children:"Your browser does not support the audio element."})}):null:null;return e.jsxs("div",{className:L.fileUploadContainer,children:[e.jsx("input",{type:"file",ref:k,onChange:f,accept:r,className:L.fileInput}),t&&u(),e.jsx("button",{type:"button",onClick:o,className:`${L.uploadButton} ${t?L.changeButton:""}`,disabled:m,"data-gamepad-focusable":"true",children:m?"Uploading...":t?`Change ${a}`:`Upload ${a}`}),p&&e.jsx("div",{className:L.errorMessage,children:p})]})},yt=()=>{const{token:s}=ne(),{preferences:t,updateSelectedTitle:r}=oe(),[a,i]=d.useState([]),[m,c]=d.useState(!0),[p,g]=d.useState(null);d.useEffect(()=>{k()},[]);const k=async()=>{try{c(!0);const o=await fetch(`${K}/me/titles`,{headers:{Authorization:`Bearer ${s}`}});if(!o.ok)throw new Error("Failed to load titles");const u=await o.json();i(u)}catch(o){g(o.message)}finally{c(!1)}},f=async o=>{try{await r(o)}catch{g("Failed to update title")}};return m?e.jsx("div",{className:P.loadingMessage,children:"Loading titles..."}):p?e.jsx("div",{className:P.errorMessage,children:p}):a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No titles unlocked yet. Play games to earn achievements!"}):e.jsxs("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:[e.jsxs("div",{onClick:()=>f(""),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),f(""))},style:{display:"inline-flex",width:"120px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle?"rgba(255, 255, 255, 0.08)":"var(--btn-tertiary-shadow)",border:t.selectedTitle?"2px solid rgba(255, 255, 255, 0.15)":"2px solid var(--btn-tertiary-start)",verticalAlign:"top",whiteSpace:"normal",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:"No Title"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:"Display no title"})]}),a.map(o=>e.jsxs("div",{onClick:()=>f(o.title),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),f(o.title))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"36px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:t.selectedTitle===o.title?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:t.selectedTitle===o.title?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:o.title}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:o.description})]},o.title)),a.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"16px",color:"var(--text-muted)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"8px",whiteSpace:"normal"},children:"No titles unlocked yet. Play games to earn achievements!"})]})},xt=[{id:"default",name:"Default",description:"Classic blue theme",primary:"#1a2a3a",accent:"#3498db"},{id:"light",name:"Light Mode",description:"Professional theme",primary:"#f8f9fa",accent:"#ffc107"},{id:"dark",name:"Dark Mode",description:"Deep dark theme",primary:"#0d0d0d",accent:"#2980b9"},{id:"packers",name:"Packers",description:"Go Pack Go!",primary:"#203731",accent:"#FFB612"},{id:"sunset",name:"Sunset",description:"Romantic twilight",primary:"#0c1929",accent:"#ff6b6b"},{id:"miami-vice",name:"Miami Vice",description:"Neon pink & cyan",primary:"#1a0f2e",accent:"#00d2d3"},{id:"purple",name:"Royal Purple",description:"Elegant purple theme",primary:"#1a1a2e",accent:"#8e44ad"}],jt=()=>{const[s,t]=d.useState("default");d.useEffect(()=>{const a=ce();t(a)},[]);const r=a=>{t(a),de(a)};return e.jsx("div",{style:{display:"block",width:"100%",overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",paddingBottom:"8px",padding:"6px"},children:xt.map(a=>e.jsxs("div",{onClick:()=>r(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r(a.id))},style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"130px",height:"50px",padding:"8px",margin:"0 8px 0 0",borderRadius:"6px",cursor:"pointer",textAlign:"center",backgroundColor:s===a.id?"var(--btn-tertiary-shadow)":"rgba(255, 255, 255, 0.08)",border:s===a.id?"2px solid var(--btn-tertiary-start)":"2px solid rgba(255, 255, 255, 0.15)",verticalAlign:"top",whiteSpace:"normal",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"3px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.primary,border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a.accent,border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-primary)",fontSize:"13px"},children:a.name}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"2px"},children:a.description})]},a.id))})},J={back01:"/cards/back01.png",back02:"/cards/back02.png",back03:"/cards/back03.png",back04:"/cards/back04.png",back05:"/cards/back05.png",back06:"/cards/back06.png",back07:"/cards/back07.png",back08:"/cards/back08.png"},le=()=>localStorage.getItem("selectedCardBack")||"back01",Wa=()=>{const s=le();return J[s]||J.back01},bt=s=>{J[s]&&(localStorage.setItem("selectedCardBack",s),window.dispatchEvent(new CustomEvent("cardbackchange",{detail:s})))},ae=[{id:"back01",image:"/cards/back01.png"},{id:"back02",image:"/cards/back02.png"},{id:"back03",image:"/cards/back03.png"},{id:"back04",image:"/cards/back04.png"},{id:"back05",image:"/cards/back05.png"},{id:"back06",image:"/cards/back06.png"},{id:"back07",image:"/cards/back07.png"},{id:"back08",image:"/cards/back08.png"}],_t=()=>{const[s,t]=d.useState("back01");d.useEffect(()=>{const a=le();t(a)},[]);const r=a=>{t(a),bt(a)};return e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",overflowY:"visible",paddingTop:"8px",paddingBottom:"8px",alignItems:"center",minHeight:"100px"},children:ae.map((a,i)=>e.jsx("div",{onClick:()=>r(a.id),tabIndex:0,"data-gamepad-focusable":"true",onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),r(a.id))},style:{position:"relative",cursor:"pointer",flexShrink:0,transition:"transform 0.2s ease",transform:s===a.id?"scale(1.1)":"scale(1)",marginLeft:i===0?"8px":0,marginRight:i===ae.length-1?"8px":0},children:e.jsx("div",{style:{width:"60px",height:"84px",backgroundImage:`url(${a.image})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",boxShadow:s===a.id?"0 0 0 3px var(--btn-tertiary-start), 0 4px 12px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"}})},a.id))})},vt=({onClose:s})=>{const{preferences:t,toggleAutoAnte:r,toggleMute:a,uploadProfileImg:i,loading:m}=oe();return m?e.jsx(E,{title:"Preferences",onClose:s,style:{maxWidth:600,maxHeight:"25vh"},children:e.jsx("div",{className:P.loadingMessage,children:"Loading preferences..."})}):e.jsxs(E,{title:"Preferences",onClose:s,style:{maxWidth:600},children:[e.jsx("div",{className:P.sectionHeader,children:"Game Options"}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Mute Sound"}),e.jsx(te,{isChecked:t.muted,onChange:a})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Auto-Ante"}),e.jsx(te,{isChecked:t.autoAnte,onChange:r})]}),e.jsx("div",{className:P.sectionHeader,children:"Customization Options"}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{margin:0},children:"Profile Image"}),e.jsx(ft,{onUpload:i,currentFileUrl:t.profileImg,acceptedFileTypes:"image/jpeg,image/png,image/gif",label:"Image",previewType:"image"})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Title"}),e.jsx(yt,{})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Theme"}),e.jsx(jt,{})]}),e.jsxs("div",{className:"panel-alt",style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Card Back"}),e.jsx(_t,{})]})]})},wt="_iconButton_3xp6j_1",kt="_danger_3xp6j_31",Ct="_preferences_3xp6j_44",Nt="_stats_3xp6j_57",St="_store_3xp6j_70",se={iconButton:wt,default:"_default_3xp6j_18",danger:kt,preferences:Ct,stats:Nt,store:St},V=({icon:s,title:t,onClick:r,variant:a="default",compact:i=!0,className:m="",...c})=>e.jsx("button",{className:`${se.iconButton} ${se[a]} ${m}`,onClick:r,title:t,type:"button",...c,children:s}),Va=({onModalStateChange:s})=>{const[t,r]=d.useState(!1),a=()=>{r(!0)},i=()=>{r(!1)};return d.useEffect(()=>{s&&s(t)},[t,s]),e.jsxs(e.Fragment,{children:[e.jsx(V,{onClick:a,icon:e.jsx(at,{style:{color:"white",width:20,height:20}}),"aria-label":"Open Preferences",variant:"preferences",title:"Preferences","data-gamepad-focusable":"true"}),t&&e.jsx(vt,{isOpen:t,onClose:i})]})},It=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"}),e.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"})]}),Pt="_totalsTable_ugw0i_3",Tt="_settleUpTable_ugw0i_3",$t="_totalRow_ugw0i_9",At="_paymentRow_ugw0i_9",Bt="_playerName_ugw0i_18",Lt="_totalAmount_ugw0i_29",Mt="_paymentAmount_ugw0i_29",Et="_positive_ugw0i_35",Ut="_negative_ugw0i_39",Rt="_paymentText_ugw0i_43",Dt="_noDataMessage_ugw0i_54",Ft="_loadingMessage_ugw0i_61",$={totalsTable:Pt,settleUpTable:Tt,totalRow:$t,paymentRow:At,playerName:Bt,totalAmount:Lt,paymentAmount:Mt,positive:Et,negative:Ut,paymentText:Rt,noDataMessage:Dt,loadingMessage:Ft},Ht=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 15 L12 18"}),e.jsx("path",{d:"M9.5 16.5 L12 19 L14.5 16.5"}),e.jsx("path",{d:"M8 10 L10 10"}),e.jsx("path",{d:"M12 10 L14 10"}),e.jsx("path",{d:"M16 10 L16 10"})]});let Y;try{Y=require("../../contexts/GameContext").useGameContext}catch{Y=()=>({gameState:null})}const Gt=({title:s="Download Transaction Log as CSV",gameState:t,...r})=>{let a;try{a=Y?Y():{gameState:null}}catch{a={gameState:null}}const i=t||a?.gameState,m=i?.gameTransactions||i?.gameData?.gameTransactions||[],c=i?._id||i?.id||"unknown",p=()=>{const g=Array.isArray(m)?m:[];if(g.length===0)return;let k=`Player,Transaction Type,Amount,Round,Timestamp
`;const f=[...g].map(y=>({...y,timestamp:y.timestamp?new Date(y.timestamp):new Date}));f.sort((y,n)=>y.timestamp-n.timestamp),f.forEach(y=>{const n=y.timestamp?new Date(y.timestamp).toLocaleString():"N/A",h=y.playerName||y.player||"Unknown Player",S=h.includes(",")?`"${h}"`:h;let N=y.transactionType||"Transaction";if(!y.transactionType&&y.reason){const C=y.reason.split(" ");N=C[0],C[0]==="Won"?N="Win":y.reason.includes("penalty")&&(N="Penalty")}k+=`${S},${N},${y.amount},${y.round||"N/A"},${n}
`});const o=new Blob([k],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(o),x=document.createElement("a");x.setAttribute("href",u),x.setAttribute("download",`game-${c}-transactions.csv`),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x)};return e.jsx(V,{icon:e.jsx(Ht,{color:"white",size:20}),title:s,onClick:p,variant:"default",...r})},zt="_noDataMessage_1mupo_2",Ot="_statsGrid_1mupo_9",Wt="_statItem_1mupo_42",Vt="_statLabel_1mupo_48",Xt="_statValue_1mupo_55",Kt="_statSuffix_1mupo_63",F={noDataMessage:zt,statsGrid:Ot,statItem:Wt,statLabel:Vt,statValue:Xt,statSuffix:Kt},Yt=({gameData:s})=>{const t=s.gameTransactions,r=s.players,a={};Object.entries(r).forEach(([c,p])=>{a[c]=p.name}),t.forEach(c=>{c.playerId&&!a[c.playerId]&&(a[c.playerId]=c.playerName||"Unknown Player")});const i=d.useMemo(()=>{if(t.length===0)return[];const c=l=>l.toLocaleString(),p={};t.forEach(l=>{p[l.playerId]||(p[l.playerId]=[]),p[l.playerId].push(l)});const g=s.round||1,k=s.deckCount||1,f=t.filter(l=>l.transactionType==="Ante").reduce((l,v)=>l+Math.abs(v.amount),0),o=t.filter(l=>l.transactionType==="Bet").reduce((l,v)=>l+Math.abs(v.amount),0),u=t.filter(l=>l.transactionType==="Bet"),x=u.length>0?u.reduce((l,v)=>Math.abs(v.amount)>Math.abs(l.amount)?v:l,u[0]):null,y=t.reduce((l,v)=>v.potAmount>l?v.potAmount:l,0),n=t.filter(l=>l.transactionType==="2x"||l.transactionType==="3x"),h=n.reduce((l,v)=>l+Math.abs(v.amount),0),S={};u.forEach(l=>{S[l.playerId]=(S[l.playerId]||0)+1});let N=null,C=0;Object.entries(S).forEach(([l,v])=>{v>C&&(C=v,N=l)});const T={};u.forEach(l=>{T[l.playerId]||(T[l.playerId]={total:0,count:0}),T[l.playerId].total+=Math.abs(l.amount),T[l.playerId].count+=1});let A=null,M=0;Object.entries(T).forEach(([l,v])=>{const Q=v.total/v.count;Q>M&&(M=Q,A=l)});const H={};t.filter(l=>l.transactionType==="Win").forEach(l=>{H[l.playerId]=(H[l.playerId]||0)+1});let U=null,R=0;Object.entries(H).forEach(([l,v])=>{v>R&&(R=v,U=l)});const G={};n.forEach(l=>{G[l.playerId]=(G[l.playerId]||0)+1});let D=null,z=0;Object.entries(G).forEach(([l,v])=>{v>z&&(z=v,D=l)});const _=s.totals||{};let j=null,B=0,X=null,Z=0;return Object.entries(_).forEach(([l,v])=>{v>B&&(B=v,j=l),v<Z&&(Z=v,X=l)}),[{key:"totalDecks",label:"Total Decks",value:k,type:"number"},{key:"totalRounds",label:"Total Rounds",value:g,type:"number"},{key:"totalBets",label:"Total Bets Placed",value:u.length,type:"number"},{key:"totalAnte",label:"Total Ante Amount",value:f,type:"currency"},{key:"totalBetAmount",label:"Total Bet Amount",value:o,type:"currency"},{key:"biggestPot",label:"Biggest Pot",value:y,type:"currency"},{key:"biggestBet",label:"Biggest Single Bet",value:x?Math.abs(x.amount):0,type:"currency",suffix:x?` by ${x.playerName}`:""},{key:"biggestWinner",label:"Biggest Winner",value:j?a[j]||"Unknown Player":"N/A",type:"text",suffix:j?` (+${c(B)})`:""},{key:"biggestLoser",label:"Biggest Loser",value:X?a[X]||"Unknown Player":"N/A",type:"text",suffix:X?` (${c(Z)})`:""},{key:"mostAggressive",label:"Most Aggressive Player",value:N?a[N]||"Unknown Player":"N/A",type:"text",suffix:N?` (${c(C)} bets)`:""},{key:"highestAvgBet",label:"Highest Average Bet",value:A?a[A]||"Unknown Player":"N/A",type:"text",suffix:A?` (avg: ${c(Math.round(M))})`:""},{key:"mostWinning",label:"Most Winning Player",value:U?a[U]||"Unknown Player":"N/A",type:"text",suffix:U?` (${c(R)} wins)`:""},{key:"totalPenalties",label:"Total Penalties",value:n.length,type:"number",suffix:n.length>0?` (${c(h)} coins)`:""},{key:"unluckyPlayer",label:"Most Penalized Player",value:D?a[D]||"Unknown Player":"N/A",type:"text",suffix:D?` (${c(z)} penalties)`:""}]},[t,a]),m=(c,p)=>c==="currency"?e.jsx(W,{amount:p,size:"small"}):c==="percentage"?`${(p*100).toFixed(1)}%`:c==="number"?p.toLocaleString():p;return e.jsx(e.Fragment,{children:i.length===0?e.jsx("p",{className:F.noDataMessage,children:"No statistics available for this game."}):e.jsx("div",{className:F.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:i.map(c=>e.jsxs("div",{className:`panel-alt ${F.statItem}`,children:[e.jsx("div",{className:F.statLabel,children:c.label}),e.jsxs("div",{className:F.statValue,children:[m(c.type,c.value),c.suffix&&e.jsx("span",{className:F.statSuffix,children:c.suffix})]})]},c.key))})})},Zt=({onClose:s,gameData:t})=>{if(!t)return e.jsx(E,{title:"Game Summary",onClose:s,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{className:$.loadingMessage,children:"Loading game data..."})});const r=t.gameTransactions||[],a=t.players||{},i=t.id||"unknown",m=t.settings?.isPrivate||!1,c=Array.isArray(r)?r:[],p={};Object.entries(a).forEach(([u,x])=>{p[u]=x.name}),c.forEach(u=>{u.playerId&&!p[u.playerId]&&(p[u.playerId]=u.playerName||"Unknown Player")});const g=t.totals||{},k=d.useMemo(()=>{if(Object.keys(g).length===2){const n=Object.entries(g),[h,S]=n[0],[N,C]=n[1];if(Math.abs(S+C)<.1){if(S>0)return[{from:N,fromName:p[N],to:h,toName:p[h],amount:Math.abs(S)}];if(C>0)return[{from:h,fromName:p[h],to:N,toName:p[N],amount:Math.abs(C)}]}}const u=[],x=Object.entries(g).filter(([n,h])=>h<0).map(([n,h])=>({playerId:n,playerName:p[n]||"Unknown Player",amount:Math.abs(h)})),y=Object.entries(g).filter(([n,h])=>h>0).map(([n,h])=>({playerId:n,playerName:p[n]||"Unknown Player",amount:h}));for(x.sort((n,h)=>h.amount-n.amount),y.sort((n,h)=>h.amount-n.amount);y.length>0&&x.length>0;){const n=y[0],h=x[0],S=Math.min(n.amount,h.amount);if(S>.01)u.push({from:h.playerId,fromName:h.playerName,to:n.playerId,toName:n.playerName,amount:S}),n.amount-=S,h.amount-=S,n.amount<.01&&y.shift(),h.amount<.01&&x.shift();else break}return u},[g,p]),[f,o]=d.useState("totals");return e.jsxs(E,{title:`Game Summary (${i})`,onClose:s,headerButtons:e.jsx(Gt,{gameState:t}),style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${f==="totals"?"active":""}`,onClick:()=>o("totals"),"data-gamepad-focusable":"true",children:"Totals"}),e.jsx("button",{className:`tab-button ${f==="stats"?"active":""}`,onClick:()=>o("stats"),"data-gamepad-focusable":"true",children:"Stats"}),m&&e.jsx("button",{className:`tab-button ${f==="payouts"?"active":""}`,onClick:()=>o("payouts"),"data-gamepad-focusable":"true",children:"Payouts"})]}),f==="totals"&&e.jsx("div",{className:"tab-content",children:Object.keys(g).length===0?e.jsx("p",{className:$.noDataMessage,children:"No transactions recorded yet."}):e.jsx("div",{className:$.totalsTable,children:Object.entries(g).map(([u,x])=>e.jsxs("div",{className:$.totalRow,children:[e.jsx("span",{className:$.playerName,children:p[u]||"Unknown Player"}),e.jsx("span",{className:`${$.totalAmount} ${x>=0?$.positive:$.negative}`,children:e.jsx(W,{amount:x,size:"small"})})]},u))})}),f==="stats"&&e.jsx(Yt,{gameData:t}),f==="payouts"&&m&&e.jsx("div",{className:"tab-content",children:k.length===0?e.jsx("p",{className:$.noDataMessage,children:"No payments needed or no transactions recorded yet."}):e.jsx("div",{className:$.settleUpTable,children:k.map((u,x)=>e.jsxs("div",{className:$.paymentRow,children:[e.jsxs("span",{className:$.paymentText,children:[e.jsx("span",{className:$.playerName,children:u.fromName})," pays"," ",e.jsx("span",{className:$.playerName,children:u.toName})]}),e.jsx("span",{className:$.paymentAmount,children:e.jsx(W,{amount:u.amount,size:"small"})})]},x))})})]})},qt="_leaderboardContainer_1f0dl_1",Jt="_leaderboardHeader_1f0dl_9",Qt="_durationSelector_1f0dl_15",ea="_durationButton_1f0dl_24",ta="_active_1f0dl_41",aa="_loadingMessage_1f0dl_48",sa="_errorMessage_1f0dl_48",ra="_emptyMessage_1f0dl_48",na="_loadingSpinner_1f0dl_60",oa="_leaderboardList_1f0dl_78",la="_leaderboardRow_1f0dl_88",ia="_rankCell_1f0dl_102",ca="_rank_1f0dl_102",da="_playerCell_1f0dl_113",ua="_statsCell_1f0dl_118",I={leaderboardContainer:qt,leaderboardHeader:Jt,durationSelector:Qt,durationButton:ea,active:ta,loadingMessage:aa,errorMessage:sa,emptyMessage:ra,loadingSpinner:na,leaderboardList:oa,leaderboardRow:la,rankCell:ia,rank:ca,playerCell:da,statsCell:ua},ma=()=>{const[s,t]=d.useState([]),[r,a]=d.useState(!0),[i,m]=d.useState(null),[c,p]=d.useState("all"),g=d.useContext(ue);d.useEffect(()=>{k()},[c]);const k=async()=>{a(!0),m(null);try{const o=await fetch(`${K}/leaderboard?duration=${c}`);if(!o.ok)throw new Error("Failed to fetch leaderboard");const u=await o.json();if(t(u.leaderboard||[]),g&&u.leaderboard){const x=u.leaderboard.map(y=>y.userId);g.prefetchUsers(x)}}catch(o){console.error("Error fetching leaderboard:",o),m(o.message)}finally{a(!1)}},f=o=>o===1?"ü•á":o===2?"ü•à":o===3?"ü•â":`#${o}`;return e.jsxs("div",{className:I.leaderboardContainer,children:[e.jsx("div",{className:I.leaderboardHeader,children:e.jsxs("div",{className:I.durationSelector,children:[e.jsx("button",{className:`${I.durationButton} ${c==="all"?I.active:""}`,onClick:()=>p("all"),"data-gamepad-focusable":"true",children:"All Time"}),e.jsx("button",{className:`${I.durationButton} ${c==="30days"?I.active:""}`,onClick:()=>p("30days"),"data-gamepad-focusable":"true",children:"Last 30 Days"})]})}),r?e.jsxs("div",{className:I.loadingMessage,children:[e.jsx("div",{className:I.loadingSpinner}),"Loading leaderboard..."]}):i?e.jsxs("div",{className:I.errorMessage,children:["Error: ",i]}):s.length===0?e.jsx("div",{className:I.emptyMessage,children:"No players found for this time period."}):e.jsx("div",{className:I.leaderboardList,"data-gamepad-scrollable":"true",tabIndex:"0",children:s.map(o=>e.jsxs("div",{className:`panel-alt ${I.leaderboardRow}`,children:[e.jsx("div",{className:I.rankCell,children:e.jsx("span",{className:I.rank,children:f(o.rank)})}),e.jsx("div",{className:I.playerCell,children:e.jsx(Ze,{userId:o.userId,size:"small",showName:!0,showTitle:!0,namePosition:"right"})}),e.jsx("div",{className:I.statsCell,children:e.jsx(W,{amount:o.totalProfit,size:"small"})})]},o.userId))})]})},pa="_statsPlaceholder_t48sr_1",ha="_statsGrid_t48sr_14",ga="_statItem_t48sr_47",fa="_statLabel_t48sr_53",ya="_statValue_t48sr_60",xa="_statSuffix_t48sr_68",ja="_historyTable_t48sr_82",ba="_tableHeader_t48sr_115",_a="_gameNameHeader_t48sr_128",va="_playerCountHeader_t48sr_128",wa="_roundsHeader_t48sr_128",ka="_endDateHeader_t48sr_128",Ca="_historyRow_t48sr_144",Na="_gameNameCell_t48sr_155",Sa="_playerCountCell_t48sr_163",Ia="_roundsCell_t48sr_163",Pa="_endDateCell_t48sr_171",Ta="_gameNameLink_t48sr_179",$a="_pageButton_t48sr_258",Aa="_pageInfo_t48sr_289",Ba="_errorMessage_t48sr_300",La="_loadingMessage_t48sr_321",Ma="_loadingSpinner_t48sr_332",w={statsPlaceholder:pa,statsGrid:ha,statItem:ga,statLabel:fa,statValue:ya,statSuffix:xa,historyTable:ja,tableHeader:ba,gameNameHeader:_a,playerCountHeader:va,roundsHeader:wa,endDateHeader:ka,historyRow:Ca,gameNameCell:Na,playerCountCell:Sa,roundsCell:Ia,endDateCell:Pa,gameNameLink:Ta,pageButton:$a,pageInfo:Aa,errorMessage:Ba,loadingMessage:La,loadingSpinner:Ma},Ea=({onClose:s})=>{const{token:t}=ne(),[r,a]=d.useState("leaderboard"),[i,m]=d.useState(!0),[c,p]=d.useState(null),[g,k]=d.useState({games:[],pagination:{}}),[f,o]=d.useState(0),[u,x]=d.useState(!1),[y,n]=d.useState(null),[h,S]=d.useState(null),[N,C]=d.useState(!0),[T,A]=d.useState(null),M=5;d.useEffect(()=>{(async()=>{m(!0),p(null);try{const j=await fetch(`${K}/games/history?pageSize=${M}&pageNumber=${f}`,{headers:{Authorization:`Bearer ${t}`}});if(!j.ok)throw new Error("Failed to fetch game history");const B=await j.json();k(B)}catch(j){console.error("Error fetching game history:",j),p(j.message)}finally{m(!1)}})()},[t,f]),d.useEffect(()=>{(async()=>{C(!0),A(null);try{const j=await fetch(`${K}/me/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!j.ok)throw new Error("Failed to fetch lifetime stats");const B=await j.json();S(B.stats)}catch(j){console.error("Error fetching lifetime stats:",j),A(j.message)}finally{C(!1)}})()},[t]);const H=()=>{f>0&&o(f-1)},U=()=>{g.pagination&&g.games.length===M&&o(f+1)},R=_=>{if(!_)return"Unknown";const j=new Date(_);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(j)},G=(_,j)=>typeof j=="number"?_==="currency"?e.jsx(W,{amount:j,size:"small"}):_==="percentage"?`${(j*100).toFixed(1)}%`:j.toLocaleString():typeof j=="boolean"?j?"Yes":"No":_==="date"||j instanceof Date?R(j):_==="number"?Number(j).toLocaleString():String(j),D=_=>_.roundCount||0,z=_=>{const j=g.games.find(B=>B.id===_);j&&(n(j),x(!0))};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{title:"Player Stats",onClose:s,style:{maxWidth:800,height:"80vh"},children:[e.jsxs("div",{className:"tabs-container",children:[e.jsx("button",{className:`tab-button ${r==="leaderboard"?"active":""}`,onClick:()=>a("leaderboard"),"data-gamepad-focusable":"true",children:"Leaderboard"}),e.jsx("button",{className:`tab-button ${r==="stats"?"active":""}`,onClick:()=>a("stats"),"data-gamepad-focusable":"true",children:"Lifetime Stats"}),e.jsx("button",{className:`tab-button ${r==="history"?"active":""}`,onClick:()=>a("history"),"data-gamepad-focusable":"true",children:"Game History"})]}),r==="leaderboard"&&e.jsx("div",{className:"tab-content",children:e.jsx(ma,{})}),r==="stats"&&e.jsx("div",{className:"tab-content",children:N?e.jsxs("div",{className:w.loadingMessage,children:[e.jsx("div",{className:w.loadingSpinner}),"Loading your lifetime stats..."]}):T?e.jsxs("div",{className:w.errorMessage,children:["Error: ",T]}):!h||h.length===0?e.jsx("div",{className:w.statsPlaceholder,children:e.jsx("p",{children:"No lifetime statistics available."})}):e.jsx("div",{className:w.statsGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:h.map((_,j)=>e.jsxs("div",{className:`panel-alt ${w.statItem}`,children:[e.jsx("div",{className:w.statLabel,children:_.label}),e.jsxs("div",{className:w.statValue,children:[G(_.type,_.value),_.suffix&&e.jsx("span",{className:w.statSuffix,children:_.suffix})]})]},_.key||`stat-${j}`))})}),r==="history"&&e.jsx("div",{className:"tab-content",children:i?e.jsxs("div",{className:w.loadingMessage,children:[e.jsx("div",{className:w.loadingSpinner}),"Loading your game history..."]}):c?e.jsxs("div",{className:w.errorMessage,children:["Error: ",c]}):g.games.length===0?e.jsx("div",{className:w.statsPlaceholder,children:e.jsx("p",{children:"No games found in your history."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`panel-alt ${w.historyTable}`,"data-gamepad-scrollable":"true",tabIndex:"0",children:[e.jsxs("div",{className:w.tableHeader,children:[e.jsx("div",{className:w.gameNameHeader,children:"Game"}),e.jsx("div",{className:w.playerCountHeader,children:"Players"}),e.jsx("div",{className:w.roundsHeader,children:"Rounds"}),e.jsx("div",{className:w.endDateHeader,children:"Ended"})]}),g.games.map(_=>e.jsxs("div",{className:w.historyRow,children:[e.jsx("div",{className:w.gameNameCell,children:e.jsxs("span",{className:w.gameNameLink,onClick:()=>z(_.id),tabIndex:"0",role:"button","data-gamepad-focusable":"true",children:["#",_.id]})}),e.jsx("div",{className:w.playerCountCell,children:_.totalPlayerCount}),e.jsx("div",{className:w.roundsCell,children:D(_)}),e.jsx("div",{className:w.endDateCell,children:R(_.endedAt)})]},_.id))]}),e.jsxs("div",{className:w.pageInfo,children:[e.jsx("button",{onClick:H,disabled:f===0,className:w.pageButton,"aria-label":"Previous page","data-gamepad-focusable":"true",children:"‚Üê"}),"Page ",f+1,g.pagination&&g.pagination.total?` of ${Math.ceil(g.pagination.total/M)}`:"",e.jsx("button",{onClick:U,disabled:!g.pagination||g.games.length<M,className:w.pageButton,"aria-label":"Next page","data-gamepad-focusable":"true",children:"‚Üí"})]})]})})]}),u&&y&&e.jsx(Zt,{gameData:y,onClose:()=>{x(!1),n(null)}})]})},Xa=({onModalStateChange:s,...t})=>{const[r,a]=d.useState(!1),i=()=>{a(!0)},m=()=>{a(!1)};return d.useEffect(()=>{s&&s(r)},[r,s]),e.jsxs(e.Fragment,{children:[e.jsx(V,{onClick:i,icon:e.jsx(It,{color:"white",size:20}),"aria-label":"Open Player Stats",variant:"stats",title:"Player Stats",...t}),r&&e.jsx(Ea,{isOpen:r,onClose:m})]})},Ua=({className:s="h-6 w-6",...t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:s,...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m-2.25 9h12a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-12a1.5 1.5 0 00-1.5 1.5v6a1.5 1.5 0 001.5 1.5z"})}),Ka=({onClick:s,...t})=>e.jsx(V,{onClick:s,icon:e.jsx(Ua,{style:{color:"white",width:20,height:20}}),"aria-label":"Store",variant:"store",title:"Store",...t}),Ra=({color:s="currentColor",size:t=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"})]}),Da=({onClose:s})=>e.jsxs(E,{title:"Game Rules",onClose:s,style:{maxWidth:600},children:[e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:P.sectionHeader,children:"Objective"}),e.jsx("div",{className:P.settingDescription,children:'The goal is to bet on whether the third card will have a value that falls "in between" the first two cards.'})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:P.sectionHeader,children:"Card Values"}),e.jsx("div",{className:P.settingDescription,children:"Cards are valued numerically: 2-10 as face value, Jack = 11, Queen = 12, King = 13, and Ace = 1 or 14 (player's choice)."})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:P.sectionHeader,children:"Game Flow"}),e.jsx("div",{className:P.settingDescription,children:e.jsxs("ol",{style:{paddingLeft:20,margin:0},children:[e.jsx("li",{children:"Each player antes up to join the round."}),e.jsx("li",{children:"The player to the right of the dealer goes first."}),e.jsx("li",{children:"Two cards are dealt face up."}),e.jsx("li",{children:"Player decides whether to bet or pass."}),e.jsx("li",{children:"If a bet is placed, the third card is revealed."}),e.jsx("li",{children:"Bets are settled."}),e.jsx("li",{children:"Next player goes."}),e.jsx("li",{children:"If the pot is empty, players ante up again to start a new round."})]})})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:P.sectionHeader,children:"Betting"}),e.jsxs("div",{className:P.settingDescription,children:["If you think the third card will fall between the first two cards, you can bet up to the pot amount.",e.jsx("br",{}),"If you win, you receive the amount of your bet from the pot.",e.jsx("br",{}),"If you lose, your bet is added to the pot."]})]}),e.jsxs("div",{style:{marginBottom:22},children:[e.jsx("div",{className:P.sectionHeader,children:"POT Button"}),e.jsx("div",{className:P.settingDescription,children:"The POT button allows you to bet the entire pot amount at once for maximum winnings."})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{className:P.sectionHeader,children:"Special Rules"}),e.jsx("div",{className:P.settingDescription,children:e.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ace Choice:"})," If the first card is an Ace, you can choose to play it as low (1) or high (14)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Chance:"})," If the first two cards are the same, you can chose to ante again to see another hand."]})]})})]})]}),Ya=({title:s="View Game Rules",onModalStateChange:t,...r})=>{const[a,i]=d.useState(!1),m=()=>{i(!0)},c=()=>{i(!1)};return d.useEffect(()=>{t&&t(a)},[a,t]),e.jsxs(e.Fragment,{children:[e.jsx(V,{icon:e.jsx(Ra,{color:"white",size:20}),title:s,onClick:m,variant:"default",...r}),a&&e.jsx(Da,{onClose:c})]})},Fa="_coinPacksGrid_n27te_3",Ha={coinPacksGrid:Fa};class Ga{constructor(){this.API_URL="https://api.in-between.live",this.baseURL=`${this.API_URL}/purchases`}getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getOfferingsByType(t){try{const r=`${this.baseURL}/offerings?offeringType=${encodeURIComponent(t)}`,a=await fetch(r,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.error||`HTTP ${a.status}: Failed to fetch offerings`)}return(await a.json()).offerings||[]}catch(r){throw console.error("[PURCHASE_SERVICE] Error fetching offerings:",r),new Error(`Failed to fetch product offerings: ${r.message}`)}}async getAllOfferings(){try{const t=await fetch(`${this.baseURL}/offerings`,{method:"GET",headers:this.getAuthHeaders(),credentials:"include"});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`HTTP ${t.status}: Failed to fetch offerings`)}return(await t.json()).offerings||[]}catch(t){throw console.error("[PURCHASE_SERVICE] Error fetching all offerings:",t),new Error(`Failed to fetch product offerings: ${t.message}`)}}async processPurchase(t){try{if(!t)throw new Error("Product ID is required");const r=await fetch(`${this.baseURL}/process`,{method:"POST",headers:this.getAuthHeaders(),credentials:"include",body:JSON.stringify({productId:t})});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.error||`HTTP ${r.status}: Purchase failed`)}const a=await r.json();return console.log("[PURCHASE_SERVICE] Purchase completed:",{productId:t,coinsAdded:a.coinsAdded,newBalance:a.newBalance}),a}catch(r){throw console.error("[PURCHASE_SERVICE] Error processing purchase:",r),new Error(`Purchase failed: ${r.message}`)}}async getCoinOfferings(){return this.getOfferingsByType("coin")}}const re=new Ga,Za=({onClose:s})=>{const[t,r]=d.useState("coins"),[a,i]=d.useState([]),[m,c]=d.useState(!0),[p,g]=d.useState(null),[k,f]=d.useState(null);d.useEffect(()=>{o()},[]);const o=async()=>{try{c(!0),f(null);const n=await re.getCoinOfferings();i(n)}catch(n){console.error("Failed to load coin offerings:",n),f("Failed to load products. Please try again.")}finally{c(!1)}},u=async n=>{try{g(n),f(null);const h=await re.processPurchase(n);console.log("Purchase successful:",h),s()}catch(h){console.error("Purchase failed:",h),f(h.message||"Purchase failed. Please try again.")}finally{g(null)}},x=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),y=n=>new Intl.NumberFormat("en-US").format(n);return m?e.jsx(E,{title:"Store",onClose:s,style:{maxWidth:800,height:"80vh"},children:e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"Loading products..."})}):e.jsxs(E,{title:"Store",onClose:s,style:{maxWidth:800,height:"80vh"},children:[e.jsx("div",{className:"tabs-container",children:e.jsx("button",{className:`tab-button ${t==="coins"?"active":""}`,onClick:()=>r("coins"),"data-gamepad-focusable":"true",children:"Coin Packs"})}),k&&e.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"rgba(231, 76, 60, 0.1)",border:"1px solid #e74c3c",borderRadius:"8px",color:"#ffb3b3"},children:k}),t==="coins"&&e.jsx("div",{className:"tab-content",children:a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#a0b9d6"},children:"No coin packs available at the moment."}):e.jsx("div",{className:Ha.coinPacksGrid,"data-gamepad-scrollable":"true",tabIndex:"0",children:a.map(n=>e.jsxs("div",{className:"panel-alt",style:{display:"flex",flexDirection:"column",padding:"10px",minHeight:"280px"},children:[e.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FFD700",margin:"0 0 1rem 0",textAlign:"center"},children:[y(n.coinAmount)," Coins"]}),n.imageUrl&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"1rem"},children:e.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"64px",height:"64px",objectFit:"contain"},onError:h=>{h.target.style.display="none"}})}),e.jsx("p",{style:{color:"#a0b9d6",fontSize:"0.875rem",margin:"0 0 1rem 0",textAlign:"center",lineHeight:"1.4",flex:"1"},children:n.description}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"bold",color:"#bcdcff",textAlign:"center",marginBottom:"1rem"},children:x(n.priceUSD)}),e.jsx("button",{onClick:()=>u(n.id),disabled:p===n.id,className:"btn btn-primary","data-gamepad-focusable":"true",children:p===n.id?"Processing...":"Purchase"})]},n.id))})})]})},qa=({type:s="text",title:t="",...r})=>{const a=d.useRef(null);let i=null;try{i=me()?.enhanceInput}catch{console.warn("VirtualKeyboardProvider not found - GamepadInput working as regular input")}return d.useEffect(()=>{if(a.current&&i)return i(a.current,s,t)},[i,s,t]),e.jsx("input",{ref:a,type:s,"data-gamepad-focusable":"true",...r})};export{W as C,qa as G,V as I,Xa as P,Ya as R,Ka as S,te as T,Ze as U,Va as a,Za as b,Zt as c,ye as d,Wa as g};
