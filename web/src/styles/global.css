/* Global styles for the In-Between card game */

/* Import CSS variables */
@import './variables.css';

/* 
 * Apple-style Typography System
 * Consistent text fonts across all platforms
 */

/* Base typography styles - Apple-style fonts */
* {
  font-family: var(--font-family-system);
  -webkit-font-smoothing: var(--webkit-font-smoothing);
  -moz-osx-font-smoothing: var(--moz-osx-font-smoothing);
  font-feature-settings: "liga" 1, "kern" 1;
  text-rendering: optimizeLegibility;
}

/* Specific font families for different content types */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-display);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
}

p, span, div, button, input, textarea {
  font-family: var(--font-family-text);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
}

code, pre {
  font-family: var(--font-family-mono);
}

/* 
 * Gamepad Navigation Styles
 * Provides visual feedback for controller/keyboard navigation
 * Only active when gamepad-navigation-active class is present on body
 */

/* Prevent flash of auth screen on page load when user is already logged in */
html.loading {
  background-color: #1a1a2e;
}

html.loading * {
  visibility: hidden;
}

/* Mobile Scaling - Scale down UI on small screens */
@media (max-width: 600px) {
  /* Scale down only the game content, not floating elements */
  .mobile-scale-content {
    transform: scale(0.95);
    transform-origin: top left;
    width: 105.26%;
  }
  
  /* Adjust viewport height to account for scaling */
  body {
    min-height: 100vh;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }
}

/* Even smaller screens get more aggressive scaling */
@media (max-width: 400px) {
  .mobile-scale-content {
    transform: scale(0.925);
    transform-origin: top left;
    width: 108.11%; /* Compensate for scale (100% / 0.925) */
  }
}

/* Gamepad focus indicators - only show when gamepad/keyboard is active */
body.gamepad-navigation-active [data-gamepad-focusable="true"]:focus {
  outline: 3px solid #00ff88 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.3) !important;
  border-radius: 8px !important;
  position: relative !important;
  z-index: 100 !important;
}

/* Material-UI specific focus styling for inputs */
body.gamepad-navigation-active .MuiOutlinedInput-root input[data-gamepad-focusable="true"]:focus {
  outline: 3px solid #00ff88 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.3) !important;
}

/* Make sure the outline is visible above Material-UI styles */
body.gamepad-navigation-active .MuiTextField-root [data-gamepad-focusable="true"]:focus {
  outline: 3px solid #00ff88 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.3) !important;
  z-index: 1000 !important;
}

/* Ensure focus is visible for buttons and inputs */
[data-gamepad-focusable="true"] {
  transition: outline 0.2s ease, box-shadow 0.2s ease, border-radius 0.2s ease;
}

/* Hide default focus outline when gamepad navigation is not active */
body:not(.gamepad-navigation-active) [data-gamepad-focusable="true"]:focus {
  outline: none !important;
  box-shadow: none !important;
}

/* Scrollable container focus styling */
body.gamepad-navigation-active [data-gamepad-scrollable="true"]:focus {
  outline: 3px solid #00ff88 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.3) !important;
  border-radius: 8px !important;
  position: relative !important;
  z-index: 100 !important;
}

/* Hide scrollable outline when gamepad navigation is not active */
body:not(.gamepad-navigation-active) [data-gamepad-scrollable="true"]:focus {
  outline: none !important;
  box-shadow: none !important;
}
